module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=133)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,"a",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,"b",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,"d",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,"g",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"e",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"f",(function(){return __spread}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}},function(module,exports){module.exports=require("vscode")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DELIMITER_START_REPLACE_REGEX=exports.DELIMITER_START_REGEX=exports.TREE_SEP=exports.DOCS_ROOT_URL=exports.ENV=exports.AUTHOR=exports.DISPLAY_NAME=exports.EXT_CONFIG_NAMESPACE=exports.EXT_NAMESPACE=exports.VERSION=void 0,exports.VERSION="1.0.0",exports.EXT_NAMESPACE="sqltools",exports.EXT_CONFIG_NAMESPACE="sqltools",exports.DISPLAY_NAME="SQLTools".replace(/^"/,"").replace(/"$/,""),exports.AUTHOR="Matheus Teixeira <me@mteixeira.dev>",exports.ENV="production",exports.DOCS_ROOT_URL="https://vscode-sqltools.mteixeira.dev",exports.TREE_SEP="/-##-/",exports.DELIMITER_START_REGEX=/(?:[\r\n]+)(\s*-{2,}\s*@block.*)$/gimu,exports.DELIMITER_START_REPLACE_REGEX=/^(\s*-{2,}\s*@block.*)$/gimu},,function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14);exports.ErrorCodes=vscode_jsonrpc_1.ErrorCodes,exports.ResponseError=vscode_jsonrpc_1.ResponseError,exports.CancellationToken=vscode_jsonrpc_1.CancellationToken,exports.CancellationTokenSource=vscode_jsonrpc_1.CancellationTokenSource,exports.Disposable=vscode_jsonrpc_1.Disposable,exports.Event=vscode_jsonrpc_1.Event,exports.Emitter=vscode_jsonrpc_1.Emitter,exports.Trace=vscode_jsonrpc_1.Trace,exports.TraceFormat=vscode_jsonrpc_1.TraceFormat,exports.SetTraceNotification=vscode_jsonrpc_1.SetTraceNotification,exports.LogTraceNotification=vscode_jsonrpc_1.LogTraceNotification,exports.RequestType=vscode_jsonrpc_1.RequestType,exports.RequestType0=vscode_jsonrpc_1.RequestType0,exports.NotificationType=vscode_jsonrpc_1.NotificationType,exports.NotificationType0=vscode_jsonrpc_1.NotificationType0,exports.MessageReader=vscode_jsonrpc_1.MessageReader,exports.MessageWriter=vscode_jsonrpc_1.MessageWriter,exports.ConnectionStrategy=vscode_jsonrpc_1.ConnectionStrategy,exports.StreamMessageReader=vscode_jsonrpc_1.StreamMessageReader,exports.StreamMessageWriter=vscode_jsonrpc_1.StreamMessageWriter,exports.IPCMessageReader=vscode_jsonrpc_1.IPCMessageReader,exports.IPCMessageWriter=vscode_jsonrpc_1.IPCMessageWriter,exports.createClientPipeTransport=vscode_jsonrpc_1.createClientPipeTransport,exports.createServerPipeTransport=vscode_jsonrpc_1.createServerPipeTransport,exports.generateRandomPipeName=vscode_jsonrpc_1.generateRandomPipeName,exports.createClientSocketTransport=vscode_jsonrpc_1.createClientSocketTransport,exports.createServerSocketTransport=vscode_jsonrpc_1.createServerSocketTransport,exports.ProgressType=vscode_jsonrpc_1.ProgressType,__export(__webpack_require__(203)),__export(__webpack_require__(204));const callHierarchy=__webpack_require__(215),st=__webpack_require__(216);!function(Proposed){let CallHierarchyPrepareRequest,CallHierarchyIncomingCallsRequest,CallHierarchyOutgoingCallsRequest,SemanticTokensRequest,SemanticTokensEditsRequest,SemanticTokensRangeRequest;!function(CallHierarchyPrepareRequest){CallHierarchyPrepareRequest.method=callHierarchy.CallHierarchyPrepareRequest.method,CallHierarchyPrepareRequest.type=callHierarchy.CallHierarchyPrepareRequest.type}(CallHierarchyPrepareRequest=Proposed.CallHierarchyPrepareRequest||(Proposed.CallHierarchyPrepareRequest={})),function(CallHierarchyIncomingCallsRequest){CallHierarchyIncomingCallsRequest.method=callHierarchy.CallHierarchyIncomingCallsRequest.method,CallHierarchyIncomingCallsRequest.type=callHierarchy.CallHierarchyIncomingCallsRequest.type}(CallHierarchyIncomingCallsRequest=Proposed.CallHierarchyIncomingCallsRequest||(Proposed.CallHierarchyIncomingCallsRequest={})),function(CallHierarchyOutgoingCallsRequest){CallHierarchyOutgoingCallsRequest.method=callHierarchy.CallHierarchyOutgoingCallsRequest.method,CallHierarchyOutgoingCallsRequest.type=callHierarchy.CallHierarchyOutgoingCallsRequest.type}(CallHierarchyOutgoingCallsRequest=Proposed.CallHierarchyOutgoingCallsRequest||(Proposed.CallHierarchyOutgoingCallsRequest={})),Proposed.SemanticTokenTypes=st.SemanticTokenTypes,Proposed.SemanticTokenModifiers=st.SemanticTokenModifiers,Proposed.SemanticTokens=st.SemanticTokens,function(SemanticTokensRequest){SemanticTokensRequest.method=st.SemanticTokensRequest.method,SemanticTokensRequest.type=st.SemanticTokensRequest.type}(SemanticTokensRequest=Proposed.SemanticTokensRequest||(Proposed.SemanticTokensRequest={})),function(SemanticTokensEditsRequest){SemanticTokensEditsRequest.method=st.SemanticTokensEditsRequest.method,SemanticTokensEditsRequest.type=st.SemanticTokensEditsRequest.type}(SemanticTokensEditsRequest=Proposed.SemanticTokensEditsRequest||(Proposed.SemanticTokensEditsRequest={})),function(SemanticTokensRangeRequest){SemanticTokensRangeRequest.method=st.SemanticTokensRangeRequest.method,SemanticTokensRangeRequest.type=st.SemanticTokensRangeRequest.type}(SemanticTokensRangeRequest=Proposed.SemanticTokensRangeRequest||(Proposed.SemanticTokensRangeRequest={}))}(exports.Proposed||(exports.Proposed={})),exports.createProtocolConnection=function(reader,writer,logger,strategy){return vscode_jsonrpc_1.createMessageConnection(reader,writer,logger,strategy)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return dynamicRequire})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isNodeEnv})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getGlobalObject})),__webpack_require__.d(__webpack_exports__,"n",(function(){return uuid4})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getEventDescription})),__webpack_require__.d(__webpack_exports__,"d",(function(){return consoleSandbox})),__webpack_require__.d(__webpack_exports__,"c",(function(){return addExceptionTypeValue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addExceptionMechanism})),__webpack_require__.d(__webpack_exports__,"i",(function(){return htmlTreeAsString})),__webpack_require__.d(__webpack_exports__,"m",(function(){return timestampWithMs})),__webpack_require__.d(__webpack_exports__,"l",(function(){return parseSemver})),__webpack_require__.d(__webpack_exports__,"k",(function(){return parseRetryAfterHeader})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getFunctionName})),__webpack_require__.d(__webpack_exports__,"a",(function(){return addContextToFrame}));var _is__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23);function dynamicRequire(mod,request){return mod.require(request)}function isNodeEnv(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var fallbackGlobalObject={};function getGlobalObject(){return isNodeEnv()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:fallbackGlobalObject}function uuid4(){var global=getGlobalObject(),crypto=global.crypto||global.msCrypto;if(void 0!==crypto&&crypto.getRandomValues){var arr=new Uint16Array(8);crypto.getRandomValues(arr),arr[3]=4095&arr[3]|16384,arr[4]=16383&arr[4]|32768;var pad=function(num){for(var v=num.toString(16);v.length<4;)v="0"+v;return v};return pad(arr[0])+pad(arr[1])+pad(arr[2])+pad(arr[3])+pad(arr[4])+pad(arr[5])+pad(arr[6])+pad(arr[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}function getEventDescription(event){if(event.message)return event.message;if(event.exception&&event.exception.values&&event.exception.values[0]){var exception=event.exception.values[0];return exception.type&&exception.value?exception.type+": "+exception.value:exception.type||exception.value||event.event_id||"<unknown>"}return event.event_id||"<unknown>"}function consoleSandbox(callback){var global=getGlobalObject();if(!("console"in global))return callback();var originalConsole=global.console,wrappedLevels={};["debug","info","warn","error","log","assert"].forEach((function(level){level in global.console&&originalConsole[level].__sentry_original__&&(wrappedLevels[level]=originalConsole[level],originalConsole[level]=originalConsole[level].__sentry_original__)}));var result=callback();return Object.keys(wrappedLevels).forEach((function(level){originalConsole[level]=wrappedLevels[level]})),result}function addExceptionTypeValue(event,value,type){event.exception=event.exception||{},event.exception.values=event.exception.values||[],event.exception.values[0]=event.exception.values[0]||{},event.exception.values[0].value=event.exception.values[0].value||value||"",event.exception.values[0].type=event.exception.values[0].type||type||"Error"}function addExceptionMechanism(event,mechanism){void 0===mechanism&&(mechanism={});try{event.exception.values[0].mechanism=event.exception.values[0].mechanism||{},Object.keys(mechanism).forEach((function(key){event.exception.values[0].mechanism[key]=mechanism[key]}))}catch(_oO){}}function htmlTreeAsString(elem){try{for(var currentElem=elem,out=[],height=0,len=0,sepLength=" > ".length,nextStr=void 0;currentElem&&height++<5&&!("html"===(nextStr=_htmlElementAsString(currentElem))||height>1&&len+out.length*sepLength+nextStr.length>=80);)out.push(nextStr),len+=nextStr.length,currentElem=currentElem.parentNode;return out.reverse().join(" > ")}catch(_oO){return"<unknown>"}}function _htmlElementAsString(el){var className,classes,key,attr,i,elem=el,out=[];if(!elem||!elem.tagName)return"";if(out.push(elem.tagName.toLowerCase()),elem.id&&out.push("#"+elem.id),(className=elem.className)&&Object(_is__WEBPACK_IMPORTED_MODULE_0__.h)(className))for(classes=className.split(/\s+/),i=0;i<classes.length;i++)out.push("."+classes[i]);var attrWhitelist=["type","name","title","alt"];for(i=0;i<attrWhitelist.length;i++)key=attrWhitelist[i],(attr=elem.getAttribute(key))&&out.push("["+key+'="'+attr+'"]');return out.join("")}function timestampWithMs(){return(new Date).getTime()/1e3}var SEMVER_REGEXP=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function parseSemver(input){var match=input.match(SEMVER_REGEXP)||[],major=parseInt(match[1],10),minor=parseInt(match[2],10),patch=parseInt(match[3],10);return{buildmetadata:match[5],major:isNaN(major)?void 0:major,minor:isNaN(minor)?void 0:minor,patch:isNaN(patch)?void 0:patch,prerelease:match[4]}}function parseRetryAfterHeader(now,header){if(!header)return 6e4;var headerDelay=parseInt(""+header,10);if(!isNaN(headerDelay))return 1e3*headerDelay;var headerDate=Date.parse(""+header);return isNaN(headerDate)?6e4:headerDate-now}function getFunctionName(fn){try{return fn&&"function"==typeof fn&&fn.name||"<anonymous>"}catch(e){return"<anonymous>"}}function addContextToFrame(lines,frame,linesOfContext){void 0===linesOfContext&&(linesOfContext=5);var lineno=frame.lineno||0,maxLines=lines.length,sourceLine=Math.max(Math.min(maxLines,lineno-1),0);frame.pre_context=lines.slice(Math.max(0,sourceLine-linesOfContext),sourceLine).map((function(line){return Object(_string__WEBPACK_IMPORTED_MODULE_1__.b)(line,0)})),frame.context_line=Object(_string__WEBPACK_IMPORTED_MODULE_1__.b)(lines[Math.min(maxLines-1,sourceLine)],frame.colno||0),frame.post_context=lines.slice(Math.min(sourceLine+1,maxLines),sourceLine+1+linesOfContext).map((function(line){return Object(_string__WEBPACK_IMPORTED_MODULE_1__.b)(line,0)}))}},function(module,exports){module.exports=require("fs")},function(module,__webpack_exports__,__webpack_require__){"use strict";function isError(wat){switch(Object.prototype.toString.call(wat)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(wat,Error)}}function isString(wat){return"[object String]"===Object.prototype.toString.call(wat)}function isPrimitive(wat){return null===wat||"object"!=typeof wat&&"function"!=typeof wat}function isPlainObject(wat){return"[object Object]"===Object.prototype.toString.call(wat)}function isEvent(wat){return"undefined"!=typeof Event&&isInstanceOf(wat,Event)}function isElement(wat){return"undefined"!=typeof Element&&isInstanceOf(wat,Element)}function isRegExp(wat){return"[object RegExp]"===Object.prototype.toString.call(wat)}function isThenable(wat){return Boolean(wat&&wat.then&&"function"==typeof wat.then)}function isSyntheticEvent(wat){return isPlainObject(wat)&&"nativeEvent"in wat&&"preventDefault"in wat&&"stopPropagation"in wat}function isInstanceOf(wat,base){try{return wat instanceof base}catch(_e){return!1}}__webpack_require__.d(__webpack_exports__,"b",(function(){return isError})),__webpack_require__.d(__webpack_exports__,"h",(function(){return isString})),__webpack_require__.d(__webpack_exports__,"f",(function(){return isPrimitive})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isPlainObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return isEvent})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isElement})),__webpack_require__.d(__webpack_exports__,"g",(function(){return isRegExp})),__webpack_require__.d(__webpack_exports__,"j",(function(){return isThenable})),__webpack_require__.d(__webpack_exports__,"i",(function(){return isSyntheticEvent})),__webpack_require__.d(__webpack_exports__,"d",(function(){return isInstanceOf}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCurrentContext=void 0;const exception_1=__webpack_require__(27);let currentContext={};const queue=[],onRegister=cb=>queue.push(cb);exports.setCurrentContext=ctx=>{currentContext=ctx,queue.forEach(cb=>cb())};const Context=new Proxy(currentContext,{get:(_,prop)=>"set"===prop?exports.setCurrentContext:"onRegister"===prop?onRegister:currentContext[prop],set(){throw new exception_1.InvalidActionError("Cannot set values to extension context directly!")}});exports.default=Context},function(module,exports){module.exports=require("path")},function(module,exports,__webpack_require__){"use strict";let logger;Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLogger=void 0;logger=(()=>{try{return!0}catch(error){return!1}})()?__webpack_require__(135).default:__webpack_require__(166).default,exports.createLogger=function(ns,bindings={}){return ns?logger.child({...bindings,ns:ns}):logger},exports.default=logger},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14);class ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0{constructor(method){super(method)}}exports.ProtocolRequestType0=ProtocolRequestType0;class ProtocolRequestType extends vscode_jsonrpc_1.RequestType{constructor(method){super(method)}}exports.ProtocolRequestType=ProtocolRequestType;class ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType{constructor(method){super(method)}}exports.ProtocolNotificationType=ProtocolNotificationType;class ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0{constructor(method){super(method)}}exports.ProtocolNotificationType0=ProtocolNotificationType0},function(module,exports,__webpack_require__){"use strict";let Config;Object.defineProperty(exports,"__esModule",{value:!0}),Config=__webpack_require__(175).default,exports.default=Config},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),c2p=__webpack_require__(217),p2c=__webpack_require__(218),Is=__webpack_require__(30),async_1=__webpack_require__(219),UUID=__webpack_require__(98),progressPart_1=__webpack_require__(99);!function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(4));class ConsoleLogger{error(message){console.error(message)}warn(message){console.warn(message)}info(message){console.info(message)}log(message){console.log(message)}}var ErrorAction,CloseAction,RevealOutputChannelOn,State,ClientState;!function(ErrorAction){ErrorAction[ErrorAction.Continue=1]="Continue",ErrorAction[ErrorAction.Shutdown=2]="Shutdown"}(ErrorAction=exports.ErrorAction||(exports.ErrorAction={})),function(CloseAction){CloseAction[CloseAction.DoNotRestart=1]="DoNotRestart",CloseAction[CloseAction.Restart=2]="Restart"}(CloseAction=exports.CloseAction||(exports.CloseAction={}));class DefaultErrorHandler{constructor(name){this.name=name,this.restarts=[]}error(_error,_message,count){return count&&count<=3?ErrorAction.Continue:ErrorAction.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return CloseAction.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),CloseAction.DoNotRestart):(this.restarts.shift(),CloseAction.Restart)}}!function(RevealOutputChannelOn){RevealOutputChannelOn[RevealOutputChannelOn.Info=1]="Info",RevealOutputChannelOn[RevealOutputChannelOn.Warn=2]="Warn",RevealOutputChannelOn[RevealOutputChannelOn.Error=3]="Error",RevealOutputChannelOn[RevealOutputChannelOn.Never=4]="Never"}(RevealOutputChannelOn=exports.RevealOutputChannelOn||(exports.RevealOutputChannelOn={})),function(State){State[State.Stopped=1]="Stopped",State[State.Starting=3]="Starting",State[State.Running=2]="Running"}(State=exports.State||(exports.State={})),function(ClientState){ClientState[ClientState.Initial=0]="Initial",ClientState[ClientState.Starting=1]="Starting",ClientState[ClientState.StartFailed=2]="StartFailed",ClientState[ClientState.Running=3]="Running",ClientState[ClientState.Stopping=4]="Stopping",ClientState[ClientState.Stopped=5]="Stopped"}(ClientState||(ClientState={}));const SupportedSymbolKinds=[vscode_languageserver_protocol_1.SymbolKind.File,vscode_languageserver_protocol_1.SymbolKind.Module,vscode_languageserver_protocol_1.SymbolKind.Namespace,vscode_languageserver_protocol_1.SymbolKind.Package,vscode_languageserver_protocol_1.SymbolKind.Class,vscode_languageserver_protocol_1.SymbolKind.Method,vscode_languageserver_protocol_1.SymbolKind.Property,vscode_languageserver_protocol_1.SymbolKind.Field,vscode_languageserver_protocol_1.SymbolKind.Constructor,vscode_languageserver_protocol_1.SymbolKind.Enum,vscode_languageserver_protocol_1.SymbolKind.Interface,vscode_languageserver_protocol_1.SymbolKind.Function,vscode_languageserver_protocol_1.SymbolKind.Variable,vscode_languageserver_protocol_1.SymbolKind.Constant,vscode_languageserver_protocol_1.SymbolKind.String,vscode_languageserver_protocol_1.SymbolKind.Number,vscode_languageserver_protocol_1.SymbolKind.Boolean,vscode_languageserver_protocol_1.SymbolKind.Array,vscode_languageserver_protocol_1.SymbolKind.Object,vscode_languageserver_protocol_1.SymbolKind.Key,vscode_languageserver_protocol_1.SymbolKind.Null,vscode_languageserver_protocol_1.SymbolKind.EnumMember,vscode_languageserver_protocol_1.SymbolKind.Struct,vscode_languageserver_protocol_1.SymbolKind.Event,vscode_languageserver_protocol_1.SymbolKind.Operator,vscode_languageserver_protocol_1.SymbolKind.TypeParameter],SupportedCompletionItemKinds=[vscode_languageserver_protocol_1.CompletionItemKind.Text,vscode_languageserver_protocol_1.CompletionItemKind.Method,vscode_languageserver_protocol_1.CompletionItemKind.Function,vscode_languageserver_protocol_1.CompletionItemKind.Constructor,vscode_languageserver_protocol_1.CompletionItemKind.Field,vscode_languageserver_protocol_1.CompletionItemKind.Variable,vscode_languageserver_protocol_1.CompletionItemKind.Class,vscode_languageserver_protocol_1.CompletionItemKind.Interface,vscode_languageserver_protocol_1.CompletionItemKind.Module,vscode_languageserver_protocol_1.CompletionItemKind.Property,vscode_languageserver_protocol_1.CompletionItemKind.Unit,vscode_languageserver_protocol_1.CompletionItemKind.Value,vscode_languageserver_protocol_1.CompletionItemKind.Enum,vscode_languageserver_protocol_1.CompletionItemKind.Keyword,vscode_languageserver_protocol_1.CompletionItemKind.Snippet,vscode_languageserver_protocol_1.CompletionItemKind.Color,vscode_languageserver_protocol_1.CompletionItemKind.File,vscode_languageserver_protocol_1.CompletionItemKind.Reference,vscode_languageserver_protocol_1.CompletionItemKind.Folder,vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,vscode_languageserver_protocol_1.CompletionItemKind.Constant,vscode_languageserver_protocol_1.CompletionItemKind.Struct,vscode_languageserver_protocol_1.CompletionItemKind.Event,vscode_languageserver_protocol_1.CompletionItemKind.Operator,vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter];function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}var DynamicFeature;!function(DynamicFeature){DynamicFeature.is=function(value){let candidate=value;return candidate&&Is.func(candidate.register)&&Is.func(candidate.unregister)&&Is.func(candidate.dispose)&&void 0!==candidate.messages}}(DynamicFeature||(DynamicFeature={}));class DocumentNotifiactions{constructor(_client,_event,_type,_middleware,_createParams,_selectorFilter){this._client=_client,this._event=_event,this._type=_type,this._middleware=_middleware,this._createParams=_createParams,this._selectorFilter=_selectorFilter,this._selectors=new Map}static textDocumentFilter(selectors,textDocument){for(const selector of selectors)if(vscode_1.languages.match(selector,textDocument))return!0;return!1}register(_message,data){data.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(data.id,data.registerOptions.documentSelector))}callback(data){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),data)||(this._middleware?this._middleware(data,data=>this._client.sendNotification(this._type,this._createParams(data))):this._client.sendNotification(this._type,this._createParams(data)),this.notificationSent(data))}notificationSent(_data){}unregister(id){this._selectors.delete(id),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(document){for(const selector of this._selectors.values())if(vscode_1.languages.match(selector,document))return{send:data=>{this.callback(data)}};throw new Error("No provider available for the given text document")}}class DidOpenTextDocumentFeature extends DocumentNotifiactions{constructor(client,_syncedDocuments){super(client,vscode_1.workspace.onDidOpenTextDocument,vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,client.clientOptions.middleware.didOpen,textDocument=>client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument),DocumentNotifiactions.textDocumentFilter),this._syncedDocuments=_syncedDocuments}get messages(){return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.openClose&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}register(message,data){if(super.register(message,data),!data.registerOptions.documentSelector)return;let documentSelector=data.registerOptions.documentSelector;vscode_1.workspace.textDocuments.forEach(textDocument=>{let uri=textDocument.uri.toString();if(!this._syncedDocuments.has(uri)&&vscode_1.languages.match(documentSelector,textDocument)){let middleware=this._client.clientOptions.middleware,didOpen=textDocument=>{this._client.sendNotification(this._type,this._createParams(textDocument))};middleware.didOpen?middleware.didOpen(textDocument,didOpen):didOpen(textDocument),this._syncedDocuments.set(uri,textDocument)}})}notificationSent(textDocument){super.notificationSent(textDocument),this._syncedDocuments.set(textDocument.uri.toString(),textDocument)}}class DidCloseTextDocumentFeature extends DocumentNotifiactions{constructor(client,_syncedDocuments){super(client,vscode_1.workspace.onDidCloseTextDocument,vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,client.clientOptions.middleware.didClose,textDocument=>client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument),DocumentNotifiactions.textDocumentFilter),this._syncedDocuments=_syncedDocuments}get messages(){return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.openClose&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}notificationSent(textDocument){super.notificationSent(textDocument),this._syncedDocuments.delete(textDocument.uri.toString())}unregister(id){let selector=this._selectors.get(id);super.unregister(id);let selectors=this._selectors.values();this._syncedDocuments.forEach(textDocument=>{if(vscode_1.languages.match(selector,textDocument)&&!this._selectorFilter(selectors,textDocument)){let middleware=this._client.clientOptions.middleware,didClose=textDocument=>{this._client.sendNotification(this._type,this._createParams(textDocument))};this._syncedDocuments.delete(textDocument.uri.toString()),middleware.didClose?middleware.didClose(textDocument,didClose):didClose(textDocument)}})}}class DidChangeTextDocumentFeature{constructor(_client){this._client=_client,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&void 0!==textDocumentSyncOptions.change&&textDocumentSyncOptions.change!==vscode_languageserver_protocol_1.TextDocumentSyncKind.None&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},{syncKind:textDocumentSyncOptions.change})})}register(_message,data){data.registerOptions.documentSelector&&(this._listener||(this._listener=vscode_1.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(data.id,{documentSelector:data.registerOptions.documentSelector,syncKind:data.registerOptions.syncKind}))}callback(event){if(0!==event.contentChanges.length)for(const changeData of this._changeData.values())if(vscode_1.languages.match(changeData.documentSelector,event.document)){let middleware=this._client.clientOptions.middleware;if(changeData.syncKind===vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental){let params=this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);middleware.didChange?middleware.didChange(event,()=>this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params)):this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params)}else if(changeData.syncKind===vscode_languageserver_protocol_1.TextDocumentSyncKind.Full){let didChange=event=>{this._changeDelayer?(this._changeDelayer.uri!==event.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=event.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document))})):(this._changeDelayer={uri:event.document.uri.toString(),delayer:new async_1.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document))},-1))};middleware.didChange?middleware.didChange(event,didChange):didChange(event)}}}unregister(id){this._changeData.delete(id),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(document){for(const changeData of this._changeData.values())if(vscode_1.languages.match(changeData.documentSelector,document))return{send:event=>{this.callback(event)}};throw new Error("No provider available for the given text document")}}class WillSaveFeature extends DocumentNotifiactions{constructor(client){super(client,vscode_1.workspace.onWillSaveTextDocument,vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type,client.clientOptions.middleware.willSave,willSaveEvent=>client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent),(selectors,willSaveEvent)=>DocumentNotifiactions.textDocumentFilter(selectors,willSaveEvent.document))}get messages(){return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").willSave=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.willSave&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}}class WillSaveWaitUntilFeature{constructor(_client){this._client=_client,this._selectors=new Map}get messages(){return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.willSaveWaitUntil&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{documentSelector:documentSelector}})}register(_message,data){data.registerOptions.documentSelector&&(this._listener||(this._listener=vscode_1.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(data.id,data.registerOptions.documentSelector))}callback(event){if(DocumentNotifiactions.textDocumentFilter(this._selectors.values(),event.document)){let middleware=this._client.clientOptions.middleware,willSaveWaitUntil=event=>this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then(edits=>{let vEdits=this._client.protocol2CodeConverter.asTextEdits(edits);return void 0===vEdits?[]:vEdits});event.waitUntil(middleware.willSaveWaitUntil?middleware.willSaveWaitUntil(event,willSaveWaitUntil):willSaveWaitUntil(event))}}unregister(id){this._selectors.delete(id),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class DidSaveTextDocumentFeature extends DocumentNotifiactions{constructor(client){super(client,vscode_1.workspace.onDidSaveTextDocument,vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,client.clientOptions.middleware.didSave,textDocument=>client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument,this._includeText),DocumentNotifiactions.textDocumentFilter)}get messages(){return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"textDocument"),"synchronization").didSave=!0}initialize(capabilities,documentSelector){let textDocumentSyncOptions=capabilities.resolvedTextDocumentSync;documentSelector&&textDocumentSyncOptions&&textDocumentSyncOptions.save&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},{documentSelector:documentSelector},{includeText:!!textDocumentSyncOptions.save.includeText})})}register(method,data){this._includeText=!!data.registerOptions.includeText,super.register(method,data)}}class FileSystemWatcherFeature{constructor(_client,_notifyFileEvent){this._client=_client,this._notifyFileEvent=_notifyFileEvent,this._watchers=new Map}get messages(){return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(_capabilities,_documentSelector){}register(_method,data){if(!Array.isArray(data.registerOptions.watchers))return;let disposeables=[];for(let watcher of data.registerOptions.watchers){if(!Is.string(watcher.globPattern))continue;let watchCreate=!0,watchChange=!0,watchDelete=!0;void 0!==watcher.kind&&null!==watcher.kind&&(watchCreate=0!=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Create),watchChange=0!=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Change),watchDelete=0!=(watcher.kind&vscode_languageserver_protocol_1.WatchKind.Delete));let fileSystemWatcher=vscode_1.workspace.createFileSystemWatcher(watcher.globPattern,!watchCreate,!watchChange,!watchDelete);this.hookListeners(fileSystemWatcher,watchCreate,watchChange,watchDelete),disposeables.push(fileSystemWatcher)}this._watchers.set(data.id,disposeables)}registerRaw(id,fileSystemWatchers){let disposeables=[];for(let fileSystemWatcher of fileSystemWatchers)this.hookListeners(fileSystemWatcher,!0,!0,!0,disposeables);this._watchers.set(id,disposeables)}hookListeners(fileSystemWatcher,watchCreate,watchChange,watchDelete,listeners){watchCreate&&fileSystemWatcher.onDidCreate(resource=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Created}),null,listeners),watchChange&&fileSystemWatcher.onDidChange(resource=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Changed}),null,listeners),watchDelete&&fileSystemWatcher.onDidDelete(resource=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(resource),type:vscode_languageserver_protocol_1.FileChangeType.Deleted}),null,listeners)}unregister(id){let disposeables=this._watchers.get(id);if(disposeables)for(let disposable of disposeables)disposable.dispose()}dispose(){this._watchers.forEach(disposeables=>{for(let disposable of disposeables)disposable.dispose()}),this._watchers.clear()}}class TextDocumentFeature{constructor(_client,_message){this._client=_client,this._message=_message,this._registrations=new Map}get messages(){return this._message}register(message,data){if(message.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);if(!data.registerOptions.documentSelector)return;let registration=this.registerLanguageProvider(data.registerOptions);this._registrations.set(data.id,{disposable:registration[0],data:data,provider:registration[1]})}unregister(id){let registration=this._registrations.get(id);void 0!==registration&&registration.disposable.dispose()}dispose(){this._registrations.forEach(value=>{value.disposable.dispose()}),this._registrations.clear()}getRegistration(documentSelector,capability){if(!capability)return[void 0,void 0];if(vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)){const id=vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability)?capability.id:UUID.generateUuid(),selector=capability.documentSelector||documentSelector;if(selector)return[id,Object.assign({},capability,{documentSelector:selector})]}else if(Is.boolean(capability)&&!0===capability||vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)){if(!documentSelector)return[void 0,void 0];let options=Is.boolean(capability)&&!0===capability?{documentSelector:documentSelector}:Object.assign({},capability,{documentSelector:documentSelector});return[UUID.generateUuid(),options]}return[void 0,void 0]}getRegistrationOptions(documentSelector,capability){if(documentSelector&&capability)return Is.boolean(capability)&&!0===capability?{documentSelector:documentSelector}:Object.assign({},capability,{documentSelector:documentSelector})}getProvider(textDocument){for(const registration of this._registrations.values()){let selector=registration.data.registerOptions.documentSelector;if(null!==selector&&vscode_1.languages.match(selector,textDocument))return registration.provider}throw new Error("The feature has no registration for the provided text document "+textDocument.uri.toString())}}exports.TextDocumentFeature=TextDocumentFeature;class CompletionItemFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.CompletionRequest.type)}fillClientCapabilities(capabilites){let completion=ensure(ensure(capabilites,"textDocument"),"completion");completion.dynamicRegistration=!0,completion.contextSupport=!0,completion.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[vscode_languageserver_protocol_1.CompletionItemTag.Deprecated]}},completion.completionItemKind={valueSet:SupportedCompletionItemKinds}}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.completionProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const triggerCharacters=options.triggerCharacters||[],provider={provideCompletionItems:(document,position,token,context)=>{const client=this._client,middleware=this._client.clientOptions.middleware,provideCompletionItems=(document,position,context,token)=>client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type,client.code2ProtocolConverter.asCompletionParams(document,position,context),token).then(client.protocol2CodeConverter.asCompletionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type,error),Promise.resolve([])));return middleware.provideCompletionItem?middleware.provideCompletionItem(document,position,context,token,provideCompletionItems):provideCompletionItems(document,position,context,token)},resolveCompletionItem:options.resolveProvider?(item,token)=>{const client=this._client,middleware=this._client.clientOptions.middleware,resolveCompletionItem=(item,token)=>client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,client.code2ProtocolConverter.asCompletionItem(item),token).then(client.protocol2CodeConverter.asCompletionItem,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type,error),Promise.resolve(item)));return middleware.resolveCompletionItem?middleware.resolveCompletionItem(item,token,resolveCompletionItem):resolveCompletionItem(item,token)}:void 0};return[vscode_1.languages.registerCompletionItemProvider(options.documentSelector,provider,...triggerCharacters),provider]}}class HoverFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.HoverRequest.type)}fillClientCapabilities(capabilites){const hoverCapability=ensure(ensure(capabilites,"textDocument"),"hover");hoverCapability.dynamicRegistration=!0,hoverCapability.contentFormat=[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText]}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.hoverProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideHover:(document,position,token)=>{const client=this._client,provideHover=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asHover,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return middleware.provideHover?middleware.provideHover(document,position,token,provideHover):provideHover(document,position,token)}};return[vscode_1.languages.registerHoverProvider(options.documentSelector,provider),provider]}}class SignatureHelpFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.SignatureHelpRequest.type)}fillClientCapabilities(capabilites){let config=ensure(ensure(capabilites,"textDocument"),"signatureHelp");config.dynamicRegistration=!0,config.signatureInformation={documentationFormat:[vscode_languageserver_protocol_1.MarkupKind.Markdown,vscode_languageserver_protocol_1.MarkupKind.PlainText]},config.signatureInformation.parameterInformation={labelOffsetSupport:!0},config.contextSupport=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.signatureHelpProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideSignatureHelp:(document,position,token,context)=>{const client=this._client,providerSignatureHelp=(document,position,context,token)=>client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,client.code2ProtocolConverter.asSignatureHelpParams(document,position,context),token).then(client.protocol2CodeConverter.asSignatureHelp,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return middleware.provideSignatureHelp?middleware.provideSignatureHelp(document,position,context,token,providerSignatureHelp):providerSignatureHelp(document,position,context,token)}};let disposable;if(void 0===options.retriggerCharacters){const triggerCharacters=options.triggerCharacters||[];disposable=vscode_1.languages.registerSignatureHelpProvider(options.documentSelector,provider,...triggerCharacters)}else{const metaData={triggerCharacters:options.triggerCharacters||[],retriggerCharacters:options.retriggerCharacters||[]};disposable=vscode_1.languages.registerSignatureHelpProvider(options.documentSelector,provider,metaData)}return[disposable,provider]}}class DefinitionFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DefinitionRequest.type)}fillClientCapabilities(capabilites){let definitionSupport=ensure(ensure(capabilites,"textDocument"),"definition");definitionSupport.dynamicRegistration=!0,definitionSupport.linkSupport=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.definitionProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideDefinition:(document,position,token)=>{const client=this._client,provideDefinition=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDefinitionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return middleware.provideDefinition?middleware.provideDefinition(document,position,token,provideDefinition):provideDefinition(document,position,token)}};return[vscode_1.languages.registerDefinitionProvider(options.documentSelector,provider),provider]}}class ReferencesFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.ReferencesRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"references").dynamicRegistration=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.referencesProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideReferences:(document,position,options,token)=>{const client=this._client,_providerReferences=(document,position,options,token)=>client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,client.code2ProtocolConverter.asReferenceParams(document,position,options),token).then(client.protocol2CodeConverter.asReferences,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return middleware.provideReferences?middleware.provideReferences(document,position,options,token,_providerReferences):_providerReferences(document,position,options,token)}};return[vscode_1.languages.registerReferenceProvider(options.documentSelector,provider),provider]}}class DocumentHighlightFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentHighlightRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.documentHighlightProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideDocumentHighlights:(document,position,token)=>{const client=this._client,_provideDocumentHighlights=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDocumentHighlights,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return middleware.provideDocumentHighlights?middleware.provideDocumentHighlights(document,position,token,_provideDocumentHighlights):_provideDocumentHighlights(document,position,token)}};return[vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector,provider),provider]}}class DocumentSymbolFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentSymbolRequest.type)}fillClientCapabilities(capabilites){let symbolCapabilities=ensure(ensure(capabilites,"textDocument"),"documentSymbol");symbolCapabilities.dynamicRegistration=!0,symbolCapabilities.symbolKind={valueSet:SupportedSymbolKinds},symbolCapabilities.hierarchicalDocumentSymbolSupport=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.documentSymbolProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideDocumentSymbols:(document,token)=>{const client=this._client,_provideDocumentSymbols=(document,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,client.code2ProtocolConverter.asDocumentSymbolParams(document),token).then(data=>{if(null!==data){if(0===data.length)return[];{let element=data[0];return vscode_languageserver_protocol_1.DocumentSymbol.is(element)?client.protocol2CodeConverter.asDocumentSymbols(data):client.protocol2CodeConverter.asSymbolInformations(data)}}},error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return middleware.provideDocumentSymbols?middleware.provideDocumentSymbols(document,token,_provideDocumentSymbols):_provideDocumentSymbols(document,token)}};return[vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector,provider),provider]}}class WorkspaceSymbolFeature extends class WorkspaceFeature{constructor(_client,_message){this._client=_client,this._message=_message,this._registrations=new Map}get messages(){return this._message}register(message,data){if(message.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);const registration=this.registerLanguageProvider(data.registerOptions);this._registrations.set(data.id,{disposable:registration[0],provider:registration[1]})}unregister(id){let registration=this._registrations.get(id);void 0!==registration&&registration.disposable.dispose()}dispose(){this._registrations.forEach(registration=>{registration.disposable.dispose()}),this._registrations.clear()}getProviders(){const result=[];for(const registration of this._registrations.values())result.push(registration.provider);return result}}{constructor(client){super(client,vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type)}fillClientCapabilities(capabilites){let symbolCapabilities=ensure(ensure(capabilites,"workspace"),"symbol");symbolCapabilities.dynamicRegistration=!0,symbolCapabilities.symbolKind={valueSet:SupportedSymbolKinds}}initialize(capabilities){capabilities.workspaceSymbolProvider&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:!0===capabilities.workspaceSymbolProvider?{workDoneProgress:!1}:capabilities.workspaceSymbolProvider})}registerLanguageProvider(_options){const provider={provideWorkspaceSymbols:(query,token)=>{const client=this._client,provideWorkspaceSymbols=(query,token)=>client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,{query:query},token).then(client.protocol2CodeConverter.asSymbolInformations,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return middleware.provideWorkspaceSymbols?middleware.provideWorkspaceSymbols(query,token,provideWorkspaceSymbols):provideWorkspaceSymbols(query,token)}};return[vscode_1.languages.registerWorkspaceSymbolProvider(provider),provider]}}class CodeActionFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.CodeActionRequest.type)}fillClientCapabilities(capabilites){const cap=ensure(ensure(capabilites,"textDocument"),"codeAction");cap.dynamicRegistration=!0,cap.isPreferredSupport=!0,cap.codeActionLiteralSupport={codeActionKind:{valueSet:[vscode_languageserver_protocol_1.CodeActionKind.Empty,vscode_languageserver_protocol_1.CodeActionKind.QuickFix,vscode_languageserver_protocol_1.CodeActionKind.Refactor,vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,vscode_languageserver_protocol_1.CodeActionKind.Source,vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports]}}}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.codeActionProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideCodeActions:(document,range,context,token)=>{const client=this._client,_provideCodeActions=(document,range,context,token)=>{const params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),range:client.code2ProtocolConverter.asRange(range),context:client.code2ProtocolConverter.asCodeActionContext(context)};return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,params,token).then(values=>{if(null===values)return;const result=[];for(let item of values)vscode_languageserver_protocol_1.Command.is(item)?result.push(client.protocol2CodeConverter.asCommand(item)):result.push(client.protocol2CodeConverter.asCodeAction(item));return result},error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return middleware.provideCodeActions?middleware.provideCodeActions(document,range,context,token,_provideCodeActions):_provideCodeActions(document,range,context,token)}};return[vscode_1.languages.registerCodeActionsProvider(options.documentSelector,provider,options.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds)}:void 0),provider]}}class CodeLensFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.CodeLensRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.codeLensProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideCodeLenses:(document,token)=>{const client=this._client,provideCodeLenses=(document,token)=>client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,client.code2ProtocolConverter.asCodeLensParams(document),token).then(client.protocol2CodeConverter.asCodeLenses,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return middleware.provideCodeLenses?middleware.provideCodeLenses(document,token,provideCodeLenses):provideCodeLenses(document,token)},resolveCodeLens:options.resolveProvider?(codeLens,token)=>{const client=this._client,resolveCodeLens=(codeLens,token)=>client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,client.code2ProtocolConverter.asCodeLens(codeLens),token).then(client.protocol2CodeConverter.asCodeLens,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type,error),codeLens)),middleware=client.clientOptions.middleware;return middleware.resolveCodeLens?middleware.resolveCodeLens(codeLens,token,resolveCodeLens):resolveCodeLens(codeLens,token)}:void 0};return[vscode_1.languages.registerCodeLensProvider(options.documentSelector,provider),provider]}}class DocumentFormattingFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentFormattingRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"formatting").dynamicRegistration=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.documentFormattingProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideDocumentFormattingEdits:(document,options,token)=>{const client=this._client,provideDocumentFormattingEdits=(document,options,token)=>{const params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),options:client.code2ProtocolConverter.asFormattingOptions(options)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,params,token).then(client.protocol2CodeConverter.asTextEdits,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return middleware.provideDocumentFormattingEdits?middleware.provideDocumentFormattingEdits(document,options,token,provideDocumentFormattingEdits):provideDocumentFormattingEdits(document,options,token)}};return[vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector,provider),provider]}}class DocumentRangeFormattingFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.documentRangeFormattingProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideDocumentRangeFormattingEdits:(document,range,options,token)=>{const client=this._client,provideDocumentRangeFormattingEdits=(document,range,options,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),range:client.code2ProtocolConverter.asRange(range),options:client.code2ProtocolConverter.asFormattingOptions(options)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,params,token).then(client.protocol2CodeConverter.asTextEdits,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type,error),Promise.resolve([])))};let middleware=client.clientOptions.middleware;return middleware.provideDocumentRangeFormattingEdits?middleware.provideDocumentRangeFormattingEdits(document,range,options,token,provideDocumentRangeFormattingEdits):provideDocumentRangeFormattingEdits(document,range,options,token)}};return[vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector,provider),provider]}}class DocumentOnTypeFormattingFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.documentOnTypeFormattingProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideOnTypeFormattingEdits:(document,position,ch,options,token)=>{const client=this._client,provideOnTypeFormattingEdits=(document,position,ch,options,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),position:client.code2ProtocolConverter.asPosition(position),ch:ch,options:client.code2ProtocolConverter.asFormattingOptions(options)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,params,token).then(client.protocol2CodeConverter.asTextEdits,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type,error),Promise.resolve([])))},middleware=client.clientOptions.middleware;return middleware.provideOnTypeFormattingEdits?middleware.provideOnTypeFormattingEdits(document,position,ch,options,token,provideOnTypeFormattingEdits):provideOnTypeFormattingEdits(document,position,ch,options,token)}},moreTriggerCharacter=options.moreTriggerCharacter||[];return[vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector,provider,options.firstTriggerCharacter,...moreTriggerCharacter),provider]}}class RenameFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.RenameRequest.type)}fillClientCapabilities(capabilites){let rename=ensure(ensure(capabilites,"textDocument"),"rename");rename.dynamicRegistration=!0,rename.prepareSupport=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.renameProvider);options&&(Is.boolean(capabilities.renameProvider)&&(options.prepareProvider=!1),this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options}))}registerLanguageProvider(options){const provider={provideRenameEdits:(document,position,newName,token)=>{const client=this._client,provideRenameEdits=(document,position,newName,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),position:client.code2ProtocolConverter.asPosition(position),newName:newName};return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type,params,token).then(client.protocol2CodeConverter.asWorkspaceEdit,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type,error),Promise.reject(new Error(error.message))))},middleware=client.clientOptions.middleware;return middleware.provideRenameEdits?middleware.provideRenameEdits(document,position,newName,token,provideRenameEdits):provideRenameEdits(document,position,newName,token)},prepareRename:options.prepareProvider?(document,position,token)=>{const client=this._client,prepareRename=(document,position,token)=>{let params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),position:client.code2ProtocolConverter.asPosition(position)};return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type,params,token).then(result=>vscode_languageserver_protocol_1.Range.is(result)?client.protocol2CodeConverter.asRange(result):result&&vscode_languageserver_protocol_1.Range.is(result.range)?{range:client.protocol2CodeConverter.asRange(result.range),placeholder:result.placeholder}:Promise.reject(new Error("The element can't be renamed.")),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type,error),Promise.reject(new Error(error.message))))},middleware=client.clientOptions.middleware;return middleware.prepareRename?middleware.prepareRename(document,position,token,prepareRename):prepareRename(document,position,token)}:void 0};return[vscode_1.languages.registerRenameProvider(options.documentSelector,provider),provider]}}class DocumentLinkFeature extends TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentLinkRequest.type)}fillClientCapabilities(capabilites){const documentLinkCapabilities=ensure(ensure(capabilites,"textDocument"),"documentLink");documentLinkCapabilities.dynamicRegistration=!0,documentLinkCapabilities.tooltipSupport=!0}initialize(capabilities,documentSelector){const options=this.getRegistrationOptions(documentSelector,capabilities.documentLinkProvider);options&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:options})}registerLanguageProvider(options){const provider={provideDocumentLinks:(document,token)=>{const client=this._client,provideDocumentLinks=(document,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,client.code2ProtocolConverter.asDocumentLinkParams(document),token).then(client.protocol2CodeConverter.asDocumentLinks,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type,error),Promise.resolve([]))),middleware=client.clientOptions.middleware;return middleware.provideDocumentLinks?middleware.provideDocumentLinks(document,token,provideDocumentLinks):provideDocumentLinks(document,token)},resolveDocumentLink:options.resolveProvider?(link,token)=>{const client=this._client;let resolveDocumentLink=(link,token)=>client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,client.code2ProtocolConverter.asDocumentLink(link),token).then(client.protocol2CodeConverter.asDocumentLink,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type,error),Promise.resolve(link)));const middleware=client.clientOptions.middleware;return middleware.resolveDocumentLink?middleware.resolveDocumentLink(link,token,resolveDocumentLink):resolveDocumentLink(link,token)}:void 0};return[vscode_1.languages.registerDocumentLinkProvider(options.documentSelector,provider),provider]}}class ConfigurationFeature{constructor(_client){this._client=_client,this._listeners=new Map}get messages(){return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let section=this._client.clientOptions.synchronize.configurationSection;void 0!==section&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:{section:section}})}register(_message,data){let disposable=vscode_1.workspace.onDidChangeConfiguration(event=>{this.onDidChangeConfiguration(data.registerOptions.section,event)});this._listeners.set(data.id,disposable),void 0!==data.registerOptions.section&&this.onDidChangeConfiguration(data.registerOptions.section,void 0)}unregister(id){let disposable=this._listeners.get(id);disposable&&(this._listeners.delete(id),disposable.dispose())}dispose(){for(let disposable of this._listeners.values())disposable.dispose();this._listeners.clear()}onDidChangeConfiguration(configurationSection,event){let sections;if(sections=Is.string(configurationSection)?[configurationSection]:configurationSection,void 0!==sections&&void 0!==event){if(!sections.some(section=>event.affectsConfiguration(section)))return}let didChangeConfiguration=sections=>{void 0!==sections?this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(sections)}):this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,{settings:null})},middleware=this.getMiddleware();middleware?middleware(sections,didChangeConfiguration):didChangeConfiguration(sections)}extractSettingsInformation(keys){function ensurePath(config,path){let current=config;for(let i=0;i<path.length-1;i++){let obj=current[path[i]];obj||(obj=Object.create(null),current[path[i]]=obj),current=obj}return current}let resource=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,result=Object.create(null);for(let i=0;i<keys.length;i++){let key=keys[i],index=key.indexOf("."),config=null;if(config=index>=0?vscode_1.workspace.getConfiguration(key.substr(0,index),resource).get(key.substr(index+1)):vscode_1.workspace.getConfiguration(key,resource),config){let path=keys[i].split(".");ensurePath(result,path)[path[path.length-1]]=config}}return result}getMiddleware(){let middleware=this._client.clientOptions.middleware;return middleware.workspace&&middleware.workspace.didChangeConfiguration?middleware.workspace.didChangeConfiguration:void 0}}class ExecuteCommandFeature{constructor(_client){this._client=_client,this._commands=new Map}get messages(){return vscode_languageserver_protocol_1.ExecuteCommandRequest.type}fillClientCapabilities(capabilities){ensure(ensure(capabilities,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(capabilities){capabilities.executeCommandProvider&&this.register(this.messages,{id:UUID.generateUuid(),registerOptions:Object.assign({},capabilities.executeCommandProvider)})}register(_message,data){const client=this._client,middleware=client.clientOptions.middleware,executeCommand=(command,args)=>{let params={command:command,arguments:args};return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,params).then(void 0,error=>{client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type,error)})};if(data.registerOptions.commands){const disposeables=[];for(const command of data.registerOptions.commands)disposeables.push(vscode_1.commands.registerCommand(command,(...args)=>middleware.executeCommand?middleware.executeCommand(command,args,executeCommand):executeCommand(command,args)));this._commands.set(data.id,disposeables)}}unregister(id){let disposeables=this._commands.get(id);disposeables&&disposeables.forEach(disposable=>disposable.dispose())}dispose(){this._commands.forEach(value=>{value.forEach(disposable=>disposable.dispose())}),this._commands.clear()}}!function(MessageTransports){MessageTransports.is=function(value){return value&&vscode_languageserver_protocol_1.MessageReader.is(value.reader)&&vscode_languageserver_protocol_1.MessageWriter.is(value.writer)}}(exports.MessageTransports||(exports.MessageTransports={}));class OnReady{constructor(_resolve,_reject){this._resolve=_resolve,this._reject=_reject,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(error){this._used=!0,this._reject(error)}}exports.BaseLanguageClient=class BaseLanguageClient{constructor(id,name,clientOptions){this._traceFormat=vscode_languageserver_protocol_1.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=id,this._name=name,clientOptions=clientOptions||{},this._clientOptions={documentSelector:clientOptions.documentSelector||[],synchronize:clientOptions.synchronize||{},diagnosticCollectionName:clientOptions.diagnosticCollectionName,outputChannelName:clientOptions.outputChannelName||this._name,revealOutputChannelOn:clientOptions.revealOutputChannelOn||RevealOutputChannelOn.Error,stdioEncoding:clientOptions.stdioEncoding||"utf8",initializationOptions:clientOptions.initializationOptions,initializationFailedHandler:clientOptions.initializationFailedHandler,progressOnInitialization:!!clientOptions.progressOnInitialization,errorHandler:clientOptions.errorHandler||new DefaultErrorHandler(this._name),middleware:clientOptions.middleware||{},uriConverters:clientOptions.uriConverters,workspaceFolder:clientOptions.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=ClientState.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,clientOptions.outputChannel?(this._outputChannel=clientOptions.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=clientOptions.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new async_1.Delayer(250),this._onReady=new Promise((resolve,reject)=>{this._onReadyCallbacks=new OnReady(resolve,reject)}),this._onStop=void 0,this._telemetryEmitter=new vscode_languageserver_protocol_1.Emitter,this._stateChangeEmitter=new vscode_languageserver_protocol_1.Emitter,this._tracer={log:(messageOrDataObject,data)=>{Is.string(messageOrDataObject)?this.logTrace(messageOrDataObject,data):this.logObjectTrace(messageOrDataObject)}},this._c2p=c2p.createConverter(clientOptions.uriConverters?clientOptions.uriConverters.code2Protocol:void 0),this._p2c=p2c.createConverter(clientOptions.uriConverters?clientOptions.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(value){let oldState=this.getPublicState();this._state=value;let newState=this.getPublicState();newState!==oldState&&this._stateChangeEmitter.fire({oldState:oldState,newState:newState})}getPublicState(){return this.state===ClientState.Running?State.Running:this.state===ClientState.Starting?State.Starting:State.Stopped}get initializeResult(){return this._initializeResult}sendRequest(type,...params){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(type,...params)}catch(error){throw this.error(`Sending request ${Is.string(type)?type:type.method} failed.`,error),error}}onRequest(type,handler){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(type,handler)}catch(error){throw this.error(`Registering request handler ${Is.string(type)?type:type.method} failed.`,error),error}}sendNotification(type,params){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(type,params)}catch(error){throw this.error(`Sending notification ${Is.string(type)?type:type.method} failed.`,error),error}}onNotification(type,handler){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(type,handler)}catch(error){throw this.error(`Registering notification handler ${Is.string(type)?type:type.method} failed.`,error),error}}onProgress(type,token,handler){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onProgress(type,token,handler)}catch(error){throw this.error(`Registering progress handler for token ${token} failed.`,error),error}}sendProgress(type,token,value){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(type,token,value)}catch(error){throw this.error(`Sending progress for token ${token} failed.`,error),error}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new DefaultErrorHandler(this._name)}set trace(value){this._trace=value,this.onReady().then(()=>{this.resolveConnection().then(connection=>{connection.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(data){if(data instanceof vscode_languageserver_protocol_1.ResponseError){const responseError=data;return`  Message: ${responseError.message}\n  Code: ${responseError.code} ${responseError.data?"\n"+responseError.data.toString():""}`}return data instanceof Error?Is.string(data.stack)?data.stack:data.message:Is.string(data)?data:data.toString()}info(message,data,showNotification=!0){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data)),showNotification&&this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn.Info&&this.showNotificationMessage()}warn(message,data,showNotification=!0){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data)),showNotification&&this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn.Warn&&this.showNotificationMessage()}error(message,data,showNotification=!0){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.outputChannel.appendLine(this.data2String(data)),showNotification&&this._clientOptions.revealOutputChannelOn<=RevealOutputChannelOn.Error&&this.showNotificationMessage()}showNotificationMessage(){vscode_1.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(message,data){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${message}`),data&&this.traceOutputChannel.appendLine(this.data2String(data))}logObjectTrace(data){data.isLSPMessage&&data.type?this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),data&&this.traceOutputChannel.appendLine(""+JSON.stringify(data))}needsStart(){return this.state===ClientState.Initial||this.state===ClientState.Stopping||this.state===ClientState.Stopped}needsStop(){return this.state===ClientState.Starting||this.state===ClientState.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===ClientState.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((resolve,reject)=>{this._onReadyCallbacks=new OnReady(resolve,reject)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):vscode_1.languages.createDiagnosticCollection()),this.state=ClientState.Starting,this.resolveConnection().then(connection=>(connection.onLogMessage(message=>{switch(message.type){case vscode_languageserver_protocol_1.MessageType.Error:this.error(message.message,void 0,!1);break;case vscode_languageserver_protocol_1.MessageType.Warning:this.warn(message.message,void 0,!1);break;case vscode_languageserver_protocol_1.MessageType.Info:this.info(message.message,void 0,!1);break;default:this.outputChannel.appendLine(message.message)}}),connection.onShowMessage(message=>{switch(message.type){case vscode_languageserver_protocol_1.MessageType.Error:vscode_1.window.showErrorMessage(message.message);break;case vscode_languageserver_protocol_1.MessageType.Warning:vscode_1.window.showWarningMessage(message.message);break;case vscode_languageserver_protocol_1.MessageType.Info:vscode_1.window.showInformationMessage(message.message);break;default:vscode_1.window.showInformationMessage(message.message)}}),connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type,params=>{let messageFunc;switch(params.type){case vscode_languageserver_protocol_1.MessageType.Error:messageFunc=vscode_1.window.showErrorMessage;break;case vscode_languageserver_protocol_1.MessageType.Warning:messageFunc=vscode_1.window.showWarningMessage;break;case vscode_languageserver_protocol_1.MessageType.Info:messageFunc=vscode_1.window.showInformationMessage;break;default:messageFunc=vscode_1.window.showInformationMessage}let actions=params.actions||[];return messageFunc(params.message,...actions)}),connection.onTelemetry(data=>{this._telemetryEmitter.fire(data)}),connection.listen(),this.initialize(connection))).then(void 0,error=>{this.state=ClientState.StartFailed,this._onReadyCallbacks.reject(error),this.error("Starting client failed",error),vscode_1.window.showErrorMessage("Couldn't start client "+this._name)}),new vscode_1.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(connection){this.refreshTrace(connection,!1);let initOption=this._clientOptions.initializationOptions,rootPath=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),initParams={processId:process.pid,clientInfo:{name:"vscode",version:vscode_1.version},rootPath:rootPath||null,rootUri:rootPath?this._c2p.asUri(vscode_1.Uri.file(rootPath)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Is.func(initOption)?initOption():initOption,trace:vscode_languageserver_protocol_1.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(initParams),this._clientOptions.progressOnInitialization){const token=UUID.generateUuid(),part=new progressPart_1.ProgressPart(connection,token);return initParams.workDoneToken=token,this.doInitialize(connection,initParams).then(result=>(part.done(),result),error=>{throw part.cancel(),error})}return this.doInitialize(connection,initParams)}doInitialize(connection,initParams){return connection.initialize(initParams).then(result=>{this._resolvedConnection=connection,this._initializeResult=result,this.state=ClientState.Running;let textDocumentSyncOptions=void 0;return Is.number(result.capabilities.textDocumentSync)?textDocumentSyncOptions=result.capabilities.textDocumentSync===vscode_languageserver_protocol_1.TextDocumentSyncKind.None?{openClose:!1,change:vscode_languageserver_protocol_1.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:result.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==result.capabilities.textDocumentSync&&null!==result.capabilities.textDocumentSync&&(textDocumentSyncOptions=result.capabilities.textDocumentSync),this._capabilities=Object.assign({},result.capabilities,{resolvedTextDocumentSync:textDocumentSyncOptions}),connection.onDiagnostics(params=>this.handleDiagnostics(params)),connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type,params=>this.handleRegistrationRequest(params)),connection.onRequest("client/registerFeature",params=>this.handleRegistrationRequest(params)),connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type,params=>this.handleUnregistrationRequest(params)),connection.onRequest("client/unregisterFeature",params=>this.handleUnregistrationRequest(params)),connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type,params=>this.handleApplyWorkspaceEdit(params)),connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type,{}),this.hookFileEvents(connection),this.hookConfigurationChanged(connection),this.initializeFeatures(connection),this._onReadyCallbacks.resolve(),result}).then(void 0,error=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(error)?this.initialize(connection):(this.stop(),this._onReadyCallbacks.reject(error)):error instanceof vscode_languageserver_protocol_1.ResponseError&&error.data&&error.data.retry?vscode_1.window.showErrorMessage(error.message,{title:"Retry",id:"retry"}).then(item=>{item&&"retry"===item.id?this.initialize(connection):(this.stop(),this._onReadyCallbacks.reject(error))}):(error&&error.message&&vscode_1.window.showErrorMessage(error.message),this.error("Server initialization failed.",error),this.stop(),this._onReadyCallbacks.reject(error)),error})}_clientGetRootPath(){let folders=vscode_1.workspace.workspaceFolders;if(!folders||0===folders.length)return;let folder=folders[0];return"file"===folder.uri.scheme?folder.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===ClientState.Stopping&&this._onStop?this._onStop:(this.state=ClientState.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(connection=>connection.shutdown().then(()=>{connection.exit(),connection.dispose(),this.state=ClientState.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=ClientState.Stopped,Promise.resolve())}cleanUp(channel=!0,diagnostics=!0){this._listeners&&(this._listeners.forEach(listener=>listener.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(provider=>provider.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let handler of this._dynamicFeatures.values())handler.dispose();channel&&this.cleanUpChannel(),diagnostics&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(event){var _a,_b;const client=this;function didChangeWatchedFile(event){client._fileEvents.push(event),client._fileEventDelayer.trigger(()=>{client.onReady().then(()=>{client.resolveConnection().then(connection=>{client.isConnectionActive()&&(client.forceDocumentSync(),connection.didChangeWatchedFiles({changes:client._fileEvents})),client._fileEvents=[]})},error=>{client.error("Notify file events failed.",error)})})}const workSpaceMiddleware=null===(_a=this.clientOptions.middleware)||void 0===_a?void 0:_a.workspace;(null===(_b=workSpaceMiddleware)||void 0===_b?void 0:_b.didChangeWatchedFile)?workSpaceMiddleware.didChangeWatchedFile(event,didChangeWatchedFile):didChangeWatchedFile(event)}forceDocumentSync(){this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(params){if(!this._diagnostics)return;let uri=this._p2c.asUri(params.uri),diagnostics=this._p2c.asDiagnostics(params.diagnostics),middleware=this.clientOptions.middleware;middleware.handleDiagnostics?middleware.handleDiagnostics(uri,diagnostics,(uri,diagnostics)=>this.setDiagnostics(uri,diagnostics)):this.setDiagnostics(uri,diagnostics)}setDiagnostics(uri,diagnostics){this._diagnostics&&this._diagnostics.set(uri,diagnostics)}createConnection(){let errorHandler=(error,message,count)=>{this.handleConnectionError(error,message,count)},closeHandler=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(transports=>function(input,output,errorHandler,closeHandler){let logger=new ConsoleLogger,connection=vscode_languageserver_protocol_1.createProtocolConnection(input,output,logger);return connection.onError(data=>{errorHandler(data[0],data[1],data[2])}),connection.onClose(closeHandler),{listen:()=>connection.listen(),sendRequest:(type,...params)=>connection.sendRequest(Is.string(type)?type:type.method,...params),onRequest:(type,handler)=>connection.onRequest(Is.string(type)?type:type.method,handler),sendNotification:(type,params)=>connection.sendNotification(Is.string(type)?type:type.method,params),onNotification:(type,handler)=>connection.onNotification(Is.string(type)?type:type.method,handler),onProgress:connection.onProgress,sendProgress:connection.sendProgress,trace:(value,tracer,sendNotificationOrTraceOptions)=>{const defaultTraceOptions={sendNotification:!1,traceFormat:vscode_languageserver_protocol_1.TraceFormat.Text};void 0===sendNotificationOrTraceOptions?connection.trace(value,tracer,defaultTraceOptions):(Is.boolean(sendNotificationOrTraceOptions),connection.trace(value,tracer,sendNotificationOrTraceOptions))},initialize:params=>connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type,params),shutdown:()=>connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type,void 0),exit:()=>connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),onLogMessage:handler=>connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type,handler),onShowMessage:handler=>connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type,handler),onTelemetry:handler=>connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type,handler),didChangeConfiguration:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type,params),didChangeWatchedFiles:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type,params),didOpenTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type,params),didChangeTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type,params),didCloseTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type,params),didSaveTextDocument:params=>connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type,params),onDiagnostics:handler=>connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type,handler),dispose:()=>connection.dispose()}}(transports.reader,transports.writer,errorHandler,closeHandler))}handleConnectionClosed(){if(this.state===ClientState.Stopping||this.state===ClientState.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(error){}let action=CloseAction.DoNotRestart;try{action=this._clientOptions.errorHandler.closed()}catch(error){}this._connectionPromise=void 0,this._resolvedConnection=void 0,action===CloseAction.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=ClientState.Stopped,this.cleanUp(!1,!0)):action===CloseAction.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=ClientState.Initial,this.start())}handleConnectionError(error,message,count){this._clientOptions.errorHandler.error(error,message,count)===ErrorAction.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(connection){vscode_1.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(connection,!0)})}refreshTrace(connection,sendNotification=!1){let config=vscode_1.workspace.getConfiguration(this._id),trace=vscode_languageserver_protocol_1.Trace.Off,traceFormat=vscode_languageserver_protocol_1.TraceFormat.Text;if(config){const traceConfig=config.get("trace.server","off");"string"==typeof traceConfig?trace=vscode_languageserver_protocol_1.Trace.fromString(traceConfig):(trace=vscode_languageserver_protocol_1.Trace.fromString(config.get("trace.server.verbosity","off")),traceFormat=vscode_languageserver_protocol_1.TraceFormat.fromString(config.get("trace.server.format","text")))}this._trace=trace,this._traceFormat=traceFormat,connection.trace(this._trace,this._tracer,{sendNotification:sendNotification,traceFormat:this._traceFormat})}hookFileEvents(_connection){let watchers,fileEvents=this._clientOptions.synchronize.fileEvents;fileEvents&&(watchers=Is.array(fileEvents)?fileEvents:[fileEvents],watchers&&this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(),watchers))}registerFeatures(features){for(let feature of features)this.registerFeature(feature)}registerFeature(feature){if(this._features.push(feature),DynamicFeature.is(feature)){let messages=feature.messages;if(Array.isArray(messages))for(let message of messages)this._method2Message.set(message.method,message),this._dynamicFeatures.set(message.method,feature);else this._method2Message.set(messages.method,messages),this._dynamicFeatures.set(messages.method,feature)}}getFeature(request){return this._dynamicFeatures.get(request)}registerBuiltinFeatures(){this.registerFeature(new ConfigurationFeature(this)),this.registerFeature(new DidOpenTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new DidChangeTextDocumentFeature(this)),this.registerFeature(new WillSaveFeature(this)),this.registerFeature(new WillSaveWaitUntilFeature(this)),this.registerFeature(new DidSaveTextDocumentFeature(this)),this.registerFeature(new DidCloseTextDocumentFeature(this,this._syncedDocuments)),this.registerFeature(new FileSystemWatcherFeature(this,event=>this.notifyFileEvent(event))),this.registerFeature(new CompletionItemFeature(this)),this.registerFeature(new HoverFeature(this)),this.registerFeature(new SignatureHelpFeature(this)),this.registerFeature(new DefinitionFeature(this)),this.registerFeature(new ReferencesFeature(this)),this.registerFeature(new DocumentHighlightFeature(this)),this.registerFeature(new DocumentSymbolFeature(this)),this.registerFeature(new WorkspaceSymbolFeature(this)),this.registerFeature(new CodeActionFeature(this)),this.registerFeature(new CodeLensFeature(this)),this.registerFeature(new DocumentFormattingFeature(this)),this.registerFeature(new DocumentRangeFormattingFeature(this)),this.registerFeature(new DocumentOnTypeFormattingFeature(this)),this.registerFeature(new RenameFeature(this)),this.registerFeature(new DocumentLinkFeature(this)),this.registerFeature(new ExecuteCommandFeature(this))}fillInitializeParams(params){for(let feature of this._features)Is.func(feature.fillInitializeParams)&&feature.fillInitializeParams(params)}computeClientCapabilities(){let result={};ensure(result,"workspace").applyEdit=!0;let workspaceEdit=ensure(ensure(result,"workspace"),"workspaceEdit");workspaceEdit.documentChanges=!0,workspaceEdit.resourceOperations=[vscode_languageserver_protocol_1.ResourceOperationKind.Create,vscode_languageserver_protocol_1.ResourceOperationKind.Rename,vscode_languageserver_protocol_1.ResourceOperationKind.Delete],workspaceEdit.failureHandling=vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;let diagnostics=ensure(ensure(result,"textDocument"),"publishDiagnostics");diagnostics.relatedInformation=!0,diagnostics.versionSupport=!1,diagnostics.tagSupport={valueSet:[vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary,vscode_languageserver_protocol_1.DiagnosticTag.Deprecated]};for(let feature of this._features)feature.fillClientCapabilities(result);return result}initializeFeatures(_connection){let documentSelector=this._clientOptions.documentSelector;for(let feature of this._features)feature.initialize(this._capabilities,documentSelector)}handleRegistrationRequest(params){return new Promise((resolve,reject)=>{for(let registration of params.registrations){const feature=this._dynamicFeatures.get(registration.method);if(!feature)return void reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));const options=registration.registerOptions||{};options.documentSelector=options.documentSelector||this._clientOptions.documentSelector;const data={id:registration.id,registerOptions:options};feature.register(this._method2Message.get(registration.method),data)}resolve()})}handleUnregistrationRequest(params){return new Promise((resolve,reject)=>{for(let unregistration of params.unregisterations){const feature=this._dynamicFeatures.get(unregistration.method);if(!feature)return void reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));feature.unregister(unregistration.id)}resolve()})}handleApplyWorkspaceEdit(params){let workspaceEdit=params.edit,openTextDocuments=new Map;vscode_1.workspace.textDocuments.forEach(document=>openTextDocuments.set(document.uri.toString(),document));let versionMismatch=!1;if(workspaceEdit.documentChanges)for(const change of workspaceEdit.documentChanges)if(vscode_languageserver_protocol_1.TextDocumentEdit.is(change)&&change.textDocument.version&&change.textDocument.version>=0){let textDocument=openTextDocuments.get(change.textDocument.uri);if(textDocument&&textDocument.version!==change.textDocument.version){versionMismatch=!0;break}}return versionMismatch?Promise.resolve({applied:!1}):Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then(value=>({applied:value})))}logFailedRequest(type,error){error instanceof vscode_languageserver_protocol_1.ResponseError&&(error.code===vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled||error.code===vscode_languageserver_protocol_1.ErrorCodes.ContentModified)||this.error(`Request ${type.method} failed.`,error)}}},function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0});const Is=__webpack_require__(29),messages_1=__webpack_require__(198);exports.RequestType=messages_1.RequestType,exports.RequestType0=messages_1.RequestType0,exports.RequestType1=messages_1.RequestType1,exports.RequestType2=messages_1.RequestType2,exports.RequestType3=messages_1.RequestType3,exports.RequestType4=messages_1.RequestType4,exports.RequestType5=messages_1.RequestType5,exports.RequestType6=messages_1.RequestType6,exports.RequestType7=messages_1.RequestType7,exports.RequestType8=messages_1.RequestType8,exports.RequestType9=messages_1.RequestType9,exports.ResponseError=messages_1.ResponseError,exports.ErrorCodes=messages_1.ErrorCodes,exports.NotificationType=messages_1.NotificationType,exports.NotificationType0=messages_1.NotificationType0,exports.NotificationType1=messages_1.NotificationType1,exports.NotificationType2=messages_1.NotificationType2,exports.NotificationType3=messages_1.NotificationType3,exports.NotificationType4=messages_1.NotificationType4,exports.NotificationType5=messages_1.NotificationType5,exports.NotificationType6=messages_1.NotificationType6,exports.NotificationType7=messages_1.NotificationType7,exports.NotificationType8=messages_1.NotificationType8,exports.NotificationType9=messages_1.NotificationType9;const messageReader_1=__webpack_require__(64);exports.MessageReader=messageReader_1.MessageReader,exports.StreamMessageReader=messageReader_1.StreamMessageReader,exports.IPCMessageReader=messageReader_1.IPCMessageReader,exports.SocketMessageReader=messageReader_1.SocketMessageReader;const messageWriter_1=__webpack_require__(65);exports.MessageWriter=messageWriter_1.MessageWriter,exports.StreamMessageWriter=messageWriter_1.StreamMessageWriter,exports.IPCMessageWriter=messageWriter_1.IPCMessageWriter,exports.SocketMessageWriter=messageWriter_1.SocketMessageWriter;const events_1=__webpack_require__(40);exports.Disposable=events_1.Disposable,exports.Event=events_1.Event,exports.Emitter=events_1.Emitter;const cancellation_1=__webpack_require__(199);exports.CancellationTokenSource=cancellation_1.CancellationTokenSource,exports.CancellationToken=cancellation_1.CancellationToken;const linkedMap_1=__webpack_require__(200);var CancelNotification,ProgressNotification,Trace,TraceFormat,SetTraceNotification,LogTraceNotification,ConnectionErrors,ConnectionState;__export(__webpack_require__(201)),__export(__webpack_require__(202)),function(CancelNotification){CancelNotification.type=new messages_1.NotificationType("$/cancelRequest")}(CancelNotification||(CancelNotification={})),function(ProgressNotification){ProgressNotification.type=new messages_1.NotificationType("$/progress")}(ProgressNotification||(ProgressNotification={}));exports.ProgressType=class ProgressType{constructor(){}},exports.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(Trace){Trace[Trace.Off=0]="Off",Trace[Trace.Messages=1]="Messages",Trace[Trace.Verbose=2]="Verbose"}(Trace=exports.Trace||(exports.Trace={})),function(Trace){Trace.fromString=function(value){if(!Is.string(value))return Trace.Off;switch(value=value.toLowerCase()){case"off":return Trace.Off;case"messages":return Trace.Messages;case"verbose":return Trace.Verbose;default:return Trace.Off}},Trace.toString=function(value){switch(value){case Trace.Off:return"off";case Trace.Messages:return"messages";case Trace.Verbose:return"verbose";default:return"off"}}}(Trace=exports.Trace||(exports.Trace={})),function(TraceFormat){TraceFormat.Text="text",TraceFormat.JSON="json"}(exports.TraceFormat||(exports.TraceFormat={})),function(TraceFormat){TraceFormat.fromString=function(value){return"json"===(value=value.toLowerCase())?TraceFormat.JSON:TraceFormat.Text}}(TraceFormat=exports.TraceFormat||(exports.TraceFormat={})),function(SetTraceNotification){SetTraceNotification.type=new messages_1.NotificationType("$/setTraceNotification")}(SetTraceNotification=exports.SetTraceNotification||(exports.SetTraceNotification={})),function(LogTraceNotification){LogTraceNotification.type=new messages_1.NotificationType("$/logTraceNotification")}(LogTraceNotification=exports.LogTraceNotification||(exports.LogTraceNotification={})),function(ConnectionErrors){ConnectionErrors[ConnectionErrors.Closed=1]="Closed",ConnectionErrors[ConnectionErrors.Disposed=2]="Disposed",ConnectionErrors[ConnectionErrors.AlreadyListening=3]="AlreadyListening"}(ConnectionErrors=exports.ConnectionErrors||(exports.ConnectionErrors={}));class ConnectionError extends Error{constructor(code,message){super(message),this.code=code,Object.setPrototypeOf(this,ConnectionError.prototype)}}function _createMessageConnection(messageReader,messageWriter,logger,strategy){let sequenceNumber=0,notificationSquenceNumber=0,unknownResponseSquenceNumber=0;let timer,tracer,starRequestHandler=void 0,requestHandlers=Object.create(null),starNotificationHandler=void 0,notificationHandlers=Object.create(null),progressHandlers=new Map,messageQueue=new linkedMap_1.LinkedMap,responsePromises=Object.create(null),requestTokens=Object.create(null),trace=Trace.Off,traceFormat=TraceFormat.Text,state=ConnectionState.New,errorEmitter=new events_1.Emitter,closeEmitter=new events_1.Emitter,unhandledNotificationEmitter=new events_1.Emitter,unhandledProgressEmitter=new events_1.Emitter,disposeEmitter=new events_1.Emitter;function createRequestQueueKey(id){return"req-"+id.toString()}function addMessageToQueue(queue,message){var id;messages_1.isRequestMessage(message)?queue.set(createRequestQueueKey(message.id),message):messages_1.isResponseMessage(message)?queue.set(null===(id=message.id)?"res-unknown-"+(++unknownResponseSquenceNumber).toString():"res-"+id.toString(),message):queue.set("not-"+(++notificationSquenceNumber).toString(),message)}function cancelUndispatched(_message){}function isListening(){return state===ConnectionState.Listening}function isClosed(){return state===ConnectionState.Closed}function isDisposed(){return state===ConnectionState.Disposed}function closeHandler(){state!==ConnectionState.New&&state!==ConnectionState.Listening||(state=ConnectionState.Closed,closeEmitter.fire(void 0))}function triggerMessageQueue(){timer||0===messageQueue.size||(timer=setImmediate(()=>{timer=void 0,function(){if(0===messageQueue.size)return;let message=messageQueue.shift();try{messages_1.isRequestMessage(message)?function(requestMessage){if(isDisposed())return;function reply(resultOrError,method,startTime){let message={jsonrpc:"2.0",id:requestMessage.id};resultOrError instanceof messages_1.ResponseError?message.error=resultOrError.toJson():message.result=void 0===resultOrError?null:resultOrError,traceSendingResponse(message,method,startTime),messageWriter.write(message)}function replyError(error,method,startTime){let message={jsonrpc:"2.0",id:requestMessage.id,error:error.toJson()};traceSendingResponse(message,method,startTime),messageWriter.write(message)}!function(message){if(trace===Trace.Off||!tracer)return;if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&message.params&&(data=`Params: ${JSON.stringify(message.params,null,4)}\n\n`),tracer.log(`Received request '${message.method} - (${message.id})'.`,data)}else logLSPMessage("receive-request",message)}(requestMessage);let type,requestHandler,element=requestHandlers[requestMessage.method];element&&(type=element.type,requestHandler=element.handler);let startTime=Date.now();if(requestHandler||starRequestHandler){let cancellationSource=new cancellation_1.CancellationTokenSource,tokenKey=String(requestMessage.id);requestTokens[tokenKey]=cancellationSource;try{let handlerResult;handlerResult=void 0===requestMessage.params||void 0!==type&&0===type.numberOfParams?requestHandler?requestHandler(cancellationSource.token):starRequestHandler(requestMessage.method,cancellationSource.token):Is.array(requestMessage.params)&&(void 0===type||type.numberOfParams>1)?requestHandler?requestHandler(...requestMessage.params,cancellationSource.token):starRequestHandler(requestMessage.method,...requestMessage.params,cancellationSource.token):requestHandler?requestHandler(requestMessage.params,cancellationSource.token):starRequestHandler(requestMessage.method,requestMessage.params,cancellationSource.token);let promise=handlerResult;handlerResult?promise.then?promise.then(resultOrError=>{delete requestTokens[tokenKey],reply(resultOrError,requestMessage.method,startTime)},error=>{delete requestTokens[tokenKey],error instanceof messages_1.ResponseError?replyError(error,requestMessage.method,startTime):error&&Is.string(error.message)?replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed with message: ${error.message}`),requestMessage.method,startTime):replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed unexpectedly without providing any details.`),requestMessage.method,startTime)}):(delete requestTokens[tokenKey],reply(handlerResult,requestMessage.method,startTime)):(delete requestTokens[tokenKey],function(result,method,startTime){void 0===result&&(result=null);let message={jsonrpc:"2.0",id:requestMessage.id,result:result};traceSendingResponse(message,method,startTime),messageWriter.write(message)}(handlerResult,requestMessage.method,startTime))}catch(error){delete requestTokens[tokenKey],error instanceof messages_1.ResponseError?reply(error,requestMessage.method,startTime):error&&Is.string(error.message)?replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed with message: ${error.message}`),requestMessage.method,startTime):replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError,`Request ${requestMessage.method} failed unexpectedly without providing any details.`),requestMessage.method,startTime)}}else replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound,"Unhandled method "+requestMessage.method),requestMessage.method,startTime)}(message):messages_1.isNotificationMessage(message)?function(message){if(isDisposed())return;let notificationHandler,type=void 0;if(message.method===CancelNotification.type.method)notificationHandler=params=>{let id=params.id,source=requestTokens[String(id)];source&&source.cancel()};else{let element=notificationHandlers[message.method];element&&(notificationHandler=element.handler,type=element.type)}if(notificationHandler||starNotificationHandler)try{!function(message){if(trace===Trace.Off||!tracer||message.method===LogTraceNotification.type.method)return;if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&(data=message.params?`Params: ${JSON.stringify(message.params,null,4)}\n\n`:"No parameters provided.\n\n"),tracer.log(`Received notification '${message.method}'.`,data)}else logLSPMessage("receive-notification",message)}(message),void 0===message.params||void 0!==type&&0===type.numberOfParams?notificationHandler?notificationHandler():starNotificationHandler(message.method):Is.array(message.params)&&(void 0===type||type.numberOfParams>1)?notificationHandler?notificationHandler(...message.params):starNotificationHandler(message.method,...message.params):notificationHandler?notificationHandler(message.params):starNotificationHandler(message.method,message.params)}catch(error){error.message?logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`):logger.error(`Notification handler '${message.method}' failed unexpectedly.`)}else unhandledNotificationEmitter.fire(message)}(message):messages_1.isResponseMessage(message)?function(responseMessage){if(isDisposed())return;if(null===responseMessage.id)responseMessage.error?logger.error("Received response message without id: Error is: \n"+JSON.stringify(responseMessage.error,void 0,4)):logger.error("Received response message without id. No further error information provided.");else{let key=String(responseMessage.id),responsePromise=responsePromises[key];if(function(message,responsePromise){if(trace===Trace.Off||!tracer)return;if(traceFormat===TraceFormat.Text){let data=void 0;if(trace===Trace.Verbose&&(message.error&&message.error.data?data=`Error data: ${JSON.stringify(message.error.data,null,4)}\n\n`:message.result?data=`Result: ${JSON.stringify(message.result,null,4)}\n\n`:void 0===message.error&&(data="No result returned.\n\n")),responsePromise){let error=message.error?` Request failed: ${message.error.message} (${message.error.code}).`:"";tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now()-responsePromise.timerStart}ms.${error}`,data)}else tracer.log(`Received response ${message.id} without active response promise.`,data)}else logLSPMessage("receive-response",message)}(responseMessage,responsePromise),responsePromise){delete responsePromises[key];try{if(responseMessage.error){let error=responseMessage.error;responsePromise.reject(new messages_1.ResponseError(error.code,error.message,error.data))}else{if(void 0===responseMessage.result)throw new Error("Should never happen.");responsePromise.resolve(responseMessage.result)}}catch(error){error.message?logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`):logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`)}}}}(message):function(message){if(!message)return void logger.error("Received empty message.");logger.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(message,null,4));let responseMessage=message;if(Is.string(responseMessage.id)||Is.number(responseMessage.id)){let key=String(responseMessage.id),responseHandler=responsePromises[key];responseHandler&&responseHandler.reject(new Error("The received response has neither a result nor an error property."))}}(message)}finally{triggerMessageQueue()}}()}))}messageReader.onClose(closeHandler),messageReader.onError((function(error){errorEmitter.fire([error,void 0,void 0])})),messageWriter.onClose(closeHandler),messageWriter.onError((function(data){errorEmitter.fire(data)}));let callback=message=>{try{if(messages_1.isNotificationMessage(message)&&message.method===CancelNotification.type.method){let key=createRequestQueueKey(message.params.id),toCancel=messageQueue.get(key);if(messages_1.isRequestMessage(toCancel)){let response=strategy&&strategy.cancelUndispatched?strategy.cancelUndispatched(toCancel,cancelUndispatched):void 0;if(response&&(void 0!==response.error||void 0!==response.result))return messageQueue.delete(key),response.id=toCancel.id,traceSendingResponse(response,message.method,Date.now()),void messageWriter.write(response)}}addMessageToQueue(messageQueue,message)}finally{triggerMessageQueue()}};function traceSendingResponse(message,method,startTime){if(trace!==Trace.Off&&tracer)if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&(message.error&&message.error.data?data=`Error data: ${JSON.stringify(message.error.data,null,4)}\n\n`:message.result?data=`Result: ${JSON.stringify(message.result,null,4)}\n\n`:void 0===message.error&&(data="No result returned.\n\n")),tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now()-startTime}ms`,data)}else logLSPMessage("send-response",message)}function logLSPMessage(type,message){if(!tracer||trace===Trace.Off)return;const lspMessage={isLSPMessage:!0,type:type,message:message,timestamp:Date.now()};tracer.log(lspMessage)}function throwIfClosedOrDisposed(){if(isClosed())throw new ConnectionError(ConnectionErrors.Closed,"Connection is closed.");if(isDisposed())throw new ConnectionError(ConnectionErrors.Disposed,"Connection is disposed.")}function undefinedToNull(param){return void 0===param?null:param}function computeMessageParams(type,params){let result,numberOfParams=type.numberOfParams;switch(numberOfParams){case 0:result=null;break;case 1:result=undefinedToNull(params[0]);break;default:result=[];for(let i=0;i<params.length&&i<numberOfParams;i++)result.push(undefinedToNull(params[i]));if(params.length<numberOfParams)for(let i=params.length;i<numberOfParams;i++)result.push(null)}return result}let connection={sendNotification:(type,...params)=>{let method,messageParams;if(throwIfClosedOrDisposed(),Is.string(type))switch(method=type,params.length){case 0:messageParams=null;break;case 1:messageParams=params[0];break;default:messageParams=params}else method=type.method,messageParams=computeMessageParams(type,params);let notificationMessage={jsonrpc:"2.0",method:method,params:messageParams};!function(message){if(trace!==Trace.Off&&tracer)if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&(data=message.params?`Params: ${JSON.stringify(message.params,null,4)}\n\n`:"No parameters provided.\n\n"),tracer.log(`Sending notification '${message.method}'.`,data)}else logLSPMessage("send-notification",message)}(notificationMessage),messageWriter.write(notificationMessage)},onNotification:(type,handler)=>{throwIfClosedOrDisposed(),Is.func(type)?starNotificationHandler=type:handler&&(Is.string(type)?notificationHandlers[type]={type:void 0,handler:handler}:notificationHandlers[type.method]={type:type,handler:handler})},onProgress:(_type,token,handler)=>{if(progressHandlers.has(token))throw new Error(`Progress handler for token ${token} already registered`);return progressHandlers.set(token,handler),{dispose:()=>{progressHandlers.delete(token)}}},sendProgress:(_type,token,value)=>{connection.sendNotification(ProgressNotification.type,{token:token,value:value})},onUnhandledProgress:unhandledProgressEmitter.event,sendRequest:(type,...params)=>{let method,messageParams;throwIfClosedOrDisposed(),function(){if(!isListening())throw new Error("Call listen() first.")}();let token=void 0;if(Is.string(type))switch(method=type,params.length){case 0:messageParams=null;break;case 1:cancellation_1.CancellationToken.is(params[0])?(messageParams=null,token=params[0]):messageParams=undefinedToNull(params[0]);break;default:const last=params.length-1;cancellation_1.CancellationToken.is(params[last])?(token=params[last],messageParams=2===params.length?undefinedToNull(params[0]):params.slice(0,last).map(value=>undefinedToNull(value))):messageParams=params.map(value=>undefinedToNull(value))}else{method=type.method,messageParams=computeMessageParams(type,params);let numberOfParams=type.numberOfParams;token=cancellation_1.CancellationToken.is(params[numberOfParams])?params[numberOfParams]:void 0}let id=sequenceNumber++,result=new Promise((resolve,reject)=>{let requestMessage={jsonrpc:"2.0",id:id,method:method,params:messageParams},responsePromise={method:method,timerStart:Date.now(),resolve:resolve,reject:reject};!function(message){if(trace!==Trace.Off&&tracer)if(traceFormat===TraceFormat.Text){let data=void 0;trace===Trace.Verbose&&message.params&&(data=`Params: ${JSON.stringify(message.params,null,4)}\n\n`),tracer.log(`Sending request '${message.method} - (${message.id})'.`,data)}else logLSPMessage("send-request",message)}(requestMessage);try{messageWriter.write(requestMessage)}catch(e){responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),responsePromise=null}responsePromise&&(responsePromises[String(id)]=responsePromise)});return token&&token.onCancellationRequested(()=>{connection.sendNotification(CancelNotification.type,{id:id})}),result},onRequest:(type,handler)=>{throwIfClosedOrDisposed(),Is.func(type)?starRequestHandler=type:handler&&(Is.string(type)?requestHandlers[type]={type:void 0,handler:handler}:requestHandlers[type.method]={type:type,handler:handler})},trace:(_value,_tracer,sendNotificationOrTraceOptions)=>{let _sendNotification=!1,_traceFormat=TraceFormat.Text;void 0!==sendNotificationOrTraceOptions&&(Is.boolean(sendNotificationOrTraceOptions)?_sendNotification=sendNotificationOrTraceOptions:(_sendNotification=sendNotificationOrTraceOptions.sendNotification||!1,_traceFormat=sendNotificationOrTraceOptions.traceFormat||TraceFormat.Text)),trace=_value,traceFormat=_traceFormat,tracer=trace===Trace.Off?void 0:_tracer,!_sendNotification||isClosed()||isDisposed()||connection.sendNotification(SetTraceNotification.type,{value:Trace.toString(_value)})},onError:errorEmitter.event,onClose:closeEmitter.event,onUnhandledNotification:unhandledNotificationEmitter.event,onDispose:disposeEmitter.event,dispose:()=>{if(isDisposed())return;state=ConnectionState.Disposed,disposeEmitter.fire(void 0);let error=new Error("Connection got disposed.");Object.keys(responsePromises).forEach(key=>{responsePromises[key].reject(error)}),responsePromises=Object.create(null),requestTokens=Object.create(null),messageQueue=new linkedMap_1.LinkedMap,Is.func(messageWriter.dispose)&&messageWriter.dispose(),Is.func(messageReader.dispose)&&messageReader.dispose()},listen:()=>{throwIfClosedOrDisposed(),function(){if(isListening())throw new ConnectionError(ConnectionErrors.AlreadyListening,"Connection is already listening")}(),state=ConnectionState.Listening,messageReader.listen(callback)},inspect:()=>{console.log("inspect")}};return connection.onNotification(LogTraceNotification.type,params=>{trace!==Trace.Off&&tracer&&tracer.log(params.message,trace===Trace.Verbose?params.verbose:void 0)}),connection.onNotification(ProgressNotification.type,params=>{const handler=progressHandlers.get(params.token);handler?handler(params.value):unhandledProgressEmitter.fire(params)}),connection}exports.ConnectionError=ConnectionError,function(ConnectionStrategy){ConnectionStrategy.is=function(value){let candidate=value;return candidate&&Is.func(candidate.cancelUndispatched)}}(exports.ConnectionStrategy||(exports.ConnectionStrategy={})),function(ConnectionState){ConnectionState[ConnectionState.New=1]="New",ConnectionState[ConnectionState.Listening=2]="Listening",ConnectionState[ConnectionState.Closed=3]="Closed",ConnectionState[ConnectionState.Disposed=4]="Disposed"}(ConnectionState||(ConnectionState={})),exports.createMessageConnection=function(input,output,logger,strategy){var value;return logger||(logger=exports.NullLogger),_createMessageConnection(void 0!==(value=input).listen&&void 0===value.read?input:new messageReader_1.StreamMessageReader(input),function(value){return void 0!==value.write&&void 0===value.end}(output)?output:new messageWriter_1.StreamMessageWriter(output),logger,strategy)}},function(module,exports,__webpack_require__){var freeGlobal=__webpack_require__(103),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},function(module,exports){var isArray=Array.isArray;module.exports=isArray},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getConnectionDescription=exports.getSessionBasename=exports.migrateConnectionSettings=exports.migrateConnectionSetting=exports.getNameFromId=exports.getConnectionId=exports.idSep=void 0;const path_1=__importDefault(__webpack_require__(9));function migrateConnectionSetting(c){return c.driver=c.driver||c.dialect,c}exports.idSep="|",exports.getConnectionId=function(c){if(!(c=migrateConnectionSetting(c)))return null;if(c.id)return c.id;const parts=[c.name,c.driver];return c.connectString?parts.push(c.connectString):parts.push(c.server,c.database),parts.join(exports.idSep).replace(/\./g,":").replace(/\//g,"\\")},exports.getNameFromId=function(id){return id?id.split(exports.idSep)[0]:null},exports.migrateConnectionSetting=migrateConnectionSetting,exports.migrateConnectionSettings=function(connections){return connections?connections.map(migrateConnectionSetting):connections},exports.getSessionBasename=function(connName){return connName+".session.sql"},exports.getConnectionDescription=function(c){return c?/workspaceFolder:/.test(c.database)||/^\.\//.test(c.database)?c.database:c.connectString?c.connectString.replace(/(.+):.+@/gi,"$1@"):[c.username,c.username?"@":"",!c.socketPath&&c.server,!c.socketPath&&c.server&&c.port?":":"",c.socketPath&&"socket:"+path_1.default.basename(c.socketPath),c.port,"/",c.database].filter(Boolean).join(""):null}},function(module,exports){module.exports=require("os")},function(module,exports){module.exports=require("crypto")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.openExternal=exports.readInput=exports.insertText=exports.getSelectedText=exports.getOrCreateEditor=void 0;const vscode_1=__webpack_require__(1),exception_1=__webpack_require__(27),validation_1=__webpack_require__(91);async function getOrCreateEditor(forceCreate=!1){if(forceCreate||!vscode_1.window.activeTextEditor||!vscode_1.window.activeTextEditor.viewColumn){const doc=await vscode_1.workspace.openTextDocument({language:"sql"});await vscode_1.window.showTextDocument(doc,1,!1)}return vscode_1.window.activeTextEditor}exports.getOrCreateEditor=getOrCreateEditor,exports.getSelectedText=async function(action="proceed",fullText=!1){const editor=await getOrCreateEditor(),query=editor.document.getText(fullText?void 0:editor.selection);if(validation_1.isEmpty(query))throw vscode_1.window.showInformationMessage(`Can't ${action}. You have selected nothing.`),new exception_1.DismissedError;return query},exports.insertText=async function(text,forceCreate=!1,insertAsText=!1){const editor=await getOrCreateEditor(forceCreate);"string"==typeof text&&insertAsText?Promise.all(editor.selections.map(cursor=>editor.edit(e=>e.insert(cursor.active,text)))):await Promise.all(editor.selections.map(cursor=>editor.insertSnippet(text instanceof vscode_1.SnippetString?text:new vscode_1.SnippetString(`\${1:${text}}$0`),cursor.active)))},exports.readInput=async function(prompt,placeholder,value){const data=await vscode_1.window.showInputBox({prompt:prompt,placeHolder:placeholder||prompt,value:value});if(validation_1.isEmpty(data))throw new exception_1.DismissedError;return data},exports.openExternal=function(url){let uri=vscode_1.Uri.parse(url);return uri.query&&/http/.test(uri.scheme)&&(uri=uri.with({query:uri.query.replace(/\n/g,encodeURI("\n"))})),vscode_1.env&&"function"==typeof vscode_1.env.openExternal?vscode_1.env.openExternal(uri):vscode_1.env&&"function"==typeof vscode_1.env.open?vscode_1.env.open(uri):vscode_1.commands.executeCommand("vscode.open",uri)}},function(module,exports,__webpack_require__){var baseIsNative=__webpack_require__(236),getValue=__webpack_require__(241);module.exports=function(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}},function(module,exports){module.exports=require("util")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return truncate})),__webpack_require__.d(__webpack_exports__,"b",(function(){return snipLine})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isMatchingPattern}));var _is__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);function truncate(str,max){return void 0===max&&(max=0),"string"!=typeof str||0===max||str.length<=max?str:str.substr(0,max)+"..."}function snipLine(line,colno){var newLine=line,ll=newLine.length;if(ll<=150)return newLine;colno>ll&&(colno=ll);var start=Math.max(colno-60,0);start<5&&(start=0);var end=Math.min(start+140,ll);return end>ll-5&&(end=ll),end===ll&&(start=Math.max(end-140,0)),newLine=newLine.slice(start,end),start>0&&(newLine="'{snip} "+newLine),end<ll&&(newLine+=" {snip}"),newLine}function isMatchingPattern(value,pattern){return Object(_is__WEBPACK_IMPORTED_MODULE_0__.g)(pattern)?pattern.test(value):"string"==typeof pattern&&-1!==value.indexOf(pattern)}},,,function(module,exports,__webpack_require__){"use strict";const setLevelSym=Symbol("pino.setLevel"),getLevelSym=Symbol("pino.getLevel"),levelValSym=Symbol("pino.levelVal"),useLevelLabelsSym=Symbol("pino.useLevelLabels"),useOnlyCustomLevelsSym=Symbol("pino.useOnlyCustomLevels"),mixinSym=Symbol("pino.mixin"),lsCacheSym=Symbol("pino.lsCache"),chindingsSym=Symbol("pino.chindings"),parsedChindingsSym=Symbol("pino.parsedChindings"),asJsonSym=Symbol("pino.asJson"),writeSym=Symbol("pino.write"),redactFmtSym=Symbol("pino.redactFmt"),timeSym=Symbol("pino.time"),timeSliceIndexSym=Symbol("pino.timeSliceIndex"),streamSym=Symbol("pino.stream"),stringifySym=Symbol("pino.stringify"),stringifiersSym=Symbol("pino.stringifiers"),endSym=Symbol("pino.end"),formatOptsSym=Symbol("pino.formatOpts"),messageKeySym=Symbol("pino.messageKey"),nestedKeySym=Symbol("pino.nestedKey"),wildcardFirstSym=Symbol("pino.wildcardFirst"),serializersSym=Symbol.for("pino.serializers"),formattersSym=Symbol.for("pino.formatters"),hooksSym=Symbol.for("pino.hooks"),needsMetadataGsym=Symbol.for("pino.metadata");module.exports={setLevelSym:setLevelSym,getLevelSym:getLevelSym,levelValSym:levelValSym,useLevelLabelsSym:useLevelLabelsSym,mixinSym:mixinSym,lsCacheSym:lsCacheSym,chindingsSym:chindingsSym,parsedChindingsSym:parsedChindingsSym,asJsonSym:asJsonSym,writeSym:writeSym,serializersSym:serializersSym,redactFmtSym:redactFmtSym,timeSym:timeSym,timeSliceIndexSym:timeSliceIndexSym,streamSym:streamSym,stringifySym:stringifySym,stringifiersSym:stringifiersSym,endSym:endSym,formatOptsSym:formatOptsSym,messageKeySym:messageKeySym,nestedKeySym:nestedKeySym,wildcardFirstSym:wildcardFirstSym,needsMetadataGsym:needsMetadataGsym,useOnlyCustomLevelsSym:useOnlyCustomLevelsSym,formattersSym:formattersSym,hooksSym:hooksSym}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||exports.hasOwnProperty(p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(170),exports),__exportStar(__webpack_require__(171),exports),__exportStar(__webpack_require__(172),exports),__exportStar(__webpack_require__(173),exports),__exportStar(__webpack_require__(174),exports)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class GenericError extends Error{}exports.default=GenericError},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function array(value){return Array.isArray(value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=function(value){return"function"==typeof value},exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))}},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function func(value){return"function"==typeof value}function array(value){return Array.isArray(value)}function thenable(value){return value&&func(value.then)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=func,exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))},exports.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)},exports.thenable=thenable,exports.asPromise=function(value){return value instanceof Promise?value:thenable(value)?new Promise((resolve,reject)=>{value.then(resolved=>resolve(resolved),error=>reject(error))}):Promise.resolve(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(32),getRawTag=__webpack_require__(237),objectToString=__webpack_require__(238),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(15).Symbol;module.exports=Symbol},function(module,exports){module.exports=function(value){return null!=value&&"object"==typeof value}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.format=exports.getQueryParameters=exports.extractConnName=exports.formatInsertQuery=exports.cleanUp=exports.parse=void 0;const sqlFormatter_1=__importDefault(__webpack_require__(345)),parse_1=__importDefault(__webpack_require__(357));exports.parse=function(query,driver="mysql"){return parse_1.default(query,driver)},exports.cleanUp=function(query=""){return query?query.toString().replace("\t","  ").replace(/(--.*)|(((\/\*)+?[\w\W]+?(\*\/)+))/gim,"").split(/\r\n|\n/gi).map(v=>v.trim()).filter(Boolean).join(" ").trim():""},exports.formatInsertQuery=function(insertQuery,formatOptions){return format(insertQuery.substr(0,Math.max(0,insertQuery.length-2))+");",formatOptions).replace(/'\${(\d+):([\w\s]+):((int|bool|num|real)[\w\s]*)}'/gi,(_,pos,colName,type)=>`\${${pos}:${colName.trim()}:${type.trim()}}`).concat("$0")},exports.extractConnName=function(query){return((query.match(/@conn\s*(.+)$/m)||[])[1]||"").trim()||null},exports.getQueryParameters=function(query,regexStr){if(!query||!regexStr)return[];const regex=new RegExp(regexStr,"g"),paramsMap={};let match;for(;null!==(match=regex.exec(query));){const queryPart=query.substring(Math.max(0,regex.lastIndex-15),Math.min(query.length,regex.lastIndex+15)).replace(/[\r\n]/g,"").replace(/\s+/g," ").trim();paramsMap[match[0]]||(paramsMap[match[0]]={param:match[0],string:`...${queryPart}...`})}return Object.values(paramsMap)};const dollarRegex=/\$([^\s]+)/gi;function format(query,formatOptions={}){const{reservedWordCase:reservedWordCase=null,insertSpaces:insertSpaces=!0,tabSize:tabSize=2,...opts}=formatOptions;return function(query,originalQuery){return dollarRegex.test(originalQuery)?(originalQuery.match(dollarRegex)||[]).reduce((text,match)=>{const matchEscaped=match.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return text.replace(new RegExp("\\$ +"+matchEscaped.substr(2),"g"),match.replace(/\$/g,"$$$$"))},query):query}(sqlFormatter_1.default.format(query,{...opts,indent:insertSpaces?" ".repeat(tabSize):"\t",reservedWordCase:reservedWordCase}),query)}exports.format=format},function(module,exports){module.exports=require("https")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SyncPromise}));var States,_is__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);!function(States){States.PENDING="PENDING",States.RESOLVED="RESOLVED",States.REJECTED="REJECTED"}(States||(States={}));var SyncPromise=function(){function SyncPromise(executor){var _this=this;this._state=States.PENDING,this._handlers=[],this._resolve=function(value){_this._setResult(States.RESOLVED,value)},this._reject=function(reason){_this._setResult(States.REJECTED,reason)},this._setResult=function(state,value){_this._state===States.PENDING&&(Object(_is__WEBPACK_IMPORTED_MODULE_0__.j)(value)?value.then(_this._resolve,_this._reject):(_this._state=state,_this._value=value,_this._executeHandlers()))},this._attachHandler=function(handler){_this._handlers=_this._handlers.concat(handler),_this._executeHandlers()},this._executeHandlers=function(){_this._state!==States.PENDING&&(_this._state===States.REJECTED?_this._handlers.forEach((function(handler){handler.onrejected&&handler.onrejected(_this._value)})):_this._handlers.forEach((function(handler){handler.onfulfilled&&handler.onfulfilled(_this._value)})),_this._handlers=[])};try{executor(this._resolve,this._reject)}catch(e){this._reject(e)}}return SyncPromise.prototype.toString=function(){return"[object SyncPromise]"},SyncPromise.resolve=function(value){return new SyncPromise((function(resolve){resolve(value)}))},SyncPromise.reject=function(reason){return new SyncPromise((function(_,reject){reject(reason)}))},SyncPromise.all=function(collection){return new SyncPromise((function(resolve,reject){if(Array.isArray(collection))if(0!==collection.length){var counter=collection.length,resolvedCollection=[];collection.forEach((function(item,index){SyncPromise.resolve(item).then((function(value){resolvedCollection[index]=value,0===(counter-=1)&&resolve(resolvedCollection)})).then(null,reject)}))}else resolve([]);else reject(new TypeError("Promise.all requires an array as input."))}))},SyncPromise.prototype.then=function(onfulfilled,onrejected){var _this=this;return new SyncPromise((function(resolve,reject){_this._attachHandler({onfulfilled:function(result){if(onfulfilled)try{return void resolve(onfulfilled(result))}catch(e){return void reject(e)}else resolve(result)},onrejected:function(reason){if(onrejected)try{return void resolve(onrejected(reason))}catch(e){return void reject(e)}else reject(reason)}})}))},SyncPromise.prototype.catch=function(onrejected){return this.then((function(val){return val}),onrejected)},SyncPromise.prototype.finally=function(onfinally){var _this=this;return new SyncPromise((function(resolve,reject){var val,isRejected;return _this.then((function(value){isRejected=!1,val=value,onfinally&&onfinally()}),(function(reason){isRejected=!0,val=reason,onfinally&&onfinally()})).then((function(){isRejected?reject(val):resolve(val)}))}))},SyncPromise}()},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SESSION_FILES_DIRNAME=exports.RUNNING_INFO_FILENAME=exports.migrateFilesToNewPaths=exports.getCachePath=exports.getDataPath=exports.getConfigPath=exports.getHome=void 0;const env_paths_1=__importDefault(__webpack_require__(134)),path_1=__importDefault(__webpack_require__(9)),fs_1=__importDefault(__webpack_require__(6)),src_1=__webpack_require__(10),mkdir_1=__importDefault(__webpack_require__(167)),log=src_1.createLogger("persistence"),SQLTOOLS_PATHS=env_paths_1.default("vscode-sqltools",{suffix:null});let home;function getHome(...args){if(!home){if(!process||!process.env||!process.env.HOME&&!process.env.USERPROFILE)throw new Error("Could not find user home path");home=process.env.HOME||process.env.USERPROFILE}return path_1.default.resolve(home,...args)}function getConfigPath(...args){return path_1.default.resolve(SQLTOOLS_PATHS.config,...args)}function getDataPath(...args){return path_1.default.resolve(SQLTOOLS_PATHS.data,...args)}fs_1.default.existsSync(SQLTOOLS_PATHS.config)||(mkdir_1.default.sync(SQLTOOLS_PATHS.config),log.debug("Created config path "+SQLTOOLS_PATHS.config)),fs_1.default.existsSync(SQLTOOLS_PATHS.data)||(mkdir_1.default.sync(SQLTOOLS_PATHS.data),log.debug("Created data path "+SQLTOOLS_PATHS.data)),fs_1.default.existsSync(SQLTOOLS_PATHS.cache)||(mkdir_1.default.sync(SQLTOOLS_PATHS.cache),log.debug("Created cache path "+SQLTOOLS_PATHS.cache)),fs_1.default.existsSync(getDataPath("node_modules"))||(mkdir_1.default.sync(getDataPath("node_modules")),log.debug("Created node_modules path "+getDataPath("node_modules"))),exports.getHome=getHome,exports.getConfigPath=getConfigPath,exports.getDataPath=getDataPath,exports.getCachePath=function(...args){return path_1.default.resolve(SQLTOOLS_PATHS.cache,...args)},exports.migrateFilesToNewPaths=function(){log.debug("Checking file paths migration needed"),[{from:getHome(".sqltools-setup"),to:getConfigPath(exports.RUNNING_INFO_FILENAME),migrated:!1},{from:getHome(".SQLTools"),to:getDataPath(exports.SESSION_FILES_DIRNAME)}].map(task=>{const{from:from,to:to}=task;return fs_1.default.existsSync(to)?(log.debug(`Destination file ${to} already exists. Skipping...`),task):fs_1.default.existsSync(from)?(fs_1.default.renameSync(from,to),task.migrated=!0,log.info(`Migrated file from ${from} to ${to}`),task):(log.debug(`Origin file ${from} doesnt exists. Skipping...`),task)})},exports.RUNNING_INFO_FILENAME="runningInfo.json",exports.SESSION_FILES_DIRNAME="session"},function(module,exports,__webpack_require__){"use strict";let telemetry;Object.defineProperty(exports,"__esModule",{value:!0}),telemetry=__webpack_require__(177).default,exports.default=telemetry},function(module,exports){module.exports=require("child_process")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function(Disposable){Disposable.create=function(func){return{dispose:func}}}(exports.Disposable||(exports.Disposable={})),function(Event){const _disposable={dispose(){}};Event.None=function(){return _disposable}}(exports.Event||(exports.Event={}));class CallbackList{add(callback,context=null,bucket){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(callback),this._contexts.push(context),Array.isArray(bucket)&&bucket.push({dispose:()=>this.remove(callback,context)})}remove(callback,context=null){if(this._callbacks){for(var foundCallbackWithDifferentContext=!1,i=0,len=this._callbacks.length;i<len;i++)if(this._callbacks[i]===callback){if(this._contexts[i]===context)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);foundCallbackWithDifferentContext=!0}if(foundCallbackWithDifferentContext)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...args){if(!this._callbacks)return[];for(var ret=[],callbacks=this._callbacks.slice(0),contexts=this._contexts.slice(0),i=0,len=callbacks.length;i<len;i++)try{ret.push(callbacks[i].apply(contexts[i],args))}catch(e){console.error(e)}return ret}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class Emitter{constructor(_options){this._options=_options}get event(){return this._event||(this._event=(listener,thisArgs,disposables)=>{let result;return this._callbacks||(this._callbacks=new CallbackList),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(listener,thisArgs),result={dispose:()=>{this._callbacks.remove(listener,thisArgs),result.dispose=Emitter._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(disposables)&&disposables.push(result),result}),this._event}fire(event){this._callbacks&&this._callbacks.invoke.call(this._callbacks,event)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}exports.Emitter=Emitter,Emitter._noop=function(){}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(21)(Object,"create");module.exports=nativeCreate},function(module,exports){module.exports=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},function(module,exports,__webpack_require__){var listCacheClear=__webpack_require__(246),listCacheDelete=__webpack_require__(247),listCacheGet=__webpack_require__(248),listCacheHas=__webpack_require__(249),listCacheSet=__webpack_require__(250);function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,module.exports=ListCache},function(module,exports,__webpack_require__){var eq=__webpack_require__(67);module.exports=function(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}},function(module,exports,__webpack_require__){var isKeyable=__webpack_require__(252);module.exports=function(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(31),isObjectLike=__webpack_require__(33);module.exports=function(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(46);module.exports=function(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(102),isLength=__webpack_require__(76);module.exports=function(value){return null!=value&&isLength(value.length)&&!isFunction(value)}},function(module,exports){module.exports=function(value){return value}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const Tokenizer_1=__importDefault(__webpack_require__(347)),Formatter_1=__importDefault(__webpack_require__(349));exports.default=class AbstractFormatter{constructor(cfg){this.cfg=cfg}format(query){return new Formatter_1.default(this.cfg,this.tokenizer(),this.tokenOverride).format(query)}tokenize(query){return this.tokenizer().tokenize(query)}tokenizer(){return new Tokenizer_1.default(this.getTokenizerConfig())}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TokenTypes=void 0,function(TokenTypes){TokenTypes.WHITESPACE="whitespace",TokenTypes.WORD="word",TokenTypes.STRING="string",TokenTypes.RESERVED="reserved",TokenTypes.RESERVED_TOP_LEVEL="reserved-top-level",TokenTypes.RESERVED_TOP_LEVEL_NO_INDENT="reserved-top-level-no-indent",TokenTypes.RESERVED_NEWLINE="reserved-newline",TokenTypes.OPERATOR="operator",TokenTypes.NO_SPACE_OPERATOR="no-space-operator",TokenTypes.OPEN_PAREN="open-paren",TokenTypes.CLOSE_PAREN="close-paren",TokenTypes.LINE_COMMENT="line-comment",TokenTypes.BLOCK_COMMENT="block-comment",TokenTypes.NUMBER="number",TokenTypes.PLACEHOLDER="placeholder",TokenTypes.SERVERVARIABLE="servervariable"}(exports.TokenTypes||(exports.TokenTypes={}))},function(module,exports){module.exports=require("http")},function(module,exports){module.exports=require("domain")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Scope})),__webpack_require__.d(__webpack_exports__,"b",(function(){return addGlobalEventProcessor}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_sentry_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(36),_sentry_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_sentry_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),Scope=function(){function Scope(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._context={}}return Scope.prototype.addScopeListener=function(callback){this._scopeListeners.push(callback)},Scope.prototype.addEventProcessor=function(callback){return this._eventProcessors.push(callback),this},Scope.prototype._notifyScopeListeners=function(){var _this=this;this._notifyingListeners||(this._notifyingListeners=!0,setTimeout((function(){_this._scopeListeners.forEach((function(callback){callback(_this)})),_this._notifyingListeners=!1})))},Scope.prototype._notifyEventProcessors=function(processors,event,hint,index){var _this=this;return void 0===index&&(index=0),new _sentry_utils__WEBPACK_IMPORTED_MODULE_1__.a((function(resolve,reject){var processor=processors[index];if(null===event||"function"!=typeof processor)resolve(event);else{var result=processor(tslib__WEBPACK_IMPORTED_MODULE_0__.a({},event),hint);Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_2__.j)(result)?result.then((function(final){return _this._notifyEventProcessors(processors,final,hint,index+1).then(resolve)})).then(null,reject):_this._notifyEventProcessors(processors,result,hint,index+1).then(resolve).then(null,reject)}}))},Scope.prototype.setUser=function(user){return this._user=user||{},this._notifyScopeListeners(),this},Scope.prototype.setTags=function(tags){return this._tags=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._tags,tags),this._notifyScopeListeners(),this},Scope.prototype.setTag=function(key,value){var _a;return this._tags=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._tags,((_a={})[key]=value,_a)),this._notifyScopeListeners(),this},Scope.prototype.setExtras=function(extras){return this._extra=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._extra,extras),this._notifyScopeListeners(),this},Scope.prototype.setExtra=function(key,extra){var _a;return this._extra=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._extra,((_a={})[key]=extra,_a)),this._notifyScopeListeners(),this},Scope.prototype.setFingerprint=function(fingerprint){return this._fingerprint=fingerprint,this._notifyScopeListeners(),this},Scope.prototype.setLevel=function(level){return this._level=level,this._notifyScopeListeners(),this},Scope.prototype.setTransaction=function(transaction){return this._transaction=transaction,this._span&&(this._span.transaction=transaction),this._notifyScopeListeners(),this},Scope.prototype.setContext=function(key,context){var _a;return this._context=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._context,((_a={})[key]=context,_a)),this._notifyScopeListeners(),this},Scope.prototype.setSpan=function(span){return this._span=span,this._notifyScopeListeners(),this},Scope.prototype.getSpan=function(){return this._span},Scope.clone=function(scope){var newScope=new Scope;return scope&&(newScope._breadcrumbs=tslib__WEBPACK_IMPORTED_MODULE_0__.f(scope._breadcrumbs),newScope._tags=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},scope._tags),newScope._extra=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},scope._extra),newScope._context=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},scope._context),newScope._user=scope._user,newScope._level=scope._level,newScope._span=scope._span,newScope._transaction=scope._transaction,newScope._fingerprint=scope._fingerprint,newScope._eventProcessors=tslib__WEBPACK_IMPORTED_MODULE_0__.f(scope._eventProcessors)),newScope},Scope.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._context={},this._level=void 0,this._transaction=void 0,this._fingerprint=void 0,this._span=void 0,this._notifyScopeListeners(),this},Scope.prototype.addBreadcrumb=function(breadcrumb,maxBreadcrumbs){var mergedBreadcrumb=tslib__WEBPACK_IMPORTED_MODULE_0__.a({timestamp:Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_3__.m)()},breadcrumb);return this._breadcrumbs=void 0!==maxBreadcrumbs&&maxBreadcrumbs>=0?tslib__WEBPACK_IMPORTED_MODULE_0__.f(this._breadcrumbs,[mergedBreadcrumb]).slice(-maxBreadcrumbs):tslib__WEBPACK_IMPORTED_MODULE_0__.f(this._breadcrumbs,[mergedBreadcrumb]),this._notifyScopeListeners(),this},Scope.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},Scope.prototype._applyFingerprint=function(event){event.fingerprint=event.fingerprint?Array.isArray(event.fingerprint)?event.fingerprint:[event.fingerprint]:[],this._fingerprint&&(event.fingerprint=event.fingerprint.concat(this._fingerprint)),event.fingerprint&&!event.fingerprint.length&&delete event.fingerprint},Scope.prototype.applyToEvent=function(event,hint){return this._extra&&Object.keys(this._extra).length&&(event.extra=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._extra,event.extra)),this._tags&&Object.keys(this._tags).length&&(event.tags=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._tags,event.tags)),this._user&&Object.keys(this._user).length&&(event.user=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._user,event.user)),this._context&&Object.keys(this._context).length&&(event.contexts=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._context,event.contexts)),this._level&&(event.level=this._level),this._transaction&&(event.transaction=this._transaction),this._applyFingerprint(event),event.breadcrumbs=tslib__WEBPACK_IMPORTED_MODULE_0__.f(event.breadcrumbs||[],this._breadcrumbs),event.breadcrumbs=event.breadcrumbs.length>0?event.breadcrumbs:void 0,this._notifyEventProcessors(tslib__WEBPACK_IMPORTED_MODULE_0__.f(getGlobalEventProcessors(),this._eventProcessors),event,hint)},Scope}();function getGlobalEventProcessors(){var global=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_3__.h)();return global.__SENTRY__=global.__SENTRY__||{},global.__SENTRY__.globalEventProcessors=global.__SENTRY__.globalEventProcessors||[],global.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(callback){getGlobalEventProcessors().push(callback)}},function(module,exports,__webpack_require__){"use strict";module.exports=/[^.[\]]+|\[((?:.)*?)\]/g},function(module,exports){module.exports=require("events")},function(module,exports,__webpack_require__){"use strict";module.exports=function(s){return s}},function(module,exports,__webpack_require__){"use strict";const format=__webpack_require__(151),{mapHttpRequest:mapHttpRequest,mapHttpResponse:mapHttpResponse}=__webpack_require__(81),SonicBoom=__webpack_require__(83),stringifySafe=__webpack_require__(85),{lsCacheSym:lsCacheSym,chindingsSym:chindingsSym,parsedChindingsSym:parsedChindingsSym,writeSym:writeSym,serializersSym:serializersSym,formatOptsSym:formatOptsSym,endSym:endSym,stringifiersSym:stringifiersSym,stringifySym:stringifySym,wildcardFirstSym:wildcardFirstSym,needsMetadataGsym:needsMetadataGsym,redactFmtSym:redactFmtSym,streamSym:streamSym,nestedKeySym:nestedKeySym,formattersSym:formattersSym,messageKeySym:messageKeySym}=__webpack_require__(26);function noop(){}function asString(str){var result="",last=0,found=!1,point=255;const l=str.length;if(l>100)return JSON.stringify(str);for(var i=0;i<l&&point>=32;i++)34!==(point=str.charCodeAt(i))&&92!==point||(result+=str.slice(last,i)+"\\",last=i,found=!0);return found?result+=str.slice(last):result=str,point<32?JSON.stringify(str):'"'+result+'"'}function getPrettyStream(opts,prettifier,dest,instance){if(prettifier&&"function"==typeof prettifier)return prettifierMetaWrapper((prettifier=prettifier.bind(instance))(opts),dest,opts);try{var prettyFactory=__webpack_require__(152);return prettyFactory.asMetaWrapper=prettifierMetaWrapper,prettifierMetaWrapper(prettyFactory(opts),dest,opts)}catch(e){throw Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately")}}function prettifierMetaWrapper(pretty,dest,opts){opts=Object.assign({suppressFlushSyncWarning:!1},opts);var warned=!1;return{[needsMetadataGsym]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){opts.suppressFlushSyncWarning||warned||(warned=!0,setMetadataProps(dest,this),dest.write(pretty(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){const lastLogger=this.lastLogger;var chindings=null;return lastLogger?(lastLogger.hasOwnProperty(parsedChindingsSym)?chindings=lastLogger[parsedChindingsSym]:(chindings=JSON.parse("{"+lastLogger[chindingsSym].substr(1)+"}"),lastLogger[parsedChindingsSym]=chindings),chindings):null},write(chunk){const lastLogger=this.lastLogger,chindings=this.chindings();var time=this.lastTime;time.match(/^\d+/)&&(time=parseInt(time));var lastObj=this.lastObj,lastMsg=this.lastMsg;const formatters=lastLogger[formattersSym],formattedObj=formatters.log?formatters.log(lastObj):lastObj,messageKey=lastLogger[messageKeySym];lastMsg&&formattedObj&&!formattedObj.hasOwnProperty(messageKey)&&(formattedObj[messageKey]=lastMsg);const obj=Object.assign({level:this.lastLevel,time:time},formattedObj,null),serializers=lastLogger[serializersSym],keys=Object.keys(serializers);for(var key,i=0;i<keys.length;i++)void 0!==obj[key=keys[i]]&&(obj[key]=serializers[key](obj[key]));for(key in chindings)obj.hasOwnProperty(key)||(obj[key]=chindings[key]);const redact=lastLogger[stringifiersSym][redactFmtSym],formatted=pretty("function"==typeof redact?redact(obj):obj);void 0!==formatted&&(setMetadataProps(dest,this),dest.write(formatted))}}}function buildSafeSonicBoom(opts){const stream=new SonicBoom(opts);return stream.on("error",(function filterBrokenPipe(err){if("EPIPE"===err.code)return stream.write=noop,stream.end=noop,stream.flushSync=noop,void(stream.destroy=noop);stream.removeListener("error",filterBrokenPipe),stream.emit("error",err)})),stream}function setMetadataProps(dest,that){!0===dest[needsMetadataGsym]&&(dest.lastLevel=that.lastLevel,dest.lastMsg=that.lastMsg,dest.lastObj=that.lastObj,dest.lastTime=that.lastTime,dest.lastLogger=that.lastLogger)}module.exports={noop:noop,buildSafeSonicBoom:buildSafeSonicBoom,getPrettyStream:getPrettyStream,asChindings:function(instance,bindings){var key,value,data=instance[chindingsSym];const stringify=instance[stringifySym],stringifiers=instance[stringifiersSym],wildcardStringifier=stringifiers[wildcardFirstSym],serializers=instance[serializersSym],formatter=instance[formattersSym].bindings;for(key in bindings=formatter(bindings)){value=bindings[key];if(!0===("level"!==key&&"serializers"!==key&&"formatters"!==key&&"customLevels"!==key&&bindings.hasOwnProperty(key)&&void 0!==value)){if(value=serializers[key]?serializers[key](value):value,void 0===(value=(stringifiers[key]||wildcardStringifier||stringify)(value)))continue;data+=',"'+key+'":'+value}}return data},asJson:function(obj,msg,num,time){const stringify=this[stringifySym],stringifiers=this[stringifiersSym],end=this[endSym],chindings=this[chindingsSym],serializers=this[serializersSym],formatters=this[formattersSym],messageKey=this[messageKeySym];var value,data=this[lsCacheSym][num]+time;data+=chindings;var notHasOwnProperty=void 0===obj.hasOwnProperty;formatters.log&&(obj=formatters.log(obj)),void 0!==msg&&(obj[messageKey]=msg);const wildcardStringifier=stringifiers[wildcardFirstSym];for(var key in obj)if(value=obj[key],(notHasOwnProperty||obj.hasOwnProperty(key))&&void 0!==value){value=serializers[key]?serializers[key](value):value;const stringifier=stringifiers[key]||wildcardStringifier;switch(typeof value){case"undefined":case"function":continue;case"number":!1===Number.isFinite(value)&&(value=null);case"boolean":stringifier&&(value=stringifier(value));break;case"string":value=(stringifier||asString)(value);break;default:value=(stringifier||stringify)(value)}if(void 0===value)continue;data+=',"'+key+'":'+value}return data+end},genLog:function(level,hook){return hook?function(...args){hook.call(this,args,LOG)}:LOG;function LOG(o,...n){if("object"==typeof o){var formatParams,msg=o;null!==o&&(o.method&&o.headers&&o.socket?o=mapHttpRequest(o):"function"==typeof o.setHeader&&(o=mapHttpResponse(o))),this[nestedKeySym]&&(o={[this[nestedKeySym]]:o}),null===msg&&0===n.length?formatParams=[null]:(msg=n.shift(),formatParams=n),this[writeSym](o,format(msg,formatParams,this[formatOptsSym]),level)}else this[writeSym](null,format(o,n,this[formatOptsSym]),level)}},createArgsNormalizer:function(defaultOptions){return function(instance,opts={},stream){if("string"==typeof opts?(stream=buildSafeSonicBoom({dest:opts,sync:!0}),opts={}):"string"==typeof stream?stream=buildSafeSonicBoom({dest:stream,sync:!0}):(opts instanceof SonicBoom||opts.writable||opts._writableState)&&(stream=opts,opts=null),"extreme"in(opts=Object.assign({},defaultOptions,opts)))throw Error("The extreme option has been removed, use pino.destination({ sync: false }) instead");if("onTerminated"in opts)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in opts&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),opts.levelKey=opts.changeLevelName,delete opts.changeLevelName);const{enabled:enabled,prettyPrint:prettyPrint,prettifier:prettifier,messageKey:messageKey}=opts;if(!1===enabled&&(opts.level="silent"),(stream=stream||process.stdout)===process.stdout&&stream.fd>=0&&!function(stream){return stream.write!==stream.constructor.prototype.write}(stream)&&(stream=buildSafeSonicBoom({fd:stream.fd,sync:!0})),prettyPrint){stream=getPrettyStream(Object.assign({messageKey:messageKey},prettyPrint),prettifier,stream,instance)}return{opts:opts,stream:stream}}},final:function(logger,handler){if(void 0===logger||"function"!=typeof logger.child)throw Error("expected a pino logger instance");const hasHandler=void 0!==handler;if(hasHandler&&"function"!=typeof handler)throw Error("if supplied, the handler parameter should be a function");const stream=logger[streamSym];if("function"!=typeof stream.flushSync)throw Error("final requires a stream that has a flushSync method, such as pino.destination");const finalLogger=new Proxy(logger,{get:(logger,key)=>key in logger.levels.values?(...args)=>{logger[key](...args),stream.flushSync()}:logger[key]});return hasHandler?(err=null,...args)=>{try{stream.flushSync()}catch(e){}return handler(err,finalLogger,...args)}:finalLogger},stringify:function(obj){try{return JSON.stringify(obj)}catch(_){return stringifySafe(obj)}},buildFormatters:function(level,bindings,log){return{level:level,bindings:bindings,log:log}}}},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";module.exports={DATE_FORMAT:"yyyy-mm-dd HH:MM:ss.l o",ERROR_LIKE_KEYS:["err","error"],MESSAGE_KEY:"msg",LEVEL_KEY:"level",TIMESTAMP_KEY:"time",LEVELS:{default:"USERLVL",60:"FATAL",50:"ERROR",40:"WARN ",30:"INFO ",20:"DEBUG",10:"TRACE"},LEVEL_NAMES:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},LOGGER_KEYS:["pid","hostname","name","level","time","timestamp","v","caller"]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.replacer=exports.numericVersion=exports.sortText=void 0,exports.sortText=function(a,b){return a.toString().localeCompare(b.toString())},exports.numericVersion=function(v){const n=v.replace(/^v/,"").split(".").map(a=>parseInt(a.replace(/\D+/,""),10));return n.length>=3?1e4*n[0]+100*n[1]+n[2]:2===n.length?1e4*n[0]+100*n[1]:1e4*n[0]},exports.replacer=function(source,toReplace){return Object.keys(toReplace).reduce((destination,replaceParam)=>destination.replace(new RegExp(":"+replaceParam,"g"),toReplace[replaceParam]),source)}},function(module,exports){module.exports=require("net")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildResouceKey=void 0;class ResourcesMap extends Map{set(key,value){if("string"!=typeof key)throw"invalid resource name!";return key=key.toLowerCase(),super.set(key,value)}get(key){return super.get(key.toLowerCase())}has(key){return super.has(key.toLowerCase())}delete(key){return super.delete(key.toLowerCase())}}const PluginResourcesMap=new ResourcesMap;exports.buildResouceKey=({type:type,name:name,resource:resource})=>[type,name,resource].join("/"),exports.default=PluginResourcesMap},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=__webpack_require__(40),Is=__webpack_require__(29);let CR=Buffer.from("\r","ascii")[0],LF=Buffer.from("\n","ascii")[0];class MessageBuffer{constructor(encoding="utf8"){this.encoding=encoding,this.index=0,this.buffer=Buffer.allocUnsafe(8192)}append(chunk){var toAppend=chunk;if("string"==typeof chunk){var str=chunk,bufferLen=Buffer.byteLength(str,this.encoding);(toAppend=Buffer.allocUnsafe(bufferLen)).write(str,0,bufferLen,this.encoding)}if(this.buffer.length-this.index>=toAppend.length)toAppend.copy(this.buffer,this.index,0,toAppend.length);else{var newSize=8192*(Math.ceil((this.index+toAppend.length)/8192)+1);0===this.index?(this.buffer=Buffer.allocUnsafe(newSize),toAppend.copy(this.buffer,0,0,toAppend.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),toAppend],newSize)}this.index+=toAppend.length}tryReadHeaders(){let result=void 0,current=0;for(;current+3<this.index&&(this.buffer[current]!==CR||this.buffer[current+1]!==LF||this.buffer[current+2]!==CR||this.buffer[current+3]!==LF);)current++;if(current+3>=this.index)return result;result=Object.create(null),this.buffer.toString("ascii",0,current).split("\r\n").forEach(header=>{let index=header.indexOf(":");if(-1===index)throw new Error("Message header must separate key and value using :");let key=header.substr(0,index),value=header.substr(index+1).trim();result[key]=value});let nextStart=current+4;return this.buffer=this.buffer.slice(nextStart),this.index=this.index-nextStart,result}tryReadContent(length){if(this.index<length)return null;let result=this.buffer.toString(this.encoding,0,length),nextStart=length;return this.buffer.copy(this.buffer,0,nextStart),this.index=this.index-nextStart,result}get numberOfBytes(){return this.index}}!function(MessageReader){MessageReader.is=function(value){let candidate=value;return candidate&&Is.func(candidate.listen)&&Is.func(candidate.dispose)&&Is.func(candidate.onError)&&Is.func(candidate.onClose)&&Is.func(candidate.onPartialMessage)}}(exports.MessageReader||(exports.MessageReader={}));class AbstractMessageReader{constructor(){this.errorEmitter=new events_1.Emitter,this.closeEmitter=new events_1.Emitter,this.partialMessageEmitter=new events_1.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(error){this.errorEmitter.fire(this.asError(error))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(info){this.partialMessageEmitter.fire(info)}asError(error){return error instanceof Error?error:new Error("Reader received error. Reason: "+(Is.string(error.message)?error.message:"unknown"))}}exports.AbstractMessageReader=AbstractMessageReader;class StreamMessageReader extends AbstractMessageReader{constructor(readable,encoding="utf8"){super(),this.readable=readable,this.buffer=new MessageBuffer(encoding),this._partialMessageTimeout=1e4}set partialMessageTimeout(timeout){this._partialMessageTimeout=timeout}get partialMessageTimeout(){return this._partialMessageTimeout}listen(callback){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=callback,this.readable.on("data",data=>{this.onData(data)}),this.readable.on("error",error=>this.fireError(error)),this.readable.on("close",()=>this.fireClose())}onData(data){for(this.buffer.append(data);;){if(-1===this.nextMessageLength){let headers=this.buffer.tryReadHeaders();if(!headers)return;let contentLength=headers["Content-Length"];if(!contentLength)throw new Error("Header must provide a Content-Length property.");let length=parseInt(contentLength);if(isNaN(length))throw new Error("Content-Length value must be a number.");this.nextMessageLength=length}var msg=this.buffer.tryReadContent(this.nextMessageLength);if(null===msg)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var json=JSON.parse(msg);this.callback(json)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout((token,timeout)=>{this.partialMessageTimer=void 0,token===this.messageToken&&(this.firePartialMessage({messageToken:token,waitingTime:timeout}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}exports.StreamMessageReader=StreamMessageReader;exports.IPCMessageReader=class IPCMessageReader extends AbstractMessageReader{constructor(process){super(),this.process=process;let eventEmitter=this.process;eventEmitter.on("error",error=>this.fireError(error)),eventEmitter.on("close",()=>this.fireClose())}listen(callback){this.process.on("message",callback)}};exports.SocketMessageReader=class SocketMessageReader extends StreamMessageReader{constructor(socket,encoding="utf-8"){super(socket,encoding)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=__webpack_require__(40),Is=__webpack_require__(29);!function(MessageWriter){MessageWriter.is=function(value){let candidate=value;return candidate&&Is.func(candidate.dispose)&&Is.func(candidate.onClose)&&Is.func(candidate.onError)&&Is.func(candidate.write)}}(exports.MessageWriter||(exports.MessageWriter={}));class AbstractMessageWriter{constructor(){this.errorEmitter=new events_1.Emitter,this.closeEmitter=new events_1.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(error,message,count){this.errorEmitter.fire([this.asError(error),message,count])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(error){return error instanceof Error?error:new Error("Writer received error. Reason: "+(Is.string(error.message)?error.message:"unknown"))}}exports.AbstractMessageWriter=AbstractMessageWriter;exports.StreamMessageWriter=class StreamMessageWriter extends AbstractMessageWriter{constructor(writable,encoding="utf8"){super(),this.writable=writable,this.encoding=encoding,this.errorCount=0,this.writable.on("error",error=>this.fireError(error)),this.writable.on("close",()=>this.fireClose())}write(msg){let json=JSON.stringify(msg),headers=["Content-Length: ",Buffer.byteLength(json,this.encoding).toString(),"\r\n","\r\n"];try{this.writable.write(headers.join(""),"ascii"),this.writable.write(json,this.encoding),this.errorCount=0}catch(error){this.errorCount++,this.fireError(error,msg,this.errorCount)}}};exports.IPCMessageWriter=class IPCMessageWriter extends AbstractMessageWriter{constructor(process){super(),this.process=process,this.errorCount=0,this.queue=[],this.sending=!1;let eventEmitter=this.process;eventEmitter.on("error",error=>this.fireError(error)),eventEmitter.on("close",()=>this.fireClose)}write(msg){this.sending||0!==this.queue.length?this.queue.push(msg):this.doWriteMessage(msg)}doWriteMessage(msg){try{this.process.send&&(this.sending=!0,this.process.send(msg,void 0,void 0,error=>{this.sending=!1,error?(this.errorCount++,this.fireError(error,msg,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(error){this.errorCount++,this.fireError(error,msg,this.errorCount)}}};exports.SocketMessageWriter=class SocketMessageWriter extends AbstractMessageWriter{constructor(socket,encoding="utf8"){super(),this.socket=socket,this.queue=[],this.sending=!1,this.encoding=encoding,this.errorCount=0,this.socket.on("error",error=>this.fireError(error)),this.socket.on("close",()=>this.fireClose())}dispose(){super.dispose(),this.socket.destroy()}write(msg){this.sending||0!==this.queue.length?this.queue.push(msg):this.doWriteMessage(msg)}doWriteMessage(msg){let json=JSON.stringify(msg),headers=["Content-Length: ",Buffer.byteLength(json,this.encoding).toString(),"\r\n","\r\n"];try{this.sending=!0,this.socket.write(headers.join(""),"ascii",error=>{error&&this.handleError(error,msg);try{this.socket.write(json,this.encoding,error=>{this.sending=!1,error?this.handleError(error,msg):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})}catch(error){this.handleError(error,msg)}})}catch(error){this.handleError(error,msg)}}handleError(error,msg){this.errorCount++,this.fireError(error,msg,this.errorCount)}}},function(module,exports,__webpack_require__){var mapCacheClear=__webpack_require__(233),mapCacheDelete=__webpack_require__(251),mapCacheGet=__webpack_require__(253),mapCacheHas=__webpack_require__(254),mapCacheSet=__webpack_require__(255);function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,module.exports=MapCache},function(module,exports){module.exports=function(value,other){return value===other||value!=value&&other!=other}},function(module,exports,__webpack_require__){var Map=__webpack_require__(21)(__webpack_require__(15),"Map");module.exports=Map},function(module,exports){module.exports=function(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getIconPaths=void 0;const vscode_1=__webpack_require__(1),context_1=__importDefault(__webpack_require__(8)),getIconPath=icon=>vscode_1.Uri.file(context_1.default.asAbsolutePath(`icons/${icon}.svg`));exports.getIconPaths=icon=>({dark:getIconPath(icon+"-dark"),light:getIconPath(icon+"-light")})},function(module,exports){const ContextValue={CONNECTION:"connection",CONNECTED_CONNECTION:"connectedConnection",COLUMN:"connection.column",FUNCTION:"connection.function",SCHEMA:"connection.schema",RESOURCE_GROUP:"connection.resource_group",DATABASE:"connection.database",TABLE:"connection.table",VIEW:"connection.view",MATERIALIZED_VIEW:"connection.materializedView",NO_CHILD:"NO_CHILD",KEYWORDS:"KEYWORDS"};Object.freeze(ContextValue),module.exports={ContextValue:ContextValue}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(16),isSymbol=__webpack_require__(46),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=function(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}},function(module,exports,__webpack_require__){var baseIsArguments=__webpack_require__(281),isObjectLike=__webpack_require__(33),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},function(module,exports,__webpack_require__){var arrayLikeKeys=__webpack_require__(302),baseKeys=__webpack_require__(307),isArrayLike=__webpack_require__(48);module.exports=function(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}},function(module,exports){var reIsUint=/^(?:0|[1-9]\d*)$/;module.exports=function(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}},function(module,exports){module.exports=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.quickPickSearch=exports.quickPick=void 0;const vscode_1=__webpack_require__(1),exception_1=__webpack_require__(27),log=__webpack_require__(10).createLogger("quickpick");exports.quickPick=async function(options,prop,quickPickOptions){const items=options.length>0&&"object"==typeof options[0]?options:options.map(value=>({value:value,label:value.toString()})),qPick=vscode_1.window.createQuickPick(),sel=await new Promise(resolve=>{const{placeHolderDisabled:placeHolderDisabled,...qPickOptions}=quickPickOptions||{};qPick.onDidHide(()=>qPick.dispose()),qPick.onDidChangeSelection((selection=[])=>(qPick.hide(),resolve(qPickOptions.canPickMany?selection:selection[0]))),qPick.onDidTriggerButton(btn=>{btn.cb&&btn.cb(),qPick.hide()}),Object.keys(qPickOptions).forEach(k=>{qPick[k]=qPickOptions[k]}),qPick.items=items,qPick.enabled=items.length>0,qPick.enabled||(qPick.placeholder=placeHolderDisabled||qPick.placeholder),qPick.title=`${qPickOptions.title||"Items"} (${items.length})`,qPick.show()});if(!sel||prop&&!sel[prop])throw new exception_1.DismissedError;return prop?sel[prop]:sel},exports.quickPickSearch=async function(loadOptions,quickPickOptions={}){const qPick=vscode_1.window.createQuickPick();qPick.placeholder=qPick.placeholder||"Type something to search...";const sel=await new Promise(resolve=>{const{placeHolderDisabled:placeHolderDisabled,debounceTime:debounceTime=150,ignoreIfEmpty:ignoreIfEmpty=!1,...qPickOptions}=quickPickOptions;let searchTimeout=null;const onChangeValue=(search="")=>{if(qPick.busy=!0,ignoreIfEmpty&&(!search||!search.trim()))return qPick.items=[],void(qPick.busy=!1);clearInterval(searchTimeout),searchTimeout=setTimeout(()=>{const getOptsPromise=loadOptions(search),catchFn=error=>(qPick.items=[],qPick.busy=!1,qPick.title=`${qPickOptions.title||"Items"} (${qPick.items.length})`,log.error("search error: %O",error),Promise.reject(error)),thenFn=options=>{qPick.busy=!1,qPick.items=options.length>0&&"object"==typeof options[0]?options.map(o=>({...o,value:o,label:o.value||o.label})):options.map(value=>({value:value,label:value.toString()}))};qPick.title=`${qPickOptions.title||"Items"} (${qPick.items.length})`,getOptsPromise instanceof Promise||"function"==typeof getOptsPromise.catch?getOptsPromise.then(thenFn).catch(catchFn):getOptsPromise.then(thenFn,catchFn)},debounceTime)};qPick.onDidChangeValue(onChangeValue),qPick.onDidHide(()=>qPick.dispose()),qPick.onDidChangeSelection((selection=[])=>{qPick.hide(),resolve(selection.map(s=>s.value)),qPick.dispose()}),qPick.onDidTriggerButton(btn=>{btn.cb&&btn.cb(),qPick.hide()}),Object.keys(qPickOptions).forEach(k=>{qPick[k]=qPickOptions[k]}),ignoreIfEmpty||onChangeValue(),qPick.show()});if(!sel||quickPickOptions.canPickMany&&0===sel.length)throw new exception_1.DismissedError;return quickPickOptions.canPickMany?sel:sel.pop()}},function(module,exports){module.exports=require("url")},function(module,exports){module.exports=require("stream")},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const pino_1=__importDefault(__webpack_require__(136));exports.default=function(opts={},stream){const logger=pino_1.default({name:"ext",base:{},level:"info",formatters:{level:level=>({level:level})},prettyPrint:!0,...opts},stream);return logger.show=()=>{},logger}},function(module,exports,__webpack_require__){"use strict";var errSerializer=__webpack_require__(137),reqSerializers=__webpack_require__(138),resSerializers=__webpack_require__(139);module.exports={err:errSerializer,mapHttpRequest:reqSerializers.mapHttpRequest,mapHttpResponse:resSerializers.mapHttpResponse,req:reqSerializers.reqSerializer,res:resSerializers.resSerializer,wrapErrorSerializer:function(customSerializer){return customSerializer===errSerializer?customSerializer:function(err){return customSerializer(errSerializer(err))}},wrapRequestSerializer:function(customSerializer){return customSerializer===reqSerializers.reqSerializer?customSerializer:function(req){return customSerializer(reqSerializers.reqSerializer(req))}},wrapResponseSerializer:function(customSerializer){return customSerializer===resSerializers.resSerializer?customSerializer:function(res){return customSerializer(resSerializers.resSerializer(res))}}}},function(module,exports,__webpack_require__){"use strict";function specialSet(o,k,p,v,f){var n,nv,ov,obj,prop,i=-1,l=p.length,li=l-1,oov=null,exists=!0;if(ov=n=o[k],"object"!=typeof n)return{value:null,parent:null,exists:exists};for(;null!=n&&++i<l;){if(oov=ov,!((k=p[i])in n)){exists=!1;break}if(ov=n[k],nv=f?v(ov):v,nv=i!==li?ov:nv,n[k]=(obj=n,prop=k,Object.prototype.hasOwnProperty.call(obj,prop)&&nv===ov||void 0===nv&&void 0!==v?n[k]:nv),"object"!=typeof(n=n[k]))break}return{value:ov,parent:oov,exists:exists}}function get(o,p){for(var i=-1,l=p.length,n=o;null!=n&&++i<l;)n=n[p[i]];return n}module.exports={groupRedact:function(o,path,censor,isCensorFct){const target=get(o,path);if(null==target)return{keys:null,values:null,target:null,flat:!0};const keys=Object.keys(target),length=keys.length,values=new Array(length);for(var i=0;i<length;i++){const k=keys[i];values[i]=target[k],target[k]=isCensorFct?censor(target[k]):censor}return{keys:keys,values:values,target:target,flat:!0}},groupRestore:function({keys:keys,values:values,target:target}){if(null==target)return;const length=keys.length;for(var i=0;i<length;i++){const k=keys[i];target[k]=values[i]}},nestedRedact:function(store,o,path,ns,censor,isCensorFct){const target=get(o,path);if(null==target)return;const keys=Object.keys(target),length=keys.length;for(var i=0;i<length;i++){const key=keys[i],{value:value,parent:parent,exists:exists}=specialSet(target,key,ns,censor,isCensorFct);!0===exists&&null!==parent&&store.push({key:ns[ns.length-1],target:parent,value:value})}return store},nestedRestore:function(arr){const length=arr.length;for(var i=0;i<length;i++){const{key:key,target:target,value:value}=arr[i];target[key]=value}}}},function(module,exports,__webpack_require__){"use strict";const fs=__webpack_require__(6),EventEmitter=__webpack_require__(56),flatstr=__webpack_require__(57),inherits=__webpack_require__(22).inherits,sleep=__webpack_require__(150);function openFile(file,sonic){function fileOpened(err,fd){if(err)sonic.emit("error",err);else if(sonic.fd=fd,sonic._reopening=!1,sonic._opening=!1,sonic._writing=!1,sonic.emit("ready"),!sonic._reopening){var len=sonic._buf.length;len>0&&len>sonic.minLength&&!sonic.destroyed&&actualWrite(sonic)}}if(sonic._opening=!0,sonic._writing=!0,sonic.file=file,sonic.sync){fileOpened(null,fs.openSync(file,"a")),process.nextTick(()=>sonic.emit("ready"))}else fs.open(file,"a",fileOpened)}function SonicBoom(opts){if(!(this instanceof SonicBoom))return new SonicBoom(opts);var{fd:fd,dest:dest,minLength:minLength,sync:sync}=opts||{};if(fd=fd||dest,this._buf="",this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this.file=null,this.destroyed=!1,this.sync=sync||!1,this.minLength=minLength||0,"number"==typeof fd)this.fd=fd,process.nextTick(()=>this.emit("ready"));else{if("string"!=typeof fd)throw new Error("SonicBoom supports only file descriptors and files");openFile(fd,this)}this.release=(err,n)=>{if(err)if("EAGAIN"===err.code)if(this.sync)try{sleep(100),this.release(void 0,0)}catch(err){this.release(err)}else setTimeout(()=>{fs.write(this.fd,this._writingBuf,"utf8",this.release)},100);else this.emit("error",err);else{if(this._writingBuf.length!==n){if(this._writingBuf=this._writingBuf.slice(n),!this.sync)return void fs.write(this.fd,this._writingBuf,"utf8",this.release);try{do{n=fs.writeSync(this.fd,this._writingBuf,"utf8"),this._writingBuf=this._writingBuf.slice(n)}while(0!==this._writingBuf.length)}catch(err){return void this.release(err)}}if(this._writingBuf="",!this.destroyed){var len=this._buf.length;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):len>0&&len>this.minLength?actualWrite(this):this._ending?len>0?actualWrite(this):(this._writing=!1,actualClose(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(emitDrain,this)):this.emit("drain"))}}}}function emitDrain(sonic){sonic._asyncDrainScheduled=!1,sonic.emit("drain")}function actualWrite(sonic){sonic._writing=!0;var buf=sonic._buf,release=sonic.release;if(buf.length>16777216?(buf=buf.slice(0,16777216),sonic._buf=sonic._buf.slice(16777216)):sonic._buf="",flatstr(buf),sonic._writingBuf=buf,sonic.sync)try{release(null,fs.writeSync(sonic.fd,buf,"utf8"))}catch(err){release(err)}else fs.write(sonic.fd,buf,"utf8",release)}function actualClose(sonic){-1!==sonic.fd?(fs.close(sonic.fd,err=>{err?sonic.emit("error",err):(sonic._ending&&!sonic._writing&&sonic.emit("finish"),sonic.emit("close"))}),sonic.destroyed=!0,sonic._buf=""):sonic.once("ready",actualClose.bind(null,sonic))}inherits(SonicBoom,EventEmitter),SonicBoom.prototype.write=function(data){if(this.destroyed)throw new Error("SonicBoom destroyed");this._buf+=data;var len=this._buf.length;return!this._writing&&len>this.minLength&&actualWrite(this),len<16384},SonicBoom.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||actualWrite(this)},SonicBoom.prototype.reopen=function(file){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening)this.once("ready",()=>{this.reopen(file)});else if(!this._ending){if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");this._reopening=!0,this._writing||(fs.close(this.fd,err=>{if(err)return this.emit("error",err)}),openFile(file||this.file,this))}},SonicBoom.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._opening?this.once("ready",()=>{this.end()}):this._ending||(this._ending=!0,!this._writing&&this._buf.length>0&&this.fd>=0?actualWrite(this):this._writing||actualClose(this))},SonicBoom.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");this._buf.length>0&&(fs.writeSync(this.fd,this._buf,"utf8"),this._buf="")},SonicBoom.prototype.destroy=function(){this.destroyed||actualClose(this)},module.exports=SonicBoom},function(module,exports,__webpack_require__){"use strict";const flatstr=__webpack_require__(57),{lsCacheSym:lsCacheSym,levelValSym:levelValSym,useOnlyCustomLevelsSym:useOnlyCustomLevelsSym,streamSym:streamSym,formattersSym:formattersSym,hooksSym:hooksSym}=__webpack_require__(26),{noop:noop,genLog:genLog}=__webpack_require__(58),levels={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},levelMethods={fatal:hook=>{const logFatal=genLog(levels.fatal,hook);return function(...args){const stream=this[streamSym];if(logFatal.call(this,...args),"function"==typeof stream.flushSync)try{stream.flushSync()}catch(e){}}},error:hook=>genLog(levels.error,hook),warn:hook=>genLog(levels.warn,hook),info:hook=>genLog(levels.info,hook),debug:hook=>genLog(levels.debug,hook),trace:hook=>genLog(levels.trace,hook)},nums=Object.keys(levels).reduce((o,k)=>(o[levels[k]]=k,o),{}),initialLsCache=Object.keys(nums).reduce((o,k)=>(o[k]=flatstr('{"level":'+Number(k)),o),{});function isStandardLevel(level,useOnlyCustomLevels){if(useOnlyCustomLevels)return!1;switch(level){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}module.exports={initialLsCache:initialLsCache,genLsCache:function(instance){const formatter=instance[formattersSym].level,{labels:labels}=instance.levels,cache={};for(const label in labels){const level=formatter(labels[label],Number(label));cache[label]=JSON.stringify(level).slice(0,-1)}return instance[lsCacheSym]=cache,instance},levelMethods:levelMethods,getLevel:function(level){const{levels:levels,levelVal:levelVal}=this;return levels&&levels.labels?levels.labels[levelVal]:""},setLevel:function(level){const{labels:labels,values:values}=this.levels;if("number"==typeof level){if(void 0===labels[level])throw Error("unknown level value"+level);level=labels[level]}if(void 0===values[level])throw Error("unknown level "+level);const preLevelVal=this[levelValSym],levelVal=this[levelValSym]=values[level],useOnlyCustomLevelsVal=this[useOnlyCustomLevelsSym],hook=this[hooksSym].logMethod;for(var key in values)levelVal>values[key]?this[key]=noop:this[key]=isStandardLevel(key,useOnlyCustomLevelsVal)?levelMethods[key](hook):genLog(values[key],hook);this.emit("level-change",level,levelVal,labels[preLevelVal],preLevelVal)},isLevelEnabled:function(logLevel){const{values:values}=this.levels,logLevelVal=values[logLevel];return void 0!==logLevelVal&&logLevelVal>=this[levelValSym]},mappings:function(customLevels=null,useOnlyCustomLevels=!1){const customNums=customLevels?Object.keys(customLevels).reduce((o,k)=>(o[customLevels[k]]=k,o),{}):null;return{labels:Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),useOnlyCustomLevels?null:nums,customNums),values:Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),useOnlyCustomLevels?null:levels,customLevels)}},assertNoLevelCollisions:function(levels,customLevels){const{labels:labels,values:values}=levels;for(const k in customLevels){if(k in values)throw Error("levels cannot be overridden");if(customLevels[k]in labels)throw Error("pre-existing level values cannot be used for new levels")}},assertDefaultLevelFound:function(defaultLevel,customLevels,useOnlyCustomLevels){if("number"==typeof defaultLevel){if(![].concat(Object.keys(customLevels||{}).map(key=>customLevels[key]),useOnlyCustomLevels?[]:Object.keys(nums).map(level=>+level),1/0).includes(defaultLevel))throw Error(`default level:${defaultLevel} must be included in custom levels`);return}if(!(defaultLevel in Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),useOnlyCustomLevels?null:levels,customLevels)))throw Error(`default level:${defaultLevel} must be included in custom levels`)}}},function(module,exports){module.exports=stringify,stringify.default=stringify,stringify.stable=deterministicStringify,stringify.stableStringify=deterministicStringify;var arr=[],replacerStack=[];function stringify(obj,replacer,spacer){var res;for(!function decirc(val,k,stack,parent){var i;if("object"==typeof val&&null!==val){for(i=0;i<stack.length;i++)if(stack[i]===val){var propertyDescriptor=Object.getOwnPropertyDescriptor(parent,k);return void(void 0!==propertyDescriptor.get?propertyDescriptor.configurable?(Object.defineProperty(parent,k,{value:"[Circular]"}),arr.push([parent,k,val,propertyDescriptor])):replacerStack.push([val,k]):(parent[k]="[Circular]",arr.push([parent,k,val])))}if(stack.push(val),Array.isArray(val))for(i=0;i<val.length;i++)decirc(val[i],i,stack,val);else{var keys=Object.keys(val);for(i=0;i<keys.length;i++){var key=keys[i];decirc(val[key],key,stack,val)}}stack.pop()}}(obj,"",[],void 0),res=0===replacerStack.length?JSON.stringify(obj,replacer,spacer):JSON.stringify(obj,replaceGetterValues(replacer),spacer);0!==arr.length;){var part=arr.pop();4===part.length?Object.defineProperty(part[0],part[1],part[3]):part[0][part[1]]=part[2]}return res}function compareFunction(a,b){return a<b?-1:a>b?1:0}function deterministicStringify(obj,replacer,spacer){var res,tmp=function deterministicDecirc(val,k,stack,parent){var i;if("object"==typeof val&&null!==val){for(i=0;i<stack.length;i++)if(stack[i]===val){var propertyDescriptor=Object.getOwnPropertyDescriptor(parent,k);return void(void 0!==propertyDescriptor.get?propertyDescriptor.configurable?(Object.defineProperty(parent,k,{value:"[Circular]"}),arr.push([parent,k,val,propertyDescriptor])):replacerStack.push([val,k]):(parent[k]="[Circular]",arr.push([parent,k,val])))}if("function"==typeof val.toJSON)return;if(stack.push(val),Array.isArray(val))for(i=0;i<val.length;i++)deterministicDecirc(val[i],i,stack,val);else{var tmp={},keys=Object.keys(val).sort(compareFunction);for(i=0;i<keys.length;i++){var key=keys[i];deterministicDecirc(val[key],key,stack,val),tmp[key]=val[key]}if(void 0===parent)return tmp;arr.push([parent,k,val]),parent[k]=tmp}stack.pop()}}(obj,"",[],void 0)||obj;for(res=0===replacerStack.length?JSON.stringify(tmp,replacer,spacer):JSON.stringify(tmp,replaceGetterValues(replacer),spacer);0!==arr.length;){var part=arr.pop();4===part.length?Object.defineProperty(part[0],part[1],part[3]):part[0][part[1]]=part[2]}return res}function replaceGetterValues(replacer){return replacer=void 0!==replacer?replacer:function(k,v){return v},function(key,val){if(replacerStack.length>0)for(var i=0;i<replacerStack.length;i++){var part=replacerStack[i];if(part[1]===key&&part[0]===val){val="[Circular]",replacerStack.splice(i,1);break}}return replacer.call(this,key,val)}}},function(module,exports,__webpack_require__){"use strict";const ansiStyles=__webpack_require__(153),{stdout:stdoutColor,stderr:stderrColor}=__webpack_require__(157),{stringReplaceAll:stringReplaceAll,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex}=__webpack_require__(159),{isArray:isArray}=Array,levelMapping=["ansi","ansi","ansi256","ansi16m"],styles=Object.create(null);class ChalkClass{constructor(options){return chalkFactory(options)}}const chalkFactory=options=>{const chalk={};return((object,options={})=>{if(options.level&&!(Number.isInteger(options.level)&&options.level>=0&&options.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const colorLevel=stdoutColor?stdoutColor.level:0;object.level=void 0===options.level?colorLevel:options.level})(chalk,options),chalk.template=(...arguments_)=>chalkTag(chalk.template,...arguments_),Object.setPrototypeOf(chalk,Chalk.prototype),Object.setPrototypeOf(chalk.template,chalk),chalk.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},chalk.template.Instance=ChalkClass,chalk.template};function Chalk(options){return chalkFactory(options)}for(const[styleName,style]of Object.entries(ansiStyles))styles[styleName]={get(){const builder=createBuilder(this,createStyler(style.open,style.close,this._styler),this._isEmpty);return Object.defineProperty(this,styleName,{value:builder}),builder}};styles.visible={get(){const builder=createBuilder(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:builder}),builder}};const usedModels=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const model of usedModels)styles[model]={get(){const{level:level}=this;return function(...arguments_){const styler=createStyler(ansiStyles.color[levelMapping[level]][model](...arguments_),ansiStyles.color.close,this._styler);return createBuilder(this,styler,this._isEmpty)}}};for(const model of usedModels){styles["bg"+model[0].toUpperCase()+model.slice(1)]={get(){const{level:level}=this;return function(...arguments_){const styler=createStyler(ansiStyles.bgColor[levelMapping[level]][model](...arguments_),ansiStyles.bgColor.close,this._styler);return createBuilder(this,styler,this._isEmpty)}}}}const proto=Object.defineProperties(()=>{},{...styles,level:{enumerable:!0,get(){return this._generator.level},set(level){this._generator.level=level}}}),createStyler=(open,close,parent)=>{let openAll,closeAll;return void 0===parent?(openAll=open,closeAll=close):(openAll=parent.openAll+open,closeAll=close+parent.closeAll),{open:open,close:close,openAll:openAll,closeAll:closeAll,parent:parent}},createBuilder=(self,_styler,_isEmpty)=>{const builder=(...arguments_)=>isArray(arguments_[0])&&isArray(arguments_[0].raw)?applyStyle(builder,chalkTag(builder,...arguments_)):applyStyle(builder,1===arguments_.length?""+arguments_[0]:arguments_.join(" "));return Object.setPrototypeOf(builder,proto),builder._generator=self,builder._styler=_styler,builder._isEmpty=_isEmpty,builder},applyStyle=(self,string)=>{if(self.level<=0||!string)return self._isEmpty?"":string;let styler=self._styler;if(void 0===styler)return string;const{openAll:openAll,closeAll:closeAll}=styler;if(-1!==string.indexOf(""))for(;void 0!==styler;)string=stringReplaceAll(string,styler.close,styler.open),styler=styler.parent;const lfIndex=string.indexOf("\n");return-1!==lfIndex&&(string=stringEncaseCRLFWithFirstIndex(string,closeAll,openAll,lfIndex)),openAll+string+closeAll};let template;const chalkTag=(chalk,...strings)=>{const[firstString]=strings;if(!isArray(firstString)||!isArray(firstString.raw))return strings.join(" ");const arguments_=strings.slice(1),parts=[firstString.raw[0]];for(let i=1;i<firstString.length;i++)parts.push(String(arguments_[i-1]).replace(/[{}\\]/g,"\\$&"),String(firstString.raw[i]));return void 0===template&&(template=__webpack_require__(160)),template(chalk,parts.join(""))};Object.defineProperties(Chalk.prototype,styles);const chalk=Chalk();chalk.supportsColor=stdoutColor,chalk.stderr=Chalk({level:stderrColor?stderrColor.level:0}),chalk.stderr.supportsColor=stderrColor,module.exports=chalk},function(module,exports,__webpack_require__){const cssKeywords=__webpack_require__(155),reverseKeywords={};for(const key of Object.keys(cssKeywords))reverseKeywords[cssKeywords[key]]=key;const convert={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};module.exports=convert;for(const model of Object.keys(convert)){if(!("channels"in convert[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert[model]))throw new Error("missing channel labels property: "+model);if(convert[model].labels.length!==convert[model].channels)throw new Error("channel and label counts mismatch: "+model);const{channels:channels,labels:labels}=convert[model];delete convert[model].channels,delete convert[model].labels,Object.defineProperty(convert[model],"channels",{value:channels}),Object.defineProperty(convert[model],"labels",{value:labels})}convert.rgb.hsl=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;let h,s;max===min?h=0:r===max?h=(g-b)/delta:g===max?h=2+(b-r)/delta:b===max&&(h=4+(r-g)/delta),h=Math.min(60*h,360),h<0&&(h+=360);const l=(min+max)/2;return s=max===min?0:l<=.5?delta/(max+min):delta/(2-max-min),[h,100*s,100*l]},convert.rgb.hsv=function(rgb){let rdif,gdif,bdif,h,s;const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,v=Math.max(r,g,b),diff=v-Math.min(r,g,b),diffc=function(c){return(v-c)/6/diff+.5};return 0===diff?(h=0,s=0):(s=diff/v,rdif=diffc(r),gdif=diffc(g),bdif=diffc(b),r===v?h=bdif-gdif:g===v?h=1/3+rdif-bdif:b===v&&(h=2/3+gdif-rdif),h<0?h+=1:h>1&&(h-=1)),[360*h,100*s,100*v]},convert.rgb.hwb=function(rgb){const r=rgb[0],g=rgb[1];let b=rgb[2];const h=convert.rgb.hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b));return b=1-1/255*Math.max(r,Math.max(g,b)),[h,100*w,100*b]},convert.rgb.cmyk=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,k=Math.min(1-r,1-g,1-b);return[100*((1-r-k)/(1-k)||0),100*((1-g-k)/(1-k)||0),100*((1-b-k)/(1-k)||0),100*k]},convert.rgb.keyword=function(rgb){const reversed=reverseKeywords[rgb];if(reversed)return reversed;let currentClosestKeyword,currentClosestDistance=1/0;for(const keyword of Object.keys(cssKeywords)){const value=cssKeywords[keyword],distance=(y=value,((x=rgb)[0]-y[0])**2+(x[1]-y[1])**2+(x[2]-y[2])**2);distance<currentClosestDistance&&(currentClosestDistance=distance,currentClosestKeyword=keyword)}var x,y;return currentClosestKeyword},convert.keyword.rgb=function(keyword){return cssKeywords[keyword]},convert.rgb.xyz=function(rgb){let r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,g=g>.04045?((g+.055)/1.055)**2.4:g/12.92,b=b>.04045?((b+.055)/1.055)**2.4:b/12.92;return[100*(.4124*r+.3576*g+.1805*b),100*(.2126*r+.7152*g+.0722*b),100*(.0193*r+.1192*g+.9505*b)]},convert.rgb.lab=function(rgb){const xyz=convert.rgb.xyz(rgb);let x=xyz[0],y=xyz[1],z=xyz[2];x/=95.047,y/=100,z/=108.883,x=x>.008856?x**(1/3):7.787*x+16/116,y=y>.008856?y**(1/3):7.787*y+16/116,z=z>.008856?z**(1/3):7.787*z+16/116;return[116*y-16,500*(x-y),200*(y-z)]},convert.hsl.rgb=function(hsl){const h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100;let t2,t3,val;if(0===s)return val=255*l,[val,val,val];t2=l<.5?l*(1+s):l+s-l*s;const t1=2*l-t2,rgb=[0,0,0];for(let i=0;i<3;i++)t3=h+1/3*-(i-1),t3<0&&t3++,t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i]=255*val;return rgb},convert.hsl.hsv=function(hsl){const h=hsl[0];let s=hsl[1]/100,l=hsl[2]/100,smin=s;const lmin=Math.max(l,.01);l*=2,s*=l<=1?l:2-l,smin*=lmin<=1?lmin:2-lmin;return[h,100*(0===l?2*smin/(lmin+smin):2*s/(l+s)),100*((l+s)/2)]},convert.hsv.rgb=function(hsv){const h=hsv[0]/60,s=hsv[1]/100;let v=hsv[2]/100;const hi=Math.floor(h)%6,f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f));switch(v*=255,hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}},convert.hsv.hsl=function(hsv){const h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,vmin=Math.max(v,.01);let sl,l;l=(2-s)*v;const lmin=(2-s)*vmin;return sl=s*vmin,sl/=lmin<=1?lmin:2-lmin,sl=sl||0,l/=2,[h,100*sl,100*l]},convert.hwb.rgb=function(hwb){const h=hwb[0]/360;let wh=hwb[1]/100,bl=hwb[2]/100;const ratio=wh+bl;let f;ratio>1&&(wh/=ratio,bl/=ratio);const i=Math.floor(6*h),v=1-bl;f=6*h-i,0!=(1&i)&&(f=1-f);const n=wh+f*(v-wh);let r,g,b;switch(i){default:case 6:case 0:r=v,g=n,b=wh;break;case 1:r=n,g=v,b=wh;break;case 2:r=wh,g=v,b=n;break;case 3:r=wh,g=n,b=v;break;case 4:r=n,g=wh,b=v;break;case 5:r=v,g=wh,b=n}return[255*r,255*g,255*b]},convert.cmyk.rgb=function(cmyk){const c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100;return[255*(1-Math.min(1,c*(1-k)+k)),255*(1-Math.min(1,m*(1-k)+k)),255*(1-Math.min(1,y*(1-k)+k))]},convert.xyz.rgb=function(xyz){const x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100;let r,g,b;return r=3.2406*x+-1.5372*y+-.4986*z,g=-.9689*x+1.8758*y+.0415*z,b=.0557*x+-.204*y+1.057*z,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,b=b>.0031308?1.055*b**(1/2.4)-.055:12.92*b,r=Math.min(Math.max(0,r),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[255*r,255*g,255*b]},convert.xyz.lab=function(xyz){let x=xyz[0],y=xyz[1],z=xyz[2];x/=95.047,y/=100,z/=108.883,x=x>.008856?x**(1/3):7.787*x+16/116,y=y>.008856?y**(1/3):7.787*y+16/116,z=z>.008856?z**(1/3):7.787*z+16/116;return[116*y-16,500*(x-y),200*(y-z)]},convert.lab.xyz=function(lab){let x,y,z;y=(lab[0]+16)/116,x=lab[1]/500+y,z=y-lab[2]/200;const y2=y**3,x2=x**3,z2=z**3;return y=y2>.008856?y2:(y-16/116)/7.787,x=x2>.008856?x2:(x-16/116)/7.787,z=z2>.008856?z2:(z-16/116)/7.787,x*=95.047,y*=100,z*=108.883,[x,y,z]},convert.lab.lch=function(lab){const l=lab[0],a=lab[1],b=lab[2];let h;h=360*Math.atan2(b,a)/2/Math.PI,h<0&&(h+=360);return[l,Math.sqrt(a*a+b*b),h]},convert.lch.lab=function(lch){const l=lch[0],c=lch[1],hr=lch[2]/360*2*Math.PI;return[l,c*Math.cos(hr),c*Math.sin(hr)]},convert.rgb.ansi16=function(args,saturation=null){const[r,g,b]=args;let value=null===saturation?convert.rgb.hsv(args)[2]:saturation;if(value=Math.round(value/50),0===value)return 30;let ansi=30+(Math.round(b/255)<<2|Math.round(g/255)<<1|Math.round(r/255));return 2===value&&(ansi+=60),ansi},convert.hsv.ansi16=function(args){return convert.rgb.ansi16(convert.hsv.rgb(args),args[2])},convert.rgb.ansi256=function(args){const r=args[0],g=args[1],b=args[2];if(r===g&&g===b)return r<8?16:r>248?231:Math.round((r-8)/247*24)+232;return 16+36*Math.round(r/255*5)+6*Math.round(g/255*5)+Math.round(b/255*5)},convert.ansi16.rgb=function(args){let color=args%10;if(0===color||7===color)return args>50&&(color+=3.5),color=color/10.5*255,[color,color,color];const mult=.5*(1+~~(args>50));return[(1&color)*mult*255,(color>>1&1)*mult*255,(color>>2&1)*mult*255]},convert.ansi256.rgb=function(args){if(args>=232){const c=10*(args-232)+8;return[c,c,c]}let rem;args-=16;return[Math.floor(args/36)/5*255,Math.floor((rem=args%36)/6)/5*255,rem%6/5*255]},convert.rgb.hex=function(args){const string=(((255&Math.round(args[0]))<<16)+((255&Math.round(args[1]))<<8)+(255&Math.round(args[2]))).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert.hex.rgb=function(args){const match=args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!match)return[0,0,0];let colorString=match[0];3===match[0].length&&(colorString=colorString.split("").map(char=>char+char).join(""));const integer=parseInt(colorString,16);return[integer>>16&255,integer>>8&255,255&integer]},convert.rgb.hcg=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,max=Math.max(Math.max(r,g),b),min=Math.min(Math.min(r,g),b),chroma=max-min;let grayscale,hue;return grayscale=chroma<1?min/(1-chroma):0,hue=chroma<=0?0:max===r?(g-b)/chroma%6:max===g?2+(b-r)/chroma:4+(r-g)/chroma,hue/=6,hue%=1,[360*hue,100*chroma,100*grayscale]},convert.hsl.hcg=function(hsl){const s=hsl[1]/100,l=hsl[2]/100,c=l<.5?2*s*l:2*s*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[hsl[0],100*c,100*f]},convert.hsv.hcg=function(hsv){const s=hsv[1]/100,v=hsv[2]/100,c=s*v;let f=0;return c<1&&(f=(v-c)/(1-c)),[hsv[0],100*c,100*f]},convert.hcg.rgb=function(hcg){const h=hcg[0]/360,c=hcg[1]/100,g=hcg[2]/100;if(0===c)return[255*g,255*g,255*g];const pure=[0,0,0],hi=h%1*6,v=hi%1,w=1-v;let mg=0;switch(Math.floor(hi)){case 0:pure[0]=1,pure[1]=v,pure[2]=0;break;case 1:pure[0]=w,pure[1]=1,pure[2]=0;break;case 2:pure[0]=0,pure[1]=1,pure[2]=v;break;case 3:pure[0]=0,pure[1]=w,pure[2]=1;break;case 4:pure[0]=v,pure[1]=0,pure[2]=1;break;default:pure[0]=1,pure[1]=0,pure[2]=w}return mg=(1-c)*g,[255*(c*pure[0]+mg),255*(c*pure[1]+mg),255*(c*pure[2]+mg)]},convert.hcg.hsv=function(hcg){const c=hcg[1]/100,v=c+hcg[2]/100*(1-c);let f=0;return v>0&&(f=c/v),[hcg[0],100*f,100*v]},convert.hcg.hsl=function(hcg){const c=hcg[1]/100,l=hcg[2]/100*(1-c)+.5*c;let s=0;return l>0&&l<.5?s=c/(2*l):l>=.5&&l<1&&(s=c/(2*(1-l))),[hcg[0],100*s,100*l]},convert.hcg.hwb=function(hcg){const c=hcg[1]/100,v=c+hcg[2]/100*(1-c);return[hcg[0],100*(v-c),100*(1-v)]},convert.hwb.hcg=function(hwb){const w=hwb[1]/100,v=1-hwb[2]/100,c=v-w;let g=0;return c<1&&(g=(v-c)/(1-c)),[hwb[0],100*c,100*g]},convert.apple.rgb=function(apple){return[apple[0]/65535*255,apple[1]/65535*255,apple[2]/65535*255]},convert.rgb.apple=function(rgb){return[rgb[0]/255*65535,rgb[1]/255*65535,rgb[2]/255*65535]},convert.gray.rgb=function(args){return[args[0]/100*255,args[0]/100*255,args[0]/100*255]},convert.gray.hsl=function(args){return[0,0,args[0]]},convert.gray.hsv=convert.gray.hsl,convert.gray.hwb=function(gray){return[0,100,gray[0]]},convert.gray.cmyk=function(gray){return[0,0,0,gray[0]]},convert.gray.lab=function(gray){return[gray[0],0,0]},convert.gray.hex=function(gray){const val=255&Math.round(gray[0]/100*255),string=((val<<16)+(val<<8)+val).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert.rgb.gray=function(rgb){return[(rgb[0]+rgb[1]+rgb[2])/3/255*100]}},function(module,exports){module.exports=require("tty")},function(module,exports,__webpack_require__){"use strict";const{LEVELS:LEVELS,LEVEL_NAMES:LEVEL_NAMES}=__webpack_require__(60),nocolor=input=>input,plain={default:nocolor,60:nocolor,50:nocolor,40:nocolor,30:nocolor,20:nocolor,10:nocolor,message:nocolor},ctx=new(__webpack_require__(86).Instance)({level:3}),colored={default:ctx.white,60:ctx.bgRed,50:ctx.red,40:ctx.yellow,30:ctx.green,20:ctx.blue,10:ctx.grey,message:ctx.cyan};function colorizeLevel(level,colorizer){if(Number.isInteger(+level))return Object.prototype.hasOwnProperty.call(LEVELS,level)?colorizer[level](LEVELS[level]):colorizer.default(LEVELS.default);const levelNum=LEVEL_NAMES[level.toLowerCase()]||"default";return colorizer[levelNum](LEVELS[levelNum])}function plainColorizer(level){return colorizeLevel(level,plain)}function coloredColorizer(level){return colorizeLevel(level,colored)}plainColorizer.message=plain.message,coloredColorizer.message=colored.message,module.exports=function(useColors=!1){return useColors?coloredColorizer:plainColorizer}},function(module,exports,__webpack_require__){"use strict";const{version:version}=__webpack_require__(165);module.exports={version:version}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmpty=void 0,exports.isEmpty=function(v){return!v||0===v.length}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),utils_1=__webpack_require__(20),constants_1=__webpack_require__(2),telemetry_1=__importDefault(__webpack_require__(38)),log=__webpack_require__(10).createLogger("error-handler");var ErrorHandler;!function(ErrorHandler){ErrorHandler.create=function(message){return async error=>{if(error){if(error.dontNotify||error.data&&error.data.dontNotify)return;telemetry_1.default.registerException(error,error.data),message=`${message} ${error.message?error.message:error.toString()}`}!async function(message,error){log.error("ERROR: %s, %O",message,error);const options=["View Logs"];error.data&&error.data.driver&&options.push("Help!");switch(await vscode_1.window.showErrorMessage(message,...options)){case"View Logs":vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".showOutputChannel");break;case"Help!":utils_1.openExternal(`${constants_1.DOCS_ROOT_URL}/connections/${error.data.driver.toLowerCase()}#${"string"==typeof error.code?error.code:error.name}`)}}(message,error)}}}(ErrorHandler||(ErrorHandler={})),exports.default=ErrorHandler},function(module,exports,__webpack_require__){var net=__webpack_require__(62),tls=__webpack_require__(181),url=__webpack_require__(78),assert=__webpack_require__(182),Agent=__webpack_require__(183),inherits=__webpack_require__(22).inherits,debug=__webpack_require__(185)("https-proxy-agent");function HttpsProxyAgent(opts){if(!(this instanceof HttpsProxyAgent))return new HttpsProxyAgent(opts);if("string"==typeof opts&&(opts=url.parse(opts)),!opts)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");debug("creating new HttpsProxyAgent instance: %o",opts),Agent.call(this,opts);var proxy=Object.assign({},opts);this.secureProxy=!!proxy.protocol&&/^https:?$/i.test(proxy.protocol),proxy.host=proxy.hostname||proxy.host,proxy.port=+proxy.port||(this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in proxy)&&(proxy.ALPNProtocols=["http 1.1"]),proxy.host&&proxy.path&&(delete proxy.path,delete proxy.pathname),this.proxy=proxy}function resume(socket){socket.resume()}module.exports=HttpsProxyAgent,inherits(HttpsProxyAgent,Agent),HttpsProxyAgent.prototype.callback=function(req,opts,fn){var socket,proxy=this.proxy;socket=this.secureProxy?tls.connect(proxy):net.connect(proxy);var buffers=[],buffersLength=0;function read(){var b=socket.read();b?function(b){buffers.push(b),buffersLength+=b.length;var buffered=Buffer.concat(buffers,buffersLength),str=buffered.toString("ascii");if(!~str.indexOf("\r\n\r\n"))return debug("have not received end of HTTP headers yet..."),void read();var firstLine=str.substring(0,str.indexOf("\r\n")),statusCode=+firstLine.split(" ")[1];if(debug("got proxy server response: %o",firstLine),200==statusCode){var sock=socket;buffers=buffered=null,opts.secureEndpoint&&(debug("upgrading proxy-connected socket to TLS connection: %o",opts.host),opts.socket=socket,opts.servername=opts.servername||opts.host,opts.host=null,opts.hostname=null,opts.port=null,sock=tls.connect(opts)),cleanup(),req.once("socket",resume),fn(null,sock)}else cleanup(),socket.destroy(),(socket=new net.Socket).readable=!0,buffers=buffered,req.once("socket",onsocket),fn(null,socket)}(b):socket.once("readable",read)}function cleanup(){socket.removeListener("end",onend),socket.removeListener("error",onerror),socket.removeListener("close",onclose),socket.removeListener("readable",read)}function onclose(err){debug("onclose had error %o",err)}function onend(){debug("onend")}function onerror(err){cleanup(),fn(err)}function onsocket(socket){debug("replaying proxy buffer for failed request"),assert(socket.listenerCount("data")>0),socket.push(buffers),buffers=null}socket.on("error",onerror),socket.on("close",onclose),socket.on("end",onend),read();var msg="CONNECT "+(opts.host+":"+opts.port)+" HTTP/1.1\r\n",headers=Object.assign({},proxy.headers);proxy.auth&&(headers["Proxy-Authorization"]="Basic "+Buffer.from(proxy.auth).toString("base64"));var port,secure,host=opts.host;port=opts.port,secure=opts.secureEndpoint,Boolean(!secure&&80===port||secure&&443===port)||(host+=":"+opts.port),headers.Host=host,headers.Connection="close",Object.keys(headers).forEach((function(name){msg+=name+": "+headers[name]+"\r\n"})),socket.write(msg+"\r\n")}},function(module,exports,__webpack_require__){module.exports=function(env){function selectColor(namespace){let hash=0;for(let i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]}function createDebug(namespace){let prevTime;function debug(...args){if(!debug.enabled)return;const self=debug,curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");let index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(match,format)=>{if("%%"===match)return match;index++;const formatter=createDebug.formatters[format];if("function"==typeof formatter){const val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),createDebug.formatArgs.call(self,args);(self.log||createDebug.log).apply(self,args)}return debug.namespace=namespace,debug.enabled=createDebug.enabled(namespace),debug.useColors=createDebug.useColors(),debug.color=selectColor(namespace),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){const index=createDebug.instances.indexOf(this);return-1!==index&&(createDebug.instances.splice(index,1),!0)}function extend(namespace,delimiter){const newDebug=createDebug(this.namespace+(void 0===delimiter?":":delimiter)+namespace);return newDebug.log=this.log,newDebug}function toNamespace(regexp){return regexp.toString().substring(2,regexp.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function(val){if(val instanceof Error)return val.stack||val.message;return val},createDebug.disable=function(){const namespaces=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(namespace=>"-"+namespace)].join(",");return createDebug.enable(""),namespaces},createDebug.enable=function(namespaces){let i;createDebug.save(namespaces),createDebug.names=[],createDebug.skips=[];const split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")));for(i=0;i<createDebug.instances.length;i++){const instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace)}},createDebug.enabled=function(name){if("*"===name[name.length-1])return!0;let i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1},createDebug.humanize=__webpack_require__(187),Object.keys(env).forEach(key=>{createDebug[key]=env[key]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(1);class ProtocolCompletionItem extends code.CompletionItem{constructor(label){super(label)}}exports.default=ProtocolCompletionItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(1);class ProtocolCodeLens extends code.CodeLens{constructor(range){super(range)}}exports.default=ProtocolCodeLens},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(1);class ProtocolDocumentLink extends code.DocumentLink{constructor(range,target){super(range,target)}}exports.default=ProtocolDocumentLink},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class ValueUUID{constructor(_value){this._value=_value}asHex(){return this._value}equals(other){return this.asHex()===other.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(array){return array[Math.floor(array.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}function v4(){return new V4UUID}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],V4UUID._timeHighBits=["8","9","a","b"],exports.empty=new ValueUUID("00000000-0000-0000-0000-000000000000"),exports.v4=v4;const _UUIDPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(value){return _UUIDPattern.test(value)}exports.isUUID=isUUID,exports.parse=function(value){if(!isUUID(value))throw new Error("invalid uuid");return new ValueUUID(value)},exports.generateUuid=function(){return v4().asHex()}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),Is=__webpack_require__(30);exports.ProgressPart=class ProgressPart{constructor(_client,_token){this._client=_client,this._token=_token,this._reported=0,this._disposable=this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type,this._token,value=>{switch(value.kind){case"begin":this.begin(value);break;case"report":this.report(value);break;case"end":this.done()}})}begin(params){let location=params.cancellable?vscode_1.ProgressLocation.Notification:vscode_1.ProgressLocation.Window;vscode_1.window.withProgress({location:location,cancellable:params.cancellable,title:params.title},async(progress,cancellationToken)=>(this._progress=progress,this._infinite=void 0===params.percentage,this._cancellationToken=cancellationToken,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(params),new Promise((resolve,reject)=>{this._resolve=resolve,this._reject=reject})))}report(params){if(this._infinite&&Is.string(params.message))this._progress.report({message:params.message});else if(Is.number(params.percentage)){let percentage=Math.max(0,Math.min(params.percentage,100)),delta=Math.max(0,percentage-this._reported);this._progress.report({message:params.message,increment:delta}),this._reported+=delta}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}}},function(module,exports,__webpack_require__){var baseUniq=__webpack_require__(232);module.exports=function(array){return array&&array.length?baseUniq(array):[]}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(66),setCacheAdd=__webpack_require__(256),setCacheHas=__webpack_require__(257);function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,module.exports=SetCache},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(31),isObject=__webpack_require__(42);module.exports=function(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}},function(module,exports){var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;module.exports=freeGlobal},function(module,exports){var funcToString=Function.prototype.toString;module.exports=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}},function(module,exports){module.exports=function(cache,key){return cache.has(key)}},function(module,exports,__webpack_require__){var Set=__webpack_require__(21)(__webpack_require__(15),"Set");module.exports=Set},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MissingModuleNotification=exports.ElectronNotSupportedNotification=void 0,exports.ElectronNotSupportedNotification="Core/electronNotSupported",exports.MissingModuleNotification="Core/missingModule"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerErrorNotification=exports.ExitCalledNotification=exports.DriverNotInstalledNotification=void 0,exports.DriverNotInstalledNotification="LS/driverNotInstalled",exports.ExitCalledNotification="AutoRestart/exitCalled",exports.ServerErrorNotification="Core/errorNotification"},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),SidebarAbstractItem_1=__importDefault(__webpack_require__(110)),icons_1=__webpack_require__(70),types_1=__webpack_require__(71),constants_1=__webpack_require__(2);class SidebarItem extends SidebarAbstractItem_1.default{constructor(metadata,parent){super(metadata.label,vscode_1.TreeItemCollapsibleState.Collapsed),this.metadata=metadata,this.parent=parent,this.iconPath=vscode_1.ThemeIcon.Folder,this.contextValue=types_1.ContextValue.RESOURCE_GROUP,this.value=this.label,metadata.snippet&&(this.snippet=metadata.snippet),metadata.type&&(this.contextValue=metadata.type,metadata.type&&metadata.iconId?this.iconPath=new vscode_1.ThemeIcon(metadata.iconId):metadata.type&&metadata.iconName?this.iconPath=icons_1.getIconPaths(metadata.iconName):this.iconPath=icons_1.getIconPaths(metadata.type.replace("connection.",""))),metadata.childType===types_1.ContextValue.NO_CHILD&&(this.collapsibleState=vscode_1.TreeItemCollapsibleState.None)}async getChildren(){const items=await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".getChildrenForTreeItem",{conn:this.conn,item:this.metadata,parent:this.parent&&this.parent.metadata||void 0});return 0===items.length?[new vscode_1.TreeItem("Nothing here")]:items.map(item=>new SidebarItem(item,this))}get description(){return this.metadata&&this.metadata.detail||null}get conn(){return this.parent.conn}}exports.default=SidebarItem},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1);class SidebarAbstractItem extends vscode_1.TreeItem{constructor(){super(...arguments),this.parent=null}get snippet(){return this._snippet||(this._snippet=new vscode_1.SnippetString(this.label)),this._snippet}set snippet(value){this._snippet=value instanceof vscode_1.SnippetString?value:new vscode_1.SnippetString(""+value)}}exports.default=SidebarAbstractItem},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(112);module.exports=function(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}},function(module,exports,__webpack_require__){var castPath=__webpack_require__(113),toKey=__webpack_require__(47);module.exports=function(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}},function(module,exports,__webpack_require__){var isArray=__webpack_require__(16),isKey=__webpack_require__(72),stringToPath=__webpack_require__(273),toString=__webpack_require__(276);module.exports=function(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}},function(module,exports){module.exports=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}},function(module,exports){module.exports=function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(43),stackClear=__webpack_require__(286),stackDelete=__webpack_require__(287),stackGet=__webpack_require__(288),stackHas=__webpack_require__(289),stackSet=__webpack_require__(290);function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},function(module,exports,__webpack_require__){var baseIsEqualDeep=__webpack_require__(291),isObjectLike=__webpack_require__(33);module.exports=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack))}},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(101),arraySome=__webpack_require__(292),cacheHas=__webpack_require__(105);module.exports=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}},function(module,exports,__webpack_require__){(function(module){var root=__webpack_require__(15),stubFalse=__webpack_require__(304),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?root.Buffer:void 0,isBuffer=(Buffer?Buffer.isBuffer:void 0)||stubFalse;module.exports=isBuffer}).call(this,__webpack_require__(59)(module))},function(module,exports,__webpack_require__){var baseIsTypedArray=__webpack_require__(305),baseUnary=__webpack_require__(121),nodeUtil=__webpack_require__(306),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},function(module,exports){module.exports=function(func){return function(value){return func(value)}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(42);module.exports=function(value){return value==value&&!isObject(value)}},function(module,exports){module.exports=function(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),icons_1=__webpack_require__(70),context_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(2),path_1=__importDefault(__webpack_require__(9)),action_1=__webpack_require__(125);exports.default=class WebviewProvider{constructor(){this.disposeEvent=new vscode_1.EventEmitter,this.disposables=[],this.preserveFocus=!0,this.whereToShow=vscode_1.ViewColumn.One,this.onDidReceiveMessage=({action:action,payload:payload,...rest})=>{switch(action){case action_1.DefaultUIAction.RESPONSE_STATE:this.lastState=payload;break;case action_1.DefaultUIAction.CALL:return vscode_1.commands.executeCommand(payload.command,...payload.args||[]);case action_1.DefaultUIAction.NOTIFY_VIEW_READY:}this.messagesHandler&&this.messagesHandler({action:action,payload:payload,...rest})},this.hide=()=>{void 0!==this.panel&&(this.setPreviewActiveContext(!1),this.panel.dispose())},this.dispose=()=>{this.hide(),this.disposables.length&&this.disposables.forEach(d=>d.dispose()),this.disposables=[],this.panel=void 0,this.disposeEvent.fire()},this.setPreviewActiveContext=value=>{vscode_1.commands.executeCommand("setContext",`${constants_1.EXT_NAMESPACE}.${this.id}.active`,value)},this.lastState=void 0,this.getState=()=>this.panel?new Promise((resolve,reject)=>{let attempts=0;const timer=setInterval(()=>{if(void 0===this.lastState)return attempts<10?attempts++:(clearInterval(timer),reject(new Error("Could not get the state for "+this.panel.title)));clearInterval(timer);const state=this.lastState;return this.lastState=void 0,resolve(state)},200);this.panel.webview.postMessage({action:action_1.DefaultUIAction.REQUEST_STATE})}):Promise.resolve(null),this.updatePanelName=()=>{this.panel&&(this.panel.title=this.title)}}get serializationId(){return this.id}get onDidDispose(){return this.disposeEvent.event}get visible(){return void 0!==this.panel&&this.panel.visible}get baseHtml(){const cssVariables=Object.keys(this.cssVariables||{}).map(k=>`--sqltools-${k}: ${this.cssVariables[k]}`).join(";");return`<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8" />\n  <title>${this.title}</title>\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <style>\n  :root {${cssVariables}}\n  </style>\n  <link rel="stylesheet" type="text/css" href="${this.prepareUrl(context_1.default.asAbsolutePath("./dist/ui/commons.css"))}">\n</head>\n<body>\n  <link rel="stylesheet" type="text/css" href="${this.prepareUrl(context_1.default.asAbsolutePath("./dist/ui/theme.css"))}">\n  <div id="app-root"></div>\n  <script src="${this.prepareUrl(context_1.default.asAbsolutePath("./dist/ui/vendor.js"))}" type="text/javascript" charset="UTF-8"><\/script>\n  <script src="${this.prepareUrl(context_1.default.asAbsolutePath("./dist/ui/commons.js"))}" type="text/javascript" charset="UTF-8"><\/script>\n  <script src="${this.prepareUrl(context_1.default.asAbsolutePath(`./dist/ui/${this.id}.js`))}" type="text/javascript" charset="UTF-8"><\/script>\n</body>\n</html>`}show(){this.panel?this.panel.reveal(void 0,this.preserveFocus):(this.panel=vscode_1.window.createWebviewPanel(this.serializationId,this.title,{viewColumn:this.whereToShow,preserveFocus:!0},{enableScripts:!0,retainContextWhenHidden:!0,enableCommandUris:!0,localResourceRoots:[vscode_1.Uri.file(context_1.default.extensionPath),vscode_1.Uri.file(path_1.default.resolve(context_1.default.extensionPath,".."))]}),this.panel.iconPath=icons_1.getIconPaths("database-active"),this.panel.webview.onDidReceiveMessage(this.onDidReceiveMessage,null,this.disposables),this.panel.onDidChangeViewState(({webviewPanel:webviewPanel})=>{this.setPreviewActiveContext(webviewPanel.active),this.onViewActive&&this.onViewActive(webviewPanel.active)},null,this.disposables),this.panel.onDidDispose(this.dispose,null,this.disposables),this.panel.webview.html=this.html||this.baseHtml),this.updatePanelName(),this.setPreviewActiveContext(!0)}get isActive(){return this.panel&&this.panel.active}prepareUrl(localResource){return this.panel&&this.panel.webview?this.panel.webview.asWebviewUri(vscode_1.Uri.file(localResource.toString())):null}postMessage(message){this.panel&&this.panel.webview.postMessage(message)}sendMessage(action,payload){return this.postMessage({action:action,payload:payload})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultUIAction=void 0,exports.DefaultUIAction={CALL:"call",NOTIFY_VIEW_READY:"NOTIFY:VIEW_READY",REQUEST_RESET:"REQUEST:RESET",REQUEST_STATE:"REQUEST:STATE",RESPONSE_STATE:"RESPONSE:STATE"}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIAction=void 0;const action_1=__webpack_require__(125);exports.UIAction={...action_1.DefaultUIAction,REQUEST_INSTALLED_DRIVERS:"REQUEST:INSTALLED_DRIVERS",REQUEST_OPEN_CONNECTION_FILE:"REQUEST:OPEN_CONNECTION_FILE",REQUEST_EDIT_CONNECTION:"REQUEST:EDIT_CONNECTION",REQUEST_SYNC_CONSOLE_MESSAGES:"REQUEST:SYNC_CONSOLE_MESSAGES",REQUEST_CREATE_CONNECTION:"REQUEST:CREATE_CONNECTION",REQUEST_UPDATE_CONNECTION:"REQUEST:UPDATE_CONNECTION",REQUEST_TEST_CONNECTION:"REQUEST:TEST_CONNECTION",REQUEST_DRIVER_SCHEMAS:"REQUEST:DRIVER_SCHEMAS",RESPONSE_DRIVER_SCHEMAS:"RESPONSE:DRIVER_SCHEMAS",RESPONSE_INSTALLED_DRIVERS:"RESPONSE:INSTALLED_DRIVERS",RESPONSE_QUERY_RESULTS:"RESPONSE:QUERY_RESULTS",RESPONSE_UPDATE_CONNECTION_SUCCESS:"RESPONSE:UPDATE_CONNECTION_SUCCESS",RESPONSE_UPDATE_CONNECTION_ERROR:"RESPONSE:UPDATE_CONNECTION_ERROR",RESPONSE_CREATE_CONNECTION_SUCCESS:"RESPONSE:CREATE_CONNECTION_SUCCESS",RESPONSE_CREATE_CONNECTION_ERROR:"RESPONSE:CREATE_CONNECTION_ERROR",RESPONSE_TEST_CONNECTION_WARNING:"RESPONSE:TEST_CONNECTION_WARNING",RESPONSE_TEST_CONNECTION_SUCCESS:"RESPONSE:TEST_CONNECTION_SUCCESS",RESPONSE_TEST_CONNECTION_ERROR:"RESPONSE:TEST_CONNECTION_ERROR"}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.driverPluginExtension=exports.getExtension=exports.getInstalledDrivers=exports.getDriverSchemas=void 0;const vscode_1=__webpack_require__(1),context_1=__importDefault(__webpack_require__(8)),plugin_resources_1=__importStar(__webpack_require__(63)),fs_1=__importDefault(__webpack_require__(6)),prepare_schema_1=__importDefault(__webpack_require__(343)),log=__webpack_require__(10).createLogger("ext-util");exports.getDriverSchemas=({driver:driver}={driver:null})=>{let schema={},uiSchema={};if(!driver)return prepare_schema_1.default(schema,uiSchema);try{schema=JSON.parse(fs_1.default.readFileSync(plugin_resources_1.default.get(plugin_resources_1.buildResouceKey({type:"driver",name:driver,resource:"connection-schema"}))).toString())||{}}catch(error){}try{uiSchema=JSON.parse(fs_1.default.readFileSync(plugin_resources_1.default.get(plugin_resources_1.buildResouceKey({type:"driver",name:driver,resource:"ui-schema"}))).toString())||{}}catch(error){}return prepare_schema_1.default(schema,uiSchema)},exports.getInstalledDrivers=async(retry=0)=>{if(retry>20)return void log.info("stoped trying to find installed drivers.");const driverExtensions=(context_1.default.globalState.get("extPlugins")||{driver:[]}).driver||[],installedDrivers=[];return await Promise.all(driverExtensions.map(async id=>{log.info("getting extension %s information.",id);const ext=await exports.getExtension(id);log.info("loaded extension information %s for driver %s.",id,ext.driverName),ext&&ext.driverAliases&&ext.driverAliases.map(({displayName:displayName,value:value})=>{const iconsPath=plugin_resources_1.default.get(plugin_resources_1.buildResouceKey({type:"driver",name:value,resource:"icons"}));let icon;iconsPath&&iconsPath.default&&(icon="data:application/octet-stream;base64,"+fs_1.default.readFileSync(iconsPath.default).toString("base64")),installedDrivers.push({displayName:displayName,value:value,icon:icon})})})),0===installedDrivers.length&&driverExtensions.length>0?(log.info(`no installed drivers found. retrying.... ${retry+1}.`),new Promise(res=>setTimeout(()=>res(exports.getInstalledDrivers(retry++)),250))):installedDrivers.sort((a,b)=>a.displayName.localeCompare(b.displayName))},exports.getExtension=async id=>{try{const ext=vscode_1.extensions.getExtension(id);if(ext)return ext.isActive||await ext.activate(),ext.exports}catch(error){log.info("failed to get installed extension %s. %O",id,error)}return null},exports.driverPluginExtension=async driverName=>{const pluginExtenxionId=plugin_resources_1.default.get(plugin_resources_1.buildResouceKey({type:"driver",name:driverName,resource:"extension-id"}));return log.debug("Driver name %s. Plugin ext: %s",driverName,pluginExtenxionId),pluginExtenxionId?exports.getExtension(pluginExtenxionId):null}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEditorQueryDetails=void 0;const vscode_1=__webpack_require__(1),query_1=__webpack_require__(34);exports.getEditorQueryDetails=editor=>{if(!editor||!editor.document||"output"===editor.document.uri.scheme)return{currentQuery:null,range:null};if(!editor.selection.isEmpty)return{currentQuery:editor.document.getText(editor.selection),range:editor.selection};if(0===editor.document.getText(new vscode_1.Range(Math.max(0,editor.selection.active.line-4),0,editor.selection.active.line+1,0)).replace(/[\n\r\s]/g,"").length)return{currentQuery:"",range:editor.selection};const text=editor.document.getText(),currentOffset=editor.document.offsetAt(editor.selection.active),prefix=text.slice(0,currentOffset+1),allQueries=query_1.parse(text),prefixQueries=query_1.parse(prefix),currentQuery=allQueries[prefixQueries.length-1],startIndex=prefix.lastIndexOf(prefixQueries[prefixQueries.length-1]),startPos=editor.document.positionAt(startIndex),endPos=editor.document.positionAt(startIndex+currentQuery.length);return{currentQuery:currentQuery,range:new vscode_1.Range(startPos,endPos)}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.attachConnection=exports.removeAttachedConnection=exports.getAttachedConnection=void 0;const context_1=__importDefault(__webpack_require__(8)),keyName="attachedFilesMap";exports.getAttachedConnection=file=>context_1.default.workspaceState.get(keyName,{})[file.toString()],exports.removeAttachedConnection=file=>{const map=context_1.default.workspaceState.get(keyName,{});return delete map[file.toString()],context_1.default.workspaceState.update(keyName,map)},exports.attachConnection=(file,connId)=>{const map=context_1.default.workspaceState.get(keyName,{});return map[file.toString()]=connId,context_1.default.workspaceState.update(keyName,map)}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(g,f){const e=exports;!function(exports){const NEWER=Symbol("newer"),OLDER=Symbol("older");function LRUMap(limit,entries){"number"!=typeof limit&&(entries=limit,limit=0),this.size=0,this.limit=limit,this.oldest=this.newest=void 0,this._keymap=new Map,entries&&(this.assign(entries),limit<1&&(this.limit=this.size))}function Entry(key,value){this.key=key,this.value=value,this[NEWER]=void 0,this[OLDER]=void 0}function EntryIterator(oldestEntry){this.entry=oldestEntry}function KeyIterator(oldestEntry){this.entry=oldestEntry}function ValueIterator(oldestEntry){this.entry=oldestEntry}exports.LRUMap=LRUMap,LRUMap.prototype._markEntryAsUsed=function(entry){entry!==this.newest&&(entry[NEWER]&&(entry===this.oldest&&(this.oldest=entry[NEWER]),entry[NEWER][OLDER]=entry[OLDER]),entry[OLDER]&&(entry[OLDER][NEWER]=entry[NEWER]),entry[NEWER]=void 0,entry[OLDER]=this.newest,this.newest&&(this.newest[NEWER]=entry),this.newest=entry)},LRUMap.prototype.assign=function(entries){let entry,limit=this.limit||Number.MAX_VALUE;this._keymap.clear();let it=entries[Symbol.iterator]();for(let itv=it.next();!itv.done;itv=it.next()){let e=new Entry(itv.value[0],itv.value[1]);if(this._keymap.set(e.key,e),entry?(entry[NEWER]=e,e[OLDER]=entry):this.oldest=e,entry=e,0==limit--)throw new Error("overflow")}this.newest=entry,this.size=this._keymap.size},LRUMap.prototype.get=function(key){var entry=this._keymap.get(key);if(entry)return this._markEntryAsUsed(entry),entry.value},LRUMap.prototype.set=function(key,value){var entry=this._keymap.get(key);return entry?(entry.value=value,this._markEntryAsUsed(entry),this):(this._keymap.set(key,entry=new Entry(key,value)),this.newest?(this.newest[NEWER]=entry,entry[OLDER]=this.newest):this.oldest=entry,this.newest=entry,++this.size,this.size>this.limit&&this.shift(),this)},LRUMap.prototype.shift=function(){var entry=this.oldest;if(entry)return this.oldest[NEWER]?(this.oldest=this.oldest[NEWER],this.oldest[OLDER]=void 0):(this.oldest=void 0,this.newest=void 0),entry[NEWER]=entry[OLDER]=void 0,this._keymap.delete(entry.key),--this.size,[entry.key,entry.value]},LRUMap.prototype.find=function(key){let e=this._keymap.get(key);return e?e.value:void 0},LRUMap.prototype.has=function(key){return this._keymap.has(key)},LRUMap.prototype.delete=function(key){var entry=this._keymap.get(key);if(entry)return this._keymap.delete(entry.key),entry[NEWER]&&entry[OLDER]?(entry[OLDER][NEWER]=entry[NEWER],entry[NEWER][OLDER]=entry[OLDER]):entry[NEWER]?(entry[NEWER][OLDER]=void 0,this.oldest=entry[NEWER]):entry[OLDER]?(entry[OLDER][NEWER]=void 0,this.newest=entry[OLDER]):this.oldest=this.newest=void 0,this.size--,entry.value},LRUMap.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},EntryIterator.prototype[Symbol.iterator]=function(){return this},EntryIterator.prototype.next=function(){let ent=this.entry;return ent?(this.entry=ent[NEWER],{done:!1,value:[ent.key,ent.value]}):{done:!0,value:void 0}},KeyIterator.prototype[Symbol.iterator]=function(){return this},KeyIterator.prototype.next=function(){let ent=this.entry;return ent?(this.entry=ent[NEWER],{done:!1,value:ent.key}):{done:!0,value:void 0}},ValueIterator.prototype[Symbol.iterator]=function(){return this},ValueIterator.prototype.next=function(){let ent=this.entry;return ent?(this.entry=ent[NEWER],{done:!1,value:ent.value}):{done:!0,value:void 0}},LRUMap.prototype.keys=function(){return new KeyIterator(this.oldest)},LRUMap.prototype.values=function(){return new ValueIterator(this.oldest)},LRUMap.prototype.entries=function(){return this},LRUMap.prototype[Symbol.iterator]=function(){return new EntryIterator(this.oldest)},LRUMap.prototype.forEach=function(fun,thisObj){"object"!=typeof thisObj&&(thisObj=this);let entry=this.oldest;for(;entry;)fun.call(thisObj,entry.value,entry.key,this),entry=entry[NEWER]},LRUMap.prototype.toJSON=function(){for(var s=new Array(this.size),i=0,entry=this.oldest;entry;)s[i++]={key:entry.key,value:entry.value},entry=entry[NEWER];return s},LRUMap.prototype.toString=function(){for(var s="",entry=this.oldest;entry;)s+=String(entry.key)+":"+entry.value,(entry=entry[NEWER])&&(s+=" < ");return s}}(e),void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=e)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */exports.parse=function(str,options){if("string"!=typeof str)throw new TypeError("argument str must be a string");for(var obj={},opt=options||{},pairs=str.split(pairSplitRegExp),dec=opt.decode||decode,i=0;i<pairs.length;i++){var pair=pairs[i],eq_idx=pair.indexOf("=");if(!(eq_idx<0)){var key=pair.substr(0,eq_idx).trim(),val=pair.substr(++eq_idx,pair.length).trim();'"'==val[0]&&(val=val.slice(1,-1)),null==obj[key]&&(obj[key]=tryDecode(val,dec))}}return obj},exports.serialize=function(name,val,options){var opt=options||{},enc=opt.encode||encode;if("function"!=typeof enc)throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(name))throw new TypeError("argument name is invalid");var value=enc(val);if(value&&!fieldContentRegExp.test(value))throw new TypeError("argument val is invalid");var str=name+"="+value;if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge))throw new Error("maxAge should be a Number");str+="; Max-Age="+Math.floor(maxAge)}if(opt.domain){if(!fieldContentRegExp.test(opt.domain))throw new TypeError("option domain is invalid");str+="; Domain="+opt.domain}if(opt.path){if(!fieldContentRegExp.test(opt.path))throw new TypeError("option path is invalid");str+="; Path="+opt.path}if(opt.expires){if("function"!=typeof opt.expires.toUTCString)throw new TypeError("option expires is invalid");str+="; Expires="+opt.expires.toUTCString()}opt.httpOnly&&(str+="; HttpOnly");opt.secure&&(str+="; Secure");if(opt.sameSite){switch("string"==typeof opt.sameSite?opt.sameSite.toLowerCase():opt.sameSite){case!0:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return str};var decode=decodeURIComponent,encode=encodeURIComponent,pairSplitRegExp=/; */,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return logger}));var _misc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),global=Object(_misc__WEBPACK_IMPORTED_MODULE_0__.h)(),PREFIX="Sentry Logger ",Logger=function(){function Logger(){this._enabled=!1}return Logger.prototype.disable=function(){this._enabled=!1},Logger.prototype.enable=function(){this._enabled=!0},Logger.prototype.log=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._enabled&&Object(_misc__WEBPACK_IMPORTED_MODULE_0__.d)((function(){global.console.log(PREFIX+"[Log]: "+args.join(" "))}))},Logger.prototype.warn=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._enabled&&Object(_misc__WEBPACK_IMPORTED_MODULE_0__.d)((function(){global.console.warn(PREFIX+"[Warn]: "+args.join(" "))}))},Logger.prototype.error=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._enabled&&Object(_misc__WEBPACK_IMPORTED_MODULE_0__.d)((function(){global.console.error(PREFIX+"[Error]: "+args.join(" "))}))},Logger}();global.__SENTRY__=global.__SENTRY__||{};var logger=global.__SENTRY__.logger||(global.__SENTRY__.logger=new Logger)},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.deactivate=exports.activate=exports.SQLToolsExtension=void 0;const vscode_1=__webpack_require__(1),constants_1=__webpack_require__(2),path_1=__webpack_require__(37),utils_1=__webpack_require__(20),config_manager_1=__importDefault(__webpack_require__(12)),context_1=__importDefault(__webpack_require__(8)),debounce_1=__importDefault(__webpack_require__(176)),error_handler_1=__importDefault(__webpack_require__(92)),https_1=__importDefault(__webpack_require__(35)),src_1=__importStar(__webpack_require__(10)),plugin_resources_1=__importDefault(__webpack_require__(63)),language_client_1=__importDefault(__webpack_require__(192)),timer_1=__importDefault(__webpack_require__(266)),utils_2=__importDefault(__webpack_require__(267)),log=src_1.createLogger(),extension_1=__importDefault(__webpack_require__(269)),extension_2=__importDefault(__webpack_require__(369)),extension_3=__importDefault(__webpack_require__(372)),extension_4=__importDefault(__webpack_require__(375)),telemetry_1=__importDefault(__webpack_require__(38));class SQLToolsExtension{constructor(){this.pluginsQueue=[],this.extPlugins={},this.willRunCommandHooks={},this.didRunCommandSuccessfullyHooks={},this.loaded=!1,this.activate=async()=>{const activationTimer=new timer_1.default;log.info("SQLTools is starting");const{installedExtPlugins:installedExtPlugins={}}=utils_2.default.getlastRunInfo();return context_1.default.globalState.update("extPlugins",installedExtPlugins||{}),telemetry_1.default.updateOpts({extraInfo:{sessId:vscode_1.env.sessionId,uniqId:vscode_1.env.machineId,version:vscode_1.version}}),log.info("initializing language client..."),this.client=new language_client_1.default,this.onWillRunCommandEmitter=new vscode_1.EventEmitter,this.onDidRunCommandSuccessfullyEmitter=new vscode_1.EventEmitter,context_1.default.subscriptions.push(this.client.start(),this.onWillRunCommandEmitter.event(this.onWillRunCommandHandler),this.onDidRunCommandSuccessfullyEmitter.event(this.onDidRunCommandSuccessfullyHandler)),this.registerCommand("aboutVersion",this.aboutVersionHandler),this.registerCommand("openDocs",path=>utils_1.openExternal(`https://vscode-sqltools.mteixeira.dev/${path||""}?umd_source=vscode&utm_medium=command&utm_campaign=open-docs`)),src_1.default.outputChannel&&context_1.default.subscriptions.push(src_1.default.outputChannel),log.info("loading plugins..."),this.loadPlugins(),activationTimer.end(),telemetry_1.default.registerTime("activation",activationTimer),this.displayReleaseNotesMessage(),log.info("SQLTools activation completed. %d ms",activationTimer.elapsed()),{client:this.client,addAfterCommandSuccessHook:this.addAfterCommandSuccessHook,registerPlugin:this.registerPlugin,addBeforeCommandHook:this.addBeforeCommandHook,registerCommand:this.registerCommand,registerTextEditorCommand:this.registerTextEditorCommand,errorHandler:this.errorHandler,resourcesMap:this.resourcesMap}},this.deactivate=()=>context_1.default.subscriptions.forEach(sub=>{sub.dispose()}),this.resourcesMap=()=>plugin_resources_1.default,this.getIssueTemplate=name=>{const url="https://raw.githubusercontent.com/mtxr/vscode-sqltools/master/.github/ISSUE_TEMPLATE/"+name;return new Promise(resolve=>{https_1.default.get(url,resp=>{let data="";resp.on("data",chunk=>data+=chunk.toString()),resp.on("end",()=>resolve(data))}).on("error",()=>resolve(null))})},this.aboutVersionHandler=async()=>{const message=[`${constants_1.DISPLAY_NAME} v${constants_1.VERSION}`,"",`Platform: ${process.platform}, ${process.arch}`,"Using Node Runtime: "+(config_manager_1.default.useNodeRuntime?"yes":"no"),"","by @mtxr "+constants_1.AUTHOR],res=await vscode_1.window.showInformationMessage(message.join("\n"),{modal:!0},"Feature Request","Found a bug?");if(!res)return;const newIssueUrl="https://github.com/mtxr/vscode-sqltools/issues/new";try{let template,body;switch(res){case"Found a bug?":template="bug_report.md";break;case"Feature Request":template="feature_request.md"}if(body=await this.getIssueTemplate(template),body&&(body=encodeURIComponent(body.replace(/---([^\-]+---\n\n)/gim,"").replace(/(- OS).+/gi,`$1: ${process.platform}, ${process.arch}`).replace(/(- Version).+/gi,"$1: v"+constants_1.VERSION))),!template&&!body)return utils_1.openExternal(newIssueUrl+"/choose");let issueUrl=`${newIssueUrl}?assignees=&labels=feature+request&template=${template}&body=${body}`;utils_1.openExternal(issueUrl)}catch(e){await vscode_1.window.showInformationMessage("Could not open a issue. Please go to GitHub to open.","Open Github")&&utils_1.openExternal(newIssueUrl+"/choose")}},this.displayReleaseNotesMessage=async()=>{try{const current=utils_2.default.getlastRunInfo(),{lastNotificationDate:lastNotificationDate=0,updated:updated}=current,lastNDate=parseInt(new Date(lastNotificationDate).toISOString().substr(0,10).replace(/\D/g,""),10),updatedRecently=parseInt((new Date).toISOString().substr(0,10).replace(/\D/g,""),10)-lastNDate<2;if(config_manager_1.default.disableReleaseNotifications||!updated||updatedRecently)return;utils_2.default.updateLastRunInfo({lastNotificationDate:+new Date});const moreInfo="More Info",supportProject="Support This Project",releaseNotes="Release Notes",message=constants_1.DISPLAY_NAME+" updated! Check out the release notes for more information.",options=[moreInfo,supportProject,releaseNotes],res=await vscode_1.window.showInformationMessage(message,...options);switch(telemetry_1.default.registerMessage("info",message,res),res){case moreInfo:utils_1.openExternal("https://vscode-sqltools.mteixeira.dev/#donate-and-support?umd_source=vscode&utm_medium=notification&utm_campaign=donate");break;case releaseNotes:utils_1.openExternal(current.releaseNotes);break;case supportProject:utils_1.openExternal("https://www.patreon.com/mteixeira")}}catch(e){}},this.loadPlugins=()=>{const pluginsQueue=this.pluginsQueue;this.pluginsQueue=[],this.loaded=this.loaded||!0;for(let plugin of pluginsQueue){log.info({plugin:plugin},"registering %s%s.",plugin.name,plugin.type?` (${plugin.type})`:"");try{Promise.resolve(plugin.register(this)).then(()=>{plugin.extensionId&&(this.extPlugins[plugin.type||"general"]=this.extPlugins[plugin.type||"general"]||[],this.extPlugins[plugin.type||"general"].includes(plugin.extensionId)||this.extPlugins[plugin.type||"general"].push(plugin.extensionId),this.updateExtPluginsInfo()),log.info("%s%s registered!",plugin.name,plugin.type?` (${plugin.type})`:""),this.requestRefreshTree()}).catch(err=>{this.errorHandler("Error loading plugin "+plugin.name,err)})}catch(error){this.errorHandler("Error loading plugin "+plugin.name,error)}}this.updateExtPluginsInfo(),this.requestRefreshTree()},this.requestRefreshTree=debounce_1.default(()=>vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".refreshTree"),1e3),this.updateExtPluginsInfo=debounce_1.default(async()=>{utils_2.default.updateLastRunInfo({installedExtPlugins:this.extPlugins}),await context_1.default.globalState.update("extPlugins",this.extPlugins)},200),this.onWillRunCommandHandler=evt=>{evt.command&&this.willRunCommandHooks[evt.command]&&0!==this.willRunCommandHooks[evt.command].length&&(log.debug(`Will run ${this.willRunCommandHooks[evt.command].length} attached handler for 'beforeCommandHooks'`),this.willRunCommandHooks[evt.command].forEach(hook=>hook(evt)))},this.onDidRunCommandSuccessfullyHandler=evt=>{evt.command&&this.didRunCommandSuccessfullyHooks[evt.command]&&0!==this.didRunCommandSuccessfullyHooks[evt.command].length&&(log.debug(`Will run ${this.didRunCommandSuccessfullyHooks[evt.command].length} attached handler for 'afterCommandSuccessfullyHooks'`),this.didRunCommandSuccessfullyHooks[evt.command].forEach(hook=>hook(evt)))},this.addHook=(prop,command,handler)=>(this[prop][command]||(this[prop][command]=[]),this[prop][command].push(handler),this),this.addBeforeCommandHook=(command,handler)=>this.addHook("willRunCommandHooks",command,handler),this.addAfterCommandSuccessHook=(command,handler)=>this.addHook("didRunCommandSuccessfullyHooks",command,handler),this.registerPlugin=plugins=>(this.pluginsQueue.push(...Array.isArray(plugins)?plugins:[plugins]),this.loaded&&this.loadPlugins(),this),this.registerCommand=(command,handler)=>this.decorateAndRegisterCommand(command,handler),this.registerTextEditorCommand=(command,handler)=>this.decorateAndRegisterCommand(command,handler,"registerTextEditorCommand"),this.errorHandler=(message,error)=>error_handler_1.default.create(message)(error),this.decorateAndRegisterCommand=(command,handler,type="registerCommand")=>(context_1.default.subscriptions.push(vscode_1.commands[type](`${constants_1.EXT_NAMESPACE}.${command}`,async(...args)=>{log.info(`EXECUTING COMMAND => ${constants_1.EXT_NAMESPACE}.${command}`),this.onWillRunCommandEmitter.fire({command:command,args:args});let result=handler(...args);return void 0===result||"function"!=typeof result.then&&"function"!=typeof result.catch||(result=await result),this.onDidRunCommandSuccessfullyEmitter.fire({args:args,command:command,result:result}),result})),this)}}let instance;exports.SQLToolsExtension=SQLToolsExtension,exports.activate=function(ctx){try{if(context_1.default.set(ctx),instance)return;return path_1.migrateFilesToNewPaths(),instance=new SQLToolsExtension,instance.registerPlugin([extension_4.default,extension_1.default,new extension_2.default,new extension_3.default]),instance.activate()}catch(err){log.fatal("failed to activate: %O",err)}},exports.deactivate=function(){instance&&(instance.deactivate(),instance=void 0)}},function(module,exports,__webpack_require__){"use strict";const path=__webpack_require__(9),os=__webpack_require__(18),homedir=os.homedir(),tmpdir=os.tmpdir(),{env:env}=process,envPaths=(name,options)=>{if("string"!=typeof name)throw new TypeError("Expected string, got "+typeof name);return(options=Object.assign({suffix:"nodejs"},options)).suffix&&(name+="-"+options.suffix),"darwin"===process.platform?(name=>{const library=path.join(homedir,"Library");return{data:path.join(library,"Application Support",name),config:path.join(library,"Preferences",name),cache:path.join(library,"Caches",name),log:path.join(library,"Logs",name),temp:path.join(tmpdir,name)}})(name):"win32"===process.platform?(name=>{const appData=env.APPDATA||path.join(homedir,"AppData","Roaming"),localAppData=env.LOCALAPPDATA||path.join(homedir,"AppData","Local");return{data:path.join(localAppData,name,"Data"),config:path.join(appData,name,"Config"),cache:path.join(localAppData,name,"Cache"),log:path.join(localAppData,name,"Log"),temp:path.join(tmpdir,name)}})(name):(name=>{const username=path.basename(homedir);return{data:path.join(env.XDG_DATA_HOME||path.join(homedir,".local","share"),name),config:path.join(env.XDG_CONFIG_HOME||path.join(homedir,".config"),name),cache:path.join(env.XDG_CACHE_HOME||path.join(homedir,".cache"),name),log:path.join(env.XDG_STATE_HOME||path.join(homedir,".local","state"),name),temp:path.join(tmpdir,username,name)}})(name)};module.exports=envPaths,module.exports.default=envPaths},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const stream_1=__webpack_require__(79),vscode_1=__webpack_require__(1),factory_1=__importDefault(__webpack_require__(80)),outputChannel=vscode_1.window.createOutputChannel("SQLTools"),writableStream=new stream_1.Writable({write:(chunk,_,done)=>{outputChannel.append(chunk.toString(chunk.encoding||"utf8")),done()},writev:(chunks,done)=>{chunks.forEach(i=>outputChannel.append(i.chunk.toString(i.encoding||"utf8"))),done()}}),logger=factory_1.default({},writableStream);logger.clear=outputChannel.clear.bind(outputChannel),logger.outputChannel=outputChannel,logger.show=()=>outputChannel.show(),exports.default=logger},function(module,exports,__webpack_require__){"use strict";const os=__webpack_require__(18),stdSerializers=__webpack_require__(81),redaction=__webpack_require__(140),time=__webpack_require__(148),proto=__webpack_require__(149),symbols=__webpack_require__(26),{assertDefaultLevelFound:assertDefaultLevelFound,mappings:mappings,genLsCache:genLsCache}=__webpack_require__(84),{createArgsNormalizer:createArgsNormalizer,asChindings:asChindings,final:final,stringify:stringify,buildSafeSonicBoom:buildSafeSonicBoom,buildFormatters:buildFormatters,noop:noop}=__webpack_require__(58),{version:version}=__webpack_require__(90),{chindingsSym:chindingsSym,redactFmtSym:redactFmtSym,serializersSym:serializersSym,timeSym:timeSym,timeSliceIndexSym:timeSliceIndexSym,streamSym:streamSym,stringifySym:stringifySym,stringifiersSym:stringifiersSym,setLevelSym:setLevelSym,endSym:endSym,formatOptsSym:formatOptsSym,messageKeySym:messageKeySym,nestedKeySym:nestedKeySym,mixinSym:mixinSym,useOnlyCustomLevelsSym:useOnlyCustomLevelsSym,formattersSym:formattersSym,hooksSym:hooksSym}=symbols,{epochTime:epochTime,nullTime:nullTime}=time,{pid:pid}=process,hostname=os.hostname(),defaultErrorSerializer=stdSerializers.err,defaultOptions={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:pid,hostname:hostname},serializers:Object.assign(Object.create(null),{err:defaultErrorSerializer}),formatters:Object.assign(Object.create(null),{bindings:bindings=>bindings,level:(label,number)=>({level:number})}),hooks:{logMethod:void 0},timestamp:epochTime,name:void 0,redact:null,customLevels:null,levelKey:void 0,useOnlyCustomLevels:!1},normalize=createArgsNormalizer(defaultOptions),serializers=Object.assign(Object.create(null),stdSerializers);function pino(...args){const instance={},{opts:opts,stream:stream}=normalize(instance,...args),{redact:redact,crlf:crlf,serializers:serializers,timestamp:timestamp,messageKey:messageKey,nestedKey:nestedKey,base:base,name:name,level:level,customLevels:customLevels,useLevelLabels:useLevelLabels,changeLevelName:changeLevelName,levelKey:levelKey,mixin:mixin,useOnlyCustomLevels:useOnlyCustomLevels,formatters:formatters,hooks:hooks}=opts,allFormatters=buildFormatters(formatters.level,formatters.bindings,formatters.log);!useLevelLabels||changeLevelName||levelKey?!changeLevelName&&!levelKey||useLevelLabels?(changeLevelName||levelKey)&&useLevelLabels&&(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),allFormatters.level=function(name){return function(label,number){return{[name]:label}}}(changeLevelName||levelKey)):(process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),allFormatters.level=function(name){return function(label,number){return{[name]:number}}}(changeLevelName||levelKey)):(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),allFormatters.level=labelsFormatter),serializers[Symbol.for("pino.*")]&&(process.emitWarning("The pino.* serializer is deprecated, use the formatters.log options instead","Warning","PINODEP003"),allFormatters.log=serializers[Symbol.for("pino.*")]),allFormatters.bindings||(allFormatters.bindings=defaultOptions.formatters.bindings),allFormatters.level||(allFormatters.level=defaultOptions.formatters.level);const stringifiers=redact?redaction(redact,stringify):{},formatOpts=redact?{stringify:stringifiers[redactFmtSym]}:{stringify:stringify},end="}"+(crlf?"\r\n":"\n"),coreChindings=asChindings.bind(null,{[chindingsSym]:"",[serializersSym]:serializers,[stringifiersSym]:stringifiers,[stringifySym]:stringify,[formattersSym]:allFormatters}),chindings=null===base?"":coreChindings(void 0===name?base:Object.assign({},base,{name:name})),time=timestamp instanceof Function?timestamp:timestamp?epochTime:nullTime,timeSliceIndex=time().indexOf(":")+1;if(useOnlyCustomLevels&&!customLevels)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(mixin&&"function"!=typeof mixin)throw Error(`Unknown mixin type "${typeof mixin}" - expected "function"`);assertDefaultLevelFound(level,customLevels,useOnlyCustomLevels);const levels=mappings(customLevels,useOnlyCustomLevels);return Object.assign(instance,{levels:levels,[useOnlyCustomLevelsSym]:useOnlyCustomLevels,[streamSym]:stream,[timeSym]:time,[timeSliceIndexSym]:timeSliceIndex,[stringifySym]:stringify,[stringifiersSym]:stringifiers,[endSym]:end,[formatOptsSym]:formatOpts,[messageKeySym]:messageKey,[nestedKeySym]:nestedKey,[serializersSym]:serializers,[mixinSym]:mixin,[chindingsSym]:chindings,[formattersSym]:allFormatters,[hooksSym]:hooks,silent:noop}),Object.setPrototypeOf(instance,proto()),genLsCache(instance),instance[setLevelSym](level),instance}function labelsFormatter(label,number){return{level:label}}pino.extreme=(dest=process.stdout.fd)=>(process.emitWarning("The pino.extreme() option is deprecated and will be removed in v7. Use pino.destination({ sync: false }) instead.",{code:"extreme_deprecation"}),buildSafeSonicBoom({dest:dest,minLength:4096,sync:!1})),pino.destination=(dest=process.stdout.fd)=>"object"==typeof dest?(dest.dest=dest.dest||process.stdout.fd,buildSafeSonicBoom(dest)):buildSafeSonicBoom({dest:dest,minLength:0,sync:!0}),pino.final=final,pino.levels=mappings(),pino.stdSerializers=serializers,pino.stdTimeFunctions=Object.assign({},time),pino.symbols=symbols,pino.version=version,module.exports=pino},function(module,exports,__webpack_require__){"use strict";module.exports=function errSerializer(err){if(!(err instanceof Error))return err;err[seen]=void 0;const _err=Object.create(pinoErrProto);_err.type=err.constructor.name,_err.message=err.message,_err.stack=err.stack;for(const key in err)if(void 0===_err[key]){const val=err[key];val instanceof Error?val.hasOwnProperty(seen)||(_err[key]=errSerializer(val)):_err[key]=val}return delete err[seen],_err.raw=err,_err};const seen=Symbol("circular-ref-tag"),rawSymbol=Symbol("pino-raw-err-ref"),pinoErrProto=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[rawSymbol]},set:function(val){this[rawSymbol]=val}}});Object.defineProperty(pinoErrProto,rawSymbol,{writable:!0,value:{}})},function(module,exports,__webpack_require__){"use strict";module.exports={mapHttpRequest:function(req){return{req:reqSerializer(req)}},reqSerializer:reqSerializer};var rawSymbol=Symbol("pino-raw-req-ref"),pinoReqProto=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[rawSymbol]},set:function(val){this[rawSymbol]=val}}});function reqSerializer(req){var connection=req.info||req.connection;const _req=Object.create(pinoReqProto);return _req.id="function"==typeof req.id?req.id():req.id||(req.info?req.info.id:void 0),_req.method=req.method,req.originalUrl?_req.url=req.originalUrl:_req.url=req.url?req.url.path||req.url:void 0,_req.headers=req.headers,_req.remoteAddress=connection&&connection.remoteAddress,_req.remotePort=connection&&connection.remotePort,_req.raw=req.raw||req,_req}Object.defineProperty(pinoReqProto,rawSymbol,{writable:!0,value:{}})},function(module,exports,__webpack_require__){"use strict";module.exports={mapHttpResponse:function(res){return{res:resSerializer(res)}},resSerializer:resSerializer};var rawSymbol=Symbol("pino-raw-res-ref"),pinoResProto=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[rawSymbol]},set:function(val){this[rawSymbol]=val}}});function resSerializer(res){const _res=Object.create(pinoResProto);return _res.statusCode=res.statusCode,_res.headers=res.getHeaders?res.getHeaders():res._headers,_res.raw=res,_res}Object.defineProperty(pinoResProto,rawSymbol,{writable:!0,value:{}})},function(module,exports,__webpack_require__){"use strict";const fastRedact=__webpack_require__(141),{redactFmtSym:redactFmtSym,wildcardFirstSym:wildcardFirstSym}=__webpack_require__(26),{rx:rx,validator:validator}=fastRedact,validate=validator({ERR_PATHS_MUST_BE_STRINGS:()=>"pino  redacted paths must be strings",ERR_INVALID_PATH:s=>`pino  redact paths array contains an invalid path (${s})`}),CENSOR="[Redacted]";module.exports=function(opts,serialize){const{paths:paths,censor:censor}=function(opts){if(Array.isArray(opts))return validate(opts={paths:opts,censor:CENSOR}),opts;var{paths:paths,censor:censor=CENSOR,remove:remove}=opts;if(!1===Array.isArray(paths))throw Error("pino  redact must contain an array of strings");!0===remove&&(censor=void 0);return validate({paths:paths,censor:censor}),{paths:paths,censor:censor}}(opts),shape=paths.reduce((o,str)=>{rx.lastIndex=0;const first=rx.exec(str),next=rx.exec(str);let ns=void 0!==first[1]?first[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):first[0];if("*"===ns&&(ns=wildcardFirstSym),null===next)return o[ns]=null,o;if(null===o[ns])return o;const{index:index}=next,nextPath=""+str.substr(index,str.length-1);return o[ns]=o[ns]||[],ns!==wildcardFirstSym&&0===o[ns].length&&o[ns].push(...o[wildcardFirstSym]||[]),ns===wildcardFirstSym&&Object.keys(o).forEach((function(k){o[k]&&o[k].push(nextPath)})),o[ns].push(nextPath),o},{}),result={[redactFmtSym]:fastRedact({paths:paths,censor:censor,serialize:serialize,strict:!1})},topCensor=(...args)=>serialize("function"==typeof censor?censor(...args):censor);return[...Object.keys(shape),...Object.getOwnPropertySymbols(shape)].reduce((o,k)=>(null===shape[k]?o[k]=topCensor:o[k]=fastRedact({paths:shape[k],censor:censor,serialize:serialize,strict:!1}),o),result)}},function(module,exports,__webpack_require__){"use strict";const validator=__webpack_require__(142),parse=__webpack_require__(144),redactor=__webpack_require__(145),restorer=__webpack_require__(146),{groupRedact:groupRedact,nestedRedact:nestedRedact}=__webpack_require__(82),state=__webpack_require__(147),rx=__webpack_require__(55),validate=validator(),noop=o=>o;noop.restore=noop;function fastRedact(opts={}){const paths=Array.from(new Set(opts.paths||[])),serialize="serialize"in opts&&(!1===opts.serialize||"function"==typeof opts.serialize)?opts.serialize:JSON.stringify,remove=opts.remove;if(!0===remove&&serialize!==JSON.stringify)throw Error("fast-redact  remove option may only be set when serializer is JSON.stringify");const censor=!0===remove?void 0:"censor"in opts?opts.censor:"[REDACTED]",isCensorFct="function"==typeof censor;if(0===paths.length)return serialize||noop;validate({paths:paths,serialize:serialize,censor:censor});const{wildcards:wildcards,wcLen:wcLen,secret:secret}=parse({paths:paths,censor:censor}),compileRestore=restorer({secret:secret,wcLen:wcLen}),strict=!("strict"in opts)||opts.strict;return redactor({secret:secret,wcLen:wcLen,serialize:serialize,strict:strict,isCensorFct:isCensorFct},state({secret:secret,censor:censor,compileRestore:compileRestore,serialize:serialize,groupRedact:groupRedact,nestedRedact:nestedRedact,wildcards:wildcards,wcLen:wcLen}))}fastRedact.rx=rx,fastRedact.validator=validator,module.exports=fastRedact},function(module,exports,__webpack_require__){"use strict";const{createContext:createContext,runInContext:runInContext}=__webpack_require__(143);module.exports=function(opts={}){const{ERR_PATHS_MUST_BE_STRINGS:ERR_PATHS_MUST_BE_STRINGS=(()=>"fast-redact - Paths must be strings"),ERR_INVALID_PATH:ERR_INVALID_PATH=(s=>`fast-redact  Invalid path (${s})`)}=opts;return function({paths:paths}){paths.forEach(s=>{if("string"!=typeof s)throw Error(ERR_PATHS_MUST_BE_STRINGS());try{if(//.test(s))throw Error();const proxy=new Proxy({},{get:()=>proxy,set:()=>{throw Error()}}),expr=("["===s[0]?"":".")+s.replace(/^\*/,"").replace(/\.\*/g,".").replace(/\[\*\]/g,"[]");if(/\n|\r|;/.test(expr))throw Error();if(/\/\*/.test(expr))throw Error();runInContext(`\n          (function () {\n            'use strict'\n            o${expr}\n            if ([o${expr}].length !== 1) throw Error()\n          })()\n        `,createContext({o:proxy,"":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch(e){throw Error(ERR_INVALID_PATH(s))}})}}},function(module,exports){module.exports=require("vm")},function(module,exports,__webpack_require__){"use strict";const rx=__webpack_require__(55);module.exports=function({paths:paths}){const wildcards=[];var wcLen=0;const secret=paths.reduce((function(o,strPath,ix){var path=strPath.match(rx).map(p=>p.replace(/'|"|`/g,""));const leadingBracket="["===strPath[0],star=(path=path.map(p=>"["===p[0]?p.substr(1,p.length-2):p)).indexOf("*");if(star>-1){const before=path.slice(0,star),beforeStr=before.join("."),after=path.slice(star+1,path.length);if(after.indexOf("*")>-1)throw Error("fast-redact  Only one wildcard per path is supported");const nested=after.length>0;wcLen++,wildcards.push({before:before,beforeStr:beforeStr,after:after,nested:nested})}else o[strPath]={path:path,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(strPath),leadingBracket:leadingBracket};return o}),{});return{wildcards:wildcards,wcLen:wcLen,secret:secret}}},function(module,exports,__webpack_require__){"use strict";const rx=__webpack_require__(55);module.exports=function({secret:secret,serialize:serialize,wcLen:wcLen,strict:strict,isCensorFct:isCensorFct},state){const redact=Function("o",`\n    if (typeof o !== 'object' || o == null) {\n      ${function(strict,serialize){return!0===strict?"throw Error('fast-redact: primitives cannot be redacted')":!1===serialize?"return o":"return this.serialize(o)"}(strict,serialize)}\n    }\n    const { censor, secret } = this\n    ${function(secret,isCensorFct){return Object.keys(secret).map(path=>{const{escPath:escPath,leadingBracket:leadingBracket}=secret[path],skip=leadingBracket?1:0,delim=leadingBracket?"":".",hops=[];for(var match;null!==(match=rx.exec(path));){const[,ix]=match,{index:index,input:input}=match;index>skip&&hops.push(input.substring(0,index-(ix?0:1)))}var existence=hops.map(p=>`o${delim}${p}`).join(" && ");0===existence.length?existence+=`o${delim}${path} != null`:existence+=` && o${delim}${path} != null`;const circularDetection=`\n      switch (true) {\n        ${hops.reverse().map(p=>`\n          case o${delim}${p} === censor:\n            secret[${escPath}].circle = ${JSON.stringify(p)}\n            break\n        `).join("\n")}\n      }\n    `;return`\n      if (${existence}) {\n        const val = o${delim}${path}\n        if (val === censor) {\n          secret[${escPath}].precensored = true\n        } else {\n          secret[${escPath}].val = val\n          o${delim}${path} = ${isCensorFct?"censor(val)":"censor"}\n          ${circularDetection}\n        }\n      }\n    `}).join("\n")}(secret,isCensorFct)}\n    this.compileRestore()\n    ${function(hasWildcards,isCensorFct){return!0===hasWildcards?`\n    {\n      const { wildcards, wcLen, groupRedact, nestedRedact } = this\n      for (var i = 0; i < wcLen; i++) {\n        const { before, beforeStr, after, nested } = wildcards[i]\n        if (nested === true) {\n          secret[beforeStr] = secret[beforeStr] || []\n          nestedRedact(secret[beforeStr], o, before, after, censor, ${isCensorFct})\n        } else secret[beforeStr] = groupRedact(o, before, censor, ${isCensorFct})\n      }\n    }\n  `:""}(wcLen>0,isCensorFct)}\n    ${function(serialize){return!1===serialize?"return o":"\n    var s = this.serialize(o)\n    this.restore(o)\n    return s\n  "}(serialize)}\n  `).bind(state);!1===serialize&&(redact.restore=o=>state.restore(o));return redact}},function(module,exports,__webpack_require__){"use strict";const{groupRestore:groupRestore,nestedRestore:nestedRestore}=__webpack_require__(82);module.exports=function({secret:secret,wcLen:wcLen}){return function(){if(this.restore)return;const paths=Object.keys(secret).filter(path=>!1===secret[path].precensored),resetters=function(secret,paths){return paths.map(path=>{const{circle:circle,escPath:escPath,leadingBracket:leadingBracket}=secret[path];return`\n      if (secret[${escPath}].val !== undefined) {\n        try { ${circle?`o.${circle} = secret[${escPath}].val`:`o${leadingBracket?"":"."}${path} = secret[${escPath}].val`} } catch (e) {}\n        ${`secret[${escPath}].val = undefined`}\n      }\n    `}).join("")}(secret,paths),hasWildcards=wcLen>0,state=hasWildcards?{secret:secret,groupRestore:groupRestore,nestedRestore:nestedRestore}:{secret:secret};this.restore=Function("o",function(resetters,paths,hasWildcards){const dynamicReset=!0===hasWildcards?`\n    const keys = Object.keys(secret)\n    const len = keys.length\n    for (var i = ${paths.length}; i < len; i++) {\n      const k = keys[i]\n      const o = secret[k]\n      if (o.flat === true) this.groupRestore(o)\n      else this.nestedRestore(o)\n      secret[k] = null\n    }\n  `:"";return`\n    const secret = this.secret\n    ${resetters}\n    ${dynamicReset}\n    return o\n  `}(resetters,paths,hasWildcards)).bind(state)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(o){const{secret:secret,censor:censor,isCensorFct:isCensorFct,compileRestore:compileRestore,serialize:serialize,groupRedact:groupRedact,nestedRedact:nestedRedact,wildcards:wildcards,wcLen:wcLen}=o,builder=[{secret:secret,censor:censor,isCensorFct:isCensorFct,compileRestore:compileRestore}];builder.push({secret:secret}),!1!==serialize&&builder.push({serialize:serialize});wcLen>0&&builder.push({groupRedact:groupRedact,nestedRedact:nestedRedact,wildcards:wildcards,wcLen:wcLen});return Object.assign(...builder)}},function(module,exports,__webpack_require__){"use strict";module.exports={nullTime:()=>"",epochTime:()=>',"time":'+Date.now(),unixTime:()=>',"time":'+Math.round(Date.now()/1e3),isoTime:()=>`,"time":"${new Date(Date.now()).toISOString()}"`}},function(module,exports,__webpack_require__){"use strict";const{EventEmitter:EventEmitter}=__webpack_require__(56),SonicBoom=__webpack_require__(83),flatstr=__webpack_require__(57),{lsCacheSym:lsCacheSym,levelValSym:levelValSym,setLevelSym:setLevelSym,getLevelSym:getLevelSym,chindingsSym:chindingsSym,mixinSym:mixinSym,asJsonSym:asJsonSym,writeSym:writeSym,timeSym:timeSym,timeSliceIndexSym:timeSliceIndexSym,streamSym:streamSym,serializersSym:serializersSym,formattersSym:formattersSym,useOnlyCustomLevelsSym:useOnlyCustomLevelsSym,needsMetadataGsym:needsMetadataGsym}=__webpack_require__(26),{getLevel:getLevel,setLevel:setLevel,isLevelEnabled:isLevelEnabled,mappings:mappings,initialLsCache:initialLsCache,genLsCache:genLsCache,assertNoLevelCollisions:assertNoLevelCollisions}=__webpack_require__(84),{asChindings:asChindings,asJson:asJson,buildFormatters:buildFormatters}=__webpack_require__(58),{version:version}=__webpack_require__(90),prototype={constructor:class Pino{},child:function(bindings){if(!bindings)throw Error("missing bindings for child Pino");const serializers=this[serializersSym],formatters=this[formattersSym],instance=Object.create(this);if(!0===bindings.hasOwnProperty("serializers")){for(var k in instance[serializersSym]=Object.create(null),serializers)instance[serializersSym][k]=serializers[k];const parentSymbols=Object.getOwnPropertySymbols(serializers);for(var i=0;i<parentSymbols.length;i++){const ks=parentSymbols[i];instance[serializersSym][ks]=serializers[ks]}for(var bk in bindings.serializers)instance[serializersSym][bk]=bindings.serializers[bk];const bindingsSymbols=Object.getOwnPropertySymbols(bindings.serializers);for(var bi=0;bi<bindingsSymbols.length;bi++){const bks=bindingsSymbols[bi];instance[serializersSym][bks]=bindings.serializers[bks]}}else instance[serializersSym]=serializers;if(bindings.hasOwnProperty("formatters")){const{level:level,bindings:chindings,log:log}=bindings.formatters;instance[formattersSym]=buildFormatters(level||formatters.level,chindings||resetChildingsFormatter,log||formatters.log)}else instance[formattersSym]=buildFormatters(formatters.level,resetChildingsFormatter,formatters.log);!0===bindings.hasOwnProperty("customLevels")&&(assertNoLevelCollisions(this.levels,bindings.customLevels),instance.levels=mappings(bindings.customLevels,instance[useOnlyCustomLevelsSym]),genLsCache(instance));instance[chindingsSym]=asChindings(instance,bindings);const childLevel=bindings.level||this.level;return instance[setLevelSym](childLevel),instance},bindings:function(){var chindingsJson=`{${this[chindingsSym].substr(1)}}`,bindingsFromJson=JSON.parse(chindingsJson);return delete bindingsFromJson.pid,delete bindingsFromJson.hostname,bindingsFromJson},setBindings:function(newBindings){const chindings=asChindings(this,newBindings);this[chindingsSym]=chindings},flush:function(){const stream=this[streamSym];"flush"in stream&&stream.flush()},isLevelEnabled:isLevelEnabled,version:version,get level(){return this[getLevelSym]()},set level(lvl){this[setLevelSym](lvl)},get levelVal(){return this[levelValSym]},set levelVal(n){throw Error("levelVal is read-only")},[lsCacheSym]:initialLsCache,[writeSym]:function(_obj,msg,num){const t=this[timeSym](),mixin=this[mixinSym],objError=_obj instanceof Error;var obj;null==_obj?obj=mixin?mixin():{}:(obj=Object.assign(mixin?mixin():{},_obj),!msg&&objError&&(msg=_obj.message),objError&&(obj.stack=_obj.stack,obj.type||(obj.type="Error")));const s=this[asJsonSym](obj,msg,num,t),stream=this[streamSym];!0===stream[needsMetadataGsym]&&(stream.lastLevel=num,stream.lastObj=obj,stream.lastMsg=msg,stream.lastTime=t.slice(this[timeSliceIndexSym]),stream.lastLogger=this);stream instanceof SonicBoom?stream.write(s):stream.write(flatstr(s))},[asJsonSym]:asJson,[getLevelSym]:getLevel,[setLevelSym]:setLevel};Object.setPrototypeOf(prototype,EventEmitter.prototype),module.exports=function(){return Object.create(prototype)};const resetChildingsFormatter=bindings=>bindings},function(module,exports,__webpack_require__){"use strict";if("undefined"!=typeof SharedArrayBuffer&&"undefined"!=typeof Atomics){const nil=new Int32Array(new SharedArrayBuffer(4));function sleep(ms){if(!1===(ms>0&&ms<1/0)){if("number"!=typeof ms&&"bigint"!=typeof ms)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}Atomics.wait(nil,0,0,Number(ms))}module.exports=sleep}else{function sleep(ms){if(!1===(ms>0&&ms<1/0)){if("number"!=typeof ms&&"bigint"!=typeof ms)throw TypeError("sleep: ms must be a number");throw RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity")}const target=Date.now()+Number(ms);for(;target>Date.now(););}module.exports=sleep}},function(module,exports,__webpack_require__){"use strict";function tryStringify(o){try{return JSON.stringify(o)}catch(e){return'"[Circular]"'}}module.exports=function(f,args,opts){var ss=opts&&opts.stringify||tryStringify;if("object"==typeof f&&null!==f){var len=args.length+1;if(1===len)return f;var objects=new Array(len);objects[0]=ss(f);for(var index=1;index<len;index++)objects[index]=ss(args[index]);return objects.join(" ")}if("string"!=typeof f)return f;var argLen=args.length;if(0===argLen)return f;for(var str="",a=0,lastPos=-1,flen=f&&f.length||0,i=0;i<flen;){if(37===f.charCodeAt(i)&&i+1<flen){switch(lastPos=lastPos>-1?lastPos:0,f.charCodeAt(i+1)){case 100:if(a>=argLen)break;if(lastPos<i&&(str+=f.slice(lastPos,i)),null==args[a])break;str+=Number(args[a]),lastPos=i+=2;break;case 79:case 111:case 106:if(a>=argLen)break;if(lastPos<i&&(str+=f.slice(lastPos,i)),void 0===args[a])break;var type=typeof args[a];if("string"===type){str+="'"+args[a]+"'",lastPos=i+2,i++;break}if("function"===type){str+=args[a].name||"<anonymous>",lastPos=i+2,i++;break}str+=ss(args[a]),lastPos=i+2,i++;break;case 115:if(a>=argLen)break;lastPos<i&&(str+=f.slice(lastPos,i)),str+=String(args[a]),lastPos=i+2,i++;break;case 37:lastPos<i&&(str+=f.slice(lastPos,i)),str+="%",lastPos=i+2,i++}++a}++i}if(-1===lastPos)return f;lastPos<flen&&(str+=f.slice(lastPos));return str}},function(module,exports,__webpack_require__){"use strict";const chalk=__webpack_require__(86),jmespath=__webpack_require__(161),colors=__webpack_require__(89),{ERROR_LIKE_KEYS:ERROR_LIKE_KEYS,MESSAGE_KEY:MESSAGE_KEY,TIMESTAMP_KEY:TIMESTAMP_KEY}=__webpack_require__(60),{isObject:isObject,prettifyErrorLog:prettifyErrorLog,prettifyLevel:prettifyLevel,prettifyMessage:prettifyMessage,prettifyMetadata:prettifyMetadata,prettifyObject:prettifyObject,prettifyTime:prettifyTime}=__webpack_require__(162),bourne=__webpack_require__(164),defaultOptions={colorize:chalk.supportsColor,crlf:!1,errorLikeObjectKeys:ERROR_LIKE_KEYS,errorProps:"",levelFirst:!1,messageKey:MESSAGE_KEY,messageFormat:!1,timestampKey:TIMESTAMP_KEY,translateTime:!1,useMetadata:!1,outputStream:process.stdout,customPrettifiers:{}};module.exports=function(options){const opts=Object.assign({},defaultOptions,options),EOL=opts.crlf?"\r\n":"\n",messageKey=opts.messageKey,levelKey=opts.levelKey,messageFormat=opts.messageFormat,timestampKey=opts.timestampKey,errorLikeObjectKeys=opts.errorLikeObjectKeys,errorProps=opts.errorProps.split(","),customPrettifiers=opts.customPrettifiers,ignoreKeys=opts.ignore?new Set(opts.ignore.split(",")):void 0,colorizer=colors(opts.colorize),search=opts.search;return function(inputData){let log;if(isObject(inputData))log=inputData;else{const parsed=(input=>{try{return{value:bourne.parse(input,{protoAction:"remove"})}}catch(err){return{err:err}}})(inputData);if(parsed.err||!isObject(parsed.value))return inputData+EOL;log=parsed.value}if(search&&!jmespath.search(log,search))return;const prettifiedMessage=prettifyMessage({log:log,messageKey:messageKey,colorizer:colorizer,messageFormat:messageFormat});ignoreKeys&&(log=Object.keys(log).filter(key=>!ignoreKeys.has(key)).reduce((res,key)=>(res[key]=log[key],res),{}));const prettifiedLevel=prettifyLevel({log:log,colorizer:colorizer,levelKey:levelKey}),prettifiedMetadata=prettifyMetadata({log:log}),prettifiedTime=prettifyTime({log:log,translateFormat:opts.translateTime,timestampKey:timestampKey});let line="";opts.levelFirst&&prettifiedLevel&&(line=""+prettifiedLevel);prettifiedTime&&""===line?line=""+prettifiedTime:prettifiedTime&&(line=`${line} ${prettifiedTime}`);!opts.levelFirst&&prettifiedLevel&&(line=line.length>0?`${line} ${prettifiedLevel}`:prettifiedLevel);prettifiedMetadata&&(line=`${line} ${prettifiedMetadata}:`);!1===line.endsWith(":")&&""!==line&&(line+=":");prettifiedMessage&&(line=`${line} ${prettifiedMessage}`);line.length>0&&(line+=EOL);if("Error"===log.type&&log.stack){const prettifiedErrorLog=prettifyErrorLog({log:log,errorLikeKeys:errorLikeObjectKeys,errorProperties:errorProps,ident:"    ",eol:EOL});line+=prettifiedErrorLog}else{const skipKeys=[messageKey,levelKey,timestampKey].filter(key=>"string"==typeof log[key]||"number"==typeof log[key]),prettifiedObject=prettifyObject({input:log,skipKeys:skipKeys,customPrettifiers:customPrettifiers,errorLikeKeys:errorLikeObjectKeys,eol:EOL,ident:"    "});line+=prettifiedObject}return line}}},function(module,exports,__webpack_require__){"use strict";(function(module){const wrapAnsi16=(fn,offset)=>(...args)=>`[${fn(...args)+offset}m`,wrapAnsi256=(fn,offset)=>(...args)=>{const code=fn(...args);return`[${38+offset};5;${code}m`},wrapAnsi16m=(fn,offset)=>(...args)=>{const rgb=fn(...args);return`[${38+offset};2;${rgb[0]};${rgb[1]};${rgb[2]}m`},ansi2ansi=n=>n,rgb2rgb=(r,g,b)=>[r,g,b],setLazyProperty=(object,property,get)=>{Object.defineProperty(object,property,{get:()=>{const value=get();return Object.defineProperty(object,property,{value:value,enumerable:!0,configurable:!0}),value},enumerable:!0,configurable:!0})};let colorConvert;const makeDynamicStyles=(wrap,targetSpace,identity,isBackground)=>{void 0===colorConvert&&(colorConvert=__webpack_require__(154));const offset=isBackground?10:0,styles={};for(const[sourceSpace,suite]of Object.entries(colorConvert)){const name="ansi16"===sourceSpace?"ansi":sourceSpace;sourceSpace===targetSpace?styles[name]=wrap(identity,offset):"object"==typeof suite&&(styles[name]=wrap(suite[targetSpace],offset))}return styles};Object.defineProperty(module,"exports",{enumerable:!0,get:function(){const codes=new Map,styles={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};styles.color.gray=styles.color.blackBright,styles.bgColor.bgGray=styles.bgColor.bgBlackBright,styles.color.grey=styles.color.blackBright,styles.bgColor.bgGrey=styles.bgColor.bgBlackBright;for(const[groupName,group]of Object.entries(styles)){for(const[styleName,style]of Object.entries(group))styles[styleName]={open:`[${style[0]}m`,close:`[${style[1]}m`},group[styleName]=styles[styleName],codes.set(style[0],style[1]);Object.defineProperty(styles,groupName,{value:group,enumerable:!1})}return Object.defineProperty(styles,"codes",{value:codes,enumerable:!1}),styles.color.close="[39m",styles.bgColor.close="[49m",setLazyProperty(styles.color,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!1)),setLazyProperty(styles.color,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!1)),setLazyProperty(styles.color,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!1)),setLazyProperty(styles.bgColor,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!0)),setLazyProperty(styles.bgColor,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!0)),setLazyProperty(styles.bgColor,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!0)),styles}})}).call(this,__webpack_require__(59)(module))},function(module,exports,__webpack_require__){const conversions=__webpack_require__(87),route=__webpack_require__(156),convert={};Object.keys(conversions).forEach(fromModel=>{convert[fromModel]={},Object.defineProperty(convert[fromModel],"channels",{value:conversions[fromModel].channels}),Object.defineProperty(convert[fromModel],"labels",{value:conversions[fromModel].labels});const routes=route(fromModel);Object.keys(routes).forEach(toModel=>{const fn=routes[toModel];convert[fromModel][toModel]=function(fn){const wrappedFn=function(...args){const arg0=args[0];if(null==arg0)return arg0;arg0.length>1&&(args=arg0);const result=fn(args);if("object"==typeof result)for(let len=result.length,i=0;i<len;i++)result[i]=Math.round(result[i]);return result};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}(fn),convert[fromModel][toModel].raw=function(fn){const wrappedFn=function(...args){const arg0=args[0];return null==arg0?arg0:(arg0.length>1&&(args=arg0),fn(args))};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}(fn)})}),module.exports=convert},function(module,exports,__webpack_require__){"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(module,exports,__webpack_require__){const conversions=__webpack_require__(87);function deriveBFS(fromModel){const graph=function(){const graph={},models=Object.keys(conversions);for(let len=models.length,i=0;i<len;i++)graph[models[i]]={distance:-1,parent:null};return graph}(),queue=[fromModel];for(graph[fromModel].distance=0;queue.length;){const current=queue.pop(),adjacents=Object.keys(conversions[current]);for(let len=adjacents.length,i=0;i<len;i++){const adjacent=adjacents[i],node=graph[adjacent];-1===node.distance&&(node.distance=graph[current].distance+1,node.parent=current,queue.unshift(adjacent))}}return graph}function link(from,to){return function(args){return to(from(args))}}function wrapConversion(toModel,graph){const path=[graph[toModel].parent,toModel];let fn=conversions[graph[toModel].parent][toModel],cur=graph[toModel].parent;for(;graph[cur].parent;)path.unshift(graph[cur].parent),fn=link(conversions[graph[cur].parent][cur],fn),cur=graph[cur].parent;return fn.conversion=path,fn}module.exports=function(fromModel){const graph=deriveBFS(fromModel),conversion={},models=Object.keys(graph);for(let len=models.length,i=0;i<len;i++){const toModel=models[i];null!==graph[toModel].parent&&(conversion[toModel]=wrapConversion(toModel,graph))}return conversion}},function(module,exports,__webpack_require__){"use strict";const os=__webpack_require__(18),tty=__webpack_require__(88),hasFlag=__webpack_require__(158),{env:env}=process;let forceColor;function translateLevel(level){return 0!==level&&{level:level,hasBasic:!0,has256:level>=2,has16m:level>=3}}function supportsColor(haveStream,streamIsTTY){if(0===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(haveStream&&!streamIsTTY&&void 0===forceColor)return 0;const min=forceColor||0;if("dumb"===env.TERM)return min;if("win32"===process.platform){const osRelease=os.release().split(".");return Number(osRelease[0])>=10&&Number(osRelease[2])>=10586?Number(osRelease[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(sign=>sign in env)||"codeship"===env.CI_NAME?1:min;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("GITHUB_ACTIONS"in env)return 1;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const version=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return version>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)||"COLORTERM"in env?1:min}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")?forceColor=0:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=1),"FORCE_COLOR"in env&&(forceColor="true"===env.FORCE_COLOR?1:"false"===env.FORCE_COLOR?0:0===env.FORCE_COLOR.length?1:Math.min(parseInt(env.FORCE_COLOR,10),3)),module.exports={supportsColor:function(stream){return translateLevel(supportsColor(stream,stream&&stream.isTTY))},stdout:translateLevel(supportsColor(!0,tty.isatty(1))),stderr:translateLevel(supportsColor(!0,tty.isatty(2)))}},function(module,exports,__webpack_require__){"use strict";module.exports=(flag,argv=process.argv)=>{const prefix=flag.startsWith("-")?"":1===flag.length?"-":"--",position=argv.indexOf(prefix+flag),terminatorPosition=argv.indexOf("--");return-1!==position&&(-1===terminatorPosition||position<terminatorPosition)}},function(module,exports,__webpack_require__){"use strict";module.exports={stringReplaceAll:(string,substring,replacer)=>{let index=string.indexOf(substring);if(-1===index)return string;const substringLength=substring.length;let endIndex=0,returnValue="";do{returnValue+=string.substr(endIndex,index-endIndex)+substring+replacer,endIndex=index+substringLength,index=string.indexOf(substring,endIndex)}while(-1!==index);return returnValue+=string.substr(endIndex),returnValue},stringEncaseCRLFWithFirstIndex:(string,prefix,postfix,index)=>{let endIndex=0,returnValue="";do{const gotCR="\r"===string[index-1];returnValue+=string.substr(endIndex,(gotCR?index-1:index)-endIndex)+prefix+(gotCR?"\r\n":"\n")+postfix,endIndex=index+1,index=string.indexOf("\n",endIndex)}while(-1!==index);return returnValue+=string.substr(endIndex),returnValue}}},function(module,exports,__webpack_require__){"use strict";const TEMPLATE_REGEX=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,ESCAPES=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(c){const u="u"===c[0],bracket="{"===c[1];return u&&!bracket&&5===c.length||"x"===c[0]&&3===c.length?String.fromCharCode(parseInt(c.slice(1),16)):u&&bracket?String.fromCodePoint(parseInt(c.slice(2,-1),16)):ESCAPES.get(c)||c}function parseArguments(name,arguments_){const results=[],chunks=arguments_.trim().split(/\s*,\s*/g);let matches;for(const chunk of chunks){const number=Number(chunk);if(Number.isNaN(number)){if(!(matches=chunk.match(STRING_REGEX)))throw new Error(`Invalid Chalk template style argument: ${chunk} (in style '${name}')`);results.push(matches[2].replace(ESCAPE_REGEX,(m,escape,character)=>escape?unescape(escape):character))}else results.push(number)}return results}function parseStyle(style){STYLE_REGEX.lastIndex=0;const results=[];let matches;for(;null!==(matches=STYLE_REGEX.exec(style));){const name=matches[1];if(matches[2]){const args=parseArguments(name,matches[2]);results.push([name].concat(args))}else results.push([name])}return results}function buildStyle(chalk,styles){const enabled={};for(const layer of styles)for(const style of layer.styles)enabled[style[0]]=layer.inverse?null:style.slice(1);let current=chalk;for(const[styleName,styles]of Object.entries(enabled))if(Array.isArray(styles)){if(!(styleName in current))throw new Error("Unknown Chalk style: "+styleName);current=styles.length>0?current[styleName](...styles):current[styleName]}return current}module.exports=(chalk,temporary)=>{const styles=[],chunks=[];let chunk=[];if(temporary.replace(TEMPLATE_REGEX,(m,escapeCharacter,inverse,style,close,character)=>{if(escapeCharacter)chunk.push(unescape(escapeCharacter));else if(style){const string=chunk.join("");chunk=[],chunks.push(0===styles.length?string:buildStyle(chalk,styles)(string)),styles.push({inverse:inverse,styles:parseStyle(style)})}else if(close){if(0===styles.length)throw new Error("Found extraneous } in Chalk template literal");chunks.push(buildStyle(chalk,styles)(chunk.join(""))),chunk=[],styles.pop()}else chunk.push(character)}),chunks.push(chunk.join("")),styles.length>0){const errMessage=`Chalk template literal is missing ${styles.length} closing bracket${1===styles.length?"":"s"} (\`}\`)`;throw new Error(errMessage)}return chunks.join("")}},function(module,exports,__webpack_require__){!function(exports){"use strict";function isArray(obj){return null!==obj&&"[object Array]"===Object.prototype.toString.call(obj)}function isObject(obj){return null!==obj&&"[object Object]"===Object.prototype.toString.call(obj)}function strictDeepEqual(first,second){if(first===second)return!0;if(Object.prototype.toString.call(first)!==Object.prototype.toString.call(second))return!1;if(!0===isArray(first)){if(first.length!==second.length)return!1;for(var i=0;i<first.length;i++)if(!1===strictDeepEqual(first[i],second[i]))return!1;return!0}if(!0===isObject(first)){var keysSeen={};for(var key in first)if(hasOwnProperty.call(first,key)){if(!1===strictDeepEqual(first[key],second[key]))return!1;keysSeen[key]=!0}for(var key2 in second)if(hasOwnProperty.call(second,key2)&&!0!==keysSeen[key2])return!1;return!0}return!1}function isFalse(obj){if(""===obj||!1===obj||null===obj)return!0;if(isArray(obj)&&0===obj.length)return!0;if(isObject(obj)){for(var key in obj)if(obj.hasOwnProperty(key))return!1;return!0}return!1}var trimLeft;trimLeft="function"==typeof String.prototype.trimLeft?function(str){return str.trimLeft()}:function(str){return str.match(/^\s*(.*)/)[1]};var TYPE_NUMBER=0,TYPE_STRING=2,basicTokens={".":"Dot","*":"Star",",":"Comma",":":"Colon","{":"Lbrace","}":"Rbrace","]":"Rbracket","(":"Lparen",")":"Rparen","@":"Current"},operatorStartToken={"<":!0,">":!0,"=":!0,"!":!0},skipChars={" ":!0,"\t":!0,"\n":!0};function isNum(ch){return ch>="0"&&ch<="9"||"-"===ch}function Lexer(){}Lexer.prototype={tokenize:function(stream){var start,identifier,token,ch,tokens=[];for(this._current=0;this._current<stream.length;)if((ch=stream[this._current])>="a"&&ch<="z"||ch>="A"&&ch<="Z"||"_"===ch)start=this._current,identifier=this._consumeUnquotedIdentifier(stream),tokens.push({type:"UnquotedIdentifier",value:identifier,start:start});else if(void 0!==basicTokens[stream[this._current]])tokens.push({type:basicTokens[stream[this._current]],value:stream[this._current],start:this._current}),this._current++;else if(isNum(stream[this._current]))token=this._consumeNumber(stream),tokens.push(token);else if("["===stream[this._current])token=this._consumeLBracket(stream),tokens.push(token);else if('"'===stream[this._current])start=this._current,identifier=this._consumeQuotedIdentifier(stream),tokens.push({type:"QuotedIdentifier",value:identifier,start:start});else if("'"===stream[this._current])start=this._current,identifier=this._consumeRawStringLiteral(stream),tokens.push({type:"Literal",value:identifier,start:start});else if("`"===stream[this._current]){start=this._current;var literal=this._consumeLiteral(stream);tokens.push({type:"Literal",value:literal,start:start})}else if(void 0!==operatorStartToken[stream[this._current]])tokens.push(this._consumeOperator(stream));else if(void 0!==skipChars[stream[this._current]])this._current++;else if("&"===stream[this._current])start=this._current,this._current++,"&"===stream[this._current]?(this._current++,tokens.push({type:"And",value:"&&",start:start})):tokens.push({type:"Expref",value:"&",start:start});else{if("|"!==stream[this._current]){var error=new Error("Unknown character:"+stream[this._current]);throw error.name="LexerError",error}start=this._current,this._current++,"|"===stream[this._current]?(this._current++,tokens.push({type:"Or",value:"||",start:start})):tokens.push({type:"Pipe",value:"|",start:start})}return tokens},_consumeUnquotedIdentifier:function(stream){var ch,start=this._current;for(this._current++;this._current<stream.length&&((ch=stream[this._current])>="a"&&ch<="z"||ch>="A"&&ch<="Z"||ch>="0"&&ch<="9"||"_"===ch);)this._current++;return stream.slice(start,this._current)},_consumeQuotedIdentifier:function(stream){var start=this._current;this._current++;for(var maxLength=stream.length;'"'!==stream[this._current]&&this._current<maxLength;){var current=this._current;"\\"!==stream[current]||"\\"!==stream[current+1]&&'"'!==stream[current+1]?current++:current+=2,this._current=current}return this._current++,JSON.parse(stream.slice(start,this._current))},_consumeRawStringLiteral:function(stream){var start=this._current;this._current++;for(var maxLength=stream.length;"'"!==stream[this._current]&&this._current<maxLength;){var current=this._current;"\\"!==stream[current]||"\\"!==stream[current+1]&&"'"!==stream[current+1]?current++:current+=2,this._current=current}return this._current++,stream.slice(start+1,this._current-1).replace("\\'","'")},_consumeNumber:function(stream){var start=this._current;this._current++;for(var maxLength=stream.length;isNum(stream[this._current])&&this._current<maxLength;)this._current++;return{type:"Number",value:parseInt(stream.slice(start,this._current)),start:start}},_consumeLBracket:function(stream){var start=this._current;return this._current++,"?"===stream[this._current]?(this._current++,{type:"Filter",value:"[?",start:start}):"]"===stream[this._current]?(this._current++,{type:"Flatten",value:"[]",start:start}):{type:"Lbracket",value:"[",start:start}},_consumeOperator:function(stream){var start=this._current,startingChar=stream[start];return this._current++,"!"===startingChar?"="===stream[this._current]?(this._current++,{type:"NE",value:"!=",start:start}):{type:"Not",value:"!",start:start}:"<"===startingChar?"="===stream[this._current]?(this._current++,{type:"LTE",value:"<=",start:start}):{type:"LT",value:"<",start:start}:">"===startingChar?"="===stream[this._current]?(this._current++,{type:"GTE",value:">=",start:start}):{type:"GT",value:">",start:start}:"="===startingChar&&"="===stream[this._current]?(this._current++,{type:"EQ",value:"==",start:start}):void 0},_consumeLiteral:function(stream){this._current++;for(var literal,start=this._current,maxLength=stream.length;"`"!==stream[this._current]&&this._current<maxLength;){var current=this._current;"\\"!==stream[current]||"\\"!==stream[current+1]&&"`"!==stream[current+1]?current++:current+=2,this._current=current}var literalString=trimLeft(stream.slice(start,this._current));return literalString=literalString.replace("\\`","`"),literal=this._looksLikeJSON(literalString)?JSON.parse(literalString):JSON.parse('"'+literalString+'"'),this._current++,literal},_looksLikeJSON:function(literalString){if(""===literalString)return!1;if('[{"'.indexOf(literalString[0])>=0)return!0;if(["true","false","null"].indexOf(literalString)>=0)return!0;if(!("-0123456789".indexOf(literalString[0])>=0))return!1;try{return JSON.parse(literalString),!0}catch(ex){return!1}}};var bindingPower={};function Parser(){}function TreeInterpreter(runtime){this.runtime=runtime}function Runtime(interpreter){this._interpreter=interpreter,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[TYPE_NUMBER]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[TYPE_NUMBER]}]},contains:{_func:this._functionContains,_signature:[{types:[TYPE_STRING,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[TYPE_STRING]},{types:[TYPE_STRING]}]},floor:{_func:this._functionFloor,_signature:[{types:[TYPE_NUMBER]}]},length:{_func:this._functionLength,_signature:[{types:[TYPE_STRING,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[TYPE_STRING]},{types:[TYPE_STRING]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[TYPE_STRING]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[TYPE_STRING,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}bindingPower.EOF=0,bindingPower.UnquotedIdentifier=0,bindingPower.QuotedIdentifier=0,bindingPower.Rbracket=0,bindingPower.Rparen=0,bindingPower.Comma=0,bindingPower.Rbrace=0,bindingPower.Number=0,bindingPower.Current=0,bindingPower.Expref=0,bindingPower.Pipe=1,bindingPower.Or=2,bindingPower.And=3,bindingPower.EQ=5,bindingPower.GT=5,bindingPower.LT=5,bindingPower.GTE=5,bindingPower.LTE=5,bindingPower.NE=5,bindingPower.Flatten=9,bindingPower.Star=20,bindingPower.Filter=21,bindingPower.Dot=40,bindingPower.Not=45,bindingPower.Lbrace=50,bindingPower.Lbracket=55,bindingPower.Lparen=60,Parser.prototype={parse:function(expression){this._loadTokens(expression),this.index=0;var ast=this.expression(0);if("EOF"!==this._lookahead(0)){var t=this._lookaheadToken(0),error=new Error("Unexpected token type: "+t.type+", value: "+t.value);throw error.name="ParserError",error}return ast},_loadTokens:function(expression){var tokens=(new Lexer).tokenize(expression);tokens.push({type:"EOF",value:"",start:expression.length}),this.tokens=tokens},expression:function(rbp){var leftToken=this._lookaheadToken(0);this._advance();for(var left=this.nud(leftToken),currentToken=this._lookahead(0);rbp<bindingPower[currentToken];)this._advance(),left=this.led(currentToken,left),currentToken=this._lookahead(0);return left},_lookahead:function(number){return this.tokens[this.index+number].type},_lookaheadToken:function(number){return this.tokens[this.index+number]},_advance:function(){this.index++},nud:function(token){var right,expression;switch(token.type){case"Literal":return{type:"Literal",value:token.value};case"UnquotedIdentifier":return{type:"Field",name:token.value};case"QuotedIdentifier":var node={type:"Field",name:token.value};if("Lparen"===this._lookahead(0))throw new Error("Quoted identifier not allowed for function names.");return node;case"Not":return{type:"NotExpression",children:[right=this.expression(bindingPower.Not)]};case"Star":return right=null,{type:"ValueProjection",children:[{type:"Identity"},right="Rbracket"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(bindingPower.Star)]};case"Filter":return this.led(token.type,{type:"Identity"});case"Lbrace":return this._parseMultiselectHash();case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[{type:"Identity"}]},right=this._parseProjectionRHS(bindingPower.Flatten)]};case"Lbracket":return"Number"===this._lookahead(0)||"Colon"===this._lookahead(0)?(right=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},right)):"Star"===this._lookahead(0)&&"Rbracket"===this._lookahead(1)?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},right=this._parseProjectionRHS(bindingPower.Star)]}):this._parseMultiselectList();case"Current":return{type:"Current"};case"Expref":return{type:"ExpressionReference",children:[expression=this.expression(bindingPower.Expref)]};case"Lparen":for(var args=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(expression={type:"Current"},this._advance()):expression=this.expression(0),args.push(expression);return this._match("Rparen"),args[0];default:this._errorToken(token)}},led:function(tokenName,left){var right;switch(tokenName){case"Dot":var rbp=bindingPower.Dot;return"Star"!==this._lookahead(0)?{type:"Subexpression",children:[left,right=this._parseDotRHS(rbp)]}:(this._advance(),{type:"ValueProjection",children:[left,right=this._parseProjectionRHS(rbp)]});case"Pipe":return{type:"Pipe",children:[left,right=this.expression(bindingPower.Pipe)]};case"Or":return{type:"OrExpression",children:[left,right=this.expression(bindingPower.Or)]};case"And":return{type:"AndExpression",children:[left,right=this.expression(bindingPower.And)]};case"Lparen":for(var expression,name=left.name,args=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(expression={type:"Current"},this._advance()):expression=this.expression(0),"Comma"===this._lookahead(0)&&this._match("Comma"),args.push(expression);return this._match("Rparen"),{type:"Function",name:name,children:args};case"Filter":var condition=this.expression(0);return this._match("Rbracket"),{type:"FilterProjection",children:[left,right="Flatten"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(bindingPower.Filter),condition]};case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[left]},this._parseProjectionRHS(bindingPower.Flatten)]};case"EQ":case"NE":case"GT":case"GTE":case"LT":case"LTE":return this._parseComparator(left,tokenName);case"Lbracket":var token=this._lookaheadToken(0);return"Number"===token.type||"Colon"===token.type?(right=this._parseIndexExpression(),this._projectIfSlice(left,right)):(this._match("Star"),this._match("Rbracket"),{type:"Projection",children:[left,right=this._parseProjectionRHS(bindingPower.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(tokenType){if(this._lookahead(0)!==tokenType){var t=this._lookaheadToken(0),error=new Error("Expected "+tokenType+", got: "+t.type);throw error.name="ParserError",error}this._advance()},_errorToken:function(token){var error=new Error("Invalid token ("+token.type+'): "'+token.value+'"');throw error.name="ParserError",error},_parseIndexExpression:function(){if("Colon"===this._lookahead(0)||"Colon"===this._lookahead(1))return this._parseSliceExpression();var node={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match("Rbracket"),node},_projectIfSlice:function(left,right){var indexExpr={type:"IndexExpression",children:[left,right]};return"Slice"===right.type?{type:"Projection",children:[indexExpr,this._parseProjectionRHS(bindingPower.Star)]}:indexExpr},_parseSliceExpression:function(){for(var parts=[null,null,null],index=0,currentToken=this._lookahead(0);"Rbracket"!==currentToken&&index<3;){if("Colon"===currentToken)index++,this._advance();else{if("Number"!==currentToken){var t=this._lookahead(0),error=new Error("Syntax error, unexpected token: "+t.value+"("+t.type+")");throw error.name="Parsererror",error}parts[index]=this._lookaheadToken(0).value,this._advance()}currentToken=this._lookahead(0)}return this._match("Rbracket"),{type:"Slice",children:parts}},_parseComparator:function(left,comparator){return{type:"Comparator",name:comparator,children:[left,this.expression(bindingPower[comparator])]}},_parseDotRHS:function(rbp){var lookahead=this._lookahead(0);return["UnquotedIdentifier","QuotedIdentifier","Star"].indexOf(lookahead)>=0?this.expression(rbp):"Lbracket"===lookahead?(this._match("Lbracket"),this._parseMultiselectList()):"Lbrace"===lookahead?(this._match("Lbrace"),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(rbp){var right;if(bindingPower[this._lookahead(0)]<10)right={type:"Identity"};else if("Lbracket"===this._lookahead(0))right=this.expression(rbp);else if("Filter"===this._lookahead(0))right=this.expression(rbp);else{if("Dot"!==this._lookahead(0)){var t=this._lookaheadToken(0),error=new Error("Sytanx error, unexpected token: "+t.value+"("+t.type+")");throw error.name="ParserError",error}this._match("Dot"),right=this._parseDotRHS(rbp)}return right},_parseMultiselectList:function(){for(var expressions=[];"Rbracket"!==this._lookahead(0);){var expression=this.expression(0);if(expressions.push(expression),"Comma"===this._lookahead(0)&&(this._match("Comma"),"Rbracket"===this._lookahead(0)))throw new Error("Unexpected token Rbracket")}return this._match("Rbracket"),{type:"MultiSelectList",children:expressions}},_parseMultiselectHash:function(){for(var keyToken,keyName,node,pairs=[],identifierTypes=["UnquotedIdentifier","QuotedIdentifier"];;){if(keyToken=this._lookaheadToken(0),identifierTypes.indexOf(keyToken.type)<0)throw new Error("Expecting an identifier token, got: "+keyToken.type);if(keyName=keyToken.value,this._advance(),this._match("Colon"),node={type:"KeyValuePair",name:keyName,value:this.expression(0)},pairs.push(node),"Comma"===this._lookahead(0))this._match("Comma");else if("Rbrace"===this._lookahead(0)){this._match("Rbrace");break}}return{type:"MultiSelectHash",children:pairs}}},TreeInterpreter.prototype={search:function(node,value){return this.visit(node,value)},visit:function(node,value){var matched,current,result,first,second,field,left,collected,i;switch(node.type){case"Field":return null===value?null:isObject(value)?void 0===(field=value[node.name])?null:field:null;case"Subexpression":for(result=this.visit(node.children[0],value),i=1;i<node.children.length;i++)if(null===(result=this.visit(node.children[1],result)))return null;return result;case"IndexExpression":return left=this.visit(node.children[0],value),this.visit(node.children[1],left);case"Index":if(!isArray(value))return null;var index=node.value;return index<0&&(index=value.length+index),void 0===(result=value[index])&&(result=null),result;case"Slice":if(!isArray(value))return null;var sliceParams=node.children.slice(0),computed=this.computeSliceParams(value.length,sliceParams),start=computed[0],stop=computed[1],step=computed[2];if(result=[],step>0)for(i=start;i<stop;i+=step)result.push(value[i]);else for(i=start;i>stop;i+=step)result.push(value[i]);return result;case"Projection":var base=this.visit(node.children[0],value);if(!isArray(base))return null;for(collected=[],i=0;i<base.length;i++)null!==(current=this.visit(node.children[1],base[i]))&&collected.push(current);return collected;case"ValueProjection":if(!isObject(base=this.visit(node.children[0],value)))return null;collected=[];var values=function(obj){for(var keys=Object.keys(obj),values=[],i=0;i<keys.length;i++)values.push(obj[keys[i]]);return values}(base);for(i=0;i<values.length;i++)null!==(current=this.visit(node.children[1],values[i]))&&collected.push(current);return collected;case"FilterProjection":if(!isArray(base=this.visit(node.children[0],value)))return null;var filtered=[],finalResults=[];for(i=0;i<base.length;i++)isFalse(matched=this.visit(node.children[2],base[i]))||filtered.push(base[i]);for(var j=0;j<filtered.length;j++)null!==(current=this.visit(node.children[1],filtered[j]))&&finalResults.push(current);return finalResults;case"Comparator":switch(first=this.visit(node.children[0],value),second=this.visit(node.children[1],value),node.name){case"EQ":result=strictDeepEqual(first,second);break;case"NE":result=!strictDeepEqual(first,second);break;case"GT":result=first>second;break;case"GTE":result=first>=second;break;case"LT":result=first<second;break;case"LTE":result=first<=second;break;default:throw new Error("Unknown comparator: "+node.name)}return result;case"Flatten":var original=this.visit(node.children[0],value);if(!isArray(original))return null;var merged=[];for(i=0;i<original.length;i++)isArray(current=original[i])?merged.push.apply(merged,current):merged.push(current);return merged;case"Identity":return value;case"MultiSelectList":if(null===value)return null;for(collected=[],i=0;i<node.children.length;i++)collected.push(this.visit(node.children[i],value));return collected;case"MultiSelectHash":if(null===value)return null;var child;for(collected={},i=0;i<node.children.length;i++)collected[(child=node.children[i]).name]=this.visit(child.value,value);return collected;case"OrExpression":return isFalse(matched=this.visit(node.children[0],value))&&(matched=this.visit(node.children[1],value)),matched;case"AndExpression":return!0===isFalse(first=this.visit(node.children[0],value))?first:this.visit(node.children[1],value);case"NotExpression":return isFalse(first=this.visit(node.children[0],value));case"Literal":return node.value;case"Pipe":return left=this.visit(node.children[0],value),this.visit(node.children[1],left);case"Current":return value;case"Function":var resolvedArgs=[];for(i=0;i<node.children.length;i++)resolvedArgs.push(this.visit(node.children[i],value));return this.runtime.callFunction(node.name,resolvedArgs);case"ExpressionReference":var refNode=node.children[0];return refNode.jmespathType="Expref",refNode;default:throw new Error("Unknown node type: "+node.type)}},computeSliceParams:function(arrayLength,sliceParams){var start=sliceParams[0],stop=sliceParams[1],step=sliceParams[2],computed=[null,null,null];if(null===step)step=1;else if(0===step){var error=new Error("Invalid slice, step cannot be 0");throw error.name="RuntimeError",error}var stepValueNegative=step<0;return start=null===start?stepValueNegative?arrayLength-1:0:this.capSliceRange(arrayLength,start,step),stop=null===stop?stepValueNegative?-1:arrayLength:this.capSliceRange(arrayLength,stop,step),computed[0]=start,computed[1]=stop,computed[2]=step,computed},capSliceRange:function(arrayLength,actualValue,step){return actualValue<0?(actualValue+=arrayLength)<0&&(actualValue=step<0?-1:0):actualValue>=arrayLength&&(actualValue=step<0?arrayLength-1:arrayLength),actualValue}},Runtime.prototype={callFunction:function(name,resolvedArgs){var functionEntry=this.functionTable[name];if(void 0===functionEntry)throw new Error("Unknown function: "+name+"()");return this._validateArgs(name,resolvedArgs,functionEntry._signature),functionEntry._func.call(this,resolvedArgs)},_validateArgs:function(name,args,signature){var pluralized,currentSpec,actualType,typeMatched;if(signature[signature.length-1].variadic){if(args.length<signature.length)throw pluralized=1===signature.length?" argument":" arguments",new Error("ArgumentError: "+name+"() takes at least"+signature.length+pluralized+" but received "+args.length)}else if(args.length!==signature.length)throw pluralized=1===signature.length?" argument":" arguments",new Error("ArgumentError: "+name+"() takes "+signature.length+pluralized+" but received "+args.length);for(var i=0;i<signature.length;i++){typeMatched=!1,currentSpec=signature[i].types,actualType=this._getTypeName(args[i]);for(var j=0;j<currentSpec.length;j++)if(this._typeMatches(actualType,currentSpec[j],args[i])){typeMatched=!0;break}if(!typeMatched)throw new Error("TypeError: "+name+"() expected argument "+(i+1)+" to be type "+currentSpec+" but received type "+actualType+" instead.")}},_typeMatches:function(actual,expected,argValue){if(1===expected)return!0;if(9!==expected&&8!==expected&&3!==expected)return actual===expected;if(3===expected)return 3===actual;if(3===actual){var subtype;8===expected?subtype=TYPE_NUMBER:9===expected&&(subtype=TYPE_STRING);for(var i=0;i<argValue.length;i++)if(!this._typeMatches(this._getTypeName(argValue[i]),subtype,argValue[i]))return!1;return!0}},_getTypeName:function(obj){switch(Object.prototype.toString.call(obj)){case"[object String]":return TYPE_STRING;case"[object Number]":return TYPE_NUMBER;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return"Expref"===obj.jmespathType?6:4}},_functionStartsWith:function(resolvedArgs){return 0===resolvedArgs[0].lastIndexOf(resolvedArgs[1])},_functionEndsWith:function(resolvedArgs){var searchStr=resolvedArgs[0],suffix=resolvedArgs[1];return-1!==searchStr.indexOf(suffix,searchStr.length-suffix.length)},_functionReverse:function(resolvedArgs){if(this._getTypeName(resolvedArgs[0])===TYPE_STRING){for(var originalStr=resolvedArgs[0],reversedStr="",i=originalStr.length-1;i>=0;i--)reversedStr+=originalStr[i];return reversedStr}var reversedArray=resolvedArgs[0].slice(0);return reversedArray.reverse(),reversedArray},_functionAbs:function(resolvedArgs){return Math.abs(resolvedArgs[0])},_functionCeil:function(resolvedArgs){return Math.ceil(resolvedArgs[0])},_functionAvg:function(resolvedArgs){for(var sum=0,inputArray=resolvedArgs[0],i=0;i<inputArray.length;i++)sum+=inputArray[i];return sum/inputArray.length},_functionContains:function(resolvedArgs){return resolvedArgs[0].indexOf(resolvedArgs[1])>=0},_functionFloor:function(resolvedArgs){return Math.floor(resolvedArgs[0])},_functionLength:function(resolvedArgs){return isObject(resolvedArgs[0])?Object.keys(resolvedArgs[0]).length:resolvedArgs[0].length},_functionMap:function(resolvedArgs){for(var mapped=[],interpreter=this._interpreter,exprefNode=resolvedArgs[0],elements=resolvedArgs[1],i=0;i<elements.length;i++)mapped.push(interpreter.visit(exprefNode,elements[i]));return mapped},_functionMerge:function(resolvedArgs){for(var merged={},i=0;i<resolvedArgs.length;i++){var current=resolvedArgs[i];for(var key in current)merged[key]=current[key]}return merged},_functionMax:function(resolvedArgs){if(resolvedArgs[0].length>0){if(this._getTypeName(resolvedArgs[0][0])===TYPE_NUMBER)return Math.max.apply(Math,resolvedArgs[0]);for(var elements=resolvedArgs[0],maxElement=elements[0],i=1;i<elements.length;i++)maxElement.localeCompare(elements[i])<0&&(maxElement=elements[i]);return maxElement}return null},_functionMin:function(resolvedArgs){if(resolvedArgs[0].length>0){if(this._getTypeName(resolvedArgs[0][0])===TYPE_NUMBER)return Math.min.apply(Math,resolvedArgs[0]);for(var elements=resolvedArgs[0],minElement=elements[0],i=1;i<elements.length;i++)elements[i].localeCompare(minElement)<0&&(minElement=elements[i]);return minElement}return null},_functionSum:function(resolvedArgs){for(var sum=0,listToSum=resolvedArgs[0],i=0;i<listToSum.length;i++)sum+=listToSum[i];return sum},_functionType:function(resolvedArgs){switch(this._getTypeName(resolvedArgs[0])){case TYPE_NUMBER:return"number";case TYPE_STRING:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(resolvedArgs){return Object.keys(resolvedArgs[0])},_functionValues:function(resolvedArgs){for(var obj=resolvedArgs[0],keys=Object.keys(obj),values=[],i=0;i<keys.length;i++)values.push(obj[keys[i]]);return values},_functionJoin:function(resolvedArgs){var joinChar=resolvedArgs[0];return resolvedArgs[1].join(joinChar)},_functionToArray:function(resolvedArgs){return 3===this._getTypeName(resolvedArgs[0])?resolvedArgs[0]:[resolvedArgs[0]]},_functionToString:function(resolvedArgs){return this._getTypeName(resolvedArgs[0])===TYPE_STRING?resolvedArgs[0]:JSON.stringify(resolvedArgs[0])},_functionToNumber:function(resolvedArgs){var convertedValue,typeName=this._getTypeName(resolvedArgs[0]);return typeName===TYPE_NUMBER?resolvedArgs[0]:typeName!==TYPE_STRING||(convertedValue=+resolvedArgs[0],isNaN(convertedValue))?null:convertedValue},_functionNotNull:function(resolvedArgs){for(var i=0;i<resolvedArgs.length;i++)if(7!==this._getTypeName(resolvedArgs[i]))return resolvedArgs[i];return null},_functionSort:function(resolvedArgs){var sortedArray=resolvedArgs[0].slice(0);return sortedArray.sort(),sortedArray},_functionSortBy:function(resolvedArgs){var sortedArray=resolvedArgs[0].slice(0);if(0===sortedArray.length)return sortedArray;var interpreter=this._interpreter,exprefNode=resolvedArgs[1],requiredType=this._getTypeName(interpreter.visit(exprefNode,sortedArray[0]));if([TYPE_NUMBER,TYPE_STRING].indexOf(requiredType)<0)throw new Error("TypeError");for(var that=this,decorated=[],i=0;i<sortedArray.length;i++)decorated.push([i,sortedArray[i]]);decorated.sort((function(a,b){var exprA=interpreter.visit(exprefNode,a[1]),exprB=interpreter.visit(exprefNode,b[1]);if(that._getTypeName(exprA)!==requiredType)throw new Error("TypeError: expected "+requiredType+", received "+that._getTypeName(exprA));if(that._getTypeName(exprB)!==requiredType)throw new Error("TypeError: expected "+requiredType+", received "+that._getTypeName(exprB));return exprA>exprB?1:exprA<exprB?-1:a[0]-b[0]}));for(var j=0;j<decorated.length;j++)sortedArray[j]=decorated[j][1];return sortedArray},_functionMaxBy:function(resolvedArgs){for(var maxRecord,current,exprefNode=resolvedArgs[1],resolvedArray=resolvedArgs[0],keyFunction=this.createKeyFunction(exprefNode,[TYPE_NUMBER,TYPE_STRING]),maxNumber=-1/0,i=0;i<resolvedArray.length;i++)(current=keyFunction(resolvedArray[i]))>maxNumber&&(maxNumber=current,maxRecord=resolvedArray[i]);return maxRecord},_functionMinBy:function(resolvedArgs){for(var minRecord,current,exprefNode=resolvedArgs[1],resolvedArray=resolvedArgs[0],keyFunction=this.createKeyFunction(exprefNode,[TYPE_NUMBER,TYPE_STRING]),minNumber=1/0,i=0;i<resolvedArray.length;i++)(current=keyFunction(resolvedArray[i]))<minNumber&&(minNumber=current,minRecord=resolvedArray[i]);return minRecord},createKeyFunction:function(exprefNode,allowedTypes){var that=this,interpreter=this._interpreter;return function(x){var current=interpreter.visit(exprefNode,x);if(allowedTypes.indexOf(that._getTypeName(current))<0){var msg="TypeError: expected one of "+allowedTypes+", received "+that._getTypeName(current);throw new Error(msg)}return current}}},exports.tokenize=function(stream){return(new Lexer).tokenize(stream)},exports.compile=function(stream){return(new Parser).parse(stream)},exports.search=function(data,expression){var parser=new Parser,runtime=new Runtime,interpreter=new TreeInterpreter(runtime);runtime._interpreter=interpreter;var node=parser.parse(expression);return interpreter.search(node,data)},exports.strictDeepEqual=strictDeepEqual}(exports)},function(module,exports,__webpack_require__){"use strict";const dateformat=__webpack_require__(163),stringifySafe=__webpack_require__(85),defaultColorizer=__webpack_require__(89)(),{DATE_FORMAT:DATE_FORMAT,ERROR_LIKE_KEYS:ERROR_LIKE_KEYS,MESSAGE_KEY:MESSAGE_KEY,LEVEL_KEY:LEVEL_KEY,TIMESTAMP_KEY:TIMESTAMP_KEY,LOGGER_KEYS:LOGGER_KEYS}=__webpack_require__(60);function formatTime(epoch,translateTime=!1){if(!1===translateTime)return epoch;const instant=new Date(epoch);if(!0===translateTime)return dateformat(instant,"UTC:"+DATE_FORMAT);const upperFormat=translateTime.toUpperCase();if("SYS:STANDARD"===upperFormat)return dateformat(instant,DATE_FORMAT);const prefix=upperFormat.substr(0,4);return dateformat(instant,"SYS:"===prefix||"UTC:"===prefix?"UTC:"===prefix?translateTime:translateTime.slice(4):"UTC:"+translateTime)}function isObject(input){return"[object Object]"===Object.prototype.toString.apply(input)}function joinLinesWithIndentation({input:input,ident:ident="    ",eol:eol="\n"}){const lines=input.split(/\r?\n/);for(var i=1;i<lines.length;i+=1)lines[i]=ident+lines[i];return lines.join(eol)}function prettifyObject({input:input,ident:ident="    ",eol:eol="\n",skipKeys:skipKeys=[],customPrettifiers:customPrettifiers={},errorLikeKeys:errorLikeKeys=ERROR_LIKE_KEYS,excludeLoggerKeys:excludeLoggerKeys=!0}){const objectKeys=Object.keys(input),keysToIgnore=[].concat(skipKeys);!0===excludeLoggerKeys&&Array.prototype.push.apply(keysToIgnore,LOGGER_KEYS);let result="";const keysToIterate=objectKeys.filter(k=>!1===keysToIgnore.includes(k));for(var i=0;i<objectKeys.length;i+=1){const keyName=keysToIterate[i],keyValue=input[keyName];if(void 0===keyValue)continue;let lines;if(lines="function"==typeof customPrettifiers[keyName]?customPrettifiers[keyName](keyValue,keyName,input):stringifySafe(keyValue,null,2),void 0===lines)continue;const joinedLines=joinLinesWithIndentation({input:lines,ident:ident,eol:eol});if(!0===errorLikeKeys.includes(keyName)){const splitLines=`${ident}${keyName}: ${joinedLines}${eol}`.split(eol);for(var j=0;j<splitLines.length;j+=1){0!==j&&(result+=eol);const line=splitLines[j];if(/^\s*"stack"/.test(line)){const matches=/^(\s*"stack":)\s*(".*"),?$/.exec(line);if(matches&&3===matches.length){const indentSize=/^\s*/.exec(line)[0].length+4,indentation=" ".repeat(indentSize),stackMessage=matches[2];result+=matches[1]+eol+indentation+JSON.parse(stackMessage).replace(/\n/g,eol+indentation)}}else result+=line}}else result+=`${ident}${keyName}: ${joinedLines}${eol}`}return result}module.exports={isObject:isObject,prettifyErrorLog:function({log:log,messageKey:messageKey=MESSAGE_KEY,ident:ident="    ",eol:eol="\n",errorLikeKeys:errorLikeKeys=ERROR_LIKE_KEYS,errorProperties:errorProperties=[]}){const joinedLines=joinLinesWithIndentation({input:log.stack,ident:ident,eol:eol});let result=`${ident}${joinedLines}${eol}`;if(errorProperties.length>0){const excludeProperties=LOGGER_KEYS.concat(messageKey,"type","stack");let propertiesToPrint;propertiesToPrint="*"===errorProperties[0]?Object.keys(log).filter(k=>!1===excludeProperties.includes(k)):errorProperties.filter(k=>!1===excludeProperties.includes(k));for(var i=0;i<propertiesToPrint.length;i+=1){const key=propertiesToPrint[i];if(key in log!=!1)if(isObject(log[key])){const prettifiedObject=prettifyObject({input:log[key],errorLikeKeys:errorLikeKeys,excludeLoggerKeys:!1,eol:eol,ident:ident});result=`${result}${key}: {${eol}${prettifiedObject}}${eol}`}else result=`${result}${key}: ${log[key]}${eol}`}}return result},prettifyLevel:function({log:log,colorizer:colorizer=defaultColorizer,levelKey:levelKey=LEVEL_KEY}){return levelKey in log==!1?void 0:colorizer(log[levelKey])},prettifyMessage:function({log:log,messageFormat:messageFormat,messageKey:messageKey=MESSAGE_KEY,colorizer:colorizer=defaultColorizer}){if(messageFormat){const message=String(messageFormat).replace(/{([^{}]+)}/g,(function(match,p1){return p1&&log[p1]?log[p1]:""}));return colorizer.message(message)}return messageKey in log==!1||"string"!=typeof log[messageKey]?void 0:colorizer.message(log[messageKey])},prettifyMetadata:function({log:log}){let line="";(log.name||log.pid||log.hostname)&&(line+="(",log.name&&(line+=log.name),log.name&&log.pid?line+="/"+log.pid:log.pid&&(line+=log.pid),log.hostname&&(line+=`${"("===line?"on":" on"} ${log.hostname}`),line+=")");log.caller&&(line+=`${""===line?"":" "}<${log.caller}>`);return""===line?void 0:line},prettifyObject:prettifyObject,prettifyTime:function({log:log,timestampKey:timestampKey=TIMESTAMP_KEY,translateFormat:translateFormat}){let time=null;timestampKey in log?time=log[timestampKey]:"timestamp"in log&&(time=log.timestamp);if(null===time)return;if(translateFormat)return"["+formatTime(time,translateFormat)+"]";return`[${time}]`}},module.exports.internals={formatTime:formatTime,joinLinesWithIndentation:joinLinesWithIndentation}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){"use strict";var token,timezone,timezoneClip,dateFormat=(token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,function(date,mask,utc,gmt){if(1!==arguments.length||"string"!==kindOf(date)||/\d/.test(date)||(mask=date,date=void 0),(date=date||new Date)instanceof Date||(date=new Date(date)),isNaN(date))throw TypeError("Invalid date");var maskSlice=(mask=String(dateFormat.masks[mask]||mask||dateFormat.masks.default)).slice(0,4);"UTC:"!==maskSlice&&"GMT:"!==maskSlice||(mask=mask.slice(4),utc=!0,"GMT:"===maskSlice&&(gmt=!0));var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),W=getWeek(date),N=getDayOfWeek(date),flags={d:d,dd:pad(d),ddd:dateFormat.i18n.dayNames[D],dddd:dateFormat.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dateFormat.i18n.monthNames[m],mmmm:dateFormat.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(Math.round(L/10)),t:H<12?dateFormat.i18n.timeNames[0]:dateFormat.i18n.timeNames[1],tt:H<12?dateFormat.i18n.timeNames[2]:dateFormat.i18n.timeNames[3],T:H<12?dateFormat.i18n.timeNames[4]:dateFormat.i18n.timeNames[5],TT:H<12?dateFormat.i18n.timeNames[6]:dateFormat.i18n.timeNames[7],Z:gmt?"GMT":utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:W,N:N};return mask.replace(token,(function(match){return match in flags?flags[match]:match.slice(1,match.length-1)}))});function pad(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val}function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/6048e5;return 1+Math.floor(weekDiff)}function getDayOfWeek(date){var dow=date.getDay();return 0===dow&&(dow=7),dow}function kindOf(val){return null===val?"null":void 0===val?"undefined":"object"!=typeof val?typeof val:Array.isArray(val)?"array":{}.toString.call(val).slice(8,-1).toLowerCase()}dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return dateFormat}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},function(module,exports,__webpack_require__){"use strict";const internals_suspectRx=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;exports.parse=function(text,...args){const firstOptions="object"==typeof args[0]&&args[0],reviver=args.length>1||!firstOptions?args[0]:void 0,options=args.length>1&&args[1]||firstOptions||{},obj=JSON.parse(text,reviver);return"ignore"===options.protoAction?obj:obj&&"object"==typeof obj&&text.match(internals_suspectRx)?(exports.scan(obj,options),obj):obj},exports.scan=function(obj,options={}){let next=[obj];for(;next.length;){const nodes=next;next=[];for(const node of nodes){if(Object.prototype.hasOwnProperty.call(node,"__proto__")){if("remove"!==options.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete node.__proto__}for(const key in node){const value=node[key];value&&"object"==typeof value&&next.push(node[key])}}}},exports.safeParse=function(text,reviver){try{return exports.parse(text,reviver)}catch(ignoreError){return null}}},function(module){module.exports=JSON.parse('{"name":"pino","version":"6.5.0","description":"super fast, all natural json logger","main":"pino.js","browser":"./browser.js","files":["pino.js","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],"scripts":{"docs":"docsify serve","browser-test":"airtap --local 8080 test/browser*test.js","test":"standard | snazzy && tap --100 test/*test.js","cov-ui":"tap --coverage-report=html test/*test.js","bench":"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-object":"node benchmarks/utils/runbench object","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-formatters":"node benchmarks/utils/runbench formatters","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},"bin":{"pino":"./bin.js"},"precommit":"test","repository":{"type":"git","url":"git+https://github.com/pinojs/pino.git"},"keywords":["fast","logger","stream","json"],"author":"Matteo Collina <hello@matteocollina.com>","contributors":["David Mark Clements <huperekchuno@googlemail.com>","James Sumners <james.sumners@gmail.com>","Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)"],"license":"MIT","bugs":{"url":"https://github.com/pinojs/pino/issues"},"homepage":"http://getpino.io","devDependencies":{"airtap":"2.0.2","benchmark":"^2.1.4","bole":"^3.0.2","bunyan":"^1.8.12","docsify-cli":"^4.4.0","execa":"^1.0.0","fastbench":"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1","log":"^5.0.0","loglevel":"^1.6.7","pino-pretty":"^4.0.0","pre-commit":"^1.2.2","proxyquire":"^2.1.3","pump":"^3.0.0","semver":"^6.3.0","snazzy":"^8.0.0","split2":"^3.1.1","standard":"^14.3.3","steed":"^1.1.3","strip-ansi":"^6.0.0","tap":"^14.10.7","tape":"^4.13.2","through2":"^3.0.1","winston":"^3.2.1"},"dependencies":{"fast-redact":"^2.0.0","fast-safe-stringify":"^2.0.7","flatstr":"^1.0.12","pino-std-serializers":"^2.4.2","quick-format-unescaped":"^4.0.1","sonic-boom":"^1.0.0"}}')},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const factory_1=__importDefault(__webpack_require__(80));exports.default=factory_1.default()},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});const mkdir=__importStar(__webpack_require__(168));exports.default=mkdir},function(module,exports,__webpack_require__){"use strict";const fs=__webpack_require__(6),path=__webpack_require__(9),{promisify:promisify}=__webpack_require__(22),useNativeRecursiveOption=__webpack_require__(169).satisfies(process.version,">=10.12.0"),checkPath=pth=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(pth.replace(path.parse(pth).root,""))){const error=new Error("Path contains invalid characters: "+pth);throw error.code="EINVAL",error}}},processOptions=options=>({...{mode:511,fs:fs},...options}),permissionError=pth=>{const error=new Error(`operation not permitted, mkdir '${pth}'`);return error.code="EPERM",error.errno=-4048,error.path=pth,error.syscall="mkdir",error};module.exports=async(input,options)=>{checkPath(input),options=processOptions(options);const mkdir=promisify(options.fs.mkdir),stat=promisify(options.fs.stat);if(useNativeRecursiveOption&&options.fs.mkdir===fs.mkdir){const pth=path.resolve(input);return await mkdir(pth,{mode:options.mode,recursive:!0}),pth}const make=async pth=>{try{return await mkdir(pth,options.mode),pth}catch(error){if("EPERM"===error.code)throw error;if("ENOENT"===error.code){if(path.dirname(pth)===pth)throw permissionError(pth);if(error.message.includes("null bytes"))throw error;return await make(path.dirname(pth)),make(pth)}try{if(!(await stat(pth)).isDirectory())throw new Error("The path is not a directory")}catch(_){throw error}return pth}};return make(path.resolve(input))},module.exports.sync=(input,options)=>{if(checkPath(input),options=processOptions(options),useNativeRecursiveOption&&options.fs.mkdirSync===fs.mkdirSync){const pth=path.resolve(input);return fs.mkdirSync(pth,{mode:options.mode,recursive:!0}),pth}const make=pth=>{try{options.fs.mkdirSync(pth,options.mode)}catch(error){if("EPERM"===error.code)throw error;if("ENOENT"===error.code){if(path.dirname(pth)===pth)throw permissionError(pth);if(error.message.includes("null bytes"))throw error;return make(path.dirname(pth)),make(pth)}try{if(!options.fs.statSync(pth).isDirectory())throw new Error("The path is not a directory")}catch(_){throw error}}return pth};return make(path.resolve(input))}},function(module,exports){var debug;exports=module.exports=SemVer,debug="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("SEMVER"),console.log.apply(console,args)}:function(){},exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991,re=exports.re=[],src=exports.src=[],t=exports.tokens={},R=0;function tok(n){t[n]=R++}tok("NUMERICIDENTIFIER"),src[t.NUMERICIDENTIFIER]="0|[1-9]\\d*",tok("NUMERICIDENTIFIERLOOSE"),src[t.NUMERICIDENTIFIERLOOSE]="[0-9]+",tok("NONNUMERICIDENTIFIER"),src[t.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",tok("MAINVERSION"),src[t.MAINVERSION]="("+src[t.NUMERICIDENTIFIER]+")\\.("+src[t.NUMERICIDENTIFIER]+")\\.("+src[t.NUMERICIDENTIFIER]+")",tok("MAINVERSIONLOOSE"),src[t.MAINVERSIONLOOSE]="("+src[t.NUMERICIDENTIFIERLOOSE]+")\\.("+src[t.NUMERICIDENTIFIERLOOSE]+")\\.("+src[t.NUMERICIDENTIFIERLOOSE]+")",tok("PRERELEASEIDENTIFIER"),src[t.PRERELEASEIDENTIFIER]="(?:"+src[t.NUMERICIDENTIFIER]+"|"+src[t.NONNUMERICIDENTIFIER]+")",tok("PRERELEASEIDENTIFIERLOOSE"),src[t.PRERELEASEIDENTIFIERLOOSE]="(?:"+src[t.NUMERICIDENTIFIERLOOSE]+"|"+src[t.NONNUMERICIDENTIFIER]+")",tok("PRERELEASE"),src[t.PRERELEASE]="(?:-("+src[t.PRERELEASEIDENTIFIER]+"(?:\\."+src[t.PRERELEASEIDENTIFIER]+")*))",tok("PRERELEASELOOSE"),src[t.PRERELEASELOOSE]="(?:-?("+src[t.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[t.PRERELEASEIDENTIFIERLOOSE]+")*))",tok("BUILDIDENTIFIER"),src[t.BUILDIDENTIFIER]="[0-9A-Za-z-]+",tok("BUILD"),src[t.BUILD]="(?:\\+("+src[t.BUILDIDENTIFIER]+"(?:\\."+src[t.BUILDIDENTIFIER]+")*))",tok("FULL"),tok("FULLPLAIN"),src[t.FULLPLAIN]="v?"+src[t.MAINVERSION]+src[t.PRERELEASE]+"?"+src[t.BUILD]+"?",src[t.FULL]="^"+src[t.FULLPLAIN]+"$",tok("LOOSEPLAIN"),src[t.LOOSEPLAIN]="[v=\\s]*"+src[t.MAINVERSIONLOOSE]+src[t.PRERELEASELOOSE]+"?"+src[t.BUILD]+"?",tok("LOOSE"),src[t.LOOSE]="^"+src[t.LOOSEPLAIN]+"$",tok("GTLT"),src[t.GTLT]="((?:<|>)?=?)",tok("XRANGEIDENTIFIERLOOSE"),src[t.XRANGEIDENTIFIERLOOSE]=src[t.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",tok("XRANGEIDENTIFIER"),src[t.XRANGEIDENTIFIER]=src[t.NUMERICIDENTIFIER]+"|x|X|\\*",tok("XRANGEPLAIN"),src[t.XRANGEPLAIN]="[v=\\s]*("+src[t.XRANGEIDENTIFIER]+")(?:\\.("+src[t.XRANGEIDENTIFIER]+")(?:\\.("+src[t.XRANGEIDENTIFIER]+")(?:"+src[t.PRERELEASE]+")?"+src[t.BUILD]+"?)?)?",tok("XRANGEPLAINLOOSE"),src[t.XRANGEPLAINLOOSE]="[v=\\s]*("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:"+src[t.PRERELEASELOOSE]+")?"+src[t.BUILD]+"?)?)?",tok("XRANGE"),src[t.XRANGE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAIN]+"$",tok("XRANGELOOSE"),src[t.XRANGELOOSE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAINLOOSE]+"$",tok("COERCE"),src[t.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",tok("COERCERTL"),re[t.COERCERTL]=new RegExp(src[t.COERCE],"g"),tok("LONETILDE"),src[t.LONETILDE]="(?:~>?)",tok("TILDETRIM"),src[t.TILDETRIM]="(\\s*)"+src[t.LONETILDE]+"\\s+",re[t.TILDETRIM]=new RegExp(src[t.TILDETRIM],"g");tok("TILDE"),src[t.TILDE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAIN]+"$",tok("TILDELOOSE"),src[t.TILDELOOSE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAINLOOSE]+"$",tok("LONECARET"),src[t.LONECARET]="(?:\\^)",tok("CARETTRIM"),src[t.CARETTRIM]="(\\s*)"+src[t.LONECARET]+"\\s+",re[t.CARETTRIM]=new RegExp(src[t.CARETTRIM],"g");tok("CARET"),src[t.CARET]="^"+src[t.LONECARET]+src[t.XRANGEPLAIN]+"$",tok("CARETLOOSE"),src[t.CARETLOOSE]="^"+src[t.LONECARET]+src[t.XRANGEPLAINLOOSE]+"$",tok("COMPARATORLOOSE"),src[t.COMPARATORLOOSE]="^"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+")$|^$",tok("COMPARATOR"),src[t.COMPARATOR]="^"+src[t.GTLT]+"\\s*("+src[t.FULLPLAIN]+")$|^$",tok("COMPARATORTRIM"),src[t.COMPARATORTRIM]="(\\s*)"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+"|"+src[t.XRANGEPLAIN]+")",re[t.COMPARATORTRIM]=new RegExp(src[t.COMPARATORTRIM],"g");tok("HYPHENRANGE"),src[t.HYPHENRANGE]="^\\s*("+src[t.XRANGEPLAIN]+")\\s+-\\s+("+src[t.XRANGEPLAIN]+")\\s*$",tok("HYPHENRANGELOOSE"),src[t.HYPHENRANGELOOSE]="^\\s*("+src[t.XRANGEPLAINLOOSE]+")\\s+-\\s+("+src[t.XRANGEPLAINLOOSE]+")\\s*$",tok("STAR"),src[t.STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++)debug(i,src[i]),re[i]||(re[i]=new RegExp(src[i]));function parse(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer)return version;if("string"!=typeof version)return null;if(version.length>256)return null;if(!(options.loose?re[t.LOOSE]:re[t.FULL]).test(version))return null;try{return new SemVer(version,options)}catch(er){return null}}function SemVer(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer){if(version.loose===options.loose)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: "+version);if(version.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof SemVer))return new SemVer(version,options);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose;var m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m)throw new TypeError("Invalid Version: "+version);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map((function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id})):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}exports.parse=parse,exports.valid=function(version,options){var v=parse(version,options);return v?v.version:null},exports.clean=function(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null},exports.SemVer=SemVer,SemVer.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},SemVer.prototype.toString=function(){return this.version},SemVer.prototype.compare=function(other){return debug("SemVer.compare",this.version,this.options,other),other instanceof SemVer||(other=new SemVer(other,this.options)),this.compareMain(other)||this.comparePre(other)},SemVer.prototype.compareMain=function(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)},SemVer.prototype.comparePre=function(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;var i=0;do{var a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.compareBuild=function(other){other instanceof SemVer||(other=new SemVer(other,this.options));var i=0;do{var a=this.build[i],b=other.build[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.inc=function(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(this.prerelease[0]===identifier?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: "+release)}return this.format(),this.raw=this.version,this},exports.inc=function(version,release,loose,identifier){"string"==typeof loose&&(identifier=loose,loose=void 0);try{return new SemVer(version,loose).inc(release,identifier).version}catch(er){return null}},exports.diff=function(version1,version2){if(eq(version1,version2))return null;var v1=parse(version1),v2=parse(version2),prefix="";if(v1.prerelease.length||v2.prerelease.length){prefix="pre";var defaultResult="prerelease"}for(var key in v1)if(("major"===key||"minor"===key||"patch"===key)&&v1[key]!==v2[key])return prefix+key;return defaultResult},exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1}function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose))}function gt(a,b,loose){return compare(a,b,loose)>0}function lt(a,b,loose){return compare(a,b,loose)<0}function eq(a,b,loose){return 0===compare(a,b,loose)}function neq(a,b,loose){return 0!==compare(a,b,loose)}function gte(a,b,loose){return compare(a,b,loose)>=0}function lte(a,b,loose){return compare(a,b,loose)<=0}function cmp(a,op,b,loose){switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}function Comparator(comp,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}if(!(this instanceof Comparator))return new Comparator(comp,options);debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}exports.rcompareIdentifiers=function(a,b){return compareIdentifiers(b,a)},exports.major=function(a,loose){return new SemVer(a,loose).major},exports.minor=function(a,loose){return new SemVer(a,loose).minor},exports.patch=function(a,loose){return new SemVer(a,loose).patch},exports.compare=compare,exports.compareLoose=function(a,b){return compare(a,b,!0)},exports.compareBuild=function(a,b,loose){var versionA=new SemVer(a,loose),versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)},exports.rcompare=function(a,b,loose){return compare(b,a,loose)},exports.sort=function(list,loose){return list.sort((function(a,b){return exports.compareBuild(a,b,loose)}))},exports.rsort=function(list,loose){return list.sort((function(a,b){return exports.compareBuild(b,a,loose)}))},exports.gt=gt,exports.lt=lt,exports.eq=eq,exports.neq=neq,exports.gte=gte,exports.lte=lte,exports.cmp=cmp,exports.Comparator=Comparator;var ANY={};function Range(range,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return new Range(range.value,options);if(!(this instanceof Range))return new Range(range,options);if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range,this.set=range.split(/\s*\|\|\s*/).map((function(range){return this.parseRange(range.trim())}),this).filter((function(c){return c.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+range);this.format()}function isSatisfiable(comparators,options){for(var result=!0,remainingComparators=comparators.slice(),testComparator=remainingComparators.pop();result&&remainingComparators.length;)result=remainingComparators.every((function(otherComparator){return testComparator.intersects(otherComparator,options)})),testComparator=remainingComparators.pop();return result}function isX(id){return!id||"x"===id.toLowerCase()||"*"===id}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){return((from=isX(fM)?"":isX(fm)?">="+fM+".0.0":isX(fp)?">="+fM+"."+fm+".0":">="+from)+" "+(to=isX(tM)?"":isX(tm)?"<"+(+tM+1)+".0.0":isX(tp)?"<"+tM+"."+(+tm+1)+".0":tpr?"<="+tM+"."+tm+"."+tp+"-"+tpr:"<="+to)).trim()}function testSet(set,version,options){for(var i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++)if(debug(set[i].semver),set[i].semver!==ANY&&set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0}function satisfies(version,range,options){try{range=new Range(range,options)}catch(er){return!1}return range.test(version)}function outside(version,range,hilo,options){var gtfn,ltefn,ltfn,comp,ecomp;switch(version=new SemVer(version,options),range=new Range(range,options),hilo){case">":gtfn=gt,ltefn=lte,ltfn=lt,comp=">",ecomp=">=";break;case"<":gtfn=lt,ltefn=gte,ltfn=gt,comp="<",ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options))return!1;for(var i=0;i<range.set.length;++i){var comparators=range.set[i],high=null,low=null;if(comparators.forEach((function(comparator){comparator.semver===ANY&&(comparator=new Comparator(">=0.0.0")),high=high||comparator,low=low||comparator,gtfn(comparator.semver,high.semver,options)?high=comparator:ltfn(comparator.semver,low.semver,options)&&(low=comparator)})),high.operator===comp||high.operator===ecomp)return!1;if((!low.operator||low.operator===comp)&&ltefn(version,low.semver))return!1;if(low.operator===ecomp&&ltfn(version,low.semver))return!1}return!0}Comparator.prototype.parse=function(comp){var r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],m=comp.match(r);if(!m)throw new TypeError("Invalid comparator: "+comp);this.operator=void 0!==m[1]?m[1]:"","="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY},Comparator.prototype.toString=function(){return this.value},Comparator.prototype.test=function(version){if(debug("Comparator.test",version,this.options.loose),this.semver===ANY||version===ANY)return!0;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}return cmp(version,this.operator,this.semver,this.options)},Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");var rangeTmp;if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),""===this.operator)return""===this.value||(rangeTmp=new Range(comp.value,options),satisfies(this.value,rangeTmp,options));if(""===comp.operator)return""===comp.value||(rangeTmp=new Range(this.value,options),satisfies(comp.semver,rangeTmp,options));var sameDirectionIncreasing=!(">="!==this.operator&&">"!==this.operator||">="!==comp.operator&&">"!==comp.operator),sameDirectionDecreasing=!("<="!==this.operator&&"<"!==this.operator||"<="!==comp.operator&&"<"!==comp.operator),sameSemVer=this.semver.version===comp.semver.version,differentDirectionsInclusive=!(">="!==this.operator&&"<="!==this.operator||">="!==comp.operator&&"<="!==comp.operator),oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(">="===this.operator||">"===this.operator)&&("<="===comp.operator||"<"===comp.operator),oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&("<="===this.operator||"<"===this.operator)&&(">="===comp.operator||">"===comp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan},exports.Range=Range,Range.prototype.format=function(){return this.range=this.set.map((function(comps){return comps.join(" ").trim()})).join("||").trim(),this.range},Range.prototype.toString=function(){return this.range},Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace),debug("hyphen replace",range),range=range.replace(re[t.COMPARATORTRIM],"$1$2$3"),debug("comparator trim",range,re[t.COMPARATORTRIM]),range=(range=(range=range.replace(re[t.TILDETRIM],"$1~")).replace(re[t.CARETTRIM],"$1^")).split(/\s+/).join(" ");var compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],set=range.split(" ").map((function(comp){return function(comp,options){return debug("comp",comp,options),comp=function(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function(comp,options){debug("caret",comp,options);var r=options.loose?re[t.CARETLOOSE]:re[t.CARET];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret="0"===M?">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":">="+M+"."+m+".0 <"+(+M+1)+".0.0":pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+"-"+pr+" <"+(+M+1)+".0.0"):(debug("no pr"),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+" <"+(+M+1)+".0.0"),debug("caret return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("caret",comp),comp=function(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function(comp,options){var r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":pr?(debug("replaceTilde pr",pr),ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"):ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0",debug("tilde return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("tildes",comp),comp=function(comp,options){return debug("replaceXRanges",comp,options),comp.split(/\s+/).map((function(comp){return function(comp,options){comp=comp.trim();var r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M),xm=xM||isX(m),xp=xm||isX(p),anyX=xp;return"="===gtlt&&anyX&&(gtlt=""),pr=options.includePrerelease?"-0":"",xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0-0":"*":gtlt&&anyX?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),ret=gtlt+M+"."+m+"."+p+pr):xm?ret=">="+M+".0.0"+pr+" <"+(+M+1)+".0.0"+pr:xp&&(ret=">="+M+"."+m+".0"+pr+" <"+M+"."+(+m+1)+".0"+pr),debug("xRange return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("xrange",comp),comp=function(comp,options){return debug("replaceStars",comp,options),comp.trim().replace(re[t.STAR],"")}(comp,options),debug("stars",comp),comp}(comp,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(set=set.filter((function(comp){return!!comp.match(compRe)}))),set=set.map((function(comp){return new Comparator(comp,this.options)}),this)},Range.prototype.intersects=function(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some((function(thisComparators){return isSatisfiable(thisComparators,options)&&range.set.some((function(rangeComparators){return isSatisfiable(rangeComparators,options)&&thisComparators.every((function(thisComparator){return rangeComparators.every((function(rangeComparator){return thisComparator.intersects(rangeComparator,options)}))}))}))}))},exports.toComparators=function(range,options){return new Range(range,options).set.map((function(comp){return comp.map((function(c){return c.value})).join(" ").trim().split(" ")}))},Range.prototype.test=function(version){if(!version)return!1;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}for(var i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1},exports.satisfies=satisfies,exports.maxSatisfying=function(versions,range,options){var max=null,maxSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(max&&-1!==maxSV.compare(v)||(maxSV=new SemVer(max=v,options)))})),max},exports.minSatisfying=function(versions,range,options){var min=null,minSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(min&&1!==minSV.compare(v)||(minSV=new SemVer(min=v,options)))})),min},exports.minVersion=function(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver))return minver;if(minver=new SemVer("0.0.0-0"),range.test(minver))return minver;minver=null;for(var i=0;i<range.set.length;++i){range.set[i].forEach((function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":0===compver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw=compver.format();case"":case">=":minver&&!gt(minver,compver)||(minver=compver);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}}))}if(minver&&range.test(minver))return minver;return null},exports.validRange=function(range,options){try{return new Range(range,options).range||"*"}catch(er){return null}},exports.ltr=function(version,range,options){return outside(version,range,"<",options)},exports.gtr=function(version,range,options){return outside(version,range,">",options)},exports.outside=outside,exports.prerelease=function(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null},exports.intersects=function(r1,r2,options){return r1=new Range(r1,options),r2=new Range(r2,options),r1.intersects(r2)},exports.coerce=function(version,options){if(version instanceof SemVer)return version;"number"==typeof version&&(version=String(version));if("string"!=typeof version)return null;var match=null;if((options=options||{}).rtl){for(var next;(next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length);)match&&next.index+next[0].length===match.index+match[0].length||(match=next),re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length;re[t.COERCERTL].lastIndex=-1}else match=version.match(re[t.COERCE]);if(null===match)return null;return parse(match[2]+"."+(match[3]||"0")+"."+(match[4]||"0"),options)}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DismissedError=void 0;const generic_1=__importDefault(__webpack_require__(28));class DismissedError extends generic_1.default{constructor(message="Dialog dismissed. This is not an error."){super(message),this.dontNotify=!0}}exports.DismissedError=DismissedError,exports.default=DismissedError},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.InvalidActionError=void 0;const generic_1=__importDefault(__webpack_require__(28));class InvalidActionError extends generic_1.default{constructor(message="Invalid Action!"){super(message)}}exports.InvalidActionError=InvalidActionError},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NotFoundError=void 0;const generic_1=__importDefault(__webpack_require__(28));class NotFoundError extends generic_1.default{}exports.NotFoundError=NotFoundError,exports.default=NotFoundError},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MethodNotImplementedError=void 0;const generic_1=__importDefault(__webpack_require__(28));class MethodNotImplementedError extends generic_1.default{constructor(message="Method not implemented!"){super(message)}}exports.MethodNotImplementedError=MethodNotImplementedError,exports.default=MethodNotImplementedError},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SizeError=void 0;const generic_1=__importDefault(__webpack_require__(28));class SizeError extends generic_1.default{}exports.SizeError=SizeError},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const exception_1=__webpack_require__(27),vscode_1=__webpack_require__(1),constants_1=__webpack_require__(2),context_1=__importDefault(__webpack_require__(8)),onUpdateHooks=[],get=(configKey,defaultValue=null)=>{const result=vscode_1.workspace.getConfiguration().get(`${constants_1.EXT_CONFIG_NAMESPACE}.${configKey}`);return void 0===result?defaultValue:result},update=(configKey,value)=>Promise.resolve(vscode_1.workspace.getConfiguration().update(`${constants_1.EXT_CONFIG_NAMESPACE}.${configKey}`,value)),addOnUpdateHook=handler=>{onUpdateHooks.push(handler)},Config=new Proxy({},{get(_,prop){if("get"===prop)return get;if("update"===prop)return update;if("addOnUpdateHook"===prop)return addOnUpdateHook;if("replaceAll"===prop)throw"replaceAll is not necessary within VSCode context. You can use `get` anytime to get fresh data.";return get(prop)},set(){throw new exception_1.InvalidActionError("Cannot set settings value directly!")}});exports.default=Config,context_1.default.onRegister(()=>{context_1.default.subscriptions.push(vscode_1.workspace.onDidChangeConfiguration(event=>{const affectsConfiguration=event.affectsConfiguration,affectsConfig=(section,resource)=>affectsConfiguration(`${constants_1.EXT_CONFIG_NAMESPACE}.${section}`,resource);onUpdateHooks.forEach(cb=>cb({event:{affectsConfig:affectsConfig,affectsConfiguration:affectsConfiguration}}))}))})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(func,wait=100){let timeout;return function(...args){clearTimeout(timeout),timeout=setTimeout(()=>{func.apply(this,args)},wait)}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const generic_1=__importDefault(__webpack_require__(178)),config_manager_1=__importDefault(__webpack_require__(12)),vscode_1=__webpack_require__(1);exports.default=generic_1.default,config_manager_1.default.addOnUpdateHook(({event:event})=>{event.affectsConfiguration("telemetry.enableTelemetry")&&(vscode_1.workspace.getConfiguration().get("telemetry.enableTelemetry")?generic_1.default.enable():generic_1.default.disable())})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(2),decorators_1=__webpack_require__(179),text_1=__webpack_require__(61),src_1=__webpack_require__(10),Sentry=__importStar(__webpack_require__(376)),IGNORE_ERRORS_REGEX=new RegExp(`(${["aggregate function","already exists","authentication failed","cannot drop","cross-database references","does not exist","econnrefused","econnreset","enotfound","enotfound","er_access_denied_error","er_bad_db_error","er_bad_field_error","er_cannot_load_from_table_v2","er_dup_fieldname","er_no_referenced_row_2","er_no_such_table","er_not_supported_auth_mode","er_parse_error","etimedout","failed to connect","is ambiguous","key constraint","login failed","no such table","ora-[0-9]+","sqlite_cantopen","syntax error","unknown_code_please_report","violates"].join("|")})`,"g");let log=src_1.createLogger("telemetry");Sentry.init({maxBreadcrumbs:5,enabled:!1,sampleRate:1,release:"ext@"+constants_1.VERSION,environment:constants_1.ENV,attachStacktrace:!0,dsn:"",beforeSend:(event,_)=>Telemetry.enabled?event:null});class Telemetry{constructor(opts){this.createClient=()=>{Sentry.getCurrentHub().getClient().getOptions().enabled=!0,Sentry.setTags({product:"ext",os:process.platform,arch:process.arch,version:constants_1.VERSION,extversionnum:text_1.numericVersion(constants_1.VERSION).toString(),nodeversion:process.version}),Telemetry.extraInfo&&Sentry.setUser({id:Telemetry.extraInfo.uniqId,deviceId:Telemetry.extraInfo.uniqId,sessionId:Telemetry.extraInfo.sessId})},this.updateOpts=opts=>{Telemetry.extraInfo=opts.extraInfo||Telemetry.extraInfo||{},opts.enableTelemetry?this.enable():this.disable()},this.enable=()=>{Telemetry.enabled||(Telemetry.enabled=!0,this.createClient(),log.info("Telemetry enabled!"))},this.disable=()=>{Telemetry.enabled&&(Telemetry.enabled=!1,Sentry.getCurrentHub().getClient().getOptions().enabled=!1,log.info("Telemetry disabled!"))},this.updateOpts(opts)}prefixed(key){return"ext:"+key}registerException(error,data={}){if(!error)return;const errStr=(error&&error.message?error.message:"").toLowerCase();if(IGNORE_ERRORS_REGEX.test(errStr))return;const properties={...error.data||{},...data};log.error("Exception:%O\n\tData: %j",error,properties),Sentry.configureScope(scope=>{scope.setExtras({exception:error,properties:properties}),Sentry.captureException(error)})}registerMessage(severity,message,value="Dismissed"){let sev;switch(log.debug({severity:severity},"Message: %s, value: %s",message,value),severity){case"debug":sev=Sentry.Severity.Debug;break;case"info":sev=Sentry.Severity.Info;break;case"warn":sev=Sentry.Severity.Warning;break;case"error":case"fatal":case"critical":sev=Sentry.Severity.Error;break;default:sev=Sentry.Severity.Info}Sentry.captureMessage(this.prefixed(message),Sentry.Severity[sev])}registerEvent(name,properties){log.debug("Event: %s\n%j",name,properties||""),Sentry.captureEvent({event_id:this.prefixed(name),message:name,extra:properties,timestamp:+new Date})}registerTime(timeKey,timer){const elapsed=timer.elapsed();log.info("Time: %s %d ms",timeKey,elapsed),this.registerEvent(this.prefixed("time:"+timeKey),{value:elapsed})}}__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerException",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerMessage",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerEvent",null),__decorate([decorators_1.runIfPropIsDefined("client")],Telemetry.prototype,"registerTime",null);const telemetry=new Telemetry({enableTelemetry:!1});exports.default=telemetry},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runIfPropIsDefined=void 0,exports.runIfPropIsDefined=function(prop){return function(target,key,descriptor){void 0===descriptor&&(descriptor=Object.getOwnPropertyDescriptor(target,key));const originalMethod=descriptor.value;descriptor.value=function(...args){void 0!==this[prop]&&originalMethod.apply(this,args)}}}},function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},function(module,exports){module.exports=require("tls")},function(module,exports){module.exports=require("assert")},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};const events_1=__webpack_require__(56),promisify_1=__importDefault(__webpack_require__(184));function isSecureEndpoint(){const{stack:stack}=new Error;return"string"==typeof stack&&stack.split("\n").some(l=>-1!==l.indexOf("(https.js:"))}function createAgent(callback,opts){return new createAgent.Agent(callback,opts)}!function(createAgent){class Agent extends events_1.EventEmitter{constructor(callback,_opts){super(),this.promisifiedCallback=void 0;let opts=_opts;"function"==typeof callback?this.callback=callback:callback&&(opts=callback),this.timeout=null,opts&&"number"==typeof opts.timeout&&(this.timeout=opts.timeout),this.options=opts||{},this.maxFreeSockets=1,this.maxSockets=1,this.sockets=[],this.requests=[]}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:isSecureEndpoint()?443:80}set defaultPort(v){this.explicitDefaultPort=v}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:isSecureEndpoint()?"https:":"http:"}set protocol(v){this.explicitProtocol=v}callback(req,opts,fn){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(req,_opts){const ownOpts=Object.assign({},_opts);"boolean"!=typeof ownOpts.secureEndpoint&&(ownOpts.secureEndpoint=isSecureEndpoint()),null==ownOpts.host&&(ownOpts.host="localhost"),null==ownOpts.port&&(ownOpts.port=ownOpts.secureEndpoint?443:80);const opts=Object.assign(Object.assign({},this.options),ownOpts);opts.host&&opts.path&&delete opts.path,delete opts.agent,delete opts.hostname,delete opts._defaultAgent,delete opts.defaultPort,delete opts.createConnection,req._last=!0,req.shouldKeepAlive=!1;let timedOut=!1,timeout=null;const timeoutMs=this.timeout,freeSocket=this.freeSocket;function onerror(err){req._hadError||(req.emit("error",err),req._hadError=!0)}function callbackError(err){timedOut||(null!==timeout&&(clearTimeout(timeout),timeout=null),onerror(err))}if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?this.promisifiedCallback=promisify_1.default(this.callback):this.promisifiedCallback=this.callback),"number"==typeof timeoutMs&&timeoutMs>0&&(timeout=setTimeout((function(){timeout=null,timedOut=!0;const err=new Error(`A "socket" was not created for HTTP request before ${timeoutMs}ms`);err.code="ETIMEOUT",onerror(err)}),timeoutMs)),"port"in opts&&"number"!=typeof opts.port&&(opts.port=Number(opts.port));try{Promise.resolve(this.promisifiedCallback(req,opts)).then((function(socket){let sock;if(timedOut)return;if(null!=timeout&&(clearTimeout(timeout),timeout=null),v=socket,Boolean(v)&&"function"==typeof v.addRequest||function(v){return Boolean(v)&&"function"==typeof v.addRequest}(socket))return void socket.addRequest(req,opts);var v;if(socket)return sock=socket,sock.on("free",(function(){freeSocket(sock,opts)})),void req.onSocket(sock);onerror(new Error(`no Duplex stream was returned to agent-base for \`${req.method} ${req.path}\``))}),callbackError)}catch(err){Promise.reject(err).catch(callbackError)}}else onerror(new Error("`callback` is not defined"))}freeSocket(socket,opts){socket.destroy()}destroy(){}}createAgent.Agent=Agent}(createAgent||(createAgent={})),createAgent.prototype=createAgent.Agent.prototype,module.exports=createAgent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(fn){return function(req,opts){return new Promise((resolve,reject)=>{fn.call(this,req,opts,(err,rtn)=>{err?reject(err):resolve(rtn)})})}}},function(module,exports,__webpack_require__){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?module.exports=__webpack_require__(186):module.exports=__webpack_require__(188)},function(module,exports,__webpack_require__){exports.log=function(...args){return"object"==typeof console&&console.log&&console.log(...args)},exports.formatArgs=function(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;args.splice(1,0,c,"color: inherit");let index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,match=>{"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c)},exports.save=function(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}},exports.load=function(){let r;try{r=exports.storage.getItem("debug")}catch(error){}!r&&"undefined"!=typeof process&&"env"in process&&(r=process.env.DEBUG);return r},exports.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage=function(){try{return localStorage}catch(error){}}(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=__webpack_require__(94)(exports);const{formatters:formatters}=module.exports;formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}},function(module,exports){var s=1e3,m=6e4,h=60*m,d=24*h;function plural(ms,msAbs,n,name){var isPlural=msAbs>=1.5*n;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return function(str){if((str=String(str)).length>100)return;var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&isFinite(val))return options.long?function(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return plural(ms,msAbs,d,"day");if(msAbs>=h)return plural(ms,msAbs,h,"hour");if(msAbs>=m)return plural(ms,msAbs,m,"minute");if(msAbs>=s)return plural(ms,msAbs,s,"second");return ms+" ms"}(val):function(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return Math.round(ms/d)+"d";if(msAbs>=h)return Math.round(ms/h)+"h";if(msAbs>=m)return Math.round(ms/m)+"m";if(msAbs>=s)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},function(module,exports,__webpack_require__){const tty=__webpack_require__(88),util=__webpack_require__(22);exports.init=function(debug){debug.inspectOpts={};const keys=Object.keys(exports.inspectOpts);for(let i=0;i<keys.length;i++)debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]},exports.log=function(...args){return process.stderr.write(util.format(...args)+"\n")},exports.formatArgs=function(args){const{namespace:name,useColors:useColors}=this;if(useColors){const c=this.color,colorCode="[3"+(c<8?c:"8;5;"+c),prefix=`  ${colorCode};1m${name} [0m`;args[0]=prefix+args[0].split("\n").join("\n"+prefix),args.push(colorCode+"m+"+module.exports.humanize(this.diff)+"[0m")}else args[0]=function(){if(exports.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+name+" "+args[0]},exports.save=function(namespaces){namespaces?process.env.DEBUG=namespaces:delete process.env.DEBUG},exports.load=function(){return process.env.DEBUG},exports.useColors=function(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd)},exports.colors=[6,2,3,4,5,1];try{const supportsColor=__webpack_require__(189);supportsColor&&(supportsColor.stderr||supportsColor).level>=2&&(exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(error){}exports.inspectOpts=Object.keys(process.env).filter(key=>/^debug_/i.test(key)).reduce((obj,key)=>{const prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,(_,k)=>k.toUpperCase());let val=process.env[key];return val=!!/^(yes|on|true|enabled)$/i.test(val)||!/^(no|off|false|disabled)$/i.test(val)&&("null"===val?null:Number(val)),obj[prop]=val,obj},{}),module.exports=__webpack_require__(94)(exports);const{formatters:formatters}=module.exports;formatters.o=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts).replace(/\s*\n\s*/g," ")},formatters.O=function(v){return this.inspectOpts.colors=this.useColors,util.inspect(v,this.inspectOpts)}},function(module,exports,__webpack_require__){"use strict";const os=__webpack_require__(18),hasFlag=__webpack_require__(190),{env:env}=process;let forceColor;function getSupportLevel(stream){return function(level){return 0!==level&&{level:level,hasBasic:!0,has256:level>=2,has16m:level>=3}}(function(stream){if(0===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(stream&&!stream.isTTY&&void 0===forceColor)return 0;const min=forceColor||0;if("dumb"===env.TERM)return min;if("win32"===process.platform){const osRelease=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(osRelease[0])>=10&&Number(osRelease[2])>=10586?Number(osRelease[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(sign=>sign in env)||"codeship"===env.CI_NAME?1:min;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const version=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return version>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)||"COLORTERM"in env?1:min}(stream))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")?forceColor=0:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=1),"FORCE_COLOR"in env&&(forceColor=!0===env.FORCE_COLOR||"true"===env.FORCE_COLOR?1:!1===env.FORCE_COLOR||"false"===env.FORCE_COLOR?0:0===env.FORCE_COLOR.length?1:Math.min(parseInt(env.FORCE_COLOR,10),3)),module.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},function(module,exports,__webpack_require__){"use strict";module.exports=(flag,argv)=>{argv=argv||process.argv;const prefix=flag.startsWith("-")?"":1===flag.length?"-":"--",pos=argv.indexOf(prefix+flag),terminatorPos=argv.indexOf("--");return-1!==pos&&(-1===terminatorPos||pos<terminatorPos)}},function(module,exports){module.exports=require("console")},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const client_1=__webpack_require__(193);exports.default=client_1.SQLToolsLanguageClient},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SQLToolsLanguageClient=void 0;const src_1=__importStar(__webpack_require__(10)),path_1=__importDefault(__webpack_require__(9)),fs_1=__importDefault(__webpack_require__(6)),config_manager_1=__importDefault(__webpack_require__(12)),constants_1=__webpack_require__(2),command_exists_1=__webpack_require__(194),vscode_1=__webpack_require__(1),vscode_languageclient_1=__webpack_require__(196),error_handler_1=__importDefault(__webpack_require__(92)),telemetry_1=__importDefault(__webpack_require__(38)),context_1=__importDefault(__webpack_require__(8)),uniq_1=__importDefault(__webpack_require__(100)),notification_1=__webpack_require__(107),notifications_1=__webpack_require__(108),log=src_1.createLogger("lc");exports.SQLToolsLanguageClient=class SQLToolsLanguageClient{constructor(){this.avoidRestart=!1,this.sendRequest=async function(){return await this.client.onReady(),this.client.sendRequest.apply(this.client,arguments)},this.onRequest=async function(){return await this.client.onReady(),this.client.onRequest.apply(this.client,arguments)},this.sendNotification=async function(){return await this.client.onReady(),this.client.sendNotification.apply(this.client,arguments)},this.onNotification=async function(){return await this.client.onReady(),this.client.onNotification.apply(this.client,arguments)},this.electronNotSupported=async()=>{if(!await vscode_1.window.showInformationMessage(`VSCode engine is not supported. You should enable '${constants_1.EXT_CONFIG_NAMESPACE}.useNodeRuntime' and have NodeJS installed to continue.`,"Enable now"))return;await vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).update("useNodeRuntime",!0,vscode_1.ConfigurationTarget.Global);try{await vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).update("useNodeRuntime",!0,vscode_1.ConfigurationTarget.Workspace)}catch(e){}try{await vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).update("useNodeRuntime",!0,vscode_1.ConfigurationTarget.WorkspaceFolder)}catch(e){}await vscode_1.window.showInformationMessage(`'${constants_1.EXT_NAMESPACE}.useNodeRuntime' enabled. You must reload VSCode to take effect.`,"Reload now")&&vscode_1.commands.executeCommand("workbench.action.reloadWindow")},this.client=new vscode_languageclient_1.LanguageClient(constants_1.EXT_CONFIG_NAMESPACE,constants_1.DISPLAY_NAME+" Language Server",this.getServerOptions(),this.getClientOptions());const defaultErrorHandler=this.client.createDefaultErrorHandler();this.clientErrorHandler={error:defaultErrorHandler.error,closed:()=>this.avoidRestart?vscode_languageclient_1.CloseAction.DoNotRestart:defaultErrorHandler.closed()},this.onNotification(notifications_1.ExitCalledNotification,()=>{this.avoidRestart=!0}),this.registerBaseNotifications(),config_manager_1.default.addOnUpdateHook(async({event:event})=>{if(event.affectsConfig("useNodeRuntime")){if(!await vscode_1.window.showWarningMessage("Use node runtime setting change. You must reload window to take effect.","Reload now"))return;vscode_1.commands.executeCommand("workbench.action.reloadWindow")}if(event.affectsConfig("languageServerEnv")){if(!await vscode_1.window.showWarningMessage("New language server environment variables set. You must reload window to take effect.","Reload now"))return;vscode_1.commands.executeCommand("workbench.action.reloadWindow")}})}start(){return this.client.start()}getServerOptions(){const serverModule=context_1.default.asAbsolutePath("dist/languageserver.js");let runtime=void 0;const useNodeRuntime=config_manager_1.default.useNodeRuntime;if(useNodeRuntime){if("string"==typeof useNodeRuntime){const runtimePath=path_1.default.normalize(useNodeRuntime);fs_1.default.existsSync(runtimePath)&&(runtime=runtimePath)}else command_exists_1.sync("node")&&(runtime="node");if(!runtime){const message="Node runtime not found. Using default as a fallback.";vscode_1.window.showInformationMessage(message),log.info(message)}}const lsCustomEnv=config_manager_1.default.languageServerEnv||{},runOptions={module:serverModule,transport:vscode_languageclient_1.TransportKind.ipc,runtime:runtime,options:{env:{...lsCustomEnv,IS_NODE_RUNTIME:useNodeRuntime?1:0}}},debugOptions=runOptions;return(lsCustomEnv.SQLTOOLS_DEBUG_PORT_LS||process.env.SQLTOOLS_DEBUG_PORT_LS)&&(debugOptions.options={...runOptions.options,execArgv:["--nolazy","--inspect="+(lsCustomEnv.SQLTOOLS_DEBUG_PORT_LS||process.env.SQLTOOLS_DEBUG_PORT_LS||6011)]}),{debug:debugOptions,run:runOptions}}getClientOptions(){const telemetryArgs={enableTelemetry:vscode_1.workspace.getConfiguration().get("telemetry.enableTelemetry")||!1,extraInfo:{sessId:vscode_1.env.sessionId,uniqId:vscode_1.env.machineId,version:vscode_1.version}};let selector=[];return config_manager_1.default.completionLanguages&&(selector=selector.concat(config_manager_1.default.completionLanguages)),config_manager_1.default.formatLanguages&&(selector=selector.concat(config_manager_1.default.formatLanguages)),selector=uniq_1.default(selector),selector=selector.reduce((agg,language)=>("string"==typeof language?(agg.push({language:language,scheme:"untitled"}),agg.push({language:language,scheme:"file"}),agg.push({language:language,scheme:constants_1.EXT_NAMESPACE})):agg.push(language),agg),[{scheme:constants_1.EXT_NAMESPACE,language:void 0}]),log.info("Registering client for languages %O",selector),{documentSelector:selector,initializationOptions:{telemetry:telemetryArgs,extensionPath:context_1.default.extensionPath,userEnvVars:config_manager_1.default.languageServerEnv},progressOnInitialization:!0,outputChannel:src_1.default.outputChannel,synchronize:{configurationSection:[constants_1.EXT_CONFIG_NAMESPACE,"telemetry"],fileEvents:vscode_1.workspace.createFileSystemWatcher(`**/.${constants_1.EXT_NAMESPACE}rc`)},initializationFailedHandler:error=>(telemetry_1.default.registerException(error,{message:"Server initialization failed."}),this.client.error("Server initialization failed.",error),this.client.outputChannel.show(!0),!1),errorHandler:{error:(error,message,count)=>(telemetry_1.default.registerException(error,{message:"Language Server error.",givenMessage:message,count:count}),this.clientErrorHandler.error(error,message,count)),closed:()=>this.clientErrorHandler.closed()}}}async registerBaseNotifications(){await this.client.onReady();this.client.onNotification(notifications_1.ServerErrorNotification,({err:err="",errMessage:errMessage,message:message})=>{error_handler_1.default.create(message)((errMessage||err.message||err).toString())}),this.client.onNotification(notification_1.ElectronNotSupportedNotification,this.electronNotSupported),telemetry_1.default.registerMessage("info","LanguageClient ready"),log.info("LanguageClient ready")}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(195)},function(module,exports,__webpack_require__){"use strict";var exec=__webpack_require__(39).exec,execSync=__webpack_require__(39).execSync,fs=__webpack_require__(6),path=__webpack_require__(9),access=fs.access,accessSync=fs.accessSync,constants=fs.constants||fs,isUsingWindows="win32"==process.platform,commandExistsUnix=function(commandName,cleanedCommandName,callback){!function(commandName,callback){access(commandName,constants.F_OK,(function(err){callback(!err)}))}(commandName,(function(isFile){if(isFile)!function(commandName,callback){access(commandName,constants.F_OK|constants.X_OK,(function(err){callback(null,!err)}))}(commandName,callback);else exec("command -v "+cleanedCommandName+" 2>/dev/null && { echo >&1 "+cleanedCommandName+"; exit 0; }",(function(error,stdout,stderr){callback(null,!!stdout)}))}))},commandExistsUnixSync=function(commandName,cleanedCommandName){if(function(commandName){try{return accessSync(commandName,constants.F_OK),!1}catch(e){return!0}}(commandName))try{return!!execSync("command -v "+cleanedCommandName+" 2>/dev/null && { echo >&1 "+cleanedCommandName+"; exit 0; }")}catch(error){return!1}return function(commandName){try{return accessSync(commandName,constants.F_OK|constants.X_OK),!0}catch(e){return!1}}(commandName)},cleanInput=function(s){return/[^A-Za-z0-9_\/:=-]/.test(s)&&(s=(s="'"+s.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),s};isUsingWindows&&(cleanInput=function(s){return/[\\]/.test(s)?'"'+path.dirname(s)+'"'+":"+('"'+path.basename(s)+'"'):'"'+s+'"'}),module.exports=function commandExists(commandName,callback){var cleanedCommandName=cleanInput(commandName);if(!callback&&"undefined"!=typeof Promise)return new Promise((function(resolve,reject){commandExists(commandName,(function(error,output){output?resolve(commandName):reject(error)}))}));isUsingWindows?function(commandName,cleanedCommandName,callback){if(/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(commandName))exec("where "+cleanedCommandName,(function(error){callback(null,null===error)}));else callback(null,!1)}(commandName,cleanedCommandName,callback):commandExistsUnix(commandName,cleanedCommandName,callback)},module.exports.sync=function(commandName){var cleanedCommandName=cleanInput(commandName);return isUsingWindows?function(commandName,cleanedCommandName,callback){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(commandName))return!1;try{return!!execSync("where "+cleanedCommandName,{stdio:[]})}catch(error){return!1}}(commandName,cleanedCommandName):commandExistsUnixSync(commandName,cleanedCommandName)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const cp=__webpack_require__(39),fs=__webpack_require__(6),SemVer=__webpack_require__(197),client_1=__webpack_require__(13),vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),colorProvider_1=__webpack_require__(220),configuration_1=__webpack_require__(221),implementation_1=__webpack_require__(222),typeDefinition_1=__webpack_require__(223),workspaceFolders_1=__webpack_require__(224),foldingRange_1=__webpack_require__(225),declaration_1=__webpack_require__(226),selectionRange_1=__webpack_require__(227),progress_1=__webpack_require__(228),callHierarchy_proposed_1=__webpack_require__(229),semanticTokens_proposed_1=__webpack_require__(230),Is=__webpack_require__(30),processes_1=__webpack_require__(231);!function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(13));var Executable,TransportKind,Transport,NodeModule,StreamInfo,ChildProcessInfo,ProposedFeatures;!function(Executable){Executable.is=function(value){return Is.string(value.command)}}(Executable||(Executable={})),function(TransportKind){TransportKind[TransportKind.stdio=0]="stdio",TransportKind[TransportKind.ipc=1]="ipc",TransportKind[TransportKind.pipe=2]="pipe",TransportKind[TransportKind.socket=3]="socket"}(TransportKind=exports.TransportKind||(exports.TransportKind={})),function(Transport){Transport.isSocket=function(value){let candidate=value;return candidate&&candidate.kind===TransportKind.socket&&Is.number(candidate.port)}}(Transport||(Transport={})),function(NodeModule){NodeModule.is=function(value){return Is.string(value.module)}}(NodeModule||(NodeModule={})),function(StreamInfo){StreamInfo.is=function(value){let candidate=value;return candidate&&void 0!==candidate.writer&&void 0!==candidate.reader}}(StreamInfo||(StreamInfo={})),function(ChildProcessInfo){ChildProcessInfo.is=function(value){let candidate=value;return candidate&&void 0!==candidate.process&&"boolean"==typeof candidate.detached}}(ChildProcessInfo||(ChildProcessInfo={}));class LanguageClient extends client_1.BaseLanguageClient{constructor(arg1,arg2,arg3,arg4,arg5){let id,name,serverOptions,clientOptions,forceDebug;Is.string(arg2)?(id=arg1,name=arg2,serverOptions=arg3,clientOptions=arg4,forceDebug=!!arg5):(id=arg1.toLowerCase(),name=arg1,serverOptions=arg2,clientOptions=arg3,forceDebug=arg4),void 0===forceDebug&&(forceDebug=!1),super(id,name,clientOptions),this._serverOptions=serverOptions,this._forceDebug=forceDebug;try{this.checkVersion()}catch(error){throw Is.string(error.message)&&this.outputChannel.appendLine(error.message),error}}checkVersion(){let codeVersion=SemVer.parse(vscode_1.version);if(!codeVersion)throw new Error("No valid VS Code version detected. Version string is: "+vscode_1.version);if(codeVersion.prerelease&&codeVersion.prerelease.length>0&&(codeVersion.prerelease=[]),!SemVer.satisfies(codeVersion,"^1.41.0"))throw new Error("The language client requires VS Code version ^1.41.0 but received version "+vscode_1.version)}stop(){return super.stop().then(()=>{if(this._serverProcess){let toCheck=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(toCheck),this._isDetached=void 0}})}checkProcessDied(childProcess){childProcess&&setTimeout(()=>{try{process.kill(childProcess.pid,0),processes_1.terminate(childProcess)}catch(error){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(encoding){function getEnvironment(env,fork){if(!env&&!fork)return;let result=Object.create(null);return Object.keys(process.env).forEach(key=>result[key]=process.env[key]),fork&&(result.ELECTRON_RUN_AS_NODE="1",result.ELECTRON_NO_ASAR="1"),env&&Object.keys(env).forEach(key=>result[key]=env[key]),result}const debugStartWith=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],debugEquals=["--debug","--debug-brk","--inspect","--inspect-brk"];function assertStdio(process){if(null===process.stdin||null===process.stdout||null===process.stderr)throw new Error("Process created without stdio streams")}let json,server=this._serverOptions;if(Is.func(server))return server().then(result=>{if(client_1.MessageTransports.is(result))return this._isDetached=!!result.detached,result;if(StreamInfo.is(result))return this._isDetached=!!result.detached,{reader:new vscode_languageserver_protocol_1.StreamMessageReader(result.reader),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer)};{let cp;return ChildProcessInfo.is(result)?(cp=result.process,this._isDetached=result.detached):(cp=result,this._isDetached=!1),cp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),{reader:new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin)}}});let runDebug=server;return json=runDebug.run||runDebug.debug?this._forceDebug||function(){let args=process.execArgv;return!!args&&args.some(arg=>debugStartWith.some(value=>arg.startsWith(value))||debugEquals.some(value=>arg===value))}()?runDebug.debug:runDebug.run:server,this._getServerWorkingDir(json.options).then(serverWorkingDir=>{if(NodeModule.is(json)&&json.module){let node=json,transport=node.transport||TransportKind.stdio;if(!node.runtime){let pipeName=void 0;return new Promise((resolve,_reject)=>{let args=node.args&&node.args.slice()||[];transport===TransportKind.ipc?args.push("--node-ipc"):transport===TransportKind.stdio?args.push("--stdio"):transport===TransportKind.pipe?(pipeName=vscode_languageserver_protocol_1.generateRandomPipeName(),args.push("--pipe="+pipeName)):Transport.isSocket(transport)&&args.push("--socket="+transport.port),args.push("--clientProcessId="+process.pid.toString());let options=node.options||Object.create(null);if(options.env=getEnvironment(options.env,!0),options.execArgv=options.execArgv||[],options.cwd=serverWorkingDir,options.silent=!0,transport===TransportKind.ipc||transport===TransportKind.stdio){let sp=cp.fork(node.module,args||[],options);assertStdio(sp),this._serverProcess=sp,sp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport===TransportKind.ipc?(sp.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),resolve({reader:new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess),writer:new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess)})):resolve({reader:new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin)})}else transport===TransportKind.pipe?vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then(transport=>{let sp=cp.fork(node.module,args||[],options);assertStdio(sp),this._serverProcess=sp,sp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),sp.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>{resolve({reader:protocol[0],writer:protocol[1]})})}):Transport.isSocket(transport)&&vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then(transport=>{let sp=cp.fork(node.module,args||[],options);assertStdio(sp),this._serverProcess=sp,sp.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),sp.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>{resolve({reader:protocol[0],writer:protocol[1]})})})})}{let args=[],options=node.options||Object.create(null);options.execArgv&&options.execArgv.forEach(element=>args.push(element)),args.push(node.module),node.args&&node.args.forEach(element=>args.push(element));let execOptions=Object.create(null);execOptions.cwd=serverWorkingDir,execOptions.env=getEnvironment(options.env,!1);let pipeName=void 0;if(transport===TransportKind.ipc?(execOptions.stdio=[null,null,null,"ipc"],args.push("--node-ipc")):transport===TransportKind.stdio?args.push("--stdio"):transport===TransportKind.pipe?(pipeName=vscode_languageserver_protocol_1.generateRandomPipeName(),args.push("--pipe="+pipeName)):Transport.isSocket(transport)&&args.push("--socket="+transport.port),args.push("--clientProcessId="+process.pid.toString()),transport===TransportKind.ipc||transport===TransportKind.stdio){let serverProcess=cp.spawn(node.runtime,args,execOptions);return serverProcess&&serverProcess.pid?(this._serverProcess=serverProcess,serverProcess.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport===TransportKind.ipc?(serverProcess.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),Promise.resolve({reader:new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess),writer:new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess)})):Promise.resolve({reader:new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin)})):Promise.reject(`Launching server using runtime ${node.runtime} failed.`)}if(transport===TransportKind.pipe)return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then(transport=>{let process=cp.spawn(node.runtime,args,execOptions);return process&&process.pid?(this._serverProcess=process,process.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),process.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>({reader:protocol[0],writer:protocol[1]}))):Promise.reject(`Launching server using runtime ${node.runtime} failed.`)});if(Transport.isSocket(transport))return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then(transport=>{let process=cp.spawn(node.runtime,args,execOptions);return process&&process.pid?(this._serverProcess=process,process.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),process.stdout.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),transport.onConnected().then(protocol=>({reader:protocol[0],writer:protocol[1]}))):Promise.reject(`Launching server using runtime ${node.runtime} failed.`)})}}else if(Executable.is(json)&&json.command){let command=json,args=command.args||[],options=Object.assign({},command.options);options.cwd=options.cwd||serverWorkingDir;let serverProcess=cp.spawn(command.command,args,options);return serverProcess&&serverProcess.pid?(serverProcess.stderr.on("data",data=>this.outputChannel.append(Is.string(data)?data:data.toString(encoding))),this._serverProcess=serverProcess,this._isDetached=!!options.detached,Promise.resolve({reader:new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout),writer:new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin)})):Promise.reject(`Launching server using command ${command.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(server,null,4)))})}registerProposedFeatures(){this.registerFeatures(ProposedFeatures.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new configuration_1.ConfigurationFeature(this)),this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this)),this.registerFeature(new implementation_1.ImplementationFeature(this)),this.registerFeature(new colorProvider_1.ColorProviderFeature(this)),this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this)),this.registerFeature(new foldingRange_1.FoldingRangeFeature(this)),this.registerFeature(new declaration_1.DeclarationFeature(this)),this.registerFeature(new selectionRange_1.SelectionRangeFeature(this)),this.registerFeature(new progress_1.ProgressFeature(this))}_mainGetRootPath(){let folders=vscode_1.workspace.workspaceFolders;if(!folders||0===folders.length)return;let folder=folders[0];return"file"===folder.uri.scheme?folder.uri.fsPath:void 0}_getServerWorkingDir(options){let cwd=options&&options.cwd;return cwd||(cwd=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),cwd?new Promise(s=>{fs.lstat(cwd,(err,stats)=>{s(!err&&stats.isDirectory()?cwd:void 0)})}):Promise.resolve(void 0)}}exports.LanguageClient=LanguageClient;exports.SettingMonitor=class SettingMonitor{constructor(_client,_setting){this._client=_client,this._setting=_setting,this._listeners=[]}start(){return vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new vscode_1.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let index=this._setting.indexOf("."),primary=index>=0?this._setting.substr(0,index):this._setting,rest=index>=0?this._setting.substr(index+1):void 0,enabled=rest?vscode_1.workspace.getConfiguration(primary).get(rest,!1):vscode_1.workspace.getConfiguration(primary);enabled&&this._client.needsStart()?this._client.start():!enabled&&this._client.needsStop()&&this._client.stop()}},function(ProposedFeatures){ProposedFeatures.createAll=function(client){return[new callHierarchy_proposed_1.CallHierarchyFeature(client),new semanticTokens_proposed_1.SemanticTokensFeature(client)]}}(ProposedFeatures=exports.ProposedFeatures||(exports.ProposedFeatures={}))},function(module,exports){var debug;exports=module.exports=SemVer,debug="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var args=Array.prototype.slice.call(arguments,0);args.unshift("SEMVER"),console.log.apply(console,args)}:function(){},exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991,re=exports.re=[],src=exports.src=[],t=exports.tokens={},R=0;function tok(n){t[n]=R++}tok("NUMERICIDENTIFIER"),src[t.NUMERICIDENTIFIER]="0|[1-9]\\d*",tok("NUMERICIDENTIFIERLOOSE"),src[t.NUMERICIDENTIFIERLOOSE]="[0-9]+",tok("NONNUMERICIDENTIFIER"),src[t.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",tok("MAINVERSION"),src[t.MAINVERSION]="("+src[t.NUMERICIDENTIFIER]+")\\.("+src[t.NUMERICIDENTIFIER]+")\\.("+src[t.NUMERICIDENTIFIER]+")",tok("MAINVERSIONLOOSE"),src[t.MAINVERSIONLOOSE]="("+src[t.NUMERICIDENTIFIERLOOSE]+")\\.("+src[t.NUMERICIDENTIFIERLOOSE]+")\\.("+src[t.NUMERICIDENTIFIERLOOSE]+")",tok("PRERELEASEIDENTIFIER"),src[t.PRERELEASEIDENTIFIER]="(?:"+src[t.NUMERICIDENTIFIER]+"|"+src[t.NONNUMERICIDENTIFIER]+")",tok("PRERELEASEIDENTIFIERLOOSE"),src[t.PRERELEASEIDENTIFIERLOOSE]="(?:"+src[t.NUMERICIDENTIFIERLOOSE]+"|"+src[t.NONNUMERICIDENTIFIER]+")",tok("PRERELEASE"),src[t.PRERELEASE]="(?:-("+src[t.PRERELEASEIDENTIFIER]+"(?:\\."+src[t.PRERELEASEIDENTIFIER]+")*))",tok("PRERELEASELOOSE"),src[t.PRERELEASELOOSE]="(?:-?("+src[t.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[t.PRERELEASEIDENTIFIERLOOSE]+")*))",tok("BUILDIDENTIFIER"),src[t.BUILDIDENTIFIER]="[0-9A-Za-z-]+",tok("BUILD"),src[t.BUILD]="(?:\\+("+src[t.BUILDIDENTIFIER]+"(?:\\."+src[t.BUILDIDENTIFIER]+")*))",tok("FULL"),tok("FULLPLAIN"),src[t.FULLPLAIN]="v?"+src[t.MAINVERSION]+src[t.PRERELEASE]+"?"+src[t.BUILD]+"?",src[t.FULL]="^"+src[t.FULLPLAIN]+"$",tok("LOOSEPLAIN"),src[t.LOOSEPLAIN]="[v=\\s]*"+src[t.MAINVERSIONLOOSE]+src[t.PRERELEASELOOSE]+"?"+src[t.BUILD]+"?",tok("LOOSE"),src[t.LOOSE]="^"+src[t.LOOSEPLAIN]+"$",tok("GTLT"),src[t.GTLT]="((?:<|>)?=?)",tok("XRANGEIDENTIFIERLOOSE"),src[t.XRANGEIDENTIFIERLOOSE]=src[t.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",tok("XRANGEIDENTIFIER"),src[t.XRANGEIDENTIFIER]=src[t.NUMERICIDENTIFIER]+"|x|X|\\*",tok("XRANGEPLAIN"),src[t.XRANGEPLAIN]="[v=\\s]*("+src[t.XRANGEIDENTIFIER]+")(?:\\.("+src[t.XRANGEIDENTIFIER]+")(?:\\.("+src[t.XRANGEIDENTIFIER]+")(?:"+src[t.PRERELEASE]+")?"+src[t.BUILD]+"?)?)?",tok("XRANGEPLAINLOOSE"),src[t.XRANGEPLAINLOOSE]="[v=\\s]*("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+src[t.XRANGEIDENTIFIERLOOSE]+")(?:"+src[t.PRERELEASELOOSE]+")?"+src[t.BUILD]+"?)?)?",tok("XRANGE"),src[t.XRANGE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAIN]+"$",tok("XRANGELOOSE"),src[t.XRANGELOOSE]="^"+src[t.GTLT]+"\\s*"+src[t.XRANGEPLAINLOOSE]+"$",tok("COERCE"),src[t.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",tok("COERCERTL"),re[t.COERCERTL]=new RegExp(src[t.COERCE],"g"),tok("LONETILDE"),src[t.LONETILDE]="(?:~>?)",tok("TILDETRIM"),src[t.TILDETRIM]="(\\s*)"+src[t.LONETILDE]+"\\s+",re[t.TILDETRIM]=new RegExp(src[t.TILDETRIM],"g");tok("TILDE"),src[t.TILDE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAIN]+"$",tok("TILDELOOSE"),src[t.TILDELOOSE]="^"+src[t.LONETILDE]+src[t.XRANGEPLAINLOOSE]+"$",tok("LONECARET"),src[t.LONECARET]="(?:\\^)",tok("CARETTRIM"),src[t.CARETTRIM]="(\\s*)"+src[t.LONECARET]+"\\s+",re[t.CARETTRIM]=new RegExp(src[t.CARETTRIM],"g");tok("CARET"),src[t.CARET]="^"+src[t.LONECARET]+src[t.XRANGEPLAIN]+"$",tok("CARETLOOSE"),src[t.CARETLOOSE]="^"+src[t.LONECARET]+src[t.XRANGEPLAINLOOSE]+"$",tok("COMPARATORLOOSE"),src[t.COMPARATORLOOSE]="^"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+")$|^$",tok("COMPARATOR"),src[t.COMPARATOR]="^"+src[t.GTLT]+"\\s*("+src[t.FULLPLAIN]+")$|^$",tok("COMPARATORTRIM"),src[t.COMPARATORTRIM]="(\\s*)"+src[t.GTLT]+"\\s*("+src[t.LOOSEPLAIN]+"|"+src[t.XRANGEPLAIN]+")",re[t.COMPARATORTRIM]=new RegExp(src[t.COMPARATORTRIM],"g");tok("HYPHENRANGE"),src[t.HYPHENRANGE]="^\\s*("+src[t.XRANGEPLAIN]+")\\s+-\\s+("+src[t.XRANGEPLAIN]+")\\s*$",tok("HYPHENRANGELOOSE"),src[t.HYPHENRANGELOOSE]="^\\s*("+src[t.XRANGEPLAINLOOSE]+")\\s+-\\s+("+src[t.XRANGEPLAINLOOSE]+")\\s*$",tok("STAR"),src[t.STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++)debug(i,src[i]),re[i]||(re[i]=new RegExp(src[i]));function parse(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer)return version;if("string"!=typeof version)return null;if(version.length>256)return null;if(!(options.loose?re[t.LOOSE]:re[t.FULL]).test(version))return null;try{return new SemVer(version,options)}catch(er){return null}}function SemVer(version,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),version instanceof SemVer){if(version.loose===options.loose)return version;version=version.version}else if("string"!=typeof version)throw new TypeError("Invalid Version: "+version);if(version.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof SemVer))return new SemVer(version,options);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose;var m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m)throw new TypeError("Invalid Version: "+version);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map((function(id){if(/^[0-9]+$/.test(id)){var num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id})):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}exports.parse=parse,exports.valid=function(version,options){var v=parse(version,options);return v?v.version:null},exports.clean=function(version,options){var s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null},exports.SemVer=SemVer,SemVer.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},SemVer.prototype.toString=function(){return this.version},SemVer.prototype.compare=function(other){return debug("SemVer.compare",this.version,this.options,other),other instanceof SemVer||(other=new SemVer(other,this.options)),this.compareMain(other)||this.comparePre(other)},SemVer.prototype.compareMain=function(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)},SemVer.prototype.comparePre=function(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;var i=0;do{var a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.compareBuild=function(other){other instanceof SemVer||(other=new SemVer(other,this.options));var i=0;do{var a=this.build[i],b=other.build[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)},SemVer.prototype.inc=function(release,identifier){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier),this.inc("pre",identifier);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier),this.inc("pre",identifier);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}identifier&&(this.prerelease[0]===identifier?isNaN(this.prerelease[1])&&(this.prerelease=[identifier,0]):this.prerelease=[identifier,0]);break;default:throw new Error("invalid increment argument: "+release)}return this.format(),this.raw=this.version,this},exports.inc=function(version,release,loose,identifier){"string"==typeof loose&&(identifier=loose,loose=void 0);try{return new SemVer(version,loose).inc(release,identifier).version}catch(er){return null}},exports.diff=function(version1,version2){if(eq(version1,version2))return null;var v1=parse(version1),v2=parse(version2),prefix="";if(v1.prerelease.length||v2.prerelease.length){prefix="pre";var defaultResult="prerelease"}for(var key in v1)if(("major"===key||"minor"===key||"patch"===key)&&v1[key]!==v2[key])return prefix+key;return defaultResult},exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(a,b){var anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1}function compare(a,b,loose){return new SemVer(a,loose).compare(new SemVer(b,loose))}function gt(a,b,loose){return compare(a,b,loose)>0}function lt(a,b,loose){return compare(a,b,loose)<0}function eq(a,b,loose){return 0===compare(a,b,loose)}function neq(a,b,loose){return 0!==compare(a,b,loose)}function gte(a,b,loose){return compare(a,b,loose)>=0}function lte(a,b,loose){return compare(a,b,loose)<=0}function cmp(a,op,b,loose){switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError("Invalid operator: "+op)}}function Comparator(comp,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}if(!(this instanceof Comparator))return new Comparator(comp,options);debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}exports.rcompareIdentifiers=function(a,b){return compareIdentifiers(b,a)},exports.major=function(a,loose){return new SemVer(a,loose).major},exports.minor=function(a,loose){return new SemVer(a,loose).minor},exports.patch=function(a,loose){return new SemVer(a,loose).patch},exports.compare=compare,exports.compareLoose=function(a,b){return compare(a,b,!0)},exports.compareBuild=function(a,b,loose){var versionA=new SemVer(a,loose),versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)},exports.rcompare=function(a,b,loose){return compare(b,a,loose)},exports.sort=function(list,loose){return list.sort((function(a,b){return exports.compareBuild(a,b,loose)}))},exports.rsort=function(list,loose){return list.sort((function(a,b){return exports.compareBuild(b,a,loose)}))},exports.gt=gt,exports.lt=lt,exports.eq=eq,exports.neq=neq,exports.gte=gte,exports.lte=lte,exports.cmp=cmp,exports.Comparator=Comparator;var ANY={};function Range(range,options){if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return new Range(range.value,options);if(!(this instanceof Range))return new Range(range,options);if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range,this.set=range.split(/\s*\|\|\s*/).map((function(range){return this.parseRange(range.trim())}),this).filter((function(c){return c.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+range);this.format()}function isSatisfiable(comparators,options){for(var result=!0,remainingComparators=comparators.slice(),testComparator=remainingComparators.pop();result&&remainingComparators.length;)result=remainingComparators.every((function(otherComparator){return testComparator.intersects(otherComparator,options)})),testComparator=remainingComparators.pop();return result}function isX(id){return!id||"x"===id.toLowerCase()||"*"===id}function hyphenReplace($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb){return((from=isX(fM)?"":isX(fm)?">="+fM+".0.0":isX(fp)?">="+fM+"."+fm+".0":">="+from)+" "+(to=isX(tM)?"":isX(tm)?"<"+(+tM+1)+".0.0":isX(tp)?"<"+tM+"."+(+tm+1)+".0":tpr?"<="+tM+"."+tm+"."+tp+"-"+tpr:"<="+to)).trim()}function testSet(set,version,options){for(var i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(i=0;i<set.length;i++)if(debug(set[i].semver),set[i].semver!==ANY&&set[i].semver.prerelease.length>0){var allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0}function satisfies(version,range,options){try{range=new Range(range,options)}catch(er){return!1}return range.test(version)}function outside(version,range,hilo,options){var gtfn,ltefn,ltfn,comp,ecomp;switch(version=new SemVer(version,options),range=new Range(range,options),hilo){case">":gtfn=gt,ltefn=lte,ltfn=lt,comp=">",ecomp=">=";break;case"<":gtfn=lt,ltefn=gte,ltfn=gt,comp="<",ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options))return!1;for(var i=0;i<range.set.length;++i){var comparators=range.set[i],high=null,low=null;if(comparators.forEach((function(comparator){comparator.semver===ANY&&(comparator=new Comparator(">=0.0.0")),high=high||comparator,low=low||comparator,gtfn(comparator.semver,high.semver,options)?high=comparator:ltfn(comparator.semver,low.semver,options)&&(low=comparator)})),high.operator===comp||high.operator===ecomp)return!1;if((!low.operator||low.operator===comp)&&ltefn(version,low.semver))return!1;if(low.operator===ecomp&&ltfn(version,low.semver))return!1}return!0}Comparator.prototype.parse=function(comp){var r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],m=comp.match(r);if(!m)throw new TypeError("Invalid comparator: "+comp);this.operator=void 0!==m[1]?m[1]:"","="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY},Comparator.prototype.toString=function(){return this.value},Comparator.prototype.test=function(version){if(debug("Comparator.test",version,this.options.loose),this.semver===ANY||version===ANY)return!0;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}return cmp(version,this.operator,this.semver,this.options)},Comparator.prototype.intersects=function(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");var rangeTmp;if(options&&"object"==typeof options||(options={loose:!!options,includePrerelease:!1}),""===this.operator)return""===this.value||(rangeTmp=new Range(comp.value,options),satisfies(this.value,rangeTmp,options));if(""===comp.operator)return""===comp.value||(rangeTmp=new Range(this.value,options),satisfies(comp.semver,rangeTmp,options));var sameDirectionIncreasing=!(">="!==this.operator&&">"!==this.operator||">="!==comp.operator&&">"!==comp.operator),sameDirectionDecreasing=!("<="!==this.operator&&"<"!==this.operator||"<="!==comp.operator&&"<"!==comp.operator),sameSemVer=this.semver.version===comp.semver.version,differentDirectionsInclusive=!(">="!==this.operator&&"<="!==this.operator||">="!==comp.operator&&"<="!==comp.operator),oppositeDirectionsLessThan=cmp(this.semver,"<",comp.semver,options)&&(">="===this.operator||">"===this.operator)&&("<="===comp.operator||"<"===comp.operator),oppositeDirectionsGreaterThan=cmp(this.semver,">",comp.semver,options)&&("<="===this.operator||"<"===this.operator)&&(">="===comp.operator||">"===comp.operator);return sameDirectionIncreasing||sameDirectionDecreasing||sameSemVer&&differentDirectionsInclusive||oppositeDirectionsLessThan||oppositeDirectionsGreaterThan},exports.Range=Range,Range.prototype.format=function(){return this.range=this.set.map((function(comps){return comps.join(" ").trim()})).join("||").trim(),this.range},Range.prototype.toString=function(){return this.range},Range.prototype.parseRange=function(range){var loose=this.options.loose;range=range.trim();var hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace),debug("hyphen replace",range),range=range.replace(re[t.COMPARATORTRIM],"$1$2$3"),debug("comparator trim",range,re[t.COMPARATORTRIM]),range=(range=(range=range.replace(re[t.TILDETRIM],"$1~")).replace(re[t.CARETTRIM],"$1^")).split(/\s+/).join(" ");var compRe=loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],set=range.split(" ").map((function(comp){return function(comp,options){return debug("comp",comp,options),comp=function(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function(comp,options){debug("caret",comp,options);var r=options.loose?re[t.CARETLOOSE]:re[t.CARET];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret="0"===M?">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":">="+M+"."+m+".0 <"+(+M+1)+".0.0":pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+"-"+pr+" <"+(+M+1)+".0.0"):(debug("no pr"),ret="0"===M?"0"===m?">="+M+"."+m+"."+p+" <"+M+"."+m+"."+(+p+1):">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0":">="+M+"."+m+"."+p+" <"+(+M+1)+".0.0"),debug("caret return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("caret",comp),comp=function(comp,options){return comp.trim().split(/\s+/).map((function(comp){return function(comp,options){var r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,(function(_,M,m,p,pr){var ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=">="+M+".0.0 <"+(+M+1)+".0.0":isX(p)?ret=">="+M+"."+m+".0 <"+M+"."+(+m+1)+".0":pr?(debug("replaceTilde pr",pr),ret=">="+M+"."+m+"."+p+"-"+pr+" <"+M+"."+(+m+1)+".0"):ret=">="+M+"."+m+"."+p+" <"+M+"."+(+m+1)+".0",debug("tilde return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("tildes",comp),comp=function(comp,options){return debug("replaceXRanges",comp,options),comp.split(/\s+/).map((function(comp){return function(comp,options){comp=comp.trim();var r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,(function(ret,gtlt,M,m,p,pr){debug("xRange",comp,ret,gtlt,M,m,p,pr);var xM=isX(M),xm=xM||isX(m),xp=xm||isX(p),anyX=xp;return"="===gtlt&&anyX&&(gtlt=""),pr=options.includePrerelease?"-0":"",xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0-0":"*":gtlt&&anyX?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),ret=gtlt+M+"."+m+"."+p+pr):xm?ret=">="+M+".0.0"+pr+" <"+(+M+1)+".0.0"+pr:xp&&(ret=">="+M+"."+m+".0"+pr+" <"+M+"."+(+m+1)+".0"+pr),debug("xRange return",ret),ret}))}(comp,options)})).join(" ")}(comp,options),debug("xrange",comp),comp=function(comp,options){return debug("replaceStars",comp,options),comp.trim().replace(re[t.STAR],"")}(comp,options),debug("stars",comp),comp}(comp,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(set=set.filter((function(comp){return!!comp.match(compRe)}))),set=set.map((function(comp){return new Comparator(comp,this.options)}),this)},Range.prototype.intersects=function(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some((function(thisComparators){return isSatisfiable(thisComparators,options)&&range.set.some((function(rangeComparators){return isSatisfiable(rangeComparators,options)&&thisComparators.every((function(thisComparator){return rangeComparators.every((function(rangeComparator){return thisComparator.intersects(rangeComparator,options)}))}))}))}))},exports.toComparators=function(range,options){return new Range(range,options).set.map((function(comp){return comp.map((function(c){return c.value})).join(" ").trim().split(" ")}))},Range.prototype.test=function(version){if(!version)return!1;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}for(var i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1},exports.satisfies=satisfies,exports.maxSatisfying=function(versions,range,options){var max=null,maxSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(max&&-1!==maxSV.compare(v)||(maxSV=new SemVer(max=v,options)))})),max},exports.minSatisfying=function(versions,range,options){var min=null,minSV=null;try{var rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((function(v){rangeObj.test(v)&&(min&&1!==minSV.compare(v)||(minSV=new SemVer(min=v,options)))})),min},exports.minVersion=function(range,loose){range=new Range(range,loose);var minver=new SemVer("0.0.0");if(range.test(minver))return minver;if(minver=new SemVer("0.0.0-0"),range.test(minver))return minver;minver=null;for(var i=0;i<range.set.length;++i){range.set[i].forEach((function(comparator){var compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":0===compver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw=compver.format();case"":case">=":minver&&!gt(minver,compver)||(minver=compver);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+comparator.operator)}}))}if(minver&&range.test(minver))return minver;return null},exports.validRange=function(range,options){try{return new Range(range,options).range||"*"}catch(er){return null}},exports.ltr=function(version,range,options){return outside(version,range,"<",options)},exports.gtr=function(version,range,options){return outside(version,range,">",options)},exports.outside=outside,exports.prerelease=function(version,options){var parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null},exports.intersects=function(r1,r2,options){return r1=new Range(r1,options),r2=new Range(r2,options),r1.intersects(r2)},exports.coerce=function(version,options){if(version instanceof SemVer)return version;"number"==typeof version&&(version=String(version));if("string"!=typeof version)return null;var match=null;if((options=options||{}).rtl){for(var next;(next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length);)match&&next.index+next[0].length===match.index+match[0].length||(match=next),re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length;re[t.COERCERTL].lastIndex=-1}else match=version.match(re[t.COERCE]);if(null===match)return null;return parse(match[2]+"."+(match[3]||"0")+"."+(match[4]||"0"),options)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const is=__webpack_require__(29);var ErrorCodes;!function(ErrorCodes){ErrorCodes.ParseError=-32700,ErrorCodes.InvalidRequest=-32600,ErrorCodes.MethodNotFound=-32601,ErrorCodes.InvalidParams=-32602,ErrorCodes.InternalError=-32603,ErrorCodes.serverErrorStart=-32099,ErrorCodes.serverErrorEnd=-32e3,ErrorCodes.ServerNotInitialized=-32002,ErrorCodes.UnknownErrorCode=-32001,ErrorCodes.RequestCancelled=-32800,ErrorCodes.ContentModified=-32801,ErrorCodes.MessageWriteError=1,ErrorCodes.MessageReadError=2}(ErrorCodes=exports.ErrorCodes||(exports.ErrorCodes={}));class ResponseError extends Error{constructor(code,message,data){super(message),this.code=is.number(code)?code:ErrorCodes.UnknownErrorCode,this.data=data,Object.setPrototypeOf(this,ResponseError.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}exports.ResponseError=ResponseError;class AbstractMessageType{constructor(_method,_numberOfParams){this._method=_method,this._numberOfParams=_numberOfParams}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}exports.AbstractMessageType=AbstractMessageType;exports.RequestType0=class RequestType0 extends AbstractMessageType{constructor(method){super(method,0)}};exports.RequestType=class RequestType extends AbstractMessageType{constructor(method){super(method,1)}};exports.RequestType1=class RequestType1 extends AbstractMessageType{constructor(method){super(method,1)}};exports.RequestType2=class RequestType2 extends AbstractMessageType{constructor(method){super(method,2)}};exports.RequestType3=class RequestType3 extends AbstractMessageType{constructor(method){super(method,3)}};exports.RequestType4=class RequestType4 extends AbstractMessageType{constructor(method){super(method,4)}};exports.RequestType5=class RequestType5 extends AbstractMessageType{constructor(method){super(method,5)}};exports.RequestType6=class RequestType6 extends AbstractMessageType{constructor(method){super(method,6)}};exports.RequestType7=class RequestType7 extends AbstractMessageType{constructor(method){super(method,7)}};exports.RequestType8=class RequestType8 extends AbstractMessageType{constructor(method){super(method,8)}};exports.RequestType9=class RequestType9 extends AbstractMessageType{constructor(method){super(method,9)}};exports.NotificationType=class NotificationType extends AbstractMessageType{constructor(method){super(method,1),this._=void 0}};exports.NotificationType0=class NotificationType0 extends AbstractMessageType{constructor(method){super(method,0)}};exports.NotificationType1=class NotificationType1 extends AbstractMessageType{constructor(method){super(method,1)}};exports.NotificationType2=class NotificationType2 extends AbstractMessageType{constructor(method){super(method,2)}};exports.NotificationType3=class NotificationType3 extends AbstractMessageType{constructor(method){super(method,3)}};exports.NotificationType4=class NotificationType4 extends AbstractMessageType{constructor(method){super(method,4)}};exports.NotificationType5=class NotificationType5 extends AbstractMessageType{constructor(method){super(method,5)}};exports.NotificationType6=class NotificationType6 extends AbstractMessageType{constructor(method){super(method,6)}};exports.NotificationType7=class NotificationType7 extends AbstractMessageType{constructor(method){super(method,7)}};exports.NotificationType8=class NotificationType8 extends AbstractMessageType{constructor(method){super(method,8)}};exports.NotificationType9=class NotificationType9 extends AbstractMessageType{constructor(method){super(method,9)}},exports.isRequestMessage=function(message){let candidate=message;return candidate&&is.string(candidate.method)&&(is.string(candidate.id)||is.number(candidate.id))},exports.isNotificationMessage=function(message){let candidate=message;return candidate&&is.string(candidate.method)&&void 0===message.id},exports.isResponseMessage=function(message){let candidate=message;return candidate&&(void 0!==candidate.result||!!candidate.error)&&(is.string(candidate.id)||is.number(candidate.id)||null===candidate.id)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=__webpack_require__(40),Is=__webpack_require__(29);var CancellationToken;!function(CancellationToken){CancellationToken.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:events_1.Event.None}),CancellationToken.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:events_1.Event.None}),CancellationToken.is=function(value){let candidate=value;return candidate&&(candidate===CancellationToken.None||candidate===CancellationToken.Cancelled||Is.boolean(candidate.isCancellationRequested)&&!!candidate.onCancellationRequested)}}(CancellationToken=exports.CancellationToken||(exports.CancellationToken={}));const shortcutEvent=Object.freeze((function(callback,context){let handle=setTimeout(callback.bind(context),0);return{dispose(){clearTimeout(handle)}}}));class MutableToken{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new events_1.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}exports.CancellationTokenSource=class CancellationTokenSource{get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token.cancel():this._token=CancellationToken.Cancelled}dispose(){this._token?this._token instanceof MutableToken&&this._token.dispose():this._token=CancellationToken.None}}},function(module,exports,__webpack_require__){"use strict";var Touch;Object.defineProperty(exports,"__esModule",{value:!0}),function(Touch){Touch.None=0,Touch.First=1,Touch.Last=2}(Touch=exports.Touch||(exports.Touch={}));exports.LinkedMap=class LinkedMap{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(key){return this._map.has(key)}get(key){const item=this._map.get(key);if(item)return item.value}set(key,value,touch=Touch.None){let item=this._map.get(key);if(item)item.value=value,touch!==Touch.None&&this.touch(item,touch);else{switch(item={key:key,value:value,next:void 0,previous:void 0},touch){case Touch.None:this.addItemLast(item);break;case Touch.First:this.addItemFirst(item);break;case Touch.Last:default:this.addItemLast(item)}this._map.set(key,item),this._size++}}delete(key){const item=this._map.get(key);return!!item&&(this._map.delete(key),this.removeItem(item),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const item=this._head;return this._map.delete(item.key),this.removeItem(item),this._size--,item.value}forEach(callbackfn,thisArg){let current=this._head;for(;current;)thisArg?callbackfn.bind(thisArg)(current.value,current.key,this):callbackfn(current.value,current.key,this),current=current.next}forEachReverse(callbackfn,thisArg){let current=this._tail;for(;current;)thisArg?callbackfn.bind(thisArg)(current.value,current.key,this):callbackfn(current.value,current.key,this),current=current.previous}values(){let result=[],current=this._head;for(;current;)result.push(current.value),current=current.next;return result}keys(){let result=[],current=this._head;for(;current;)result.push(current.key),current=current.next;return result}addItemFirst(item){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");item.next=this._head,this._head.previous=item}else this._tail=item;this._head=item}addItemLast(item){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");item.previous=this._tail,this._tail.next=item}else this._head=item;this._tail=item}removeItem(item){if(item===this._head&&item===this._tail)this._head=void 0,this._tail=void 0;else if(item===this._head)this._head=item.next;else if(item===this._tail)this._tail=item.previous;else{const next=item.next,previous=item.previous;if(!next||!previous)throw new Error("Invalid list");next.previous=previous,previous.next=next}}touch(item,touch){if(!this._head||!this._tail)throw new Error("Invalid list");if(touch===Touch.First||touch===Touch.Last)if(touch===Touch.First){if(item===this._head)return;const next=item.next,previous=item.previous;item===this._tail?(previous.next=void 0,this._tail=previous):(next.previous=previous,previous.next=next),item.previous=void 0,item.next=this._head,this._head.previous=item,this._head=item}else if(touch===Touch.Last){if(item===this._tail)return;const next=item.next,previous=item.previous;item===this._head?(next.previous=void 0,this._head=next):(next.previous=previous,previous.next=next),item.next=void 0,item.previous=this._tail,this._tail.next=item,this._tail=item}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const path_1=__webpack_require__(9),os_1=__webpack_require__(18),crypto_1=__webpack_require__(19),net_1=__webpack_require__(62),messageReader_1=__webpack_require__(64),messageWriter_1=__webpack_require__(65);exports.generateRandomPipeName=function(){const randomSuffix=crypto_1.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${randomSuffix}-sock`:path_1.join(os_1.tmpdir(),`vscode-${randomSuffix}.sock`)},exports.createClientPipeTransport=function(pipeName,encoding="utf-8"){let connectResolve,connected=new Promise((resolve,_reject)=>{connectResolve=resolve});return new Promise((resolve,reject)=>{let server=net_1.createServer(socket=>{server.close(),connectResolve([new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)])});server.on("error",reject),server.listen(pipeName,()=>{server.removeListener("error",reject),resolve({onConnected:()=>connected})})})},exports.createServerPipeTransport=function(pipeName,encoding="utf-8"){const socket=net_1.createConnection(pipeName);return[new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const net_1=__webpack_require__(62),messageReader_1=__webpack_require__(64),messageWriter_1=__webpack_require__(65);exports.createClientSocketTransport=function(port,encoding="utf-8"){let connectResolve,connected=new Promise((resolve,_reject)=>{connectResolve=resolve});return new Promise((resolve,reject)=>{let server=net_1.createServer(socket=>{server.close(),connectResolve([new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)])});server.on("error",reject),server.listen(port,"127.0.0.1",()=>{server.removeListener("error",reject),resolve({onConnected:()=>connected})})})},exports.createServerSocketTransport=function(port,encoding="utf-8"){const socket=net_1.createConnection(port,"127.0.0.1");return[new messageReader_1.SocketMessageReader(socket,encoding),new messageWriter_1.SocketMessageWriter(socket,encoding)]}},function(module,__webpack_exports__,__webpack_require__){"use strict";var Position,Range,Location,LocationLink,Color,ColorInformation,ColorPresentation,FoldingRangeKind,FoldingRange,DiagnosticRelatedInformation,DiagnosticSeverity,DiagnosticTag,Diagnostic,Command,TextEdit,TextDocumentEdit,CreateFile,RenameFile,DeleteFile,WorkspaceEdit;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Position",(function(){return Position})),__webpack_require__.d(__webpack_exports__,"Range",(function(){return Range})),__webpack_require__.d(__webpack_exports__,"Location",(function(){return Location})),__webpack_require__.d(__webpack_exports__,"LocationLink",(function(){return LocationLink})),__webpack_require__.d(__webpack_exports__,"Color",(function(){return Color})),__webpack_require__.d(__webpack_exports__,"ColorInformation",(function(){return ColorInformation})),__webpack_require__.d(__webpack_exports__,"ColorPresentation",(function(){return ColorPresentation})),__webpack_require__.d(__webpack_exports__,"FoldingRangeKind",(function(){return FoldingRangeKind})),__webpack_require__.d(__webpack_exports__,"FoldingRange",(function(){return FoldingRange})),__webpack_require__.d(__webpack_exports__,"DiagnosticRelatedInformation",(function(){return DiagnosticRelatedInformation})),__webpack_require__.d(__webpack_exports__,"DiagnosticSeverity",(function(){return DiagnosticSeverity})),__webpack_require__.d(__webpack_exports__,"DiagnosticTag",(function(){return DiagnosticTag})),__webpack_require__.d(__webpack_exports__,"Diagnostic",(function(){return Diagnostic})),__webpack_require__.d(__webpack_exports__,"Command",(function(){return Command})),__webpack_require__.d(__webpack_exports__,"TextEdit",(function(){return TextEdit})),__webpack_require__.d(__webpack_exports__,"TextDocumentEdit",(function(){return TextDocumentEdit})),__webpack_require__.d(__webpack_exports__,"CreateFile",(function(){return CreateFile})),__webpack_require__.d(__webpack_exports__,"RenameFile",(function(){return RenameFile})),__webpack_require__.d(__webpack_exports__,"DeleteFile",(function(){return DeleteFile})),__webpack_require__.d(__webpack_exports__,"WorkspaceEdit",(function(){return WorkspaceEdit})),__webpack_require__.d(__webpack_exports__,"WorkspaceChange",(function(){return WorkspaceChange})),__webpack_require__.d(__webpack_exports__,"TextDocumentIdentifier",(function(){return TextDocumentIdentifier})),__webpack_require__.d(__webpack_exports__,"VersionedTextDocumentIdentifier",(function(){return VersionedTextDocumentIdentifier})),__webpack_require__.d(__webpack_exports__,"TextDocumentItem",(function(){return TextDocumentItem})),__webpack_require__.d(__webpack_exports__,"MarkupKind",(function(){return MarkupKind})),__webpack_require__.d(__webpack_exports__,"MarkupContent",(function(){return MarkupContent})),__webpack_require__.d(__webpack_exports__,"CompletionItemKind",(function(){return CompletionItemKind})),__webpack_require__.d(__webpack_exports__,"InsertTextFormat",(function(){return InsertTextFormat})),__webpack_require__.d(__webpack_exports__,"CompletionItemTag",(function(){return CompletionItemTag})),__webpack_require__.d(__webpack_exports__,"CompletionItem",(function(){return CompletionItem})),__webpack_require__.d(__webpack_exports__,"CompletionList",(function(){return CompletionList})),__webpack_require__.d(__webpack_exports__,"MarkedString",(function(){return MarkedString})),__webpack_require__.d(__webpack_exports__,"Hover",(function(){return Hover})),__webpack_require__.d(__webpack_exports__,"ParameterInformation",(function(){return ParameterInformation})),__webpack_require__.d(__webpack_exports__,"SignatureInformation",(function(){return SignatureInformation})),__webpack_require__.d(__webpack_exports__,"DocumentHighlightKind",(function(){return DocumentHighlightKind})),__webpack_require__.d(__webpack_exports__,"DocumentHighlight",(function(){return DocumentHighlight})),__webpack_require__.d(__webpack_exports__,"SymbolKind",(function(){return SymbolKind})),__webpack_require__.d(__webpack_exports__,"SymbolTag",(function(){return SymbolTag})),__webpack_require__.d(__webpack_exports__,"SymbolInformation",(function(){return SymbolInformation})),__webpack_require__.d(__webpack_exports__,"DocumentSymbol",(function(){return DocumentSymbol})),__webpack_require__.d(__webpack_exports__,"CodeActionKind",(function(){return CodeActionKind})),__webpack_require__.d(__webpack_exports__,"CodeActionContext",(function(){return CodeActionContext})),__webpack_require__.d(__webpack_exports__,"CodeAction",(function(){return CodeAction})),__webpack_require__.d(__webpack_exports__,"CodeLens",(function(){return CodeLens})),__webpack_require__.d(__webpack_exports__,"FormattingOptions",(function(){return FormattingOptions})),__webpack_require__.d(__webpack_exports__,"DocumentLink",(function(){return DocumentLink})),__webpack_require__.d(__webpack_exports__,"SelectionRange",(function(){return SelectionRange})),__webpack_require__.d(__webpack_exports__,"EOL",(function(){return EOL})),__webpack_require__.d(__webpack_exports__,"TextDocument",(function(){return TextDocument})),function(Position){Position.create=function(line,character){return{line:line,character:character}},Position.is=function(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.number(candidate.line)&&Is.number(candidate.character)}}(Position||(Position={})),function(Range){Range.create=function(one,two,three,four){if(Is.number(one)&&Is.number(two)&&Is.number(three)&&Is.number(four))return{start:Position.create(one,two),end:Position.create(three,four)};if(Position.is(one)&&Position.is(two))return{start:one,end:two};throw new Error("Range#create called with invalid arguments["+one+", "+two+", "+three+", "+four+"]")},Range.is=function(value){var candidate=value;return Is.objectLiteral(candidate)&&Position.is(candidate.start)&&Position.is(candidate.end)}}(Range||(Range={})),function(Location){Location.create=function(uri,range){return{uri:uri,range:range}},Location.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}}(Location||(Location={})),function(LocationLink){LocationLink.create=function(targetUri,targetRange,targetSelectionRange,originSelectionRange){return{targetUri:targetUri,targetRange:targetRange,targetSelectionRange:targetSelectionRange,originSelectionRange:originSelectionRange}},LocationLink.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.targetRange)&&Is.string(candidate.targetUri)&&(Range.is(candidate.targetSelectionRange)||Is.undefined(candidate.targetSelectionRange))&&(Range.is(candidate.originSelectionRange)||Is.undefined(candidate.originSelectionRange))}}(LocationLink||(LocationLink={})),function(Color){Color.create=function(red,green,blue,alpha){return{red:red,green:green,blue:blue,alpha:alpha}},Color.is=function(value){var candidate=value;return Is.number(candidate.red)&&Is.number(candidate.green)&&Is.number(candidate.blue)&&Is.number(candidate.alpha)}}(Color||(Color={})),function(ColorInformation){ColorInformation.create=function(range,color){return{range:range,color:color}},ColorInformation.is=function(value){var candidate=value;return Range.is(candidate.range)&&Color.is(candidate.color)}}(ColorInformation||(ColorInformation={})),function(ColorPresentation){ColorPresentation.create=function(label,textEdit,additionalTextEdits){return{label:label,textEdit:textEdit,additionalTextEdits:additionalTextEdits}},ColorPresentation.is=function(value){var candidate=value;return Is.string(candidate.label)&&(Is.undefined(candidate.textEdit)||TextEdit.is(candidate))&&(Is.undefined(candidate.additionalTextEdits)||Is.typedArray(candidate.additionalTextEdits,TextEdit.is))}}(ColorPresentation||(ColorPresentation={})),function(FoldingRangeKind){FoldingRangeKind.Comment="comment",FoldingRangeKind.Imports="imports",FoldingRangeKind.Region="region"}(FoldingRangeKind||(FoldingRangeKind={})),function(FoldingRange){FoldingRange.create=function(startLine,endLine,startCharacter,endCharacter,kind){var result={startLine:startLine,endLine:endLine};return Is.defined(startCharacter)&&(result.startCharacter=startCharacter),Is.defined(endCharacter)&&(result.endCharacter=endCharacter),Is.defined(kind)&&(result.kind=kind),result},FoldingRange.is=function(value){var candidate=value;return Is.number(candidate.startLine)&&Is.number(candidate.startLine)&&(Is.undefined(candidate.startCharacter)||Is.number(candidate.startCharacter))&&(Is.undefined(candidate.endCharacter)||Is.number(candidate.endCharacter))&&(Is.undefined(candidate.kind)||Is.string(candidate.kind))}}(FoldingRange||(FoldingRange={})),function(DiagnosticRelatedInformation){DiagnosticRelatedInformation.create=function(location,message){return{location:location,message:message}},DiagnosticRelatedInformation.is=function(value){var candidate=value;return Is.defined(candidate)&&Location.is(candidate.location)&&Is.string(candidate.message)}}(DiagnosticRelatedInformation||(DiagnosticRelatedInformation={})),function(DiagnosticSeverity){DiagnosticSeverity.Error=1,DiagnosticSeverity.Warning=2,DiagnosticSeverity.Information=3,DiagnosticSeverity.Hint=4}(DiagnosticSeverity||(DiagnosticSeverity={})),function(DiagnosticTag){DiagnosticTag.Unnecessary=1,DiagnosticTag.Deprecated=2}(DiagnosticTag||(DiagnosticTag={})),function(Diagnostic){Diagnostic.create=function(range,message,severity,code,source,relatedInformation){var result={range:range,message:message};return Is.defined(severity)&&(result.severity=severity),Is.defined(code)&&(result.code=code),Is.defined(source)&&(result.source=source),Is.defined(relatedInformation)&&(result.relatedInformation=relatedInformation),result},Diagnostic.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.number(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.string(candidate.source)||Is.undefined(candidate.source))&&(Is.undefined(candidate.relatedInformation)||Is.typedArray(candidate.relatedInformation,DiagnosticRelatedInformation.is))}}(Diagnostic||(Diagnostic={})),function(Command){Command.create=function(title,command){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var result={title:title,command:command};return Is.defined(args)&&args.length>0&&(result.arguments=args),result},Command.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.command)}}(Command||(Command={})),function(TextEdit){TextEdit.replace=function(range,newText){return{range:range,newText:newText}},TextEdit.insert=function(position,newText){return{range:{start:position,end:position},newText:newText}},TextEdit.del=function(range){return{range:range,newText:""}},TextEdit.is=function(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.newText)&&Range.is(candidate.range)}}(TextEdit||(TextEdit={})),function(TextDocumentEdit){TextDocumentEdit.create=function(textDocument,edits){return{textDocument:textDocument,edits:edits}},TextDocumentEdit.is=function(value){var candidate=value;return Is.defined(candidate)&&VersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}}(TextDocumentEdit||(TextDocumentEdit={})),function(CreateFile){CreateFile.create=function(uri,options){var result={kind:"create",uri:uri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),result},CreateFile.is=function(value){var candidate=value;return candidate&&"create"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))}}(CreateFile||(CreateFile={})),function(RenameFile){RenameFile.create=function(oldUri,newUri,options){var result={kind:"rename",oldUri:oldUri,newUri:newUri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),result},RenameFile.is=function(value){var candidate=value;return candidate&&"rename"===candidate.kind&&Is.string(candidate.oldUri)&&Is.string(candidate.newUri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))}}(RenameFile||(RenameFile={})),function(DeleteFile){DeleteFile.create=function(uri,options){var result={kind:"delete",uri:uri};return void 0===options||void 0===options.recursive&&void 0===options.ignoreIfNotExists||(result.options=options),result},DeleteFile.is=function(value){var candidate=value;return candidate&&"delete"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.recursive||Is.boolean(candidate.options.recursive))&&(void 0===candidate.options.ignoreIfNotExists||Is.boolean(candidate.options.ignoreIfNotExists)))}}(DeleteFile||(DeleteFile={})),function(WorkspaceEdit){WorkspaceEdit.is=function(value){var candidate=value;return candidate&&(void 0!==candidate.changes||void 0!==candidate.documentChanges)&&(void 0===candidate.documentChanges||candidate.documentChanges.every((function(change){return Is.string(change.kind)?CreateFile.is(change)||RenameFile.is(change)||DeleteFile.is(change):TextDocumentEdit.is(change)})))}}(WorkspaceEdit||(WorkspaceEdit={}));var TextDocumentIdentifier,VersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,MarkupContent,CompletionItemKind,InsertTextFormat,CompletionItemTag,CompletionItem,CompletionList,MarkedString,Hover,ParameterInformation,SignatureInformation,DocumentHighlightKind,DocumentHighlight,SymbolKind,SymbolTag,SymbolInformation,DocumentSymbol,CodeActionKind,CodeActionContext,CodeAction,CodeLens,FormattingOptions,DocumentLink,SelectionRange,TextEditChangeImpl=function(){function TextEditChangeImpl(edits){this.edits=edits}return TextEditChangeImpl.prototype.insert=function(position,newText){this.edits.push(TextEdit.insert(position,newText))},TextEditChangeImpl.prototype.replace=function(range,newText){this.edits.push(TextEdit.replace(range,newText))},TextEditChangeImpl.prototype.delete=function(range){this.edits.push(TextEdit.del(range))},TextEditChangeImpl.prototype.add=function(edit){this.edits.push(edit)},TextEditChangeImpl.prototype.all=function(){return this.edits},TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)},TextEditChangeImpl}(),WorkspaceChange=function(){function WorkspaceChange(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null),workspaceEdit&&(this._workspaceEdit=workspaceEdit,workspaceEdit.documentChanges?workspaceEdit.documentChanges.forEach((function(change){if(TextDocumentEdit.is(change)){var textEditChange=new TextEditChangeImpl(change.edits);_this._textEditChanges[change.textDocument.uri]=textEditChange}})):workspaceEdit.changes&&Object.keys(workspaceEdit.changes).forEach((function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange})))}return Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),WorkspaceChange.prototype.getTextEditChange=function(key){if(VersionedTextDocumentIdentifier.is(key)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var textDocument=key;if(!(result=this._textEditChanges[textDocument.uri])){var textDocumentEdit={textDocument:textDocument,edits:edits=[]};this._workspaceEdit.documentChanges.push(textDocumentEdit),result=new TextEditChangeImpl(edits),this._textEditChanges[textDocument.uri]=result}return result}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var result;if(!(result=this._textEditChanges[key])){var edits=[];this._workspaceEdit.changes[key]=edits,result=new TextEditChangeImpl(edits),this._textEditChanges[key]=result}return result},WorkspaceChange.prototype.createFile=function(uri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(CreateFile.create(uri,options))},WorkspaceChange.prototype.renameFile=function(oldUri,newUri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri,newUri,options))},WorkspaceChange.prototype.deleteFile=function(uri,options){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(DeleteFile.create(uri,options))},WorkspaceChange.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},WorkspaceChange}();!function(TextDocumentIdentifier){TextDocumentIdentifier.create=function(uri){return{uri:uri}},TextDocumentIdentifier.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)}}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(VersionedTextDocumentIdentifier){VersionedTextDocumentIdentifier.create=function(uri,version){return{uri:uri,version:version}},VersionedTextDocumentIdentifier.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(null===candidate.version||Is.number(candidate.version))}}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(TextDocumentItem){TextDocumentItem.create=function(uri,languageId,version,text){return{uri:uri,languageId:languageId,version:version,text:text}},TextDocumentItem.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.number(candidate.version)&&Is.string(candidate.text)}}(TextDocumentItem||(TextDocumentItem={})),function(MarkupKind){MarkupKind.PlainText="plaintext",MarkupKind.Markdown="markdown"}(MarkupKind||(MarkupKind={})),function(MarkupKind){MarkupKind.is=function(value){var candidate=value;return candidate===MarkupKind.PlainText||candidate===MarkupKind.Markdown}}(MarkupKind||(MarkupKind={})),function(MarkupContent){MarkupContent.is=function(value){var candidate=value;return Is.objectLiteral(value)&&MarkupKind.is(candidate.kind)&&Is.string(candidate.value)}}(MarkupContent||(MarkupContent={})),function(CompletionItemKind){CompletionItemKind.Text=1,CompletionItemKind.Method=2,CompletionItemKind.Function=3,CompletionItemKind.Constructor=4,CompletionItemKind.Field=5,CompletionItemKind.Variable=6,CompletionItemKind.Class=7,CompletionItemKind.Interface=8,CompletionItemKind.Module=9,CompletionItemKind.Property=10,CompletionItemKind.Unit=11,CompletionItemKind.Value=12,CompletionItemKind.Enum=13,CompletionItemKind.Keyword=14,CompletionItemKind.Snippet=15,CompletionItemKind.Color=16,CompletionItemKind.File=17,CompletionItemKind.Reference=18,CompletionItemKind.Folder=19,CompletionItemKind.EnumMember=20,CompletionItemKind.Constant=21,CompletionItemKind.Struct=22,CompletionItemKind.Event=23,CompletionItemKind.Operator=24,CompletionItemKind.TypeParameter=25}(CompletionItemKind||(CompletionItemKind={})),function(InsertTextFormat){InsertTextFormat.PlainText=1,InsertTextFormat.Snippet=2}(InsertTextFormat||(InsertTextFormat={})),function(CompletionItemTag){CompletionItemTag.Deprecated=1}(CompletionItemTag||(CompletionItemTag={})),function(CompletionItem){CompletionItem.create=function(label){return{label:label}}}(CompletionItem||(CompletionItem={})),function(CompletionList){CompletionList.create=function(items,isIncomplete){return{items:items||[],isIncomplete:!!isIncomplete}}}(CompletionList||(CompletionList={})),function(MarkedString){MarkedString.fromPlainText=function(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},MarkedString.is=function(value){var candidate=value;return Is.string(candidate)||Is.objectLiteral(candidate)&&Is.string(candidate.language)&&Is.string(candidate.value)}}(MarkedString||(MarkedString={})),function(Hover){Hover.is=function(value){var candidate=value;return!!candidate&&Is.objectLiteral(candidate)&&(MarkupContent.is(candidate.contents)||MarkedString.is(candidate.contents)||Is.typedArray(candidate.contents,MarkedString.is))&&(void 0===value.range||Range.is(value.range))}}(Hover||(Hover={})),function(ParameterInformation){ParameterInformation.create=function(label,documentation){return documentation?{label:label,documentation:documentation}:{label:label}}}(ParameterInformation||(ParameterInformation={})),function(SignatureInformation){SignatureInformation.create=function(label,documentation){for(var parameters=[],_i=2;_i<arguments.length;_i++)parameters[_i-2]=arguments[_i];var result={label:label};return Is.defined(documentation)&&(result.documentation=documentation),Is.defined(parameters)?result.parameters=parameters:result.parameters=[],result}}(SignatureInformation||(SignatureInformation={})),function(DocumentHighlightKind){DocumentHighlightKind.Text=1,DocumentHighlightKind.Read=2,DocumentHighlightKind.Write=3}(DocumentHighlightKind||(DocumentHighlightKind={})),function(DocumentHighlight){DocumentHighlight.create=function(range,kind){var result={range:range};return Is.number(kind)&&(result.kind=kind),result}}(DocumentHighlight||(DocumentHighlight={})),function(SymbolKind){SymbolKind.File=1,SymbolKind.Module=2,SymbolKind.Namespace=3,SymbolKind.Package=4,SymbolKind.Class=5,SymbolKind.Method=6,SymbolKind.Property=7,SymbolKind.Field=8,SymbolKind.Constructor=9,SymbolKind.Enum=10,SymbolKind.Interface=11,SymbolKind.Function=12,SymbolKind.Variable=13,SymbolKind.Constant=14,SymbolKind.String=15,SymbolKind.Number=16,SymbolKind.Boolean=17,SymbolKind.Array=18,SymbolKind.Object=19,SymbolKind.Key=20,SymbolKind.Null=21,SymbolKind.EnumMember=22,SymbolKind.Struct=23,SymbolKind.Event=24,SymbolKind.Operator=25,SymbolKind.TypeParameter=26}(SymbolKind||(SymbolKind={})),function(SymbolTag){SymbolTag.Deprecated=1}(SymbolTag||(SymbolTag={})),function(SymbolInformation){SymbolInformation.create=function(name,kind,range,uri,containerName){var result={name:name,kind:kind,location:{uri:uri,range:range}};return containerName&&(result.containerName=containerName),result}}(SymbolInformation||(SymbolInformation={})),function(DocumentSymbol){DocumentSymbol.create=function(name,detail,kind,range,selectionRange,children){var result={name:name,detail:detail,kind:kind,range:range,selectionRange:selectionRange};return void 0!==children&&(result.children=children),result},DocumentSymbol.is=function(value){var candidate=value;return candidate&&Is.string(candidate.name)&&Is.number(candidate.kind)&&Range.is(candidate.range)&&Range.is(candidate.selectionRange)&&(void 0===candidate.detail||Is.string(candidate.detail))&&(void 0===candidate.deprecated||Is.boolean(candidate.deprecated))&&(void 0===candidate.children||Array.isArray(candidate.children))}}(DocumentSymbol||(DocumentSymbol={})),function(CodeActionKind){CodeActionKind.Empty="",CodeActionKind.QuickFix="quickfix",CodeActionKind.Refactor="refactor",CodeActionKind.RefactorExtract="refactor.extract",CodeActionKind.RefactorInline="refactor.inline",CodeActionKind.RefactorRewrite="refactor.rewrite",CodeActionKind.Source="source",CodeActionKind.SourceOrganizeImports="source.organizeImports",CodeActionKind.SourceFixAll="source.fixAll"}(CodeActionKind||(CodeActionKind={})),function(CodeActionContext){CodeActionContext.create=function(diagnostics,only){var result={diagnostics:diagnostics};return null!=only&&(result.only=only),result},CodeActionContext.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)&&(void 0===candidate.only||Is.typedArray(candidate.only,Is.string))}}(CodeActionContext||(CodeActionContext={})),function(CodeAction){CodeAction.create=function(title,commandOrEdit,kind){var result={title:title};return Command.is(commandOrEdit)?result.command=commandOrEdit:result.edit=commandOrEdit,void 0!==kind&&(result.kind=kind),result},CodeAction.is=function(value){var candidate=value;return candidate&&Is.string(candidate.title)&&(void 0===candidate.diagnostics||Is.typedArray(candidate.diagnostics,Diagnostic.is))&&(void 0===candidate.kind||Is.string(candidate.kind))&&(void 0!==candidate.edit||void 0!==candidate.command)&&(void 0===candidate.command||Command.is(candidate.command))&&(void 0===candidate.isPreferred||Is.boolean(candidate.isPreferred))&&(void 0===candidate.edit||WorkspaceEdit.is(candidate.edit))}}(CodeAction||(CodeAction={})),function(CodeLens){CodeLens.create=function(range,data){var result={range:range};return Is.defined(data)&&(result.data=data),result},CodeLens.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}}(CodeLens||(CodeLens={})),function(FormattingOptions){FormattingOptions.create=function(tabSize,insertSpaces){return{tabSize:tabSize,insertSpaces:insertSpaces}},FormattingOptions.is=function(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}}(FormattingOptions||(FormattingOptions={})),function(DocumentLink){DocumentLink.create=function(range,target,data){return{range:range,target:target,data:data}},DocumentLink.is=function(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}}(DocumentLink||(DocumentLink={})),function(SelectionRange){SelectionRange.create=function(range,parent){return{range:range,parent:parent}},SelectionRange.is=function(value){var candidate=value;return void 0!==candidate&&Range.is(candidate.range)&&(void 0===candidate.parent||SelectionRange.is(candidate.parent))}}(SelectionRange||(SelectionRange={}));var TextDocument,EOL=["\n","\r\n","\r"];!function(TextDocument){TextDocument.create=function(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content)},TextDocument.is=function(value){var candidate=value;return!!(Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.number(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt))},TextDocument.applyEdits=function(document,edits){for(var text=document.getText(),sortedEdits=function mergeSort(data,compare){if(data.length<=1)return data;var p=data.length/2|0,left=data.slice(0,p),right=data.slice(p);mergeSort(left,compare),mergeSort(right,compare);var leftIdx=0,rightIdx=0,i=0;for(;leftIdx<left.length&&rightIdx<right.length;){var ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}(edits,(function(a,b){var diff=a.range.start.line-b.range.start.line;return 0===diff?a.range.start.character-b.range.start.character:diff})),lastModifiedOffset=text.length,i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i],startOffset=document.offsetAt(e.range.start),endOffset=document.offsetAt(e.range.end);if(!(endOffset<=lastModifiedOffset))throw new Error("Overlapping edit");text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length),lastModifiedOffset=startOffset}return text}}(TextDocument||(TextDocument={}));var Is,FullTextDocument=function(){function FullTextDocument(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=void 0}return Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),FullTextDocument.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content},FullTextDocument.prototype.update=function(event,version){this._content=event.text,this._version=version,this._lineOffsets=void 0},FullTextDocument.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var lineOffsets=[],text=this._content,isLineStart=!0,i=0;i<text.length;i++){isLineStart&&(lineOffsets.push(i),isLineStart=!1);var ch=text.charAt(i);isLineStart="\r"===ch||"\n"===ch,"\r"===ch&&i+1<text.length&&"\n"===text.charAt(i+1)&&i++}isLineStart&&text.length>0&&lineOffsets.push(text.length),this._lineOffsets=lineOffsets}return this._lineOffsets},FullTextDocument.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return Position.create(0,offset);for(;low<high;){var mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}var line=low-1;return Position.create(line,offset-lineOffsets[line])},FullTextDocument.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;var lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)},Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),FullTextDocument}();!function(Is){var toString=Object.prototype.toString;Is.defined=function(value){return void 0!==value},Is.undefined=function(value){return void 0===value},Is.boolean=function(value){return!0===value||!1===value},Is.string=function(value){return"[object String]"===toString.call(value)},Is.number=function(value){return"[object Number]"===toString.call(value)},Is.func=function(value){return"[object Function]"===toString.call(value)},Is.objectLiteral=function(value){return null!==value&&"object"==typeof value},Is.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)}}(Is||(Is={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const Is=__webpack_require__(205),vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11),protocol_implementation_1=__webpack_require__(206);exports.ImplementationRequest=protocol_implementation_1.ImplementationRequest;const protocol_typeDefinition_1=__webpack_require__(207);exports.TypeDefinitionRequest=protocol_typeDefinition_1.TypeDefinitionRequest;const protocol_workspaceFolders_1=__webpack_require__(208);exports.WorkspaceFoldersRequest=protocol_workspaceFolders_1.WorkspaceFoldersRequest,exports.DidChangeWorkspaceFoldersNotification=protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;const protocol_configuration_1=__webpack_require__(209);exports.ConfigurationRequest=protocol_configuration_1.ConfigurationRequest;const protocol_colorProvider_1=__webpack_require__(210);exports.DocumentColorRequest=protocol_colorProvider_1.DocumentColorRequest,exports.ColorPresentationRequest=protocol_colorProvider_1.ColorPresentationRequest;const protocol_foldingRange_1=__webpack_require__(211);exports.FoldingRangeRequest=protocol_foldingRange_1.FoldingRangeRequest;const protocol_declaration_1=__webpack_require__(212);exports.DeclarationRequest=protocol_declaration_1.DeclarationRequest;const protocol_selectionRange_1=__webpack_require__(213);exports.SelectionRangeRequest=protocol_selectionRange_1.SelectionRangeRequest;const protocol_progress_1=__webpack_require__(214);var DocumentFilter,DocumentSelector;exports.WorkDoneProgress=protocol_progress_1.WorkDoneProgress,exports.WorkDoneProgressCreateRequest=protocol_progress_1.WorkDoneProgressCreateRequest,exports.WorkDoneProgressCancelNotification=protocol_progress_1.WorkDoneProgressCancelNotification,function(DocumentFilter){DocumentFilter.is=function(value){const candidate=value;return Is.string(candidate.language)||Is.string(candidate.scheme)||Is.string(candidate.pattern)}}(DocumentFilter=exports.DocumentFilter||(exports.DocumentFilter={})),function(DocumentSelector){DocumentSelector.is=function(value){if(!Array.isArray(value))return!1;for(let elem of value)if(!Is.string(elem)&&!DocumentFilter.is(elem))return!1;return!0}}(DocumentSelector=exports.DocumentSelector||(exports.DocumentSelector={})),function(RegistrationRequest){RegistrationRequest.type=new messages_1.ProtocolRequestType("client/registerCapability")}(exports.RegistrationRequest||(exports.RegistrationRequest={})),function(UnregistrationRequest){UnregistrationRequest.type=new messages_1.ProtocolRequestType("client/unregisterCapability")}(exports.UnregistrationRequest||(exports.UnregistrationRequest={})),function(ResourceOperationKind){ResourceOperationKind.Create="create",ResourceOperationKind.Rename="rename",ResourceOperationKind.Delete="delete"}(exports.ResourceOperationKind||(exports.ResourceOperationKind={})),function(FailureHandlingKind){FailureHandlingKind.Abort="abort",FailureHandlingKind.Transactional="transactional",FailureHandlingKind.TextOnlyTransactional="textOnlyTransactional",FailureHandlingKind.Undo="undo"}(exports.FailureHandlingKind||(exports.FailureHandlingKind={})),function(StaticRegistrationOptions){StaticRegistrationOptions.hasId=function(value){const candidate=value;return candidate&&Is.string(candidate.id)&&candidate.id.length>0}}(exports.StaticRegistrationOptions||(exports.StaticRegistrationOptions={})),function(TextDocumentRegistrationOptions){TextDocumentRegistrationOptions.is=function(value){const candidate=value;return candidate&&(null===candidate.documentSelector||DocumentSelector.is(candidate.documentSelector))}}(exports.TextDocumentRegistrationOptions||(exports.TextDocumentRegistrationOptions={})),function(WorkDoneProgressOptions){WorkDoneProgressOptions.is=function(value){const candidate=value;return Is.objectLiteral(candidate)&&(void 0===candidate.workDoneProgress||Is.boolean(candidate.workDoneProgress))},WorkDoneProgressOptions.hasWorkDoneProgress=function(value){const candidate=value;return candidate&&Is.boolean(candidate.workDoneProgress)}}(exports.WorkDoneProgressOptions||(exports.WorkDoneProgressOptions={})),function(InitializeRequest){InitializeRequest.type=new messages_1.ProtocolRequestType("initialize")}(exports.InitializeRequest||(exports.InitializeRequest={})),function(InitializeError){InitializeError.unknownProtocolVersion=1}(exports.InitializeError||(exports.InitializeError={})),function(InitializedNotification){InitializedNotification.type=new messages_1.ProtocolNotificationType("initialized")}(exports.InitializedNotification||(exports.InitializedNotification={})),function(ShutdownRequest){ShutdownRequest.type=new messages_1.ProtocolRequestType0("shutdown")}(exports.ShutdownRequest||(exports.ShutdownRequest={})),function(ExitNotification){ExitNotification.type=new messages_1.ProtocolNotificationType0("exit")}(exports.ExitNotification||(exports.ExitNotification={})),function(DidChangeConfigurationNotification){DidChangeConfigurationNotification.type=new messages_1.ProtocolNotificationType("workspace/didChangeConfiguration")}(exports.DidChangeConfigurationNotification||(exports.DidChangeConfigurationNotification={})),function(MessageType){MessageType.Error=1,MessageType.Warning=2,MessageType.Info=3,MessageType.Log=4}(exports.MessageType||(exports.MessageType={})),function(ShowMessageNotification){ShowMessageNotification.type=new messages_1.ProtocolNotificationType("window/showMessage")}(exports.ShowMessageNotification||(exports.ShowMessageNotification={})),function(ShowMessageRequest){ShowMessageRequest.type=new messages_1.ProtocolRequestType("window/showMessageRequest")}(exports.ShowMessageRequest||(exports.ShowMessageRequest={})),function(LogMessageNotification){LogMessageNotification.type=new messages_1.ProtocolNotificationType("window/logMessage")}(exports.LogMessageNotification||(exports.LogMessageNotification={})),function(TelemetryEventNotification){TelemetryEventNotification.type=new messages_1.ProtocolNotificationType("telemetry/event")}(exports.TelemetryEventNotification||(exports.TelemetryEventNotification={})),function(TextDocumentSyncKind){TextDocumentSyncKind.None=0,TextDocumentSyncKind.Full=1,TextDocumentSyncKind.Incremental=2}(exports.TextDocumentSyncKind||(exports.TextDocumentSyncKind={})),function(DidOpenTextDocumentNotification){DidOpenTextDocumentNotification.method="textDocument/didOpen",DidOpenTextDocumentNotification.type=new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method)}(exports.DidOpenTextDocumentNotification||(exports.DidOpenTextDocumentNotification={})),function(DidChangeTextDocumentNotification){DidChangeTextDocumentNotification.method="textDocument/didChange",DidChangeTextDocumentNotification.type=new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method)}(exports.DidChangeTextDocumentNotification||(exports.DidChangeTextDocumentNotification={})),function(DidCloseTextDocumentNotification){DidCloseTextDocumentNotification.method="textDocument/didClose",DidCloseTextDocumentNotification.type=new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method)}(exports.DidCloseTextDocumentNotification||(exports.DidCloseTextDocumentNotification={})),function(DidSaveTextDocumentNotification){DidSaveTextDocumentNotification.method="textDocument/didSave",DidSaveTextDocumentNotification.type=new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method)}(exports.DidSaveTextDocumentNotification||(exports.DidSaveTextDocumentNotification={})),function(TextDocumentSaveReason){TextDocumentSaveReason.Manual=1,TextDocumentSaveReason.AfterDelay=2,TextDocumentSaveReason.FocusOut=3}(exports.TextDocumentSaveReason||(exports.TextDocumentSaveReason={})),function(WillSaveTextDocumentNotification){WillSaveTextDocumentNotification.method="textDocument/willSave",WillSaveTextDocumentNotification.type=new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method)}(exports.WillSaveTextDocumentNotification||(exports.WillSaveTextDocumentNotification={})),function(WillSaveTextDocumentWaitUntilRequest){WillSaveTextDocumentWaitUntilRequest.method="textDocument/willSaveWaitUntil",WillSaveTextDocumentWaitUntilRequest.type=new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method)}(exports.WillSaveTextDocumentWaitUntilRequest||(exports.WillSaveTextDocumentWaitUntilRequest={})),function(DidChangeWatchedFilesNotification){DidChangeWatchedFilesNotification.type=new messages_1.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(exports.DidChangeWatchedFilesNotification||(exports.DidChangeWatchedFilesNotification={})),function(FileChangeType){FileChangeType.Created=1,FileChangeType.Changed=2,FileChangeType.Deleted=3}(exports.FileChangeType||(exports.FileChangeType={})),function(WatchKind){WatchKind.Create=1,WatchKind.Change=2,WatchKind.Delete=4}(exports.WatchKind||(exports.WatchKind={})),function(PublishDiagnosticsNotification){PublishDiagnosticsNotification.type=new messages_1.ProtocolNotificationType("textDocument/publishDiagnostics")}(exports.PublishDiagnosticsNotification||(exports.PublishDiagnosticsNotification={})),function(CompletionTriggerKind){CompletionTriggerKind.Invoked=1,CompletionTriggerKind.TriggerCharacter=2,CompletionTriggerKind.TriggerForIncompleteCompletions=3}(exports.CompletionTriggerKind||(exports.CompletionTriggerKind={})),function(CompletionRequest){CompletionRequest.method="textDocument/completion",CompletionRequest.type=new messages_1.ProtocolRequestType(CompletionRequest.method),CompletionRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.CompletionRequest||(exports.CompletionRequest={})),function(CompletionResolveRequest){CompletionResolveRequest.method="completionItem/resolve",CompletionResolveRequest.type=new messages_1.ProtocolRequestType(CompletionResolveRequest.method)}(exports.CompletionResolveRequest||(exports.CompletionResolveRequest={})),function(HoverRequest){HoverRequest.method="textDocument/hover",HoverRequest.type=new messages_1.ProtocolRequestType(HoverRequest.method)}(exports.HoverRequest||(exports.HoverRequest={})),function(SignatureHelpTriggerKind){SignatureHelpTriggerKind.Invoked=1,SignatureHelpTriggerKind.TriggerCharacter=2,SignatureHelpTriggerKind.ContentChange=3}(exports.SignatureHelpTriggerKind||(exports.SignatureHelpTriggerKind={})),function(SignatureHelpRequest){SignatureHelpRequest.method="textDocument/signatureHelp",SignatureHelpRequest.type=new messages_1.ProtocolRequestType(SignatureHelpRequest.method)}(exports.SignatureHelpRequest||(exports.SignatureHelpRequest={})),function(DefinitionRequest){DefinitionRequest.method="textDocument/definition",DefinitionRequest.type=new messages_1.ProtocolRequestType(DefinitionRequest.method),DefinitionRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.DefinitionRequest||(exports.DefinitionRequest={})),function(ReferencesRequest){ReferencesRequest.method="textDocument/references",ReferencesRequest.type=new messages_1.ProtocolRequestType(ReferencesRequest.method),ReferencesRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.ReferencesRequest||(exports.ReferencesRequest={})),function(DocumentHighlightRequest){DocumentHighlightRequest.method="textDocument/documentHighlight",DocumentHighlightRequest.type=new messages_1.ProtocolRequestType(DocumentHighlightRequest.method),DocumentHighlightRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.DocumentHighlightRequest||(exports.DocumentHighlightRequest={})),function(DocumentSymbolRequest){DocumentSymbolRequest.method="textDocument/documentSymbol",DocumentSymbolRequest.type=new messages_1.ProtocolRequestType(DocumentSymbolRequest.method),DocumentSymbolRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.DocumentSymbolRequest||(exports.DocumentSymbolRequest={})),function(CodeActionRequest){CodeActionRequest.method="textDocument/codeAction",CodeActionRequest.type=new messages_1.ProtocolRequestType(CodeActionRequest.method),CodeActionRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.CodeActionRequest||(exports.CodeActionRequest={})),function(WorkspaceSymbolRequest){WorkspaceSymbolRequest.method="workspace/symbol",WorkspaceSymbolRequest.type=new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method),WorkspaceSymbolRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.WorkspaceSymbolRequest||(exports.WorkspaceSymbolRequest={})),function(CodeLensRequest){CodeLensRequest.type=new messages_1.ProtocolRequestType("textDocument/codeLens"),CodeLensRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.CodeLensRequest||(exports.CodeLensRequest={})),function(CodeLensResolveRequest){CodeLensResolveRequest.type=new messages_1.ProtocolRequestType("codeLens/resolve")}(exports.CodeLensResolveRequest||(exports.CodeLensResolveRequest={})),function(DocumentLinkRequest){DocumentLinkRequest.method="textDocument/documentLink",DocumentLinkRequest.type=new messages_1.ProtocolRequestType(DocumentLinkRequest.method),DocumentLinkRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.DocumentLinkRequest||(exports.DocumentLinkRequest={})),function(DocumentLinkResolveRequest){DocumentLinkResolveRequest.type=new messages_1.ProtocolRequestType("documentLink/resolve")}(exports.DocumentLinkResolveRequest||(exports.DocumentLinkResolveRequest={})),function(DocumentFormattingRequest){DocumentFormattingRequest.method="textDocument/formatting",DocumentFormattingRequest.type=new messages_1.ProtocolRequestType(DocumentFormattingRequest.method)}(exports.DocumentFormattingRequest||(exports.DocumentFormattingRequest={})),function(DocumentRangeFormattingRequest){DocumentRangeFormattingRequest.method="textDocument/rangeFormatting",DocumentRangeFormattingRequest.type=new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method)}(exports.DocumentRangeFormattingRequest||(exports.DocumentRangeFormattingRequest={})),function(DocumentOnTypeFormattingRequest){DocumentOnTypeFormattingRequest.method="textDocument/onTypeFormatting",DocumentOnTypeFormattingRequest.type=new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method)}(exports.DocumentOnTypeFormattingRequest||(exports.DocumentOnTypeFormattingRequest={})),function(RenameRequest){RenameRequest.method="textDocument/rename",RenameRequest.type=new messages_1.ProtocolRequestType(RenameRequest.method)}(exports.RenameRequest||(exports.RenameRequest={})),function(PrepareRenameRequest){PrepareRenameRequest.method="textDocument/prepareRename",PrepareRenameRequest.type=new messages_1.ProtocolRequestType(PrepareRenameRequest.method)}(exports.PrepareRenameRequest||(exports.PrepareRenameRequest={})),function(ExecuteCommandRequest){ExecuteCommandRequest.type=new messages_1.ProtocolRequestType("workspace/executeCommand")}(exports.ExecuteCommandRequest||(exports.ExecuteCommandRequest={})),function(ApplyWorkspaceEditRequest){ApplyWorkspaceEditRequest.type=new messages_1.ProtocolRequestType("workspace/applyEdit")}(exports.ApplyWorkspaceEditRequest||(exports.ApplyWorkspaceEditRequest={}))},function(module,exports,__webpack_require__){"use strict";function string(value){return"string"==typeof value||value instanceof String}function array(value){return Array.isArray(value)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.boolean=function(value){return!0===value||!1===value},exports.string=string,exports.number=function(value){return"number"==typeof value||value instanceof Number},exports.error=function(value){return value instanceof Error},exports.func=function(value){return"function"==typeof value},exports.array=array,exports.stringArray=function(value){return array(value)&&value.every(elem=>string(elem))},exports.typedArray=function(value,check){return Array.isArray(value)&&value.every(check)},exports.objectLiteral=function(value){return null!==value&&"object"==typeof value}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(ImplementationRequest){ImplementationRequest.method="textDocument/implementation",ImplementationRequest.type=new messages_1.ProtocolRequestType(ImplementationRequest.method),ImplementationRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.ImplementationRequest||(exports.ImplementationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(TypeDefinitionRequest){TypeDefinitionRequest.method="textDocument/typeDefinition",TypeDefinitionRequest.type=new messages_1.ProtocolRequestType(TypeDefinitionRequest.method),TypeDefinitionRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.TypeDefinitionRequest||(exports.TypeDefinitionRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const messages_1=__webpack_require__(11);!function(WorkspaceFoldersRequest){WorkspaceFoldersRequest.type=new messages_1.ProtocolRequestType0("workspace/workspaceFolders")}(exports.WorkspaceFoldersRequest||(exports.WorkspaceFoldersRequest={})),function(DidChangeWorkspaceFoldersNotification){DidChangeWorkspaceFoldersNotification.type=new messages_1.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(exports.DidChangeWorkspaceFoldersNotification||(exports.DidChangeWorkspaceFoldersNotification={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const messages_1=__webpack_require__(11);!function(ConfigurationRequest){ConfigurationRequest.type=new messages_1.ProtocolRequestType("workspace/configuration")}(exports.ConfigurationRequest||(exports.ConfigurationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(DocumentColorRequest){DocumentColorRequest.method="textDocument/documentColor",DocumentColorRequest.type=new messages_1.ProtocolRequestType(DocumentColorRequest.method),DocumentColorRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.DocumentColorRequest||(exports.DocumentColorRequest={})),function(ColorPresentationRequest){ColorPresentationRequest.type=new messages_1.ProtocolRequestType("textDocument/colorPresentation")}(exports.ColorPresentationRequest||(exports.ColorPresentationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(FoldingRangeKind){FoldingRangeKind.Comment="comment",FoldingRangeKind.Imports="imports",FoldingRangeKind.Region="region"}(exports.FoldingRangeKind||(exports.FoldingRangeKind={})),function(FoldingRangeRequest){FoldingRangeRequest.method="textDocument/foldingRange",FoldingRangeRequest.type=new messages_1.ProtocolRequestType(FoldingRangeRequest.method),FoldingRangeRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.FoldingRangeRequest||(exports.FoldingRangeRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(DeclarationRequest){DeclarationRequest.method="textDocument/declaration",DeclarationRequest.type=new messages_1.ProtocolRequestType(DeclarationRequest.method),DeclarationRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.DeclarationRequest||(exports.DeclarationRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(SelectionRangeRequest){SelectionRangeRequest.method="textDocument/selectionRange",SelectionRangeRequest.type=new messages_1.ProtocolRequestType(SelectionRangeRequest.method),SelectionRangeRequest.resultType=new vscode_jsonrpc_1.ProgressType}(exports.SelectionRangeRequest||(exports.SelectionRangeRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_jsonrpc_1=__webpack_require__(14),messages_1=__webpack_require__(11);!function(WorkDoneProgress){WorkDoneProgress.type=new vscode_jsonrpc_1.ProgressType}(exports.WorkDoneProgress||(exports.WorkDoneProgress={})),function(WorkDoneProgressCreateRequest){WorkDoneProgressCreateRequest.type=new messages_1.ProtocolRequestType("window/workDoneProgress/create")}(exports.WorkDoneProgressCreateRequest||(exports.WorkDoneProgressCreateRequest={})),function(WorkDoneProgressCancelNotification){WorkDoneProgressCancelNotification.type=new messages_1.ProtocolNotificationType("window/workDoneProgress/cancel")}(exports.WorkDoneProgressCancelNotification||(exports.WorkDoneProgressCancelNotification={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const messages_1=__webpack_require__(11);!function(CallHierarchyPrepareRequest){CallHierarchyPrepareRequest.method="textDocument/prepareCallHierarchy",CallHierarchyPrepareRequest.type=new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method)}(exports.CallHierarchyPrepareRequest||(exports.CallHierarchyPrepareRequest={})),function(CallHierarchyIncomingCallsRequest){CallHierarchyIncomingCallsRequest.method="callHierarchy/incomingCalls",CallHierarchyIncomingCallsRequest.type=new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method)}(exports.CallHierarchyIncomingCallsRequest||(exports.CallHierarchyIncomingCallsRequest={})),function(CallHierarchyOutgoingCallsRequest){CallHierarchyOutgoingCallsRequest.method="callHierarchy/outgoingCalls",CallHierarchyOutgoingCallsRequest.type=new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method)}(exports.CallHierarchyOutgoingCallsRequest||(exports.CallHierarchyOutgoingCallsRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const messages_1=__webpack_require__(11);!function(SemanticTokenTypes){SemanticTokenTypes.comment="comment",SemanticTokenTypes.keyword="keyword",SemanticTokenTypes.string="string",SemanticTokenTypes.number="number",SemanticTokenTypes.regexp="regexp",SemanticTokenTypes.operator="operator",SemanticTokenTypes.namespace="namespace",SemanticTokenTypes.type="type",SemanticTokenTypes.struct="struct",SemanticTokenTypes.class="class",SemanticTokenTypes.interface="interface",SemanticTokenTypes.enum="enum",SemanticTokenTypes.typeParameter="typeParameter",SemanticTokenTypes.function="function",SemanticTokenTypes.member="member",SemanticTokenTypes.property="property",SemanticTokenTypes.macro="macro",SemanticTokenTypes.variable="variable",SemanticTokenTypes.parameter="parameter",SemanticTokenTypes.label="label"}(exports.SemanticTokenTypes||(exports.SemanticTokenTypes={})),function(SemanticTokenModifiers){SemanticTokenModifiers.documentation="documentation",SemanticTokenModifiers.declaration="declaration",SemanticTokenModifiers.definition="definition",SemanticTokenModifiers.reference="reference",SemanticTokenModifiers.static="static",SemanticTokenModifiers.abstract="abstract",SemanticTokenModifiers.deprecated="deprecated",SemanticTokenModifiers.async="async",SemanticTokenModifiers.volatile="volatile",SemanticTokenModifiers.readonly="readonly"}(exports.SemanticTokenModifiers||(exports.SemanticTokenModifiers={})),function(SemanticTokens){SemanticTokens.is=function(value){const candidate=value;return void 0!==candidate&&(void 0===candidate.resultId||"string"==typeof candidate.resultId)&&Array.isArray(candidate.data)&&(0===candidate.data.length||"number"==typeof candidate.data[0])}}(exports.SemanticTokens||(exports.SemanticTokens={})),function(SemanticTokensRequest){SemanticTokensRequest.method="textDocument/semanticTokens",SemanticTokensRequest.type=new messages_1.ProtocolRequestType(SemanticTokensRequest.method)}(exports.SemanticTokensRequest||(exports.SemanticTokensRequest={})),function(SemanticTokensEditsRequest){SemanticTokensEditsRequest.method="textDocument/semanticTokens/edits",SemanticTokensEditsRequest.type=new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method)}(exports.SemanticTokensEditsRequest||(exports.SemanticTokensEditsRequest={})),function(SemanticTokensRangeRequest){SemanticTokensRangeRequest.method="textDocument/semanticTokens/range",SemanticTokensRangeRequest.type=new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method)}(exports.SemanticTokensRangeRequest||(exports.SemanticTokensRangeRequest={}))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(1),proto=__webpack_require__(4),Is=__webpack_require__(30),protocolCompletionItem_1=__webpack_require__(95),protocolCodeLens_1=__webpack_require__(96),protocolDocumentLink_1=__webpack_require__(97);exports.createConverter=function(uriConverter){const _uriConverter=uriConverter||(value=>value.toString());function asUri(value){return _uriConverter(value)}function asTextDocumentIdentifier(textDocument){return{uri:_uriConverter(textDocument.uri)}}function asVersionedTextDocumentIdentifier(textDocument){return{uri:_uriConverter(textDocument.uri),version:textDocument.version}}function asTextDocumentSaveReason(reason){switch(reason){case code.TextDocumentSaveReason.Manual:return proto.TextDocumentSaveReason.Manual;case code.TextDocumentSaveReason.AfterDelay:return proto.TextDocumentSaveReason.AfterDelay;case code.TextDocumentSaveReason.FocusOut:return proto.TextDocumentSaveReason.FocusOut}return proto.TextDocumentSaveReason.Manual}function asCompletionTriggerKind(triggerKind){switch(triggerKind){case code.CompletionTriggerKind.TriggerCharacter:return proto.CompletionTriggerKind.TriggerCharacter;case code.CompletionTriggerKind.TriggerForIncompleteCompletions:return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return proto.CompletionTriggerKind.Invoked}}function asSignatureHelpTriggerKind(triggerKind){switch(triggerKind){case code.SignatureHelpTriggerKind.Invoke:return proto.SignatureHelpTriggerKind.Invoked;case code.SignatureHelpTriggerKind.TriggerCharacter:return proto.SignatureHelpTriggerKind.TriggerCharacter;case code.SignatureHelpTriggerKind.ContentChange:return proto.SignatureHelpTriggerKind.ContentChange}}function asParameterInformation(value){return{label:value.label}}function asSignatureInformation(value){return{label:value.label,parameters:(values=value.parameters,values.map(asParameterInformation))};var values}function asWorkerPosition(position){return{line:position.line,character:position.character}}function asPosition(value){return null==value?value:{line:value.line,character:value.character}}function asRange(value){if(null==value)return value;if(function(value){const candidate=value;return candidate&&!!candidate.inserting&&!!candidate.replacing}(value))throw new Error("Receving unknown insert replace range.");return{start:asPosition(value.start),end:asPosition(value.end)}}function asLocation(value){return null==value?value:proto.Location.create(asUri(value.uri),asRange(value.range))}function asDiagnosticSeverity(value){switch(value){case code.DiagnosticSeverity.Error:return proto.DiagnosticSeverity.Error;case code.DiagnosticSeverity.Warning:return proto.DiagnosticSeverity.Warning;case code.DiagnosticSeverity.Information:return proto.DiagnosticSeverity.Information;case code.DiagnosticSeverity.Hint:return proto.DiagnosticSeverity.Hint}}function asDiagnosticTag(tag){switch(tag){case code.DiagnosticTag.Unnecessary:return proto.DiagnosticTag.Unnecessary;case code.DiagnosticTag.Deprecated:return proto.DiagnosticTag.Deprecated;default:return}}function asRelatedInformation(item){return{message:item.message,location:asLocation(item.location)}}function asDiagnostic(item){let result=proto.Diagnostic.create(asRange(item.range),item.message);return Is.number(item.severity)&&(result.severity=asDiagnosticSeverity(item.severity)),(Is.number(item.code)||Is.string(item.code))&&(result.code=item.code),Array.isArray(item.tags)&&(result.tags=function(tags){if(!tags)return;let result=[];for(let tag of tags){let converted=asDiagnosticTag(tag);void 0!==converted&&result.push(converted)}return result.length>0?result:void 0}(item.tags)),item.relatedInformation&&(result.relatedInformation=item.relatedInformation.map(asRelatedInformation)),item.source&&(result.source=item.source),result}function asDiagnostics(items){return null==items?items:items.map(asDiagnostic)}function asCompletionItemTag(tag){switch(tag){case code.CompletionItemTag.Deprecated:return proto.CompletionItemTag.Deprecated}}function asTextEdit(edit){return{range:asRange(edit.range),newText:edit.newText}}function asSymbolTag(item){return item}function asCommand(item){let result=proto.Command.create(item.title,item.command);return item.arguments&&(result.arguments=item.arguments),result}return{asUri:asUri,asTextDocumentIdentifier:asTextDocumentIdentifier,asVersionedTextDocumentIdentifier:asVersionedTextDocumentIdentifier,asOpenTextDocumentParams:function(textDocument){return{textDocument:{uri:_uriConverter(textDocument.uri),languageId:textDocument.languageId,version:textDocument.version,text:textDocument.getText()}}},asChangeTextDocumentParams:function(arg){if(function(value){let candidate=value;return!!candidate.uri&&!!candidate.version}(arg)){return{textDocument:{uri:_uriConverter(arg.uri),version:arg.version},contentChanges:[{text:arg.getText()}]}}if(function(value){let candidate=value;return!!candidate.document&&!!candidate.contentChanges}(arg)){let document=arg.document;return{textDocument:{uri:_uriConverter(document.uri),version:document.version},contentChanges:arg.contentChanges.map(change=>{let range=change.range;return{range:{start:{line:range.start.line,character:range.start.character},end:{line:range.end.line,character:range.end.character}},rangeLength:change.rangeLength,text:change.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}},asSaveTextDocumentParams:function(textDocument,includeContent=!1){let result={textDocument:asVersionedTextDocumentIdentifier(textDocument)};return includeContent&&(result.text=textDocument.getText()),result},asWillSaveTextDocumentParams:function(event){return{textDocument:asTextDocumentIdentifier(event.document),reason:asTextDocumentSaveReason(event.reason)}},asTextDocumentPositionParams:function(textDocument,position){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position)}},asCompletionParams:function(textDocument,position,context){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{triggerKind:asCompletionTriggerKind(context.triggerKind),triggerCharacter:context.triggerCharacter}}},asSignatureHelpParams:function(textDocument,position,context){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{isRetrigger:context.isRetrigger,triggerCharacter:context.triggerCharacter,triggerKind:asSignatureHelpTriggerKind(context.triggerKind),activeSignatureHelp:(value=context.activeSignatureHelp,void 0===value?value:{signatures:(values=value.signatures,values.map(asSignatureInformation)),activeSignature:value.activeSignature,activeParameter:value.activeParameter})}};var value,values},asWorkerPosition:asWorkerPosition,asRange:asRange,asPosition:asPosition,asPositions:function(value){let result=[];for(let elem of value)result.push(asPosition(elem));return result},asLocation:asLocation,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asDiagnostic:asDiagnostic,asDiagnostics:asDiagnostics,asCompletionItem:function(item){let result={label:item.label},protocolItem=item instanceof protocolCompletionItem_1.default?item:void 0;var value,original;item.detail&&(result.detail=item.detail),item.documentation&&(protocolItem&&"$string"!==protocolItem.documentationFormat?result.documentation=function(format,documentation){switch(format){case"$string":return documentation;case proto.MarkupKind.PlainText:return{kind:format,value:documentation};case proto.MarkupKind.Markdown:return{kind:format,value:documentation.value};default:return"Unsupported Markup content received. Kind is: "+format}}(protocolItem.documentationFormat,item.documentation):result.documentation=item.documentation),item.filterText&&(result.filterText=item.filterText),function(target,source){let format=proto.InsertTextFormat.PlainText,text=void 0,range=void 0;source.textEdit?(text=source.textEdit.newText,range=asRange(source.textEdit.range)):source.insertText instanceof code.SnippetString?(format=proto.InsertTextFormat.Snippet,text=source.insertText.value):text=source.insertText;source.range&&(range=asRange(source.range));target.insertTextFormat=format,source.fromEdit&&void 0!==text&&void 0!==range?target.textEdit={newText:text,range:range}:target.insertText=text}(result,item),Is.number(item.kind)&&(result.kind=(value=item.kind,void 0!==(original=protocolItem&&protocolItem.originalItemKind)?original:value+1)),item.sortText&&(result.sortText=item.sortText),item.additionalTextEdits&&(result.additionalTextEdits=function(edits){if(null==edits)return edits;return edits.map(asTextEdit)}(item.additionalTextEdits)),item.commitCharacters&&(result.commitCharacters=item.commitCharacters.slice()),item.command&&(result.command=asCommand(item.command)),!0!==item.preselect&&!1!==item.preselect||(result.preselect=item.preselect);const tags=function(tags){if(void 0===tags)return tags;const result=[];for(let tag of tags){const converted=asCompletionItemTag(tag);void 0!==converted&&result.push(converted)}return result}(item.tags);if(protocolItem&&(void 0!==protocolItem.data&&(result.data=protocolItem.data),!0===protocolItem.deprecated||!1===protocolItem.deprecated)){if(!0===protocolItem.deprecated&&void 0!==tags&&tags.length>0){const index=tags.indexOf(code.CompletionItemTag.Deprecated);-1!==index&&tags.splice(index,1)}result.deprecated=protocolItem.deprecated}return void 0!==tags&&tags.length>0&&(result.tags=tags),result},asTextEdit:asTextEdit,asSymbolKind:function(item){return item<=code.SymbolKind.TypeParameter?item+1:proto.SymbolKind.Property},asSymbolTag:asSymbolTag,asSymbolTags:function(items){return items.map(asSymbolTag)},asReferenceParams:function(textDocument,position,options){return{textDocument:asTextDocumentIdentifier(textDocument),position:asWorkerPosition(position),context:{includeDeclaration:options.includeDeclaration}}},asCodeActionContext:function(context){if(null==context)return context;let only;return context.only&&Is.string(context.only.value)&&(only=[context.only.value]),proto.CodeActionContext.create(asDiagnostics(context.diagnostics),only)},asCommand:asCommand,asCodeLens:function(item){let result=proto.CodeLens.create(asRange(item.range));return item.command&&(result.command=asCommand(item.command)),item instanceof protocolCodeLens_1.default&&item.data&&(result.data=item.data),result},asFormattingOptions:function(item){return{tabSize:item.tabSize,insertSpaces:item.insertSpaces}},asDocumentSymbolParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}},asCodeLensParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}},asDocumentLink:function(item){let result=proto.DocumentLink.create(asRange(item.range));item.target&&(result.target=asUri(item.target)),void 0!==item.tooltip&&(result.tooltip=item.tooltip);let protocolItem=item instanceof protocolDocumentLink_1.default?item:void 0;return protocolItem&&protocolItem.data&&(result.data=protocolItem.data),result},asDocumentLinkParams:function(textDocument){return{textDocument:asTextDocumentIdentifier(textDocument)}}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const code=__webpack_require__(1),ls=__webpack_require__(4),Is=__webpack_require__(30),protocolCompletionItem_1=__webpack_require__(95),protocolCodeLens_1=__webpack_require__(96),protocolDocumentLink_1=__webpack_require__(97);var CodeBlock;!function(CodeBlock){CodeBlock.is=function(value){let candidate=value;return candidate&&Is.string(candidate.language)&&Is.string(candidate.value)}}(CodeBlock||(CodeBlock={})),exports.createConverter=function(uriConverter){const _uriConverter=uriConverter||(value=>code.Uri.parse(value));function asUri(value){return _uriConverter(value)}function asDiagnostics(diagnostics){return diagnostics.map(asDiagnostic)}function asDiagnostic(diagnostic){let result=new code.Diagnostic(asRange(diagnostic.range),diagnostic.message,asDiagnosticSeverity(diagnostic.severity));return(Is.number(diagnostic.code)||Is.string(diagnostic.code))&&(result.code=diagnostic.code),diagnostic.source&&(result.source=diagnostic.source),diagnostic.relatedInformation&&(result.relatedInformation=diagnostic.relatedInformation.map(asDiagnosticRelatedInformation)),Array.isArray(diagnostic.tags)&&(result.tags=function(tags){if(!tags)return;let result=[];for(let tag of tags){let converted=asDiagnosticTag(tag);void 0!==converted&&result.push(converted)}return result.length>0?result:void 0}(diagnostic.tags)),result}function asDiagnosticRelatedInformation(information){return new code.DiagnosticRelatedInformation(asLocation(information.location),information.message)}function asDiagnosticTag(tag){switch(tag){case ls.DiagnosticTag.Unnecessary:return code.DiagnosticTag.Unnecessary;case ls.DiagnosticTag.Deprecated:return code.DiagnosticTag.Deprecated;default:return}}function asPosition(value){if(value)return new code.Position(value.line,value.character)}function asRange(value){if(value)return new code.Range(asPosition(value.start),asPosition(value.end))}function asDiagnosticSeverity(value){if(null==value)return code.DiagnosticSeverity.Error;switch(value){case ls.DiagnosticSeverity.Error:return code.DiagnosticSeverity.Error;case ls.DiagnosticSeverity.Warning:return code.DiagnosticSeverity.Warning;case ls.DiagnosticSeverity.Information:return code.DiagnosticSeverity.Information;case ls.DiagnosticSeverity.Hint:return code.DiagnosticSeverity.Hint}return code.DiagnosticSeverity.Error}function asDocumentation(value){if(Is.string(value))return value;switch(value.kind){case ls.MarkupKind.Markdown:return new code.MarkdownString(value.value);case ls.MarkupKind.PlainText:return value.value;default:return"Unsupported Markup content received. Kind is: "+value.kind}}function asCompletionItemTag(tag){switch(tag){case ls.CompletionItemTag.Deprecated:return code.CompletionItemTag.Deprecated}}function asCompletionItem(item){let tags=function(tags){if(null==tags)return[];const result=[];for(let tag of tags){const converted=asCompletionItemTag(tag);void 0!==converted&&result.push(converted)}return result}(item.tags),result=new protocolCompletionItem_1.default(item.label);item.detail&&(result.detail=item.detail),item.documentation&&(result.documentation=asDocumentation(item.documentation),result.documentationFormat=Is.string(item.documentation)?"$string":item.documentation.kind),item.filterText&&(result.filterText=item.filterText);let insertText=function(item){return item.textEdit?item.insertTextFormat===ls.InsertTextFormat.Snippet?{text:new code.SnippetString(item.textEdit.newText),range:asRange(item.textEdit.range),fromEdit:!0}:{text:item.textEdit.newText,range:asRange(item.textEdit.range),fromEdit:!0}:item.insertText?item.insertTextFormat===ls.InsertTextFormat.Snippet?{text:new code.SnippetString(item.insertText),fromEdit:!1}:{text:item.insertText,fromEdit:!1}:void 0}(item);if(insertText&&(result.insertText=insertText.text,result.range=insertText.range,result.fromEdit=insertText.fromEdit),Is.number(item.kind)){let[itemKind,original]=(value=item.kind,ls.CompletionItemKind.Text<=value&&value<=ls.CompletionItemKind.TypeParameter?[value-1,void 0]:[code.CompletionItemKind.Text,value]);result.kind=itemKind,original&&(result.originalItemKind=original)}var value;return item.sortText&&(result.sortText=item.sortText),item.additionalTextEdits&&(result.additionalTextEdits=asTextEdits(item.additionalTextEdits)),Is.stringArray(item.commitCharacters)&&(result.commitCharacters=item.commitCharacters.slice()),item.command&&(result.command=asCommand(item.command)),!0!==item.deprecated&&!1!==item.deprecated||(result.deprecated=item.deprecated,!0===item.deprecated&&tags.push(code.CompletionItemTag.Deprecated)),!0!==item.preselect&&!1!==item.preselect||(result.preselect=item.preselect),void 0!==item.data&&(result.data=item.data),tags.length>0&&(result.tags=tags),result}function asTextEdit(edit){if(edit)return new code.TextEdit(asRange(edit.range),edit.newText)}function asTextEdits(items){if(items)return items.map(asTextEdit)}function asSignatureInformations(items){return items.map(asSignatureInformation)}function asSignatureInformation(item){let result=new code.SignatureInformation(item.label);return item.documentation&&(result.documentation=asDocumentation(item.documentation)),item.parameters&&(result.parameters=asParameterInformations(item.parameters)),result}function asParameterInformations(item){return item.map(asParameterInformation)}function asParameterInformation(item){let result=new code.ParameterInformation(item.label);return item.documentation&&(result.documentation=asDocumentation(item.documentation)),result}function asLocation(item){if(item)return new code.Location(_uriConverter(item.uri),asRange(item.range))}function asLocationLink(item){if(!item)return;let result={targetUri:_uriConverter(item.targetUri),targetRange:asRange(item.targetSelectionRange),originSelectionRange:asRange(item.originSelectionRange),targetSelectionRange:asRange(item.targetSelectionRange)};if(!result.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return result}function asLocationResult(item){if(item){if(Is.array(item)){if(0===item.length)return[];if(ls.LocationLink.is(item[0])){return item.map(link=>asLocationLink(link))}return item.map(location=>asLocation(location))}return ls.LocationLink.is(item)?[asLocationLink(item)]:asLocation(item)}}function asDocumentHighlight(item){let result=new code.DocumentHighlight(asRange(item.range));return Is.number(item.kind)&&(result.kind=asDocumentHighlightKind(item.kind)),result}function asDocumentHighlightKind(item){switch(item){case ls.DocumentHighlightKind.Text:return code.DocumentHighlightKind.Text;case ls.DocumentHighlightKind.Read:return code.DocumentHighlightKind.Read;case ls.DocumentHighlightKind.Write:return code.DocumentHighlightKind.Write}return code.DocumentHighlightKind.Text}function asSymbolKind(item){return item<=ls.SymbolKind.TypeParameter?item-1:code.SymbolKind.Property}function asSymbolTag(value){return value}function asSymbolInformation(item,uri){let result=new code.SymbolInformation(item.name,asSymbolKind(item.kind),asRange(item.location.range),item.location.uri?_uriConverter(item.location.uri):uri);return item.containerName&&(result.containerName=item.containerName),result}function asDocumentSymbol(value){let result=new code.DocumentSymbol(value.name,value.detail||"",asSymbolKind(value.kind),asRange(value.range),asRange(value.selectionRange));if(void 0!==value.children&&value.children.length>0){let children=[];for(let child of value.children)children.push(asDocumentSymbol(child));result.children=children}return result}function asCommand(item){let result={title:item.title,command:item.command};return item.arguments&&(result.arguments=item.arguments),result}const kindMapping=new Map;function asCodeActionKind(item){if(null==item)return;let result=kindMapping.get(item);if(result)return result;let parts=item.split(".");result=code.CodeActionKind.Empty;for(let part of parts)result=result.append(part);return result}function asCodeLens(item){if(!item)return;let result=new protocolCodeLens_1.default(asRange(item.range));return item.command&&(result.command=asCommand(item.command)),void 0!==item.data&&null!==item.data&&(result.data=item.data),result}function asWorkspaceEdit(item){if(!item)return;let result=new code.WorkspaceEdit;return item.documentChanges?item.documentChanges.forEach(change=>{ls.CreateFile.is(change)?result.createFile(_uriConverter(change.uri),change.options):ls.RenameFile.is(change)?result.renameFile(_uriConverter(change.oldUri),_uriConverter(change.newUri),change.options):ls.DeleteFile.is(change)?result.deleteFile(_uriConverter(change.uri),change.options):ls.TextDocumentEdit.is(change)?result.set(_uriConverter(change.textDocument.uri),asTextEdits(change.edits)):console.error("Unknown workspace edit change received:\n"+JSON.stringify(change,void 0,4))}):item.changes&&Object.keys(item.changes).forEach(key=>{result.set(_uriConverter(key),asTextEdits(item.changes[key]))}),result}function asDocumentLink(item){let range=asRange(item.range),target=item.target?asUri(item.target):void 0,link=new protocolDocumentLink_1.default(range,target);return void 0!==item.tooltip&&(link.tooltip=item.tooltip),void 0!==item.data&&null!==item.data&&(link.data=item.data),link}function asColor(color){return new code.Color(color.red,color.green,color.blue,color.alpha)}function asColorInformation(ci){return new code.ColorInformation(asRange(ci.range),asColor(ci.color))}function asColorPresentation(cp){let presentation=new code.ColorPresentation(cp.label);return presentation.additionalTextEdits=asTextEdits(cp.additionalTextEdits),cp.textEdit&&(presentation.textEdit=asTextEdit(cp.textEdit)),presentation}function asFoldingRangeKind(kind){if(kind)switch(kind){case ls.FoldingRangeKind.Comment:return code.FoldingRangeKind.Comment;case ls.FoldingRangeKind.Imports:return code.FoldingRangeKind.Imports;case ls.FoldingRangeKind.Region:return code.FoldingRangeKind.Region}}function asFoldingRange(r){return new code.FoldingRange(r.startLine,r.endLine,asFoldingRangeKind(r.kind))}function asSelectionRange(selectionRange){return new code.SelectionRange(asRange(selectionRange.range),selectionRange.parent?asSelectionRange(selectionRange.parent):void 0)}return kindMapping.set(ls.CodeActionKind.Empty,code.CodeActionKind.Empty),kindMapping.set(ls.CodeActionKind.QuickFix,code.CodeActionKind.QuickFix),kindMapping.set(ls.CodeActionKind.Refactor,code.CodeActionKind.Refactor),kindMapping.set(ls.CodeActionKind.RefactorExtract,code.CodeActionKind.RefactorExtract),kindMapping.set(ls.CodeActionKind.RefactorInline,code.CodeActionKind.RefactorInline),kindMapping.set(ls.CodeActionKind.RefactorRewrite,code.CodeActionKind.RefactorRewrite),kindMapping.set(ls.CodeActionKind.Source,code.CodeActionKind.Source),kindMapping.set(ls.CodeActionKind.SourceOrganizeImports,code.CodeActionKind.SourceOrganizeImports),{asUri:asUri,asDiagnostics:asDiagnostics,asDiagnostic:asDiagnostic,asRange:asRange,asRanges:function(value){return value.map(value=>asRange(value))},asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asHover:function(hover){if(hover)return new code.Hover(function(value){if(Is.string(value))return new code.MarkdownString(value);if(CodeBlock.is(value)){return(new code.MarkdownString).appendCodeblock(value.value,value.language)}if(Array.isArray(value)){let result=[];for(let element of value){let item=new code.MarkdownString;CodeBlock.is(element)?item.appendCodeblock(element.value,element.language):item.appendMarkdown(element),result.push(item)}return result}{let result;switch(value.kind){case ls.MarkupKind.Markdown:return new code.MarkdownString(value.value);case ls.MarkupKind.PlainText:return result=new code.MarkdownString,result.appendText(value.value),result;default:return result=new code.MarkdownString,result.appendText("Unsupported Markup content received. Kind is: "+value.kind),result}}}(hover.contents),asRange(hover.range))},asCompletionResult:function(result){if(!result)return;if(Array.isArray(result)){return result.map(asCompletionItem)}let list=result;return new code.CompletionList(list.items.map(asCompletionItem),list.isIncomplete)},asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asTextEdits:asTextEdits,asSignatureHelp:function(item){if(!item)return;let result=new code.SignatureHelp;return Is.number(item.activeSignature)?result.activeSignature=item.activeSignature:result.activeSignature=0,Is.number(item.activeParameter)?result.activeParameter=item.activeParameter:result.activeParameter=0,item.signatures&&(result.signatures=asSignatureInformations(item.signatures)),result},asSignatureInformations:asSignatureInformations,asSignatureInformation:asSignatureInformation,asParameterInformations:asParameterInformations,asParameterInformation:asParameterInformation,asDeclarationResult:function(item){if(item)return asLocationResult(item)},asDefinitionResult:function(item){if(item)return asLocationResult(item)},asLocation:asLocation,asReferences:function(values){if(values)return values.map(location=>asLocation(location))},asDocumentHighlights:function(values){if(values)return values.map(asDocumentHighlight)},asDocumentHighlight:asDocumentHighlight,asDocumentHighlightKind:asDocumentHighlightKind,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:function(items){if(null!=items)return items.map(asSymbolTag)},asSymbolInformations:function(values,uri){if(values)return values.map(information=>asSymbolInformation(information,uri))},asSymbolInformation:asSymbolInformation,asDocumentSymbols:function(values){if(null!=values)return values.map(asDocumentSymbol)},asDocumentSymbol:asDocumentSymbol,asCommand:asCommand,asCommands:function(items){if(items)return items.map(asCommand)},asCodeAction:function(item){if(null==item)return;let result=new code.CodeAction(item.title);return void 0!==item.kind&&(result.kind=asCodeActionKind(item.kind)),item.diagnostics&&(result.diagnostics=asDiagnostics(item.diagnostics)),item.edit&&(result.edit=asWorkspaceEdit(item.edit)),item.command&&(result.command=asCommand(item.command)),void 0!==item.isPreferred&&(result.isPreferred=item.isPreferred),result},asCodeActionKind:asCodeActionKind,asCodeActionKinds:function(items){if(null!=items)return items.map(kind=>asCodeActionKind(kind))},asCodeLens:asCodeLens,asCodeLenses:function(items){if(items)return items.map(codeLens=>asCodeLens(codeLens))},asWorkspaceEdit:asWorkspaceEdit,asDocumentLink:asDocumentLink,asDocumentLinks:function(items){if(items)return items.map(asDocumentLink)},asFoldingRangeKind:asFoldingRangeKind,asFoldingRange:asFoldingRange,asFoldingRanges:function(foldingRanges){if(Array.isArray(foldingRanges))return foldingRanges.map(asFoldingRange)},asColor:asColor,asColorInformation:asColorInformation,asColorInformations:function(colorInformation){if(Array.isArray(colorInformation))return colorInformation.map(asColorInformation)},asColorPresentation:asColorPresentation,asColorPresentations:function(colorPresentations){if(Array.isArray(colorPresentations))return colorPresentations.map(asColorPresentation)},asSelectionRange:asSelectionRange,asSelectionRanges:function(selectionRanges){if(!Array.isArray(selectionRanges))return[];let result=[];for(let range of selectionRanges)result.push(asSelectionRange(range));return result}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Delayer=class Delayer{constructor(defaultDelay){this.defaultDelay=defaultDelay,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(task,delay=this.defaultDelay){return this.task=task,delay>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(resolve=>{this.onSuccess=resolve}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var result=this.task();return this.task=void 0,result})),(delay>=0||void 0===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},delay>=0?delay:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let result=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,result}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class ColorProviderFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DocumentColorRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(capabilities,documentSelector){let[id,options]=this.getRegistration(documentSelector,capabilities.colorProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const provider={provideColorPresentations:(color,context,token)=>{const client=this._client,provideColorPresentations=(color,context,token)=>{const requestParams={color:color,textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),range:client.code2ProtocolConverter.asRange(context.range)};return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,requestParams,token).then(this.asColorPresentations.bind(this),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,error),Promise.resolve(null)))},middleware=client.clientOptions.middleware;return middleware.provideColorPresentations?middleware.provideColorPresentations(color,context,token,provideColorPresentations):provideColorPresentations(color,context,token)},provideDocumentColors:(document,token)=>{const client=this._client,provideDocumentColors=(document,token)=>{const requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document)};return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type,requestParams,token).then(this.asColorInformations.bind(this),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type,error),Promise.resolve(null)))},middleware=client.clientOptions.middleware;return middleware.provideDocumentColors?middleware.provideDocumentColors(document,token,provideDocumentColors):provideDocumentColors(document,token)}};return[vscode_1.languages.registerColorProvider(options.documentSelector,provider),provider]}asColor(color){return new vscode_1.Color(color.red,color.green,color.blue,color.alpha)}asColorInformations(colorInformation){return Array.isArray(colorInformation)?colorInformation.map(ci=>new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range),this.asColor(ci.color))):[]}asColorPresentations(colorPresentations){return Array.isArray(colorPresentations)?colorPresentations.map(cp=>{let presentation=new vscode_1.ColorPresentation(cp.label);return presentation.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits),presentation.textEdit=this._client.protocol2CodeConverter.asTextEdit(cp.textEdit),presentation}):[]}}exports.ColorProviderFeature=ColorProviderFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4);exports.ConfigurationFeature=class ConfigurationFeature{constructor(_client){this._client=_client}fillClientCapabilities(capabilities){capabilities.workspace=capabilities.workspace||{},capabilities.workspace.configuration=!0}initialize(){let client=this._client;client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type,(params,token)=>{let configuration=params=>{let result=[];for(let item of params.items){let resource=void 0!==item.scopeUri&&null!==item.scopeUri?this._client.protocol2CodeConverter.asUri(item.scopeUri):void 0;result.push(this.getConfiguration(resource,null!==item.section?item.section:void 0))}return result},middleware=client.clientOptions.middleware.workspace;return middleware&&middleware.configuration?middleware.configuration(params,token,configuration):configuration(params)})}getConfiguration(resource,section){let result=null;if(section){let index=section.lastIndexOf(".");if(-1===index)result=vscode_1.workspace.getConfiguration(void 0,resource).get(section);else{let config=vscode_1.workspace.getConfiguration(section.substr(0,index),resource);config&&(result=config.get(section.substr(index+1)))}}else{let config=vscode_1.workspace.getConfiguration(void 0,resource);result={};for(let key of Object.keys(config))config.has(key)&&(result[key]=config.get(key))}return result||null}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class ImplementationFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.ImplementationRequest.type)}fillClientCapabilities(capabilites){let implementationSupport=ensure(ensure(capabilites,"textDocument"),"implementation");implementationSupport.dynamicRegistration=!0,implementationSupport.linkSupport=!0}initialize(capabilities,documentSelector){let[id,options]=this.getRegistration(documentSelector,capabilities.implementationProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const provider={provideImplementation:(document,position,token)=>{const client=this._client,provideImplementation=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDefinitionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return middleware.provideImplementation?middleware.provideImplementation(document,position,token,provideImplementation):provideImplementation(document,position,token)}};return[vscode_1.languages.registerImplementationProvider(options.documentSelector,provider),provider]}}exports.ImplementationFeature=ImplementationFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class TypeDefinitionFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.TypeDefinitionRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"typeDefinition").dynamicRegistration=!0;let typeDefinitionSupport=ensure(ensure(capabilites,"textDocument"),"typeDefinition");typeDefinitionSupport.dynamicRegistration=!0,typeDefinitionSupport.linkSupport=!0}initialize(capabilities,documentSelector){let[id,options]=this.getRegistration(documentSelector,capabilities.typeDefinitionProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const provider={provideTypeDefinition:(document,position,token)=>{const client=this._client,provideTypeDefinition=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDefinitionResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return middleware.provideTypeDefinition?middleware.provideTypeDefinition(document,position,token,provideTypeDefinition):provideTypeDefinition(document,position,token)}};return[vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector,provider),provider]}}exports.TypeDefinitionFeature=TypeDefinitionFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const UUID=__webpack_require__(98),vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4);function access(target,key){if(void 0!==target)return target[key]}function arrayDiff(left,right){return left.filter(element=>right.indexOf(element)<0)}exports.arrayDiff=arrayDiff;exports.WorkspaceFoldersFeature=class WorkspaceFoldersFeature{constructor(_client){this._client=_client,this._listeners=new Map}get messages(){return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(params){let folders=vscode_1.workspace.workspaceFolders;this.initializeWithFolders(folders),params.workspaceFolders=void 0===folders?null:folders.map(folder=>this.asProtocol(folder))}initializeWithFolders(currentWorkspaceFolders){this._initialFolders=currentWorkspaceFolders}fillClientCapabilities(capabilities){capabilities.workspace=capabilities.workspace||{},capabilities.workspace.workspaceFolders=!0}initialize(capabilities){let client=this._client;client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type,token=>{let workspaceFolders=()=>{let folders=vscode_1.workspace.workspaceFolders;return void 0===folders?null:folders.map(folder=>this.asProtocol(folder))},middleware=client.clientOptions.middleware.workspace;return middleware&&middleware.workspaceFolders?middleware.workspaceFolders(token,workspaceFolders):workspaceFolders()});let id,value=access(access(access(capabilities,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof value?id=value:!0===value&&(id=UUID.generateUuid()),id&&this.register(this.messages,{id:id,registerOptions:void 0})}sendInitialEvent(currentWorkspaceFolders){if(this._initialFolders&&currentWorkspaceFolders){const removed=arrayDiff(this._initialFolders,currentWorkspaceFolders),added=arrayDiff(currentWorkspaceFolders,this._initialFolders);(added.length>0||removed.length>0)&&this.doSendEvent(added,removed)}else this._initialFolders?this.doSendEvent([],this._initialFolders):currentWorkspaceFolders&&this.doSendEvent(currentWorkspaceFolders,[])}doSendEvent(addedFolders,removedFolders){let params={event:{added:addedFolders.map(folder=>this.asProtocol(folder)),removed:removedFolders.map(folder=>this.asProtocol(folder))}};this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type,params)}register(_message,data){let id=data.id,client=this._client,disposable=vscode_1.workspace.onDidChangeWorkspaceFolders(event=>{let didChangeWorkspaceFolders=event=>{this.doSendEvent(event.added,event.removed)},middleware=client.clientOptions.middleware.workspace;middleware&&middleware.didChangeWorkspaceFolders?middleware.didChangeWorkspaceFolders(event,didChangeWorkspaceFolders):didChangeWorkspaceFolders(event)});this._listeners.set(id,disposable),this.sendInitialEvent(vscode_1.workspace.workspaceFolders)}unregister(id){let disposable=this._listeners.get(id);void 0!==disposable&&(this._listeners.delete(id),disposable.dispose())}dispose(){for(let disposable of this._listeners.values())disposable.dispose();this._listeners.clear()}asProtocol(workspaceFolder){return void 0===workspaceFolder?null:{uri:this._client.code2ProtocolConverter.asUri(workspaceFolder.uri),name:workspaceFolder.name}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class FoldingRangeFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.FoldingRangeRequest.type)}fillClientCapabilities(capabilites){let capability=ensure(ensure(capabilites,"textDocument"),"foldingRange");capability.dynamicRegistration=!0,capability.rangeLimit=5e3,capability.lineFoldingOnly=!0}initialize(capabilities,documentSelector){let[id,options]=this.getRegistration(documentSelector,capabilities.foldingRangeProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const provider={provideFoldingRanges:(document,context,token)=>{const client=this._client,provideFoldingRanges=(document,_,token)=>{const requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document)};return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,requestParams,token).then(this.asFoldingRanges.bind(this),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type,error),Promise.resolve(null)))},middleware=client.clientOptions.middleware;return middleware.provideFoldingRanges?middleware.provideFoldingRanges(document,context,token,provideFoldingRanges):provideFoldingRanges(document,0,token)}};return[vscode_1.languages.registerFoldingRangeProvider(options.documentSelector,provider),provider]}asFoldingRangeKind(kind){if(kind)switch(kind){case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:return vscode_1.FoldingRangeKind.Comment;case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:return vscode_1.FoldingRangeKind.Imports;case vscode_languageserver_protocol_1.FoldingRangeKind.Region:return vscode_1.FoldingRangeKind.Region}}asFoldingRanges(foldingRanges){return Array.isArray(foldingRanges)?foldingRanges.map(r=>new vscode_1.FoldingRange(r.startLine,r.endLine,this.asFoldingRangeKind(r.kind))):[]}}exports.FoldingRangeFeature=FoldingRangeFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}class DeclarationFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.DeclarationRequest.type)}fillClientCapabilities(capabilites){const declarationSupport=ensure(ensure(capabilites,"textDocument"),"declaration");declarationSupport.dynamicRegistration=!0,declarationSupport.linkSupport=!0}initialize(capabilities,documentSelector){const[id,options]=this.getRegistration(documentSelector,capabilities.declarationProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const provider={provideDeclaration:(document,position,token)=>{const client=this._client,provideDeclaration=(document,position,token)=>client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,client.code2ProtocolConverter.asTextDocumentPositionParams(document,position),token).then(client.protocol2CodeConverter.asDeclarationResult,error=>(client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type,error),Promise.resolve(null))),middleware=client.clientOptions.middleware;return middleware.provideDeclaration?middleware.provideDeclaration(document,position,token,provideDeclaration):provideDeclaration(document,position,token)}};return[vscode_1.languages.registerDeclarationProvider(options.documentSelector,provider),provider]}}exports.DeclarationFeature=DeclarationFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]=Object.create(null)),target[key]}class SelectionRangeFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.SelectionRangeRequest.type)}fillClientCapabilities(capabilites){ensure(ensure(capabilites,"textDocument"),"selectionRange").dynamicRegistration=!0}initialize(capabilities,documentSelector){let[id,options]=this.getRegistration(documentSelector,capabilities.selectionRangeProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const provider={provideSelectionRanges:(document,positions,token)=>{const client=this._client,provideSelectionRanges=(document,positions,token)=>{const requestParams={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),positions:client.code2ProtocolConverter.asPositions(positions)};return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type,requestParams,token).then(ranges=>client.protocol2CodeConverter.asSelectionRanges(ranges),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type,error),Promise.resolve(null)))},middleware=client.clientOptions.middleware;return middleware.provideSelectionRanges?middleware.provideSelectionRanges(document,positions,token,provideSelectionRanges):provideSelectionRanges(document,positions,token)}};return[vscode_1.languages.registerSelectionRangeProvider(options.documentSelector,provider),provider]}}exports.SelectionRangeFeature=SelectionRangeFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=__webpack_require__(4),progressPart_1=__webpack_require__(99);exports.ProgressFeature=class ProgressFeature{constructor(_client){this._client=_client}fillClientCapabilities(capabilities){var target,key;(target=capabilities,key="window",void 0===target[key]&&(target[key]=Object.create(null)),target[key]).workDoneProgress=!0}initialize(){this._client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type,params=>{new progressPart_1.ProgressPart(this._client,params.token)})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),vscode_languageserver_protocol_1=__webpack_require__(4),client_1=__webpack_require__(13);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}var protocol2code,code2protocol;!function(protocol2code){function asCallHierarchyItem(converter,item){if(null===item)return;let result=new vscode_1.CallHierarchyItem(converter.asSymbolKind(item.kind),item.name,item.detail||"",converter.asUri(item.uri),converter.asRange(item.range),converter.asRange(item.selectionRange));return void 0!==item.tags&&(result.tags=converter.asSymbolTags(item.tags)),result}function asCallHierarchyIncomingCall(converter,item){return new vscode_1.CallHierarchyIncomingCall(asCallHierarchyItem(converter,item.from),converter.asRanges(item.fromRanges))}function asCallHierarchyOutgoingCall(converter,item){return new vscode_1.CallHierarchyOutgoingCall(asCallHierarchyItem(converter,item.to),converter.asRanges(item.fromRanges))}protocol2code.asCallHierarchyItem=asCallHierarchyItem,protocol2code.asCallHierarchyItems=function(converter,items){if(null===items)return;return items.map(item=>asCallHierarchyItem(converter,item))[0]},protocol2code.asCallHierarchyIncomingCall=asCallHierarchyIncomingCall,protocol2code.asCallHierarchyIncomingCalls=function(converter,items){if(null!==items)return items.map(item=>asCallHierarchyIncomingCall(converter,item))},protocol2code.asCallHierarchyOutgoingCall=asCallHierarchyOutgoingCall,protocol2code.asCallHierarchyOutgoingCalls=function(converter,items){if(null!==items)return items.map(item=>asCallHierarchyOutgoingCall(converter,item))}}(protocol2code||(protocol2code={})),function(code2protocol){code2protocol.asCallHierarchyItem=function(converter,value){const result={name:value.name,kind:converter.asSymbolKind(value.kind),uri:converter.asUri(value.uri),range:converter.asRange(value.range),selectionRange:converter.asRange(value.selectionRange)};return void 0!==value.detail&&value.detail.length>0&&(result.detail=value.detail),void 0!==value.tags&&(result.tags=converter.asSymbolTags(value.tags)),result}}(code2protocol||(code2protocol={}));class CallHierarchyProvider{constructor(client){this.client=client,this.middleware=client.clientOptions.middleware}prepareCallHierarchy(document,position,token){const client=this.client,middleware=this.middleware,prepareCallHierarchy=(document,position,token)=>{const params=client.code2ProtocolConverter.asTextDocumentPositionParams(document,position);return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type,params,token).then(result=>protocol2code.asCallHierarchyItems(this.client.protocol2CodeConverter,result),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type,error),Promise.resolve(null)))};return middleware.prepareCallHierarchy?middleware.prepareCallHierarchy(document,position,token,prepareCallHierarchy):prepareCallHierarchy(document,position,token)}provideCallHierarchyIncomingCalls(item,token){const client=this.client,middleware=this.middleware,provideCallHierarchyIncomingCalls=(item,token)=>{const params={item:code2protocol.asCallHierarchyItem(client.code2ProtocolConverter,item)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type,params,token).then(result=>protocol2code.asCallHierarchyIncomingCalls(client.protocol2CodeConverter,result),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type,error),Promise.resolve(null)))};return middleware.provideCallHierarchyIncomingCalls?middleware.provideCallHierarchyIncomingCalls(item,token,provideCallHierarchyIncomingCalls):provideCallHierarchyIncomingCalls(item,token)}provideCallHierarchyOutgoingCalls(item,token){const client=this.client,middleware=this.middleware,provideCallHierarchyOutgoingCalls=(item,token)=>{const params={item:code2protocol.asCallHierarchyItem(client.code2ProtocolConverter,item)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type,params,token).then(result=>protocol2code.asCallHierarchyOutgoingCalls(client.protocol2CodeConverter,result),error=>(client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type,error),Promise.resolve(null)))};return middleware.provideCallHierarchyOutgingCalls?middleware.provideCallHierarchyOutgingCalls(item,token,provideCallHierarchyOutgoingCalls):provideCallHierarchyOutgoingCalls(item,token)}}class CallHierarchyFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type)}fillClientCapabilities(cap){ensure(ensure(cap,"textDocument"),"callHierarchy").dynamicRegistration=!0}initialize(cap,documentSelector){const capabilities=cap,[id,options]=this.getRegistration(documentSelector,capabilities.callHierarchyProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const client=this._client,provider=new CallHierarchyProvider(client);return[vscode_1.languages.registerCallHierarchyProvider(options.documentSelector,provider),provider]}}exports.CallHierarchyFeature=CallHierarchyFeature},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode=__webpack_require__(1),client_1=__webpack_require__(13),vscode_languageserver_protocol_1=__webpack_require__(4);function ensure(target,key){return void 0===target[key]&&(target[key]={}),target[key]}var protocol2code;!function(protocol2code){function asSemanticTokensEdit(value){return new vscode.SemanticTokensEdit(value.start,value.deleteCount,void 0!==value.data?new Uint32Array(value.data):void 0)}protocol2code.asSemanticTokens=function(value){if(null!=value)return new vscode.SemanticTokens(new Uint32Array(value.data),value.resultId)},protocol2code.asSemanticTokensEdit=asSemanticTokensEdit,protocol2code.asSemanticTokensEdits=function(value){if(null!=value)return new vscode.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit),value.resultId)},protocol2code.asLegend=function(value){return value}}(protocol2code||(protocol2code={}));class SemanticTokensFeature extends client_1.TextDocumentFeature{constructor(client){super(client,vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type)}fillClientCapabilities(cap){let capability=ensure(ensure(cap,"textDocument"),"semanticTokens");capability.dynamicRegistration=!0,capability.tokenTypes=[vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.comment,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.keyword,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.number,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.regexp,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.operator,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.namespace,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.type,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.struct,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.class,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.interface,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enum,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.typeParameter,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.function,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.member,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.macro,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.variable,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.parameter,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.property,vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.label],capability.tokenModifiers=[vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.declaration,vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.documentation,vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.static,vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.abstract,vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.deprecated,vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.async,vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.readonly]}initialize(cap,documentSelector){const capabilities=cap;let[id,options]=this.getRegistration(documentSelector,capabilities.semanticTokensProvider);id&&options&&this.register(this.messages,{id:id,registerOptions:options})}registerLanguageProvider(options){const documentProvider={provideDocumentSemanticTokens:(document,token)=>{const client=this._client,middleware=client.clientOptions.middleware,provideDocumentSemanticTokens=(document,token)=>{const params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type,params,token).then(result=>protocol2code.asSemanticTokens(result),error=>{client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type,error)})};return middleware.provideDocumentSemanticTokens?middleware.provideDocumentSemanticTokens(document,token,provideDocumentSemanticTokens):provideDocumentSemanticTokens(document,token)},provideDocumentSemanticTokensEdits:void 0!==options.documentProvider&&"boolean"!=typeof options.documentProvider&&!0===options.documentProvider.edits?(document,previousResultId,token)=>{const client=this._client,middleware=client.clientOptions.middleware,provideDocumentSemanticTokensEdits=(document,previousResultId,token)=>{const params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),previousResultId:previousResultId};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type,params,token).then(result=>vscode_languageserver_protocol_1.Proposed.SemanticTokens.is(result)?protocol2code.asSemanticTokens(result):protocol2code.asSemanticTokensEdits(result),error=>{client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type,error)})};return middleware.provideDocumentSemanticTokensEdits?middleware.provideDocumentSemanticTokensEdits(document,previousResultId,token,provideDocumentSemanticTokensEdits):provideDocumentSemanticTokensEdits(document,previousResultId,token)}:void 0},rangeProvider=!0===options.rangeProvider?{provideDocumentRangeSemanticTokens:(document,range,token)=>{const client=this._client,middleware=client.clientOptions.middleware,provideDocumentRangeSemanticTokens=(document,range,token)=>{const params={textDocument:client.code2ProtocolConverter.asTextDocumentIdentifier(document),range:client.code2ProtocolConverter.asRange(range)};return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type,params,token).then(result=>protocol2code.asSemanticTokens(result),error=>{client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type,error)})};return middleware.provideDocumentRangeSemanticTokens?middleware.provideDocumentRangeSemanticTokens(document,range,token,provideDocumentRangeSemanticTokens):provideDocumentRangeSemanticTokens(document,range,token)}}:void 0,disposables=[],legend=protocol2code.asLegend(options.legend);return disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(options.documentSelector,documentProvider,legend)),void 0!==rangeProvider&&disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector,rangeProvider,legend)),[new vscode.Disposable(()=>disposables.forEach(item=>item.dispose())),{document:documentProvider,range:rangeProvider}]}}exports.SemanticTokensFeature=SemanticTokensFeature},function(module,exports,__webpack_require__){"use strict";(function(__dirname){Object.defineProperty(exports,"__esModule",{value:!0});const cp=__webpack_require__(39),path_1=__webpack_require__(9),isWindows="win32"===process.platform,isMacintosh="darwin"===process.platform,isLinux="linux"===process.platform;exports.terminate=function(process,cwd){if(isWindows)try{let options={stdio:["pipe","pipe","ignore"]};return cwd&&(options.cwd=cwd),cp.execFileSync("taskkill",["/T","/F","/PID",process.pid.toString()],options),!0}catch(err){return!1}else{if(!isLinux&&!isMacintosh)return process.kill("SIGKILL"),!0;try{var cmd=path_1.join(__dirname,"terminateProcess.sh");return!cp.spawnSync(cmd,[process.pid.toString()]).error}catch(err){return!1}}}}).call(this,"/")},function(module,exports,__webpack_require__){var SetCache=__webpack_require__(101),arrayIncludes=__webpack_require__(258),arrayIncludesWith=__webpack_require__(263),cacheHas=__webpack_require__(105),createSet=__webpack_require__(264),setToArray=__webpack_require__(69);module.exports=function(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(length>=200){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value;if(value=comparator||0!==value?value:0,isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}},function(module,exports,__webpack_require__){var Hash=__webpack_require__(234),ListCache=__webpack_require__(43),Map=__webpack_require__(68);module.exports=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}},function(module,exports,__webpack_require__){var hashClear=__webpack_require__(235),hashDelete=__webpack_require__(242),hashGet=__webpack_require__(243),hashHas=__webpack_require__(244),hashSet=__webpack_require__(245);function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,module.exports=Hash},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(41);module.exports=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}},function(module,exports,__webpack_require__){var isFunction=__webpack_require__(102),isMasked=__webpack_require__(239),isObject=__webpack_require__(42),toSource=__webpack_require__(104),reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=function(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value))}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(32),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},function(module,exports){var nativeObjectToString=Object.prototype.toString;module.exports=function(value){return nativeObjectToString.call(value)}},function(module,exports,__webpack_require__){var uid,coreJsData=__webpack_require__(240),maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";module.exports=function(func){return!!maskSrcKey&&maskSrcKey in func}},function(module,exports,__webpack_require__){var coreJsData=__webpack_require__(15)["__core-js_shared__"];module.exports=coreJsData},function(module,exports){module.exports=function(object,key){return null==object?void 0:object[key]}},function(module,exports){module.exports=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(41),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(41),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}},function(module,exports,__webpack_require__){var nativeCreate=__webpack_require__(41);module.exports=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this}},function(module,exports){module.exports=function(){this.__data__=[],this.size=0}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(44),splice=Array.prototype.splice;module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(44);module.exports=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(44);module.exports=function(key){return assocIndexOf(this.__data__,key)>-1}},function(module,exports,__webpack_require__){var assocIndexOf=__webpack_require__(44);module.exports=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(45);module.exports=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result}},function(module,exports){module.exports=function(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(45);module.exports=function(key){return getMapData(this,key).get(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(45);module.exports=function(key){return getMapData(this,key).has(key)}},function(module,exports,__webpack_require__){var getMapData=__webpack_require__(45);module.exports=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this}},function(module,exports){module.exports=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this}},function(module,exports){module.exports=function(value){return this.__data__.has(value)}},function(module,exports,__webpack_require__){var baseIndexOf=__webpack_require__(259);module.exports=function(array,value){return!!(null==array?0:array.length)&&baseIndexOf(array,value,0)>-1}},function(module,exports,__webpack_require__){var baseFindIndex=__webpack_require__(260),baseIsNaN=__webpack_require__(261),strictIndexOf=__webpack_require__(262);module.exports=function(array,value,fromIndex){return value==value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}},function(module,exports){module.exports=function(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}},function(module,exports){module.exports=function(value){return value!=value}},function(module,exports){module.exports=function(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}},function(module,exports){module.exports=function(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}},function(module,exports,__webpack_require__){var Set=__webpack_require__(106),noop=__webpack_require__(265),setToArray=__webpack_require__(69),createSet=Set&&1/setToArray(new Set([,-0]))[1]==1/0?function(values){return new Set(values)}:noop;module.exports=createSet},function(module,exports){module.exports=function(){}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Timer{constructor(){this.start()}elapsed(){if(this.s){if(this.e)return 1e3*this.e[0]+this.e[1]/1e6;{const end=process.hrtime(this.s);return 1e3*end[0]+end[1]/1e6}}return-1}start(){this.s=process.hrtime()}end(){this.e||(this.e=process.hrtime(this.s))}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(2),serializable_storage_1=__importDefault(__webpack_require__(268)),text_1=__webpack_require__(61),path_1=__webpack_require__(37);let setup;var Utils;!function(Utils){function getlastRunInfo(){if(setup)return setup.getContent();setup=new serializable_storage_1.default(path_1.getConfigPath(path_1.RUNNING_INFO_FILENAME));const localConfig={current:{numericVersion:text_1.numericVersion(constants_1.VERSION),releaseNotes:`${constants_1.DOCS_ROOT_URL}/changelog#v-${constants_1.VERSION.replace(/^\s*(v(\d+\.\d+\.\d+|[^\s]+)).*/gi,"$1").replace(/[^\w]/g,"-")}`,run:(new Date).getTime(),updated:!1,version:constants_1.VERSION,lastNotificationDate:0,installedExtPlugins:{}},onDisk:{numericVersion:0,run:0,version:"",lastNotificationDate:0,installedExtPlugins:{}}};try{localConfig.onDisk=setup.getContent(),localConfig.current.installedExtPlugins=localConfig.onDisk.installedExtPlugins,localConfig.current.updated=localConfig.current.numericVersion>localConfig.onDisk.numericVersion,localConfig.current.lastNotificationDate=localConfig.onDisk.lastNotificationDate||0}catch(e){}return setup.content(localConfig.current).save(),localConfig.current}Utils.getlastRunInfo=getlastRunInfo,Utils.updateLastRunInfo=function(propsUpdater){if(propsUpdater)try{const pastProps=getlastRunInfo();setup.content({...pastProps||{},...propsUpdater,installedExtPlugins:{...pastProps.installedExtPlugins||{},...propsUpdater.installedExtPlugins||{}}}).save()}catch(e){}}}(Utils||(Utils={})),exports.default=Utils},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const fs_1=__importDefault(__webpack_require__(6)),exception_1=__webpack_require__(27);exports.default=class SerializableStorage{constructor(storagePath,defaultSerializable={}){this.encoding="utf8",this.storagePath=null,this.defaultSerializable="{}",this.items={},this.defaultSerializable=JSON.stringify(defaultSerializable),this.storagePath=storagePath,this.items=defaultSerializable,this.read()}read(){try{const content=fs_1.default.readFileSync(this.storagePath,{encoding:this.encoding});content&&content.length>0?this.items=JSON.parse(content):this.reset().save()}catch(e){this.reset().save()}return this}serializeContent(){return new Buffer(JSON.stringify(this.items,null,2),"utf8")}save(){return this.write()}write(){return fs_1.default.writeFileSync(this.storagePath,this.serializeContent()),this}reset(){return this.items=JSON.parse(this.defaultSerializable),this}set(key,query){return this.items[key]=query,this.save()}get(key){if(!this.items[key])throw new exception_1.NotFoundError("Query not found!");return this.items[key]}delete(key){return this.get(key),delete this.items[key],this.save()}content(content){return this.items=content,this}getContent(){return this.items}}},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectionManagerPlugin=void 0;const explorer_1=__webpack_require__(270),results_1=__importDefault(__webpack_require__(341)),settings_1=__importDefault(__webpack_require__(342)),types_1=__webpack_require__(71),config_manager_1=__importDefault(__webpack_require__(12)),connection_1=__webpack_require__(17),constants_1=__webpack_require__(2),internal_id_1=__importDefault(__webpack_require__(344)),src_1=__importStar(__webpack_require__(10)),path_1=__webpack_require__(37),query_1=__webpack_require__(34),telemetry_1=__importDefault(__webpack_require__(38)),validation_1=__webpack_require__(91),context_1=__importDefault(__webpack_require__(8)),icons_1=__webpack_require__(70),utils_1=__webpack_require__(20),query_2=__webpack_require__(128),quickPick_1=__webpack_require__(77),path_2=__importDefault(__webpack_require__(9)),tempy_1=__webpack_require__(358),vscode_1=__webpack_require__(1),extension_1=__importDefault(__webpack_require__(363)),contracts_1=__webpack_require__(365),extension_2=__importDefault(__webpack_require__(366)),extension_util_1=__webpack_require__(127),status_bar_1=__importDefault(__webpack_require__(368)),attached_files_1=__webpack_require__(129),log=src_1.createLogger("conn-man");class ConnectionManagerPlugin{constructor(){this.name=plugin.name,this.ext_refreshTree=connIdOrTreeItem=>{if("string"==typeof connIdOrTreeItem)throw new Error(`Deprecated! ${constants_1.EXT_NAMESPACE}.refreshTree command with strings is now deprecated.`);if(!connIdOrTreeItem||Array.isArray(connIdOrTreeItem)&&0===connIdOrTreeItem.length)return this.explorer.refresh();(connIdOrTreeItem=Array.isArray(connIdOrTreeItem)?connIdOrTreeItem:[connIdOrTreeItem].filter(Boolean)).forEach(item=>this.explorer.refresh(item))},this.ext_testConnection=async c=>{let password=null;if(c.askForPassword&&(password=await this._askForPassword(c)),!c.askForPassword||null!==password)return this.client.sendRequest(contracts_1.TestConnectionRequest,{conn:c,password:password})},this.ext_getChildrenForTreeItem=async params=>this.client.sendRequest(contracts_1.GetChildrenForTreeItemRequest,params),this.ext_getInsertQuery=async params=>this.client.sendRequest(contracts_1.GetInsertQueryRequest,params),this.ext_executeFromInput=async()=>{try{const conn=await this.explorer.getActive()||await this._pickConnection(!0);if(!conn)return;const query=await utils_1.readInput("Query","Type the query to run on "+conn.name);return this.ext_executeQuery(query,{connNameOrId:connection_1.getConnectionId(conn)})}catch(e){this.errorHandler("Error running query.",e)}},this.ext_showRecords=async(node,opt={})=>{try{const table=await this._getTable(node),view=await this._openResultsWebview(opt.requestId),payload=await this._runConnectionCommandWithArgs("showRecords",table,{...opt,requestId:view.requestId});this.updateViewResults(view,payload)}catch(e){this.errorHandler("Error while showing table records",e)}},this.ext_describeTable=async node=>{try{const table=await this._getTable(node),view=await this._openResultsWebview(),payload=await this._runConnectionCommandWithArgs("describeTable",table,{requestId:view.requestId});this.updateViewResults(view,payload)}catch(e){this.errorHandler("Error while describing table records",e)}},this.ext_closeConnection=async node=>{const conn=node?node.conn:await this._pickConnection(!0);if(conn)try{await this.client.sendRequest(contracts_1.DisconnectRequest,{conn:conn}),telemetry_1.default.registerMessage("info","Connection closed!"),await this.explorer.refresh()}catch(e){return this.errorHandler("Error closing connection",e)}},this.updateViewResults=(view,results)=>{view.updateResults(results),results.length>0&&this.syncConsoleMessages(results[0].messages)},this.syncConsoleMessages=messages=>{this.explorer.addConsoleMessages(messages||[])},this.ext_selectConnection=async(connIdOrNode,trySessionFile=!0)=>{try{const dependencies=(context_1.default.globalState.get("extPlugins")||{}).drivers||[];if(await Promise.all(dependencies.map(extension_util_1.getExtension)),connIdOrNode){let conn=await this.getConnFromIdOrNode(connIdOrNode);return conn=await this._setConnection(conn).catch(e=>this.errorHandler("Error opening connection",e)),trySessionFile&&await this.openConnectionFile(conn),conn}const conn=await this._connect(!0);return trySessionFile&&await this.openConnectionFile(conn),conn}catch(error){return this.errorHandler("Error selecting connection",error)}},this.replaceParams=async query=>{if(!config_manager_1.default["queryParams.enableReplace"])return query;const params=query_1.getQueryParameters(query,config_manager_1.default["queryParams.regex"]);return params.length>0&&await new Promise((resolve,reject)=>{const ib=vscode_1.window.createInputBox();ib.step=1,ib.totalSteps=params.length,ib.ignoreFocusOut=!0,ib.title=`Value for '${params[ib.step-1].param}' in '${params[ib.step-1].string}'`,ib.prompt="Remember to escape values if needed.",ib.onDidAccept(()=>{const r=new RegExp(params[ib.step-1].param.replace(/([\$\[\]])/g,"\\$1"),"g");if(query=query.replace(r,ib.value),ib.step++,ib.step>ib.totalSteps)return ib.hide(),resolve();ib.value="",ib.title=`Value for '${params[ib.step-1].param}' in '${params[ib.step-1].string}'`}),ib.onDidHide(()=>ib.step>=ib.totalSteps&&ib.value.trim()?resolve():reject(new Error("Didn't fill all params. Cancelling..."))),ib.show()}),query},this.ext_executeQuery=async(query,{connNameOrId:connNameOrId,connId:connId,...opt}={})=>{try{if(query="string"==typeof query?query:await utils_1.getSelectedText("execute query"),(connNameOrId=connId||connNameOrId)||(connNameOrId=query_1.extractConnName(query)),!connNameOrId&&vscode_1.window.activeTextEditor&&(connNameOrId=attached_files_1.getAttachedConnection(vscode_1.window.activeTextEditor.document.uri)),connNameOrId&&connNameOrId.trim()){connNameOrId=connNameOrId.trim();const conn=(await this.ext_getConnections({connectedOnly:!1,sort:"connectedFirst"})).find(c=>connection_1.getConnectionId(c)===connNameOrId||c.name===connNameOrId);if(!conn)throw new Error(`Trying to run query on '${connNameOrId}' but it does not exist.`);await this._setConnection(conn)}else await this._connect();query=await this.replaceParams(query);const view=await this._openResultsWebview(opt.requestId),payload=await this._runConnectionCommandWithArgs("query",query,{...opt,requestId:view.requestId});return this.updateViewResults(view,payload),payload}catch(e){this.errorHandler("Error fetching records.",e)}},this.ext_executeCurrentQuery=async()=>{const activeEditor=await utils_1.getOrCreateEditor();if(!activeEditor)return;if(!activeEditor.selection.isEmpty)return this.ext_executeQuery();const{currentQuery:currentQuery}=query_2.getEditorQueryDetails(activeEditor);return this.ext_executeQuery(currentQuery)},this.ext_executeQueryFromFile=async()=>this.ext_executeQuery(await utils_1.getSelectedText("execute file",!0)),this.ext_showOutputChannel=async()=>src_1.default.show(),this.ext_saveResults=async(arg={})=>{let fileType=null,opt={};if(arg instanceof vscode_1.Uri){const view=this.resultsWebview.getActiveView();if(!view)throw"Can't find active results view";const state=await view.getState(),activeResult=state.resultTabs[state.activeTab];opt={requestId:activeResult.requestId,resultId:activeResult.resultId,baseQuery:activeResult.baseQuery,connId:activeResult.connId}}else if(arg.requestId){const{fileType:optFileType,...rest}=arg;fileType=optFileType,opt=rest}if(!opt||!opt.requestId)throw"Can't find active results view";if(fileType=fileType||config_manager_1.default.defaultExportType,"prompt"===fileType&&(fileType=await quickPick_1.quickPick([{label:"Save results as CSV",value:"csv"},{label:"Save results as JSON",value:"json"}],"value",{title:"Select a file type to export"})),!fileType||"prompt"===fileType)return;const filters="csv"===fileType?{"CSV File":["csv","txt"]}:{"JSON File":["json"]},file=await vscode_1.window.showSaveDialog({filters:filters,saveLabel:"Export"});if(!file)return;const filename=file.fsPath;return await this.client.sendRequest(contracts_1.SaveResultsRequest,{...opt,filename:filename,fileType:fileType}),vscode_1.commands.executeCommand("vscode.open",file)},this.ext_openResults=async(arg={})=>{let fileType=null,opt={};if(arg instanceof vscode_1.Uri){const view=this.resultsWebview.getActiveView();if(!view)throw"Can't find active results view";const state=await view.getState(),activeResult=state.resultTabs[state.activeTab];opt={requestId:activeResult.requestId,resultId:activeResult.resultId,baseQuery:activeResult.baseQuery,connId:activeResult.connId}}else if(arg.requestId){const{fileType:optFileType,...rest}=arg;fileType=optFileType,opt=rest}if(!opt||!opt.requestId)throw"Can't find active results view";if(fileType=fileType||config_manager_1.default.defaultOpenType,"prompt"===fileType&&(fileType=await quickPick_1.quickPick([{label:"Open results as CSV",value:"csv"},{label:"Open results as JSON",value:"json"}],"value",{title:"Select a file type"})),fileType&&"prompt"!==fileType){var filename=tempy_1.file({extension:fileType}),fileUri=vscode_1.Uri.file(filename);return await this.client.sendRequest(contracts_1.SaveResultsRequest,{...opt,filename:filename,fileType:fileType}),vscode_1.env.openExternal(fileUri)}},this.ext_openAddConnectionScreen=()=>(this.settingsWebview.show(),this.settingsWebview.reset()),this.ext_openEditConnectionScreen=async connIdOrNode=>{let conn;try{if(conn=await this.getConnFromIdOrNode(connIdOrNode),!conn)return;return await this.settingsWebview.editConnection({conn:conn})}catch(error){return this.errorHandler(`Error while trying to edit ${conn&&conn.name||"connection"}:`,error)}},this.ext_openSettings=async()=>vscode_1.commands.executeCommand("workbench.action.openSettings",constants_1.EXT_NAMESPACE+".connections"),this.ext_deleteConnection=async connIdOrNode=>{const conn=await this.getConnFromIdOrNode(connIdOrNode);if(!conn)return;if(!await vscode_1.window.showInformationMessage(`Are you sure you want to remove ${conn.name}?`,{modal:!0},"Yes"))return;const{workspaceFolderValue:workspaceFolderValue=[],workspaceValue:workspaceValue=[],globalValue:globalValue=[]}=vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).inspect("connections"),findIndex=(arr=[])=>arr.findIndex(c=>connection_1.getConnectionId(c)===conn.id);let index=findIndex(workspaceFolderValue);return index>=0?(workspaceFolderValue.splice(index,1),this.saveConnectionList(workspaceFolderValue,vscode_1.ConfigurationTarget.WorkspaceFolder)):(index=findIndex(workspaceValue),index>=0?(workspaceValue.splice(index,1),this.saveConnectionList(workspaceValue,vscode_1.ConfigurationTarget.Workspace)):(index=findIndex(globalValue),index>=0?(globalValue.splice(index,1),this.saveConnectionList(globalValue,vscode_1.ConfigurationTarget.Global)):void 0))},this.ext_addConnection=(connInfo,writeTo)=>{if(!connInfo)return void log.warn("Nothing to do. No parameter received");const connList=this.getConnectionList(vscode_1.ConfigurationTarget[writeTo]||void 0);return connList.push(connInfo),this.saveConnectionList(connList,vscode_1.ConfigurationTarget[writeTo])},this.ext_updateConnection=(oldId,connInfo,writeTo)=>{if(!connInfo)return void log.warn("Nothing to do. No parameter received");const connList=this.getConnectionList(vscode_1.ConfigurationTarget[writeTo]||void 0).filter(c=>connection_1.getConnectionId(c)!==oldId);return connList.push(connInfo),this.saveConnectionList(connList,vscode_1.ConfigurationTarget[writeTo])},this._connect=async(force=!1)=>{if(!force){const active=await this.explorer.getActive();if(active)return active}const c=await this._pickConnection(!force);return this._setConnection(c)},this.ext_getConnections=async({connectedOnly:connectedOnly,connId:connId,sort:sort}={})=>{try{return this.client.sendRequest(contracts_1.GetConnectionsRequest,{connectedOnly:connectedOnly,connId:connId,sort:sort})}catch(error){console.log(error)}},this.ext_attachFileToConnection=async fileUri=>{if(!fileUri&&!vscode_1.window.activeTextEditor)return;fileUri=fileUri||vscode_1.window.activeTextEditor.document.uri;const conn=await this._pickConnection();conn&&(this.updateAttachedConnectionsMap(fileUri,connection_1.getConnectionId(conn)),vscode_1.window.showTextDocument(fileUri))},this.ext_detachConnectionFromFile=async fileUri=>{if(!fileUri&&!vscode_1.window.activeTextEditor)return;fileUri=fileUri||vscode_1.window.activeTextEditor.document.uri;vscode_1.workspace.textDocuments.find(doc=>doc.uri.toString()===fileUri.toString())&&this.updateAttachedConnectionsMap(fileUri)},this.ext_copyTextFromTreeItem=async()=>{const nodes=this.explorer.getSelection();if(nodes&&0!==nodes.length)return vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".copyText",null,nodes)},this.changeTextEditorHandler=async editor=>{if(!editor||!editor.document)return;const connId=attached_files_1.getAttachedConnection(editor.document.uri);if(!connId)return vscode_1.commands.executeCommand("setContext",constants_1.EXT_NAMESPACE+".file.connectionAttached",!1);await this.ext_selectConnection(connId,editor.document.uri.scheme===constants_1.EXT_NAMESPACE),await vscode_1.commands.executeCommand("setContext",constants_1.EXT_NAMESPACE+".file.connectionAttached",!0)},this.onDidOpenOrCloseTextDocument=doc=>{if(doc&&doc.uri&&"output"!==doc.uri.scheme&&"git"!==doc.uri.scheme)return doc.isClosed?this.updateAttachedConnectionsMap(doc.uri):void this.explorer.refresh()},this.notifications={},this.handler_progressStart=params=>{if(this.notifications[params.id])return;const tokenSource=new vscode_1.CancellationTokenSource;vscode_1.window.withProgress({location:vscode_1.ProgressLocation.Notification,title:params.title,cancellable:!1},progress=>new Promise((resolve,reject)=>{progress.report({message:params.message});let executions=60;const complete=fn=>()=>(delete this.notifications[params.id],clearInterval(interval),fn()),interval=setInterval(()=>tokenSource.token.isCancellationRequested?complete(resolve)():(executions--,0===executions?complete(reject)():void 0),500),notification={progress:progress,tokenSource:tokenSource,interval:interval,resolve:complete(resolve),reject:complete(reject)};this.notifications[params.id]=notification}))},this.handler_progressComplete=params=>{if(this.notifications[params.id]){if(!params.message)return this.notifications[params.id].tokenSource.cancel();clearInterval(this.notifications[params.id].interval),this.notifications[params.id].progress.report({message:params.message,increment:100}),this.notifications[params.id].resolve()}},this.codeLensPlugin=new extension_1.default}ext_describeFunction(){vscode_1.window.showInformationMessage("Not implemented yet.")}async updateAttachedConnectionsMap(fileUri,connId){connId?await attached_files_1.attachConnection(fileUri,connId):await attached_files_1.removeAttachedConnection(fileUri),this.codeLensPlugin.reset(),this.changeTextEditorHandler(vscode_1.window.activeTextEditor)}async openConnectionFile(conn){if(!config_manager_1.default.autoOpenSessionFiles)return;if(!conn)return;let baseFolder;vscode_1.window.activeTextEditor&&vscode_1.window.activeTextEditor.document.uri&&vscode_1.workspace.getWorkspaceFolder(vscode_1.window.activeTextEditor.document.uri)&&(baseFolder=vscode_1.workspace.getWorkspaceFolder(vscode_1.window.activeTextEditor.document.uri).uri),!baseFolder&&vscode_1.workspace.workspaceFolders&&vscode_1.workspace.workspaceFolders.length>0&&(baseFolder=vscode_1.workspace.workspaceFolders&&vscode_1.workspace.workspaceFolders[0].uri),baseFolder||(baseFolder=vscode_1.Uri.file(path_1.getDataPath(path_1.SESSION_FILES_DIRNAME))),config_manager_1.default.sessionFilesFolder&&""!=config_manager_1.default.sessionFilesFolder&&(baseFolder=vscode_1.Uri.file(config_manager_1.default.sessionFilesFolder));const sessionFilePath=path_2.default.resolve(baseFolder.fsPath,connection_1.getSessionBasename(conn.name));try{this.updateAttachedConnectionsMap(await this.openSessionFileWithProtocol(sessionFilePath,"file"),connection_1.getConnectionId(conn))}catch(e){this.updateAttachedConnectionsMap(await this.openSessionFileWithProtocol(sessionFilePath),connection_1.getConnectionId(conn))}}async openSessionFileWithProtocol(uri,scheme="untitled"){const fileUri=vscode_1.Uri.parse("untitled:"+uri).with({scheme:scheme});return await vscode_1.window.showTextDocument(fileUri),fileUri}async _getTable(node){if(node instanceof explorer_1.SidebarItem&&node.conn)return await this._setConnection(node.conn),node.metadata;if(node)return node;const conn=await this._connect();return quickPick_1.quickPickSearch(search=>this.client.sendRequest(contracts_1.SearchConnectionItemsRequest,{conn:conn,itemType:types_1.ContextValue.TABLE,search:search}).then(({results:results})=>results),{matchOnDescription:!0,matchOnDetail:!0,title:"Tables in "+conn.database,placeHolder:"Type something to search tables..."})}async _openResultsWebview(reUseId){const requestId=reUseId||internal_id_1.default(),view=this.resultsWebview.get(requestId);return await view.show(),view}async _pickConnection(connectedOnly=!1){const connections=await this.ext_getConnections({connectedOnly:connectedOnly});if(0===connections.length&&connectedOnly)return this._pickConnection();if(connectedOnly&&1===connections.length)return connections[0];const sel=await quickPick_1.quickPick(connections.map(c=>({description:c.isConnected?"Currently connected":"",detail:(c.isConnected?"$(zap) ":"")+connection_1.getConnectionDescription(c),label:c.name,value:connection_1.getConnectionId(c)})),"value",{matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Pick a connection",placeHolderDisabled:"You don't have any connections yet.",title:"Connections",buttons:[{iconPath:icons_1.getIconPaths("add-connection"),tooltip:"Add new Connection",cb:()=>vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".openAddConnectionScreen")}]});return connections.find(c=>connection_1.getConnectionId(c)===sel)}async _runConnectionCommandWithArgs(command,...args){return this.client.sendRequest(contracts_1.RunCommandRequest,{conn:await this.explorer.getActive(),command:command,args:args})}async _askForPassword(c){return await this.client.sendRequest(contracts_1.GetConnectionPasswordRequest,{conn:c})||await vscode_1.window.showInputBox({prompt:c.name+" password",password:!0,validateInput:v=>validation_1.isEmpty(v)?"Password not provided.":null})}async _setConnection(c){let password=null;if(c&&(c.id=connection_1.getConnectionId(c)),c&&connection_1.getConnectionId(c)!==await this.explorer.getActiveId()){if(c.askForPassword&&(password=await this._askForPassword(c)),c.askForPassword&&null===password)return;c=await this.client.sendRequest(contracts_1.ConnectRequest,{conn:c,password:password})}return this.explorer.refresh(),c}async saveConnectionList(connList,writeTo){return writeTo||vscode_1.workspace.workspaceFolders&&0!==vscode_1.workspace.workspaceFolders.length||(writeTo=vscode_1.ConfigurationTarget.Global),vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).update("connections",connection_1.migrateConnectionSettings(connList),writeTo)}getConnectionList(from){if(!from)return connection_1.migrateConnectionSettings(vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).get("connections")||[]);const config=vscode_1.workspace.getConfiguration(constants_1.EXT_CONFIG_NAMESPACE).inspect("connections");return from===vscode_1.ConfigurationTarget.Global?connection_1.migrateConnectionSettings(config.globalValue||config.defaultValue||[]):from===vscode_1.ConfigurationTarget.WorkspaceFolder?connection_1.migrateConnectionSettings(config.workspaceFolderValue||config.defaultValue||[]):connection_1.migrateConnectionSettings(config.workspaceValue||config.defaultValue||[])}async getConnFromIdOrNode(connIdOrNode){let id,conn=null;return connIdOrNode?id=connIdOrNode instanceof explorer_1.SidebarConnection?connIdOrNode.getId():connIdOrNode:(conn=await this._pickConnection(),id=conn?connection_1.getConnectionId(conn):void 0),id?(conn||(conn=conn||await this.explorer.getConnectionById(id)),conn?(conn.id=connection_1.getConnectionId(conn),conn):null):null}register(extension){this.client||(extension.registerPlugin(this.codeLensPlugin),extension.registerPlugin(new extension_2.default),this.client=extension.client,extension.registerCommand("addConnection",this.ext_addConnection).registerCommand("updateConnection",this.ext_updateConnection).registerCommand("openAddConnectionScreen",this.ext_openAddConnectionScreen).registerCommand("openEditConnectionScreen",this.ext_openEditConnectionScreen).registerCommand("openSettings",this.ext_openSettings).registerCommand("closeConnection",this.ext_closeConnection).registerCommand("deleteConnection",this.ext_deleteConnection).registerCommand("describeFunction",this.ext_describeFunction).registerCommand("describeTable",this.ext_describeTable).registerCommand("executeFromInput",this.ext_executeFromInput).registerCommand("executeQuery",this.ext_executeQuery).registerCommand("executeCurrentQuery",this.ext_executeCurrentQuery).registerCommand("executeQueryFromFile",this.ext_executeQueryFromFile).registerCommand("refreshTree",this.ext_refreshTree).registerCommand("saveResults",this.ext_saveResults).registerCommand("openResults",this.ext_openResults).registerCommand("selectConnection",this.ext_selectConnection).registerCommand("showOutputChannel",this.ext_showOutputChannel).registerCommand("showRecords",this.ext_showRecords).registerCommand("attachFileToConnection",this.ext_attachFileToConnection).registerCommand("testConnection",this.ext_testConnection).registerCommand("getConnections",this.ext_getConnections).registerCommand("detachConnectionFromFile",this.ext_detachConnectionFromFile).registerCommand("copyTextFromTreeItem",this.ext_copyTextFromTreeItem).registerCommand("getChildrenForTreeItem",this.ext_getChildrenForTreeItem).registerCommand("getInsertQuery",this.ext_getInsertQuery),this.errorHandler=extension.errorHandler,this.explorer=new explorer_1.ConnectionExplorer,this.explorer.onDidChangeActiveConnection(active=>{status_bar_1.default.setText(active?active.name:null)}),this.client.onNotification(contracts_1.ProgressNotificationStart,this.handler_progressStart),this.client.onNotification(contracts_1.ProgressNotificationComplete,this.handler_progressComplete),this.client.onRequest(contracts_1.ForceListRefresh,()=>{this.explorer.refresh()}),context_1.default.subscriptions.push(this.resultsWebview=new results_1.default(this.syncConsoleMessages),this.settingsWebview=new settings_1.default,status_bar_1.default,vscode_1.workspace.onDidCloseTextDocument(this.onDidOpenOrCloseTextDocument),vscode_1.workspace.onDidOpenTextDocument(this.onDidOpenOrCloseTextDocument),vscode_1.window.onDidChangeActiveTextEditor(this.changeTextEditorHandler)),this.explorer.refresh(),this.changeTextEditorHandler(vscode_1.window.activeTextEditor),setTimeout(()=>{this.explorer.refresh()},2e3))}}exports.ConnectionManagerPlugin=ConnectionManagerPlugin,ConnectionManagerPlugin.instance=()=>(ConnectionManagerPlugin._instance||(ConnectionManagerPlugin._instance=new ConnectionManagerPlugin),ConnectionManagerPlugin._instance);const plugin={name:"Connection Manager Plugin",register:extension=>ConnectionManagerPlugin.instance().register(extension)};exports.default=plugin},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SidebarTreeItem=exports.SidebarItem=exports.SidebarConnection=exports.MessagesProvider=exports.ConnectionExplorer=void 0;const constants_1=__webpack_require__(2),connection_1=__webpack_require__(17),tree_items_1=__webpack_require__(271);Object.defineProperty(exports,"SidebarTreeItem",{enumerable:!0,get:function(){return tree_items_1.SidebarTreeItem}});const SidebarItem_1=__importDefault(__webpack_require__(109));exports.SidebarItem=SidebarItem_1.default;const SidebarConnection_1=__importDefault(__webpack_require__(272));exports.SidebarConnection=SidebarConnection_1.default;const vscode_1=__webpack_require__(1),sortBy_1=__importDefault(__webpack_require__(278)),src_1=__webpack_require__(10),context_1=__importDefault(__webpack_require__(8)),config_manager_1=__importDefault(__webpack_require__(12)),log=src_1.createLogger("conn-man:explorer");class ConnectionGroup extends vscode_1.TreeItem{constructor(){super(...arguments),this.items=[],this.isGroup=!0}getChildren(){return this.items}}const connectedTreeItem=new ConnectionGroup("Connected",vscode_1.TreeItemCollapsibleState.Expanded);connectedTreeItem.id="CONNECTED",connectedTreeItem.iconPath=vscode_1.ThemeIcon.Folder;const notConnectedTreeItem=new ConnectionGroup("Not Connected",vscode_1.TreeItemCollapsibleState.Expanded);notConnectedTreeItem.id="DISCONNECTED",notConnectedTreeItem.iconPath=vscode_1.ThemeIcon.Folder;class ConnectionExplorer{constructor(){this._onDidChangeTreeData=new vscode_1.EventEmitter,this._onDidChangeActiveConnection=new vscode_1.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.onDidChangeActiveConnection=this._onDidChangeActiveConnection.event,this.getTreeItem=element=>element,this.getParent=element=>element.parent||null,this.getConnectionsTreeItems=async()=>(await this.getConnections()).map(conn=>new SidebarConnection_1.default(conn)),this.getOrCreateConnectionGroup=(currentGroup,groupId,item)=>{let subGroup=currentGroup.items.find(it=>it.id===groupId);return subGroup||(subGroup=new ConnectionGroup(item.conn.group,vscode_1.TreeItemCollapsibleState.Expanded),subGroup.id=groupId,subGroup.iconPath=vscode_1.ThemeIcon.Folder,currentGroup.items.push(subGroup)),subGroup.description=subGroup.items.length+1+" connections",subGroup},this.treeView=vscode_1.window.createTreeView(constants_1.EXT_NAMESPACE+"ViewConnectionExplorer",{treeDataProvider:this,canSelectMany:!0,showCollapseAll:!0}),config_manager_1.default.addOnUpdateHook(({event:event})=>{(event.affectsConfig("flattenGroupsIfOne")||event.affectsConfig("connections")||event.affectsConfig("connectionExplorer.groupConnected")||event.affectsConfig("sortColumns"))&&this.refresh()}),this.messagesTreeViewProvider=new MessagesProvider,this.messagesTreeView=vscode_1.window.createTreeView(constants_1.EXT_NAMESPACE+"ViewConsoleMessages",{treeDataProvider:this.messagesTreeViewProvider,canSelectMany:!1,showCollapseAll:!0}),context_1.default.subscriptions.push(this.treeView,this.messagesTreeView)}async getActive(){const active=(await this.getConnections()).find(c=>c.isActive);return active?{...active,id:connection_1.getConnectionId(active)}:null}async getActiveId(){const active=await this.getActive();return active?active.id:null}async getChildren(element){if(!element)return this.getRootItems();const items=await element.getChildren();return config_manager_1.default.flattenGroupsIfOne&&1===items.length?this.getChildren(items[0]):items}refresh(item){this._onDidChangeTreeData.fire(item),log.info(("Connection explorer changed. Will be updated. "+(item?"Changed item: "+item.label:"")).trim())}async getConnectionById(id){if(!id)return null;return(await this.getConnections()).find(c=>connection_1.getConnectionId(c)===id)||null}getSelection(){return this.treeView.selection}getConnections(){return vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".getConnections")}async getRootItems(){const groupConnected=config_manager_1.default["connectionExplorer.groupConnected"],items=await this.getConnectionsTreeItems();if(0===items.length)return null;let active=null;if(groupConnected)return this.getGroupedRootItems(items);const root=new ConnectionGroup("Root");return root.items=[],items.forEach(item=>{item.isActive&&(active=item.conn);let currentGroup=root;if(item.conn&&item.conn.group){const groupId="GID:"+item.conn.group;currentGroup=this.getOrCreateConnectionGroup(currentGroup,groupId,item)}currentGroup.items.push(item)}),this._onDidChangeActiveConnection.fire(active),root.items=sortBy_1.default(root.items,["isGroup","label"]),root.items}getGroupedRootItems(items){connectedTreeItem.items=[],notConnectedTreeItem.items=[];let connectedTreeCount=0,notConnectedTreeCount=0,active=null;return items.forEach(item=>{item.isActive&&(active=item.conn);let currentGroup=null;if(item.isConnected?(currentGroup=connectedTreeItem,connectedTreeCount++):(currentGroup=notConnectedTreeItem,notConnectedTreeCount++),item.conn&&item.conn.group){const groupId=`GID:${item.isConnected?"C":"N"}:${item.conn.group}`;currentGroup=this.getOrCreateConnectionGroup(currentGroup,groupId,item)}currentGroup.items.push(item)}),this._onDidChangeActiveConnection.fire(active),connectedTreeItem.items=sortBy_1.default(connectedTreeItem.items,["isGroup","label"]),notConnectedTreeItem.items=sortBy_1.default(notConnectedTreeItem.items,["isGroup","label"]),notConnectedTreeItem.description=notConnectedTreeCount+" connections",connectedTreeItem.description=connectedTreeCount+" connections",[connectedTreeItem,notConnectedTreeItem].filter(a=>a.items.length>0)}get addConsoleMessages(){return this.messagesTreeViewProvider.addMessages}}exports.ConnectionExplorer=ConnectionExplorer;class MessagesProvider{constructor(){this.items=[],this._onDidChangeTreeData=new vscode_1.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.getParent=_=>null,this.addMessages=(messages=[])=>{this.items=messages.map(m=>{let item;if("string"==typeof m)item=new vscode_1.TreeItem(m,vscode_1.TreeItemCollapsibleState.None),item.tooltip=m;else{item=new vscode_1.TreeItem(m.message,vscode_1.TreeItemCollapsibleState.None);const date=new Date(m.date||void 0);item.description=date.toLocaleTimeString(),item.tooltip=date.toString()}return item.detail="DETAIL",item.contextValue="consoleMessage",item.command={title:"Copy message",command:constants_1.EXT_NAMESPACE+".copyText",arguments:[item.label]},item}),this._onDidChangeTreeData.fire(null)}}getTreeItem(element){return element}async getChildren(element){return element?Promise.resolve(null):Promise.resolve(this.items)}}exports.MessagesProvider=MessagesProvider,exports.default=ConnectionExplorer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(2),types_1=__webpack_require__(71),connection_1=__webpack_require__(17),vscode_1=__webpack_require__(1),SidebarAbstractItem_1=__importDefault(__webpack_require__(110)),SidebarItem_1=__importDefault(__webpack_require__(109)),get_1=__importDefault(__webpack_require__(111)),src_1=__webpack_require__(10),plugin_resources_1=__importStar(__webpack_require__(63)),log=src_1.createLogger("conn-explorer");class SidebarConnection extends SidebarAbstractItem_1.default{constructor(conn){super(conn.name,conn.isConnected?vscode_1.TreeItemCollapsibleState.Collapsed:vscode_1.TreeItemCollapsibleState.None),this.conn=conn,this.parent=null,this.getIcon=type=>{if(get_1.default(this,["conn","icons",type]))return vscode_1.Uri.parse(this.conn.icons[type]);return vscode_1.Uri.parse((plugin_resources_1.default.get(plugin_resources_1.buildResouceKey({type:"driver",name:this.conn.driver,resource:"icons"}))||{})[{active:"active",connected:"default",disconnected:"inactive"}[type]||"default"])}}get contextValue(){return this.isConnected?types_1.ContextValue.CONNECTED_CONNECTION:types_1.ContextValue.CONNECTION}get description(){return connection_1.getConnectionDescription(this.conn)}get isConnected(){return this.conn.isConnected}get id(){return this.getId()}get value(){return this.conn.database}get metadata(){return{label:this.label,type:this.contextValue}}get tooltip(){if(this.isActive)return"Active Connection - Queries will run for this connection"}async getChildren(){this.isConnected||await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".selectConnection",this);return(await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".getChildrenForTreeItem",{conn:this.conn,item:this.metadata})).map(item=>new SidebarItem_1.default(item,this))}get command(){if(!this.isActive)return{title:"Connect",command:constants_1.EXT_NAMESPACE+".selectConnection",arguments:[this]}}get iconPath(){try{return this.isActive?this.getIcon("active"):this.contextValue===types_1.ContextValue.CONNECTED_CONNECTION?this.getIcon("connected"):this.getIcon("disconnected")}catch(error){log.error(error)}}getId(){return connection_1.getConnectionId(this.conn)}get isActive(){return this.conn.isActive}}exports.default=SidebarConnection},function(module,exports,__webpack_require__){var memoizeCapped=__webpack_require__(274),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}));module.exports=stringToPath},function(module,exports,__webpack_require__){var memoize=__webpack_require__(275);module.exports=function(func){var result=memoize(func,(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}},function(module,exports,__webpack_require__){var MapCache=__webpack_require__(66);function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache,module.exports=memoize},function(module,exports,__webpack_require__){var baseToString=__webpack_require__(277);module.exports=function(value){return null==value?"":baseToString(value)}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(32),arrayMap=__webpack_require__(114),isArray=__webpack_require__(16),isSymbol=__webpack_require__(46),symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}},function(module,exports,__webpack_require__){var baseFlatten=__webpack_require__(279),baseOrderBy=__webpack_require__(282),baseRest=__webpack_require__(332),isIterateeCall=__webpack_require__(340),sortBy=baseRest((function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}));module.exports=sortBy},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(115),isFlattenable=__webpack_require__(280);module.exports=function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(32),isArguments=__webpack_require__(73),isArray=__webpack_require__(16),spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0;module.exports=function(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(31),isObjectLike=__webpack_require__(33);module.exports=function(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}},function(module,exports,__webpack_require__){var arrayMap=__webpack_require__(114),baseIteratee=__webpack_require__(283),baseMap=__webpack_require__(323),baseSortBy=__webpack_require__(329),baseUnary=__webpack_require__(121),compareMultiple=__webpack_require__(330),identity=__webpack_require__(49);module.exports=function(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(baseIteratee));var result=baseMap(collection,(function(value,key,collection){return{criteria:arrayMap(iteratees,(function(iteratee){return iteratee(value)})),index:++index,value:value}}));return baseSortBy(result,(function(object,other){return compareMultiple(object,other,orders)}))}},function(module,exports,__webpack_require__){var baseMatches=__webpack_require__(284),baseMatchesProperty=__webpack_require__(316),identity=__webpack_require__(49),isArray=__webpack_require__(16),property=__webpack_require__(320);module.exports=function(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}},function(module,exports,__webpack_require__){var baseIsMatch=__webpack_require__(285),getMatchData=__webpack_require__(315),matchesStrictComparable=__webpack_require__(123);module.exports=function(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(116),baseIsEqual=__webpack_require__(117);module.exports=function(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(43);module.exports=function(){this.__data__=new ListCache,this.size=0}},function(module,exports){module.exports=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result}},function(module,exports){module.exports=function(key){return this.__data__.get(key)}},function(module,exports){module.exports=function(key){return this.__data__.has(key)}},function(module,exports,__webpack_require__){var ListCache=__webpack_require__(43),Map=__webpack_require__(68),MapCache=__webpack_require__(66);module.exports=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this}},function(module,exports,__webpack_require__){var Stack=__webpack_require__(116),equalArrays=__webpack_require__(118),equalByTag=__webpack_require__(293),equalObjects=__webpack_require__(296),getTag=__webpack_require__(311),isArray=__webpack_require__(16),isBuffer=__webpack_require__(119),isTypedArray=__webpack_require__(120),objectTag="[object Object]",hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?"[object Array]":getTag(object),othTag=othIsArr?"[object Array]":getTag(other),objIsObj=(objTag="[object Arguments]"==objTag?objectTag:objTag)==objectTag,othIsObj=(othTag="[object Arguments]"==othTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,bitmask,customizer,equalFunc,stack))}},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}},function(module,exports,__webpack_require__){var Symbol=__webpack_require__(32),Uint8Array=__webpack_require__(294),eq=__webpack_require__(67),equalArrays=__webpack_require__(118),mapToArray=__webpack_require__(295),setToArray=__webpack_require__(69),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;module.exports=function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=mapToArray;case"[object Set]":var isPartial=1&bitmask;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}},function(module,exports,__webpack_require__){var Uint8Array=__webpack_require__(15).Uint8Array;module.exports=Uint8Array},function(module,exports){module.exports=function(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result}},function(module,exports,__webpack_require__){var getAllKeys=__webpack_require__(297),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length;if(objLength!=getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}},function(module,exports,__webpack_require__){var baseGetAllKeys=__webpack_require__(298),getSymbols=__webpack_require__(299),keys=__webpack_require__(74);module.exports=function(object){return baseGetAllKeys(object,keys,getSymbols)}},function(module,exports,__webpack_require__){var arrayPush=__webpack_require__(115),isArray=__webpack_require__(16);module.exports=function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}},function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(300),stubArray=__webpack_require__(301),propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)})))}:stubArray;module.exports=getSymbols},function(module,exports){module.exports=function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}},function(module,exports){module.exports=function(){return[]}},function(module,exports,__webpack_require__){var baseTimes=__webpack_require__(303),isArguments=__webpack_require__(73),isArray=__webpack_require__(16),isBuffer=__webpack_require__(119),isIndex=__webpack_require__(75),isTypedArray=__webpack_require__(120),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}},function(module,exports){module.exports=function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}},function(module,exports){module.exports=function(){return!1}},function(module,exports,__webpack_require__){var baseGetTag=__webpack_require__(31),isLength=__webpack_require__(76),isObjectLike=__webpack_require__(33),typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1,module.exports=function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}},function(module,exports,__webpack_require__){(function(module){var freeGlobal=__webpack_require__(103),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;return types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil}).call(this,__webpack_require__(59)(module))},function(module,exports,__webpack_require__){var isPrototype=__webpack_require__(308),nativeKeys=__webpack_require__(309),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}},function(module,exports){var objectProto=Object.prototype;module.exports=function(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}},function(module,exports,__webpack_require__){var nativeKeys=__webpack_require__(310)(Object.keys,Object);module.exports=nativeKeys},function(module,exports){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},function(module,exports,__webpack_require__){var DataView=__webpack_require__(312),Map=__webpack_require__(68),Promise=__webpack_require__(313),Set=__webpack_require__(106),WeakMap=__webpack_require__(314),baseGetTag=__webpack_require__(31),toSource=__webpack_require__(104),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&"[object DataView]"!=getTag(new DataView(new ArrayBuffer(1)))||Map&&"[object Map]"!=getTag(new Map)||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&"[object Set]"!=getTag(new Set)||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result}),module.exports=getTag},function(module,exports,__webpack_require__){var DataView=__webpack_require__(21)(__webpack_require__(15),"DataView");module.exports=DataView},function(module,exports,__webpack_require__){var Promise=__webpack_require__(21)(__webpack_require__(15),"Promise");module.exports=Promise},function(module,exports,__webpack_require__){var WeakMap=__webpack_require__(21)(__webpack_require__(15),"WeakMap");module.exports=WeakMap},function(module,exports,__webpack_require__){var isStrictComparable=__webpack_require__(122),keys=__webpack_require__(74);module.exports=function(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}},function(module,exports,__webpack_require__){var baseIsEqual=__webpack_require__(117),get=__webpack_require__(111),hasIn=__webpack_require__(317),isKey=__webpack_require__(72),isStrictComparable=__webpack_require__(122),matchesStrictComparable=__webpack_require__(123),toKey=__webpack_require__(47);module.exports=function(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}},function(module,exports,__webpack_require__){var baseHasIn=__webpack_require__(318),hasPath=__webpack_require__(319);module.exports=function(object,path){return null!=object&&hasPath(object,path,baseHasIn)}},function(module,exports){module.exports=function(object,key){return null!=object&&key in Object(object)}},function(module,exports,__webpack_require__){var castPath=__webpack_require__(113),isArguments=__webpack_require__(73),isArray=__webpack_require__(16),isIndex=__webpack_require__(75),isLength=__webpack_require__(76),toKey=__webpack_require__(47);module.exports=function(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}},function(module,exports,__webpack_require__){var baseProperty=__webpack_require__(321),basePropertyDeep=__webpack_require__(322),isKey=__webpack_require__(72),toKey=__webpack_require__(47);module.exports=function(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}},function(module,exports){module.exports=function(key){return function(object){return null==object?void 0:object[key]}}},function(module,exports,__webpack_require__){var baseGet=__webpack_require__(112);module.exports=function(path){return function(object){return baseGet(object,path)}}},function(module,exports,__webpack_require__){var baseEach=__webpack_require__(324),isArrayLike=__webpack_require__(48);module.exports=function(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,(function(value,key,collection){result[++index]=iteratee(value,key,collection)})),result}},function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(325),baseEach=__webpack_require__(328)(baseForOwn);module.exports=baseEach},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(326),keys=__webpack_require__(74);module.exports=function(object,iteratee){return object&&baseFor(object,iteratee,keys)}},function(module,exports,__webpack_require__){var baseFor=__webpack_require__(327)();module.exports=baseFor},function(module,exports){module.exports=function(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}},function(module,exports,__webpack_require__){var isArrayLike=__webpack_require__(48);module.exports=function(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}},function(module,exports){module.exports=function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}},function(module,exports,__webpack_require__){var compareAscending=__webpack_require__(331);module.exports=function(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result)return index>=ordersLength?result:result*("desc"==orders[index]?-1:1)}return object.index-other.index}},function(module,exports,__webpack_require__){var isSymbol=__webpack_require__(46);module.exports=function(value,other){if(value!==other){var valIsDefined=void 0!==value,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=void 0!==other,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}},function(module,exports,__webpack_require__){var identity=__webpack_require__(49),overRest=__webpack_require__(333),setToString=__webpack_require__(335);module.exports=function(func,start){return setToString(overRest(func,start,identity),func+"")}},function(module,exports,__webpack_require__){var apply=__webpack_require__(334),nativeMax=Math.max;module.exports=function(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}},function(module,exports){module.exports=function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}},function(module,exports,__webpack_require__){var baseSetToString=__webpack_require__(336),setToString=__webpack_require__(339)(baseSetToString);module.exports=setToString},function(module,exports,__webpack_require__){var constant=__webpack_require__(337),defineProperty=__webpack_require__(338),identity=__webpack_require__(49),baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;module.exports=baseSetToString},function(module,exports){module.exports=function(value){return function(){return value}}},function(module,exports,__webpack_require__){var getNative=__webpack_require__(21),defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();module.exports=defineProperty},function(module,exports){var nativeNow=Date.now;module.exports=function(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,remaining>0){if(++count>=800)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}},function(module,exports,__webpack_require__){var eq=__webpack_require__(67),isArrayLike=__webpack_require__(48),isIndex=__webpack_require__(75),isObject=__webpack_require__(42);module.exports=function(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const webview_provider_1=__importDefault(__webpack_require__(124)),vscode_1=__importDefault(__webpack_require__(1)),config_manager_1=__importDefault(__webpack_require__(12)),connection_1=__webpack_require__(17),constants_1=__webpack_require__(2),actions_1=__webpack_require__(126);class ResultsWebview extends webview_provider_1.default{constructor(requestId,syncConsoleMessages){super(),this.requestId=requestId,this.syncConsoleMessages=syncConsoleMessages,this.id="Results",this.title=constants_1.DISPLAY_NAME+" Results",this.isOpen=!1,this.messagesHandler=({action:action,payload:payload})=>{switch(action){case actions_1.UIAction.NOTIFY_VIEW_READY:return void(this.isOpen=payload);case actions_1.UIAction.REQUEST_SYNC_CONSOLE_MESSAGES:return this.syncConsoleMessages(payload)}},this.onViewActive=async active=>{if(active)try{const state=await this.getState();this.syncConsoleMessages(state.resultTabs[state.activeTab].messages)}catch(e){}else this.syncConsoleMessages(["Not focused to results view"])},this.updateResults=payload=>{this.title=constants_1.DISPLAY_NAME+" Console";try{const prefix=connection_1.getNameFromId(payload[0].connId);let suffix="query results";payload&&payload.length>0&&(suffix=1===payload.length?payload[0].label?payload[0].label:payload[0].query.replace(/(\r?\n\s*)/gim," "):"multiple query results"),this.title=`${prefix}: ${suffix}`}catch(error){}this.updatePanelName(),this.sendMessage(actions_1.UIAction.RESPONSE_QUERY_RESULTS,payload)},this.whereToShow=vscode_1.default.ViewColumn.Active,this.onDidDispose(()=>{this.isOpen=!1})}get cssVariables(){return config_manager_1.default.results.customization?config_manager_1.default.results.customization:super.cssVariables}show(){if(!this.isOpen)switch(this.whereToShow=null,config_manager_1.default.results.location){case"active":case"current":this.whereToShow=vscode_1.default.ViewColumn.Active;break;case"end":this.whereToShow=vscode_1.default.ViewColumn.Three;break;case"beside":default:vscode_1.default.window.activeTextEditor?config_manager_1.default.results&&"number"==typeof config_manager_1.default.results.location&&config_manager_1.default.results.location>=-1&&config_manager_1.default.results.location<=9&&0!==config_manager_1.default.results.location?this.whereToShow=config_manager_1.default.results.location:vscode_1.default.window.activeTextEditor.viewColumn===vscode_1.default.ViewColumn.One?this.whereToShow=vscode_1.default.ViewColumn.Two:this.whereToShow=vscode_1.default.ViewColumn.Three:this.whereToShow=vscode_1.default.ViewColumn.One}return super.show(),new Promise((resolve,reject)=>{let interval=setInterval(()=>{if(this.isOpen)return clearInterval(interval),resolve()},500)})}}exports.default=class ResultsWebviewManager{constructor(syncConsoleMessages){this.syncConsoleMessages=syncConsoleMessages,this.viewsMap={},this.dispose=()=>Promise.all(Object.keys(this.viewsMap).map(id=>this.viewsMap[id].dispose())),this.createForId=requestId=>(this.viewsMap[requestId]=new ResultsWebview(requestId,this.syncConsoleMessages),this.viewsMap[requestId].onDidDispose(()=>{delete this.viewsMap[requestId]}),this.viewsMap[requestId]),this.get=requestId=>{if(!requestId)throw new Error("Missing request id to create results view");return this.viewsMap[requestId]||this.createForId(requestId)},this.getActiveView=()=>this.viewsMap[Object.keys(this.viewsMap).find(k=>this.viewsMap[k]&&this.viewsMap[k].isActive)]}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(2),connection_1=__webpack_require__(17),webview_provider_1=__importDefault(__webpack_require__(124)),vscode_1=__webpack_require__(1),actions_1=__webpack_require__(126),extension_util_1=__webpack_require__(127);class SettingsWebview extends webview_provider_1.default{constructor(){super(...arguments),this.id="Settings",this.title=constants_1.DISPLAY_NAME+" Settings",this.updateConnection=async({connInfo:connInfo,globalSetting:globalSetting,editId:editId})=>(connInfo=await this.parseBeforeSave({connInfo:connInfo}),vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".updateConnection",editId,connInfo,globalSetting?"Global":void 0).then(()=>{const partialState={action:actions_1.UIAction.RESPONSE_UPDATE_CONNECTION_SUCCESS,formData:{...connInfo,id:connection_1.getConnectionId(connInfo)},externalMessage:connInfo.name+" updated!",externalMessageType:"success"};return this.sendMessage(actions_1.UIAction.RESPONSE_UPDATE_CONNECTION_SUCCESS,partialState)},(error={})=>{const partialState={externalMessage:(error.message||error||"").toString(),externalMessageType:"error"};return this.sendMessage(actions_1.UIAction.RESPONSE_UPDATE_CONNECTION_ERROR,partialState)})),this.createConnection=async({connInfo:connInfo,globalSetting:globalSetting})=>(connInfo=await this.parseBeforeSave({connInfo:connInfo}),vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".addConnection",connInfo,globalSetting?"Global":void 0).then(()=>{const partialState={action:actions_1.UIAction.RESPONSE_CREATE_CONNECTION_SUCCESS,formData:{...connInfo,id:connection_1.getConnectionId(connInfo)},externalMessage:connInfo.name+" created!",externalMessageType:"success"};return this.sendMessage(actions_1.UIAction.RESPONSE_CREATE_CONNECTION_SUCCESS,partialState)},(error={})=>{const partialState={externalMessage:(error.message||error||"").toString(),externalMessageType:"error"};return this.sendMessage(actions_1.UIAction.RESPONSE_CREATE_CONNECTION_ERROR,partialState)})),this.testConnection=async({connInfo:connInfo})=>(connInfo=await this.parseBeforeSave({connInfo:connInfo}),vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".testConnection",connInfo).then(res=>{if(res&&res.notification){const externalMessage="You need to fix some issues in your machine first. Check the notifications on bottom-right before moving forward.";return this.sendMessage(actions_1.UIAction.RESPONSE_TEST_CONNECTION_WARNING,{externalMessage:externalMessage})}this.sendMessage(actions_1.UIAction.RESPONSE_TEST_CONNECTION_SUCCESS,{connInfo:connInfo})},(payload={})=>{payload={externalMessage:(payload.message||payload||"").toString()},this.sendMessage(actions_1.UIAction.RESPONSE_TEST_CONNECTION_ERROR,payload)})),this.parseBeforeSave=async({connInfo:connInfo})=>{const pluginExt=await extension_util_1.driverPluginExtension(connInfo.driver);return pluginExt&&pluginExt.parseBeforeSaveConnection&&(connInfo=await pluginExt.parseBeforeSaveConnection({connInfo:connInfo})),["id","isConnected","isActive"].forEach(p=>delete connInfo[p]),connInfo},this.parseBeforeEdit=async({connInfo:connInfo})=>{const pluginExt=await extension_util_1.driverPluginExtension(connInfo.driver);return pluginExt&&pluginExt.parseBeforeEditConnection&&(connInfo=await pluginExt.parseBeforeEditConnection({connInfo:connInfo})),["isConnected","isActive"].forEach(p=>delete connInfo[p]),connInfo},this.getAndSendInstalledDrivers=async()=>this.sendMessage(actions_1.UIAction.RESPONSE_INSTALLED_DRIVERS,await extension_util_1.getInstalledDrivers()),this.getAndSendDriverSchemas=({driver:driver}={driver:null})=>this.sendMessage(actions_1.UIAction.RESPONSE_DRIVER_SCHEMAS,extension_util_1.getDriverSchemas({driver:driver})),this.editConnection=async({conn:conn})=>{this.show();const installedDrivers=await extension_util_1.getInstalledDrivers(),{schema:schema,uiSchema:uiSchema}=extension_util_1.getDriverSchemas({driver:conn.driver}),formData=await this.parseBeforeEdit({connInfo:conn}),driver=installedDrivers.find(d=>d.value===conn.driver);if(!driver)throw new Error(`Driver ${conn.driver} not loaded or not installed yet. Try agian in a few seconds.`);const partialState={installedDrivers:installedDrivers,driver:driver||{displayName:conn.driver,value:conn.driver,icon:null},schema:schema,uiSchema:uiSchema,formData:formData};this.sendMessage(actions_1.UIAction.REQUEST_EDIT_CONNECTION,partialState)},this.sendMessage=(action,payload)=>super.sendMessage(action,payload),this.openConnectionFile=async()=>vscode_1.commands.executeCommand("workbench.action.openSettings",constants_1.EXT_CONFIG_NAMESPACE+".connections"),this.messagesHandler=({action:action,payload:payload})=>{switch(action){case actions_1.UIAction.REQUEST_CREATE_CONNECTION:return this.createConnection(payload);case actions_1.UIAction.REQUEST_UPDATE_CONNECTION:return this.updateConnection(payload);case actions_1.UIAction.REQUEST_TEST_CONNECTION:return this.testConnection(payload);case actions_1.UIAction.REQUEST_OPEN_CONNECTION_FILE:return this.openConnectionFile();case actions_1.UIAction.REQUEST_INSTALLED_DRIVERS:return this.getAndSendInstalledDrivers();case actions_1.UIAction.REQUEST_DRIVER_SCHEMAS:return this.getAndSendDriverSchemas(payload)}}}reset(){return this.sendMessage(actions_1.UIAction.REQUEST_RESET)}}exports.default=SettingsWebview},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const uniq_1=__importDefault(__webpack_require__(100));exports.default=function(schema,uiSchema={}){return{schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",...schema,properties:{name:{type:"string",title:"Connection name"},group:{type:"string",title:"Connection group"},driver:{title:"driver",type:"string"},...schema.properties||{},previewLimit:{default:50,type:"number",title:"Show records default limit"}},required:["name","driver",...schema.required||[]]},uiSchema:{name:{"ui:autofocus":!0},driver:{"ui:widget":"hidden"},...uiSchema,"ui:order":uniq_1.default(["name","group",...uiSchema["ui:order"]||[],"*"])}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const uuid_1=__webpack_require__(377);exports.default=uuid_1.v4},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.tokenize=exports.format=void 0;const Db2Formatter_1=__importDefault(__webpack_require__(346)),N1qlFormatter_1=__importDefault(__webpack_require__(354)),PlSqlFormatter_1=__importDefault(__webpack_require__(355)),StandardSqlFormatter_1=__importDefault(__webpack_require__(356));exports.format=(query,cfg={})=>{switch(cfg.language){case"db2":return new Db2Formatter_1.default(cfg).format(query);case"n1ql":return new N1qlFormatter_1.default(cfg).format(query);case"pl/sql":return new PlSqlFormatter_1.default(cfg).format(query);case"sql":default:return new StandardSqlFormatter_1.default(cfg).format(query)}},exports.tokenize=(query,cfg={})=>new StandardSqlFormatter_1.default(cfg).tokenize(query),exports.default={format:exports.format,tokenize:exports.tokenize}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const abstract_1=__importDefault(__webpack_require__(50));class Db2Formatter extends abstract_1.default{getTokenizerConfig(){return{reservedWords:reservedWords,reservedTopLevelWords:reservedTopLevelWords,reservedNewlineWords:reservedNewlineWords,reservedTopLevelWordsNoIndent:reservedTopLevelWordsNoIndent,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]}}}exports.default=Db2Formatter;const reservedWords=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],reservedTopLevelWords=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],reservedTopLevelWordsNoIndent=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],reservedNewlineWords=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"]},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const escapeRegExp_1=__importDefault(__webpack_require__(348)),types_1=__webpack_require__(51);exports.default=class Tokenizer{constructor(cfg){this.WHITESPACE_REGEX=/^(\s+)/u,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+|([a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}))\b/u,this.AMBIGUOS_OPERATOR_REGEX=/^(\?\||\?&)/u,this.OPERATOR_REGEX=/^(!=|<>|>>|<<|==|<=|>=|!<|!>|\|\|\/|\|\/|\|\||~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|&&|@>|<@|#-|@|.)/u,this.NO_SPACE_OPERATOR_REGEX=/^(::|->>|->|#>>|#>)/u,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/u,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(cfg.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(cfg.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(cfg.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(cfg.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(cfg.reservedWords),this.WORD_REGEX=this.createWordRegex(cfg.specialWordChars),this.STRING_REGEX=this.createStringRegex(cfg.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(cfg.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(cfg.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(cfg.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(cfg.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(cfg.namedPlaceholderTypes,this.createStringPattern(cfg.stringTypes))}createLineCommentRegex(lineCommentTypes){return new RegExp(`^((?:${lineCommentTypes.map(c=>escapeRegExp_1.default(c)).join("|")})[^>]*?(?:\r\n|\r|\n|$))`,"u")}createReservedWordRegex(reservedWords){const reservedWordsPattern=reservedWords.join("|").replace(/ /gu,"\\s+");return new RegExp(`^(${reservedWordsPattern})\\b`,"iu")}createWordRegex(specialChars){return new RegExp(`^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}${specialChars.join("")}]+)`,"u")}createStringRegex(stringTypes){return new RegExp("^("+this.createStringPattern(stringTypes)+")","u")}createStringPattern(stringTypes){const patterns={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return stringTypes.map(t=>patterns[t]).join("|")}createParenRegex(parens){return new RegExp("^("+parens.map(p=>this.escapeParen(p)).join("|")+")","iu")}escapeParen(paren){return 1===paren.length?escapeRegExp_1.default(paren):"\\b"+paren+"\\b"}createPlaceholderRegex(types,pattern){if(!types||0===types.length)return null;const typesRegex=types.map(escapeRegExp_1.default).join("|");return new RegExp(`^((?:${typesRegex})(?:${pattern}))`,"u")}tokenize(input){if(!input)return[];const tokens=[];let token;for(;input.length;)token=this.getNextToken(input,token),input=input.substring(token.value.length),tokens.push(token);return tokens}getNextToken(input,previousToken){return this.getWhitespaceToken(input)||this.getCommentToken(input)||this.getStringToken(input)||this.getOpenParenToken(input)||this.getCloseParenToken(input)||this.getAmbiguosOperatorToken(input)||this.getNoSpaceOperatorToken(input)||this.getServerVariableToken(input)||this.getPlaceholderToken(input)||this.getNumberToken(input)||this.getReservedWordToken(input,previousToken)||this.getWordToken(input)||this.getOperatorToken(input)}getWhitespaceToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.WHITESPACE,regex:this.WHITESPACE_REGEX})}getCommentToken(input){return this.getLineCommentToken(input)||this.getBlockCommentToken(input)}getLineCommentToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}getBlockCommentToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}getStringToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.STRING,regex:this.STRING_REGEX})}getOpenParenToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}getCloseParenToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}getPlaceholderToken(input){return this.getIdentNamedPlaceholderToken(input)||this.getStringNamedPlaceholderToken(input)||this.getIndexedPlaceholderToken(input)}getServerVariableToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.SERVERVARIABLE,regex:/(^@@\w+)/iu})}getIdentNamedPlaceholderToken(input){return this.getPlaceholderTokenWithKey({input:input,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:v=>v.slice(1)})}getStringNamedPlaceholderToken(input){return this.getPlaceholderTokenWithKey({input:input,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:v=>this.getEscapedPlaceholderKey({key:v.slice(2,-1),quoteChar:v.slice(-1)})})}getIndexedPlaceholderToken(input){return this.getPlaceholderTokenWithKey({input:input,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:v=>v.slice(1)})}getPlaceholderTokenWithKey({input:input,regex:regex,parseKey:parseKey}){const token=this.getTokenOnFirstMatch({input:input,regex:regex,type:types_1.TokenTypes.PLACEHOLDER});return token&&(token.key=parseKey(token.value)),token}getEscapedPlaceholderKey({key:key,quoteChar:quoteChar}){return key.replace(new RegExp(escapeRegExp_1.default("\\"+quoteChar),"gu"),quoteChar)}getNumberToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.NUMBER,regex:this.NUMBER_REGEX})}getOperatorToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.OPERATOR,regex:this.OPERATOR_REGEX})}getAmbiguosOperatorToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.OPERATOR,regex:this.AMBIGUOS_OPERATOR_REGEX})}getNoSpaceOperatorToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.NO_SPACE_OPERATOR,regex:this.NO_SPACE_OPERATOR_REGEX})}getReservedWordToken(input,previousToken){if(!previousToken||!previousToken.value||"."!==previousToken.value)return this.getToplevelReservedToken(input)||this.getNewlineReservedToken(input)||this.getTopLevelReservedTokenNoIndent(input)||this.getPlainReservedToken(input)}getToplevelReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}getNewlineReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}getPlainReservedToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}getTopLevelReservedTokenNoIndent(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}getWordToken(input){return this.getTokenOnFirstMatch({input:input,type:types_1.TokenTypes.WORD,regex:this.WORD_REGEX})}getTokenOnFirstMatch({input:input,type:type,regex:regex}){const matches=input.match(regex);if(matches)return{type:type,value:matches[1]}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);exports.default=function(str){return str&&reHasRegExpChar.test(str)?str.replace(reRegExpChar,"\\$&"):str||""}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const types_1=__webpack_require__(51),Indentation_1=__importDefault(__webpack_require__(350)),InlineBlock_1=__importDefault(__webpack_require__(352)),Params_1=__importDefault(__webpack_require__(353)),trimSpacesEnd=str=>str.replace(/[ \t]+$/u,"");exports.default=class Formatter{constructor(cfg,tokenizer,tokenOverride){this.cfg=cfg,this.tokenizer=tokenizer,this.tokenOverride=tokenOverride,this.tokens=[],this.previousReservedWord={type:null,value:null},this.previousNonWhiteSpace={type:null,value:null},this.index=0,this.indentation=new Indentation_1.default(this.cfg.indent),this.inlineBlock=new InlineBlock_1.default,this.params=new Params_1.default(this.cfg.params)}format(query){this.tokens=this.tokenizer.tokenize(query);return this.getFormattedQueryFromTokens().trim()}getFormattedQueryFromTokens(){let formattedQuery="";return this.tokens.forEach((token,index)=>{this.index=index,this.tokenOverride&&(token=this.tokenOverride(token,this.previousReservedWord)||token),formattedQuery=token.type===types_1.TokenTypes.WHITESPACE?this.formatWhitespace(token,formattedQuery):token.type===types_1.TokenTypes.LINE_COMMENT?this.formatLineComment(token,formattedQuery):token.type===types_1.TokenTypes.BLOCK_COMMENT?this.formatBlockComment(token,formattedQuery):token.type===types_1.TokenTypes.RESERVED_TOP_LEVEL||token.type===types_1.TokenTypes.RESERVED_TOP_LEVEL_NO_INDENT||token.type===types_1.TokenTypes.RESERVED_NEWLINE||token.type===types_1.TokenTypes.RESERVED?this.formatReserved(token,formattedQuery):token.type===types_1.TokenTypes.OPEN_PAREN?this.formatOpeningParentheses(token,formattedQuery):token.type===types_1.TokenTypes.CLOSE_PAREN?this.formatClosingParentheses(token,formattedQuery):token.type===types_1.TokenTypes.NO_SPACE_OPERATOR?this.formatWithoutSpaces(token,formattedQuery):token.type===types_1.TokenTypes.PLACEHOLDER||token.type===types_1.TokenTypes.SERVERVARIABLE?this.formatPlaceholder(token,formattedQuery):","===token.value?this.formatComma(token,formattedQuery):":"===token.value?this.formatWithSpaceAfter(token,formattedQuery):"."===token.value?this.formatWithoutSpaces(token,formattedQuery):";"===token.value?this.formatQuerySeparator(token,formattedQuery):this.formatWithSpaces(token,formattedQuery),token.type!==types_1.TokenTypes.WHITESPACE&&(this.previousNonWhiteSpace=token)}),formattedQuery}formatWhitespace(token,query){return"preserve"===this.cfg.linesBetweenQueries&&/((\r\n|\n)(\r\n|\n)+)/u.test(token.value)&&";"===this.previousToken().value?query.replace(/(\n|\r\n)$/m,"")+token.value:query}formatReserved(token,query){return token.type===types_1.TokenTypes.RESERVED_NEWLINE&&this.previousReservedWord&&this.previousReservedWord.value&&"AND"===token.value.toUpperCase()&&"BETWEEN"===this.previousReservedWord.value.toUpperCase()&&(token.type=types_1.TokenTypes.RESERVED),query=token.type===types_1.TokenTypes.RESERVED_TOP_LEVEL?this.formatTopLevelReservedWord(token,query):token.type===types_1.TokenTypes.RESERVED_TOP_LEVEL_NO_INDENT?this.formatTopLevelReservedWordNoIndent(token,query):token.type===types_1.TokenTypes.RESERVED_NEWLINE?this.formatNewlineReservedWord(token,query):this.formatWithSpaces(token,query),this.previousReservedWord=token,query}formatLineComment(token,query){return this.addNewline(query+token.value)}formatBlockComment(token,query){return this.addNewline(this.addNewline(query)+this.indentComment(token.value))}indentComment(comment){return comment.replace(/\n[ \t]*/gu,"\n"+this.indentation.getIndent()+" ")}formatTopLevelReservedWordNoIndent(token,query){return this.indentation.decreaseTopLevel(),query=this.addNewline(query)+this.equalizeWhitespace(this.formatReservedWord(token.value)),this.addNewline(query)}formatTopLevelReservedWord(token,query){const shouldChangeTopLevel=","!==this.previousNonWhiteSpace.value&&!["GRANT"].includes((""+this.previousNonWhiteSpace.value).toUpperCase());return shouldChangeTopLevel&&(this.indentation.decreaseTopLevel(),query=this.addNewline(query)),query=query+this.equalizeWhitespace(this.formatReservedWord(token.value))+" ",shouldChangeTopLevel&&this.indentation.increaseTopLevel(),query}formatNewlineReservedWord(token,query){return this.addNewline(query)+this.equalizeWhitespace(this.formatReservedWord(token.value))+" "}equalizeWhitespace(value){return value.replace(/\s+/gu," ")}formatOpeningParentheses(token,query){token.value=this.formatCase(token.value);const previousTokenType=this.previousToken().type;return previousTokenType!==types_1.TokenTypes.WHITESPACE&&previousTokenType!==types_1.TokenTypes.OPEN_PAREN&&previousTokenType!==types_1.TokenTypes.LINE_COMMENT&&(query=trimSpacesEnd(query)),query+=token.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),query=this.addNewline(query)),query}formatClosingParentheses(token,query){return token.value=this.formatCase(token.value),this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(token,query)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(token,this.addNewline(query)))}formatPlaceholder(token,query){return query+this.params.get(token)+" "}formatComma(token,query){return query=trimSpacesEnd(query)+token.value+" ",this.inlineBlock.isActive()||/^LIMIT$/iu.test(this.previousReservedWord.value)?query:this.addNewline(query)}formatWithSpaceAfter(token,query){return trimSpacesEnd(query)+token.value+" "}formatWithoutSpaces(token,query){return trimSpacesEnd(query)+token.value}formatWithSpaces(token,query){return query+(token.type===types_1.TokenTypes.RESERVED?this.formatReservedWord(token.value):token.value)+" "}formatReservedWord(value){return this.formatCase(value)}formatQuerySeparator(token,query){this.indentation.resetIndentation();let lines="\n";return"preserve"!==this.cfg.linesBetweenQueries&&(lines="\n".repeat(this.cfg.linesBetweenQueries||1)),trimSpacesEnd(query)+token.value+lines}addNewline(query){return(query=trimSpacesEnd(query)).endsWith("\n")||(query+="\n"),query+this.indentation.getIndent()}previousToken(){return this.tokens[this.index-1]||{type:null,value:null}}formatCase(value){return"upper"===this.cfg.reservedWordCase?value.toUpperCase():"lower"===this.cfg.reservedWordCase?value.toLowerCase():value}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const last_1=__importDefault(__webpack_require__(351));exports.default=class Indentation{constructor(indent){this.indent=indent,this.indentTypes=[],this.indent=indent||"  "}getIndent(){return new Array(this.indentTypes.length).fill(this.indent).join("")}increaseTopLevel(){this.indentTypes.push("top-level")}increaseBlockLevel(){this.indentTypes.push("block-level")}decreaseTopLevel(){"top-level"===last_1.default(this.indentTypes)&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0;){if("top-level"!==this.indentTypes.pop())break}}resetIndentation(){this.indentTypes=[]}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=(arr=[])=>arr[arr.length-1]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const types_1=__webpack_require__(51);exports.default=class InlineBlock{constructor(){this.level=0}beginIfPossible(tokens,index){0===this.level&&this.isInlineBlock(tokens,index)?this.level=1:this.level>0?this.level++:this.level=0}end(){this.level--}isActive(){return this.level>0}isInlineBlock(tokens,index){let length=0,level=0;for(let i=index;i<tokens.length;i++){const token=tokens[i];if(length+=token.value.length,length>50)return!1;if(token.type===types_1.TokenTypes.OPEN_PAREN)level++;else if(token.type===types_1.TokenTypes.CLOSE_PAREN&&(level--,0===level))return!0;if(this.isForbiddenToken(token))return!1}return!1}isForbiddenToken({type:type,value:value}){return type===types_1.TokenTypes.RESERVED_TOP_LEVEL||type===types_1.TokenTypes.RESERVED_NEWLINE||type===types_1.TokenTypes.LINE_COMMENT||type===types_1.TokenTypes.BLOCK_COMMENT||";"===value}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=class Params{constructor(params){this.params=params,this.index=0,this.params=params}get({key:key,value:value}){return this.params?key?this.params[key]:this.params[this.index++]:value}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const abstract_1=__importDefault(__webpack_require__(50));class N1qlFormatter extends abstract_1.default{getTokenizerConfig(){return{reservedWords:reservedWords,reservedTopLevelWords:reservedTopLevelWords,reservedNewlineWords:reservedNewlineWords,reservedTopLevelWordsNoIndent:reservedTopLevelWordsNoIndent,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"],specialWordChars:[]}}}exports.default=N1qlFormatter;const reservedWords=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],reservedTopLevelWords=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],reservedTopLevelWordsNoIndent=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],reservedNewlineWords=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"]},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const abstract_1=__importDefault(__webpack_require__(50)),types_1=__webpack_require__(51);class PlSqlFormatter extends abstract_1.default{constructor(){super(...arguments),this.tokenOverride=(token,previousReservedToken)=>{if(token.type===types_1.TokenTypes.RESERVED_TOP_LEVEL&&previousReservedToken.value&&"SET"===token.value.toUpperCase()&&"BY"===previousReservedToken.value.toUpperCase())return token.type=types_1.TokenTypes.RESERVED,token}}getTokenizerConfig(){return{reservedWords:reservedWords,reservedTopLevelWords:reservedTopLevelWords,reservedNewlineWords:reservedNewlineWords,reservedTopLevelWordsNoIndent:reservedTopLevelWordsNoIndent,stringTypes:['""',"N''","''","``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]}}}exports.default=PlSqlFormatter;const reservedWords=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],reservedTopLevelWords=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],reservedTopLevelWordsNoIndent=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],reservedNewlineWords=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"]},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const abstract_1=__importDefault(__webpack_require__(50));class StandardSqlFormatter extends abstract_1.default{getTokenizerConfig(){return{reservedWords:reservedWords,reservedTopLevelWords:reservedTopLevelWords,reservedNewlineWords:reservedNewlineWords,reservedTopLevelWordsNoIndent:reservedTopLevelWordsNoIndent,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":","%","$"],lineCommentTypes:["#","--"],specialWordChars:[]}}}exports.default=StandardSqlFormatter;const reservedWords=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","COUNT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DAY","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRIGGER","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],reservedTopLevelWords=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","CREATE OR REPLACE","DECLARE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GO","GRANT","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","RETURNING","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],reservedTopLevelWordsNoIndent=["INTERSECT ALL","INTERSECT","MINUS","UNION ALL","UNION"],reservedNewlineWords=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","FULL JOIN","FULL OUTER JOIN","LEFT JOIN","LEFT OUTER JOIN","NATURAL JOIN","OR","OUTER APPLY","OUTER JOIN","RENAME","RIGHT JOIN","RIGHT OUTER JOIN","JOIN","WHEN","XOR"]},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class QueryParser{static parse(query,driver="mysql"){"mssql"===driver&&(query=query.replace(/^[ \t]*GO;?[ \t]*$/gim,""));for(var queries=[];;){null==restOfQuery&&(restOfQuery=query);var statementAndRest=QueryParser.getStatements(restOfQuery,driver,";"),statement=statementAndRest[0];null!=statement&&""!=statement.trim()&&queries.push(statement);var restOfQuery=statementAndRest[1];if(null==restOfQuery||""==restOfQuery.trim())break}return queries}static getStatements(query,driver,delimiter){for(var charArray=Array.from(query),previousChar=null,nextChar=null,isInComment=!1,commentChar=null,isInString=!1,stringChar=null,isInTag=!1,tagChar=null,resultQueries=[],index=0;index<charArray.length;index++){var char=charArray[index];if(index>0&&(previousChar=charArray[index-1]),index<charArray.length&&(nextChar=charArray[index+1]),"\\"==previousChar||"'"!=char&&'"'!=char||0!=isInString||0!=isInComment)if(("#"==char&&" "==nextChar||"-"==char&&"-"==nextChar||"/"==char&&"*"==nextChar)&&0==isInString)isInComment=!0,commentChar=char;else if(1!=isInComment||("#"!=commentChar&&"-"!=commentChar||"\n"!=char)&&("/"!=commentChar||"*"!=char||"/"!=nextChar))if("\\"==previousChar||char!=stringChar||1!=isInString){if("d"==char.toLowerCase()&&0==isInComment&&0==isInString){var delimiterResult=QueryParser.getDelimiter(index,query,driver);if(null!=delimiterResult){var delimiterSymbol=delimiterResult[0],delimiterEndIndex=delimiterResult[1];query=query.substring(delimiterEndIndex),resultQueries=QueryParser.getStatements(query,driver,delimiterSymbol);break}}if("$"==char&&0==isInComment&&0==isInString){var tagSymbolResult,queryUntilTagSymbol=query.substring(index);if(0==isInTag)null!=(tagSymbolResult=QueryParser.getTag(queryUntilTagSymbol,driver))&&(isInTag=!0,tagChar=tagSymbolResult[0]);else if(null!=(tagSymbolResult=QueryParser.getTag(queryUntilTagSymbol,driver)))tagSymbolResult[0]==tagChar&&(isInTag=!1)}if("mssql"===driver&&"g"===char.toLowerCase()&&"o"===(""+(charArray[index+1]||"")).toLowerCase()&&void 0!==charArray[index+2]&&/go\b/gi.test(`${char}${charArray[index+1]}${charArray[index+2]}`)&&(char=`${char}${charArray[index+1]}`),(char.toLowerCase()===delimiter.toLowerCase()||"go"===char.toLowerCase())&&0==isInString&&0==isInComment&&0==isInTag){var splittingIndex=index+1;if("mssql"===driver&&"go"===char.toLowerCase()){splittingIndex=index,resultQueries=QueryParser.getQueryParts(query,splittingIndex,2);break}resultQueries=QueryParser.getQueryParts(query,splittingIndex,0);break}}else isInString=!1,stringChar=null;else isInComment=!1,commentChar=null;else isInString=!0,stringChar=char}return 0==resultQueries.length&&(null!=query&&(query=query.trim()),resultQueries.push(query,null)),resultQueries}static getQueryParts(query,splittingIndex,numChars=1){var statement=query.substring(0,splittingIndex),restOfQuery=query.substring(splittingIndex+numChars),result=[];return null!=statement&&(statement=statement.trim()),result.push(statement),result.push(restOfQuery),result}static getDelimiter(index,query,driver){if("mysql"==driver){var delimiterLength="delimiter ".length,parsedQueryAfterIndexOriginal=query.substring(index);if(0==parsedQueryAfterIndexOriginal.toLowerCase().indexOf("delimiter ")){var parsedQueryAfterIndex=query.substring(index),indexOfNewLine=parsedQueryAfterIndex.indexOf("\n");-1==indexOfNewLine&&(indexOfNewLine=query.length);var delimiterSymbol=(parsedQueryAfterIndex=(parsedQueryAfterIndex=parsedQueryAfterIndex.substring(0,indexOfNewLine)).substring(delimiterLength)).trim();if(null!=(delimiterSymbol=QueryParser.clearTextUntilComment(delimiterSymbol))){delimiterSymbol=delimiterSymbol.trim();var delimiterSymbolEndIndex=parsedQueryAfterIndexOriginal.indexOf(delimiterSymbol)+index+delimiterSymbol.length,result=[];return result.push(delimiterSymbol),result.push(delimiterSymbolEndIndex),result}return null}return null}}static getTag(query,driver){if("pg"==driver){var matchTag=query.match(/^(\$[a-zA-Z]*\$)/i);if(null!=matchTag&&matchTag.length>1){var result=[],tagSymbol=matchTag[1].trim(),indexOfCmd=query.indexOf(tagSymbol);return result.push(tagSymbol),result.push(indexOfCmd),result}return null}}static isGoDelimiter(driver,query,index){if("mssql"==driver){var match=/(?:\bgo\b\s*)/i.exec(query);return null!=match&&match.index==index}}static clearTextUntilComment(text){for(var nextChar=null,charArray=Array.from(text),clearedText=null,index=0;index<charArray.length;index++){var char=charArray[index];if(index<charArray.length&&(nextChar=charArray[index+1]),"#"==char&&" "==nextChar||"-"==char&&"-"==nextChar||"/"==char&&"*"==nextChar)break;null==clearedText&&(clearedText=""),clearedText+=char}return clearedText}}exports.default=QueryParser.parse},function(module,exports,__webpack_require__){"use strict";const fs=__webpack_require__(6),path=__webpack_require__(9),uniqueString=__webpack_require__(359),tempDir=__webpack_require__(361),isStream=__webpack_require__(362),stream=__webpack_require__(79),{promisify:promisify}=__webpack_require__(22),pipeline=promisify(stream.pipeline),{writeFile:writeFile}=fs.promises,getPath=(prefix="")=>path.join(tempDir,prefix+uniqueString()),writeStream=async(filePath,data)=>pipeline(data,fs.createWriteStream(filePath));module.exports.file=options=>{if((options={...options}).name){if(void 0!==options.extension&&null!==options.extension)throw new Error("The `name` and `extension` options are mutually exclusive");return path.join(module.exports.directory(),options.name)}return getPath()+(void 0===options.extension||null===options.extension?"":"."+options.extension.replace(/^\./,""))},module.exports.directory=({prefix:prefix=""}={})=>{const directory=getPath(prefix);return fs.mkdirSync(directory),directory},module.exports.write=async(data,options)=>{const filename=module.exports.file(options),write=isStream(data)?writeStream:writeFile;return await write(filename,data),filename},module.exports.writeSync=(data,options)=>{const filename=module.exports.file(options);return fs.writeFileSync(filename,data),filename},Object.defineProperty(module.exports,"root",{get:()=>tempDir})},function(module,exports,__webpack_require__){"use strict";const cryptoRandomString=__webpack_require__(360);module.exports=()=>cryptoRandomString(32)},function(module,exports,__webpack_require__){"use strict";const crypto=__webpack_require__(19);module.exports=length=>{if(!Number.isFinite(length))throw new TypeError("Expected a finite number");return crypto.randomBytes(Math.ceil(length/2)).toString("hex").slice(0,length)}},function(module,exports,__webpack_require__){"use strict";const fs=__webpack_require__(6),os=__webpack_require__(18),tempDirectorySymbol=Symbol.for("__RESOLVED_TEMP_DIRECTORY__");global[tempDirectorySymbol]||Object.defineProperty(global,tempDirectorySymbol,{value:fs.realpathSync(os.tmpdir())}),module.exports=global[tempDirectorySymbol]},function(module,exports,__webpack_require__){"use strict";const isStream=stream=>null!==stream&&"object"==typeof stream&&"function"==typeof stream.pipe;isStream.writable=stream=>isStream(stream)&&!1!==stream.writable&&"function"==typeof stream._write&&"object"==typeof stream._writableState,isStream.readable=stream=>isStream(stream)&&!1!==stream.readable&&"function"==typeof stream._read&&"object"==typeof stream._readableState,isStream.duplex=stream=>isStream.writable(stream)&&isStream.readable(stream),isStream.transform=stream=>isStream.duplex(stream)&&"function"==typeof stream._transform&&"object"==typeof stream._transformState,module.exports=isStream},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),provider_1=__importDefault(__webpack_require__(364)),text_1=__webpack_require__(61),context_1=__importDefault(__webpack_require__(8)),constants_1=__webpack_require__(2),query_1=__webpack_require__(128),config_manager_1=__importDefault(__webpack_require__(12)),log=__webpack_require__(10).createLogger("codelens");exports.default=class CodeLensPlugin{constructor(){this.name="CodeLens Plugin",this.registeredLanguages=[],this.ext_setSelection=arg=>{vscode_1.window.activeTextEditor&&arg&&(vscode_1.window.activeTextEditor.selections=(Array.isArray(arg)?arg:[arg]).filter(Boolean))},this.updateDecorations=editor=>{if(config_manager_1.default.highlightQuery&&editor&&editor.document&&"output"!==editor.document.uri.scheme&&this.registeredLanguages.includes(editor.document.languageId))try{const{range:range}=query_1.getEditorQueryDetails(editor);editor.setDecorations(currentQueryDecoration,[{range:range}])}catch(error){log.error("update decorations failed: %O",error)}}}async dispose(){this.codelensDisposable&&(await this.codelensDisposable.dispose(),this.codelensDisposable=null)}async createCodelens(){const oldLang=this.registeredLanguages.sort(text_1.sortText),newLang=config_manager_1.default.codelensLanguages.sort(text_1.sortText);newLang.length>0&&oldLang.join()!==newLang.join()&&(this.codelensDisposable&&await this.dispose(),this.provider=new provider_1.default,this.codelensDisposable=vscode_1.languages.registerCodeLensProvider(config_manager_1.default.codelensLanguages.map(language=>({language:language})),this.provider),this.registeredLanguages=config_manager_1.default.codelensLanguages)}createDecorations(){vscode_1.window.onDidChangeActiveTextEditor(editor=>{this.updateDecorations(editor)},null,context_1.default.subscriptions),vscode_1.workspace.onDidChangeTextDocument(event=>{vscode_1.window.activeTextEditor&&event.document===vscode_1.window.activeTextEditor.document&&this.updateDecorations(vscode_1.window.activeTextEditor)},null,context_1.default.subscriptions),vscode_1.window.onDidChangeTextEditorSelection(event=>{event.textEditor&&event.textEditor.document===vscode_1.window.activeTextEditor.document&&this.updateDecorations(vscode_1.window.activeTextEditor)},null,context_1.default.subscriptions),this.updateDecorations(vscode_1.window.activeTextEditor)}register(extension){context_1.default.subscriptions.push(this),extension.registerCommand("setSelection",this.ext_setSelection),this.createCodelens(),this.createDecorations(),config_manager_1.default.addOnUpdateHook(({event:event})=>{event.affectsConfig("codelensLanguages")&&this.createCodelens(),event.affectsConfig("highlightQuery")&&this.updateDecorations(vscode_1.window.activeTextEditor)})}reset(){return this.provider.reset()}};const currentQueryDecoration=vscode_1.window.createTextEditorDecorationType({backgroundColor:{id:constants_1.EXT_NAMESPACE+".currentQueryBg"},borderColor:{id:constants_1.EXT_NAMESPACE+".currentQueryOutline"},borderWidth:"1px",borderStyle:"solid"})},function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),Constants=__importStar(__webpack_require__(2)),connection_1=__webpack_require__(17),query_1=__webpack_require__(34),context_1=__importDefault(__webpack_require__(8)),attached_files_1=__webpack_require__(129);exports.default=class SQLToolsCodeLensProvider{constructor(){this._onDidChangeCodeLenses=new vscode_1.EventEmitter,context_1.default.subscriptions.push(this._onDidChangeCodeLenses)}get onDidChangeCodeLenses(){return this._onDidChangeCodeLenses.event}reset(){this._onDidChangeCodeLenses.fire()}async provideCodeLenses(document){const lenses=[],defaultConn=query_1.extractConnName(document.getText(new vscode_1.Range(0,0,1,0))),attachedId=attached_files_1.getAttachedConnection(document.uri);if(attachedId){const connName=connection_1.getNameFromId(attachedId),runCmd={arguments:[document.uri],title:"Detach file from "+connName.trim(),command:Constants.EXT_NAMESPACE+".detachConnectionFromFile"};lenses.push(new vscode_1.CodeLens(new vscode_1.Range(0,0,0,0),runCmd))}const text=document.getText(),allBlocks=text.replace(Constants.DELIMITER_START_REGEX,"<#####>$1").split("<#####>");if(0===allBlocks.length)return lenses;let textOffset=0;return allBlocks.forEach(block=>{const startIndex=textOffset+text.substr(textOffset).indexOf(block),start=document.positionAt(startIndex),end=document.positionAt(startIndex+block.length),range=new vscode_1.Range(start,end);textOffset=startIndex+block.length;const connName=query_1.extractConnName(block),runCmd={arguments:[block.replace(Constants.DELIMITER_START_REPLACE_REGEX,"").trim(),(connName||defaultConn||"").trim()||void 0].filter(Boolean),title:"$(debug-start) Run on "+(connName||defaultConn||"active connection").trim(),command:Constants.EXT_NAMESPACE+".executeQuery"};lenses.push(new vscode_1.CodeLens(range,runCmd));const selectCmd={arguments:[new vscode_1.Selection(start,end)],title:"$(list-selection) Select block",command:Constants.EXT_NAMESPACE+".setSelection"};lenses.push(new vscode_1.CodeLens(range,selectCmd))}),lenses}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProgressNotificationComplete=exports.ProgressNotificationStart=exports.GetInsertQueryRequest=exports.GetChildrenForTreeItemRequest=exports.SaveResultsRequest=exports.SearchConnectionItemsRequest=exports.DisconnectRequest=exports.TestConnectionRequest=exports.ConnectRequest=exports.RunCommandRequest=exports.GetConnectionPasswordRequest=exports.ForceListRefresh=exports.GetConnectionsRequest=void 0;const vscode_languageserver_protocol_1=__webpack_require__(4),constants_1=__webpack_require__(2);exports.GetConnectionsRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetConnectionsRequest"),exports.ForceListRefresh=new vscode_languageserver_protocol_1.RequestType("connection/ForceListRefresh"),exports.GetConnectionPasswordRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetConnectionPasswordRequest"),exports.RunCommandRequest=new vscode_languageserver_protocol_1.RequestType("connection/RunCommandRequest"),exports.ConnectRequest=new vscode_languageserver_protocol_1.RequestType("connection/ConnectRequest"),exports.TestConnectionRequest=new vscode_languageserver_protocol_1.RequestType("connection/TestConnectionRequest"),exports.DisconnectRequest=new vscode_languageserver_protocol_1.RequestType("connection/DisconnectRequest"),exports.SearchConnectionItemsRequest=new vscode_languageserver_protocol_1.RequestType("connection/SearchConnectionItemsRequest"),exports.SaveResultsRequest=new vscode_languageserver_protocol_1.RequestType("connection/SaveResultsRequest"),exports.GetChildrenForTreeItemRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetChildrenForTreeItemRequest"),exports.GetInsertQueryRequest=new vscode_languageserver_protocol_1.RequestType("connection/GetInsertQueryRequest"),exports.ProgressNotificationStart=new vscode_languageserver_protocol_1.NotificationType(constants_1.EXT_NAMESPACE+"/window/progress/start"),exports.ProgressNotificationComplete=new vscode_languageserver_protocol_1.NotificationType(constants_1.EXT_NAMESPACE+"/window/progress/complete")},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const vscode_1=__webpack_require__(1),contracts_1=__webpack_require__(367),utils_1=__webpack_require__(20),constants_1=__webpack_require__(2),connection_1=__webpack_require__(17),config_manager_1=__importDefault(__webpack_require__(12)),notification_1=__webpack_require__(107),notifications_1=__webpack_require__(108);exports.default=class DependencyManager{constructor(){this.name="Dependency Manager Plugin",this.installingDrivers=[],this.requestToInstall=async({conn:conn,action:action="install",deps:deps=[]})=>{if(!conn)return;const installNow="upgrade"===action?"Upgrade now":"Install now",options=["Read more",installNow],dependencyManagerSettings=config_manager_1.default.dependencyManager,autoUpdateOrInstall=dependencyManagerSettings&&dependencyManagerSettings.autoAccept,dependenciesName=deps.map((d,i)=>`${d.name}@${d.version||"latest"}${i===deps.length-2?" and ":i===deps.length-1?"":", "}`).join("");try{switch(autoUpdateOrInstall?installNow:await vscode_1.window.showInformationMessage(`You need to ${action} "${dependenciesName}" to connect to ${conn.name}.`,...options)){case installNow:this.installingDrivers.push(conn.driver),await vscode_1.window.withProgress({location:vscode_1.ProgressLocation.Notification,title:constants_1.DISPLAY_NAME,cancellable:!1},async progress=>{progress.report({message:`${"upgrade"===action?"upgrading":"installing"} ${this.installingDrivers.join(", ")} dependencies`});return await this.client.sendRequest(contracts_1.InstallDepRequest,{deps:deps})}),this.installingDrivers=this.installingDrivers.filter(v=>v!==conn.driver);const opt=conn.name?["Connect to "+conn.name]:[];(conn.name&&autoUpdateOrInstall?opt[0]:await vscode_1.window.showInformationMessage(`"${dependenciesName}" installed!\n\nGo ahead and connect!`,...opt))===opt[0]&&await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".selectConnection",connection_1.getConnectionId(conn));break;case"Read more":utils_1.openExternal(`${constants_1.DOCS_ROOT_URL}/driver/${conn.driver?conn.driver.toLowerCase():""}?umd_source=vscode&utm_medium=driver&utm_campaign=dependencies`)}}catch(error){this.installingDrivers=this.installingDrivers.filter(v=>v!==conn.driver),this.extension.errorHandler(`Failed to install dependencies for ${conn.driver}:`,error)}},this.driverNotInstalled=async({driverName:driverName})=>{if(!driverName)return;const options=["Search VSCode Marketplace"];try{await vscode_1.window.showInformationMessage(`Driver ${driverName} is not installed.`,...options)===options[0]&&await vscode_1.commands.executeCommand("workbench.extensions.search",'@tag:"sqltools-driver" '+driverName)}catch(error){}},this.jobRunning=async({moduleName:moduleName,moduleVersion:moduleVersion,conn:conn})=>vscode_1.window.showInformationMessage(`We are installing "${moduleName}@${moduleVersion}" to connect to ${conn.name}. Please wait till it finishes.`)}register(extension){this.extension=extension,this.client=extension.client,this.client.onNotification(notifications_1.DriverNotInstalledNotification,this.driverNotInstalled),this.client.onNotification(notification_1.MissingModuleNotification,this.requestToInstall),this.client.onNotification(contracts_1.DependeciesAreBeingInstalledNotification,this.jobRunning)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DependeciesAreBeingInstalledNotification=exports.InstallDepRequest=void 0;const vscode_languageserver_protocol_1=__webpack_require__(4);exports.InstallDepRequest=new vscode_languageserver_protocol_1.RequestType("DependencyInstaller/install"),exports.DependeciesAreBeingInstalledNotification="DependencyInstaller/dependeciesAreBeingInstalledNotification"},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const config_manager_1=__importDefault(__webpack_require__(12)),vscode_1=__webpack_require__(1),constants_1=__webpack_require__(2);let statusBar;statusBar=vscode_1.window.createStatusBarItem(vscode_1.StatusBarAlignment.Left,10),statusBar.tooltip="Select a connection",statusBar.command=constants_1.EXT_NAMESPACE+".selectConnection",statusBar.setText=text=>statusBar.text="$(database) "+(text||"Connect"),statusBar.setText();const updateVisibility=()=>config_manager_1.default.showStatusbar?statusBar.show():statusBar.hide();updateVisibility(),config_manager_1.default.addOnUpdateHook(({event:event})=>event.affectsConfig("showStatusbar")&&updateVisibility),exports.default=statusBar},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const explorer_1=__importDefault(__webpack_require__(370)),connection_1=__webpack_require__(17),utils_1=__webpack_require__(20),quickPick_1=__webpack_require__(77),vscode_1=__webpack_require__(1),constants_1=__webpack_require__(2),hookedCommands=["executeFromInput","executeQuery","executeCurrentQuery","executeQueryFromFile"];exports.default=class ConnectionManagerPlugin{constructor(){this.name="History Manager Plugin",this.addToHistoryHook=evt=>{evt.result.forEach(r=>{this.explorer.addItem(connection_1.getNameFromId(r.connId),r.query)})},this.ext_runFromHistory=async entry=>{let query;entry&&entry.query&&(query=entry.query);try{return query=query||await this.historyMenu(),vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".executeQuery",query,!1)}catch(e){this.errorHandler("Error while running query.",e)}},this.ext_clearHistory=async()=>{this.explorer.clear()},this.ext_editHistory=async entry=>{let query;entry&&entry.query&&(query=entry.query);try{query=query||await this.historyMenu(),utils_1.insertText(query)}catch(e){this.errorHandler("Could not edit query.",e)}}}async historyMenu(prop="label"){const items=this.explorer.getChildren().reduce((agg,group)=>agg.concat(group.items.map(item=>({label:item.query,detail:item.description,description:group.label}))),[]);return await quickPick_1.quickPick(items,prop,{matchOnDescription:!0,matchOnDetail:!0,placeHolderDisabled:"You don't have any queries on your history.",title:"History"})}register(extension){this.explorer||(this.explorer=new explorer_1.default,this.errorHandler=extension.errorHandler,hookedCommands.forEach(cmd=>extension.addAfterCommandSuccessHook(cmd,this.addToHistoryHook)),extension.registerCommand("runFromHistory",this.ext_runFromHistory).registerCommand("editHistory",this.ext_editHistory).registerCommand("clearHistory",this.ext_clearHistory))}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HistoryExplorer=void 0;const vscode_1=__webpack_require__(1),tree_items_1=__webpack_require__(371),vscode_2=__webpack_require__(1),constants_1=__webpack_require__(2),context_1=__importDefault(__webpack_require__(8));class HistoryExplorer{constructor(){this._onDidChangeTreeData=new vscode_1.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.tree={},this.treeGroupOrder=[],this.refresh=item=>{this._onDidChangeTreeData.fire(item)},this.treeView=vscode_2.window.createTreeView(constants_1.EXT_NAMESPACE+"ViewHistoryExplorer",{treeDataProvider:this,showCollapseAll:!0}),context_1.default.subscriptions.push(this.treeView)}getTreeItem(element){return element}getChildren(element){return element?element instanceof tree_items_1.HistoryTreeGroup?element.items:[]:this.treeGroupOrder.map(group=>this.tree[group])}getParent(element){return element.parent||null}addItem(group,value){this.tree[group]||(this.tree[group]=new tree_items_1.HistoryTreeGroup(group,this.refresh)),this.treeGroupOrder=[group].concat(this.treeGroupOrder.filter(g=>g!==group)),this.tree[group].addItem(value),this.refresh()}clear(){this.tree={},this.treeGroupOrder=[],this.refresh()}}exports.HistoryExplorer=HistoryExplorer,exports.default=HistoryExplorer},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HistoryTreeGroup=exports.HistoryTreeItem=void 0;const vscode_1=__webpack_require__(1),config_manager_1=__importDefault(__webpack_require__(12)),constants_1=__webpack_require__(2),query_1=__webpack_require__(34);class HistoryTreeItem extends vscode_1.TreeItem{constructor(query,parent){super(query_1.cleanUp(query),vscode_1.TreeItemCollapsibleState.None),this.query=query,this.parent=parent,this.contextValue="history.item",this.description=(new Date).toLocaleString(),this.command={title:"Edit",command:constants_1.EXT_NAMESPACE+".editHistory",arguments:[this]}}get tooltip(){return this.query}}exports.HistoryTreeItem=HistoryTreeItem;class HistoryTreeGroup extends vscode_1.TreeItem{constructor(name,refresh){super(name,vscode_1.TreeItemCollapsibleState.Expanded),this.name=name,this.refresh=refresh,this.parent=null,this.contextValue="history.group",this.items=[],this.sizeKeeper=()=>{this.items.length>=this.getMaxSize()&&(this.items.length=this.getMaxSize(),this.refresh(this))},config_manager_1.default.addOnUpdateHook(({event:event})=>event.affectsConfig("historySize")&&this.sizeKeeper)}get tooltip(){return this.name}addItem(query){if(query&&0!==query.trim().length)return this.items.length>0&&this.items[0].query.trim()===query.toString().trim()?(this.items[0].description=(new Date).toLocaleString(),this.items[0]):(this.items=[new HistoryTreeItem(query,this)].concat(this.items),this.sizeKeeper(),this.items[0])}getMaxSize(){return config_manager_1.default.get("historySize",100)}}exports.HistoryTreeGroup=HistoryTreeGroup},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const explorer_1=__importDefault(__webpack_require__(373)),utils_1=__webpack_require__(20),quickPick_1=__webpack_require__(77),vscode_1=__webpack_require__(1),constants_1=__webpack_require__(2),context_1=__importDefault(__webpack_require__(8));exports.default=class BookmarksManagerPlugin{constructor(){this.name="Bookmarks Manager Plugin",this.bookmarksMenu=async()=>{const items=this.explorer.getChildren().reduce((agg,group)=>agg.concat(Object.values(group.items).map(item=>({label:item.name,detail:item.description,description:group.label,item:item}))),[]);return quickPick_1.quickPick(items,"item",{matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Pick a bookmarked query",placeHolderDisabled:"You don't have any bookmarks yet.",title:"Bookmarks"})},this.ext_editBookmark=async item=>{try{item=item||await this.bookmarksMenu();const headerText="-- @block Bookmarked query\n-- @group {queryGroup}\n-- @name {queryName}\n\n".replace("{queryName}",item.name).replace("{queryGroup}",item.parent.name);utils_1.insertText(`${headerText}${item.query}`,!0,!0)}catch(e){this.errorHandler("Could not edit bookmarked query",e)}},this.ext_bookmarkSelection=async()=>{try{const query=await utils_1.getSelectedText("bookmark");if(!query||!query.trim())return;const name=await utils_1.readInput("Query name"),group=await utils_1.readInput("Group Name",void 0,"Ungrouped");this.explorer.addItem(group,name,query)}catch(e){this.errorHandler("Error bookmarking query.",e)}},this.ext_deleteBookmark=async item=>{try{if(!(item=item||await this.bookmarksMenu()))return;this.explorer.delete(item.parent.name,item.name)}catch(e){this.errorHandler("Error deleting bookmark.",e)}},this.ext_clearBookmarks=()=>{this.explorer.clear()},this.ext_runFromBookmarks=async item=>{try{if(!(item=item||await this.bookmarksMenu()))return;await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".executeQuery",item.query)}catch(e){this.errorHandler("Error while running query.",e)}}}register(extension){this.explorer||(this.explorer=new explorer_1.default,context_1.default.subscriptions.push(vscode_1.window.createTreeView(constants_1.EXT_NAMESPACE+"ViewBookmarksExplorer",{treeDataProvider:this.explorer,showCollapseAll:!0,canSelectMany:!1})),this.errorHandler=extension.errorHandler,extension.registerCommand("bookmarkSelection",this.ext_bookmarkSelection).registerCommand("clearBookmarks",this.ext_clearBookmarks).registerCommand("editBookmark",this.ext_editBookmark).registerCommand("deleteBookmark",this.ext_deleteBookmark).registerCommand("runFromBookmarks",this.ext_runFromBookmarks))}}},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BookmarkExplorer=void 0;const src_1=__webpack_require__(10),vscode_1=__webpack_require__(1),tree_items_1=__webpack_require__(374),vscode_2=__webpack_require__(1),path_1=__webpack_require__(37),fs_1=__importDefault(__webpack_require__(6)),context_1=__importDefault(__webpack_require__(8)),log=src_1.createLogger("book-man:explorer");class BookmarkExplorer{constructor(){this._onDidChangeTreeData=new vscode_1.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.tree={},this.refresh=item=>{this._onDidChangeTreeData.fire(item)},this.readFromFile()}getTreeItem(element){return element}getChildren(element){return element?element instanceof tree_items_1.BookmarkTreeGroup?Object.values(element.items):[]:Object.keys(this.tree).map(group=>this.tree[group])}getParent(element){return element.parent||null}addItem(group,name,query,skipSave=!1){!query||query&&0===query.trim().length||(this.tree[group]||(this.tree[group]=new tree_items_1.BookmarkTreeGroup(group)),this.tree[group].addItem(name,query),this.refresh(),skipSave||this.save())}get oldFilePath(){return context_1.default.asAbsolutePath("Bookmarks.json")}get filePath(){return path_1.getDataPath("Bookmarks.json")}migrateOldFile(){if(fs_1.default.existsSync(this.oldFilePath))try{fs_1.default.renameSync(this.oldFilePath,this.filePath)}catch(e){}}readFromFile(){this.migrateOldFile();try{fs_1.default.existsSync(this.filePath)||fs_1.default.writeFileSync(this.filePath,"{}");const data=JSON.parse(fs_1.default.readFileSync(this.filePath).toString("utf8"));Object.keys(data).forEach(group=>{Object.keys(data[group]).forEach(name=>{const query=data[group][name];this.addItem(group,name,query,!0)})})}catch(e){log.error("Error reading bookmarks:",e)}}async clear(){"Yes"===await vscode_2.window.showInformationMessage("Do you really want to delete all your bookmarks?",{modal:!0},"Yes")&&(this.tree={},this.refresh(),this.save())}async delete(group,name){"Yes"===await vscode_2.window.showInformationMessage(`Do you really want to delete ${name} bookmark?`,{modal:!0},"Yes")&&(this.tree[group].delete(name),0===this.tree[group].length&&(delete this.tree[group],this.refresh(),this.save()),this.refresh(this.tree[group]),this.save())}save(){const data=Object.values(this.tree).reduce((groupped,item)=>({...groupped,...item.toJSON()}),{});return fs_1.default.writeFileSync(this.filePath,JSON.stringify(data))}}exports.BookmarkExplorer=BookmarkExplorer,exports.default=BookmarkExplorer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BookmarkTreeGroup=exports.BookmarkTreeItem=void 0;const vscode_1=__webpack_require__(1),constants_1=__webpack_require__(2);class BookmarkTreeItem extends vscode_1.TreeItem{constructor(name,query,parent){super(name,vscode_1.TreeItemCollapsibleState.None),this.name=name,this.query=query,this.parent=parent,this.contextValue="bookmark.item",this.description=query,this.command={title:"Edit",command:constants_1.EXT_NAMESPACE+".editBookmark",arguments:[this]}}get tooltip(){return this.query}toJSON(){return{[this.name]:this.query}}}exports.BookmarkTreeItem=BookmarkTreeItem;class BookmarkTreeGroup extends vscode_1.TreeItem{constructor(name){super(name,vscode_1.TreeItemCollapsibleState.Expanded),this.name=name,this.parent=null,this.contextValue="bookmark.group",this.items={}}get tooltip(){return this.name}addItem(name,query){if(query&&(!query||0!==query.trim().length))return this.items[name]?(this.items[name].description=query.trim(),this.items[0]):(this.items[name]=new BookmarkTreeItem(name,query,this),this.items[name])}delete(name){delete this.items[name]}get length(){return Object.keys(this.items).length}toJSON(){const items=Object.values(this.items).reduce((groupped,item)=>({...groupped,...item.toJSON()}),{});return{[this.name]:items}}}exports.BookmarkTreeGroup=BookmarkTreeGroup},function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const src_1=__webpack_require__(10),vscode_1=__webpack_require__(1),config_manager_1=__importDefault(__webpack_require__(12)),query_1=__webpack_require__(34),utils_1=__webpack_require__(20),constants_1=__webpack_require__(2),log=src_1.createLogger("formatter");function formatSqlHandler(editor,edit){try{const options={...config_manager_1.default.format,insertSpaces:vscode_1.workspace.getConfiguration().get("editor.insertSpaces"),tabSize:vscode_1.workspace.getConfiguration().get("editor.tabSize")};edit.replace(editor.selection,query_1.format(editor.document.getText(editor.selection),options)),vscode_1.commands.executeCommand("revealLine",{lineNumber:editor.selection.active.line,at:"center"})}catch(error){return log.error("Error formatting query.",error),Promise.reject(error)}}function insertTextHandler(node,nodes){nodes=nodes||[node];const toInsertSnippet=new vscode_1.SnippetString;let tabStop=1;return nodes.forEach((node,index)=>{if(!node)return;let toInsert=node.snippet||node.value||node;if(toInsert instanceof vscode_1.SnippetString){const value=toInsert.value.replace(/\$0/g,"").replace(/(\$\{)(\d+)(\:)?/g,(_,b,_x,a)=>`${b}${tabStop++}${a}`);toInsertSnippet.value+=value,toInsertSnippet._tabStop=tabStop}else toInsertSnippet.appendPlaceholder(toInsert.toString(),tabStop++);index!==nodes.length-1&&toInsertSnippet.appendText(", ")}),toInsertSnippet.appendTabstop(0),utils_1.insertText(toInsertSnippet)}function copyTextHandler(item,items){const copyText=(items=items||[item]).filter(n=>null!=n).map(item=>""+(item.value||item)).join(", ");if(copyText)return vscode_1.env.clipboard.writeText(copyText)}async function generateInsertQueryHandler(item){const columns=await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".getChildrenForTreeItem",{conn:item.conn,item:item.metadata}),insertQuery=await vscode_1.commands.executeCommand(constants_1.EXT_NAMESPACE+".getInsertQuery",{conn:item.conn,item:item.metadata,columns:columns});return utils_1.insertText(new vscode_1.SnippetString(query_1.formatInsertQuery(insertQuery,config_manager_1.default.format)))}function newSqlFileHandler(){return utils_1.getOrCreateEditor(!0)}exports.default={register:extension=>{extension.registerTextEditorCommand("formatSql",formatSqlHandler).registerCommand("insertText",insertTextHandler).registerCommand("copyText",copyTextHandler).registerCommand("generateInsertQuery",generateInsertQueryHandler).registerCommand("newSqlFile",newSqlFileHandler)},name:"Formatter Plugin"}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Severity",(function(){return Severity})),__webpack_require__.d(__webpack_exports__,"Status",(function(){return Status})),__webpack_require__.d(__webpack_exports__,"addGlobalEventProcessor",(function(){return esm_scope.b})),__webpack_require__.d(__webpack_exports__,"addBreadcrumb",(function(){return addBreadcrumb})),__webpack_require__.d(__webpack_exports__,"captureException",(function(){return captureException})),__webpack_require__.d(__webpack_exports__,"captureEvent",(function(){return captureEvent})),__webpack_require__.d(__webpack_exports__,"captureMessage",(function(){return captureMessage})),__webpack_require__.d(__webpack_exports__,"configureScope",(function(){return configureScope})),__webpack_require__.d(__webpack_exports__,"getHubFromCarrier",(function(){return esm_hub.c})),__webpack_require__.d(__webpack_exports__,"getCurrentHub",(function(){return esm_hub.b})),__webpack_require__.d(__webpack_exports__,"Hub",(function(){return esm_hub.a})),__webpack_require__.d(__webpack_exports__,"Scope",(function(){return esm_scope.a})),__webpack_require__.d(__webpack_exports__,"setContext",(function(){return setContext})),__webpack_require__.d(__webpack_exports__,"setExtra",(function(){return setExtra})),__webpack_require__.d(__webpack_exports__,"setExtras",(function(){return setExtras})),__webpack_require__.d(__webpack_exports__,"setTag",(function(){return setTag})),__webpack_require__.d(__webpack_exports__,"setTags",(function(){return setTags})),__webpack_require__.d(__webpack_exports__,"setUser",(function(){return setUser})),__webpack_require__.d(__webpack_exports__,"withScope",(function(){return withScope})),__webpack_require__.d(__webpack_exports__,"NodeClient",(function(){return client_NodeClient})),__webpack_require__.d(__webpack_exports__,"defaultIntegrations",(function(){return sdk_defaultIntegrations})),__webpack_require__.d(__webpack_exports__,"init",(function(){return init})),__webpack_require__.d(__webpack_exports__,"lastEventId",(function(){return lastEventId})),__webpack_require__.d(__webpack_exports__,"flush",(function(){return flush})),__webpack_require__.d(__webpack_exports__,"close",(function(){return sdk_close})),__webpack_require__.d(__webpack_exports__,"SDK_NAME",(function(){return SDK_NAME})),__webpack_require__.d(__webpack_exports__,"SDK_VERSION",(function(){return SDK_VERSION})),__webpack_require__.d(__webpack_exports__,"Integrations",(function(){return INTEGRATIONS})),__webpack_require__.d(__webpack_exports__,"Transports",(function(){return transports_namespaceObject})),__webpack_require__.d(__webpack_exports__,"Handlers",(function(){return handlers_namespaceObject}));var transports_namespaceObject={};__webpack_require__.r(transports_namespaceObject),__webpack_require__.d(transports_namespaceObject,"BaseTransport",(function(){return base_BaseTransport})),__webpack_require__.d(transports_namespaceObject,"HTTPTransport",(function(){return http_HTTPTransport})),__webpack_require__.d(transports_namespaceObject,"HTTPSTransport",(function(){return https_HTTPSTransport}));var integrations_namespaceObject={};__webpack_require__.r(integrations_namespaceObject),__webpack_require__.d(integrations_namespaceObject,"FunctionToString",(function(){return FunctionToString})),__webpack_require__.d(integrations_namespaceObject,"InboundFilters",(function(){return inboundfilters_InboundFilters}));var handlers_namespaceObject={};__webpack_require__.r(handlers_namespaceObject),__webpack_require__.d(handlers_namespaceObject,"tracingHandler",(function(){return tracingHandler})),__webpack_require__.d(handlers_namespaceObject,"parseRequest",(function(){return parseRequest})),__webpack_require__.d(handlers_namespaceObject,"requestHandler",(function(){return requestHandler})),__webpack_require__.d(handlers_namespaceObject,"errorHandler",(function(){return errorHandler})),__webpack_require__.d(handlers_namespaceObject,"logAndExitProcess",(function(){return logAndExitProcess}));var esm_integrations_namespaceObject={};__webpack_require__.r(esm_integrations_namespaceObject),__webpack_require__.d(esm_integrations_namespaceObject,"Console",(function(){return console_Console})),__webpack_require__.d(esm_integrations_namespaceObject,"Http",(function(){return http_Http})),__webpack_require__.d(esm_integrations_namespaceObject,"OnUncaughtException",(function(){return onuncaughtexception_OnUncaughtException})),__webpack_require__.d(esm_integrations_namespaceObject,"OnUnhandledRejection",(function(){return onunhandledrejection_OnUnhandledRejection})),__webpack_require__.d(esm_integrations_namespaceObject,"LinkedErrors",(function(){return linkederrors_LinkedErrors})),__webpack_require__.d(esm_integrations_namespaceObject,"Modules",(function(){return modules_Modules}));var Severity,Status,tslib_es6=__webpack_require__(0);!function(Severity){Severity.Fatal="fatal",Severity.Error="error",Severity.Warning="warning",Severity.Log="log",Severity.Info="info",Severity.Debug="debug",Severity.Critical="critical"}(Severity||(Severity={})),function(Severity){Severity.fromString=function(level){switch(level){case"debug":return Severity.Debug;case"info":return Severity.Info;case"warn":case"warning":return Severity.Warning;case"error":return Severity.Error;case"fatal":return Severity.Fatal;case"critical":return Severity.Critical;case"log":default:return Severity.Log}}}(Severity||(Severity={})),function(Status){Status.Unknown="unknown",Status.Skipped="skipped",Status.Success="success",Status.RateLimit="rate_limit",Status.Invalid="invalid",Status.Failed="failed"}(Status||(Status={})),function(Status){Status.fromHttpCode=function(code){return code>=200&&code<300?Status.Success:429===code?Status.RateLimit:code>=400&&code<500?Status.Invalid:code>=500?Status.Failed:Status.Unknown}}(Status||(Status={}));var esm_scope=__webpack_require__(54),esm_hub=__webpack_require__(379);function callOnHub(method){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var hub=Object(esm_hub.b)();if(hub&&hub[method])return hub[method].apply(hub,tslib_es6.f(args));throw new Error("No hub defined or "+method+" was not found on the hub, please open a bug report.")}function captureException(exception){var syntheticException;try{throw new Error("Sentry syntheticException")}catch(exception){syntheticException=exception}return callOnHub("captureException",exception,{originalException:exception,syntheticException:syntheticException})}function captureMessage(message,level){var syntheticException;try{throw new Error(message)}catch(exception){syntheticException=exception}return callOnHub("captureMessage",message,level,{originalException:message,syntheticException:syntheticException})}function captureEvent(event){return callOnHub("captureEvent",event)}function configureScope(callback){callOnHub("configureScope",callback)}function addBreadcrumb(breadcrumb){callOnHub("addBreadcrumb",breadcrumb)}function setContext(name,context){callOnHub("setContext",name,context)}function setExtras(extras){callOnHub("setExtras",extras)}function setTags(tags){callOnHub("setTags",tags)}function setExtra(key,extra){callOnHub("setExtra",key,extra)}function setTag(key,value){callOnHub("setTag",key,value)}function setUser(user){callOnHub("setUser",user)}function withScope(callback){callOnHub("withScope",callback)}var setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(obj,proto){return obj.__proto__=proto,obj}:function(obj,proto){for(var prop in proto)obj.hasOwnProperty(prop)||(obj[prop]=proto[prop]);return obj});var error_SentryError=function(_super){function SentryError(message){var _newTarget=this.constructor,_this=_super.call(this,message)||this;return _this.message=message,_this.name=_newTarget.prototype.constructor.name,setPrototypeOf(_this,_newTarget.prototype),_this}return tslib_es6.c(SentryError,_super),SentryError}(Error),DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w\.-]+)(?::(\d+))?\/(.+)/,dsn_Dsn=function(){function Dsn(from){"string"==typeof from?this._fromString(from):this._fromComponents(from),this._validate()}return Dsn.prototype.toString=function(withPassword){void 0===withPassword&&(withPassword=!1);var _a=this,host=_a.host,path=_a.path,pass=_a.pass,port=_a.port,projectId=_a.projectId;return _a.protocol+"://"+_a.user+(withPassword&&pass?":"+pass:"")+"@"+host+(port?":"+port:"")+"/"+(path?path+"/":path)+projectId},Dsn.prototype._fromString=function(str){var match=DSN_REGEX.exec(str);if(!match)throw new error_SentryError("Invalid Dsn");var _a=tslib_es6.e(match.slice(1),6),protocol=_a[0],user=_a[1],_b=_a[2],pass=void 0===_b?"":_b,host=_a[3],_c=_a[4],port=void 0===_c?"":_c,path="",projectId=_a[5],split=projectId.split("/");split.length>1&&(path=split.slice(0,-1).join("/"),projectId=split.pop()),this._fromComponents({host:host,pass:pass,path:path,projectId:projectId,port:port,protocol:protocol,user:user})},Dsn.prototype._fromComponents=function(components){this.protocol=components.protocol,this.user=components.user,this.pass=components.pass||"",this.host=components.host,this.port=components.port||"",this.path=components.path||"",this.projectId=components.projectId},Dsn.prototype._validate=function(){var _this=this;if(["protocol","user","host","projectId"].forEach((function(component){if(!_this[component])throw new error_SentryError("Invalid Dsn")})),"http"!==this.protocol&&"https"!==this.protocol)throw new error_SentryError("Invalid Dsn");if(this.port&&isNaN(parseInt(this.port,10)))throw new error_SentryError("Invalid Dsn")},Dsn}(),logger=__webpack_require__(132),is=__webpack_require__(7),syncpromise=__webpack_require__(36),string=__webpack_require__(23),misc=__webpack_require__(5),Memo=function(){function Memo(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return Memo.prototype.memoize=function(obj){if(this._hasWeakSet)return!!this._inner.has(obj)||(this._inner.add(obj),!1);for(var i=0;i<this._inner.length;i++){if(this._inner[i]===obj)return!0}return this._inner.push(obj),!1},Memo.prototype.unmemoize=function(obj){if(this._hasWeakSet)this._inner.delete(obj);else for(var i=0;i<this._inner.length;i++)if(this._inner[i]===obj){this._inner.splice(i,1);break}},Memo}();function fill(source,name,replacement){if(name in source){var original=source[name],wrapped=replacement(original);if("function"==typeof wrapped)try{wrapped.prototype=wrapped.prototype||{},Object.defineProperties(wrapped,{__sentry_original__:{enumerable:!1,value:original}})}catch(_Oo){}source[name]=wrapped}}function getWalkSource(value){if(Object(is.b)(value)){var error=value,err={message:error.message,name:error.name,stack:error.stack};for(var i in error)Object.prototype.hasOwnProperty.call(error,i)&&(err[i]=error[i]);return err}if(Object(is.c)(value)){var event_1=value,source={};source.type=event_1.type;try{source.target=Object(is.a)(event_1.target)?Object(misc.i)(event_1.target):Object.prototype.toString.call(event_1.target)}catch(_oO){source.target="<unknown>"}try{source.currentTarget=Object(is.a)(event_1.currentTarget)?Object(misc.i)(event_1.currentTarget):Object.prototype.toString.call(event_1.currentTarget)}catch(_oO){source.currentTarget="<unknown>"}for(var i in"undefined"!=typeof CustomEvent&&Object(is.d)(value,CustomEvent)&&(source.detail=event_1.detail),event_1)Object.prototype.hasOwnProperty.call(event_1,i)&&(source[i]=event_1);return source}return value}function jsonSize(value){return function(value){return~-encodeURI(value).split(/%..|./).length}(JSON.stringify(value))}function normalizeValue(value,key){return"domain"===key&&value&&"object"==typeof value&&value._events?"[Domain]":"domainEmitter"===key?"[DomainEmitter]":"undefined"!=typeof global&&value===global?"[Global]":"undefined"!=typeof window&&value===window?"[Window]":"undefined"!=typeof document&&value===document?"[Document]":Object(is.i)(value)?"[SyntheticEvent]":"number"==typeof value&&value!=value?"[NaN]":void 0===value?"[undefined]":"function"==typeof value?"[Function: "+Object(misc.g)(value)+"]":value}function walk(key,value,depth,memo){if(void 0===depth&&(depth=1/0),void 0===memo&&(memo=new Memo),0===depth)return function(value){var type=Object.prototype.toString.call(value);if("string"==typeof value)return value;if("[object Object]"===type)return"[Object]";if("[object Array]"===type)return"[Array]";var normalized=normalizeValue(value);return Object(is.f)(normalized)?normalized:type}(value);if(null!=value&&"function"==typeof value.toJSON)return value.toJSON();var normalized=normalizeValue(value,key);if(Object(is.f)(normalized))return normalized;var source=getWalkSource(value),acc=Array.isArray(value)?[]:{};if(memo.memoize(value))return"[Circular ~]";for(var innerKey in source)Object.prototype.hasOwnProperty.call(source,innerKey)&&(acc[innerKey]=walk(innerKey,source[innerKey],depth-1,memo));return memo.unmemoize(value),acc}function normalize(input,depth){try{return JSON.parse(JSON.stringify(input,(function(key,value){return walk(key,value,depth)})))}catch(_oO){return"**non-serializable**"}}function dropUndefinedKeys(val){var e_1,_a;if(Object(is.e)(val)){var obj=val,rv={};try{for(var _b=tslib_es6.g(Object.keys(obj)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;void 0!==obj[key]&&(rv[key]=dropUndefinedKeys(obj[key]))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return rv}return Array.isArray(val)?val.map(dropUndefinedKeys):val}var installedIntegrations=[];function setupIntegrations(options){var integrations={};return function(options){var defaultIntegrations=options.defaultIntegrations&&tslib_es6.f(options.defaultIntegrations)||[],userIntegrations=options.integrations,integrations=[];if(Array.isArray(userIntegrations)){var userIntegrationsNames_1=userIntegrations.map((function(i){return i.name})),pickedIntegrationsNames_1=[];defaultIntegrations.forEach((function(defaultIntegration){-1===userIntegrationsNames_1.indexOf(defaultIntegration.name)&&-1===pickedIntegrationsNames_1.indexOf(defaultIntegration.name)&&(integrations.push(defaultIntegration),pickedIntegrationsNames_1.push(defaultIntegration.name))})),userIntegrations.forEach((function(userIntegration){-1===pickedIntegrationsNames_1.indexOf(userIntegration.name)&&(integrations.push(userIntegration),pickedIntegrationsNames_1.push(userIntegration.name))}))}else"function"==typeof userIntegrations?(integrations=userIntegrations(defaultIntegrations),integrations=Array.isArray(integrations)?integrations:[integrations]):integrations=tslib_es6.f(defaultIntegrations);var integrationsNames=integrations.map((function(i){return i.name}));return-1!==integrationsNames.indexOf("Debug")&&integrations.push.apply(integrations,tslib_es6.f(integrations.splice(integrationsNames.indexOf("Debug"),1))),integrations}(options).forEach((function(integration){integrations[integration.name]=integration,function(integration){-1===installedIntegrations.indexOf(integration.name)&&(integration.setupOnce(esm_scope.b,esm_hub.b),installedIntegrations.push(integration.name),logger.a.log("Integration installed: "+integration.name))}(integration)})),integrations}var baseclient_BaseClient=function(){function BaseClient(backendClass,options){this._integrations={},this._processing=!1,this._backend=new backendClass(options),this._options=options,options.dsn&&(this._dsn=new dsn_Dsn(options.dsn)),this._isEnabled()&&(this._integrations=setupIntegrations(this._options))}return BaseClient.prototype.captureException=function(exception,hint,scope){var _this=this,eventId=hint&&hint.event_id;return this._processing=!0,this._getBackend().eventFromException(exception,hint).then((function(event){return _this._processEvent(event,hint,scope)})).then((function(finalEvent){eventId=finalEvent&&finalEvent.event_id,_this._processing=!1})).then(null,(function(reason){logger.a.error(reason),_this._processing=!1})),eventId},BaseClient.prototype.captureMessage=function(message,level,hint,scope){var _this=this,eventId=hint&&hint.event_id;return this._processing=!0,(Object(is.f)(message)?this._getBackend().eventFromMessage(""+message,level,hint):this._getBackend().eventFromException(message,hint)).then((function(event){return _this._processEvent(event,hint,scope)})).then((function(finalEvent){eventId=finalEvent&&finalEvent.event_id,_this._processing=!1})).then(null,(function(reason){logger.a.error(reason),_this._processing=!1})),eventId},BaseClient.prototype.captureEvent=function(event,hint,scope){var _this=this,eventId=hint&&hint.event_id;return this._processing=!0,this._processEvent(event,hint,scope).then((function(finalEvent){eventId=finalEvent&&finalEvent.event_id,_this._processing=!1})).then(null,(function(reason){logger.a.error(reason),_this._processing=!1})),eventId},BaseClient.prototype.getDsn=function(){return this._dsn},BaseClient.prototype.getOptions=function(){return this._options},BaseClient.prototype.flush=function(timeout){var _this=this;return this._isClientProcessing(timeout).then((function(status){return clearInterval(status.interval),_this._getBackend().getTransport().close(timeout).then((function(transportFlushed){return status.ready&&transportFlushed}))}))},BaseClient.prototype.close=function(timeout){var _this=this;return this.flush(timeout).then((function(result){return _this.getOptions().enabled=!1,result}))},BaseClient.prototype.getIntegrations=function(){return this._integrations||{}},BaseClient.prototype.getIntegration=function(integration){try{return this._integrations[integration.id]||null}catch(_oO){return logger.a.warn("Cannot retrieve integration "+integration.id+" from the current Client"),null}},BaseClient.prototype._isClientProcessing=function(timeout){var _this=this;return new syncpromise.a((function(resolve){var ticked=0,interval=0;clearInterval(interval),interval=setInterval((function(){_this._processing?(ticked+=1,timeout&&ticked>=timeout&&resolve({interval:interval,ready:!1})):resolve({interval:interval,ready:!0})}),1)}))},BaseClient.prototype._getBackend=function(){return this._backend},BaseClient.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},BaseClient.prototype._prepareEvent=function(event,scope,hint){var _this=this,_a=this.getOptions(),environment=_a.environment,release=_a.release,dist=_a.dist,_b=_a.maxValueLength,maxValueLength=void 0===_b?250:_b,_c=_a.normalizeDepth,normalizeDepth=void 0===_c?3:_c,prepared=tslib_es6.a({},event);void 0===prepared.environment&&void 0!==environment&&(prepared.environment=environment),void 0===prepared.release&&void 0!==release&&(prepared.release=release),void 0===prepared.dist&&void 0!==dist&&(prepared.dist=dist),prepared.message&&(prepared.message=Object(string.c)(prepared.message,maxValueLength));var exception=prepared.exception&&prepared.exception.values&&prepared.exception.values[0];exception&&exception.value&&(exception.value=Object(string.c)(exception.value,maxValueLength));var request=prepared.request;request&&request.url&&(request.url=Object(string.c)(request.url,maxValueLength)),void 0===prepared.event_id&&(prepared.event_id=hint&&hint.event_id?hint.event_id:Object(misc.n)()),this._addIntegrations(prepared.sdk);var result=syncpromise.a.resolve(prepared);return scope&&(result=scope.applyToEvent(prepared,hint)),result.then((function(evt){return"number"==typeof normalizeDepth&&normalizeDepth>0?_this._normalizeEvent(evt,normalizeDepth):evt}))},BaseClient.prototype._normalizeEvent=function(event,depth){return event?tslib_es6.a({},event,event.breadcrumbs&&{breadcrumbs:event.breadcrumbs.map((function(b){return tslib_es6.a({},b,b.data&&{data:normalize(b.data,depth)})}))},event.user&&{user:normalize(event.user,depth)},event.contexts&&{contexts:normalize(event.contexts,depth)},event.extra&&{extra:normalize(event.extra,depth)}):null},BaseClient.prototype._addIntegrations=function(sdkInfo){var integrationsArray=Object.keys(this._integrations);sdkInfo&&integrationsArray.length>0&&(sdkInfo.integrations=integrationsArray)},BaseClient.prototype._processEvent=function(event,hint,scope){var _this=this,_a=this.getOptions(),beforeSend=_a.beforeSend,sampleRate=_a.sampleRate;return this._isEnabled()?"number"==typeof sampleRate&&Math.random()>sampleRate?syncpromise.a.reject("This event has been sampled, will not send event."):new syncpromise.a((function(resolve,reject){_this._prepareEvent(event,scope,hint).then((function(prepared){if(null!==prepared){var finalEvent=prepared;if(hint&&hint.data&&!0===hint.data.__sentry__||!beforeSend)return _this._getBackend().sendEvent(finalEvent),void resolve(finalEvent);var beforeSendResult=beforeSend(prepared,hint);if(void 0===beforeSendResult)logger.a.error("`beforeSend` method has to return `null` or a valid event.");else if(Object(is.j)(beforeSendResult))_this._handleAsyncBeforeSend(beforeSendResult,resolve,reject);else{if(null===(finalEvent=beforeSendResult))return logger.a.log("`beforeSend` returned `null`, will not send event."),void resolve(null);_this._getBackend().sendEvent(finalEvent),resolve(finalEvent)}}else reject("An event processor returned null, will not send event.")})).then(null,(function(reason){_this.captureException(reason,{data:{__sentry__:!0},originalException:reason}),reject("Event processing pipeline threw an error, original event will not be sent. Details has been sent as a new event.\nReason: "+reason)}))})):syncpromise.a.reject("SDK not enabled, will not send event.")},BaseClient.prototype._handleAsyncBeforeSend=function(beforeSend,resolve,reject){var _this=this;beforeSend.then((function(processedEvent){null!==processedEvent?(_this._getBackend().sendEvent(processedEvent),resolve(processedEvent)):reject("`beforeSend` returned `null`, will not send event.")})).then(null,(function(e){reject("beforeSend rejected with "+e)}))},BaseClient}(),noop_NoopTransport=function(){function NoopTransport(){}return NoopTransport.prototype.sendEvent=function(_){return syncpromise.a.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Status.Skipped})},NoopTransport.prototype.close=function(_){return syncpromise.a.resolve(!0)},NoopTransport}(),basebackend_BaseBackend=function(){function BaseBackend(options){this._options=options,this._options.dsn||logger.a.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return BaseBackend.prototype._setupTransport=function(){return new noop_NoopTransport},BaseBackend.prototype.eventFromException=function(_exception,_hint){throw new error_SentryError("Backend has to implement `eventFromException` method")},BaseBackend.prototype.eventFromMessage=function(_message,_level,_hint){throw new error_SentryError("Backend has to implement `eventFromMessage` method")},BaseBackend.prototype.sendEvent=function(event){this._transport.sendEvent(event).then(null,(function(reason){logger.a.error("Error while sending event: "+reason)}))},BaseBackend.prototype.getTransport=function(){return this._transport},BaseBackend}();var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function splitPath(filename){var parts=splitPathRe.exec(filename);return parts?parts.slice(1):[]}function dirname(path){var result=splitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."}var external_fs_=__webpack_require__(6),lru=__webpack_require__(130);var FILE_CONTENT_CACHE=new lru.LRUMap(100);function getFunction(frame){try{return frame.functionName||frame.typeName+"."+(frame.methodName||"<anonymous>")}catch(e){return"<anonymous>"}}var mainModule=(__webpack_require__.c[__webpack_require__.s]&&__webpack_require__.c[__webpack_require__.s].filename&&dirname(__webpack_require__.c[__webpack_require__.s].filename)||global.process.cwd())+"/";function getModule(filename,base){base||(base=mainModule);var ext,f,file=(ext=".js",f=splitPath(filename)[2],ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f),n=(filename=dirname(filename)).lastIndexOf("/node_modules/");if(n>-1)return filename.substr(n+14).replace(/\//g,".")+":"+file;if(0===(n=(filename+"/").lastIndexOf(base,0))){var moduleName=filename.substr(base.length).replace(/\//g,".");return moduleName&&(moduleName+=":"),moduleName+=file}return file}function extractStackFromError(error){var err,stack=(err=error).stack?err.stack.split("\n").slice(1).map((function(line){if(line.match(/^\s*[-]{4,}$/))return{columnNumber:null,fileName:line,functionName:null,lineNumber:null,methodName:null,native:null,typeName:null};var lineMatch=line.match(/at (?:(.+?)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(lineMatch){var object=null,method=null,functionName=null,typeName=null,methodName=null,isNative="native"===lineMatch[5];if(lineMatch[1]){var methodStart=(functionName=lineMatch[1]).lastIndexOf(".");if("."===functionName[methodStart-1]&&methodStart--,methodStart>0){object=functionName.substr(0,methodStart),method=functionName.substr(methodStart+1);var objectEnd=object.indexOf(".Module");objectEnd>0&&(functionName=functionName.substr(objectEnd+1),object=object.substr(0,objectEnd))}typeName=null}return method&&(typeName=object,methodName=method),"<anonymous>"===method&&(methodName=null,functionName=null),{columnNumber:parseInt(lineMatch[4],10)||null,fileName:lineMatch[2]||null,functionName:functionName,lineNumber:parseInt(lineMatch[3],10)||null,methodName:methodName,native:isNative,typeName:typeName}}})).filter((function(callSite){return!!callSite})):[];return stack||[]}function parseStack(stack,options){var filesToRead=[],linesOfContext=options&&void 0!==options.frameContextLines?options.frameContextLines:7,frames=stack.map((function(frame){var parsedFrame={colno:frame.columnNumber,filename:frame.fileName||"",function:getFunction(frame),lineno:frame.lineNumber},isInternal=frame.native||parsedFrame.filename&&!parsedFrame.filename.startsWith("/")&&!parsedFrame.filename.startsWith(".")&&1!==parsedFrame.filename.indexOf(":\\");return parsedFrame.in_app=!isInternal&&void 0!==parsedFrame.filename&&-1===parsedFrame.filename.indexOf("node_modules/"),parsedFrame.filename&&(parsedFrame.module=getModule(parsedFrame.filename),!isInternal&&linesOfContext>0&&filesToRead.push(parsedFrame.filename)),parsedFrame}));if(linesOfContext<=0)return syncpromise.a.resolve(frames);try{return function(filesToRead,frames,linesOfContext){return new syncpromise.a((function(resolve){return(filenames=filesToRead,0===filenames.length?syncpromise.a.resolve({}):new syncpromise.a((function(resolve){for(var sourceFiles={},count=0,_loop_1=function(i){var filename=filenames[i],cache=FILE_CONTENT_CACHE.get(filename);if(void 0!==cache)return null!==cache&&(sourceFiles[filename]=cache),++count===filenames.length&&resolve(sourceFiles),"continue";Object(external_fs_.readFile)(filename,(function(err,data){var content=err?null:data.toString();sourceFiles[filename]=content,FILE_CONTENT_CACHE.set(filename,content),++count===filenames.length&&resolve(sourceFiles)}))},i=0;i<filenames.length;i++)_loop_1(i)}))).then((function(sourceFiles){var result=frames.map((function(frame){if(frame.filename&&sourceFiles[frame.filename])try{var lines=sourceFiles[frame.filename].split("\n");Object(misc.a)(lines,frame,linesOfContext)}catch(e){}return frame}));resolve(result)}));var filenames}))}(filesToRead,frames,linesOfContext)}catch(_){return syncpromise.a.resolve(frames)}}function getExceptionFromError(error,options){var name=error.name||error.constructor.name,stack=extractStackFromError(error);return new syncpromise.a((function(resolve){return parseStack(stack,options).then((function(frames){var result={stacktrace:{frames:prepareFramesForEvent(frames)},type:name,value:error.message};resolve(result)}))}))}function prepareFramesForEvent(stack){if(!stack||!stack.length)return[];var localStack=stack,firstFrameFunction=localStack[0].function||"";return-1===firstFrameFunction.indexOf("captureMessage")&&-1===firstFrameFunction.indexOf("captureException")||(localStack=localStack.slice(1)),localStack.reverse()}var originalFunctionToString,api_API=function(){function API(dsn){this.dsn=dsn,this._dsnObject=new dsn_Dsn(dsn)}return API.prototype.getDsn=function(){return this._dsnObject},API.prototype.getStoreEndpoint=function(){return""+this._getBaseUrl()+this.getStoreEndpointPath()},API.prototype.getStoreEndpointWithUrlEncodedAuth=function(){var object,auth={sentry_key:this._dsnObject.user,sentry_version:"7"};return this.getStoreEndpoint()+"?"+(object=auth,Object.keys(object).map((function(key){return encodeURIComponent(key)+"="+encodeURIComponent(object[key])})).join("&"))},API.prototype._getBaseUrl=function(){var dsn=this._dsnObject,protocol=dsn.protocol?dsn.protocol+":":"",port=dsn.port?":"+dsn.port:"";return protocol+"//"+dsn.host+port},API.prototype.getStoreEndpointPath=function(){var dsn=this._dsnObject;return(dsn.path?"/"+dsn.path:"")+"/api/"+dsn.projectId+"/store/"},API.prototype.getRequestHeaders=function(clientName,clientVersion){var dsn=this._dsnObject,header=["Sentry sentry_version=7"];return header.push("sentry_timestamp="+Object(misc.m)()),header.push("sentry_client="+clientName+"/"+clientVersion),header.push("sentry_key="+dsn.user),dsn.pass&&header.push("sentry_secret="+dsn.pass),{"Content-Type":"application/json","X-Sentry-Auth":header.join(", ")}},API.prototype.getReportDialogEndpoint=function(dialogOptions){void 0===dialogOptions&&(dialogOptions={});var dsn=this._dsnObject,endpoint=this._getBaseUrl()+(dsn.path?"/"+dsn.path:"")+"/api/embed/error-page/",encodedOptions=[];for(var key in encodedOptions.push("dsn="+dsn.toString()),dialogOptions)if("user"===key){if(!dialogOptions.user)continue;dialogOptions.user.name&&encodedOptions.push("name="+encodeURIComponent(dialogOptions.user.name)),dialogOptions.user.email&&encodedOptions.push("email="+encodeURIComponent(dialogOptions.user.email))}else encodedOptions.push(encodeURIComponent(key)+"="+encodeURIComponent(dialogOptions[key]));return encodedOptions.length?endpoint+"?"+encodedOptions.join("&"):endpoint},API}(),promisebuffer_PromiseBuffer=function(){function PromiseBuffer(_limit){this._limit=_limit,this._buffer=[]}return PromiseBuffer.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},PromiseBuffer.prototype.add=function(task){var _this=this;return this.isReady()?(-1===this._buffer.indexOf(task)&&this._buffer.push(task),task.then((function(){return _this.remove(task)})).then(null,(function(){return _this.remove(task).then(null,(function(){}))})),task):syncpromise.a.reject(new error_SentryError("Not adding Promise due to buffer limit reached."))},PromiseBuffer.prototype.remove=function(task){return this._buffer.splice(this._buffer.indexOf(task),1)[0]},PromiseBuffer.prototype.length=function(){return this._buffer.length},PromiseBuffer.prototype.drain=function(timeout){var _this=this;return new syncpromise.a((function(resolve){var capturedSetTimeout=setTimeout((function(){timeout&&timeout>0&&resolve(!1)}),timeout);syncpromise.a.all(_this._buffer).then((function(){clearTimeout(capturedSetTimeout),resolve(!0)})).then(null,(function(){resolve(!0)}))}))},PromiseBuffer}(),SDK_NAME="sentry.javascript.node",SDK_VERSION="5.12.4",base_BaseTransport=function(){function BaseTransport(options){this.options=options,this._buffer=new promisebuffer_PromiseBuffer(30),this._disabledUntil=new Date(Date.now()),this._api=new api_API(options.dsn)}return BaseTransport.prototype._getRequestOptions=function(){var headers=tslib_es6.a({},this._api.getRequestHeaders(SDK_NAME,SDK_VERSION),this.options.headers),dsn=this._api.getDsn(),options={agent:this.client,headers:headers,hostname:dsn.host,method:"POST",path:this._api.getStoreEndpointPath(),port:dsn.port,protocol:dsn.protocol+":"};return this.options.caCerts&&(options.ca=external_fs_.readFileSync(this.options.caCerts)),options},BaseTransport.prototype._sendWithModule=function(httpModule,event){return tslib_es6.b(this,void 0,void 0,(function(){var _this=this;return tslib_es6.d(this,(function(_a){return new Date(Date.now())<this._disabledUntil?[2,Promise.reject(new error_SentryError("Transport locked till "+this._disabledUntil+" due to too many requests."))]:this._buffer.isReady()?[2,this._buffer.add(new Promise((function(resolve,reject){var req=httpModule.request(_this._getRequestOptions(),(function(res){var statusCode=res.statusCode||500,status=Status.fromHttpCode(statusCode);if(res.setEncoding("utf8"),status===Status.Success)resolve({status:status});else{if(status===Status.RateLimit){var now=Date.now(),header=res.headers?res.headers["Retry-After"]:"";header=Array.isArray(header)?header[0]:header,_this._disabledUntil=new Date(now+Object(misc.k)(now,header)),logger.a.warn("Too many requests, backing off till: "+_this._disabledUntil)}var rejectionMessage="HTTP Error ("+statusCode+")";res.headers&&res.headers["x-sentry-error"]&&(rejectionMessage+=": "+res.headers["x-sentry-error"]),reject(new error_SentryError(rejectionMessage))}res.on("data",(function(){})),res.on("end",(function(){}))}));req.on("error",reject),req.end(JSON.stringify(event))})))]:[2,Promise.reject(new error_SentryError("Not adding Promise due to buffer limit reached."))]}))}))},BaseTransport.prototype.sendEvent=function(_){throw new error_SentryError("Transport Class has to implement `sendEvent` method.")},BaseTransport.prototype.close=function(timeout){return this._buffer.drain(timeout)},BaseTransport}(),external_http_=__webpack_require__(52),http_HTTPTransport=function(_super){function HTTPTransport(options){var _this=_super.call(this,options)||this;_this.options=options;var proxy=options.httpProxy||process.env.http_proxy;return _this.module=external_http_,_this.client=proxy?new(__webpack_require__(93))(proxy):new external_http_.Agent({keepAlive:!1,maxSockets:30,timeout:2e3}),_this}return tslib_es6.c(HTTPTransport,_super),HTTPTransport.prototype.sendEvent=function(event){if(!this.module)throw new error_SentryError("No module available in HTTPTransport");return this._sendWithModule(this.module,event)},HTTPTransport}(base_BaseTransport),external_https_=__webpack_require__(35),https_HTTPSTransport=function(_super){function HTTPSTransport(options){var _this=_super.call(this,options)||this;_this.options=options;var proxy=options.httpsProxy||options.httpProxy||process.env.https_proxy||process.env.http_proxy;return _this.module=external_https_,_this.client=proxy?new(__webpack_require__(93))(proxy):new external_https_.Agent({keepAlive:!1,maxSockets:30,timeout:2e3}),_this}return tslib_es6.c(HTTPSTransport,_super),HTTPSTransport.prototype.sendEvent=function(event){if(!this.module)throw new error_SentryError("No module available in HTTPSTransport");return this._sendWithModule(this.module,event)},HTTPSTransport}(base_BaseTransport),backend_NodeBackend=function(_super){function NodeBackend(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.c(NodeBackend,_super),NodeBackend.prototype._setupTransport=function(){if(!this._options.dsn)return _super.prototype._setupTransport.call(this);var dsn=new dsn_Dsn(this._options.dsn),transportOptions=tslib_es6.a({},this._options.transportOptions,this._options.httpProxy&&{httpProxy:this._options.httpProxy},this._options.httpsProxy&&{httpsProxy:this._options.httpsProxy},this._options.caCerts&&{caCerts:this._options.caCerts},{dsn:this._options.dsn});return this._options.transport?new this._options.transport(transportOptions):"http"===dsn.protocol?new http_HTTPTransport(transportOptions):new https_HTTPSTransport(transportOptions)},NodeBackend.prototype.eventFromException=function(exception,hint){var _this=this,ex=exception,mechanism={handled:!0,type:"generic"};if(!Object(is.b)(exception)){if(Object(is.e)(exception)){var message="Non-Error exception captured with keys: "+function(exception,maxLength){void 0===maxLength&&(maxLength=40);var keys=Object.keys(getWalkSource(exception));if(keys.sort(),!keys.length)return"[object has no keys]";if(keys[0].length>=maxLength)return Object(string.c)(keys[0],maxLength);for(var includedKeys=keys.length;includedKeys>0;includedKeys--){var serialized=keys.slice(0,includedKeys).join(", ");if(!(serialized.length>maxLength))return includedKeys===keys.length?serialized:Object(string.c)(serialized,maxLength)}return""}(exception);Object(esm_hub.b)().configureScope((function(scope){scope.setExtra("__serialized__",function normalizeToSize(object,depth,maxSize){void 0===depth&&(depth=3),void 0===maxSize&&(maxSize=102400);var serialized=normalize(object,depth);return jsonSize(serialized)>maxSize?normalizeToSize(object,depth-1,maxSize):serialized}(exception))})),(ex=hint&&hint.syntheticException||new Error(message)).message=message}else ex=hint&&hint.syntheticException||new Error(exception);mechanism.synthetic=!0}return new syncpromise.a((function(resolve,reject){return(error=ex,options=_this._options,new syncpromise.a((function(resolve){return getExceptionFromError(error,options).then((function(exception){resolve({exception:{values:[exception]}})}))}))).then((function(event){Object(misc.c)(event,void 0,void 0),Object(misc.b)(event,mechanism),resolve(tslib_es6.a({},event,{event_id:hint&&hint.event_id}))})).then(null,reject);var error,options}))},NodeBackend.prototype.eventFromMessage=function(message,level,hint){var _this=this;void 0===level&&(level=Severity.Info);var event={event_id:hint&&hint.event_id,level:level,message:message};return new syncpromise.a((function(resolve){_this._options.attachStacktrace&&hint&&hint.syntheticException?parseStack(hint.syntheticException?extractStackFromError(hint.syntheticException):[],_this._options).then((function(frames){event.stacktrace={frames:prepareFramesForEvent(frames)},resolve(event)})).then(null,(function(){resolve(event)})):resolve(event)}))},NodeBackend}(basebackend_BaseBackend),client_NodeClient=function(_super){function NodeClient(options){return _super.call(this,backend_NodeBackend,options)||this}return tslib_es6.c(NodeClient,_super),NodeClient.prototype._prepareEvent=function(event,scope,hint){return event.platform=event.platform||"node",event.sdk=tslib_es6.a({},event.sdk,{name:SDK_NAME,packages:tslib_es6.f(event.sdk&&event.sdk.packages||[],[{name:"npm:@sentry/node",version:SDK_VERSION}]),version:SDK_VERSION}),this.getOptions().serverName&&(event.server_name=this.getOptions().serverName),_super.prototype._prepareEvent.call(this,event,scope,hint)},NodeClient}(baseclient_BaseClient),FunctionToString=function(){function FunctionToString(){this.name=FunctionToString.id}return FunctionToString.prototype.setupOnce=function(){originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this.__sentry_original__||this;return originalFunctionToString.apply(context,args)}},FunctionToString.id="FunctionToString",FunctionToString}(),DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],inboundfilters_InboundFilters=function(){function InboundFilters(_options){void 0===_options&&(_options={}),this._options=_options,this.name=InboundFilters.id}return InboundFilters.prototype.setupOnce=function(){Object(esm_scope.b)((function(event){var hub=Object(esm_hub.b)();if(!hub)return event;var self=hub.getIntegration(InboundFilters);if(self){var client=hub.getClient(),clientOptions=client?client.getOptions():{},options=self._mergeOptions(clientOptions);if(self._shouldDropEvent(event,options))return null}return event}))},InboundFilters.prototype._shouldDropEvent=function(event,options){return this._isSentryError(event,options)?(logger.a.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(misc.f)(event)),!0):this._isIgnoredError(event,options)?(logger.a.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(misc.f)(event)),!0):this._isBlacklistedUrl(event,options)?(logger.a.warn("Event dropped due to being matched by `blacklistUrls` option.\nEvent: "+Object(misc.f)(event)+".\nUrl: "+this._getEventFilterUrl(event)),!0):!this._isWhitelistedUrl(event,options)&&(logger.a.warn("Event dropped due to not being matched by `whitelistUrls` option.\nEvent: "+Object(misc.f)(event)+".\nUrl: "+this._getEventFilterUrl(event)),!0)},InboundFilters.prototype._isSentryError=function(event,options){if(void 0===options&&(options={}),!options.ignoreInternal)return!1;try{return event&&event.exception&&event.exception.values&&event.exception.values[0]&&"SentryError"===event.exception.values[0].type||!1}catch(_oO){return!1}},InboundFilters.prototype._isIgnoredError=function(event,options){return void 0===options&&(options={}),!(!options.ignoreErrors||!options.ignoreErrors.length)&&this._getPossibleEventMessages(event).some((function(message){return options.ignoreErrors.some((function(pattern){return Object(string.a)(message,pattern)}))}))},InboundFilters.prototype._isBlacklistedUrl=function(event,options){if(void 0===options&&(options={}),!options.blacklistUrls||!options.blacklistUrls.length)return!1;var url=this._getEventFilterUrl(event);return!!url&&options.blacklistUrls.some((function(pattern){return Object(string.a)(url,pattern)}))},InboundFilters.prototype._isWhitelistedUrl=function(event,options){if(void 0===options&&(options={}),!options.whitelistUrls||!options.whitelistUrls.length)return!0;var url=this._getEventFilterUrl(event);return!url||options.whitelistUrls.some((function(pattern){return Object(string.a)(url,pattern)}))},InboundFilters.prototype._mergeOptions=function(clientOptions){return void 0===clientOptions&&(clientOptions={}),{blacklistUrls:tslib_es6.f(this._options.blacklistUrls||[],clientOptions.blacklistUrls||[]),ignoreErrors:tslib_es6.f(this._options.ignoreErrors||[],clientOptions.ignoreErrors||[],DEFAULT_IGNORE_ERRORS),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal,whitelistUrls:tslib_es6.f(this._options.whitelistUrls||[],clientOptions.whitelistUrls||[])}},InboundFilters.prototype._getPossibleEventMessages=function(event){if(event.message)return[event.message];if(event.exception)try{var _a=event.exception.values&&event.exception.values[0]||{},_b=_a.type,type=void 0===_b?"":_b,_c=_a.value,value=void 0===_c?"":_c;return[""+value,type+": "+value]}catch(oO){return logger.a.error("Cannot extract message for event "+Object(misc.f)(event)),[]}return[]},InboundFilters.prototype._getEventFilterUrl=function(event){try{if(event.stacktrace){var frames_1=event.stacktrace.frames;return frames_1&&frames_1[frames_1.length-1].filename||null}if(event.exception){var frames_2=event.exception.values&&event.exception.values[0].stacktrace&&event.exception.values[0].stacktrace.frames;return frames_2&&frames_2[frames_2.length-1].filename||null}return null}catch(oO){return logger.a.error("Cannot extract url for event "+Object(misc.f)(event)),null}},InboundFilters.id="InboundFilters",InboundFilters}();var external_domain_=__webpack_require__(53),external_util_=__webpack_require__(22),console_Console=function(){function Console(){this.name=Console.id}return Console.prototype.setupOnce=function(){var e_1,_a,consoleModule=__webpack_require__(191);try{for(var _b=tslib_es6.g(["debug","info","warn","error","log"]),_c=_b.next();!_c.done;_c=_b.next()){var level=_c.value;fill(consoleModule,level,createConsoleWrapper(level))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},Console.id="Console",Console}();function createConsoleWrapper(level){return function(originalConsoleMethod){var sentryLevel;switch(level){case"debug":sentryLevel=Severity.Debug;break;case"error":sentryLevel=Severity.Error;break;case"info":sentryLevel=Severity.Info;break;case"warn":sentryLevel=Severity.Warning;break;default:sentryLevel=Severity.Log}return function(){Object(esm_hub.b)().getIntegration(console_Console)&&Object(esm_hub.b)().addBreadcrumb({category:"console",level:sentryLevel,message:external_util_.format.apply(void 0,arguments)},{input:tslib_es6.f(arguments),level:level}),originalConsoleMethod.apply(this,arguments)}}}var SpanStatus,NODE_VERSION=Object(misc.l)(process.versions.node),http_Http=function(){function Http(options){void 0===options&&(options={}),this.name=Http.id,this._breadcrumbs=void 0===options.breadcrumbs||options.breadcrumbs,this._tracing=void 0!==options.tracing&&options.tracing}return Http.prototype.setupOnce=function(){if(this._breadcrumbs||this._tracing){var breadcrumbsEnabled,tracingEnabled,handlerWrapper=(breadcrumbsEnabled=this._breadcrumbs,tracingEnabled=this._tracing,function(originalHandler){return function(options){var span,requestUrl=extractUrl(options);return isSentryRequest(requestUrl)?originalHandler.apply(this,arguments):(tracingEnabled&&(span=Object(esm_hub.b)().startSpan({description:("string"!=typeof options&&options.method?options.method:"GET")+"|"+requestUrl,op:"request"})),originalHandler.apply(this,arguments).once("response",(function(res){breadcrumbsEnabled&&addRequestBreadcrumb("response",requestUrl,this,res),tracingEnabled&&span&&(span.setHttpStatus(res.statusCode),span.finish())})).once("error",(function(){breadcrumbsEnabled&&addRequestBreadcrumb("error",requestUrl,this),tracingEnabled&&span&&(span.setHttpStatus(500),span.finish())})))}}),httpModule=__webpack_require__(52);if(fill(httpModule,"get",handlerWrapper),fill(httpModule,"request",handlerWrapper),NODE_VERSION.major&&NODE_VERSION.major>8){var httpsModule=__webpack_require__(35);fill(httpsModule,"get",handlerWrapper),fill(httpsModule,"request",handlerWrapper)}}},Http.id="Http",Http}();function addRequestBreadcrumb(event,url,req,res){Object(esm_hub.b)().getIntegration(http_Http)&&Object(esm_hub.b)().addBreadcrumb({category:"http",data:{method:req.method,status_code:res&&res.statusCode,url:url},type:"http"},{event:event,request:req,response:res})}function extractUrl(options){return"string"==typeof options?options:(options.protocol||"")+"//"+(options.hostname||options.host||"")+(options.port&&80!==options.port&&443!==options.port?":"+options.port:"")+(options.path||"/")}function isSentryRequest(url){var client=Object(esm_hub.b)().getClient();if(!url||!client)return!1;var dsn=client.getDsn();return!!dsn&&-1!==url.indexOf(dsn.host)}!function(SpanStatus){SpanStatus.Ok="ok",SpanStatus.DeadlineExceeded="deadline_exceeded",SpanStatus.Unauthenticated="unauthenticated",SpanStatus.PermissionDenied="permission_denied",SpanStatus.NotFound="not_found",SpanStatus.ResourceExhausted="resource_exhausted",SpanStatus.InvalidArgument="invalid_argument",SpanStatus.Unimplemented="unimplemented",SpanStatus.Unavailable="unavailable",SpanStatus.InternalError="internal_error",SpanStatus.UnknownError="unknown_error",SpanStatus.Cancelled="cancelled",SpanStatus.AlreadyExists="already_exists",SpanStatus.FailedPrecondition="failed_precondition",SpanStatus.Aborted="aborted",SpanStatus.OutOfRange="out_of_range",SpanStatus.DataLoss="data_loss"}(SpanStatus||(SpanStatus={})),function(SpanStatus){SpanStatus.fromHttpCode=function(httpStatus){if(httpStatus<400)return SpanStatus.Ok;if(httpStatus>=400&&httpStatus<500)switch(httpStatus){case 401:return SpanStatus.Unauthenticated;case 403:return SpanStatus.PermissionDenied;case 404:return SpanStatus.NotFound;case 409:return SpanStatus.AlreadyExists;case 413:return SpanStatus.FailedPrecondition;case 429:return SpanStatus.ResourceExhausted;default:return SpanStatus.InvalidArgument}if(httpStatus>=500&&httpStatus<600)switch(httpStatus){case 501:return SpanStatus.Unimplemented;case 503:return SpanStatus.Unavailable;case 504:return SpanStatus.DeadlineExceeded;default:return SpanStatus.InternalError}return SpanStatus.UnknownError}}(SpanStatus||(SpanStatus={}));var TRACEPARENT_REGEXP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$"),SpanRecorder=function(){function SpanRecorder(maxlen){this._openSpanCount=0,this.finishedSpans=[],this._maxlen=maxlen}return SpanRecorder.prototype.startSpan=function(span){this._openSpanCount+=1,this._openSpanCount>this._maxlen&&(span.spanRecorder=void 0)},SpanRecorder.prototype.finishSpan=function(span){this.finishedSpans.push(span)},SpanRecorder}(),span_Span=function(){function Span(spanContext,hub){if(this._hub=Object(esm_hub.b)(),this._traceId=Object(misc.n)(),this._spanId=Object(misc.n)().substring(16),this.startTimestamp=Object(misc.m)(),this.tags={},this.data={},Object(is.d)(hub,esm_hub.a)&&(this._hub=hub),!spanContext)return this;spanContext.traceId&&(this._traceId=spanContext.traceId),spanContext.spanId&&(this._spanId=spanContext.spanId),spanContext.parentSpanId&&(this._parentSpanId=spanContext.parentSpanId),"sampled"in spanContext&&(this.sampled=spanContext.sampled),spanContext.transaction&&(this.transaction=spanContext.transaction),spanContext.op&&(this.op=spanContext.op),spanContext.description&&(this.description=spanContext.description),spanContext.data&&(this.data=spanContext.data),spanContext.tags&&(this.tags=spanContext.tags)}return Span.prototype.initFinishedSpans=function(maxlen){void 0===maxlen&&(maxlen=1e3),this.spanRecorder||(this.spanRecorder=new SpanRecorder(maxlen)),this.spanRecorder.startSpan(this)},Span.prototype.child=function(spanContext){var span=new Span(tslib_es6.a({},spanContext,{parentSpanId:this._spanId,sampled:this.sampled,traceId:this._traceId}));return span.spanRecorder=this.spanRecorder,span},Span.fromTraceparent=function(traceparent,spanContext){var matches=traceparent.match(TRACEPARENT_REGEXP);if(matches){var sampled=void 0;return"1"===matches[3]?sampled=!0:"0"===matches[3]&&(sampled=!1),new Span(tslib_es6.a({},spanContext,{parentSpanId:matches[2],sampled:sampled,traceId:matches[1]}))}},Span.prototype.setTag=function(key,value){var _a;return this.tags=tslib_es6.a({},this.tags,((_a={})[key]=value,_a)),this},Span.prototype.setData=function(key,value){var _a;return this.data=tslib_es6.a({},this.data,((_a={})[key]=value,_a)),this},Span.prototype.setStatus=function(value){return this.setTag("status",value),this},Span.prototype.setHttpStatus=function(httpStatus){this.setTag("http.status_code",String(httpStatus));var spanStatus=SpanStatus.fromHttpCode(httpStatus);return spanStatus!==SpanStatus.UnknownError&&this.setStatus(spanStatus),this},Span.prototype.isSuccess=function(){return this.tags.status===SpanStatus.Ok},Span.prototype.finish=function(useLastSpanTimestamp){var _this=this;if(void 0===useLastSpanTimestamp&&(useLastSpanTimestamp=!1),void 0===this.timestamp&&(this.timestamp=Object(misc.m)(),void 0!==this.spanRecorder&&(this.spanRecorder.finishSpan(this),void 0!==this.transaction))){if(void 0!==this.sampled){var finishedSpans=this.spanRecorder?this.spanRecorder.finishedSpans.filter((function(s){return s!==_this})):[];return useLastSpanTimestamp&&finishedSpans.length>0&&(this.timestamp=finishedSpans[finishedSpans.length-1].timestamp),this._hub.captureEvent({contexts:{trace:this.getTraceContext()},spans:finishedSpans,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.timestamp,transaction:this.transaction,type:"transaction"})}logger.a.warn("Discarding transaction Span without sampling decision")}},Span.prototype.toTraceparent=function(){var sampledString="";return void 0!==this.sampled&&(sampledString=this.sampled?"-1":"-0"),this._traceId+"-"+this._spanId+sampledString},Span.prototype.getTraceContext=function(){return dropUndefinedKeys({data:this.data,description:this.description,op:this.op,parent_span_id:this._parentSpanId,span_id:this._spanId,status:this.tags.status,tags:this.tags,trace_id:this._traceId})},Span.prototype.toJSON=function(){return dropUndefinedKeys({data:this.data,description:this.description,op:this.op,parent_span_id:this._parentSpanId,sampled:this.sampled,span_id:this._spanId,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.timestamp,trace_id:this._traceId,transaction:this.transaction})},Span}();var cookie=__webpack_require__(131),external_os_=__webpack_require__(18),external_url_=__webpack_require__(78);function tracingHandler(){return function(req,res,next){var reqMethod=(req.method||"").toUpperCase(),reqUrl=req.url,hub=Object(esm_hub.b)(),transaction=hub.startSpan({transaction:reqMethod+"|"+reqUrl});hub.configureScope((function(scope){scope.setSpan(transaction)})),res.once("finish",(function(){transaction.setHttpStatus(res.statusCode),transaction.finish()})),next()}}var DEFAULT_REQUEST_KEYS=["cookies","data","headers","method","query_string","url"];var DEFAULT_USER_KEYS=["id","username","email"];function parseRequest(event,req,options){if((options=tslib_es6.a({request:!0,serverName:!0,transaction:!0,user:!0,version:!0},options)).version&&(event.extra=tslib_es6.a({},event.extra,{node:global.process.version})),options.request&&(event.request=tslib_es6.a({},event.request,function(req,keys){var request={},attributes=Array.isArray(keys)?keys:DEFAULT_REQUEST_KEYS,headers=req.headers||req.header||{},method=req.method,host=req.hostname||req.host||headers.host||"<no host>",protocol="https"===req.protocol||req.secure||(req.socket||{}).encrypted?"https":"http",originalUrl=req.originalUrl||req.url,absoluteUrl=protocol+"://"+host+originalUrl;return attributes.forEach((function(key){switch(key){case"headers":request.headers=headers;break;case"method":request.method=method;break;case"url":request.url=absoluteUrl;break;case"cookies":request.cookies=cookie.parse(headers.cookie||"");break;case"query_string":request.query_string=external_url_.parse(originalUrl||"",!1).query;break;case"data":var data=req.body;"GET"!==method&&"HEAD"!==method||void 0===data&&(data="<unavailable>"),data&&!Object(is.h)(data)&&(data=JSON.stringify(normalize(data))),request.data=data;break;default:({}).hasOwnProperty.call(req,key)&&(request[key]=req[key])}})),request}(req,options.request))),options.serverName&&(event.server_name=global.process.env.SENTRY_NAME||external_os_.hostname()),options.user&&req.user&&(event.user=tslib_es6.a({},event.user,function(req,keys){var user={};(Array.isArray(keys)?keys:DEFAULT_USER_KEYS).forEach((function(key){req.user&&key in req.user&&(user[key]=req.user[key])}));var ip=req.ip||req.connection&&req.connection.remoteAddress;return ip&&(user.ip_address=ip),user}(req,options.user))),options.transaction&&!event.transaction){var transaction=function(req,type){try{var request=req;switch(type){case"path":return request.route.path;case"handler":return request.route.stack[0].name;case"methodPath":default:return request.method.toUpperCase()+"|"+request.route.path}}catch(_oO){return}}(req,options.transaction);transaction&&(event.transaction=transaction)}return event}function requestHandler(options){return function(req,res,next){if(options&&options.flushTimeout&&options.flushTimeout>0){var _end_1=res.end;res.end=function(chunk,encoding,cb){var _this=this;flush(options.flushTimeout).then((function(){_end_1.call(_this,chunk,encoding,cb)})).then(null,(function(e){logger.a.error(e)}))}}var local=external_domain_.create();local.add(req),local.add(res),local.on("error",next),local.run((function(){Object(esm_hub.b)().configureScope((function(scope){return scope.addEventProcessor((function(event){return parseRequest(event,req,options)}))})),next()}))}}function defaultShouldHandleError(error){return function(error){var statusCode=error.status||error.statusCode||error.status_code||error.output&&error.output.statusCode;return statusCode?parseInt(statusCode,10):500}(error)>=500}function errorHandler(options){return function(error,req,res,next){(options&&options.shouldHandleError||defaultShouldHandleError)(error)?withScope((function(scope){if(req.headers&&Object(is.h)(req.headers["sentry-trace"])){var span=span_Span.fromTraceparent(req.headers["sentry-trace"]);scope.setSpan(span)}var eventId=captureException(error);res.sentry=eventId,next(error)})):next(error)}}function logAndExitProcess(error){console.error(error&&error.stack?error.stack:error);var client=Object(esm_hub.b)().getClient();if(void 0===client)return logger.a.warn("No NodeClient was defined, we are exiting the process now."),void global.process.exit(1);var options=client.getOptions(),timeout=options&&options.shutdownTimeout&&options.shutdownTimeout>0&&options.shutdownTimeout||2e3;client.close(timeout).then((function(result){result||logger.a.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)})).then(null,(function(e){console.error(e)}))}var moduleCache,onuncaughtexception_OnUncaughtException=function(){function OnUncaughtException(_options){void 0===_options&&(_options={}),this._options=_options,this.name=OnUncaughtException.id,this.handler=this._makeErrorHandler()}return OnUncaughtException.prototype.setupOnce=function(){global.process.on("uncaughtException",this.handler.bind(this))},OnUncaughtException.prototype._makeErrorHandler=function(){var firstError,_this=this,caughtFirstError=!1,caughtSecondError=!1,calledFatalError=!1;return function(error){var onFatalError=logAndExitProcess,client=Object(esm_hub.b)().getClient();if(_this._options.onFatalError?onFatalError=_this._options.onFatalError:client&&client.getOptions().onFatalError&&(onFatalError=client.getOptions().onFatalError),caughtFirstError)calledFatalError?(logger.a.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),logAndExitProcess(error)):caughtSecondError||(caughtSecondError=!0,setTimeout((function(){calledFatalError||(calledFatalError=!0,onFatalError(firstError,error))}),2e3));else{var hub_1=Object(esm_hub.b)();firstError=error,caughtFirstError=!0,hub_1.getIntegration(OnUncaughtException)?hub_1.withScope((function(scope){scope.setLevel(Severity.Fatal),hub_1.captureException(error,{originalException:error}),calledFatalError||(calledFatalError=!0,onFatalError(error))})):calledFatalError||(calledFatalError=!0,onFatalError(error))}}},OnUncaughtException.id="OnUncaughtException",OnUncaughtException}(),onunhandledrejection_OnUnhandledRejection=function(){function OnUnhandledRejection(_options){void 0===_options&&(_options={mode:"warn"}),this._options=_options,this.name=OnUnhandledRejection.id}return OnUnhandledRejection.prototype.setupOnce=function(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))},OnUnhandledRejection.prototype.sendUnhandledPromise=function(reason,promise){var hub=Object(esm_hub.b)();if(hub.getIntegration(OnUnhandledRejection)){var context=promise.domain&&promise.domain.sentryContext||{};hub.withScope((function(scope){scope.setExtra("unhandledPromiseRejection",!0),context.user&&scope.setUser(context.user),context.tags&&scope.setTags(context.tags),context.extra&&scope.setExtras(context.extra),hub.captureException(reason,{originalException:promise})})),this._handleRejection(reason)}else this._handleRejection(reason)},OnUnhandledRejection.prototype._handleRejection=function(reason){var rejectionWarning="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";"warn"===this._options.mode?Object(misc.d)((function(){console.warn(rejectionWarning),console.error(reason&&reason.stack?reason.stack:reason)})):"strict"===this._options.mode&&(Object(misc.d)((function(){console.warn(rejectionWarning)})),logAndExitProcess(reason))},OnUnhandledRejection.id="OnUnhandledRejection",OnUnhandledRejection}(),linkederrors_LinkedErrors=function(){function LinkedErrors(options){void 0===options&&(options={}),this.name=LinkedErrors.id,this._key=options.key||"cause",this._limit=options.limit||5}return LinkedErrors.prototype.setupOnce=function(){Object(esm_scope.b)((function(event,hint){var self=Object(esm_hub.b)().getIntegration(LinkedErrors);return self?self.handler(event,hint):event}))},LinkedErrors.prototype.handler=function(event,hint){var _this=this;return event.exception&&event.exception.values&&hint&&Object(is.d)(hint.originalException,Error)?new syncpromise.a((function(resolve){_this.walkErrorTree(hint.originalException,_this._key).then((function(linkedErrors){event&&event.exception&&event.exception.values&&(event.exception.values=tslib_es6.f(linkedErrors,event.exception.values)),resolve(event)})).then(null,(function(){resolve(event)}))})):syncpromise.a.resolve(event)},LinkedErrors.prototype.walkErrorTree=function(error,key,stack){var _this=this;return void 0===stack&&(stack=[]),!Object(is.d)(error[key],Error)||stack.length+1>=this._limit?syncpromise.a.resolve(stack):new syncpromise.a((function(resolve,reject){getExceptionFromError(error[key]).then((function(exception){_this.walkErrorTree(error[key],key,tslib_es6.f([exception],stack)).then(resolve).then(null,(function(){reject()}))})).then(null,(function(){reject()}))}))},LinkedErrors.id="LinkedErrors",LinkedErrors}(),external_path_=__webpack_require__(9);var modules_Modules=function(){function Modules(){this.name=Modules.id}return Modules.prototype.setupOnce=function(addGlobalEventProcessor,getCurrentHub){var _this=this;addGlobalEventProcessor((function(event){return getCurrentHub().getIntegration(Modules)?tslib_es6.a({},event,{modules:_this._getModules()}):event}))},Modules.prototype._getModules=function(){var mainPaths,paths,infos,seen;return moduleCache||(mainPaths=__webpack_require__.c[__webpack_require__.s]&&__webpack_require__.c[__webpack_require__.s].paths||[],paths=__webpack_require__.c?Object.keys(__webpack_require__.c):[],infos={},seen={},paths.forEach((function(path){var dir=path,updir=function(){var orig=dir;if((dir=Object(external_path_.dirname)(orig))&&orig!==dir&&!seen[orig]){if(mainPaths.indexOf(dir)<0)return updir();var pkgfile=Object(external_path_.join)(orig,"package.json");if(seen[orig]=!0,!Object(external_fs_.existsSync)(pkgfile))return updir();try{var info=JSON.parse(Object(external_fs_.readFileSync)(pkgfile,"utf8"));infos[info.name]=info.version}catch(_oO){}}};updir()})),moduleCache=infos),moduleCache},Modules.id="Modules",Modules}(),sdk_defaultIntegrations=[new integrations_namespaceObject.InboundFilters,new integrations_namespaceObject.FunctionToString,new console_Console,new http_Http,new onuncaughtexception_OnUncaughtException,new onunhandledrejection_OnUnhandledRejection,new linkederrors_LinkedErrors];function init(options){if(void 0===options&&(options={}),void 0===options.defaultIntegrations&&(options.defaultIntegrations=sdk_defaultIntegrations),void 0===options.dsn&&process.env.SENTRY_DSN&&(options.dsn=process.env.SENTRY_DSN),void 0===options.release){var global_1=Object(misc.h)();process.env.SENTRY_RELEASE?options.release=process.env.SENTRY_RELEASE:global_1.SENTRY_RELEASE&&global_1.SENTRY_RELEASE.id&&(options.release=global_1.SENTRY_RELEASE.id)}void 0===options.environment&&process.env.SENTRY_ENVIRONMENT&&(options.environment=process.env.SENTRY_ENVIRONMENT),external_domain_.active&&Object(esm_hub.e)(Object(esm_hub.d)(),Object(esm_hub.b)()),function(clientClass,options){!0===options.debug&&logger.a.enable(),Object(esm_hub.b)().bindClient(new clientClass(options))}(client_NodeClient,options)}function lastEventId(){return Object(esm_hub.b)().lastEventId()}function flush(timeout){return tslib_es6.b(this,void 0,void 0,(function(){var client;return tslib_es6.d(this,(function(_a){return(client=Object(esm_hub.b)().getClient())?[2,client.flush(timeout)]:[2,Promise.reject(!1)]}))}))}function sdk_close(timeout){return tslib_es6.b(this,void 0,void 0,(function(){var client;return tslib_es6.d(this,(function(_a){return(client=Object(esm_hub.b)().getClient())?[2,client.close(timeout)]:[2,Promise.reject(!1)]}))}))}var INTEGRATIONS=tslib_es6.a({},integrations_namespaceObject,esm_integrations_namespaceObject)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"v1",(function(){return esm_node_v1})),__webpack_require__.d(__webpack_exports__,"v3",(function(){return esm_node_v3})),__webpack_require__.d(__webpack_exports__,"v4",(function(){return esm_node_v4})),__webpack_require__.d(__webpack_exports__,"v5",(function(){return esm_node_v5})),__webpack_require__.d(__webpack_exports__,"NIL",(function(){return nil})),__webpack_require__.d(__webpack_exports__,"version",(function(){return esm_node_version})),__webpack_require__.d(__webpack_exports__,"validate",(function(){return esm_node_validate})),__webpack_require__.d(__webpack_exports__,"stringify",(function(){return esm_node_stringify})),__webpack_require__.d(__webpack_exports__,"parse",(function(){return esm_node_parse}));var external_crypto_=__webpack_require__(19),external_crypto_default=__webpack_require__.n(external_crypto_);const rnds8=new Uint8Array(16);function rng(){return external_crypto_default.a.randomFillSync(rnds8)}var regex=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var esm_node_validate=function(uuid){return"string"==typeof uuid&&regex.test(uuid)};const byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));var esm_node_stringify=function(arr,offset=0){const uuid=(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();if(!esm_node_validate(uuid))throw TypeError("Stringified UUID is invalid");return uuid};let _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;var esm_node_v1=function(options,buf,offset){let i=buf&&offset||0;const b=buf||new Array(16);let node=(options=options||{}).node||_nodeId,clockseq=void 0!==options.clockseq?options.clockseq:_clockseq;if(null==node||null==clockseq){const seedBytes=options.random||(options.rng||rng)();null==node&&(node=_nodeId=[1|seedBytes[0],seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]),null==clockseq&&(clockseq=_clockseq=16383&(seedBytes[6]<<8|seedBytes[7]))}let msecs=void 0!==options.msecs?options.msecs:Date.now(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1;const dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;const tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;const tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(let n=0;n<6;++n)b[i+n]=node[n];return buf||esm_node_stringify(b)};var esm_node_parse=function(uuid){if(!esm_node_validate(uuid))throw TypeError("Invalid UUID");let v;const arr=new Uint8Array(16);return arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24,arr[1]=v>>>16&255,arr[2]=v>>>8&255,arr[3]=255&v,arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8,arr[5]=255&v,arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8,arr[7]=255&v,arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8,arr[9]=255&v,arr[10]=(v=parseInt(uuid.slice(24,36),16))/1099511627776&255,arr[11]=v/4294967296&255,arr[12]=v>>>24&255,arr[13]=v>>>16&255,arr[14]=v>>>8&255,arr[15]=255&v,arr};var v35=function(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){if("string"==typeof value&&(value=function(str){str=unescape(encodeURIComponent(str));const bytes=[];for(let i=0;i<str.length;++i)bytes.push(str.charCodeAt(i));return bytes}(value)),"string"==typeof namespace&&(namespace=esm_node_parse(namespace)),16!==namespace.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let bytes=new Uint8Array(16+value.length);if(bytes.set(namespace),bytes.set(value,namespace.length),bytes=hashfunc(bytes),bytes[6]=15&bytes[6]|version,bytes[8]=63&bytes[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=bytes[i];return buf}return esm_node_stringify(bytes)}try{generateUUID.name=name}catch(err){}return generateUUID.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",generateUUID.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",generateUUID};var esm_node_v3=v35("v3",48,(function(bytes){return Array.isArray(bytes)?bytes=Buffer.from(bytes):"string"==typeof bytes&&(bytes=Buffer.from(bytes,"utf8")),external_crypto_default.a.createHash("md5").update(bytes).digest()}));var esm_node_v4=function(options,buf,offset){const rnds=(options=options||{}).random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return esm_node_stringify(rnds)};var esm_node_v5=v35("v5",80,(function(bytes){return Array.isArray(bytes)?bytes=Buffer.from(bytes):"string"==typeof bytes&&(bytes=Buffer.from(bytes,"utf8")),external_crypto_default.a.createHash("sha1").update(bytes).digest()})),nil="00000000-0000-0000-0000-000000000000";var esm_node_version=function(uuid){if(!esm_node_validate(uuid))throw TypeError("Invalid UUID");return parseInt(uuid.substr(14,1),16)}},,function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){__webpack_require__.d(__webpack_exports__,"a",(function(){return Hub})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getMainCarrier})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getCurrentHub})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getHubFromCarrier})),__webpack_require__.d(__webpack_exports__,"e",(function(){return setHubOnCarrier}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_sentry_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_sentry_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(132),_scope__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(54),Hub=function(){function Hub(client,scope,_version){void 0===scope&&(scope=new _scope__WEBPACK_IMPORTED_MODULE_3__.a),void 0===_version&&(_version=3),this._version=_version,this._stack=[],this._stack.push({client:client,scope:scope})}return Hub.prototype._invokeClient=function(method){for(var _a,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var top=this.getStackTop();top&&top.client&&top.client[method]&&(_a=top.client)[method].apply(_a,tslib__WEBPACK_IMPORTED_MODULE_0__.f(args,[top.scope]))},Hub.prototype.isOlderThan=function(version){return this._version<version},Hub.prototype.bindClient=function(client){this.getStackTop().client=client},Hub.prototype.pushScope=function(){var stack=this.getStack(),parentScope=stack.length>0?stack[stack.length-1].scope:void 0,scope=_scope__WEBPACK_IMPORTED_MODULE_3__.a.clone(parentScope);return this.getStack().push({client:this.getClient(),scope:scope}),scope},Hub.prototype.popScope=function(){return void 0!==this.getStack().pop()},Hub.prototype.withScope=function(callback){var scope=this.pushScope();try{callback(scope)}finally{this.popScope()}},Hub.prototype.getClient=function(){return this.getStackTop().client},Hub.prototype.getScope=function(){return this.getStackTop().scope},Hub.prototype.getStack=function(){return this._stack},Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},Hub.prototype.captureException=function(exception,hint){var eventId=this._lastEventId=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.n)(),finalHint=hint;if(!hint){var syntheticException=void 0;try{throw new Error("Sentry syntheticException")}catch(exception){syntheticException=exception}finalHint={originalException:exception,syntheticException:syntheticException}}return this._invokeClient("captureException",exception,tslib__WEBPACK_IMPORTED_MODULE_0__.a({},finalHint,{event_id:eventId})),eventId},Hub.prototype.captureMessage=function(message,level,hint){var eventId=this._lastEventId=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.n)(),finalHint=hint;if(!hint){var syntheticException=void 0;try{throw new Error(message)}catch(exception){syntheticException=exception}finalHint={originalException:message,syntheticException:syntheticException}}return this._invokeClient("captureMessage",message,level,tslib__WEBPACK_IMPORTED_MODULE_0__.a({},finalHint,{event_id:eventId})),eventId},Hub.prototype.captureEvent=function(event,hint){var eventId=this._lastEventId=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.n)();return this._invokeClient("captureEvent",event,tslib__WEBPACK_IMPORTED_MODULE_0__.a({},hint,{event_id:eventId})),eventId},Hub.prototype.lastEventId=function(){return this._lastEventId},Hub.prototype.addBreadcrumb=function(breadcrumb,hint){var top=this.getStackTop();if(top.scope&&top.client){var _a=top.client.getOptions&&top.client.getOptions()||{},_b=_a.beforeBreadcrumb,beforeBreadcrumb=void 0===_b?null:_b,_c=_a.maxBreadcrumbs,maxBreadcrumbs=void 0===_c?100:_c;if(!(maxBreadcrumbs<=0)){var timestamp=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.m)(),mergedBreadcrumb=tslib__WEBPACK_IMPORTED_MODULE_0__.a({timestamp:timestamp},breadcrumb),finalBreadcrumb=beforeBreadcrumb?Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.d)((function(){return beforeBreadcrumb(mergedBreadcrumb,hint)})):mergedBreadcrumb;null!==finalBreadcrumb&&top.scope.addBreadcrumb(finalBreadcrumb,Math.min(maxBreadcrumbs,100))}}},Hub.prototype.setUser=function(user){var top=this.getStackTop();top.scope&&top.scope.setUser(user)},Hub.prototype.setTags=function(tags){var top=this.getStackTop();top.scope&&top.scope.setTags(tags)},Hub.prototype.setExtras=function(extras){var top=this.getStackTop();top.scope&&top.scope.setExtras(extras)},Hub.prototype.setTag=function(key,value){var top=this.getStackTop();top.scope&&top.scope.setTag(key,value)},Hub.prototype.setExtra=function(key,extra){var top=this.getStackTop();top.scope&&top.scope.setExtra(key,extra)},Hub.prototype.setContext=function(name,context){var top=this.getStackTop();top.scope&&top.scope.setContext(name,context)},Hub.prototype.configureScope=function(callback){var top=this.getStackTop();top.scope&&top.client&&callback(top.scope)},Hub.prototype.run=function(callback){var oldHub=makeMain(this);try{callback(this)}finally{makeMain(oldHub)}},Hub.prototype.getIntegration=function(integration){var client=this.getClient();if(!client)return null;try{return client.getIntegration(integration)}catch(_oO){return _sentry_utils__WEBPACK_IMPORTED_MODULE_2__.a.warn("Cannot retrieve integration "+integration.id+" from the current Hub"),null}},Hub.prototype.startSpan=function(spanOrSpanContext,forceNoChild){return void 0===forceNoChild&&(forceNoChild=!1),this._callExtensionMethod("startSpan",spanOrSpanContext,forceNoChild)},Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},Hub.prototype._callExtensionMethod=function(method){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];var carrier=getMainCarrier(),sentry=carrier.__SENTRY__;if(sentry&&sentry.extensions&&"function"==typeof sentry.extensions[method])return sentry.extensions[method].apply(this,args);_sentry_utils__WEBPACK_IMPORTED_MODULE_2__.a.warn("Extension method "+method+" couldn't be found, doing nothing.")},Hub}();function getMainCarrier(){var carrier=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.h)();return carrier.__SENTRY__=carrier.__SENTRY__||{extensions:{},hub:void 0},carrier}function makeMain(hub){var registry=getMainCarrier(),oldHub=getHubFromCarrier(registry);return setHubOnCarrier(registry,hub),oldHub}function getCurrentHub(){var registry=getMainCarrier();return hasHubOnCarrier(registry)&&!getHubFromCarrier(registry).isOlderThan(3)||setHubOnCarrier(registry,new Hub),Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.j)()?function(registry){try{var activeDomain=Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__.e)(module,"domain").active;if(!activeDomain)return getHubFromCarrier(registry);if(!hasHubOnCarrier(activeDomain)||getHubFromCarrier(activeDomain).isOlderThan(3)){var registryHubTopStack=getHubFromCarrier(registry).getStackTop();setHubOnCarrier(activeDomain,new Hub(registryHubTopStack.client,_scope__WEBPACK_IMPORTED_MODULE_3__.a.clone(registryHubTopStack.scope)))}return getHubFromCarrier(activeDomain)}catch(_Oo){return getHubFromCarrier(registry)}}(registry):getHubFromCarrier(registry)}function hasHubOnCarrier(carrier){return!!(carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub)}function getHubFromCarrier(carrier){return carrier&&carrier.__SENTRY__&&carrier.__SENTRY__.hub||(carrier.__SENTRY__=carrier.__SENTRY__||{},carrier.__SENTRY__.hub=new Hub),carrier.__SENTRY__.hub}function setHubOnCarrier(carrier,hub){return!!carrier&&(carrier.__SENTRY__=carrier.__SENTRY__||{},carrier.__SENTRY__.hub=hub,!0)}}).call(this,__webpack_require__(180)(module))}]);