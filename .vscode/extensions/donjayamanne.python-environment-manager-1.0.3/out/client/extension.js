module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=227)}([function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.METADATA_KEY=void 0;var r=n(25);t.METADATA_KEY=r;var i=n(261);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n(57);Object.defineProperty(t,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(t,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(t,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var s=n(277);Object.defineProperty(t,"AsyncContainerModule",{enumerable:!0,get:function(){return s.AsyncContainerModule}}),Object.defineProperty(t,"ContainerModule",{enumerable:!0,get:function(){return s.ContainerModule}});var a=n(278);Object.defineProperty(t,"injectable",{enumerable:!0,get:function(){return a.injectable}});var c=n(279);Object.defineProperty(t,"tagged",{enumerable:!0,get:function(){return c.tagged}});var u=n(280);Object.defineProperty(t,"named",{enumerable:!0,get:function(){return u.named}});var l=n(188);Object.defineProperty(t,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(t,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var p=n(281);Object.defineProperty(t,"optional",{enumerable:!0,get:function(){return p.optional}});var d=n(282);Object.defineProperty(t,"unmanaged",{enumerable:!0,get:function(){return d.unmanaged}});var h=n(283);Object.defineProperty(t,"multiInject",{enumerable:!0,get:function(){return h.multiInject}});var f=n(284);Object.defineProperty(t,"targetName",{enumerable:!0,get:function(){return f.targetName}});var v=n(285);Object.defineProperty(t,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var y=n(186);Object.defineProperty(t,"MetadataReader",{enumerable:!0,get:function(){return y.MetadataReader}});var g=n(70);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return g.id}});var m=n(63);Object.defineProperty(t,"decorate",{enumerable:!0,get:function(){return m.decorate}});var _=n(191);Object.defineProperty(t,"traverseAncerstors",{enumerable:!0,get:function(){return _.traverseAncerstors}}),Object.defineProperty(t,"taggedConstraint",{enumerable:!0,get:function(){return _.taggedConstraint}}),Object.defineProperty(t,"namedConstraint",{enumerable:!0,get:function(){return _.namedConstraint}}),Object.defineProperty(t,"typeConstraint",{enumerable:!0,get:function(){return _.typeConstraint}});var b=n(107);Object.defineProperty(t,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var E=n(286);Object.defineProperty(t,"multiBindToService",{enumerable:!0,get:function(){return E.multiBindToService}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(101),i=n(143),o=n(36),s=n(91),a=n(29),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=Object(i.a)(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||a.a.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.a.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Object(r.a)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=u(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Object(s.b)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=u(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=a.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logTo=t.traceDecoratorWarn=t.traceDecoratorInfo=t.traceDecoratorError=t.traceDecoratorVerbose=t.traceVerbose=t.traceInfo=t.traceWarn=t.traceError=t.initializeFileLogging=t.setLoggingLevel=t.registerLogger=void 0;const r=n(44),i=n(498),o=n(64),s=n(21),a=n(295),c=n(196),u=n(159),l=c.TraceOptions.Arguments|c.TraceOptions.ReturnValue;let p=[];function d(e){return p.push(e),{dispose:()=>{p=p.filter(t=>t!==e)}}}t.registerLogger=d;const h=new Map([["error",c.LogLevel.Error],["warn",c.LogLevel.Warn],["info",c.LogLevel.Info],["debug",c.LogLevel.Debug],["none",c.LogLevel.Off],["off",c.LogLevel.Off],[void 0,c.LogLevel.Error]]);let f;function v(...e){f>=c.LogLevel.Error&&p.forEach(t=>t.traceError(...e))}function y(...e){f>=c.LogLevel.Warn&&p.forEach(t=>t.traceWarn(...e))}function g(...e){f>=c.LogLevel.Info&&p.forEach(t=>t.traceInfo(...e))}function m(...e){f>=c.LogLevel.Debug&&p.forEach(t=>t.traceVerbose(...e))}function _(e){return function(t,n,r){const s=r.value;return r.value=function(...n){const r={kind:"Class",name:t&&t.constructor?t.constructor.name:"",args:n},a=this;return function(e,t){const n=new o.StopWatch;try{const r=t();return i.isPromise(r)?r.then(t=>(e({elapsed:n.elapsedTime,returnValue:t}),t)).catch(t=>{e({elapsed:n.elapsedTime,err:t})}):e({elapsed:n.elapsedTime,returnValue:r}),r}catch(t){throw e({elapsed:n.elapsedTime,err:t}),t}}(t=>e(r,t),()=>s.apply(a,n))},r}}function b(e){return _((t,n)=>function(e,t,n){const r=function(e,t,n){n=function(e){let{kind:t,name:n,args:r}=e;t&&""!==t||(t="Function");n&&""!==n||(n="<anon>");r||(r=[]);return{kind:t,name:n,args:r}}(n);const r=[e.message];r.push(`${n.kind} name = ${n.name}`.trim(),`completed in ${t.elapsed}ms`,`has a ${t.returnValue?"truthy":"falsy"} return value`),(e.opts&c.TraceOptions.Arguments)===c.TraceOptions.Arguments&&r.push(u.argsToLogString(n.args));(e.opts&c.TraceOptions.ReturnValue)===c.TraceOptions.ReturnValue&&r.push(u.returnValueToLogString(t.returnValue));return r.join(", ")}(e,t,n);void 0===t.err?(!e.level||e.level>c.LogLevel.Error)&&E(c.LogLevel.Info,[r]):(E(c.LogLevel.Error,[r,t.err]),s.sendTelemetryEvent("ERROR",void 0,void 0,t.err))}(e,n,t))}function E(e,...t){switch(e){case c.LogLevel.Error:v(...t);break;case c.LogLevel.Warn:y(...t);break;case c.LogLevel.Info:g(...t);break;case c.LogLevel.Debug:m(...t)}}t.setLoggingLevel=function(e){var t;f=null!==(t=h.get(e))&&void 0!==t?t:c.LogLevel.Error},t.initializeFileLogging=function(e){if(process.env.VSC_PYTHON_LOG_FILE){const t=new a.FileLogger(r.createWriteStream(process.env.VSC_PYTHON_LOG_FILE));e.push(t),e.push(d(t))}},t.traceError=v,t.traceWarn=y,t.traceInfo=g,t.traceVerbose=m,t.traceDecoratorVerbose=function(e,t=l){return b({message:e,opts:t,level:c.LogLevel.Debug})},t.traceDecoratorError=function(e){return b({message:e,opts:l,level:c.LogLevel.Error})},t.traceDecoratorInfo=function(e){return b({message:e,opts:l,level:c.LogLevel.Info})},t.traceDecoratorWarn=function(e){return b({message:e,opts:l,level:c.LogLevel.Warn})},t.logTo=E},function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterPathProxyService=t.IInterpreterPathService=t.IAsyncDisposableRegistry=t.IEditorUtils=t.IBrowserService=t.IExtensions=t.IExtensionContext=t.IHttpClient=t.IFileDownloader=t.ISocketServer=t.ToolExecutionPath=t.IToolExecutionPath=t.IConfigurationService=t.ICurrentProcess=t.IRandom=t.IPathUtils=t.IInstaller=t.Product=t.ProductType=t.ProductInstallStatus=t.InstallerResponse=t.IPersistentStateFactory=t.WORKSPACE_MEMENTO=t.GLOBAL_MEMENTO=t.IMemento=t.IDisposableRegistry=t.IsWindows=t.IDocumentSymbolProvider=t.IOutputChannel=void 0,t.IOutputChannel=Symbol("IOutputChannel"),t.IDocumentSymbolProvider=Symbol("IDocumentSymbolProvider"),t.IsWindows=Symbol("IS_WINDOWS"),t.IDisposableRegistry=Symbol("IDisposableRegistry"),t.IMemento=Symbol("IGlobalMemento"),t.GLOBAL_MEMENTO=Symbol("IGlobalMemento"),t.WORKSPACE_MEMENTO=Symbol("IWorkspaceMemento"),t.IPersistentStateFactory=Symbol("IPersistentStateFactory"),function(e){e[e.Installed=0]="Installed",e[e.Disabled=1]="Disabled",e[e.Ignore=2]="Ignore"}(t.InstallerResponse||(t.InstallerResponse={})),function(e){e[e.Installed=0]="Installed",e[e.NotInstalled=1]="NotInstalled",e[e.NeedsUpgrade=2]="NeedsUpgrade"}(t.ProductInstallStatus||(t.ProductInstallStatus={})),function(e){e.DataScience="DataScience"}(t.ProductType||(t.ProductType={})),function(e){e[e.pytest=1]="pytest",e[e.pylint=3]="pylint",e[e.flake8=4]="flake8",e[e.pycodestyle=5]="pycodestyle",e[e.pylama=6]="pylama",e[e.prospector=7]="prospector",e[e.pydocstyle=8]="pydocstyle",e[e.yapf=9]="yapf",e[e.autopep8=10]="autopep8",e[e.mypy=11]="mypy",e[e.unittest=12]="unittest",e[e.isort=15]="isort",e[e.black=16]="black",e[e.bandit=17]="bandit",e[e.jupyter=18]="jupyter",e[e.ipykernel=19]="ipykernel",e[e.notebook=20]="notebook",e[e.kernelspec=21]="kernelspec",e[e.nbconvert=22]="nbconvert",e[e.pandas=23]="pandas",e[e.tensorboard=24]="tensorboard",e[e.torchProfilerInstallName=25]="torchProfilerInstallName",e[e.torchProfilerImportName=26]="torchProfilerImportName"}(t.Product||(t.Product={})),t.IInstaller=Symbol("IInstaller"),t.IPathUtils=Symbol("IPathUtils"),t.IRandom=Symbol("IRandom"),t.ICurrentProcess=Symbol("ICurrentProcess"),t.IConfigurationService=Symbol("IConfigurationService"),t.IToolExecutionPath=Symbol("IToolExecutionPath"),function(e){e.pipenv="pipenv"}(t.ToolExecutionPath||(t.ToolExecutionPath={})),t.ISocketServer=Symbol("ISocketServer"),t.IFileDownloader=Symbol("IFileDownloader"),t.IHttpClient=Symbol("IHttpClient"),t.IExtensionContext=Symbol("ExtensionContext"),t.IExtensions=Symbol("IExtensions"),t.IBrowserService=Symbol("IBrowserService"),t.IEditorUtils=Symbol("IEditorUtils"),t.IAsyncDisposableRegistry=Symbol("IAsyncDisposableRegistry"),t.IInterpreterPathService=Symbol("IInterpreterPathService"),t.IInterpreterPathProxyService=Symbol("IInterpreterPathProxyService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVSCodeNotebook=t.IClipboard=t.IActiveResourceService=t.ILanguageService=t.IApplicationEnvironment=t.IDebugService=t.ITerminalManager=t.IWorkspaceService=t.IDocumentManager=t.IJupyterExtensionDependencyManager=t.IContextKeyManager=t.ICommandManager=t.IApplicationShell=void 0,t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IContextKeyManager=Symbol("IContextKeyManager"),t.IJupyterExtensionDependencyManager=Symbol("IJupyterExtensionDependencyManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.ILanguageService=Symbol("ILanguageService"),t.IActiveResourceService=Symbol("IActiveResourceService"),t.IClipboard=Symbol("IClipboard"),t.IVSCodeNotebook=Symbol("IVSCodeNotebook")},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),i=n(48),o=n(105),s=n(10),a=n(59),c=n(29),u=n(50),l=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o.a;break;case 1:if(!n){s.destination=o.a;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new p(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new p(s,n,r,i)}return s}return r.b(t,e),t.prototype[a.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(s.a),p=function(e){function t(t,n,r,s){var a,c=e.call(this)||this;c._parentSubscriber=t;var u=c;return Object(i.a)(n)?a=n:n&&(a=n.next,r=n.error,s=n.complete,n!==o.a&&(u=Object.create(n),Object(i.a)(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=r,c._complete=s,c}return r.b(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;c.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=c.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(u.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(u.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};c.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),c.a.useDeprecatedSynchronousErrorHandling)throw e;Object(u.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!c.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return c.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(u.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)},function(e,t,n){"use strict";var r,i;function o(e=process.platform){return/^win/.test(e)?i.Windows:/^darwin/.test(e)?i.OSX:/^linux/.test(e)?i.Linux:i.Unknown}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserHomeDir=t.getEnvironmentVariable=t.getArchitecture=t.getOSType=t.OSType=t.Architecture=void 0,function(e){e[e.Unknown=1]="Unknown",e[e.x86=2]="x86",e[e.x64=3]="x64"}(r=t.Architecture||(t.Architecture={})),function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(i=t.OSType||(t.OSType={})),t.getOSType=o;const s={x86:r.x86,x64:r.x64,"":r.Unknown};function a(e){return process.env[e]}t.getArchitecture=function(){const e=s[process.arch];if(void 0!==e)return e;const t=n(296);return s[t()]||r.Unknown},t.getEnvironmentVariable=a,t.getUserHomeDir=function(){return o()===i.Windows?a("USERPROFILE"):a("HOME")||a("HOMEPATH")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(15),i=n(67),o=n(48),s=n(60),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,a=this._unsubscribe,u=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l){n[l].remove(this)}if(Object(o.a)(a))try{a.call(this)}catch(e){t=e instanceof s.a?c(e.errors):[e]}if(Object(r.a)(u)){l=-1;for(var p=u.length;++l<p;){var d=u[l];if(Object(i.a)(d))try{d.unsubscribe()}catch(e){t=t||[],e instanceof s.a?t=t.concat(c(e.errors)):t.push(e)}}}if(t)throw new s.a(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s.a?t.errors:t)}),[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenIterator=t.iterable=t.mapToIterator=t.chain=t.iterEmpty=t.createDeferredFromPromise=t.createDeferredFrom=t.createDeferred=t.isPromise=t.isThenable=t.sleep=void 0,t.sleep=async function(e){return new Promise(t=>{setTimeout(()=>t(e),e)})},t.isThenable=function(e){return"function"==typeof(null==e?void 0:e.then)},t.isPromise=function(e){return"function"==typeof(null==e?void 0:e.then)&&"function"==typeof(null==e?void 0:e.catch)};class r{constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this._resolve.apply(this.scope?this.scope:this,[e]),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,[e]),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function i(e=null){return new r(e)}async function o(e,t){const n=void 0===t?-1:t;try{return{index:n,result:await e.next(),err:null}}catch(e){return{index:n,err:e,result:null}}}t.createDeferred=i,t.createDeferredFrom=function(...e){const t=i();return Promise.all(e).then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.createDeferredFromPromise=function(e){const t=i();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.iterEmpty=function(){return async function*(){}()};const s=new Promise(()=>{});async function*a(e,t){const n=e.map(o);let r=e.length;for(;r>0;){const{index:i,result:a,err:c}=await Promise.race(n);null!==c?(n[i]=s,r-=1,void 0!==t&&await t(c,i)):a.done?(n[i]=s,r-=1,void 0!==a.value&&(yield a.value)):(n[i]=o(e[i],i),yield a.value)}}function c(e){const t=e;return void 0===t[Symbol.asyncIterator]&&(t[Symbol.asyncIterator]=()=>t),t}t.chain=a,t.mapToIterator=async function*(e,t,n=!0){if(n){const n=e.map(e=>async function*(){yield t(e)}());yield*c(a(n))}else yield*e.map(t)},t.iterable=c,t.flattenIterator=async function(e){const t=[];for await(const n of c(e))t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterStatusbarVisibilityFilter=t.IInterpreterHelper=t.IShebangCodeLensProvider=t.IInterpreterService=t.ICondaService=t.IComponentAdapter=void 0,t.IComponentAdapter=Symbol("IComponentAdapter"),t.ICondaService=Symbol("ICondaService"),t.IInterpreterService=Symbol("IInterpreterService"),t.IShebangCodeLensProvider=Symbol("IShebangCodeLensProvider"),t.IInterpreterHelper=Symbol("IInterpreterHelper"),t.IInterpreterStatusbarVisibilityFilter=Symbol("IInterpreterStatusbarVisibilityFilter")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFileSystem=t.FileType=t.IFileSystemPathUtils=t.IPlatformService=t.IRegistry=t.RegistryHive=void 0;const r=n(5);!function(e){e[e.HKCU=0]="HKCU",e[e.HKLM=1]="HKLM"}(t.RegistryHive||(t.RegistryHive={})),t.IRegistry=Symbol("IRegistry"),t.IPlatformService=Symbol("IPlatformService"),t.IFileSystemPathUtils=Symbol("IFileSystemPathUtils"),t.FileType=r.FileType,t.IFileSystem=Symbol("IFileSystem")},function(e,t,n){"use strict";String.prototype.splitLines=function(e={removeEmptyEntries:!0,trim:!0}){let t=this.split(/\r?\n/g);return e&&e.trim&&(t=t.map(e=>e.trim())),e&&e.removeEmptyEntries&&(t=t.filter(e=>e.length>0)),t},String.prototype.toCommandArgument=function(){return this?this.indexOf(" ")>=0&&!this.startsWith('"')&&!this.endsWith('"')?`"${this}"`:this.toString():this},String.prototype.fileToCommandArgument=function(){return this?this.toCommandArgument().replace(/\\/g,"/"):this},String.prototype.trimQuotes=function(){return this?this.replace(/(^['"])|(['"]$)/g,""):this},String.prototype.replaceAll=function(e,t){if(!this)return this;return this.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),t)},Promise.prototype.ignoreErrors=function(){this.catch(()=>{})},String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,(t,n)=>void 0===e[n]?t:e[n])})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};function o(){return"1"===process.env.VSC_PYTHON_UNIT_TEST}Object.defineProperty(t,"__esModule",{value:!0}),t.UseProposedApi=t.isUnitTestExecution=t.isTestExecution=t.isCI=t.STANDARD_OUTPUT_CHANNEL=t.DEFAULT_INTERPRETER_SETTING=t.Octicons=t.Commands=t.CommandSource=t.AppinsightsKey=t.JUPYTER_EXTENSION_ID=t.PYLANCE_EXTENSION_ID=t.CODE_RUNNER_EXTENSION_ID=t.PVSC_EXTENSION_ID=t.PYTHON_NOTEBOOKS=t.PYTHON=t.InteractiveScheme=t.InteractiveInputScheme=t.NotebookCellScheme=t.PYTHON_WARNINGS=t.PYTHON_LANGUAGE=void 0,t.PYTHON_LANGUAGE="python",t.PYTHON_WARNINGS="PYTHONWARNINGS",t.NotebookCellScheme="vscode-notebook-cell",t.InteractiveInputScheme="vscode-interactive-input",t.InteractiveScheme="vscode-interactive",t.PYTHON=[{scheme:"file",language:t.PYTHON_LANGUAGE},{scheme:"untitled",language:t.PYTHON_LANGUAGE},{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE}],t.PYTHON_NOTEBOOKS=[{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE}],t.PVSC_EXTENSION_ID="donjayamanne.python-environment-manager",t.CODE_RUNNER_EXTENSION_ID="formulahendry.code-runner",t.PYLANCE_EXTENSION_ID="ms-python.vscode-pylance",t.JUPYTER_EXTENSION_ID="ms-toolsai.jupyter",t.AppinsightsKey="_",function(e){e.ui="ui",e.commandPalette="commandpalette"}(t.CommandSource||(t.CommandSource={})),function(e){e.Exec_In_Terminal="python.envManager.execInTerminal",e.Exec_In_Terminal_Icon="python.envManager.execInTerminal-icon",e.ViewOutput="python.envManager.viewOutput",e.Start_REPL="python.envManagerstartREPL",e.Create_Terminal="python.envManager.createTerminal",e.ClearStorage="python.envManager.clearPersistentStorage"}(t.Commands||(t.Commands={})),function(e){e.Add="$(add)",e.Test_Pass="$(check)",e.Test_Fail="$(alert)",e.Test_Error="$(x)",e.Test_Skip="$(circle-slash)",e.Downloading="$(cloud-download)",e.Installing="$(desktop-download)",e.Search_Stop="$(search-stop)",e.Star="$(star-full)",e.Gear="$(gear)"}(t.Octicons||(t.Octicons={})),t.DEFAULT_INTERPRETER_SETTING="python",t.STANDARD_OUTPUT_CHANNEL="STANDARD_OUTPUT_CHANNEL",t.isCI="true"===process.env.TRAVIS||void 0!==process.env.TF_BUILD,t.isTestExecution=function(){return"1"===process.env.VSC_PYTHON_CI_TEST||o()},t.isUnitTestExecution=o,t.UseProposedApi=Symbol("USE_VSC_PROPOSED_API"),i(n(129),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceContainer=t.IServiceManager=void 0,t.IServiceManager=Symbol("IServiceManager"),t.IServiceContainer=Symbol("IServiceContainer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDidChangePythonSetting=t.getPythonSetting=t.getSubDirs=t.resolveSymbolicLink=t.getWorkspaceFolders=t.arePathsSame=t.normCasePath=t.resolvePath=t.normalizePath=t.isDirectory=t.isParentPath=t.untildify=t.readFileSync=t.readFile=t.pathExistsSync=t.pathExists=t.exec=t.shellExecute=t.initializeExternalDependencies=void 0;const r=n(44),i=n(0),o=n(5),s=n(40),a=n(6),c=n(11),u=n(132),l=n(9);let p;function d(e){return l.getOSType()===l.OSType.Windows?i.normalize(e).toUpperCase():i.normalize(e)}async function h(e){if((await r.lstat(e)).isSymbolicLink()){const t=await r.readlink(e);return h(i.isAbsolute(t)?t:i.resolve(i.dirname(e),t))}return e}t.initializeExternalDependencies=function(e){p=e},t.shellExecute=async function(e,t={}){return(await p.get(s.IProcessServiceFactory).create()).shellExec(e,t)},t.exec=async function(e,t,n={}){return(await p.get(s.IProcessServiceFactory).create()).exec(e,t,n)},t.pathExists=function(e){return r.pathExists(e)},t.pathExistsSync=function(e){return r.pathExistsSync(e)},t.readFile=function(e){return r.readFile(e,"utf-8")},t.readFileSync=function(e){return r.readFileSync(e,"utf-8")},t.untildify=n(110),t.isParentPath=function(e,t){return t.endsWith(i.sep)||(t+=i.sep),e.endsWith(i.sep)||(e+=i.sep),d(e).startsWith(d(t))},t.isDirectory=async function(e){return(await r.lstat(e)).isDirectory()},t.normalizePath=function(e){return u.normalizeFilename(e)},t.resolvePath=function(e){return i.resolve(e)},t.normCasePath=d,t.arePathsSame=function(e,t){return d(e)===d(t)},t.getWorkspaceFolders=function(){var e,t;return null!==(t=null===(e=o.workspace.workspaceFolders)||void 0===e?void 0:e.map(e=>e.uri.fsPath))&&void 0!==t?t:[]},t.resolveSymbolicLink=h,t.getSubDirs=async function*(e,t){const n=(await r.promises.readdir(e,{withFileTypes:!0})).map(n=>async function*(){const o=i.join(e,n.name);if(n.isDirectory())yield o;else if((null==t?void 0:t.resolveSymlinks)&&n.isSymbolicLink()){const e=await h(o);(await r.lstat(e)).isDirectory()&&(yield e)}}());yield*c.iterable(c.chain(n))},t.getPythonSetting=function(e){return p.get(a.IConfigurationService).getSettings()[e]},t.onDidChangePythonSetting=function(e,t){return o.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("python."+e)&&t()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IShellDetector=t.ITerminalActivationCommandProvider=t.ITerminalActivator=t.ITerminalHelper=t.ITerminalServiceFactory=t.TerminalShellType=t.TerminalActivationProviders=void 0,function(e){e.bashCShellFish="bashCShellFish",e.commandPromptAndPowerShell="commandPromptAndPowerShell",e.pyenv="pyenv",e.conda="conda",e.pipenv="pipenv"}(t.TerminalActivationProviders||(t.TerminalActivationProviders={})),function(e){e.powershell="powershell",e.powershellCore="powershellCore",e.commandPrompt="commandPrompt",e.gitbash="gitbash",e.bash="bash",e.zsh="zsh",e.ksh="ksh",e.fish="fish",e.cshell="cshell",e.tcshell="tshell",e.wsl="wsl",e.xonsh="xonsh",e.other="other"}(t.TerminalShellType||(t.TerminalShellType={})),t.ITerminalServiceFactory=Symbol("ITerminalServiceFactory"),t.ITerminalHelper=Symbol("ITerminalHelper"),t.ITerminalActivator=Symbol("ITerminalActivator"),t.ITerminalActivationCommandProvider=Symbol("ITerminalActivationCommandProvider"),t.IShellDetector=Symbol("IShellDetector")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTelemetryWhenDone=t.captureTelemetry=t.sendTelemetryEvent=t.clearTelemetryReporter=t._resetSharedProperties=t.setSharedProperty=t.isTelemetryDisabled=void 0;const r=n(17),i=n(64),o=n(11);n(22);t.isTelemetryDisabled=function(e){return!1===e.getConfiguration("telemetry").inspect("enableTelemetry").globalValue};const s={};let a;function c(e,t,i,o){var c;if(r.isTestExecution()||!function(){try{const e=n(5),t=n(192);return void 0!==e&&void 0!==t}catch(e){return!1}}())return;const u=function(){if(!r.isTestExecution()&&a)return a;const e=r.PVSC_EXTENSION_ID,{extensions:t}=n(5),i=t.getExtension(e).packageJSON.version,o=n(192).default;return a=new o(e,i,r.AppinsightsKey,!0),a}(),l="number"==typeof t?{duration:t}:t||void 0,p={},d=e;if(i){const t=i;Object.getOwnPropertyNames(t).forEach(n=>{if(void 0!==t[n]&&null!==t[n])try{switch(typeof t[n]){case"string":p[n]=t[n];break;case"object":p[n]="object";break;default:p[n]=t[n].toString()}}catch(t){console.error(`Failed to serialize ${n} for ${e}`,t)}})}if(Object.assign(p,s),o){const e={errorName:o.name,errorMessage:o.message,errorStack:null!==(c=o.stack)&&void 0!==c?c:""};Object.assign(p,e);const t=Object.getOwnPropertyNames(e);u.sendTelemetryErrorEvent(d,p,l,t)}else u.sendTelemetryEvent(d,p,l);process.env&&process.env.VSC_PYTHON_LOG_TELEMETRY&&console.info(`Telemetry Event : ${d} Measures: ${JSON.stringify(l)} Props: ${JSON.stringify(p)} `)}t.setSharedProperty=function(e,t){const n=e;r.isUnitTestExecution()&&n.startsWith("ds_")||(void 0===t?delete s[n]:s[n]=t)},t._resetSharedProperties=function(){for(const e of Object.keys(s))delete s[e]},t.clearTelemetryReporter=function(){a=void 0},t.sendTelemetryEvent=c,t.captureTelemetry=function(e,t,n=!0,r,s,a){return function(u,l,p){const d=p.value;return p.value=function(...u){if(!n&&!s&&!a)return c(e,void 0,t),d.apply(this,u);const l=e=>s?{...t,...s(this,e)}:t,p=n?new i.StopWatch:void 0,h=e=>{const t=p?{duration:p.elapsedTime}:void 0;return a?{...t,...a(this,e)}:t},f=d.apply(this,u);return f&&o.isPromise(f)?f.then(t=>(c(e,h(t),l(t)),t)).catch(t=>{const n={...l(),failed:!0};c(r||e,h(),n,t)}):c(e,h(f),l(f)),f},p}},t.sendTelemetryWhenDone=function(e,t,n,r){if(n=n||new i.StopWatch,"function"!=typeof t.then)throw new Error("Method is neither a Promise nor a Theneable");t.then(t=>(c(e,n.elapsedTime,r),t),t=>(c(e,n.elapsedTime,r,t),Promise.reject(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformErrors=t.EventName=void 0,function(e){e.EDITOR_LOAD="EDITOR.LOAD",e.REPL="REPL",e.SELECT_INTERPRETER="SELECT_INTERPRETER",e.PYTHON_INTERPRETER="PYTHON_INTERPRETER",e.PYTHON_INSTALL_PACKAGE="PYTHON_INSTALL_PACKAGE",e.PYTHON_INTERPRETER_DISCOVERY="PYTHON_INTERPRETER_DISCOVERY",e.PYTHON_INTERPRETER_AUTO_SELECTION="PYTHON_INTERPRETER_AUTO_SELECTION",e.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES="PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES",e.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE="PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE",e.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL="PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL",e.PIPENV_INTERPRETER_DISCOVERY="PIPENV_INTERPRETER_DISCOVERY",e.TERMINAL_SHELL_IDENTIFICATION="TERMINAL_SHELL_IDENTIFICATION",e.PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT="PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT",e.PYTHON_NOT_INSTALLED_PROMPT="PYTHON_NOT_INSTALLED_PROMPT",e.CONDA_INHERIT_ENV_PROMPT="CONDA_INHERIT_ENV_PROMPT",e.ENVFILE_VARIABLE_SUBSTITUTION="ENVFILE_VARIABLE_SUBSTITUTION",e.ENVFILE_WORKSPACE="ENVFILE_WORKSPACE",e.EXECUTION_CODE="EXECUTION_CODE",e.TERMINAL_CREATE="TERMINAL.CREATE",e.ACTIVATE_ENV_IN_CURRENT_TERMINAL="ACTIVATE_ENV_IN_CURRENT_TERMINAL",e.ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED="ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED",e.DIAGNOSTICS_ACTION="DIAGNOSTICS.ACTION",e.PLATFORM_INFO="PLATFORM.INFO",e.HASHED_PACKAGE_NAME="HASHED_PACKAGE_NAME",e.HASHED_PACKAGE_PERF="HASHED_PACKAGE_PERF"}(t.EventName||(t.EventName={})),function(e){e.FailedToParseVersion="FailedToParseVersion",e.FailedToDetermineOS="FailedToDetermineOS"}(t.PlatformErrors||(t.PlatformErrors={}))},function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.UNKNOWN_PYTHON_VERSION=t.PythonReleaseLevel=t.PythonEnvSource=t.virtualEnvKinds=t.PythonEnvKind=void 0,function(e){e.Unknown="unknown",e.System="global-system",e.MacDefault="global-mac-default",e.WindowsStore="global-windows-store",e.Pyenv="global-pyenv",e.CondaBase="global-conda-base",e.Poetry="global-poetry",e.Custom="global-custom",e.OtherGlobal="global-other",e.Venv="virt-venv",e.VirtualEnv="virt-virtualenv",e.VirtualEnvWrapper="virt-virtualenvwrapper",e.Pipenv="virt-pipenv",e.Conda="virt-conda",e.OtherVirtual="virt-other"}(r=t.PythonEnvKind||(t.PythonEnvKind={})),t.virtualEnvKinds=[r.Poetry,r.Pipenv,r.Venv,r.VirtualEnvWrapper,r.Conda,r.VirtualEnv],function(e){e.PathEnvVar="path env var",e.WindowsRegistry="windows registry"}(t.PythonEnvSource||(t.PythonEnvSource={})),function(e){e.Alpha="alpha",e.Beta="beta",e.Candidate="candidate",e.Final="final"}(i=t.PythonReleaseLevel||(t.PythonReleaseLevel={})),t.UNKNOWN_PYTHON_VERSION={major:-1,minor:-1,micro:-1,release:{level:i.Final,serial:-1},sysVersion:void 0},Object.freeze(t.UNKNOWN_PYTHON_VERSION)},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentTypeName=t.ModuleInstallerType=t.EnvironmentType=void 0,function(e){e.Unknown="Unknown",e.Conda="Conda",e.VirtualEnv="VirtualEnv",e.Pipenv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv",e.WindowsStore="WindowsStore",e.Poetry="Poetry",e.VirtualEnvWrapper="VirtualEnvWrapper",e.Global="Global",e.System="System"}(r=t.EnvironmentType||(t.EnvironmentType={})),function(e){e.Unknown="Unknown",e.Conda="Conda",e.Pip="Pip",e.Poetry="Poetry",e.Pipenv="Pipenv"}(t.ModuleInstallerType||(t.ModuleInstallerType={})),t.getEnvironmentTypeName=function(e){switch(e){case r.Conda:return"conda";case r.Pipenv:return"pipenv";case r.Pyenv:return"pyenv";case r.Venv:return"venv";case r.VirtualEnv:return"virtualenv";case r.WindowsStore:return"windows store";case r.Poetry:return"poetry";case r.VirtualEnvWrapper:return"virtualenvwrapper";default:return""}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return d}));var r=n(2),i=n(3),o=n(8),s=n(10),a=n(37),c=n(93),u=n(59),l=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.b(t,e),t}(o.a),p=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.b(t,e),t.prototype[u.a]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.a;return this.hasError?(e.error(this.thrownError),s.a.EMPTY):this.isStopped?(e.complete(),s.a.EMPTY):(this.observers.push(e),new c.a(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.a),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.b(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.a.EMPTY},t}(p)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(8);function o(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}var s=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))},e}(),a=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.b(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNotebookCell=t.getURIFilter=t.isResource=t.noop=void 0;const r=n(17),i=n(79);t.noop=function(){},t.isResource=function(e){if(!e)return!0;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme},t.getURIFilter=function(e,t={checkParent:!0}){let n=e.path;for(;n.endsWith("/");)n=n.slice(0,-1);const r=n+"/";return function(o){if(o.scheme!==e.scheme)return!1;let s=o.path;for(;s.endsWith("/");)s=s.slice(0,-1);if(t.checkParent&&i.isParentPath(s,r))return!0;if(t.checkChild){const e=s+"/";if(i.isParentPath(n,e))return!0}return!1}},t.isNotebookCell=function(e){const t=function(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}(e)?e:e.uri;return t.scheme.includes(r.NotebookCellScheme)||t.scheme.includes(r.InteractiveInputScheme)}},function(e,t,n){var r=n(16),i=n(230),o=n(231),s=n(232),a=[],c=n(24);var u,l,p=function(){};function d(e){i(e),e.gracefulify=d,e.FileReadStream=p,e.FileWriteStream=v,e.createReadStream=function(e,t){return new p(e,t)},e.createWriteStream=function(e,t){return new v(e,t)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function e(n,r,i){return t(n,r,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),f()):h([e,[n,r,i]])}))}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,o){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),f()):h([e,[t,r,i,o]])}))}(e,t,r,i)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,o){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),f()):h([e,[t,n,i,o]])}))}(e,t,n,i)});var s=e.readdir;function a(t){return s.apply(e,t)}if(e.readdir=function(e,t,n){var r=[e];"function"!=typeof t?r.push(t):n=t;return r.push((function(e,t){t&&t.sort&&t.sort();!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof n&&n.apply(this,arguments),f()):h([a,[r]])})),a(r)},"v0.8"===process.version.substr(0,4)){var c=o(e);p=c.ReadStream,v=c.WriteStream}var u=e.ReadStream;u&&(p.prototype=Object.create(u.prototype),p.prototype.open=function(){var e=this;g(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var l=e.WriteStream;function p(e,t){return this instanceof p?(u.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}function v(e,t){return this instanceof v?(l.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}l&&(v.prototype=Object.create(l.prototype),v.prototype.open=function(){var e=this;g(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),e.ReadStream=p,e.WriteStream=v;var y=e.open;function g(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,i){return y(t,n,r,(function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),f()):h([e,[t,n,r,i]])}))}(e,t,n,r)}return e.open=g,e}function h(e){p("ENQUEUE",e[0].name,e[1]),a.push(e)}function f(){var e=a.shift();e&&(p("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}c.debuglog?p=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=c.format.apply(c,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){p(a),n(68).equal(a.length,0)})),e.exports=d(s(r)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched&&(e.exports=d(r),r.__patched=!0),e.exports.close=(u=r.close,function(e,t){return u.call(r,e,(function(e){e||f(),"function"==typeof t&&t.apply(this,arguments)}))}),e.exports.closeSync=(l=r.closeSync,function(e){var t=l.apply(r,arguments);return f(),t}),/\bgraceful-fs\b/.test(r.closeSync.toString())||(r.closeSync=e.exports.closeSync,r.close=e.exports.close)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(3),i=new r.a((function(e){return e.complete()}));function o(e){return e?function(e){return new r.a((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",(function(){return i}));var i=r()},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";t.fromCallback=function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise((n,r)=>{e.call(this,...t,(e,t)=>null!=e?r(e):n(t))});e.apply(this,t)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(e=>n(null,e),n)}),"name",{value:e.name})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.POST_CONSTRUCT_ERROR=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonToolExecutionService=t.StdErrError=t.IPythonExecutionService=t.IPythonExecutionFactory=t.IProcessServiceFactory=t.IProcessLogger=t.IBufferDecoder=void 0,t.IBufferDecoder=Symbol("IBufferDecoder"),t.IProcessLogger=Symbol("IProcessLogger"),t.IProcessServiceFactory=Symbol("IProcessServiceFactory"),t.IPythonExecutionFactory=Symbol("IPythonExecutionFactory"),t.IPythonExecutionService=Symbol("IPythonExecutionService");class r extends Error{constructor(e){super(e)}}t.StdErrError=r,t.IPythonToolExecutionService=Symbol("IPythonToolRunnerService")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(8).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(92),i=n(61),o=n(3);function s(e,t,n,s,a){if(void 0===a&&(a=new r.a(e,n,s)),!a.closed)return t instanceof o.a?t.subscribe(a):Object(i.a)(t)(a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),i=n(61),o=n(150);function s(e,t){return t?Object(o.a)(e,t):e instanceof r.a?e:new r.a(Object(i.a)(e))}},function(e,t,n){"use strict";e.exports={...n(120),...n(177),...n(180),...n(236),...n(238),...n(244),...n(51),...n(249),...n(251),...n(155),...n(69),...n(122)};const r=n(16);Object.getOwnPropertyDescriptor(r,"promises")&&Object.defineProperty(e.exports,"promises",{get:()=>r.promises})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(25),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentDirFromPath=t.getInterpreterPathFromDir=t.looksLikeBasicVirtualPython=t.looksLikeBasicGlobalPython=t.getPythonVersionFromPath=t.iterPythonExecutablesInDir=t.findInterpretersInDir=void 0;const r=n(16),i=n(0),o=n(132),s=n(9),a=n(4),c=n(23),u=n(84),l=n(53),p=n(71),d=n(87),h=n(19),f=n(165),v=n(135),y=s.getOSType()===s.OSType.Windows?v.matchPythonBinFilename:f.matchPythonBinFilename;async function*g(e,t,n,r=!0){const i=s.getOSType()===s.OSType.Windows?v.matchPythonBinFilename:f.matchPythonBinFilename,a={ignoreErrors:r,filterSubDir:n,filterFile:i,maxDepth:t||0};for await(const t of async function*e(t,n,r){const i=await m(t,r);for(const t of i){yield t;const{filename:i,filetype:s}=t;s===o.FileType.Directory&&(r.maxDepth<0||n<=r.maxDepth)&&_(i,r.filterSubDir,r.ignoreErrors)&&(yield*e(i,n+1,r))}}(e,1,a)){const{filename:e,filetype:n}=t;n!==o.FileType.File&&n!==o.FileType.SymbolicLink||_(e,i,r)&&(yield t)}}async function m(e,t={ignoreErrors:!0}){const n=t.ignoreErrors||!1;if(t.filterFilename&&s.getOSType()===s.OSType.Windows){let s;try{s=await r.promises.readdir(e)}catch(t){if("ENOENT"===t.code)return[];if(n)return a.traceError(`readdir() failed for "${e}" (${t})`),[];throw t}const c=s.map(t=>i.join(e,t)).filter(e=>_(e,t.filterFilename,n));return Promise.all(c.map(async e=>({filename:e,filetype:await o.getFileType(e,t)||o.FileType.Unknown})))}let c;try{c=await r.promises.readdir(e,{withFileTypes:!0})}catch(t){if("ENOENT"===t.code)return[];if(n)return a.traceError(`readdir() failed for "${e}" (${t})`),[];throw t}const u=c.map(t=>({filename:i.join(e,t.name),filetype:o.convertFileType(t)}));return t.filterFilename?u.filter(e=>_(e.filename,t.filterFilename,n)):u}function _(e,t,n=!0){if(void 0===t)return!0;try{return t(e)}catch(t){if(n)return a.traceError(`filter failed for "${e}" (${t})`),!1;throw t}}async function b(e,t){return!!(t.matchFilename||y)("string"==typeof e?e:e.filename)&&!(t.filterFile&&!await t.filterFile(e))}t.findInterpretersInDir=g,t.iterPythonExecutablesInDir=async function*(e,t={ignoreErrors:!0}){const n={...t,filterFile:y},r=await m(e,n);for(const e of r){const{filetype:t}=e;t!==o.FileType.File&&t!==o.FileType.SymbolicLink||(yield e)}},t.getPythonVersionFromPath=async function(e,t){let n;try{n=t?l.parseVersion(t):c.UNKNOWN_PYTHON_VERSION}catch(e){n=c.UNKNOWN_PYTHON_VERSION}const r=e?await async function(e){const t=i.dirname(e);let n=c.UNKNOWN_PYTHON_VERSION;for await(const e of g(t)){const{filename:t}=e;try{const e=l.parseVersion(i.basename(t));u.comparePythonVersionSpecificity(e,n)>0&&(n=e)}catch(e){}}return n}(e):c.UNKNOWN_PYTHON_VERSION,o=e?await d.getPythonVersionFromPyvenvCfg(e):c.UNKNOWN_PYTHON_VERSION,s=e?await p.getPythonVersionFromConda(e):c.UNKNOWN_PYTHON_VERSION;let a=c.UNKNOWN_PYTHON_VERSION;for(const e of[n,r,o,s])a=u.comparePythonVersionSpecificity(a,e)>0?a:e;return a};const E=o.getFileFilter({ignoreFileType:o.FileType.SymbolicLink});async function S(e){return b(e,{matchFilename:s.getOSType()===s.OSType.Windows?v.matchBasicPythonBinFilename:f.matchBasicPythonBinFilename,filterFile:E})}async function w(e){return b(e,{matchFilename:s.getOSType()===s.OSType.Windows?v.matchBasicPythonBinFilename:f.matchBasicPythonBinFilename,filterFile:void 0})}t.looksLikeBasicGlobalPython=S,t.looksLikeBasicVirtualPython=w,t.getInterpreterPathFromDir=async function(e,t={}){const n=t.global?S:w,r=g(e,2,(function(e){const t=i.basename(e).toLowerCase();return["bin","scripts"].includes(t)}),t.ignoreErrors);for await(const e of r)if(await n(e))return e.filename},t.getEnvironmentDirFromPath=function(e){const t=i.basename(i.dirname(e));return["bin","scripts"].map(e=>h.normCasePath(e)).includes(h.normCasePath(t))?i.dirname(i.dirname(e)):i.dirname(e)}},function(e,t,n){(function(e){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",c="[object Array]",u="[object Boolean]",l="[object Date]",p="[object Error]",d="[object Function]",h="[object GeneratorFunction]",f="[object Map]",v="[object Number]",y="[object Object]",g="[object RegExp]",m="[object Set]",_="[object String]",b="[object Symbol]",E="[object WeakMap]",S="[object ArrayBuffer]",w="[object DataView]",T="[object Float32Array]",P="[object Float64Array]",I="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",A="[object Uint8Array]",x="[object Uint16Array]",R="[object Uint32Array]",N=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,M=/[&<>"']/g,L=RegExp(j.source),F=RegExp(M.source),V=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,q=RegExp($.source),K=/^\s+/,z=/\s/,Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,J=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Z=/[()=,{}\[\]\/\s]/,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,re=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ue=/($^)/,le=/['\n\r\u2028\u2029\\]/g,pe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",de="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",he="[\\ud800-\\udfff]",fe="["+de+"]",ve="["+pe+"]",ye="\\d+",ge="[\\u2700-\\u27bf]",me="[a-z\\xdf-\\xf6\\xf8-\\xff]",_e="[^\\ud800-\\udfff"+de+ye+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",be="\\ud83c[\\udffb-\\udfff]",Ee="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Pe="(?:"+me+"|"+_e+")",Ie="(?:"+Te+"|"+_e+")",Ce="(?:"+ve+"|"+be+")"+"?",Oe="[\\ufe0e\\ufe0f]?"+Ce+("(?:\\u200d(?:"+[Ee,Se,we].join("|")+")[\\ufe0e\\ufe0f]?"+Ce+")*"),Ae="(?:"+[ge,Se,we].join("|")+")"+Oe,xe="(?:"+[Ee+ve+"?",ve,Se,we,he].join("|")+")",Re=RegExp("[']","g"),Ne=RegExp(ve,"g"),ke=RegExp(be+"(?="+be+")|"+xe+Oe,"g"),De=RegExp([Te+"?"+me+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[fe,Te,"$"].join("|")+")",Ie+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[fe,Te+Pe,"$"].join("|")+")",Te+"?"+Pe+"+(?:['](?:d|ll|m|re|s|t|ve))?",Te+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ye,Ae].join("|"),"g"),je=RegExp("[\\u200d\\ud800-\\udfff"+pe+"\\ufe0e\\ufe0f]"),Me=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Le=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fe=-1,Ve={};Ve[T]=Ve[P]=Ve[I]=Ve[C]=Ve[O]=Ve[A]=Ve["[object Uint8ClampedArray]"]=Ve[x]=Ve[R]=!0,Ve[a]=Ve[c]=Ve[S]=Ve[u]=Ve[w]=Ve[l]=Ve[p]=Ve[d]=Ve[f]=Ve[v]=Ve[y]=Ve[g]=Ve[m]=Ve[_]=Ve[E]=!1;var Ue={};Ue[a]=Ue[c]=Ue[S]=Ue[w]=Ue[u]=Ue[l]=Ue[T]=Ue[P]=Ue[I]=Ue[C]=Ue[O]=Ue[f]=Ue[v]=Ue[y]=Ue[g]=Ue[m]=Ue[_]=Ue[b]=Ue[A]=Ue["[object Uint8ClampedArray]"]=Ue[x]=Ue[R]=!0,Ue[p]=Ue[d]=Ue[E]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,We=parseInt,Ge="object"==typeof global&&global&&global.Object===Object&&global,$e="object"==typeof self&&self&&self.Object===Object&&self,qe=Ge||$e||Function("return this")(),Ke=t&&!t.nodeType&&t,ze=Ke&&"object"==typeof e&&e&&!e.nodeType&&e,Ye=ze&&ze.exports===Ke,Xe=Ye&&Ge.process,Qe=function(){try{var e=ze&&ze.require&&ze.require("util").types;return e||Xe&&Xe.binding&&Xe.binding("util")}catch(e){}}(),Je=Qe&&Qe.isArrayBuffer,Ze=Qe&&Qe.isDate,et=Qe&&Qe.isMap,tt=Qe&&Qe.isRegExp,nt=Qe&&Qe.isSet,rt=Qe&&Qe.isTypedArray;function it(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ot(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ut(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function lt(e,t){return!!(null==e?0:e.length)&&bt(e,t,0)>-1}function pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function ht(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ft(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function vt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var gt=Tt("length");function mt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function _t(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function bt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):_t(e,St,n)}function Et(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function St(e){return e!=e}function wt(e,t){var n=null==e?0:e.length;return n?Ct(e,t)/n:NaN}function Tt(e){return function(t){return null==t?void 0:t[e]}}function Pt(e){return function(t){return null==e?void 0:e[t]}}function It(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ct(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ot(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function At(e){return e?e.slice(0,Kt(e)+1).replace(K,""):e}function xt(e){return function(t){return e(t)}}function Rt(e,t){return dt(t,(function(t){return e[t]}))}function Nt(e,t){return e.has(t)}function kt(e,t){for(var n=-1,r=e.length;++n<r&&bt(t,e[n],0)>-1;);return n}function Dt(e,t){for(var n=e.length;n--&&bt(t,e[n],0)>-1;);return n}function jt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var Mt=Pt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Lt=Pt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ft(e){return"\\"+Be[e]}function Vt(e){return je.test(e)}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Bt(e,t){return function(n){return e(t(n))}}function Ht(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[i++]=n)}return s}function Wt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Gt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function $t(e){return Vt(e)?function(e){var t=ke.lastIndex=0;for(;ke.test(e);)++t;return t}(e):gt(e)}function qt(e){return Vt(e)?function(e){return e.match(ke)||[]}(e):function(e){return e.split("")}(e)}function Kt(e){for(var t=e.length;t--&&z.test(e.charAt(t)););return t}var zt=Pt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Yt=function e(t){var n,r=(t=null==t?qe:Yt.defaults(qe.Object(),t,Yt.pick(qe,Le))).Array,z=t.Date,pe=t.Error,de=t.Function,he=t.Math,fe=t.Object,ve=t.RegExp,ye=t.String,ge=t.TypeError,me=r.prototype,_e=de.prototype,be=fe.prototype,Ee=t["__core-js_shared__"],Se=_e.toString,we=be.hasOwnProperty,Te=0,Pe=(n=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ie=be.toString,Ce=Se.call(fe),Oe=qe._,Ae=ve("^"+Se.call(we).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=Ye?t.Buffer:void 0,ke=t.Symbol,je=t.Uint8Array,Be=xe?xe.allocUnsafe:void 0,Ge=Bt(fe.getPrototypeOf,fe),$e=fe.create,Ke=be.propertyIsEnumerable,ze=me.splice,Xe=ke?ke.isConcatSpreadable:void 0,Qe=ke?ke.iterator:void 0,gt=ke?ke.toStringTag:void 0,Pt=function(){try{var e=eo(fe,"defineProperty");return e({},"",{}),e}catch(e){}}(),Xt=t.clearTimeout!==qe.clearTimeout&&t.clearTimeout,Qt=z&&z.now!==qe.Date.now&&z.now,Jt=t.setTimeout!==qe.setTimeout&&t.setTimeout,Zt=he.ceil,en=he.floor,tn=fe.getOwnPropertySymbols,nn=xe?xe.isBuffer:void 0,rn=t.isFinite,on=me.join,sn=Bt(fe.keys,fe),an=he.max,cn=he.min,un=z.now,ln=t.parseInt,pn=he.random,dn=me.reverse,hn=eo(t,"DataView"),fn=eo(t,"Map"),vn=eo(t,"Promise"),yn=eo(t,"Set"),gn=eo(t,"WeakMap"),mn=eo(fe,"create"),_n=gn&&new gn,bn={},En=Oo(hn),Sn=Oo(fn),wn=Oo(vn),Tn=Oo(yn),Pn=Oo(gn),In=ke?ke.prototype:void 0,Cn=In?In.valueOf:void 0,On=In?In.toString:void 0;function An(e){if($s(e)&&!Ds(e)&&!(e instanceof kn)){if(e instanceof Nn)return e;if(we.call(e,"__wrapped__"))return Ao(e)}return new Nn(e)}var xn=function(){function e(){}return function(t){if(!Gs(t))return{};if($e)return $e(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Rn(){}function Nn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ln(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Mn;++t<n;)this.add(e[t])}function Fn(e){var t=this.__data__=new jn(e);this.size=t.size}function Vn(e,t){var n=Ds(e),r=!n&&ks(e),i=!n&&!r&&Fs(e),o=!n&&!r&&!i&&Zs(e),s=n||r||i||o,a=s?Ot(e.length,ye):[],c=a.length;for(var u in e)!t&&!we.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ao(u,c))||a.push(u);return a}function Un(e){var t=e.length;return t?e[Lr(0,t-1)]:void 0}function Bn(e,t){return Po(mi(e),Xn(t,0,e.length))}function Hn(e){return Po(mi(e))}function Wn(e,t,n){(void 0!==n&&!xs(e[t],n)||void 0===n&&!(t in e))&&zn(e,t,n)}function Gn(e,t,n){var r=e[t];we.call(e,t)&&xs(r,n)&&(void 0!==n||t in e)||zn(e,t,n)}function $n(e,t){for(var n=e.length;n--;)if(xs(e[n][0],t))return n;return-1}function qn(e,t,n,r){return tr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Kn(e,t){return e&&_i(t,Ea(t),e)}function zn(e,t,n){"__proto__"==t&&Pt?Pt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Yn(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?void 0:ya(e,t[n]);return o}function Xn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Qn(e,t,n,r,i,o){var s,c=1&t,p=2&t,E=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!Gs(e))return e;var N=Ds(e);if(N){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&we.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return mi(e,s)}else{var k=ro(e),D=k==d||k==h;if(Fs(e))return di(e,c);if(k==y||k==a||D&&!i){if(s=p||D?{}:oo(e),!c)return p?function(e,t){return _i(e,no(e),t)}(e,function(e,t){return e&&_i(t,Sa(t),e)}(s,e)):function(e,t){return _i(e,to(e),t)}(e,Kn(s,e))}else{if(!Ue[k])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case S:return hi(e);case u:case l:return new r(+e);case w:return function(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case T:case P:case I:case C:case O:case A:case"[object Uint8ClampedArray]":case x:case R:return fi(e,n);case f:return new r;case v:case _:return new r(e);case g:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case m:return new r;case b:return i=e,Cn?fe(Cn.call(i)):{}}var i}(e,k,c)}}o||(o=new Fn);var j=o.get(e);if(j)return j;o.set(e,s),Xs(e)?e.forEach((function(r){s.add(Qn(r,t,n,r,e,o))})):qs(e)&&e.forEach((function(r,i){s.set(i,Qn(r,t,n,i,e,o))}));var M=N?void 0:(E?p?Ki:qi:p?Sa:Ea)(e);return st(M||e,(function(r,i){M&&(r=e[i=r]),Gn(s,i,Qn(r,t,n,i,e,o))})),s}function Jn(e,t,n){var r=n.length;if(null==e)return!r;for(e=fe(e);r--;){var i=n[r],o=t[i],s=e[i];if(void 0===s&&!(i in e)||!o(s))return!1}return!0}function Zn(e,t,n){if("function"!=typeof e)throw new ge(i);return Eo((function(){e.apply(void 0,n)}),t)}function er(e,t,n,r){var i=-1,o=lt,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;n&&(t=dt(t,xt(n))),r?(o=pt,s=!1):t.length>=200&&(o=Nt,s=!1,t=new Ln(t));e:for(;++i<a;){var l=e[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,s&&p==p){for(var d=u;d--;)if(t[d]===p)continue e;c.push(l)}else o(t,p,r)||c.push(l)}return c}An.templateSettings={escape:V,evaluate:U,interpolate:B,variable:"",imports:{_:An}},An.prototype=Rn.prototype,An.prototype.constructor=An,Nn.prototype=xn(Rn.prototype),Nn.prototype.constructor=Nn,kn.prototype=xn(Rn.prototype),kn.prototype.constructor=kn,Dn.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},Dn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Dn.prototype.get=function(e){var t=this.__data__;if(mn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return we.call(t,e)?t[e]:void 0},Dn.prototype.has=function(e){var t=this.__data__;return mn?void 0!==t[e]:we.call(t,e)},Dn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mn&&void 0===t?"__lodash_hash_undefined__":t,this},jn.prototype.clear=function(){this.__data__=[],this.size=0},jn.prototype.delete=function(e){var t=this.__data__,n=$n(t,e);return!(n<0)&&(n==t.length-1?t.pop():ze.call(t,n,1),--this.size,!0)},jn.prototype.get=function(e){var t=this.__data__,n=$n(t,e);return n<0?void 0:t[n][1]},jn.prototype.has=function(e){return $n(this.__data__,e)>-1},jn.prototype.set=function(e,t){var n=this.__data__,r=$n(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Mn.prototype.clear=function(){this.size=0,this.__data__={hash:new Dn,map:new(fn||jn),string:new Dn}},Mn.prototype.delete=function(e){var t=Ji(this,e).delete(e);return this.size-=t?1:0,t},Mn.prototype.get=function(e){return Ji(this,e).get(e)},Mn.prototype.has=function(e){return Ji(this,e).has(e)},Mn.prototype.set=function(e,t){var n=Ji(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.clear=function(){this.__data__=new jn,this.size=0},Fn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fn.prototype.get=function(e){return this.__data__.get(e)},Fn.prototype.has=function(e){return this.__data__.has(e)},Fn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof jn){var r=n.__data__;if(!fn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mn(r)}return n.set(e,t),this.size=n.size,this};var tr=Si(ur),nr=Si(lr,!0);function rr(e,t){var n=!0;return tr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function ir(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(void 0===a?s==s&&!Js(s):n(s,a)))var a=s,c=o}return c}function or(e,t){var n=[];return tr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function sr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=so),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?sr(a,t-1,n,r,i):ht(i,a):r||(i[i.length]=a)}return i}var ar=wi(),cr=wi(!0);function ur(e,t){return e&&ar(e,t,Ea)}function lr(e,t){return e&&cr(e,t,Ea)}function pr(e,t){return ut(t,(function(t){return Bs(e[t])}))}function dr(e,t){for(var n=0,r=(t=ci(t,e)).length;null!=e&&n<r;)e=e[Co(t[n++])];return n&&n==r?e:void 0}function hr(e,t,n){var r=t(e);return Ds(e)?r:ht(r,n(e))}function fr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gt&&gt in fe(e)?function(e){var t=we.call(e,gt),n=e[gt];try{e[gt]=void 0;var r=!0}catch(e){}var i=Ie.call(e);r&&(t?e[gt]=n:delete e[gt]);return i}(e):function(e){return Ie.call(e)}(e)}function vr(e,t){return e>t}function yr(e,t){return null!=e&&we.call(e,t)}function gr(e,t){return null!=e&&t in fe(e)}function mr(e,t,n){for(var i=n?pt:lt,o=e[0].length,s=e.length,a=s,c=r(s),u=1/0,l=[];a--;){var p=e[a];a&&t&&(p=dt(p,xt(t))),u=cn(p.length,u),c[a]=!n&&(t||o>=120&&p.length>=120)?new Ln(a&&p):void 0}p=e[0];var d=-1,h=c[0];e:for(;++d<o&&l.length<u;){var f=p[d],v=t?t(f):f;if(f=n||0!==f?f:0,!(h?Nt(h,v):i(l,v,n))){for(a=s;--a;){var y=c[a];if(!(y?Nt(y,v):i(e[a],v,n)))continue e}h&&h.push(v),l.push(f)}}return l}function _r(e,t,n){var r=null==(e=go(e,t=ci(t,e)))?e:e[Co(Uo(t))];return null==r?void 0:it(r,e,n)}function br(e){return $s(e)&&fr(e)==a}function Er(e,t,n,r,i){return e===t||(null==e||null==t||!$s(e)&&!$s(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=Ds(e),d=Ds(t),h=s?c:ro(e),E=d?c:ro(t),T=(h=h==a?y:h)==y,P=(E=E==a?y:E)==y,I=h==E;if(I&&Fs(e)){if(!Fs(t))return!1;s=!0,T=!1}if(I&&!T)return o||(o=new Fn),s||Zs(e)?Gi(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!o(new je(e),new je(t)));case u:case l:case v:return xs(+e,+t);case p:return e.name==t.name&&e.message==t.message;case g:case _:return e==t+"";case f:var a=Ut;case m:var c=1&r;if(a||(a=Wt),e.size!=t.size&&!c)return!1;var d=s.get(e);if(d)return d==t;r|=2,s.set(e,t);var h=Gi(a(e),a(t),r,i,o,s);return s.delete(e),h;case b:if(Cn)return Cn.call(e)==Cn.call(t)}return!1}(e,t,h,n,r,i,o);if(!(1&n)){var C=T&&we.call(e,"__wrapped__"),O=P&&we.call(t,"__wrapped__");if(C||O){var A=C?e.value():e,x=O?t.value():t;return o||(o=new Fn),i(A,x,n,r,o)}}if(!I)return!1;return o||(o=new Fn),function(e,t,n,r,i,o){var s=1&n,a=qi(e),c=a.length,u=qi(t).length;if(c!=u&&!s)return!1;var l=c;for(;l--;){var p=a[l];if(!(s?p in t:we.call(t,p)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var f=!0;o.set(e,t),o.set(t,e);var v=s;for(;++l<c;){p=a[l];var y=e[p],g=t[p];if(r)var m=s?r(g,y,p,t,e,o):r(y,g,p,e,t,o);if(!(void 0===m?y===g||i(y,g,n,r,o):m)){f=!1;break}v||(v="constructor"==p)}if(f&&!v){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o)}(e,t,n,r,Er,i))}function Sr(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=fe(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var c=(a=n[i])[0],u=e[c],l=a[1];if(s&&a[2]){if(void 0===u&&!(c in e))return!1}else{var p=new Fn;if(r)var d=r(u,l,c,e,t,p);if(!(void 0===d?Er(l,u,3,r,p):d))return!1}}return!0}function wr(e){return!(!Gs(e)||(t=e,Pe&&Pe in t))&&(Bs(e)?Ae:oe).test(Oo(e));var t}function Tr(e){return"function"==typeof e?e:null==e?Ka:"object"==typeof e?Ds(e)?xr(e[0],e[1]):Ar(e):nc(e)}function Pr(e){if(!ho(e))return sn(e);var t=[];for(var n in fe(e))we.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ir(e){if(!Gs(e))return function(e){var t=[];if(null!=e)for(var n in fe(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var r in e)("constructor"!=r||!t&&we.call(e,r))&&n.push(r);return n}function Cr(e,t){return e<t}function Or(e,t){var n=-1,i=Ms(e)?r(e.length):[];return tr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Ar(e){var t=Zi(e);return 1==t.length&&t[0][2]?vo(t[0][0],t[0][1]):function(n){return n===e||Sr(n,e,t)}}function xr(e,t){return uo(e)&&fo(t)?vo(Co(e),t):function(n){var r=ya(n,e);return void 0===r&&r===t?ga(n,e):Er(t,r,3)}}function Rr(e,t,n,r,i){e!==t&&ar(t,(function(o,s){if(i||(i=new Fn),Gs(o))!function(e,t,n,r,i,o,s){var a=_o(e,n),c=_o(t,n),u=s.get(c);if(u)return void Wn(e,n,u);var l=o?o(a,c,n+"",e,t,s):void 0,p=void 0===l;if(p){var d=Ds(c),h=!d&&Fs(c),f=!d&&!h&&Zs(c);l=c,d||h||f?Ds(a)?l=a:Ls(a)?l=mi(a):h?(p=!1,l=di(c,!0)):f?(p=!1,l=fi(c,!0)):l=[]:zs(c)||ks(c)?(l=a,ks(a)?l=aa(a):Gs(a)&&!Bs(a)||(l=oo(c))):p=!1}p&&(s.set(c,l),i(l,c,r,o,s),s.delete(c));Wn(e,n,l)}(e,t,s,n,Rr,r,i);else{var a=r?r(_o(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),Wn(e,s,a)}}),Sa)}function Nr(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:void 0}function kr(e,t,n){t=t.length?dt(t,(function(e){return Ds(e)?function(t){return dr(t,1===e.length?e[0]:e)}:e})):[Ka];var r=-1;return t=dt(t,xt(Qi())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Or(e,(function(e,n,i){return{criteria:dt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var c=vi(i[r],o[r]);if(c){if(r>=a)return c;var u=n[r];return c*("desc"==u?-1:1)}}return e.index-t.index}(e,t,n)}))}function Dr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=dr(e,s);n(a,s)&&Hr(o,ci(s,e),a)}return o}function jr(e,t,n,r){var i=r?Et:bt,o=-1,s=t.length,a=e;for(e===t&&(t=mi(t)),n&&(a=dt(e,xt(n)));++o<s;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==e&&ze.call(a,c,1),ze.call(e,c,1);return e}function Mr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ao(i)?ze.call(e,i,1):ei(e,i)}}return e}function Lr(e,t){return e+en(pn()*(t-e+1))}function Fr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=en(t/2))&&(e+=e)}while(t);return n}function Vr(e,t){return So(yo(e,t,Ka),e+"")}function Ur(e){return Un(xa(e))}function Br(e,t){var n=xa(e);return Po(n,Xn(t,0,n.length))}function Hr(e,t,n,r){if(!Gs(e))return e;for(var i=-1,o=(t=ci(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var c=Co(t[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var l=a[c];void 0===(u=r?r(l,c,a):void 0)&&(u=Gs(l)?l:ao(t[i+1])?[]:{})}Gn(a,c,u),a=a[c]}return e}var Wr=_n?function(e,t){return _n.set(e,t),e}:Ka,Gr=Pt?function(e,t){return Pt(e,"toString",{configurable:!0,enumerable:!1,value:Ga(t),writable:!0})}:Ka;function $r(e){return Po(xa(e))}function qr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function Kr(e,t){var n;return tr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function zr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!Js(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return Yr(e,t,Ka,n)}function Yr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,a=null===t,c=Js(t),u=void 0===t;i<o;){var l=en((i+o)/2),p=n(e[l]),d=void 0!==p,h=null===p,f=p==p,v=Js(p);if(s)var y=r||f;else y=u?f&&(r||d):a?f&&d&&(r||!h):c?f&&d&&!h&&(r||!v):!h&&!v&&(r?p<=t:p<t);y?i=l+1:o=l}return cn(o,4294967294)}function Xr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!xs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function Qr(e){return"number"==typeof e?e:Js(e)?NaN:+e}function Jr(e){if("string"==typeof e)return e;if(Ds(e))return dt(e,Jr)+"";if(Js(e))return On?On.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Zr(e,t,n){var r=-1,i=lt,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=pt;else if(o>=200){var u=t?null:Fi(e);if(u)return Wt(u);s=!1,i=Nt,c=new Ln}else c=t?[]:a;e:for(;++r<o;){var l=e[r],p=t?t(l):l;if(l=n||0!==l?l:0,s&&p==p){for(var d=c.length;d--;)if(c[d]===p)continue e;t&&c.push(p),a.push(l)}else i(c,p,n)||(c!==a&&c.push(p),a.push(l))}return a}function ei(e,t){return null==(e=go(e,t=ci(t,e)))||delete e[Co(Uo(t))]}function ti(e,t,n,r){return Hr(e,t,n(dr(e,t)),r)}function ni(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?qr(e,r?0:o,r?o+1:i):qr(e,r?o+1:0,r?i:o)}function ri(e,t){var n=e;return n instanceof kn&&(n=n.value()),ft(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),n)}function ii(e,t,n){var i=e.length;if(i<2)return i?Zr(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=er(s[o]||a,e[c],t,n));return Zr(sr(s,1),t,n)}function oi(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var a=r<o?t[r]:void 0;n(s,e[r],a)}return s}function si(e){return Ls(e)?e:[]}function ai(e){return"function"==typeof e?e:Ka}function ci(e,t){return Ds(e)?e:uo(e,t)?[e]:Io(ca(e))}var ui=Vr;function li(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:qr(e,t,n)}var pi=Xt||function(e){return qe.clearTimeout(e)};function di(e,t){if(t)return e.slice();var n=e.length,r=Be?Be(n):new e.constructor(n);return e.copy(r),r}function hi(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function fi(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function vi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Js(e),s=void 0!==t,a=null===t,c=t==t,u=Js(t);if(!a&&!u&&!o&&e>t||o&&s&&c&&!a&&!u||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!c)return-1}return 0}function yi(e,t,n,i){for(var o=-1,s=e.length,a=n.length,c=-1,u=t.length,l=an(s-a,0),p=r(u+l),d=!i;++c<u;)p[c]=t[c];for(;++o<a;)(d||o<s)&&(p[n[o]]=e[o]);for(;l--;)p[c++]=e[o++];return p}function gi(e,t,n,i){for(var o=-1,s=e.length,a=-1,c=n.length,u=-1,l=t.length,p=an(s-c,0),d=r(p+l),h=!i;++o<p;)d[o]=e[o];for(var f=o;++u<l;)d[f+u]=t[u];for(;++a<c;)(h||o<s)&&(d[f+n[a]]=e[o++]);return d}function mi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function _i(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),i?zn(n,a,c):Gn(n,a,c)}return n}function bi(e,t){return function(n,r){var i=Ds(n)?ot:qn,o=t?t():{};return i(n,e,Qi(r,2),o)}}function Ei(e){return Vr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&co(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=fe(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t}))}function Si(e,t){return function(n,r){if(null==n)return n;if(!Ms(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=fe(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function wi(e){return function(t,n,r){for(var i=-1,o=fe(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}function Ti(e){return function(t){var n=Vt(t=ca(t))?qt(t):void 0,r=n?n[0]:t.charAt(0),i=n?li(n,1).join(""):t.slice(1);return r[e]()+i}}function Pi(e){return function(t){return ft(Ba(ka(t).replace(Re,"")),e,"")}}function Ii(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=xn(e.prototype),r=e.apply(n,t);return Gs(r)?r:n}}function Ci(e){return function(t,n,r){var i=fe(t);if(!Ms(t)){var o=Qi(n,3);t=Ea(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}}function Oi(e){return $i((function(t){var n=t.length,r=n,o=Nn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new ge(i);if(o&&!a&&"wrapper"==Yi(s))var a=new Nn([],!0)}for(r=a?r:n;++r<n;){var c=Yi(s=t[r]),u="wrapper"==c?zi(s):void 0;a=u&&lo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[Yi(u[0])].apply(a,u[3]):1==s.length&&lo(s)?a[c]():a.thru(s)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Ds(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ai(e,t,n,i,o,s,a,c,u,l){var p=128&t,d=1&t,h=2&t,f=24&t,v=512&t,y=h?void 0:Ii(e);return function g(){for(var m=arguments.length,_=r(m),b=m;b--;)_[b]=arguments[b];if(f)var E=Xi(g),S=jt(_,E);if(i&&(_=yi(_,i,o,f)),s&&(_=gi(_,s,a,f)),m-=S,f&&m<l){var w=Ht(_,E);return Mi(e,t,Ai,g.placeholder,n,_,w,c,u,l-m)}var T=d?n:this,P=h?T[e]:e;return m=_.length,c?_=mo(_,c):v&&m>1&&_.reverse(),p&&u<m&&(_.length=u),this&&this!==qe&&this instanceof g&&(P=y||Ii(P)),P.apply(T,_)}}function xi(e,t){return function(n,r){return function(e,t,n,r){return ur(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Ri(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Jr(n),r=Jr(r)):(n=Qr(n),r=Qr(r)),i=e(n,r)}return i}}function Ni(e){return $i((function(t){return t=dt(t,xt(Qi())),Vr((function(n){var r=this;return e(t,(function(e){return it(e,r,n)}))}))}))}function ki(e,t){var n=(t=void 0===t?" ":Jr(t)).length;if(n<2)return n?Fr(t,e):t;var r=Fr(t,Zt(e/$t(t)));return Vt(t)?li(qt(r),0,e).join(""):r.slice(0,e)}function Di(e){return function(t,n,i){return i&&"number"!=typeof i&&co(t,n,i)&&(n=i=void 0),t=ra(t),void 0===n?(n=t,t=0):n=ra(n),function(e,t,n,i){for(var o=-1,s=an(Zt((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,i=void 0===i?t<n?1:-1:ra(i),e)}}function ji(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=sa(t),n=sa(n)),e(t,n)}}function Mi(e,t,n,r,i,o,s,a,c,u){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var p=[e,t,i,l?o:void 0,l?s:void 0,l?void 0:o,l?void 0:s,a,c,u],d=n.apply(void 0,p);return lo(e)&&bo(d,p),d.placeholder=r,wo(d,e,t)}function Li(e){var t=he[e];return function(e,n){if(e=sa(e),(n=null==n?0:cn(ia(n),292))&&rn(e)){var r=(ca(e)+"e").split("e");return+((r=(ca(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Fi=yn&&1/Wt(new yn([,-0]))[1]==1/0?function(e){return new yn(e)}:Ja;function Vi(e){return function(t){var n=ro(t);return n==f?Ut(t):n==m?Gt(t):function(e,t){return dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ui(e,t,n,s,a,c,u,l){var p=2&t;if(!p&&"function"!=typeof e)throw new ge(i);var d=s?s.length:0;if(d||(t&=-97,s=a=void 0),u=void 0===u?u:an(ia(u),0),l=void 0===l?l:ia(l),d-=a?a.length:0,64&t){var h=s,f=a;s=a=void 0}var v=p?void 0:zi(e),y=[e,t,n,s,a,h,f,c,u,l];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?yi(u,c,t[4]):c,e[4]=u?Ht(e[3],o):t[4]}(c=t[5])&&(u=e[5],e[5]=u?gi(u,c,t[6]):c,e[6]=u?Ht(e[5],o):t[6]);(c=t[7])&&(e[7]=c);128&r&&(e[8]=null==e[8]?t[8]:cn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(y,v),e=y[0],t=y[1],n=y[2],s=y[3],a=y[4],!(l=y[9]=void 0===y[9]?p?0:e.length:an(y[9]-d,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,n){var i=Ii(e);return function o(){for(var s=arguments.length,a=r(s),c=s,u=Xi(o);c--;)a[c]=arguments[c];var l=s<3&&a[0]!==u&&a[s-1]!==u?[]:Ht(a,u);if((s-=l.length)<n)return Mi(e,t,Ai,o.placeholder,void 0,a,l,void 0,void 0,n-s);var p=this&&this!==qe&&this instanceof o?i:e;return it(p,this,a)}}(e,t,l):32!=t&&33!=t||a.length?Ai.apply(void 0,y):function(e,t,n,i){var o=1&t,s=Ii(e);return function t(){for(var a=-1,c=arguments.length,u=-1,l=i.length,p=r(l+c),d=this&&this!==qe&&this instanceof t?s:e;++u<l;)p[u]=i[u];for(;c--;)p[u++]=arguments[++a];return it(d,o?n:this,p)}}(e,t,n,s);else var g=function(e,t,n){var r=1&t,i=Ii(e);return function t(){var o=this&&this!==qe&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return wo((v?Wr:bo)(g,y),e,t)}function Bi(e,t,n,r){return void 0===e||xs(e,be[n])&&!we.call(r,n)?t:e}function Hi(e,t,n,r,i,o){return Gs(e)&&Gs(t)&&(o.set(t,e),Rr(e,t,void 0,Hi,o),o.delete(t)),e}function Wi(e){return zs(e)?void 0:e}function Gi(e,t,n,r,i,o){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var p=-1,d=!0,h=2&n?new Ln:void 0;for(o.set(e,t),o.set(t,e);++p<a;){var f=e[p],v=t[p];if(r)var y=s?r(v,f,p,t,e,o):r(f,v,p,e,t,o);if(void 0!==y){if(y)continue;d=!1;break}if(h){if(!yt(t,(function(e,t){if(!Nt(h,t)&&(f===e||i(f,e,n,r,o)))return h.push(t)}))){d=!1;break}}else if(f!==v&&!i(f,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function $i(e){return So(yo(e,void 0,jo),e+"")}function qi(e){return hr(e,Ea,to)}function Ki(e){return hr(e,Sa,no)}var zi=_n?function(e){return _n.get(e)}:Ja;function Yi(e){for(var t=e.name+"",n=bn[t],r=we.call(bn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Xi(e){return(we.call(An,"placeholder")?An:e).placeholder}function Qi(){var e=An.iteratee||za;return e=e===za?Tr:e,arguments.length?e(arguments[0],arguments[1]):e}function Ji(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Zi(e){for(var t=Ea(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,fo(i)]}return t}function eo(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wr(n)?n:void 0}var to=tn?function(e){return null==e?[]:(e=fe(e),ut(tn(e),(function(t){return Ke.call(e,t)})))}:oc,no=tn?function(e){for(var t=[];e;)ht(t,to(e)),e=Ge(e);return t}:oc,ro=fr;function io(e,t,n){for(var r=-1,i=(t=ci(t,e)).length,o=!1;++r<i;){var s=Co(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ws(i)&&ao(s,i)&&(Ds(e)||ks(e))}function oo(e){return"function"!=typeof e.constructor||ho(e)?{}:xn(Ge(e))}function so(e){return Ds(e)||ks(e)||!!(Xe&&e&&e[Xe])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function co(e,t,n){if(!Gs(n))return!1;var r=typeof t;return!!("number"==r?Ms(n)&&ao(t,n.length):"string"==r&&t in n)&&xs(n[t],e)}function uo(e,t){if(Ds(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Js(e))||(W.test(e)||!H.test(e)||null!=t&&e in fe(t))}function lo(e){var t=Yi(e),n=An[t];if("function"!=typeof n||!(t in kn.prototype))return!1;if(e===n)return!0;var r=zi(n);return!!r&&e===r[0]}(hn&&ro(new hn(new ArrayBuffer(1)))!=w||fn&&ro(new fn)!=f||vn&&"[object Promise]"!=ro(vn.resolve())||yn&&ro(new yn)!=m||gn&&ro(new gn)!=E)&&(ro=function(e){var t=fr(e),n=t==y?e.constructor:void 0,r=n?Oo(n):"";if(r)switch(r){case En:return w;case Sn:return f;case wn:return"[object Promise]";case Tn:return m;case Pn:return E}return t});var po=Ee?Bs:sc;function ho(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||be)}function fo(e){return e==e&&!Gs(e)}function vo(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in fe(n)))}}function yo(e,t,n){return t=an(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=an(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(a),it(e,this,c)}}function go(e,t){return t.length<2?e:dr(e,qr(t,0,-1))}function mo(e,t){for(var n=e.length,r=cn(t.length,n),i=mi(e);r--;){var o=t[r];e[r]=ao(o,n)?i[o]:void 0}return e}function _o(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var bo=To(Wr),Eo=Jt||function(e,t){return qe.setTimeout(e,t)},So=To(Gr);function wo(e,t,n){var r=t+"";return So(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Y,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!lt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(X);return t?t[1].split(Q):[]}(r),n)))}function To(e){var t=0,n=0;return function(){var r=un(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Po(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Lr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Io=function(e){var t=Ts(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(G,(function(e,n,r,i){t.push(r?i.replace(ee,"$1"):n||e)})),t}));function Co(e){if("string"==typeof e||Js(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Oo(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ao(e){if(e instanceof kn)return e.clone();var t=new Nn(e.__wrapped__,e.__chain__);return t.__actions__=mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var xo=Vr((function(e,t){return Ls(e)?er(e,sr(t,1,Ls,!0)):[]})),Ro=Vr((function(e,t){var n=Uo(t);return Ls(n)&&(n=void 0),Ls(e)?er(e,sr(t,1,Ls,!0),Qi(n,2)):[]})),No=Vr((function(e,t){var n=Uo(t);return Ls(n)&&(n=void 0),Ls(e)?er(e,sr(t,1,Ls,!0),void 0,n):[]}));function ko(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ia(n);return i<0&&(i=an(r+i,0)),_t(e,Qi(t,3),i)}function Do(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ia(n),i=n<0?an(r+i,0):cn(i,r-1)),_t(e,Qi(t,3),i,!0)}function jo(e){return(null==e?0:e.length)?sr(e,1):[]}function Mo(e){return e&&e.length?e[0]:void 0}var Lo=Vr((function(e){var t=dt(e,si);return t.length&&t[0]===e[0]?mr(t):[]})),Fo=Vr((function(e){var t=Uo(e),n=dt(e,si);return t===Uo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?mr(n,Qi(t,2)):[]})),Vo=Vr((function(e){var t=Uo(e),n=dt(e,si);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?mr(n,void 0,t):[]}));function Uo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Bo=Vr(Ho);function Ho(e,t){return e&&e.length&&t&&t.length?jr(e,t):e}var Wo=$i((function(e,t){var n=null==e?0:e.length,r=Yn(e,t);return Mr(e,dt(t,(function(e){return ao(e,n)?+e:e})).sort(vi)),r}));function Go(e){return null==e?e:dn.call(e)}var $o=Vr((function(e){return Zr(sr(e,1,Ls,!0))})),qo=Vr((function(e){var t=Uo(e);return Ls(t)&&(t=void 0),Zr(sr(e,1,Ls,!0),Qi(t,2))})),Ko=Vr((function(e){var t=Uo(e);return t="function"==typeof t?t:void 0,Zr(sr(e,1,Ls,!0),void 0,t)}));function zo(e){if(!e||!e.length)return[];var t=0;return e=ut(e,(function(e){if(Ls(e))return t=an(e.length,t),!0})),Ot(t,(function(t){return dt(e,Tt(t))}))}function Yo(e,t){if(!e||!e.length)return[];var n=zo(e);return null==t?n:dt(n,(function(e){return it(t,void 0,e)}))}var Xo=Vr((function(e,t){return Ls(e)?er(e,t):[]})),Qo=Vr((function(e){return ii(ut(e,Ls))})),Jo=Vr((function(e){var t=Uo(e);return Ls(t)&&(t=void 0),ii(ut(e,Ls),Qi(t,2))})),Zo=Vr((function(e){var t=Uo(e);return t="function"==typeof t?t:void 0,ii(ut(e,Ls),void 0,t)})),es=Vr(zo);var ts=Vr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Yo(e,n)}));function ns(e){var t=An(e);return t.__chain__=!0,t}function rs(e,t){return t(e)}var is=$i((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Yn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof kn&&ao(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:rs,args:[i],thisArg:void 0}),new Nn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var os=bi((function(e,t,n){we.call(e,n)?++e[n]:zn(e,n,1)}));var ss=Ci(ko),as=Ci(Do);function cs(e,t){return(Ds(e)?st:tr)(e,Qi(t,3))}function us(e,t){return(Ds(e)?at:nr)(e,Qi(t,3))}var ls=bi((function(e,t,n){we.call(e,n)?e[n].push(t):zn(e,n,[t])}));var ps=Vr((function(e,t,n){var i=-1,o="function"==typeof t,s=Ms(e)?r(e.length):[];return tr(e,(function(e){s[++i]=o?it(t,e,n):_r(e,t,n)})),s})),ds=bi((function(e,t,n){zn(e,n,t)}));function hs(e,t){return(Ds(e)?dt:Or)(e,Qi(t,3))}var fs=bi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var vs=Vr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&co(e,t[0],t[1])?t=[]:n>2&&co(t[0],t[1],t[2])&&(t=[t[0]]),kr(e,sr(t,1),[])})),ys=Qt||function(){return qe.Date.now()};function gs(e,t,n){return t=n?void 0:t,Ui(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function ms(e,t){var n;if("function"!=typeof t)throw new ge(i);return e=ia(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var _s=Vr((function(e,t,n){var r=1;if(n.length){var i=Ht(n,Xi(_s));r|=32}return Ui(e,r,t,n,i)})),bs=Vr((function(e,t,n){var r=3;if(n.length){var i=Ht(n,Xi(bs));r|=32}return Ui(t,r,e,n,i)}));function Es(e,t,n){var r,o,s,a,c,u,l=0,p=!1,d=!1,h=!0;if("function"!=typeof e)throw new ge(i);function f(t){var n=r,i=o;return r=o=void 0,l=t,a=e.apply(i,n)}function v(e){return l=e,c=Eo(g,t),p?f(e):a}function y(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-l>=s}function g(){var e=ys();if(y(e))return m(e);c=Eo(g,function(e){var n=t-(e-u);return d?cn(n,s-(e-l)):n}(e))}function m(e){return c=void 0,h&&r?f(e):(r=o=void 0,a)}function _(){var e=ys(),n=y(e);if(r=arguments,o=this,u=e,n){if(void 0===c)return v(u);if(d)return pi(c),c=Eo(g,t),f(u)}return void 0===c&&(c=Eo(g,t)),a}return t=sa(t)||0,Gs(n)&&(p=!!n.leading,s=(d="maxWait"in n)?an(sa(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==c&&pi(c),l=0,r=u=o=c=void 0},_.flush=function(){return void 0===c?a:m(ys())},_}var Ss=Vr((function(e,t){return Zn(e,1,t)})),ws=Vr((function(e,t,n){return Zn(e,sa(t)||0,n)}));function Ts(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ge(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ts.Cache||Mn),n}function Ps(e){if("function"!=typeof e)throw new ge(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ts.Cache=Mn;var Is=ui((function(e,t){var n=(t=1==t.length&&Ds(t[0])?dt(t[0],xt(Qi())):dt(sr(t,1),xt(Qi()))).length;return Vr((function(r){for(var i=-1,o=cn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return it(e,this,r)}))})),Cs=Vr((function(e,t){return Ui(e,32,void 0,t,Ht(t,Xi(Cs)))})),Os=Vr((function(e,t){return Ui(e,64,void 0,t,Ht(t,Xi(Os)))})),As=$i((function(e,t){return Ui(e,256,void 0,void 0,void 0,t)}));function xs(e,t){return e===t||e!=e&&t!=t}var Rs=ji(vr),Ns=ji((function(e,t){return e>=t})),ks=br(function(){return arguments}())?br:function(e){return $s(e)&&we.call(e,"callee")&&!Ke.call(e,"callee")},Ds=r.isArray,js=Je?xt(Je):function(e){return $s(e)&&fr(e)==S};function Ms(e){return null!=e&&Ws(e.length)&&!Bs(e)}function Ls(e){return $s(e)&&Ms(e)}var Fs=nn||sc,Vs=Ze?xt(Ze):function(e){return $s(e)&&fr(e)==l};function Us(e){if(!$s(e))return!1;var t=fr(e);return t==p||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!zs(e)}function Bs(e){if(!Gs(e))return!1;var t=fr(e);return t==d||t==h||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Hs(e){return"number"==typeof e&&e==ia(e)}function Ws(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Gs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $s(e){return null!=e&&"object"==typeof e}var qs=et?xt(et):function(e){return $s(e)&&ro(e)==f};function Ks(e){return"number"==typeof e||$s(e)&&fr(e)==v}function zs(e){if(!$s(e)||fr(e)!=y)return!1;var t=Ge(e);if(null===t)return!0;var n=we.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Se.call(n)==Ce}var Ys=tt?xt(tt):function(e){return $s(e)&&fr(e)==g};var Xs=nt?xt(nt):function(e){return $s(e)&&ro(e)==m};function Qs(e){return"string"==typeof e||!Ds(e)&&$s(e)&&fr(e)==_}function Js(e){return"symbol"==typeof e||$s(e)&&fr(e)==b}var Zs=rt?xt(rt):function(e){return $s(e)&&Ws(e.length)&&!!Ve[fr(e)]};var ea=ji(Cr),ta=ji((function(e,t){return e<=t}));function na(e){if(!e)return[];if(Ms(e))return Qs(e)?qt(e):mi(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=ro(e);return(t==f?Ut:t==m?Wt:xa)(e)}function ra(e){return e?(e=sa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ia(e){var t=ra(e),n=t%1;return t==t?n?t-n:t:0}function oa(e){return e?Xn(ia(e),0,4294967295):0}function sa(e){if("number"==typeof e)return e;if(Js(e))return NaN;if(Gs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Gs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=At(e);var n=ie.test(e);return n||se.test(e)?We(e.slice(2),n?2:8):re.test(e)?NaN:+e}function aa(e){return _i(e,Sa(e))}function ca(e){return null==e?"":Jr(e)}var ua=Ei((function(e,t){if(ho(t)||Ms(t))_i(t,Ea(t),e);else for(var n in t)we.call(t,n)&&Gn(e,n,t[n])})),la=Ei((function(e,t){_i(t,Sa(t),e)})),pa=Ei((function(e,t,n,r){_i(t,Sa(t),e,r)})),da=Ei((function(e,t,n,r){_i(t,Ea(t),e,r)})),ha=$i(Yn);var fa=Vr((function(e,t){e=fe(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&co(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Sa(o),a=-1,c=s.length;++a<c;){var u=s[a],l=e[u];(void 0===l||xs(l,be[u])&&!we.call(e,u))&&(e[u]=o[u])}return e})),va=Vr((function(e){return e.push(void 0,Hi),it(Ta,void 0,e)}));function ya(e,t,n){var r=null==e?void 0:dr(e,t);return void 0===r?n:r}function ga(e,t){return null!=e&&io(e,t,gr)}var ma=xi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),e[t]=n}),Ga(Ka)),_a=xi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),we.call(e,t)?e[t].push(n):e[t]=[n]}),Qi),ba=Vr(_r);function Ea(e){return Ms(e)?Vn(e):Pr(e)}function Sa(e){return Ms(e)?Vn(e,!0):Ir(e)}var wa=Ei((function(e,t,n){Rr(e,t,n)})),Ta=Ei((function(e,t,n,r){Rr(e,t,n,r)})),Pa=$i((function(e,t){var n={};if(null==e)return n;var r=!1;t=dt(t,(function(t){return t=ci(t,e),r||(r=t.length>1),t})),_i(e,Ki(e),n),r&&(n=Qn(n,7,Wi));for(var i=t.length;i--;)ei(n,t[i]);return n}));var Ia=$i((function(e,t){return null==e?{}:function(e,t){return Dr(e,t,(function(t,n){return ga(e,n)}))}(e,t)}));function Ca(e,t){if(null==e)return{};var n=dt(Ki(e),(function(e){return[e]}));return t=Qi(t),Dr(e,n,(function(e,n){return t(e,n[0])}))}var Oa=Vi(Ea),Aa=Vi(Sa);function xa(e){return null==e?[]:Rt(e,Ea(e))}var Ra=Pi((function(e,t,n){return t=t.toLowerCase(),e+(n?Na(t):t)}));function Na(e){return Ua(ca(e).toLowerCase())}function ka(e){return(e=ca(e))&&e.replace(ce,Mt).replace(Ne,"")}var Da=Pi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),ja=Pi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ma=Ti("toLowerCase");var La=Pi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Fa=Pi((function(e,t,n){return e+(n?" ":"")+Ua(t)}));var Va=Pi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ua=Ti("toUpperCase");function Ba(e,t,n){return e=ca(e),void 0===(t=n?void 0:t)?function(e){return Me.test(e)}(e)?function(e){return e.match(De)||[]}(e):function(e){return e.match(J)||[]}(e):e.match(t)||[]}var Ha=Vr((function(e,t){try{return it(e,void 0,t)}catch(e){return Us(e)?e:new pe(e)}})),Wa=$i((function(e,t){return st(t,(function(t){t=Co(t),zn(e,t,_s(e[t],e))})),e}));function Ga(e){return function(){return e}}var $a=Oi(),qa=Oi(!0);function Ka(e){return e}function za(e){return Tr("function"==typeof e?e:Qn(e,1))}var Ya=Vr((function(e,t){return function(n){return _r(n,e,t)}})),Xa=Vr((function(e,t){return function(n){return _r(e,n,t)}}));function Qa(e,t,n){var r=Ea(t),i=pr(t,r);null!=n||Gs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=pr(t,Ea(t)));var o=!(Gs(n)&&"chain"in n&&!n.chain),s=Bs(e);return st(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=mi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,ht([this.value()],arguments))})})),e}function Ja(){}var Za=Ni(dt),ec=Ni(ct),tc=Ni(yt);function nc(e){return uo(e)?Tt(Co(e)):function(e){return function(t){return dr(t,e)}}(e)}var rc=Di(),ic=Di(!0);function oc(){return[]}function sc(){return!1}var ac=Ri((function(e,t){return e+t}),0),cc=Li("ceil"),uc=Ri((function(e,t){return e/t}),1),lc=Li("floor");var pc,dc=Ri((function(e,t){return e*t}),1),hc=Li("round"),fc=Ri((function(e,t){return e-t}),0);return An.after=function(e,t){if("function"!=typeof t)throw new ge(i);return e=ia(e),function(){if(--e<1)return t.apply(this,arguments)}},An.ary=gs,An.assign=ua,An.assignIn=la,An.assignInWith=pa,An.assignWith=da,An.at=ha,An.before=ms,An.bind=_s,An.bindAll=Wa,An.bindKey=bs,An.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ds(e)?e:[e]},An.chain=ns,An.chunk=function(e,t,n){t=(n?co(e,t,n):void 0===t)?1:an(ia(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=r(Zt(i/t));o<i;)a[s++]=qr(e,o,o+=t);return a},An.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},An.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return ht(Ds(n)?mi(n):[n],sr(t,1))},An.cond=function(e){var t=null==e?0:e.length,n=Qi();return e=t?dt(e,(function(e){if("function"!=typeof e[1])throw new ge(i);return[n(e[0]),e[1]]})):[],Vr((function(n){for(var r=-1;++r<t;){var i=e[r];if(it(i[0],this,n))return it(i[1],this,n)}}))},An.conforms=function(e){return function(e){var t=Ea(e);return function(n){return Jn(n,e,t)}}(Qn(e,1))},An.constant=Ga,An.countBy=os,An.create=function(e,t){var n=xn(e);return null==t?n:Kn(n,t)},An.curry=function e(t,n,r){var i=Ui(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},An.curryRight=function e(t,n,r){var i=Ui(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},An.debounce=Es,An.defaults=fa,An.defaultsDeep=va,An.defer=Ss,An.delay=ws,An.difference=xo,An.differenceBy=Ro,An.differenceWith=No,An.drop=function(e,t,n){var r=null==e?0:e.length;return r?qr(e,(t=n||void 0===t?1:ia(t))<0?0:t,r):[]},An.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?qr(e,0,(t=r-(t=n||void 0===t?1:ia(t)))<0?0:t):[]},An.dropRightWhile=function(e,t){return e&&e.length?ni(e,Qi(t,3),!0,!0):[]},An.dropWhile=function(e,t){return e&&e.length?ni(e,Qi(t,3),!0):[]},An.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&co(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ia(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ia(r))<0&&(r+=i),r=n>r?0:oa(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},An.filter=function(e,t){return(Ds(e)?ut:or)(e,Qi(t,3))},An.flatMap=function(e,t){return sr(hs(e,t),1)},An.flatMapDeep=function(e,t){return sr(hs(e,t),1/0)},An.flatMapDepth=function(e,t,n){return n=void 0===n?1:ia(n),sr(hs(e,t),n)},An.flatten=jo,An.flattenDeep=function(e){return(null==e?0:e.length)?sr(e,1/0):[]},An.flattenDepth=function(e,t){return(null==e?0:e.length)?sr(e,t=void 0===t?1:ia(t)):[]},An.flip=function(e){return Ui(e,512)},An.flow=$a,An.flowRight=qa,An.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},An.functions=function(e){return null==e?[]:pr(e,Ea(e))},An.functionsIn=function(e){return null==e?[]:pr(e,Sa(e))},An.groupBy=ls,An.initial=function(e){return(null==e?0:e.length)?qr(e,0,-1):[]},An.intersection=Lo,An.intersectionBy=Fo,An.intersectionWith=Vo,An.invert=ma,An.invertBy=_a,An.invokeMap=ps,An.iteratee=za,An.keyBy=ds,An.keys=Ea,An.keysIn=Sa,An.map=hs,An.mapKeys=function(e,t){var n={};return t=Qi(t,3),ur(e,(function(e,r,i){zn(n,t(e,r,i),e)})),n},An.mapValues=function(e,t){var n={};return t=Qi(t,3),ur(e,(function(e,r,i){zn(n,r,t(e,r,i))})),n},An.matches=function(e){return Ar(Qn(e,1))},An.matchesProperty=function(e,t){return xr(e,Qn(t,1))},An.memoize=Ts,An.merge=wa,An.mergeWith=Ta,An.method=Ya,An.methodOf=Xa,An.mixin=Qa,An.negate=Ps,An.nthArg=function(e){return e=ia(e),Vr((function(t){return Nr(t,e)}))},An.omit=Pa,An.omitBy=function(e,t){return Ca(e,Ps(Qi(t)))},An.once=function(e){return ms(2,e)},An.orderBy=function(e,t,n,r){return null==e?[]:(Ds(t)||(t=null==t?[]:[t]),Ds(n=r?void 0:n)||(n=null==n?[]:[n]),kr(e,t,n))},An.over=Za,An.overArgs=Is,An.overEvery=ec,An.overSome=tc,An.partial=Cs,An.partialRight=Os,An.partition=fs,An.pick=Ia,An.pickBy=Ca,An.property=nc,An.propertyOf=function(e){return function(t){return null==e?void 0:dr(e,t)}},An.pull=Bo,An.pullAll=Ho,An.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,Qi(n,2)):e},An.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?jr(e,t,void 0,n):e},An.pullAt=Wo,An.range=rc,An.rangeRight=ic,An.rearg=As,An.reject=function(e,t){return(Ds(e)?ut:or)(e,Ps(Qi(t,3)))},An.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Qi(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Mr(e,i),n},An.rest=function(e,t){if("function"!=typeof e)throw new ge(i);return Vr(e,t=void 0===t?t:ia(t))},An.reverse=Go,An.sampleSize=function(e,t,n){return t=(n?co(e,t,n):void 0===t)?1:ia(t),(Ds(e)?Bn:Br)(e,t)},An.set=function(e,t,n){return null==e?e:Hr(e,t,n)},An.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Hr(e,t,n,r)},An.shuffle=function(e){return(Ds(e)?Hn:$r)(e)},An.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&co(e,t,n)?(t=0,n=r):(t=null==t?0:ia(t),n=void 0===n?r:ia(n)),qr(e,t,n)):[]},An.sortBy=vs,An.sortedUniq=function(e){return e&&e.length?Xr(e):[]},An.sortedUniqBy=function(e,t){return e&&e.length?Xr(e,Qi(t,2)):[]},An.split=function(e,t,n){return n&&"number"!=typeof n&&co(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ca(e))&&("string"==typeof t||null!=t&&!Ys(t))&&!(t=Jr(t))&&Vt(e)?li(qt(e),0,n):e.split(t,n):[]},An.spread=function(e,t){if("function"!=typeof e)throw new ge(i);return t=null==t?0:an(ia(t),0),Vr((function(n){var r=n[t],i=li(n,0,t);return r&&ht(i,r),it(e,this,i)}))},An.tail=function(e){var t=null==e?0:e.length;return t?qr(e,1,t):[]},An.take=function(e,t,n){return e&&e.length?qr(e,0,(t=n||void 0===t?1:ia(t))<0?0:t):[]},An.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?qr(e,(t=r-(t=n||void 0===t?1:ia(t)))<0?0:t,r):[]},An.takeRightWhile=function(e,t){return e&&e.length?ni(e,Qi(t,3),!1,!0):[]},An.takeWhile=function(e,t){return e&&e.length?ni(e,Qi(t,3)):[]},An.tap=function(e,t){return t(e),e},An.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new ge(i);return Gs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Es(e,t,{leading:r,maxWait:t,trailing:o})},An.thru=rs,An.toArray=na,An.toPairs=Oa,An.toPairsIn=Aa,An.toPath=function(e){return Ds(e)?dt(e,Co):Js(e)?[e]:mi(Io(ca(e)))},An.toPlainObject=aa,An.transform=function(e,t,n){var r=Ds(e),i=r||Fs(e)||Zs(e);if(t=Qi(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Gs(e)&&Bs(o)?xn(Ge(e)):{}}return(i?st:ur)(e,(function(e,r,i){return t(n,e,r,i)})),n},An.unary=function(e){return gs(e,1)},An.union=$o,An.unionBy=qo,An.unionWith=Ko,An.uniq=function(e){return e&&e.length?Zr(e):[]},An.uniqBy=function(e,t){return e&&e.length?Zr(e,Qi(t,2)):[]},An.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Zr(e,void 0,t):[]},An.unset=function(e,t){return null==e||ei(e,t)},An.unzip=zo,An.unzipWith=Yo,An.update=function(e,t,n){return null==e?e:ti(e,t,ai(n))},An.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ti(e,t,ai(n),r)},An.values=xa,An.valuesIn=function(e){return null==e?[]:Rt(e,Sa(e))},An.without=Xo,An.words=Ba,An.wrap=function(e,t){return Cs(ai(t),e)},An.xor=Qo,An.xorBy=Jo,An.xorWith=Zo,An.zip=es,An.zipObject=function(e,t){return oi(e||[],t||[],Gn)},An.zipObjectDeep=function(e,t){return oi(e||[],t||[],Hr)},An.zipWith=ts,An.entries=Oa,An.entriesIn=Aa,An.extend=la,An.extendWith=pa,Qa(An,An),An.add=ac,An.attempt=Ha,An.camelCase=Ra,An.capitalize=Na,An.ceil=cc,An.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=sa(n))==n?n:0),void 0!==t&&(t=(t=sa(t))==t?t:0),Xn(sa(e),t,n)},An.clone=function(e){return Qn(e,4)},An.cloneDeep=function(e){return Qn(e,5)},An.cloneDeepWith=function(e,t){return Qn(e,5,t="function"==typeof t?t:void 0)},An.cloneWith=function(e,t){return Qn(e,4,t="function"==typeof t?t:void 0)},An.conformsTo=function(e,t){return null==t||Jn(e,t,Ea(t))},An.deburr=ka,An.defaultTo=function(e,t){return null==e||e!=e?t:e},An.divide=uc,An.endsWith=function(e,t,n){e=ca(e),t=Jr(t);var r=e.length,i=n=void 0===n?r:Xn(ia(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},An.eq=xs,An.escape=function(e){return(e=ca(e))&&F.test(e)?e.replace(M,Lt):e},An.escapeRegExp=function(e){return(e=ca(e))&&q.test(e)?e.replace($,"\\$&"):e},An.every=function(e,t,n){var r=Ds(e)?ct:rr;return n&&co(e,t,n)&&(t=void 0),r(e,Qi(t,3))},An.find=ss,An.findIndex=ko,An.findKey=function(e,t){return mt(e,Qi(t,3),ur)},An.findLast=as,An.findLastIndex=Do,An.findLastKey=function(e,t){return mt(e,Qi(t,3),lr)},An.floor=lc,An.forEach=cs,An.forEachRight=us,An.forIn=function(e,t){return null==e?e:ar(e,Qi(t,3),Sa)},An.forInRight=function(e,t){return null==e?e:cr(e,Qi(t,3),Sa)},An.forOwn=function(e,t){return e&&ur(e,Qi(t,3))},An.forOwnRight=function(e,t){return e&&lr(e,Qi(t,3))},An.get=ya,An.gt=Rs,An.gte=Ns,An.has=function(e,t){return null!=e&&io(e,t,yr)},An.hasIn=ga,An.head=Mo,An.identity=Ka,An.includes=function(e,t,n,r){e=Ms(e)?e:xa(e),n=n&&!r?ia(n):0;var i=e.length;return n<0&&(n=an(i+n,0)),Qs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&bt(e,t,n)>-1},An.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ia(n);return i<0&&(i=an(r+i,0)),bt(e,t,i)},An.inRange=function(e,t,n){return t=ra(t),void 0===n?(n=t,t=0):n=ra(n),function(e,t,n){return e>=cn(t,n)&&e<an(t,n)}(e=sa(e),t,n)},An.invoke=ba,An.isArguments=ks,An.isArray=Ds,An.isArrayBuffer=js,An.isArrayLike=Ms,An.isArrayLikeObject=Ls,An.isBoolean=function(e){return!0===e||!1===e||$s(e)&&fr(e)==u},An.isBuffer=Fs,An.isDate=Vs,An.isElement=function(e){return $s(e)&&1===e.nodeType&&!zs(e)},An.isEmpty=function(e){if(null==e)return!0;if(Ms(e)&&(Ds(e)||"string"==typeof e||"function"==typeof e.splice||Fs(e)||Zs(e)||ks(e)))return!e.length;var t=ro(e);if(t==f||t==m)return!e.size;if(ho(e))return!Pr(e).length;for(var n in e)if(we.call(e,n))return!1;return!0},An.isEqual=function(e,t){return Er(e,t)},An.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Er(e,t,void 0,n):!!r},An.isError=Us,An.isFinite=function(e){return"number"==typeof e&&rn(e)},An.isFunction=Bs,An.isInteger=Hs,An.isLength=Ws,An.isMap=qs,An.isMatch=function(e,t){return e===t||Sr(e,t,Zi(t))},An.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Sr(e,t,Zi(t),n)},An.isNaN=function(e){return Ks(e)&&e!=+e},An.isNative=function(e){if(po(e))throw new pe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wr(e)},An.isNil=function(e){return null==e},An.isNull=function(e){return null===e},An.isNumber=Ks,An.isObject=Gs,An.isObjectLike=$s,An.isPlainObject=zs,An.isRegExp=Ys,An.isSafeInteger=function(e){return Hs(e)&&e>=-9007199254740991&&e<=9007199254740991},An.isSet=Xs,An.isString=Qs,An.isSymbol=Js,An.isTypedArray=Zs,An.isUndefined=function(e){return void 0===e},An.isWeakMap=function(e){return $s(e)&&ro(e)==E},An.isWeakSet=function(e){return $s(e)&&"[object WeakSet]"==fr(e)},An.join=function(e,t){return null==e?"":on.call(e,t)},An.kebabCase=Da,An.last=Uo,An.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ia(n))<0?an(r+i,0):cn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):_t(e,St,i,!0)},An.lowerCase=ja,An.lowerFirst=Ma,An.lt=ea,An.lte=ta,An.max=function(e){return e&&e.length?ir(e,Ka,vr):void 0},An.maxBy=function(e,t){return e&&e.length?ir(e,Qi(t,2),vr):void 0},An.mean=function(e){return wt(e,Ka)},An.meanBy=function(e,t){return wt(e,Qi(t,2))},An.min=function(e){return e&&e.length?ir(e,Ka,Cr):void 0},An.minBy=function(e,t){return e&&e.length?ir(e,Qi(t,2),Cr):void 0},An.stubArray=oc,An.stubFalse=sc,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=dc,An.nth=function(e,t){return e&&e.length?Nr(e,ia(t)):void 0},An.noConflict=function(){return qe._===this&&(qe._=Oe),this},An.noop=Ja,An.now=ys,An.pad=function(e,t,n){e=ca(e);var r=(t=ia(t))?$t(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ki(en(i),n)+e+ki(Zt(i),n)},An.padEnd=function(e,t,n){e=ca(e);var r=(t=ia(t))?$t(e):0;return t&&r<t?e+ki(t-r,n):e},An.padStart=function(e,t,n){e=ca(e);var r=(t=ia(t))?$t(e):0;return t&&r<t?ki(t-r,n)+e:e},An.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(ca(e).replace(K,""),t||0)},An.random=function(e,t,n){if(n&&"boolean"!=typeof n&&co(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=ra(e),void 0===t?(t=e,e=0):t=ra(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=pn();return cn(e+i*(t-e+He("1e-"+((i+"").length-1))),t)}return Lr(e,t)},An.reduce=function(e,t,n){var r=Ds(e)?ft:It,i=arguments.length<3;return r(e,Qi(t,4),n,i,tr)},An.reduceRight=function(e,t,n){var r=Ds(e)?vt:It,i=arguments.length<3;return r(e,Qi(t,4),n,i,nr)},An.repeat=function(e,t,n){return t=(n?co(e,t,n):void 0===t)?1:ia(t),Fr(ca(e),t)},An.replace=function(){var e=arguments,t=ca(e[0]);return e.length<3?t:t.replace(e[1],e[2])},An.result=function(e,t,n){var r=-1,i=(t=ci(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[Co(t[r])];void 0===o&&(r=i,o=n),e=Bs(o)?o.call(e):o}return e},An.round=hc,An.runInContext=e,An.sample=function(e){return(Ds(e)?Un:Ur)(e)},An.size=function(e){if(null==e)return 0;if(Ms(e))return Qs(e)?$t(e):e.length;var t=ro(e);return t==f||t==m?e.size:Pr(e).length},An.snakeCase=La,An.some=function(e,t,n){var r=Ds(e)?yt:Kr;return n&&co(e,t,n)&&(t=void 0),r(e,Qi(t,3))},An.sortedIndex=function(e,t){return zr(e,t)},An.sortedIndexBy=function(e,t,n){return Yr(e,t,Qi(n,2))},An.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=zr(e,t);if(r<n&&xs(e[r],t))return r}return-1},An.sortedLastIndex=function(e,t){return zr(e,t,!0)},An.sortedLastIndexBy=function(e,t,n){return Yr(e,t,Qi(n,2),!0)},An.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=zr(e,t,!0)-1;if(xs(e[n],t))return n}return-1},An.startCase=Fa,An.startsWith=function(e,t,n){return e=ca(e),n=null==n?0:Xn(ia(n),0,e.length),t=Jr(t),e.slice(n,n+t.length)==t},An.subtract=fc,An.sum=function(e){return e&&e.length?Ct(e,Ka):0},An.sumBy=function(e,t){return e&&e.length?Ct(e,Qi(t,2)):0},An.template=function(e,t,n){var r=An.templateSettings;n&&co(e,t,n)&&(t=void 0),e=ca(e),t=pa({},t,r,Bi);var i,o,s=pa({},t.imports,r.imports,Bi),a=Ea(s),c=Rt(s,a),u=0,l=t.interpolate||ue,p="__p += '",d=ve((t.escape||ue).source+"|"+l.source+"|"+(l===B?te:ue).source+"|"+(t.evaluate||ue).source+"|$","g"),h="//# sourceURL="+(we.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fe+"]")+"\n";e.replace(d,(function(t,n,r,s,a,c){return r||(r=s),p+=e.slice(u,c).replace(le,Ft),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),a&&(o=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),p+="';\n";var f=we.call(t,"variable")&&t.variable;if(f){if(Z.test(f))throw new pe("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(o?p.replace(N,""):p).replace(k,"$1").replace(D,"$1;"),p="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Ha((function(){return de(a,h+"return "+p).apply(void 0,c)}));if(v.source=p,Us(v))throw v;return v},An.times=function(e,t){if((e=ia(e))<1||e>9007199254740991)return[];var n=4294967295,r=cn(e,4294967295);e-=4294967295;for(var i=Ot(r,t=Qi(t));++n<e;)t(n);return i},An.toFinite=ra,An.toInteger=ia,An.toLength=oa,An.toLower=function(e){return ca(e).toLowerCase()},An.toNumber=sa,An.toSafeInteger=function(e){return e?Xn(ia(e),-9007199254740991,9007199254740991):0===e?e:0},An.toString=ca,An.toUpper=function(e){return ca(e).toUpperCase()},An.trim=function(e,t,n){if((e=ca(e))&&(n||void 0===t))return At(e);if(!e||!(t=Jr(t)))return e;var r=qt(e),i=qt(t);return li(r,kt(r,i),Dt(r,i)+1).join("")},An.trimEnd=function(e,t,n){if((e=ca(e))&&(n||void 0===t))return e.slice(0,Kt(e)+1);if(!e||!(t=Jr(t)))return e;var r=qt(e);return li(r,0,Dt(r,qt(t))+1).join("")},An.trimStart=function(e,t,n){if((e=ca(e))&&(n||void 0===t))return e.replace(K,"");if(!e||!(t=Jr(t)))return e;var r=qt(e);return li(r,kt(r,qt(t))).join("")},An.truncate=function(e,t){var n=30,r="...";if(Gs(t)){var i="separator"in t?t.separator:i;n="length"in t?ia(t.length):n,r="omission"in t?Jr(t.omission):r}var o=(e=ca(e)).length;if(Vt(e)){var s=qt(e);o=s.length}if(n>=o)return e;var a=n-$t(r);if(a<1)return r;var c=s?li(s,0,a).join(""):e.slice(0,a);if(void 0===i)return c+r;if(s&&(a+=c.length-a),Ys(i)){if(e.slice(a).search(i)){var u,l=c;for(i.global||(i=ve(i.source,ca(ne.exec(i))+"g")),i.lastIndex=0;u=i.exec(l);)var p=u.index;c=c.slice(0,void 0===p?a:p)}}else if(e.indexOf(Jr(i),a)!=a){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+r},An.unescape=function(e){return(e=ca(e))&&L.test(e)?e.replace(j,zt):e},An.uniqueId=function(e){var t=++Te;return ca(e)+t},An.upperCase=Va,An.upperFirst=Ua,An.each=cs,An.eachRight=us,An.first=Mo,Qa(An,(pc={},ur(An,(function(e,t){we.call(An.prototype,t)||(pc[t]=e)})),pc),{chain:!1}),An.VERSION="4.17.21",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){An[e].placeholder=An})),st(["drop","take"],(function(e,t){kn.prototype[e]=function(n){n=void 0===n?1:an(ia(n),0);var r=this.__filtered__&&!t?new kn(this):this.clone();return r.__filtered__?r.__takeCount__=cn(n,r.__takeCount__):r.__views__.push({size:cn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Qi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");kn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");kn.prototype[e]=function(){return this.__filtered__?new kn(this):this[n](1)}})),kn.prototype.compact=function(){return this.filter(Ka)},kn.prototype.find=function(e){return this.filter(e).head()},kn.prototype.findLast=function(e){return this.reverse().find(e)},kn.prototype.invokeMap=Vr((function(e,t){return"function"==typeof e?new kn(this):this.map((function(n){return _r(n,e,t)}))})),kn.prototype.reject=function(e){return this.filter(Ps(Qi(e)))},kn.prototype.slice=function(e,t){e=ia(e);var n=this;return n.__filtered__&&(e>0||t<0)?new kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ia(t))<0?n.dropRight(-t):n.take(t-e)),n)},kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},kn.prototype.toArray=function(){return this.take(4294967295)},ur(kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=An[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(An.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,a=t instanceof kn,c=s[0],u=a||Ds(t),l=function(e){var t=i.apply(An,ht([e],s));return r&&p?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(a=u=!1);var p=this.__chain__,d=!!this.__actions__.length,h=o&&!p,f=a&&!d;if(!o&&u){t=f?t:new kn(this);var v=e.apply(t,s);return v.__actions__.push({func:rs,args:[l],thisArg:void 0}),new Nn(v,p)}return h&&f?e.apply(this,s):(v=this.thru(l),h?r?v.value()[0]:v.value():v)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=me[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ds(i)?i:[],e)}return this[n]((function(n){return t.apply(Ds(n)?n:[],e)}))}})),ur(kn.prototype,(function(e,t){var n=An[t];if(n){var r=n.name+"";we.call(bn,r)||(bn[r]=[]),bn[r].push({name:t,func:n})}})),bn[Ai(void 0,2).name]=[{name:"wrapper",func:void 0}],kn.prototype.clone=function(){var e=new kn(this.__wrapped__);return e.__actions__=mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mi(this.__views__),e},kn.prototype.reverse=function(){if(this.__filtered__){var e=new kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ds(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=cn(t,e+s);break;case"takeRight":e=an(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,p=l.length,d=0,h=cn(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return ri(e,this.__actions__);var f=[];e:for(;c--&&d<h;){for(var v=-1,y=e[u+=t];++v<p;){var g=l[v],m=g.iteratee,_=g.type,b=m(y);if(2==_)y=b;else if(!b){if(1==_)continue e;break e}}f[d++]=y}return f},An.prototype.at=is,An.prototype.chain=function(){return ns(this)},An.prototype.commit=function(){return new Nn(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=na(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(e){for(var t,n=this;n instanceof Rn;){var r=Ao(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},An.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof kn){var t=e;return this.__actions__.length&&(t=new kn(this)),(t=t.reverse()).__actions__.push({func:rs,args:[Go],thisArg:void 0}),new Nn(t,this.__chain__)}return this.thru(Go)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,Qe&&(An.prototype[Qe]=function(){return this}),An}();qe._=Yt,void 0===(r=function(){return Yt}.call(t,n,t,e))||(e.exports=r)}).call(this)}).call(this,n(199)(e))},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(56),i=new(n(55).a)(r.a)},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";const r=n(38).fromPromise,{makeDir:i,makeDirSync:o}=n(234),s=r(i);e.exports={mkdirs:s,mkdirsSync:o,mkdirp:s,mkdirpSync:o,ensureDir:s,ensureDirSync:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchToDefaultLS=t.Python27Support=t.OutdatedDebugger=t.Testing=t.DebugConfigStrings=t.Products=t.ExtensionSurveyBanner=t.Installer=t.Linters=t.Logging=t.OutputChannelNames=t.ExtensionChannels=t.InterpreterQuickPickList=t.Interpreters=t.Experiments=t.Http=t.LanguageService=t.TensorBoard=t.Pylance=t.AttachProcess=t.CommonSurvey=t.Common=t.Diagnostics=void 0;const r=n(118),i=n(301);function o(e,t){return()=>function(e,t){i.shouldLoadUsingNodeFS()&&i.loadLocalizedStringsUsingNodeFS(new r.FileSystem);return i.getLocalizedString(e,t)}(e,t)}!function(e){e.warnSourceMaps=o("diagnostics.warnSourceMaps","Source map support is enabled in the Python Extension, this will adversely impact performance of the extension."),e.disableSourceMaps=o("diagnostics.disableSourceMaps","Disable Source Map Support"),e.warnBeforeEnablingSourceMaps=o("diagnostics.warnBeforeEnablingSourceMaps","Enabling source map support in the Python Extension will adversely impact performance of the extension."),e.enableSourceMapsAndReloadVSC=o("diagnostics.enableSourceMapsAndReloadVSC","Enable and reload Window."),e.lsNotSupported=o("diagnostics.lsNotSupported","Your operating system does not meet the minimum requirements of the Python Language Server. Reverting to the alternative autocompletion provider, Jedi."),e.upgradeCodeRunner=o("diagnostics.upgradeCodeRunner","Please update the Code Runner extension for it to be compatible with the Python extension."),e.removedPythonPathFromSettings=o("diagnostics.removedPythonPathFromSettings",'The "python.pythonPath" setting in your settings.json is no longer used by the Python extension. If you want, you can use a new setting called "python.defaultInterpreterPath" instead. Keep in mind that you need to change the value of this setting manually as the Python extension doesnt modify it when you change interpreters. [Learn more](https://aka.ms/AA7jfor).'),e.invalidPythonPathInDebuggerSettings=o("diagnostics.invalidPythonPathInDebuggerSettings",'You need to select a Python interpreter before you start debugging.\n\nTip: click on "Select Python Interpreter" in the status bar.'),e.invalidPythonPathInDebuggerLaunch=o("diagnostics.invalidPythonPathInDebuggerLaunch","The Python path in your debug configuration is invalid."),e.invalidDebuggerTypeDiagnostic=o("diagnostics.invalidDebuggerTypeDiagnostic",'Your launch.json file needs to be updated to change the "pythonExperimental" debug configurations to use the "python" debugger type, otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?'),e.consoleTypeDiagnostic=o("diagnostics.consoleTypeDiagnostic",'Your launch.json file needs to be updated to change the console type string from "none" to "internalConsole", otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?'),e.justMyCodeDiagnostic=o("diagnostics.justMyCodeDiagnostic",'Configuration "debugStdLib" in launch.json is no longer supported. It\'s recommended to replace it with "justMyCode", which is the exact opposite of using "debugStdLib". Would you like to automatically update your launch.json file to do that?'),e.yesUpdateLaunch=o("diagnostics.yesUpdateLaunch","Yes, update launch.json"),e.invalidTestSettings=o("diagnostics.invalidTestSettings",'Your settings needs to be updated to change the setting "python.unitTest." to "python.testing.", otherwise testing Python code using the extension may not work. Would you like to automatically update your settings now?'),e.updateSettings=o("diagnostics.updateSettings","Yes, update settings"),e.checkIsort5UpgradeGuide=o("diagnostics.checkIsort5UpgradeGuide","We found outdated configuration for sorting imports in this workspace. Check the [isort upgrade guide](https://aka.ms/AA9j5x4) to update your settings."),e.pylanceDefaultMessage=o("diagnostics.pylanceDefaultMessage","The Python extension now includes Pylance to improve completions, code navigation, overall performance and much more! You can learn more about the update and learn how to change your language server [here](https://aka.ms/new-python-bundle).\n\nRead Pylances license [here](https://marketplace.visualstudio.com/items/ms-python.vscode-pylance/license).")}(t.Diagnostics||(t.Diagnostics={})),function(e){e.bannerLabelYes=o("Common.bannerLabelYes","Yes"),e.bannerLabelNo=o("Common.bannerLabelNo","No"),e.yesPlease=o("Common.yesPlease","Yes, please"),e.canceled=o("Common.canceled","Canceled"),e.cancel=o("Common.cancel","Cancel"),e.ok=o("Common.ok","Ok"),e.gotIt=o("Common.gotIt","Got it!"),e.install=o("Common.install","Install"),e.loadingExtension=o("Common.loadingPythonExtension","Python extension loading..."),e.openOutputPanel=o("Common.openOutputPanel","Show output"),e.noIWillDoItLater=o("Common.noIWillDoItLater","No, I will do it later"),e.notNow=o("Common.notNow","Not now"),e.doNotShowAgain=o("Common.doNotShowAgain","Do not show again"),e.reload=o("Common.reload","Reload"),e.moreInfo=o("Common.moreInfo","More Info"),e.learnMore=o("Common.learnMore","Learn more"),e.and=o("Common.and","and"),e.reportThisIssue=o("Common.reportThisIssue","Report this issue"),e.recommended=o("Common.recommended","Recommended")}(t.Common||(t.Common={})),function(e){e.remindMeLaterLabel=o("CommonSurvey.remindMeLaterLabel","Remind me later"),e.yesLabel=o("CommonSurvey.yesLabel","Yes, take survey now"),e.noLabel=o("CommonSurvey.noLabel","No, thanks")}(t.CommonSurvey||(t.CommonSurvey={})),function(e){e.unsupportedOS=o("AttachProcess.unsupportedOS","Operating system '{0}' not supported."),e.attachTitle=o("AttachProcess.attachTitle","Attach to process"),e.selectProcessPlaceholder=o("AttachProcess.selectProcessPlaceholder","Select the process to attach to"),e.noProcessSelected=o("AttachProcess.noProcessSelected","No process selected"),e.refreshList=o("AttachProcess.refreshList","Refresh process list")}(t.AttachProcess||(t.AttachProcess={})),function(e){e.remindMeLater=o("Pylance.remindMeLater","Remind me later"),e.pylanceNotInstalledMessage=o("Pylance.pylanceNotInstalledMessage","Pylance extension is not installed."),e.pylanceInstalledReloadPromptMessage=o("Pylance.pylanceInstalledReloadPromptMessage","Pylance extension is now installed. Reload window to activate?"),e.pylanceRevertToJediPrompt=o("Pylance.pylanceRevertToJediPrompt",'The Pylance extension is not installed but the python.languageServer value is set to "Pylance". Would you like to install the Pylance extension to use Pylance, or revert back to Jedi?'),e.pylanceInstallPylance=o("Pylance.pylanceInstallPylance","Install Pylance"),e.pylanceRevertToJedi=o("Pylance.pylanceRevertToJedi","Revert to Jedi")}(t.Pylance||(t.Pylance={})),function(e){e.enterRemoteUrl=o("TensorBoard.enterRemoteUrl","Enter remote URL"),e.enterRemoteUrlDetail=o("TensorBoard.enterRemoteUrlDetail","Enter a URL pointing to a remote directory containing your TensorBoard log files"),e.useCurrentWorkingDirectoryDetail=o("TensorBoard.useCurrentWorkingDirectoryDetail","TensorBoard will search for tfevent files in all subdirectories of the current working directory"),e.useCurrentWorkingDirectory=o("TensorBoard.useCurrentWorkingDirectory","Use current working directory"),e.currentDirectory=o("TensorBoard.currentDirectory","Current: {0}"),e.logDirectoryPrompt=o("TensorBoard.logDirectoryPrompt","Select a log directory to start TensorBoard with"),e.progressMessage=o("TensorBoard.progressMessage","Starting TensorBoard session..."),e.failedToStartSessionError=o("TensorBoard.failedToStartSessionError","We failed to start a TensorBoard session due to the following error: {0}"),e.nativeTensorBoardPrompt=o("TensorBoard.nativeTensorBoardPrompt",'VS Code now has integrated TensorBoard support. Would you like to launch TensorBoard?  (Tip: Launch TensorBoard anytime by opening the command palette and searching for "Launch TensorBoard".)'),e.selectAFolder=o("TensorBoard.selectAFolder","Select a folder"),e.selectAFolderDetail=o("TensorBoard.selectAFolderDetail","Select a log directory containing tfevent files"),e.selectAnotherFolder=o("TensorBoard.selectAnotherFolder","Select another folder"),e.selectAnotherFolderDetail=o("TensorBoard.selectAnotherFolderDetail","Use the file explorer to select another folder"),e.installPrompt=o("TensorBoard.installPrompt","The package TensorBoard is required to launch a TensorBoard session. Would you like to install it?"),e.installTensorBoardAndProfilerPluginPrompt=o("TensorBoard.installTensorBoardAndProfilerPluginPrompt","TensorBoard >= 2.4.1 and the PyTorch Profiler TensorBoard plugin >= 0.2.0 are required. Would you like to install these packages?"),e.installProfilerPluginPrompt=o("TensorBoard.installProfilerPluginPrompt","We recommend installing version >= 0.2.0 of the PyTorch Profiler TensorBoard plugin. Would you like to install the package?"),e.upgradePrompt=o("TensorBoard.upgradePrompt","Integrated TensorBoard support is only available for TensorBoard >= 2.4.1. Would you like to upgrade your copy of TensorBoard?"),e.launchNativeTensorBoardSessionCodeLens=o("TensorBoard.launchNativeTensorBoardSessionCodeLens"," Launch TensorBoard Session"),e.launchNativeTensorBoardSessionCodeAction=o("TensorBoard.launchNativeTensorBoardSessionCodeAction","Launch TensorBoard session"),e.missingSourceFile=o("TensorBoard.missingSourceFile","We could not locate the requested source file on disk. Please manually specify the file."),e.selectMissingSourceFile=o("TensorBoard.selectMissingSourceFile","Choose File"),e.selectMissingSourceFileDescription=o("TensorBoard.selectMissingSourceFileDescription","The source file's contents may not match the original contents in the trace.")}(t.TensorBoard||(t.TensorBoard={})),function(e){e.startingPylance=o("LanguageService.startingPylance","Starting Pylance language server."),e.startingJedi=o("LanguageService.startingJedi","Starting Jedi language server."),e.startingNone=o("LanguageService.startingNone","Editor support is inactive since language server is set to None."),e.reloadAfterLanguageServerChange=o("LanguageService.reloadAfterLanguageServerChange","Please reload the window switching between language servers."),e.lsFailedToStart=o("LanguageService.lsFailedToStart","We encountered an issue starting the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.lsFailedToDownload=o("LanguageService.lsFailedToDownload","We encountered an issue downloading the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.lsFailedToExtract=o("LanguageService.lsFailedToExtract","We encountered an issue extracting the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.downloadFailedOutputMessage=o("LanguageService.downloadFailedOutputMessage","Language server download failed."),e.extractionFailedOutputMessage=o("LanguageService.extractionFailedOutputMessage","Language server extraction failed."),e.extractionCompletedOutputMessage=o("LanguageService.extractionCompletedOutputMessage","Language server download complete."),e.extractionDoneOutputMessage=o("LanguageService.extractionDoneOutputMessage","done."),e.reloadVSCodeIfSeachPathHasChanged=o("LanguageService.reloadVSCodeIfSeachPathHasChanged","Search paths have changed for this Python interpreter. Please reload the extension to ensure that the IntelliSense works correctly.")}(t.LanguageService||(t.LanguageService={})),function(e){e.downloadingFile=o("downloading.file","Downloading {0}..."),e.downloadingFileProgress=o("downloading.file.progress","{0}{1} of {2} KB ({3}%)")}(t.Http||(t.Http={})),function(e){e.inGroup=o("Experiments.inGroup","Experiment '{0}' is active"),e.optedOutOf=o("Experiments.optedOutOf","Experiment '{0}' is inactive")}(t.Experiments||(t.Experiments={})),function(e){e.discovering=o("Interpreters.DiscoveringInterpreters","Discovering Python Interpreters"),e.refreshing=o("Interpreters.RefreshingInterpreters","Refreshing Python Interpreters"),e.condaInheritEnvMessage=o("Interpreters.condaInheritEnvMessage",'We noticed you\'re using a conda environment. If you are experiencing issues with this environment in the integrated terminal, we recommend that you let the Python extension change "terminal.integrated.inheritEnv" to false in your user settings.'),e.environmentPromptMessage=o("Interpreters.environmentPromptMessage","We noticed a new virtual environment has been created. Do you want to select it for the workspace folder?"),e.entireWorkspace=o("Interpreters.entireWorkspace","Select at workspace level"),e.selectInterpreterTip=o("Interpreters.selectInterpreterTip","Tip: you can change the Python interpreter used by the Python extension by clicking on the Python version in the status bar"),e.pythonInterpreterPath=o("Interpreters.pythonInterpreterPath","Python interpreter path: {0}")}(t.Interpreters||(t.Interpreters={})),function(e){e.quickPickListPlaceholder=o("InterpreterQuickPickList.quickPickListPlaceholder","Current: {0}"),e.enterPath={label:o("InterpreterQuickPickList.enterPath.label","Enter interpreter path..."),placeholder:o("InterpreterQuickPickList.enterPath.placeholder","Enter path to a Python interpreter.")},e.defaultInterpreterPath={label:o("InterpreterQuickPickList.defaultInterpreterPath.label","Use Python from `python.defaultInterpreterPath` setting")},e.browsePath={label:o("InterpreterQuickPickList.browsePath.label","Find..."),detail:o("InterpreterQuickPickList.browsePath.detail","Browse your file system to find a Python interpreter."),openButtonLabel:o("python.command.python.setInterpreter.title","Select Interpreter"),title:o("InterpreterQuickPickList.browsePath.title","Select Python interpreter")},e.refreshInterpreterList=o("InterpreterQuickPickList.refreshInterpreterList","Refresh Interpreter list")}(t.InterpreterQuickPickList||(t.InterpreterQuickPickList={})),function(e){e.yesWeekly=o("ExtensionChannels.yesWeekly","Yes, weekly"),e.yesDaily=o("ExtensionChannels.yesDaily","Yes, daily"),e.promptMessage=o("ExtensionChannels.promptMessage","We noticed you are using Visual Studio Code Insiders. Would you like to use the Insiders build of the Python extension?"),e.reloadToUseInsidersMessage=o("ExtensionChannels.reloadToUseInsidersMessage","Please reload Visual Studio Code to use the insiders build of the Python extension."),e.downloadCompletedOutputMessage=o("ExtensionChannels.downloadCompletedOutputMessage","Insiders build download complete."),e.startingDownloadOutputMessage=o("ExtensionChannels.startingDownloadOutputMessage","Starting download for Insiders build."),e.downloadingInsidersMessage=o("ExtensionChannels.downloadingInsidersMessage","Downloading Insiders Extension... "),e.installingInsidersMessage=o("ExtensionChannels.installingInsidersMessage","Installing Insiders build of extension... "),e.installingStableMessage=o("ExtensionChannels.installingStableMessage","Installing Stable build of extension... "),e.installationCompleteMessage=o("ExtensionChannels.installationCompleteMessage","complete.")}(t.ExtensionChannels||(t.ExtensionChannels={})),function(e){e.languageServer=o("OutputChannelNames.languageServer","Python Language Server"),e.python=o("OutputChannelNames.python","Python"),e.pythonTest=o("OutputChannelNames.pythonTest","Python Test Log")}(t.OutputChannelNames||(t.OutputChannelNames={})),function(e){e.currentWorkingDirectory=o("Logging.CurrentWorkingDirectory","cwd:")}(t.Logging||(t.Logging={})),function(e){e.replaceWithSelectedLinter=o("Linter.replaceWithSelectedLinter","Multiple linters are enabled in settings. Replace with '{0}'?"),e.selectLinter=o("Linter.selectLinter","Select Linter")}(t.Linters||(t.Linters={})),function(e){e.noCondaOrPipInstaller=o("Installer.noCondaOrPipInstaller","There is no Conda or Pip installer available in the selected environment."),e.noPipInstaller=o("Installer.noPipInstaller","There is no Pip installer available in the selected environment."),e.searchForHelp=o("Installer.searchForHelp","Search for help"),e.couldNotInstallLibrary=o("Installer.couldNotInstallLibrary","Could not install {0}. If pip is not available, please use the package manager of your choice to manually install this library into your Python environment."),e.dataScienceInstallPrompt=o("Installer.dataScienceInstallPrompt","Data Science library {0} is not installed. Install?")}(t.Installer||(t.Installer={})),function(e){e.bannerMessage=o("ExtensionSurveyBanner.bannerMessage","Can you please take 2 minutes to tell us how the Python extension is working for you?"),e.bannerLabelYes=o("ExtensionSurveyBanner.bannerLabelYes","Yes, take survey now"),e.bannerLabelNo=o("ExtensionSurveyBanner.bannerLabelNo","No, thanks"),e.maybeLater=o("ExtensionSurveyBanner.maybeLater","Maybe later")}(t.ExtensionSurveyBanner||(t.ExtensionSurveyBanner={})),function(e){e.installingModule=o("products.installingModule","Installing {0}"),e.formatterNotInstalled=o("products.formatterNotInstalled","Formatter {0} is not installed. Install?"),e.useFormatter=o("products.useFormatter","Use {0}"),e.invalidFormatterPath=o("products.invalidFormatterPath","Path to the {0} formatter is invalid ({1})")}(t.Products||(t.Products={})),function(e){let t,n,r,i,s,a,c,u;e.selectConfiguration={title:o("debug.selectConfigurationTitle"),placeholder:o("debug.selectConfigurationPlaceholder")},e.launchJsonCompletions={label:o("debug.launchJsonConfigurationsCompletionLabel"),description:o("debug.launchJsonConfigurationsCompletionDescription")},function(e){e.snippet={name:o("python.snippet.launch.standard.label")},e.selectConfiguration={label:o("debug.debugFileConfigurationLabel"),description:o("debug.debugFileConfigurationDescription")}}(t=e.file||(e.file={})),function(e){e.snippet={name:o("python.snippet.launch.module.label"),default:o("python.snippet.launch.module.default")},e.selectConfiguration={label:o("debug.debugModuleConfigurationLabel"),description:o("debug.debugModuleConfigurationDescription")},e.enterModule={title:o("debug.moduleEnterModuleTitle"),prompt:o("debug.moduleEnterModulePrompt"),default:o("debug.moduleEnterModuleDefault"),invalid:o("debug.moduleEnterModuleInvalidNameError")}}(n=e.module||(e.module={})),function(e){e.snippet={name:o("python.snippet.launch.attach.label")},e.selectConfiguration={label:o("debug.remoteAttachConfigurationLabel"),description:o("debug.remoteAttachConfigurationDescription")},e.enterRemoteHost={title:o("debug.attachRemoteHostTitle"),prompt:o("debug.attachRemoteHostPrompt"),invalid:o("debug.attachRemoteHostValidationError")},e.enterRemotePort={title:o("debug.attachRemotePortTitle"),prompt:o("debug.attachRemotePortPrompt"),invalid:o("debug.attachRemotePortValidationError")}}(r=e.attach||(e.attach={})),function(e){e.snippet={name:o("python.snippet.launch.attachpid.label")},e.selectConfiguration={label:o("debug.attachPidConfigurationLabel"),description:o("debug.attachPidConfigurationDescription")}}(i=e.attachPid||(e.attachPid={})),function(e){e.snippet={name:o("python.snippet.launch.django.label")},e.selectConfiguration={label:o("debug.debugDjangoConfigurationLabel"),description:o("debug.debugDjangoConfigurationDescription")},e.enterManagePyPath={title:o("debug.djangoEnterManagePyPathTitle"),prompt:o("debug.djangoEnterManagePyPathPrompt"),invalid:o("debug.djangoEnterManagePyPathInvalidFilePathError")}}(s=e.django||(e.django={})),function(e){e.snippet={name:o("python.snippet.launch.fastapi.label")},e.selectConfiguration={label:o("debug.debugFastAPIConfigurationLabel"),description:o("debug.debugFastAPIConfigurationDescription")},e.enterAppPathOrNamePath={title:o("debug.fastapiEnterAppPathOrNamePathTitle"),prompt:o("debug.fastapiEnterAppPathOrNamePathPrompt"),invalid:o("debug.fastapiEnterAppPathOrNamePathInvalidNameError")}}(a=e.fastapi||(e.fastapi={})),function(e){e.snippet={name:o("python.snippet.launch.flask.label")},e.selectConfiguration={label:o("debug.debugFlaskConfigurationLabel"),description:o("debug.debugFlaskConfigurationDescription")},e.enterAppPathOrNamePath={title:o("debug.flaskEnterAppPathOrNamePathTitle"),prompt:o("debug.flaskEnterAppPathOrNamePathPrompt"),invalid:o("debug.flaskEnterAppPathOrNamePathInvalidNameError")}}(c=e.flask||(e.flask={})),function(e){e.snippet={name:o("python.snippet.launch.pyramid.label")},e.selectConfiguration={label:o("debug.debugPyramidConfigurationLabel"),description:o("debug.debugPyramidConfigurationDescription")},e.enterDevelopmentIniPath={title:o("debug.pyramidEnterDevelopmentIniPathTitle"),prompt:o("debug.pyramidEnterDevelopmentIniPathPrompt"),invalid:o("debug.pyramidEnterDevelopmentIniPathInvalidFilePathError")}}(u=e.pyramid||(e.pyramid={}))}(t.DebugConfigStrings||(t.DebugConfigStrings={})),function(e){e.configureTests=o("Testing.configureTests","Configure Test Framework"),e.testNotConfigured=o("Testing.testNotConfigured","No test framework configured.")}(t.Testing||(t.Testing={})),function(e){e.outdatedDebuggerMessage=o("OutdatedDebugger.updateDebuggerMessage","We noticed you are attaching to ptvsd (Python debugger), which was deprecated on May 1st, 2020. Please switch to [debugpy](https://aka.ms/migrateToDebugpy).")}(t.OutdatedDebugger||(t.OutdatedDebugger={})),function(e){e.jediMessage=o("Python27Support.jediMessage","IntelliSense with Jedi for Python 2.7 is no longer supported. [Learn more](https://aka.ms/python-27-support).")}(t.Python27Support||(t.Python27Support={})),function(e){e.bannerMessage=o("SwitchToDefaultLS.bannerMessage","The Microsoft Python Language Server has reached end of life. Your language server has been set to the default for Python in VS Code, Pylance.\n\nIf youd like to change your language server, you can learn about how to do so [here](https://devblogs.microsoft.com/python/python-in-visual-studio-code-may-2021-release/#configuring-your-language-server).\n\nRead Pylances license [here](https://marketplace.visualstudio.com/items/ms-python.vscode-pylance/license).")}(t.SwitchToDefaultLS||(t.SwitchToDefaultLS={})),i.loadLocalizedStringsUsingNodeFS(new r.FileSystem)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareSemVerLikeVersions=t.toSemverLikeVersion=t.areSimilarVersions=t.areIdenticalVersion=t.getShortVersionString=t.getVersionDisplayString=t.isVersionEmpty=t.getEmptyVersion=t.parseBasicVersion=t.parseRelease=t.parseVersion=t.getPythonVersionFromPath=void 0;const r=n(47),i=n(0),o=n(201),s=n(23),a=n(4);function c(e){const[t,n]=l(e);if(-1===t.micro)return t;const[r]=u(n);return t.release=r,t}function u(e){let t,n,r,i,o,a,c,u=e.match(/^(?:-?final|\.final(?:\.0)?)(.*)$/);if(u)[,t]=u,o="final",a="0";else for(const o of[/^(?:(a)|(b)|(rc))([1-9]\d*)(.*)$/,/^-(?:(?:(alpha)|(beta)|(candidate))([1-9]\d*))(.*)$/,/^\.(?:(?:(alpha)|(beta)|(candidate))\.([1-9]\d*))(.*)$/])if(u=e.match(o),u){[,n,r,i,a,t]=u;break}if(o)c=s.PythonReleaseLevel.Final;else if(i)c=s.PythonReleaseLevel.Candidate;else if(r)c=s.PythonReleaseLevel.Beta;else{if(!n)return[void 0,e];c=s.PythonReleaseLevel.Alpha}return[{level:c,serial:parseInt(a,10)},t]}function l(e){const t=o.parseBasicVersionInfo("ignored-"+e);if(!t){if(""===e)return[p(),""];throw Error("invalid version "+e)}const{version:n,after:r}=t;if(n.release=void 0,-1===n.minor&&n.major>9){const e=10**(n.major.toString().length-1);n.minor=n.major%e,n.major=Math.floor(n.major/e)}return[n,r]}function p(){return r.cloneDeep(o.EMPTY_VERSION)}function d(e){return o.isVersionInfoEmpty(e)}function h(e){let t=o.getVersionString(e);if(void 0===e.release)return t;if(e.release.level===s.PythonReleaseLevel.Final)return t;if(e.release.level===s.PythonReleaseLevel.Candidate)t=`${t}rc${e.release.serial}`;else if(e.release.level===s.PythonReleaseLevel.Beta)t=`${t}b${e.release.serial}`;else{if(e.release.level!==s.PythonReleaseLevel.Alpha)throw Error("unsupported release level "+e.release.level);t=`${t}a${e.release.serial}`}return t}function f(e,t){return void 0===e.release?void 0===t.release?[0,""]:[1,"level"]:void 0===t.release?[-1,"level"]:e.release.level<t.release.level?[1,"level"]:e.release.level>t.release.level?[-1,"level"]:e.release.level===s.PythonReleaseLevel.Final?[0,""]:e.release.serial<t.release.serial?[1,"serial"]:e.release.serial>t.release.serial?[-1,"serial"]:[0,""]}t.getPythonVersionFromPath=function(e){let t=s.UNKNOWN_PYTHON_VERSION;try{t=c(i.basename(e))}catch(t){a.traceError("Failed to parse version from path: "+e,t)}return t},t.parseVersion=c,t.parseRelease=u,t.parseBasicVersion=l,t.getEmptyVersion=p,t.isVersionEmpty=d,t.getVersionDisplayString=function(e){return d(e)?"":-1!==e.micro?h(e):h(e)+".x"},t.getShortVersionString=h,t.areIdenticalVersion=function(e,t){return o.areIdenticalVersion(e,t,f)},t.areSimilarVersions=function(e,t){return!!o.areSimilarVersions(e,t,f)&&(2===e.major||e.minor>-1&&t.minor>-1)},t.toSemverLikeVersion=function(e){const t=o.getVersionString(e);let n=[];return e.release&&(n=e.release.serial<0?[""+e.release.level]:[""+e.release.level,""+e.release.serial]),{raw:t,major:e.major,minor:e.minor,patch:e.micro,build:[],prerelease:n}},t.compareSemVerLikeVersions=function(e,t){return e.major===t.major?e.minor===t.minor?e.patch===t.patch?0:e.patch>t.patch?1:-1:e.minor>t.minor?1:-1:e.major>t.major?1:-1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),i=n(97),o=n(102);function s(e,t){return t?Object(o.a)(e,t):new r.a(Object(i.a)(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),i=n(75),o=function(e){function t(n,r){void 0===r&&(r=i.a.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.b(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.a)},function(e,t,n){"use strict";var r=n(2),i=function(e){function t(t,n){return e.call(this)||this}return r.b(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(10).a);n.d(t,"a",(function(){return o}));var o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.b(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0;t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(97),i=n(94),o=n(95),s=n(145),a=n(98),c=n(99),u=n(67),l=n(34),p=n(36),d=function(e){if(e&&"function"==typeof e[p.a])return Object(s.a)(e);if(Object(a.a)(e))return Object(r.a)(e);if(Object(c.a)(e))return Object(i.a)(e);if(e&&"function"==typeof e[l.a])return Object(o.a)(e);var t=Object(u.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15);function i(e){return!Object(r.a)(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagProperty=t.tagParameter=t.decorate=void 0;var r=n(39),i=n(25);function o(e,t,n,i,o){var s={},a="number"==typeof o,c=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var u=s[c];if(Array.isArray(u))for(var l=0,p=u;l<p.length;l++){var d=p[l];if(d.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+d.key.toString())}else u=[];u.push(i),s[c]=u,Reflect.defineMetadata(e,s,t)}function s(e,t){Reflect.decorate(e,t)}function a(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?s([a(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):s([e],t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0;t.StopWatch=class{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}},function(e,t){var n;t=e.exports=q,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=0,a=s++;o[a]="0|[1-9]\\d*";var c=s++;o[c]="[0-9]+";var u=s++;o[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var l=s++;o[l]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var p=s++;o[p]="("+o[c]+")\\.("+o[c]+")\\.("+o[c]+")";var d=s++;o[d]="(?:"+o[a]+"|"+o[u]+")";var h=s++;o[h]="(?:"+o[c]+"|"+o[u]+")";var f=s++;o[f]="(?:-("+o[d]+"(?:\\."+o[d]+")*))";var v=s++;o[v]="(?:-?("+o[h]+"(?:\\."+o[h]+")*))";var y=s++;o[y]="[0-9A-Za-z-]+";var g=s++;o[g]="(?:\\+("+o[y]+"(?:\\."+o[y]+")*))";var m=s++,_="v?"+o[l]+o[f]+"?"+o[g]+"?";o[m]="^"+_+"$";var b="[v=\\s]*"+o[p]+o[v]+"?"+o[g]+"?",E=s++;o[E]="^"+b+"$";var S=s++;o[S]="((?:<|>)?=?)";var w=s++;o[w]=o[c]+"|x|X|\\*";var T=s++;o[T]=o[a]+"|x|X|\\*";var P=s++;o[P]="[v=\\s]*("+o[T]+")(?:\\.("+o[T]+")(?:\\.("+o[T]+")(?:"+o[f]+")?"+o[g]+"?)?)?";var I=s++;o[I]="[v=\\s]*("+o[w]+")(?:\\.("+o[w]+")(?:\\.("+o[w]+")(?:"+o[v]+")?"+o[g]+"?)?)?";var C=s++;o[C]="^"+o[S]+"\\s*"+o[P]+"$";var O=s++;o[O]="^"+o[S]+"\\s*"+o[I]+"$";var A=s++;o[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var x=s++;o[x]="(?:~>?)";var R=s++;o[R]="(\\s*)"+o[x]+"\\s+",i[R]=new RegExp(o[R],"g");var N=s++;o[N]="^"+o[x]+o[P]+"$";var k=s++;o[k]="^"+o[x]+o[I]+"$";var D=s++;o[D]="(?:\\^)";var j=s++;o[j]="(\\s*)"+o[D]+"\\s+",i[j]=new RegExp(o[j],"g");var M=s++;o[M]="^"+o[D]+o[P]+"$";var L=s++;o[L]="^"+o[D]+o[I]+"$";var F=s++;o[F]="^"+o[S]+"\\s*("+b+")$|^$";var V=s++;o[V]="^"+o[S]+"\\s*("+_+")$|^$";var U=s++;o[U]="(\\s*)"+o[S]+"\\s*("+b+"|"+o[P]+")",i[U]=new RegExp(o[U],"g");var B=s++;o[B]="^\\s*("+o[P]+")\\s+-\\s+("+o[P]+")\\s*$";var H=s++;o[H]="^\\s*("+o[I]+")\\s+-\\s+("+o[I]+")\\s*$";var W=s++;o[W]="(<|>)?=?\\s*\\*";for(var G=0;G<35;G++)n(G,o[G]),i[G]||(i[G]=new RegExp(o[G]));function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof q)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[E]:i[m]).test(e))return null;try{return new q(e,t)}catch(e){return null}}function q(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof q){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof q))return new q(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[E]:i[m]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=$,t.valid=function(e,t){var n=$(e,t);return n?n.version:null},t.clean=function(e,t){var n=$(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=q,q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},q.prototype.toString=function(){return this.version},q.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof q||(e=new q(e,this.options)),this.compareMain(e)||this.comparePre(e)},q.prototype.compareMain=function(e){return e instanceof q||(e=new q(e,this.options)),z(this.major,e.major)||z(this.minor,e.minor)||z(this.patch,e.patch)},q.prototype.comparePre=function(e){if(e instanceof q||(e=new q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return z(r,i)}while(++t)},q.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new q(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var n=$(e),r=$(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=z;var K=/^[0-9]+$/;function z(e,t){var n=K.test(e),r=K.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Y(e,t,n){return new q(e,n).compare(new q(t,n))}function X(e,t,n){return Y(e,t,n)>0}function Q(e,t,n){return Y(e,t,n)<0}function J(e,t,n){return 0===Y(e,t,n)}function Z(e,t,n){return 0!==Y(e,t,n)}function ee(e,t,n){return Y(e,t,n)>=0}function te(e,t,n){return Y(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return J(e,n,r);case"!=":return Z(e,n,r);case">":return X(e,n,r);case">=":return ee(e,n,r);case"<":return Q(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return z(t,e)},t.major=function(e,t){return new q(e,t).major},t.minor=function(e,t){return new q(e,t).minor},t.patch=function(e,t){return new q(e,t).patch},t.compare=Y,t.compareLoose=function(e,t){return Y(e,t,!0)},t.rcompare=function(e,t,n){return Y(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=X,t.lt=Q,t.eq=J,t.neq=Z,t.gte=ee,t.lte=te,t.cmp=ne,t.Comparator=re;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof re)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,i,o,s,a,c,u,l,p,d){return((t=se(n)?"":se(r)?">="+n+".0.0":se(i)?">="+n+"."+r+".0":">="+t)+" "+(a=se(c)?"":se(u)?"<"+(+c+1)+".0.0":se(l)?"<"+c+"."+(+u+1)+".0":p?"<="+c+"."+u+"."+l+"-"+p:"<="+a)).trim()}function ce(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new oe(t,n)}catch(e){return!1}return t.test(e)}function le(e,t,n,r){var i,o,s,a,c;switch(e=new q(e,r),t=new oe(t,r),n){case">":i=X,o=te,s=Q,a=">",c=">=";break;case"<":i=Q,o=ee,s=X,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],p=null,d=null;if(l.forEach((function(e){e.semver===ie&&(e=new re(">=0.0.0")),p=p||e,d=d||e,i(e.semver,p.semver,r)?p=e:s(e.semver,d.semver,r)&&(d=e)})),p.operator===a||p.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?i[F]:i[V],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new q(n[2],this.options.loose):this.semver=ie},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new q(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new oe(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),ue(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?i[H]:i[B];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(i[U],"$1$2$3"),n("comparator trim",e,i[U]),e=(e=(e=e.replace(i[R],"$1~")).replace(i[j],"$1^")).split(/\s+/).join(" ");var o=t?i[F]:i[V],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?i[L]:i[M];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?i[k]:i[N];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?i[O]:i[C];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=se(i),u=c||se(o),l=u||se(s);return"="===r&&l&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[W],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new re(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new q(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new q(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new q(r=e,n)))})),r},t.minVersion=function(e,t){e=new oe(e,t);var n=new q("0.0.0");if(e.test(n))return n;if(n=new q("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new q(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!X(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return le(e,t,"<",n)},t.gtr=function(e,t,n){return le(e,t,">",n)},t.outside=le,t.prerelease=function(e,t){var n=$(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new oe(e,n),t=new oe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof q)return e;if("string"!=typeof e)return null;var t=e.match(i[A]);if(null==t)return null;return $(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";function r(){}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";const r=n(38).fromPromise,i=n(120);e.exports={pathExists:r((function(e){return i.access(e).then(()=>!0).catch(()=>!1)})),pathExistsSync:i.existsSync}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var r=0;t.id=function(){return r++}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Conda=t.getPythonVersionFromConda=t.isCondaEnvironment=t.parseCondaInfo=t.AnacondaCompanyName=void 0;const i=n(44),o=n(0),s=n(9),a=n(19),c=n(23),u=n(53),l=n(135),p=n(26),d=n(86),h=n(17),f=n(4);function v(e){return[o.join(o.dirname(e),"conda-meta"),o.join(o.dirname(o.dirname(e)),"conda-meta")]}t.AnacondaCompanyName="Anaconda, Inc.",t.parseCondaInfo=async function(e,n,r,i){const o=Array.isArray(e.envs)?e.envs:[];e.default_prefix&&e.default_prefix.length>0&&o.push(e.default_prefix);const s=o.map(async e=>{const o=n(e);if(!await r(o))return;const s=await i(o);return s?{...s,path:o,companyDisplayName:t.AnacondaCompanyName,envType:p.EnvironmentType.Conda,envPath:e}:void 0});return Promise.all(s).then(e=>e.filter(e=>null!=e)).then(e=>e.map(e=>e))},t.isCondaEnvironment=async function(e){const t=v(e);for(const e of t)if(await a.pathExists(e))return!0;return!1},t.getPythonVersionFromConda=async function(e){const t=v(e).map(e=>o.join(e,"history")),n=/\:python-(([\d\.a-z]?)+)/;for(const e of t)if(await a.pathExists(e))try{const t=(await a.readFile(e)).splitLines().map(e=>{const t=n.exec(e);return t?t[1]:""}).filter(e=>e.length>0);if(t.length>0){const e=t.length-1;return u.parseVersion(t[e].trim())}}catch(e){return c.UNKNOWN_PYTHON_VERSION}return c.UNKNOWN_PYTHON_VERSION};class y{constructor(e){this.command=e}static async getConda(){return f.traceVerbose("Searching for conda."),(void 0===this.condaPromise||h.isTestExecution())&&(this.condaPromise=y.locate()),this.condaPromise}static async locate(){const e=s.getUserHomeDir(),t=s.getOSType()===s.OSType.Windows?"Scripts\\conda.exe":"bin/conda";for await(const n of async function*(){const n=a.getPythonSetting("condaPath");n&&"conda"!==n&&(yield n),yield"conda",s.getOSType()===s.OSType.Windows&&(yield*async function*(){const e=(await l.getRegistryInterpreters()).filter(e=>e.interpreterPath&&"ContinuumAnalytics"===e.distroOrgName).map(e=>o.join(o.win32.dirname(e.interpreterPath),t));yield*e}()),yield*async function*(){const n=[];if(s.getOSType()===s.OSType.Windows){const t=s.getEnvironmentVariable("PROGRAMDATA")||"C:\\ProgramData";if(n.push(t),e){const t=s.getEnvironmentVariable("LOCALAPPDATA")||o.join(e,"AppData","Local");n.push(e,o.join(t,"Continuum"))}}else n.push("/usr/share","/usr/local/share","/opt"),e&&n.push(e,o.join(e,"opt"));for(const e of n){let n;try{n=await i.readdir(e)}catch(e){n=void 0}void 0!==n&&(yield*n.filter(e=>e.toLowerCase().includes("conda")).map(n=>o.join(e,n,t)))}}(),yield*async function*(){if(!e)return;let n;try{n=await i.readFile(o.join(e,".conda","environments.txt"),"utf8")}catch(e){n=""}yield*n.split(/\r?\n/g).map(e=>e.trim()).filter(e=>""!==e&&!e.startsWith("#")).map(e=>o.join(e,t))}()}()){f.traceVerbose("Probing conda binary: "+n);const e=new y(n);try{return await e.getInfo(),f.traceVerbose("Found conda via filesystem probing: "+n),e}catch(e){f.traceVerbose(e)}}}async getInfo(){return this.getInfoCached(this.command)}async getInfoCached(e){const t=await a.exec(e,["info","--json"],{timeout:5e4});return f.traceVerbose("conda info --json: "+t.stdout),JSON.parse(t.stdout)}async getEnvList(){const e=await this.getInfo(),{envs:t}=e;if(void 0===t)return[];function n(t){if(e.root_prefix&&a.arePathsSame(t,e.root_prefix))return"base";const n=o.dirname(t);if(void 0!==e.envs_dirs)for(const r of e.envs_dirs)if(n===r)return o.basename(t)}return t.map(e=>({prefix:e,name:n(e)}))}}r([d.cache(3e4,!0,1e4)],y.prototype,"getInfoCached",null),r([d.cache(3e4,!0,1e4)],y.prototype,"getEnvList",null),t.Conda=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyPythonExecInfo=t.buildPythonExecInfo=void 0,t.buildPythonExecInfo=function(e,t){if(Array.isArray(e)){const n=e.slice(1);return t&&n.push(...t),{args:n,command:e[0],python:[...e],pythonExecutable:e[e.length-1]}}return{command:e,args:t||[],python:[e],pythonExecutable:e}},t.copyPythonExecInfo=function(e,t){const n={command:e.command,args:[...e.args],python:[...e.python],pythonExecutable:e.pythonExecutable};return t&&n.args.push(...t),void 0===n.pythonExecutable&&(n.pythonExecutable=n.python[n.python.length-1]),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePyenvVersion=t.isPyenvEnvironment=t.isPyenvShimDir=t.getPyenvDir=void 0;const r=n(0),i=n(9),o=n(19);function s(){var e;let t=null!==(e=i.getEnvironmentVariable("PYENV_ROOT"))&&void 0!==e?e:i.getEnvironmentVariable("PYENV");if(!t){const e=i.getUserHomeDir()||"";t=i.getOSType()===i.OSType.Windows?r.join(e,".pyenv","pyenv-win"):r.join(e,".pyenv")}return t}t.getPyenvDir=s,t.isPyenvShimDir=function(e){const t=r.join(s(),"shims");return o.arePathsSame(t,e)||o.arePathsSame(`${t}${r.sep}`,e)},t.isPyenvEnvironment=async function(e){const t=e,n=s();return!!await o.pathExists(n)&&o.isParentPath(t,n)},t.parsePyenvVersion=function(e){const t=function(){function e(e){return{pythonVer:e,distro:void 0,distroVer:void 0}}function t(e){const t=e.split("-");return 3===t.length?{pythonVer:void 0,distroVer:`${t[1]}-${t[2]}`,distro:t[0]}:2===t.length?{pythonVer:void 0,distroVer:t[1],distro:t[0]}:{pythonVer:void 0,distroVer:void 0,distro:e}}const n=new Map;return n.set("activepython",t),n.set("anaconda",t),n.set("graalpython",t),n.set("ironpython",t),n.set("jython",t),n.set("micropython",t),n.set("miniconda",t),n.set("miniforge",t),n.set("pypy",(function(e){const t=e.split("-"),n=t[0].search(/[0-9\.]+/)>0?t[0].substr("pypy".length):void 0;if(2===t.length)return{pythonVer:n,distroVer:t[1],distro:"pypy"};if(3===t.length&&(t[2].startsWith("src")||t[2].startsWith("beta")||t[2].startsWith("alpha")||t[2].startsWith("win64"))){return{pythonVer:n,distroVer:`${t[1].startsWith("v")?t[1].substr(1):t[1]}-${t[2]}`,distro:"pypy"}}return 3===t.length&&"stm"===t[1]?{pythonVer:n,distroVer:t[2],distro:`${t[0]}-${t[1]}`}:4===t.length&&"c"===t[1]?{pythonVer:n,distroVer:t[3],distro:`pypy-${t[1]}-${t[2]}`}:4===t.length&&t[3].startsWith("src")?{pythonVer:n,distroVer:`${t[1]}-${t[2]}-${t[3]}`,distro:"pypy"}:{pythonVer:n,distroVer:void 0,distro:"pypy"}})),n.set("pyston",t),n.set("stackless",t),n.set("3",e),n.set("2",e),n}(),n=Array.from(t.keys()).filter(t=>e.startsWith(t)).map(e=>t.get(e)).filter(e=>void 0!==e);if(n.length>0&&n[0])return n[0](e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposables=void 0;const r=n(4);t.Disposables=class{constructor(...e){this.disposables=[],this.disposables.push(...e)}push(...e){this.disposables.push(...e)}async dispose(){const{disposables:e}=this;this.disposables=[],await async function(e){await Promise.all(e.map(async(e,t)=>{try{await e.dispose()}catch(e){r.traceWarn(`dispose() #${t} failed (${e})`)}}))}(e)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r,i=n(33),o=n(96),s=n(144);r||(r={});var a=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arePathsSame=t.isParentPath=t.normCasePath=t.FileSystemPathUtils=t.Executables=t.FileSystemPaths=void 0;const r=n(0),i=n(80),o=n(9),s=n(110);class a{constructor(e,t){this.isCaseInsensitive=e,this.raw=t}static withDefaults(e){return void 0===e&&(e=o.getOSType()===o.OSType.Windows),new a(e,r)}get sep(){return this.raw.sep}join(...e){return this.raw.join(...e)}dirname(e){return this.raw.dirname(e)}basename(e,t){return this.raw.basename(e,t)}normalize(e){return this.raw.normalize(e)}normCase(e){return e=this.raw.normalize(e),this.isCaseInsensitive?e.toUpperCase():e}}t.FileSystemPaths=a;class c{constructor(e,t){this.delimiter=e,this.osType=t}static withDefaults(){return new c(r.delimiter,o.getOSType())}get envVar(){return i.getSearchPathEnvVarNames(this.osType)[0]}}t.Executables=c;class u{constructor(e,t,n,r){this.home=e,this.paths=t,this.executables=n,this.raw=r}static withDefaults(e){return void 0===e&&(e=a.withDefaults()),new u(s("~"),e,c.withDefaults(),r)}arePathsSame(e,t){return(e=this.paths.normCase(e))===(t=this.paths.normCase(t))}getDisplayName(e,t){return t&&p(e,t)?`.${this.paths.sep}${this.raw.relative(t,e)}`:p(e,this.home)?`~${this.paths.sep}${this.raw.relative(this.home,e)}`:e}}function l(e){return o.getOSType()===o.OSType.Windows?r.normalize(e).toUpperCase():r.normalize(e)}function p(e,t){return t.endsWith(r.sep)||(t+=r.sep),e.endsWith(r.sep)||(e+=r.sep),l(e).startsWith(l(t))}t.FileSystemPathUtils=u,t.normCasePath=l,t.isParentPath=p,t.arePathsSame=function(e,t){return l(e)===l(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidAndExecutable=t.getSearchPathEntries=t.getSearchPathEnvVarNames=void 0;const r=n(16),i=n(0),o=n(9);function s(e=o.getOSType()){return e===o.OSType.Windows?["Path","PATH"]:["PATH"]}t.getSearchPathEnvVarNames=s,t.getSearchPathEntries=function(){const e=s();for(const t of e){const e=o.getEnvironmentVariable(t);if(void 0!==e)return e.split(i.delimiter).map(e=>e.trim()).filter(e=>e.length>0)}return[]},t.isValidAndExecutable=async function(e){try{await r.promises.access(e,r.constants.X_OK)}catch(e){return!1}if(o.getOSType()!==o.OSType.Windows)return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSelectionRule=t.IInterpreterAutoSelectionService=t.IInterpreterAutoSelectionProxyService=void 0,t.IInterpreterAutoSelectionProxyService=Symbol("IInterpreterAutoSelectionProxyService"),t.IInterpreterAutoSelectionService=Symbol("IInterpreterAutoSelectionService"),function(e){e.all="all",e.currentPath="currentPath",e.workspaceVirtualEnvs="workspaceEnvs",e.settings="settings",e.cachedInterpreters="cachedInterpreters",e.systemWide="system",e.windowsRegistry="windowsRegistry"}(t.AutoSelectionRule||(t.AutoSelectionRule={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleInstallFlags=t.IProductPathService=t.IProductService=t.IInstallationChannelManager=t.IPythonInstallation=t.IModuleInstaller=void 0,t.IModuleInstaller=Symbol("IModuleInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService"),function(e){e[e.upgrade=1]="upgrade",e[e.updateDependencies=2]="updateDependencies",e[e.reInstall=4]="reInstall"}(t.ModuleInstallFlags||(t.ModuleInstallFlags={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPipenvEnvironmentRelatedToFolder=t.isPipenvEnvironment=t._getAssociatedPipfile=void 0;const r=n(0),i=n(9),o=n(4),s=n(19);async function a(e,t){const n=i.getEnvironmentVariable("PIPENV_PIPFILE")||"Pipfile";let a=t.lookIntoParentDirectories?function(){const e=i.getEnvironmentVariable("PIPENV_MAX_DEPTH");if(void 0===e)return 3;const t=parseInt(e,10);return isNaN(t)?(o.traceError(`PIPENV_MAX_DEPTH is incorrectly set. Converting value '${e}' to number results in NaN`),1):t}():1;for(;a>0&&!s.arePathsSame(e,r.dirname(e));){const t=r.join(e,n);if(await s.pathExists(t))return t;e=r.dirname(e),a-=1}}async function c(e){const t=r.dirname(r.dirname(e)),n=await async function(e){const t=r.join(e,".project");if(!await s.pathExists(t))return;const n=await s.readFile(t);if(await s.pathExists(n))return n;o.traceError(`The .project file inside environment folder: ${e} doesn't contain a valid path to the project`)}(t);if(void 0===n)return;return r.basename(s.normCasePath(t)).startsWith(r.basename(s.normCasePath(n))+"-")?a(n,{lookIntoParentDirectories:!1}):void 0}t._getAssociatedPipfile=a,t.isPipenvEnvironment=async function(e){return!!await async function(e){const t=r.dirname(r.dirname(e));if(".venv"!==r.basename(t))return;return a(r.dirname(t),{lookIntoParentDirectories:!1})}(e)||!!await c(e)},t.isPipenvEnvironmentRelatedToFolder=async function(e,t){const n=await c(e);if(!n)return!1;const r=void 0===i.getEnvironmentVariable("PIPENV_NO_INHERIT"),o=await a(t,{lookIntoParentDirectories:r});return!!o&&s.arePathsSame(n,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.comparePythonVersionSpecificity=t.areSameEnv=t.haveSameExecutables=t.getEnvMatcher=t.getMinimalPartialInfo=t.getEnvExecutable=t.getEnvDisplayString=t.copyEnvInfo=t.buildEnvInfo=void 0;const r=n(47),i=n(0),o=n(163),s=n(132),a=n(9),c=n(19),u=n(200),l=n(53),p=n(23);function d(e,t){void 0!==t.kind&&(e.kind=t.kind),void 0!==t.executable&&(e.executable.filename=t.executable),void 0!==t.location&&(e.location=t.location),void 0!==t.version&&(e.version=t.version)}function h(e){var t;const n="string"==typeof e?e:(null===(t=e.executable)||void 0===t?void 0:t.filename)||"";return""===n?"":s.normalizeFilename(n)}function f(e){if("string"==typeof e){if(""===e)return;return{executable:{filename:e,sysPrefix:"",ctime:-1,mtime:-1}}}if(void 0!==e.executable&&""!==e.executable.filename)return e}function v(e){var t,n;let r=0;return e.major>0&&(r+=20),e.minor>=0&&(r+=10),e.micro>=0&&(r+=5),(null===(t=e.release)||void 0===t?void 0:t.level)&&(r+=3),((null===(n=e.release)||void 0===n?void 0:n.serial)||e.sysVersion)&&(r+=1),r}t.buildEnvInfo=function(e){var t,n,r,i,o,s,c,u;const l={name:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"",location:"",kind:p.PythonEnvKind.Unknown,executable:{filename:"",sysPrefix:"",ctime:null!==(r=null===(n=null==e?void 0:e.fileInfo)||void 0===n?void 0:n.ctime)&&void 0!==r?r:-1,mtime:null!==(o=null===(i=null==e?void 0:e.fileInfo)||void 0===i?void 0:i.mtime)&&void 0!==o?o:-1},searchLocation:void 0,display:null==e?void 0:e.display,version:{major:-1,minor:-1,micro:-1,release:{level:p.PythonReleaseLevel.Final,serial:0}},arch:null!==(s=null==e?void 0:e.arch)&&void 0!==s?s:a.Architecture.Unknown,distro:{org:null!==(c=null==e?void 0:e.org)&&void 0!==c?c:""},source:null!==(u=null==e?void 0:e.source)&&void 0!==u?u:[]};return void 0!==e&&d(l,e),l},t.copyEnvInfo=function(e,t){const n=r.cloneDeep(e);return void 0!==t&&d(n,t),n},t.getEnvDisplayString=function(e){return function(e){const t=["Python"];e.version&&!l.isVersionEmpty(e.version)&&t.push(l.getVersionDisplayString(e.version));const n=o.getArchitectureDisplayName(e.arch);""!==n&&t.push(n);const r=[];e.name&&""!==e.name&&r.push(`'${e.name}'`);const i=u.getKindDisplayName(e.kind);""!==i&&r.push(i);const s=0===r.length?"":`(${r.join(": ")})`;return`${t.join(" ")} ${s}`.trim()}(e)},t.getEnvExecutable=h,t.getMinimalPartialInfo=f,t.getEnvMatcher=function(e){const t=h(e);return""===t?()=>!1:function(e){return c.arePathsSame(t,e)}},t.haveSameExecutables=function(e,t){if(e.length!==t.length)return!1;const n=e.map(h);return!!t.map(h).every(e=>n.includes(e))},t.areSameEnv=function(e,t,n=!0){const r=f(e),o=f(t);if(void 0===r||void 0===o)return;const s=r.executable.filename,a=o.executable.filename;if(c.arePathsSame(s,a))return!0;if(c.arePathsSame(i.dirname(s),i.dirname(a))){const r="string"==typeof e?void 0:e.version,i="string"==typeof t?void 0:t.version;if(r&&i&&(l.areIdenticalVersion(r,i)||n&&l.areSimilarVersions(r,i)))return!0}return!1},t.comparePythonVersionSpecificity=function(e,t){return Math.sign(v(e)-v(t))}},function(e,t,n){var r=n(24),i=n(0),o=n(109).spawn,s=["HKLM","HKCU","HKCR","HKU","HKCC"],a=["REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE"],c=/(\\[a-zA-Z0-9_\s]+)*/,u=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,l=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function p(e,t){if(!(this instanceof p))return new p(e,t);Error.captureStackTrace(this,p),this.__defineGetter__("name",(function(){return p.name})),this.__defineGetter__("message",(function(){return e})),this.__defineGetter__("code",(function(){return t}))}function d(e){var t={stdout:"",stderr:""};return e.stdout.on("data",(function(e){t.stdout+=e.toString()})),e.stderr.on("data",(function(e){t.stderr+=e.toString()})),t}function h(e,t,n){var i=n.stdout.trim(),o=n.stderr.trim();return new p(r.format("%s command exited with code %d:\n%s\n%s",e,t,i,o),t)}function f(e,t){t&&e.push("/reg:"+function(e){if("x64"==e)return"64";if("x86"==e)return"32";throw new Error("illegal architecture: "+e+" (use x86 or x64)")}(t))}function v(){return"win32"===process.platform?i.join(process.env.windir,"system32","reg.exe"):"REG"}function y(e,t,n,r,i,o,s){if(!(this instanceof y))return new y(e,t,n,r,i,o,s);var a=e,c=t,u=n,l=r,p=i,d=o,h=s;this.__defineGetter__("host",(function(){return a})),this.__defineGetter__("hive",(function(){return c})),this.__defineGetter__("key",(function(){return u})),this.__defineGetter__("name",(function(){return l})),this.__defineGetter__("type",(function(){return p})),this.__defineGetter__("value",(function(){return d})),this.__defineGetter__("arch",(function(){return h}))}function g(e){if(!(this instanceof g))return new g(e);var t=e||{},n=""+(t.host||""),r=""+(t.hive||"HKLM"),i=""+(t.key||""),o=t.arch||null;if(this.__defineGetter__("host",(function(){return n})),this.__defineGetter__("hive",(function(){return r})),this.__defineGetter__("key",(function(){return i})),this.__defineGetter__("path",(function(){return(0==n.length?"":"\\\\"+n+"\\")+r+i})),this.__defineGetter__("arch",(function(){return o})),this.__defineGetter__("parent",(function(){var e=i.lastIndexOf("\\");return new g({host:this.host,hive:this.hive,key:-1==e?"":i.substring(0,e),arch:this.arch})})),-1==s.indexOf(r))throw new Error("illegal hive specified.");if(!c.test(i))throw new Error("illegal key specified.");if(o&&"x64"!=o&&"x86"!=o)throw new Error("illegal architecture specified (use x86 or x64)")}r.inherits(p,Error),r.inherits(y,Object),g.HKLM="HKLM",g.HKCU="HKCU",g.HKCR="HKCR",g.HKU="HKU",g.HKCC="HKCC",g.HIVES=s,g.REG_SZ="REG_SZ",g.REG_MULTI_SZ="REG_MULTI_SZ",g.REG_EXPAND_SZ="REG_EXPAND_SZ",g.REG_DWORD="REG_DWORD",g.REG_QWORD="REG_QWORD",g.REG_BINARY="REG_BINARY",g.REG_NONE="REG_NONE",g.REG_TYPES=a,g.DEFAULT_VALUE="",g.prototype.values=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];f(t,this.arch);var n=o(v(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=d(n);return n.on("close",(function(t){if(!s)if(0!==t)e(h("QUERY",t,a),null);else{for(var n=[],o=[],c=r.split("\n"),u=0,p=0,d=c.length;p<d;p++){var f=c[p].trim();f.length>0&&(0!=u&&n.push(f),++u)}for(p=0,d=n.length;p<d;p++){var v,g,m,_=l.exec(n[p]);_&&(v=_[1].trim(),g=_[2].trim(),m=_[3],o.push(new y(i.host,i.hive,i.key,v,g,m,i.arch)))}e(null,o)}})),n.stdout.on("data",(function(e){r+=e.toString()})),n.on("error",(function(t){s=t,e(t)})),this},g.prototype.keys=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];f(t,this.arch);var n=o(v(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=d(n);return n.on("close",(function(t){s||0!==t&&e(h("QUERY",t,a),null)})),n.stdout.on("data",(function(e){r+=e.toString()})),n.stdout.on("end",(function(){for(var t=[],n=[],o=r.split("\n"),s=0,a=o.length;s<a;s++){var c=o[s].trim();c.length>0&&t.push(c)}for(s=0,a=t.length;s<a;s++){var l,p=u.exec(t[s]);p&&(p[1],(l=p[2])&&l!==i.key&&n.push(new g({host:i.host,hive:i.hive,key:l,arch:i.arch})))}e(null,n)})),n.on("error",(function(t){s=t,e(t)})),this},g.prototype.get=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=["QUERY",this.path];""==e?n.push("/ve"):n=n.concat(["/v",e]),f(n,this.arch);var r=o(v(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",s=this,a=null,c=d(r);return r.on("close",(function(e){if(!a)if(0!==e)t(h("QUERY",e,c),null);else{for(var n=[],r=null,o=i.split("\n"),u=0,p=0,d=o.length;p<d;p++){var f=o[p].trim();f.length>0&&(0!=u&&n.push(f),++u)}var v,g,m,_=n[n.length-1]||"",b=l.exec(_);b&&(v=b[1].trim(),g=b[2].trim(),m=b[3],r=new y(s.host,s.hive,s.key,v,g,m,s.arch)),t(null,r)}})),r.stdout.on("data",(function(e){i+=e.toString()})),r.on("error",(function(e){a=e,t(e)})),this},g.prototype.set=function(e,t,n,r){if("function"!=typeof r)throw new TypeError("must specify a callback");if(-1==a.indexOf(t))throw Error("illegal type specified.");var i=["ADD",this.path];""==e?i.push("/ve"):i=i.concat(["/v",e]),f(i=i.concat(["/t",t,"/d",n,"/f"]),this.arch);var s=o(v(),i,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),c=null,u=d(s);return s.on("close",(function(e){c||r(0!==e?h("ADD",e,u):null)})),s.stdout.on("data",(function(e){})),s.on("error",(function(e){c=e,r(e)})),this},g.prototype.remove=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"];f(n,this.arch);var r=o(v(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,s=d(r);return r.on("close",(function(e){i||(0!==e?t(h("DELETE",e,s),null):t(null))})),r.stdout.on("data",(function(e){})),r.on("error",(function(e){i=e,t(e)})),this},g.prototype.clear=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"];f(t,this.arch);var n=o(v(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=d(n);return n.on("close",(function(t){r||(0!==t?e(h("DELETE",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},g.prototype.erase=g.prototype.clear,g.prototype.destroy=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f"];f(t,this.arch);var n=o(v(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=d(n);return n.on("close",(function(t){r||(0!==t?e(h("DELETE",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},g.prototype.create=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"];f(t,this.arch);var n=o(v(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=d(n);return n.on("close",(function(t){r||(0!==t?e(h("ADD",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},g.prototype.keyExists=function(e){return this.values((function(t,n){if(t)return 1==t.code?e(null,!1):e(t);e(null,!0)})),this},g.prototype.valueExists=function(e,t){return this.get(e,(function(e,n){if(e)return 1==e.code?t(null,!1):t(e);t(null,!0)})),this},e.exports=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swallowExceptions=t.cache=t.makeDebounceAsyncDecorator=t.makeDebounceDecorator=t.debounceAsync=t.debounceSync=void 0,n(14);const r=n(4),i=n(17),o=n(11),s=n(164),a=n(64),c=n(315);function u(e){return function(t,n,r){const i=r.value,o=c((function(){return i.apply(this,arguments)}),e,{});r.value=o}}function l(e){return function(t,n,r){const i=r.value,s={started:!1,deferred:void 0,timer:void 0};r.value=function(){const t=s.deferred;if(t&&s.started)return t.promise;const n=t&&t.completed,r=s.deferred=!t||n?o.createDeferred():t;return s.timer&&clearTimeout(s.timer),s.timer=setTimeout(async()=>{s.started=!0,i.apply(this).then(e=>{s.started=!1,r.resolve(e)}).catch(e=>{s.started=!1,r.reject(e)})},e||0),r.promise}}}t.debounceSync=function(e){return i.isTestExecution()&&(e=void 0),u(e)},t.debounceAsync=function(e){return i.isTestExecution()&&(e=void 0),l(e)},t.makeDebounceDecorator=u,t.makeDebounceAsyncDecorator=l;const p=s.getGlobalCacheStore(),d=new a.StopWatch;t.cache=function(e,t=!1,n){return function(o,a,c){const u=c.value,l=`Cache_Method_Output_${"constructor"in o&&o.constructor.name?o.constructor.name:""}.${a}`;c.value=async function(...o){if(i.isTestExecution())return u.apply(this,o);let a;try{a=s.getCacheKeyFromFunctionArgs(l,o)}catch(e){return r.traceError("Error while creating key for keyPrefix:",l,e),u.apply(this,o)}const c=p.get(a);if(c&&(c.expiry>Date.now()||-1===e))return r.traceVerbose("Cached data exists "+a),Promise.resolve(c.data);const h=n&&d.elapsedTime>2e5?n:e,f=u.apply(this,o);return t?p.set(a,{data:f,expiry:Date.now()+h}):f.then(e=>p.set(a,{data:e,expiry:Date.now()+h})).ignoreErrors(),f}}},t.swallowExceptions=function(e){return function(t,n,o){const s=o.value,a=`Python Extension (Error in ${e||n}, method:${n}):`;o.value=function(...e){try{const t=s.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch(e=>{i.isTestExecution()||r.traceError(a,e)})}catch(e){if(i.isTestExecution())return;r.traceError(a,e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonVersionFromPyvenvCfg=t.isVirtualenvwrapperEnvironment=t.isVirtualenvEnvironment=t.isVenvEnvironment=void 0;const r=n(44),i=n(0);n(14);const o=n(9),s=n(23),a=n(84),c=n(53),u=n(19);function l(e){return[i.join(i.dirname(i.dirname(e)),"pyvenv.cfg"),i.join(i.dirname(e),"pyvenv.cfg")]}async function p(e){const t=i.dirname(e),n=await r.readdir(t),o=/^activate(\.([A-z]|\d)+)?$/i;return void 0!==n.find(e=>o.test(e))}function d(){const e=o.getEnvironmentVariable("WORKON_HOME");return e?Promise.resolve(e):async function(){const e=o.getUserHomeDir()||"";if(o.getOSType()===o.OSType.Windows){const t=i.join(e,"Envs");if(await u.pathExists(t))return t}return i.join(e,".virtualenvs")}()}function h(e){let t,n;try{[t,n]=c.parseBasicVersion(e)}catch(e){return s.UNKNOWN_PYTHON_VERSION}return-1!==t.micro&&n.startsWith(".")&&([t.release]=c.parseRelease(n)),t}t.isVenvEnvironment=async function(e){const t=l(e);for(const e of t)if(await u.pathExists(e))return!0;return!1},t.isVirtualenvEnvironment=p,t.isVirtualenvwrapperEnvironment=async function(e){const t=await d();return await u.pathExists(t)&&u.isParentPath(e,t)&&p(e)},t.getPythonVersionFromPyvenvCfg=async function(e){const t=l(e);let n=s.UNKNOWN_PYTHON_VERSION;for(const e of t)if(await u.pathExists(e))try{const t=(await u.readFile(e)).splitLines().map(e=>{const t=e.split("=");if(2===t.length){const e=t[0].toLowerCase().trim(),n=t[1].trim();if("version"===e)try{return c.parseVersion(n)}catch(e){return}else if("version_info"===e)try{return h(n)}catch(e){return}}}).filter(e=>void 0!==e).map(e=>e);if(t.length>0)for(const e of t)a.comparePythonVersionSpecificity(e,n)>0&&(n=e)}catch(e){return s.UNKNOWN_PYTHON_VERSION}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FSWatchingLocator=t.FSWatcherKind=void 0;const r=n(16),i=n(0),o=n(5),s=n(168),a=n(11),c=n(4),u=n(46),l=n(215),p=n(216);var d;!function(e){e[e.Global=0]="Global",e[e.Workspace=1]="Workspace"}(d=t.FSWatcherKind||(t.FSWatcherKind={}));class h extends p.LazyResourceBasedLocator{constructor(e,t,n={},r=d.Global){super(),this.getRoots=e,this.getKind=t,this.opts=n,this.watcherKind=r}async initWatchers(){if(this.watcherKind===d.Global)return;c.traceVerbose("Getting roots");let e=await this.getRoots();c.traceVerbose("Found roots"),"string"==typeof e&&(e=[e]);const t=e.map(async e=>{const t=await function(e){let t;try{t=r.readdirSync(e)}catch(e){if(c.traceError("Reading directory to watch failed",e),"ENOENT"===e.code)return;throw e}if(t.length>200)return"too many files"}(e);if(!t)return e;c.traceError(`Dir "${e}" is not watchable (${t})`)});(await Promise.all(t)).filter(e=>!!e).forEach(e=>this.startWatchers(e))}startWatchers(e){const t=async(e,t)=>{var n;e===s.FileChangeType.Created&&void 0!==this.opts.delayOnCreated&&await a.sleep(this.opts.delayOnCreated);const r=await this.getKind(t).catch(()=>{}),l=o.Uri.file(null!==(n=this.opts.searchLocation)&&void 0!==n?n:i.dirname(u.getEnvironmentDirFromPath(t)));c.traceVerbose("Fired event ",JSON.stringify({type:e,kind:r,searchLocation:l}),"from locator"),this.emitter.fire({type:e,kind:r,searchLocation:l})},n=l.resolvePythonExeGlobs(this.opts.baseGlob,this.opts.envStructure);c.traceVerbose("Start watching root",e,"for globs",JSON.stringify(n));const r=n.map(n=>l.watchLocationForPythonBinaries(e,t,n));this.disposables.push(...r)}}t.FSWatchingLocator=h},function(e,t,n){"use strict";var r,i=n(116),o=i.Buffer,s={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=i[r]);var a=s.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=o[r]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=o(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},function(e,t){e.exports=require("./node_modules/diff-match-patch")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(66);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:r.a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.b(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(8).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.b(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(10).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(50),i=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r.a),t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(34),i=function(e){return function(t){for(var n=e[r.a]();;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(30),i=n(54),o=n(102);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r.a)(n)?(e.pop(),Object(o.a)(e,n)):Object(i.a)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),i=n(43),o=n(33);function s(e){return new r.a((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(t)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8);function i(e){for(;e;){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r.a?i:null}return!0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),i=n(10);function o(e,t){return new r.a((function(n){var r=new i.a,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(e,t,n){"use strict";var r=n(2),i=n(117),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.b(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=i.a.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(i.a.clearImmediate(n),t.scheduled=void 0)},t}(n(56).a),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(55).a);n.d(t,"a",(function(){return a}));var a=new s(o)},function(e,t,n){"use strict";var r=n(2),i=n(27),o=n(149),s=n(10),a=n(8),c=n(76);var u=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.b(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(c.a.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(c.a.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(c.a.createComplete()),this.unsubscribe()},t}(a.a),l=function(){return function(e,t){this.notification=e,this.destination=t}}(),p=n(37),d=n(93);n.d(t,"a",(function(){return h}));var h=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.b(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new f(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new p.a;if(this.isStopped||this.hasError?t=s.a.EMPTY:(this.observers.push(e),t=new d.a(this,e)),i&&e.add(e=new u(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.a).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.b),f=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(29),i=n(50),o={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},function(e,t,n){e.exports=l,l.Minimatch=p;var r={sep:"/"};try{r=n(0)}catch(e){}var i=l.GLOBSTAR=p.GLOBSTAR={},o=n(254),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function u(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function l(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new p(t,n).match(e))}function p(e,t){if(!(this instanceof p))return new p(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==r.sep&&(e=e.split(r.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function d(e,t){if(t||(t=this instanceof p?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}l.filter=function(e,t){return t=t||{},function(n,r,i){return l(n,e,t)}},l.defaults=function(e){if(!e||!Object.keys(e).length)return l;var t=l,n=function(n,r,i){return t.minimatch(n,r,u(e,i))};return n.Minimatch=function(n,r){return new t.Minimatch(n,u(e,r))},n},p.defaults=function(e){return e&&Object.keys(e).length?l.defaults(e).Minimatch:p},p.prototype.debug=function(){},p.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(c)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},p.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,r=0;if(n.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,r++;r&&(this.pattern=e.substr(r));this.negate=t},l.braceExpand=function(e,t){return d(e,t)},p.prototype.braceExpand=d,p.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return i;if(""===e)return"";var r,o="",c=!!n.nocase,u=!1,l=[],p=[],d=!1,f=-1,v=-1,y="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this;function m(){if(r){switch(r){case"*":o+="[^/]*?",c=!0;break;case"?":o+="[^/]",c=!0;break;default:o+="\\"+r}g.debug("clearStateChar %j %j",r,o),r=!1}}for(var _,b=0,E=e.length;b<E&&(_=e.charAt(b));b++)if(this.debug("%s\t%s %s %j",e,b,o,_),u&&a[_])o+="\\"+_,u=!1;else switch(_){case"/":return!1;case"\\":m(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,b,o,_),d){this.debug("  in class"),"!"===_&&b===v+1&&(_="^"),o+=_;continue}g.debug("call clearStateChar %j",r),m(),r=_,n.noext&&m();continue;case"(":if(d){o+="(";continue}if(!r){o+="\\(";continue}l.push({type:r,start:b-1,reStart:o.length,open:s[r].open,close:s[r].close}),o+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,o),r=!1;continue;case")":if(d||!l.length){o+="\\)";continue}m(),c=!0;var S=l.pop();o+=S.close,"!"===S.type&&p.push(S),S.reEnd=o.length;continue;case"|":if(d||!l.length||u){o+="\\|",u=!1;continue}m(),o+="|";continue;case"[":if(m(),d){o+="\\"+_;continue}d=!0,v=b,f=o.length,o+=_;continue;case"]":if(b===v+1||!d){o+="\\"+_,u=!1;continue}if(d){var w=e.substring(v+1,b);try{RegExp("["+w+"]")}catch(e){var T=this.parse(w,h);o=o.substr(0,f)+"\\["+T[0]+"\\]",c=c||T[1],d=!1;continue}}c=!0,d=!1,o+=_;continue;default:m(),u?u=!1:!a[_]||"^"===_&&d||(o+="\\"),o+=_}d&&(w=e.substr(v+1),T=this.parse(w,h),o=o.substr(0,f)+"\\["+T[0],c=c||T[1]);for(S=l.pop();S;S=l.pop()){var P=o.slice(S.reStart+S.open.length);this.debug("setting tail",o,S),P=P.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",P,P,S,o);var I="*"===S.type?"[^/]*?":"?"===S.type?"[^/]":"\\"+S.type;c=!0,o=o.slice(0,S.reStart)+I+"\\("+P}m(),u&&(o+="\\\\");var C=!1;switch(o.charAt(0)){case".":case"[":case"(":C=!0}for(var O=p.length-1;O>-1;O--){var A=p[O],x=o.slice(0,A.reStart),R=o.slice(A.reStart,A.reEnd-8),N=o.slice(A.reEnd-8,A.reEnd),k=o.slice(A.reEnd);N+=k;var D=x.split("(").length-1,j=k;for(b=0;b<D;b++)j=j.replace(/\)[+*?]?/,"");var M="";""===(k=j)&&t!==h&&(M="$"),o=x+R+k+M+N}""!==o&&c&&(o="(?=.)"+o);C&&(o=y+o);if(t===h)return[o,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var L=n.nocase?"i":"";try{var F=new RegExp("^"+o+"$",L)}catch(e){return new RegExp("$.")}return F._glob=e,F._src=o,F};var h={};l.makeRe=function(e,t){return new p(e,t||{}).makeRe()},p.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",r=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===i?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=!1}return this.regexp},l.match=function(e,t,n){var r=new p(t,n=n||{});return e=e.filter((function(e){return r.match(e)})),r.options.nonull&&!e.length&&e.push(t),e},p.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==r.sep&&(e=e.split(r.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],u=e;if(n.matchBase&&1===a.length&&(u=[i]),this.matchOne(u,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},p.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=t[s],p=e[o];if(this.debug(t,l,p),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[t,l,p]);var d=o,h=s+1;if(h===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!r.dot&&"."===e[o].charAt(0))return!1;return!0}for(;d<a;){var f=e[d];if(this.debug("\nglobstar while",e,d,t,h,f),this.matchOne(e.slice(d),t.slice(h),n))return this.debug("globstar found match!",d,a,f),!0;if("."===f||".."===f||!r.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,d,t,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!n||(this.debug("\n>>> no match, partial?",e,d,t,h),d!==a))}if("string"==typeof l?(u=r.nocase?p.toLowerCase()===l.toLowerCase():p===l,this.debug("string match",l,p,u)):(u=p.match(l),this.debug("pattern match",l,p,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return n;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var r=n(39);function i(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=o(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(function e(t,n){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===n||e(t.parentRequest,n))}(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=o},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";const r=n(35).homedir();e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return r?e.replace(/^~(?=$|\/|\\)/,r):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionSingleActivationService=t.IExtensionActivationService=t.IExtensionActivationManager=void 0,t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionActivationService=Symbol("IExtensionActivationService"),t.IExtensionSingleActivationService=Symbol("IExtensionSingleActivationService")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.translateProductToModule=t.ModuleInstaller=void 0;const i=n(1),o=n(0),s=n(5),a=n(12),c=n(26),u=n(21),l=n(22),p=n(7),d=n(198),h=n(17),f=n(13),v=n(134),y=n(20),g=n(6),m=n(52),_=n(31),b=n(161);let E=class{constructor(e){this.serviceContainer=e}async installModule(e,t,n,r){const i="string"==typeof e?e:S(e),h="string"==typeof e?i:b.ProductNames.get(e);u.sendTelemetryEvent(l.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:this.displayName,productName:h});const E=_.isResource(t)?t:void 0,w={};_.isResource(t)?w.resource=E:w.interpreter=t;const T=await this.getExecutionInfo(i,t,r),P=this.serviceContainer.get(y.ITerminalServiceFactory).getTerminalService(w),I=async e=>{const n=await this.processInstallArgs(T.args,t);if(T.moduleName){const r=this.serviceContainer.get(g.IConfigurationService).getSettings(E),i=this.serviceContainer.get(a.IInterpreterService),s=_.isResource(t)?await i.getActiveInterpreter(t):t,u=_.isResource(t)?r.pythonPath:t.path,l=v.execModule(T.moduleName,n);if(s&&s.envType===c.EnvironmentType.Unknown)if(r.globalModuleInstallation){const t=this.serviceContainer.get(f.IFileSystem);await t.isDirReadonly(o.dirname(u)).catch(e=>!0)?this.elevatedInstall(u,l):await P.sendCommand(u,l,e)}else await P.sendCommand(u,l.concat(["--user"]),e);else await P.sendCommand(u,l,e)}else await P.sendCommand(T.execPath,n,e)};if(n){const e=this.serviceContainer.get(p.IApplicationShell),t={location:s.ProgressLocation.Notification,cancellable:!0,title:m.Products.installingModule().format(i)};await e.withProgress(t,async(e,t)=>I(d.wrapCancellationTokens(t,n)))}else await I(n)}elevatedInstall(e,t){const r=this.serviceContainer.get(g.IOutputChannel,h.STANDARD_OUTPUT_CHANNEL),i=`"${e.replace(/\\/g,"/")}" ${t.join(" ")}`;r.appendLine(""),r.appendLine("[Elevated] "+i);n(309).exec(i,{name:"VS Code Python"},async(e,t,n)=>{if(e){const t=this.serviceContainer.get(p.IApplicationShell);await t.showErrorMessage(e)}else r.show(),t&&(r.appendLine(""),r.append(t)),n&&(r.appendLine(""),r.append("Warning: "+n))})}async processInstallArgs(e,t){const n=e.findIndex(e=>"PYLINT"===e.toUpperCase());if(-1===n)return e;const r=this.serviceContainer.get(a.IInterpreterService),i=_.isResource(t)?await r.getActiveInterpreter(t):t;if(i&&i.version&&2===i.version.major){const t=[...e];return t[n]='"pylint<2.0.0"',t}return e}};function S(e){switch(e){case g.Product.mypy:return"mypy";case g.Product.pylama:return"pylama";case g.Product.prospector:return"prospector";case g.Product.pylint:return"pylint";case g.Product.pytest:return"pytest";case g.Product.autopep8:return"autopep8";case g.Product.black:return"black";case g.Product.pycodestyle:return"pycodestyle";case g.Product.pydocstyle:return"pydocstyle";case g.Product.yapf:return"yapf";case g.Product.flake8:return"flake8";case g.Product.unittest:return"unittest";case g.Product.bandit:return"bandit";case g.Product.jupyter:return"jupyter";case g.Product.notebook:return"notebook";case g.Product.pandas:return"pandas";case g.Product.ipykernel:return"ipykernel";case g.Product.nbconvert:return"nbconvert";case g.Product.kernelspec:return"kernelspec";case g.Product.tensorboard:return"tensorboard";case g.Product.torchProfilerInstallName:return"torch-tb-profiler";case g.Product.torchProfilerImportName:return"torch_tb_profiler";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}E=r([i.injectable()],E),t.ModuleInstaller=E,t.translateProductToModule=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorboardLauncher=t.visualstudio_py_testlauncher=t.testlauncher=t.shell_exec=t.printEnvVariables=t.normalizeSelection=t.sortImports=t.interpreterInfo=t.testingTools=void 0;const r=n(0),i=n(167)._SCRIPTS_DIR;t.testingTools=n(336),t.interpreterInfo=function(){const e=[r.join(i,"interpreterInfo.py")];return[e,function(t){let n;try{n=JSON.parse(t)}catch(n){throw Error(`python ${e} returned bad JSON (${t}) (${n})`)}return n}]},t.sortImports=function(e,t){const n=[r.join(i,"sortImports.py"),e,"--diff"];return t&&n.push(...t),[n,function(e){return e}]},t.normalizeSelection=function(){return[[r.join(i,"normalizeSelection.py")],function(e){return e}]},t.printEnvVariables=function(){return[[r.join(i,"printEnvVariables.py").fileToCommandArgument()],function(e){return JSON.parse(e)}]},t.shell_exec=function(e,t,n){return[r.join(i,"shell_exec.py"),e.fileToCommandArgument(),...n,t.fileToCommandArgument()]},t.testlauncher=function(e){return[r.join(i,"testlauncher.py"),...e]},t.visualstudio_py_testlauncher=function(e){return[r.join(i,"visualstudio_py_testlauncher.py"),...e]},t.tensorboardLauncher=function(e){return[r.join(i,"tensorboard_launcher.py"),...e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsWatcher=void 0;const r=n(5);t.PythonEnvsWatcher=class{constructor(){this.didChange=new r.EventEmitter,this.onChanged=this.didChange.event}fire(e){this.didChange.fire(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncForEach=t.asyncFilter=void 0,t.asyncFilter=async function(e,t){const n=await Promise.all(e.map(t));return e.filter((e,t)=>n[t])},t.asyncForEach=async function(e,t){await Promise.all(e.map(t))}},function(e,t){e.exports=require("buffer")},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=1,i=function(){return Promise.resolve()}(),o={};function s(e){return e in o&&(delete o[e],!0)}var a={setImmediate:function(e){var t=r++;return o[t]=!0,i.then((function(){return s(t)&&e()})),t},clearImmediate:function(e){s(e)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=t.getHashString=t.FileSystemUtils=t.RawFileSystem=t.convertStat=void 0;const i=n(119),o=n(44),s=n(181),a=n(1),c=n(24),u=n(5),l=n(4);n(14);const p=n(132),d=n(297),h=n(79),f=n(298),v=n(13);function y(e,t){return{type:t,size:e.size,ctime:Math.round(e.ctimeMs),mtime:Math.round(e.mtimeMs)}}function g(e,t){return t===v.FileType.Unknown?e.filter(([e,t])=>t===v.FileType.Unknown||t===(v.FileType.SymbolicLink&v.FileType.Unknown)):e.filter(([e,n])=>(n&t)>0)}t.convertStat=y;class m{constructor(e,t,n){this.paths=e,this.vscfs=t,this.fsExtra=n}static withDefaults(e,t,n){return new m(e||h.FileSystemPaths.withDefaults(),t||u.workspace.fs,n||o)}async pathExists(e){return this.fsExtra.pathExists(e)}async stat(e){const t=u.Uri.file(e);return this.vscfs.stat(t)}async lstat(e){const t=await this.fsExtra.lstat(e);return y(t,p.convertFileType(t))}async chmod(e,t){return this.fsExtra.chmod(e,t)}async move(e,t){const n=u.Uri.file(e),r=u.Uri.file(t);await this.vscfs.stat(u.Uri.file(this.paths.dirname(t)));const i={overwrite:!1};try{await this.vscfs.rename(n,r,i)}catch(e){if(!d.isFileExistsError(e))throw e;if((await this.vscfs.stat(r)).type===v.FileType.Directory)throw e;i.overwrite=!0,await this.vscfs.rename(n,r,i)}}async readData(e){const t=u.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n)}async readText(e){const t=u.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n).toString("utf8")}async writeText(e,t){const n=u.Uri.file(e),r=Buffer.from(t);await this.vscfs.writeFile(n,r)}async appendText(e,t){return this.fsExtra.appendFile(e,t)}async copyFile(e,t){const n=u.Uri.file(e),r=u.Uri.file(t);await this.vscfs.stat(u.Uri.file(this.paths.dirname(t))),await this.vscfs.copy(n,r,{overwrite:!0})}async rmfile(e){const t=u.Uri.file(e);return this.vscfs.delete(t,{recursive:!1,useTrash:!1})}async rmdir(e){const t=u.Uri.file(e),n=await this.vscfs.readDirectory(t);if(n&&n.length>0)throw d.createDirNotEmptyError(e);return this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async rmtree(e){const t=u.Uri.file(e);return await this.vscfs.stat(t),this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async mkdirp(e){const t=u.Uri.file(e);await this.vscfs.createDirectory(t)}async listdir(e){const t=u.Uri.file(e);return(await this.vscfs.readDirectory(t)).map(([t,n])=>[this.paths.join(e,t),n])}statSync(e){let t=this.fsExtra.lstatSync(e),n=v.FileType.Unknown;return t.isSymbolicLink()&&(n=v.FileType.SymbolicLink,t=this.fsExtra.statSync(e)),n|=p.convertFileType(t),y(t,n)}readTextSync(e){return this.fsExtra.readFileSync(e,"utf8")}createReadStream(e){return this.fsExtra.createReadStream(e)}createWriteStream(e){return this.fsExtra.createWriteStream(e)}}t.RawFileSystem=m;class _{constructor(e,t,n,r,i,o){this.raw=e,this.pathUtils=t,this.paths=n,this.tmp=r,this.getHash=i,this.globFiles=o}static withDefaults(e,t,n,r,i){return t=t||h.FileSystemPathUtils.withDefaults(),new _(e||m.withDefaults(t.paths),t,t.paths,n||f.TemporaryFileSystem.withDefaults(),r||b,i||c.promisify(s))}async createDirectory(e){return this.raw.mkdirp(e)}async deleteDirectory(e){return this.raw.rmdir(e)}async deleteFile(e){return this.raw.rmfile(e)}async pathExists(e,t){if(void 0===t)return this.raw.pathExists(e);let n;try{n=await this.raw.stat(e)}catch(t){return d.isFileNotFoundError(t)||l.traceError(`stat() failed for "${e}"`,t),!1}return t===v.FileType.Unknown?n.type===v.FileType.Unknown:(n.type&t)===t}async fileExists(e){return this.pathExists(e,v.FileType.File)}async directoryExists(e){return this.pathExists(e,v.FileType.Directory)}async listdir(e){try{return await this.raw.listdir(e)}catch(t){if(!await this.pathExists(e))return[];throw t}}async getSubDirectories(e){return g(await this.listdir(e),v.FileType.Directory).map(([e,t])=>e)}async getFiles(e){return g(await this.listdir(e),v.FileType.File).map(([e,t])=>e)}async isDirReadonly(e){const t=`${e}${this.paths.sep}___vscpTest___`;try{await this.raw.stat(e),await this.raw.writeText(t,"")}catch(e){if(d.isNoPermissionsError(e))return!0;throw e}return this.raw.rmfile(t).ignoreErrors(),!1}async getFileHash(e){const t=await this.raw.lstat(e),n=`${t.ctime}-${t.mtime}`;return this.getHash(n)}async search(e,t,n){let r;t&&(r={...r,cwd:t}),n&&(r={...r,dot:n});const i=await this.globFiles(e,r);return Array.isArray(i)?i:[]}fileExistsSync(e){try{this.raw.statSync(e)}catch(e){if(d.isFileNotFoundError(e))return!1;throw e}return!0}}function b(e){const t=i.createHash("sha512");return t.update(e),t.digest("hex")}t.FileSystemUtils=_,t.getHashString=b;let E=class{constructor(){this.utils=_.withDefaults()}get directorySeparatorChar(){return this.utils.paths.sep}arePathsSame(e,t){return this.utils.pathUtils.arePathsSame(e,t)}getDisplayName(e){return this.utils.pathUtils.getDisplayName(e)}async stat(e){return this.utils.raw.stat(e)}async createDirectory(e){return this.utils.createDirectory(e)}async deleteDirectory(e){return this.utils.deleteDirectory(e)}async listdir(e){return this.utils.listdir(e)}async readFile(e){return this.utils.raw.readText(e)}async readData(e){return this.utils.raw.readData(e)}async writeFile(e,t){return this.utils.raw.writeText(e,t)}async appendFile(e,t){return this.utils.raw.appendText(e,t)}async copyFile(e,t){return this.utils.raw.copyFile(e,t)}async deleteFile(e){return this.utils.deleteFile(e)}async chmod(e,t){return this.utils.raw.chmod(e,t)}async move(e,t){await this.utils.raw.move(e,t)}readFileSync(e){return this.utils.raw.readTextSync(e)}createReadStream(e){return this.utils.raw.createReadStream(e)}createWriteStream(e){return this.utils.raw.createWriteStream(e)}async fileExists(e){return this.utils.fileExists(e)}pathExists(e){return this.utils.pathExists(e)}fileExistsSync(e){return this.utils.fileExistsSync(e)}async directoryExists(e){return this.utils.directoryExists(e)}async getSubDirectories(e){return this.utils.getSubDirectories(e)}async getFiles(e){return this.utils.getFiles(e)}async getFileHash(e){return this.utils.getFileHash(e)}async search(e,t,n){return this.utils.search(e,t,n)}async createTemporaryFile(e,t){return this.utils.tmp.createFile(e,t)}async isDirReadonly(e){return this.utils.isDirReadonly(e)}};E=r([a.injectable()],E),t.FileSystem=E},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(32),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof i[e]);Object.keys(i).forEach(e=>{"promises"!==e&&(t[e]=i[e])}),o.forEach(e=>{t[e]=r(i[e])}),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise(t=>i.exists(e,t))},t.read=function(e,t,n,r,o,s){return"function"==typeof s?i.read(e,t,n,r,o,s):new Promise((s,a)=>{i.read(e,t,n,r,o,(e,t,n)=>{if(e)return a(e);s({bytesRead:t,buffer:n})})})},t.write=function(e,t,...n){return"function"==typeof n[n.length-1]?i.write(e,t,...n):new Promise((r,o)=>{i.write(e,t,...n,(e,t,n)=>{if(e)return o(e);r({bytesWritten:t,buffer:n})})})},"function"==typeof i.writev&&(t.writev=function(e,t,...n){return"function"==typeof n[n.length-1]?i.writev(e,t,...n):new Promise((r,o)=>{i.writev(e,t,...n,(e,t,n)=>{if(e)return o(e);r({bytesWritten:t,buffers:n})})})}),"function"==typeof i.realpath.native&&(t.realpath.native=r(i.realpath.native))},function(e,t,n){"use strict";const r=n(120),i=n(0),o=n(24),s=n(178)("10.5.0"),a=e=>s?r.stat(e,{bigint:!0}):r.stat(e),c=e=>s?r.statSync(e,{bigint:!0}):r.statSync(e);function u(e,t){return Promise.all([a(e),a(t).catch(e=>{if("ENOENT"===e.code)return null;throw e})]).then(([e,t])=>({srcStat:e,destStat:t}))}function l(e,t){if(t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev){if(s||t.ino<Number.MAX_SAFE_INTEGER)return!0;if(t.size===e.size&&t.mode===e.mode&&t.nlink===e.nlink&&t.atimeMs===e.atimeMs&&t.mtimeMs===e.mtimeMs&&t.ctimeMs===e.ctimeMs&&t.birthtimeMs===e.birthtimeMs)return!0}return!1}function p(e,t){const n=i.resolve(e).split(i.sep).filter(e=>e),r=i.resolve(t).split(i.sep).filter(e=>e);return n.reduce((e,t,n)=>e&&r[n]===t,!0)}function d(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:function(e,t,n,r){o.callbackify(u)(e,t,(i,o)=>{if(i)return r(i);const{srcStat:s,destStat:a}=o;return a&&l(s,a)?r(new Error("Source and destination must not be the same.")):s.isDirectory()&&p(e,t)?r(new Error(d(e,t,n))):r(null,{srcStat:s,destStat:a})})},checkPathsSync:function(e,t,n){const{srcStat:r,destStat:i}=function(e,t){let n;const r=c(e);try{n=c(t)}catch(e){if("ENOENT"===e.code)return{srcStat:r,destStat:null};throw e}return{srcStat:r,destStat:n}}(e,t);if(i&&l(r,i))throw new Error("Source and destination must not be the same.");if(r.isDirectory()&&p(e,t))throw new Error(d(e,t,n));return{srcStat:r,destStat:i}},checkParentPaths:function e(t,n,o,a,c){const u=i.resolve(i.dirname(t)),p=i.resolve(i.dirname(o));if(p===u||p===i.parse(p).root)return c();const h=(r,i)=>r?"ENOENT"===r.code?c():c(r):l(n,i)?c(new Error(d(t,o,a))):e(t,n,p,a,c);s?r.stat(p,{bigint:!0},h):r.stat(p,h)},checkParentPathsSync:function e(t,n,r,o){const s=i.resolve(i.dirname(t)),a=i.resolve(i.dirname(r));if(a===s||a===i.parse(a).root)return;let u;try{u=c(a)}catch(e){if("ENOENT"===e.code)return;throw e}if(l(n,u))throw new Error(d(t,r,o));return e(t,n,a,o)},isSrcSubdir:p}},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(237);e.exports={remove:r(i),removeSync:i.sync}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return p}));var r=n(2),i=n(30),o=n(15),s=n(41),a=n(42),c=n(54),u={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(i.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o.a)(e[0])&&(e=e[0]),Object(c.a)(e,r).lift(new p(n))}var p=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.b(t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(a.a)(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===u?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(3);function i(e,t,n){return void 0===e&&(e=0),new r.a((function(r){void 0===t&&(t=e,e=0);var i=0,s=e;if(n)return n.schedule(o,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(s++),r.closed)break}}))}function o(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),i=n(8),o=n(10),s=n(3),a=n(27);i.a;var c=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return r.b(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(i.a),u=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r.b(t,e),t.prototype._subscribe=function(e){var t=new o.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new l(n)),t.add(r.subscribe(e)),t},t}(s.a),l=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r.b(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenFilePrefix=t.EXTENSION_ROOT_DIR=void 0;const r=n(0),i=r.basename(__dirname);t.EXTENSION_ROOT_DIR="client"===i?r.join(__dirname,"..",".."):r.join(__dirname,"..","..","..",".."),t.HiddenFilePrefix="_HiddenFile_"},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileFilter=t.getFileType=t.convertFileType=t.FileType=t.normalizeFilename=void 0;const r=n(16),i=n(0),o=n(5),s=n(4),a=n(9);function c(e){return e.isFile()?t.FileType.File:e.isDirectory()?t.FileType.Directory:e.isSymbolicLink()?t.FileType.SymbolicLink:t.FileType.Unknown}async function u(e,n={ignoreErrors:!0}){let i;try{i=await r.promises.lstat(e)}catch(r){if("ENOENT"===r.code)return;if(n.ignoreErrors)return s.traceError(`lstat() failed for "${e}" (${r})`),t.FileType.Unknown;throw r}return c(i)}t.normalizeFilename=function(e){const t=i.resolve(e);return a.getOSType()===a.OSType.Windows?t.toLowerCase():t},t.FileType=o.FileType,t.convertFileType=c,t.getFileType=u,t.getFileFilter=function(e={ignoreMissing:!0}){const n=function(e){if(void 0!==e){if(Array.isArray(e)){if(0===e.length)return;return e}return[e]}}(e.ignoreFileType);if(e.ignoreMissing||n)return async function(r){let i=await async function(e,t={}){let n;if("string"!=typeof e){if(!t.ensure){if(void 0===t.onMissing)return e;if(void 0!==await u(e.filename))return e}n=e.filename}else n=e;const r=await u(n)||t.onMissing;if(void 0!==r)return{filename:n,filetype:r}}(r,{ensure:e.ensureEntry});if(!i){if(e.ignoreMissing)return!1;i={filename:"string"==typeof r?r:r.filename,filetype:t.FileType.Unknown}}return!n||!n.includes(i.filetype)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemVariables=void 0;const r=n(0),i=n(5),o=n(305);t.SystemVariables=class extends class{resolve(e){return o.isString(e)?this.__resolveString(e):o.isArray(e)?this.__resolveArray(e):o.isObject(e)?this.__resolveLiteral(e):e}resolveAny(e){return o.isString(e)?this.__resolveString(e):o.isArray(e)?this.__resolveAnyArray(e):o.isObject(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,(e,t)=>{const n=this[t];return o.isString(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e})}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach(n=>{const r=e[n];t[n]=this.resolve(r)}),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach(n=>{const r=e[n];t[n]=this.resolveAny(r)}),t}__resolveArray(e){return e.map(e=>this.__resolveString(e))}__resolveAnyArray(e){return e.map(e=>this.resolveAny(e))}}{constructor(e,t,n,o){super();const s=n&&e?n.getWorkspaceFolder(e):void 0;this._workspaceFolder=s?s.uri.fsPath:t||__dirname,this._workspaceFolderName=r.basename(this._workspaceFolder),this._filePath=e?e.fsPath:void 0,o&&o.activeTextEditor&&(this._lineNumber=o.activeTextEditor.selection.anchor.line+1,this._selectedText=o.activeTextEditor.document.getText(new i.Range(o.activeTextEditor.selection.start,o.activeTextEditor.selection.end))),this._execPath=process.execPath,Object.keys(process.env).forEach(e=>{this["env:"+e]=this["env."+e]=process.env[e]})}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get workspaceRootFolderName(){return this._workspaceFolderName}get workspaceFolderBasename(){return this._workspaceFolderName}get file(){return this._filePath}get relativeFile(){return this.file?r.relative(this._workspaceFolder,this.file):void 0}get relativeFileDirname(){return this.relativeFile?r.dirname(this.relativeFile):void 0}get fileBasename(){return this.file?r.basename(this.file):void 0}get fileBasenameNoExtension(){return this.file?r.parse(this.file).name:void 0}get fileDirname(){return this.file?r.dirname(this.file):void 0}get fileExtname(){return this.file?r.extname(this.file):void 0}get lineNumber(){return this._lineNumber}get selectedText(){return this._selectedText}get execPath(){return this._execPath}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModuleVersion=t.isModuleInstalled=t.isValid=t.getUserSitePackages=t.getSitePackages=t.getExecutable=t.getSysPrefix=t.execModule=t.execCode=void 0,t.execCode=function(e){return["-c",e]},t.execModule=function(e,t){return["-m",e,...t]},t.getSysPrefix=function(){return[["-c","import sys;print(sys.prefix)"],function(e){return e.trim()}]},t.getExecutable=function(){return[["-c","import sys;print(sys.executable)"],function(e){return e.trim()}]},t.getSitePackages=function(){return[["-c","from distutils.sysconfig import get_python_lib; print(get_python_lib())"],function(e){return e.trim()}]},t.getUserSitePackages=function(){return[["site","--user-site"],function(e){return e.trim()}]},t.isValid=function(){return[["-c","print(1234)"],function(e){return e.startsWith("1234")}]},t.isModuleInstalled=function(e){return[["-c","import "+e],function(e){return!0}]},t.getModuleVersion=function(e){return[["-c",`import ${e}; print(${e}.__version__)`],function(e){return e.trim()}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRegistryInterpreters=t.getRegistryInterpretersSync=t.getInterpreterDataFromRegistry=t.matchPythonBinFilename=t.matchBasicPythonBinFilename=void 0;const r=n(47),i=n(0),o=n(17),s=n(4),a=n(314);async function c(e,t,n){const r=await a.readRegistryKeys({arch:e,hive:t,key:n}),i=n.substr(n.lastIndexOf("\\")+1);return(await Promise.all(r.map(e=>async function({arch:e,hive:t,key:n},r){const i={interpreterPath:"",distroOrgName:r},o=await a.readRegistryValues({arch:e,hive:t,key:n});for(const e of o)switch(e.name){case"SysArchitecture":i.bitnessStr=e.value;break;case"SysVersion":i.sysVersionStr=e.value;break;case"Version":i.versionStr=e.value;break;case"DisplayName":i.companyDisplayName=e.value}const c=(await a.readRegistryKeys({arch:e,hive:t,key:n})).map(e=>e.key).find(e=>e.endsWith("InstallPath"));if(c){const n=(await a.readRegistryValues({arch:e,hive:t,key:c})).find(e=>"ExecutablePath"===e.name);n&&(i.interpreterPath=n.value,n.type!==a.REG_SZ&&s.traceVerbose(`Registry interpreter path type [${n.type}]: ${n.value}`))}if(i.interpreterPath.length>0)return i}(e,i)))).filter(e=>void 0!==e)||[]}let u,l;t.matchBasicPythonBinFilename=function(e){return"python.exe"===i.basename(e).toLowerCase()},t.matchPythonBinFilename=function(e){return/^python(\d+(.\d+)?)?\.exe$/.test(i.basename(e))},t.getInterpreterDataFromRegistry=c,t.getRegistryInterpretersSync=function(){return o.isTestExecution()?void 0:u},t.getRegistryInterpreters=async function(){return o.isTestExecution()||void 0===l?(l=async function(){let e=[];for(const t of["x64","x86"])for(const n of[a.HKLM,a.HKCU]){const r="\\SOFTWARE\\Python";let i=[];try{i=(await a.readRegistryKeys({arch:t,hive:n,key:r})).map(e=>e.key)}catch(e){s.traceError(`Failed to access Registry: ${t}\\${n}\\${r}`,e)}for(const r of i)e=e.concat(await c(t,n,r))}return u=r.uniqBy(e,e=>e.interpreterPath),u}(),l):l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICodeExecutionManager=t.ICodeExecutionHelper=t.ICodeExecutionService=void 0,t.ICodeExecutionService=Symbol("ICodeExecutionService"),t.ICodeExecutionHelper=Symbol("ICodeExecutionHelper"),t.ICodeExecutionManager=Symbol("ICodeExecutionManager")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentVariablesProvider=t.IEnvironmentVariablesService=void 0,t.IEnvironmentVariablesService=Symbol("IEnvironmentVariablesService"),t.IEnvironmentVariablesProvider=Symbol("IEnvironmentVariablesProvider")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterComparer=t.IInterpreterSelector=t.IPythonPathUpdaterServiceManager=t.IPythonPathUpdaterServiceFactory=void 0,t.IPythonPathUpdaterServiceFactory=Symbol("IPythonPathUpdaterServiceFactory"),t.IPythonPathUpdaterServiceManager=Symbol("IPythonPathUpdaterServiceManager"),t.IInterpreterSelector=Symbol("IInterpreterSelector"),t.IInterpreterComparer=Symbol("IInterpreterComparer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWindowsStoreEnvironment=t.isStorePythonInstalled=t.isWindowsStoreDir=t.getWindowsStoreAppsRoot=void 0;const r=n(0),i=n(9),o=n(4),s=n(19);function a(){const e=i.getEnvironmentVariable("LOCALAPPDATA")||"";return r.join(e,"Microsoft","WindowsApps")}function c(e){const t=r.join(i.getEnvironmentVariable("ProgramFiles")||"Program Files","WindowsApps").normalize().toUpperCase();return r.normalize(e).toUpperCase().includes(t)}async function u(e){let t=await Promise.all([s.pathExists(r.join(a(),"idle.exe")),s.pathExists(r.join(a(),"pip.exe"))]);return!!t.includes(!0)||!!e&&(t=await Promise.all([s.pathExists(r.join(r.dirname(e),"idle.exe")),s.pathExists(r.join(r.dirname(e),"pip.exe"))]),t.includes(!0))}t.getWindowsStoreAppsRoot=a,t.isWindowsStoreDir=function(e){const t=r.normalize(a()).toUpperCase();return r.normalize(e).toUpperCase().includes(t)||c(e)},t.isStorePythonInstalled=u,t.isWindowsStoreEnvironment=async function(e){if(await u(e)){const t=r.normalize(e).toUpperCase(),n=r.normalize(a()).toUpperCase();if(t.includes(n))return!0;if(c(t))return o.traceWarn("isWindowsStoreEnvironment called with Program Files store path."),!0}return!1}},function(e,t,n){"use strict";const r=n(0),i={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},o={...i,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:r.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?o:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locator=t.NOOP_ITERATOR=void 0;const r=n(11),i=n(114);t.NOOP_ITERATOR=r.iterEmpty();t.Locator=class extends class{constructor(e){this.emitter=e,this.onChanged=e.onChanged}}{constructor(){super(new i.PythonEnvsWatcher)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseShellDetector=void 0;const o=n(1),s=n(4),a=n(20),c=new Map;c.set(a.TerminalShellType.powershell,/(powershell$)/i),c.set(a.TerminalShellType.gitbash,/(gitbash$)/i),c.set(a.TerminalShellType.bash,/(bash$)/i),c.set(a.TerminalShellType.wsl,/(wsl$)/i),c.set(a.TerminalShellType.zsh,/(zsh$)/i),c.set(a.TerminalShellType.ksh,/(ksh$)/i),c.set(a.TerminalShellType.commandPrompt,/(cmd$)/i),c.set(a.TerminalShellType.fish,/(fish$)/i),c.set(a.TerminalShellType.tcshell,/(tcsh$)/i),c.set(a.TerminalShellType.cshell,/(csh$)/i),c.set(a.TerminalShellType.powershellCore,/(pwsh$)/i),c.set(a.TerminalShellType.xonsh,/(xonsh$)/i);let u=class{constructor(e){this.priority=e}identifyShellFromShellPath(e){const t=e.replace(/\.exe$/,""),n=Array.from(c.keys()).reduce((e,n)=>{if(e===a.TerminalShellType.other){const e=c.get(n);if(e&&e.test(t))return n}return e},a.TerminalShellType.other);return s.traceVerbose(`Shell path '${e}', base path '${t}'`),s.traceVerbose(`Shell path identified as shell '${n}'`),n}};u=r([o.injectable(),i(0,o.unmanaged())],u),t.BaseShellDetector=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(8),i=n(59),o=n(105);function s(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(o.a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3);function i(e,t){return t?new r.a((function(n){return t.schedule(o,0,{error:e,subscriber:n})})):new r.a((function(t){return t.error(e)}))}function o(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(36),i=function(e){return function(t){var n=e[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(36);function i(e){return e&&"function"==typeof e[r.a]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(34);function i(e){return e&&"function"==typeof e[r.a]}},function(e,t,n){"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(2),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.b(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(56).a),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.b(t,e),t}(n(55).a);n.d(t,"a",(function(){return s}));var s=new o(i)},function(e,t,n){"use strict";var r=n(3),i=n(10),o=n(36);var s=n(151),a=n(102),c=n(152),u=n(146),l=n(99),p=n(98),d=n(147);function h(e,t){if(null!=e){if(Object(u.a)(e))return function(e,t){return new r.a((function(n){var r=new i.a;return r.add(t.schedule((function(){var i=e[o.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Object(l.a)(e))return Object(s.a)(e,t);if(Object(p.a)(e))return Object(a.a)(e,t);if(Object(d.a)(e)||"string"==typeof e)return Object(c.a)(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",(function(){return h}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),i=n(10);function o(e,t){return new r.a((function(n){var r=new i.a;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),i=n(10),o=n(34);function s(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,s=new i.a;return s.add((function(){r&&"function"==typeof r.return&&r.return()})),s.add(t.schedule((function(){r=e[o.a](),s.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),s}))}},function(e,t){e.exports=require("constants")},function(e,t){e.exports={stringify:function(e,{EOL:t="\n",finalEOL:n=!0,replacer:r=null,spaces:i}={}){const o=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+o},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(32),o=n(0),s=n(51),a=n(69).pathExists;e.exports={outputFile:r((function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const c=o.dirname(e);a(c,(o,a)=>o?r(o):a?i.writeFile(e,t,n,r):void s.mkdirs(c,o=>{if(o)return r(o);i.writeFile(e,t,n,r)}))})),outputFileSync:function(e,...t){const n=o.dirname(e);if(i.existsSync(n))return i.writeFileSync(e,...t);s.mkdirsSync(n),i.writeFileSync(e,...t)}}},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||r)}e.exports="win32"===process.platform?i:r,e.exports.posix=r,e.exports.win32=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n(158),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n(157),i=n(191),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},function(e,t,n){"use strict";function r(e,t){if(void 0===e)return"undefined";if(null===e)return"null";try{return e&&e.fsPath?`<Uri:${e.fsPath}>`:JSON.stringify(e)}catch(e){return`<${t} cannot be serialized for logging>`}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeForLogging=t.returnValueToLogString=t.argsToLogString=void 0,t.argsToLogString=function(e){if(!e)return"";try{return e.map((e,t)=>`Arg ${t+1}: ${r(e,"argument")}`).join(", ")}catch(e){return""}},t.returnValueToLogString=function(e){return"Return Value: "+r(e,"Return value")},t.getTimeForLogging=function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}.${e.getMilliseconds()}`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvFileTelemetryTests=t.sendActivationTelemetry=t.sendFileCreationTelemetry=t.sendSettingTelemetry=void 0;const r=n(133),i=n(21),o=n(22);let s,a=!1;function c(e=!1){i.sendTelemetryEvent(o.EventName.ENVFILE_WORKSPACE,void 0,{hasCustomEnvPath:e}),a=!0}function u(){return!a}function l(e){var t;if(!s){const n=e.getConfiguration("python");s=(null===(t=n.inspect("envFile"))||void 0===t?void 0:t.defaultValue)||""}return s}t.sendSettingTelemetry=function(e,t){u()&&t!==l(e)&&c(!0)},t.sendFileCreationTelemetry=function(){u()&&c()},t.sendActivationTelemetry=async function(e,t,n){if(u()){const i=new r.SystemVariables(n,void 0,t).resolveAny(l(t));await e.fileExists(i)&&c()}},t.EnvFileTelemetryTests={setState:({telemetrySent:e,defaultSetting:t})=>{void 0!==e&&(a=e),void 0!==l&&(s=t)},resetState:()=>{s=void 0,a=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductNames=void 0;const r=n(6);t.ProductNames=new Map,t.ProductNames.set(r.Product.autopep8,"autopep8"),t.ProductNames.set(r.Product.bandit,"bandit"),t.ProductNames.set(r.Product.black,"black"),t.ProductNames.set(r.Product.flake8,"flake8"),t.ProductNames.set(r.Product.mypy,"mypy"),t.ProductNames.set(r.Product.pycodestyle,"pycodestyle"),t.ProductNames.set(r.Product.pylama,"pylama"),t.ProductNames.set(r.Product.prospector,"prospector"),t.ProductNames.set(r.Product.pydocstyle,"pydocstyle"),t.ProductNames.set(r.Product.pylint,"pylint"),t.ProductNames.set(r.Product.pytest,"pytest"),t.ProductNames.set(r.Product.yapf,"yapf"),t.ProductNames.set(r.Product.tensorboard,"tensorboard"),t.ProductNames.set(r.Product.torchProfilerInstallName,"torch-tb-profiler"),t.ProductNames.set(r.Product.torchProfilerImportName,"torch_tb_profiler"),t.ProductNames.set(r.Product.jupyter,"jupyter"),t.ProductNames.set(r.Product.notebook,"notebook"),t.ProductNames.set(r.Product.ipykernel,"ipykernel"),t.ProductNames.set(r.Product.nbconvert,"nbconvert"),t.ProductNames.set(r.Product.kernelspec,"kernelspec"),t.ProductNames.set(r.Product.pandas,"pandas")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.isPoetryEnvironmentRelatedToFolder=t.Poetry=t.isPoetryEnvironment=t.localPoetryEnvDirName=void 0;const i=n(0),o=n(9),s=n(19),a=n(46),c=n(87),u=n(64),l=n(86),p=n(17),d=n(4),h=/^(.+)-(.+)-py(\d).(\d){1,2}$/;t.localPoetryEnvDirName=".venv",t.isPoetryEnvironment=async function(e){return!!await async function(e){const t=a.getEnvironmentDirFromPath(e);return!!h.test(i.basename(t))&&c.isVirtualenvEnvironment(e)}(e)||!!await async function(e){const n=a.getEnvironmentDirFromPath(e);return i.basename(n)===t.localPoetryEnvDirName&&!!v(i.dirname(n))}(e)};class f{constructor(e,t){this.command=e,this.cwd=t,this.fixCwd()}static async getPoetry(e){if(v(e))return d.traceVerbose("Getting poetry for cwd "+e),(void 0===f.poetryPromise.get(e)||p.isTestExecution())&&f.poetryPromise.set(e,f.locate(e)),f.poetryPromise.get(e)}static async locate(e){for(const t of function*(){const e=s.getPythonSetting("poetryPath");e&&"poetry"!==e&&(yield e),yield"poetry";const t=o.getUserHomeDir();if(t){const e=i.join(t,".poetry","bin","poetry");s.pathExistsSync(e)&&(yield e)}}()){d.traceVerbose(`Probing poetry binary for ${e}: ${t}`);const n=new f(t,e);if(void 0!==await n.getEnvList())return d.traceVerbose(`Found poetry via filesystem probing for ${e}: ${t}`),n}d.traceVerbose("No poetry binary found for "+e)}async getEnvList(){return this.getEnvListCached(this.cwd)}async getEnvListCached(e){const t=await this.safeShellExecute(this.command+" env list --full-path");if(!t)return;return t.stdout.splitLines().map(e=>(e.endsWith("(Activated)")&&(e=e.slice(0,-"(Activated)".length)),e.trim()))}async getActiveEnvPath(){return this.getActiveEnvPathCached(this.cwd)}async getActiveEnvPathCached(e){const t=await this.safeShellExecute(this.command+" env info -p",!0);if(t)return t.stdout.trim()}async getVirtualenvsPathSetting(){const e=await this.safeShellExecute(this.command+" config virtualenvs.path");if(e)return e.stdout.trim()}fixCwd(){if(o.getOSType()===o.OSType.Windows&&/^[a-z]:/.test(this.cwd)){const e=this.cwd.split(":");e[0]=e[0].toUpperCase(),this.cwd=e.join(":")}}async safeShellExecute(e,t=!1){const n=new u.StopWatch,r=await s.shellExecute(e,{cwd:this.cwd,throwOnStdErr:!0}).catch(e=>{t?d.traceVerbose(e):d.traceError(e)});return d.traceVerbose(`Time taken to run ${e} in ms`,n.elapsedTime),r}}function v(e){const t=i.join(e,"pyproject.toml");if(!s.pathExistsSync(t))return!1;return!!s.readFileSync(t).includes("[tool.poetry]")}f.poetryPromise=new Map,r([l.cache(3e4,!0,1e4)],f.prototype,"getEnvListCached",null),r([l.cache(2e4,!0,1e4)],f.prototype,"getActiveEnvPathCached",null),t.Poetry=f,t.isPoetryEnvironmentRelatedToFolder=async function(e,t,n){const r=n?new f(n,t):await f.getPoetry(t),i=await(null==r?void 0:r.getActiveEnvPath());return!!i&&s.isParentPath(e,i)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.getArchitectureDisplayName=t.RegistryImplementation=void 0;const i=n(1),o=n(4),s=n(9),a=n(13);var c;!function(e){e.x86="x86",e.x64="x64"}(c||(c={}));let u=class{async getKeys(e,t,r){return async function(e){const t=n(85);return new Promise(n=>{new t(e).keys((e,t)=>{if(e||!Array.isArray(t))return n([]);n(t.filter(e=>"string"==typeof e.key).map(e=>e.key))})})}({hive:p(t),arch:l(r),key:e}).catch(e=>(o.traceError("Fetching keys from windows registry resulted in an error",e),[]))}async getValue(e,t,r,i=""){return async function(e,t=""){const r=n(85);return new Promise(n=>{new r(e).get(t,(e,t)=>{if(e||!t||"string"!=typeof t.value)return n(void 0);n(t.value)})})}({hive:p(t),arch:l(r),key:e},i).catch(e=>{o.traceError("Fetching key value from windows registry resulted in an error",e)})}};function l(e){switch(e){case s.Architecture.x86:return c.x86;case s.Architecture.x64:return c.x64;default:return}}function p(e){const t=n(85);switch(e){case a.RegistryHive.HKCU:return t.HKCU;case a.RegistryHive.HKLM:return t.HKLM;default:return}}u=r([i.injectable()],u),t.RegistryImplementation=u,t.getArchitectureDisplayName=function(e){switch(e){case s.Architecture.x64:return"64-bit";case s.Architecture.x86:return"32-bit";default:return""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=t.clearCache=t.getCacheKeyFromFunctionArgs=t.getGlobalCacheStore=void 0;const r=new Map;t.getGlobalCacheStore=function(){return r},t.getCacheKeyFromFunctionArgs=function(e,t){return`KeyPrefix=${e}-Args=${t.map(e=>""+JSON.stringify(e)).join("-Arg-Separator-")}`},t.clearCache=function(){r.clear()};t.InMemoryCache=class{constructor(e){this.expiryDurationMs=e}get hasData(){return!(!this.cacheData||this.hasExpired(this.cacheData.expiry))||(this.cacheData=void 0,!1)}get data(){var e;if(this.hasData)return null===(e=this.cacheData)||void 0===e?void 0:e.value}set data(e){this.cacheData=void 0!==e?{expiry:this.calculateExpiry(),value:e}:void 0}clear(){this.cacheData=void 0}hasExpired(e){return e<=Date.now()}calculateExpiry(){return Date.now()+this.expiryDurationMs}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonBinFromPosixPaths=t.commonPosixBinPaths=t.matchPythonBinFilename=t.matchBasicPythonBinFilename=void 0;const r=n(16),i=n(44),o=n(0),s=n(47),a=n(80),c=n(19),u=n(4);function l(e){return/^python(\d+(\.\d+)?)?$/.test(o.basename(e))}async function p(e){return(await r.promises.readdir(e,{withFileTypes:!0})).filter(e=>!e.isDirectory()).map(t=>o.join(e,t.name)).filter(l)}t.matchBasicPythonBinFilename=function(e){return"python"===o.basename(e)},t.matchPythonBinFilename=l,t.commonPosixBinPaths=async function(){const e=a.getSearchPathEntries(),t=Array.from(new Set(["/bin","/etc","/lib","/lib/x86_64-linux-gnu","/lib64","/sbin","/snap/bin","/usr/bin","/usr/games","/usr/include","/usr/lib","/usr/lib/x86_64-linux-gnu","/usr/lib64","/usr/libexec","/usr/local","/usr/local/bin","/usr/local/etc","/usr/local/games","/usr/local/lib","/usr/local/sbin","/usr/sbin","/usr/share","~/.local/bin"].concat(e))),n=await Promise.all(t.map(e=>i.pathExists(e)));return t.filter((e,t)=>n[t])},t.getPythonBinFromPosixPaths=async function(e){var t;const n=new Map;for(const r of e){const e=await p(r);for(const r of e)try{const e=await c.resolveSymbolicLink(r);n.has(e)?null===(t=n.get(e))||void 0===t||t.push(r):n.set(e,[r]),u.traceInfo(`Found: ${r} --\x3e ${e}`)}catch(e){u.traceError("Failed to resolve symbolic link: ",e)}}const r=Array.from(n.keys()).map(e=>{var t;return function(e){let t=e[0].length,n=e[0];for(const r of e)r.length<=t&&(t=r.length,n=r);return n}([e,...null!==(t=n.get(e))&&void 0!==t?t:[]])});return s.uniq(r)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalCodeExecutionProvider=void 0;const o=n(1),s=n(0),a=n(7);n(14);const c=n(13),u=n(20),l=n(6),p=n(72);let d=class{constructor(e,t,n,r,i){this.terminalServiceFactory=e,this.configurationService=t,this.workspace=n,this.disposables=r,this.platformService=i}async executeFile(e){await this.setCwdForFileExecution(e);const{command:t,args:n}=await this.getExecuteFileArgs(e,[e.fsPath.fileToCommandArgument()]);await this.getTerminalService(e).sendCommand(t,n)}async execute(e,t){e&&0!==e.trim().length&&(await this.initializeRepl(),await this.getTerminalService(t).sendText(e))}async initializeRepl(e){this.replActive&&await this.replActive?await this._terminalService.show():(this.replActive=new Promise(async t=>{const n=await this.getExecutableInfo(e);await this.getTerminalService(e).sendCommand(n.command,n.args),setTimeout(()=>t(!0),1e3)}),await this.replActive)}async getExecutableInfo(e,t=[]){const n=this.configurationService.getSettings(e),r=this.platformService.isWindows?n.pythonPath.replace(/\\/g,"/"):n.pythonPath,i=n.terminal.launchArgs;return p.buildPythonExecInfo(r,[...i,...t])}async getExecuteFileArgs(e,t=[]){return this.getExecutableInfo(e,t)}getTerminalService(e){return this._terminalService||(this._terminalService=this.terminalServiceFactory.getTerminalService({resource:e,title:this.terminalTitle}),this.disposables.push(this._terminalService.onDidCloseTerminal(()=>{this.replActive=void 0}))),this._terminalService}async setCwdForFileExecution(e){if(!this.configurationService.getSettings(e).terminal.executeInFileDir)return;const t=s.dirname(e.fsPath);if(t.length>0){if(this.platformService.isWindows&&/[a-z]\:/i.test(t)){const n="string"==typeof this.workspace.rootPath?this.workspace.rootPath.replace(/\:.*/g,""):void 0,r=t.replace(/\:.*/g,"");r!==n&&await this.getTerminalService(e).sendText(r+":")}await this.getTerminalService(e).sendText("cd "+t.fileToCommandArgument())}}};d=r([o.injectable(),i(0,o.inject(u.ITerminalServiceFactory)),i(1,o.inject(l.IConfigurationService)),i(2,o.inject(a.IWorkspaceService)),i(3,o.inject(l.IDisposableRegistry)),i(4,o.inject(c.IPlatformService))],d),t.TerminalCodeExecutionProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._SCRIPTS_DIR=void 0;const r=n(0),i=n(17);t._SCRIPTS_DIR=r.join(i.EXTENSION_ROOT_DIR,"pythonFiles")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchLocationForPattern=t.FileChangeType=void 0;const r=n(369),i=n(0),o=n(5),s=n(4),a=n(74),c=n(79);var u;!function(e){e.Changed="changed",e.Created="created",e.Deleted="deleted"}(u=t.FileChangeType||(t.FileChangeType={}));t.watchLocationForPattern=function(e,t,n){var l;return(null===(l=o.workspace.workspaceFolders)||void 0===l?void 0:l.find(t=>c.normCasePath(e).startsWith(c.normCasePath(t.uri.fsPath))))?function(e,t,n){const r=new o.RelativePattern(e,t),i=new a.Disposables;s.traceVerbose(`Start watching: ${e} with pattern ${t} using VSCode API`);const c=o.workspace.createFileSystemWatcher(r);return i.push(c.onDidCreate(e=>n(u.Created,e.fsPath))),i.push(c.onDidChange(e=>n(u.Changed,e.fsPath))),i.push(c.onDidDelete(e=>n(u.Deleted,e.fsPath))),i}(e,t,n):function(e,t,n){const o={cwd:e,ignoreInitial:!0,ignorePermissionErrors:!0,interval:5e3,binaryInterval:5e3,depth:2,ignored:["**/Lib/**","**/.git/**","**/node_modules/*/**","**/.hg/store/**","/dev/**","/proc/**","/sys/**","**/lib/**","**/includes/**"],followSymlinks:!0};s.traceVerbose(`Start watching: ${e} with pattern ${t} using chokidar`);let a=r.watch(t,o);a.on("all",(t,r)=>{const o=i.join(e,r);let s;switch(t){case"change":s=u.Changed;break;case"add":case"addDir":s=u.Created;break;case"unlink":case"unlinkDir":s=u.Deleted;break;default:return}n(s,o)});const c=async()=>{if(a){const e=a;a=null;try{await e.close()}catch(e){s.traceError(`Failed to close FS watcher (${e})`)}}};return a.on("error",async n=>{n&&("ENOSPC"===n.code?(s.traceError(`Inotify limit reached (ENOSPC) for ${e} with pattern ${t}`),await c()):s.traceVerbose(n.toString()))}),{dispose:()=>c().ignoreErrors()}}(e,t,n)}},function(e,t,n){"use strict";const r=n(0),i="win32"===process.platform,{REGEX_BACKSLASH:o,REGEX_REMOVE_BACKSLASH:s,REGEX_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_GLOBAL:c}=n(140);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>a.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(o,"/"),t.removeBackslashes=e=>e.replace(s,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===i||"\\"===r.sep,t.escapeLast=(e,n,r)=>{const i=e.lastIndexOf(n,r);return-1===i?e:"\\"===e[i-1]?t.escapeLast(e,n,i-1):`${e.slice(0,i)}\\${e.slice(i)}`},t.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},t.wrapOutput=(e,t={},n={})=>{let r=`${n.contains?"":"^"}(?:${e})${n.contains?"":"$"}`;return!0===t.negated&&(r=`(?:^(?!${r}).*$)`),r}},function(e,t,n){"use strict";const r=n(171);e.exports=(e,t={})=>{let n=(e,i={})=>{let o=t.escapeInvalid&&r.isInvalidBrace(i),s=!0===e.invalid&&!0===t.escapeInvalid,a="";if(e.value)return(o||s)&&r.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)a+=n(t);return a};return n(e)}},function(e,t,n){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,n,r=1,i)=>!1!==i&&(!(!t.isInteger(e)||!t.isInteger(n))&&(Number(n)-Number(e))/Number(r)>=i),t.escapeNode=(e,t=0,n)=>{let r=e.nodes[t];r&&(n&&r.type===n||"open"===r.type||"close"===r.type)&&!0!==r.escaped&&(r.value="\\"+r.value,r.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],n=e=>{for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?n(i,t):void 0!==i&&t.push(i)}return t};return n(e),t}},function(e,t,n){"use strict";const{sep:r}=n(0),{platform:i}=process;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH="."+r,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=e=>e,t.isWindows="win32"===i,t.isMacos="darwin"===i,t.isLinux="linux"===i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const i=n(1),o=n(0),s=n(5),a=n(9);let c=class{get onDidChangeConfiguration(){return s.workspace.onDidChangeConfiguration}get rootPath(){return Array.isArray(s.workspace.workspaceFolders)&&s.workspace.workspaceFolders.length>0?s.workspace.workspaceFolders[0].uri.fsPath:void 0}get workspaceFolders(){return s.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return s.workspace.onDidChangeWorkspaceFolders}get hasWorkspaceFolders(){return Array.isArray(s.workspace.workspaceFolders)&&s.workspace.workspaceFolders.length>0}get workspaceFile(){return s.workspace.workspaceFile}getConfiguration(e,t){return s.workspace.getConfiguration(e,t||null)}getWorkspaceFolder(e){return e?s.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return s.workspace.asRelativePath(e,t)}createFileSystemWatcher(e,t,n,r){return s.workspace.createFileSystemWatcher(e,t,n,r)}findFiles(e,t,n,r){const i=void 0===t?this.searchExcludes:t;return s.workspace.findFiles(e,i,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?s.workspace.getWorkspaceFolder(e):void 0;return n?o.normalize(a.getOSType()===a.OSType.Windows?n.uri.fsPath.toUpperCase():n.uri.fsPath):t}get searchExcludes(){const e=this.getConfiguration("search.exclude");return`{${Object.keys(e).filter(t=>!0===e.get(t)).join(",")}}`}};c=r([i.injectable()],c),t.WorkspaceService=c},function(e){e.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonSettings=void 0;const i=n(0),o=n(16),s=n(5);n(14);const a=n(160),c=n(173),u=n(17),l=n(224),p=n(86),d=n(133),h=n(9),f=n(110);class v{constructor(e,t,n,r){this.interpreterAutoSelectionService=t,this.interpreterPathService=r,this.downloadLanguageServer=!0,this.envFile="",this.venvPath="",this.venvFolders=[],this.condaPath="",this.pipenvPath="",this.poetryPath="",this.devOptions=[],this.disableInstallationChecks=!1,this.globalModuleInstallation=!1,this.autoUpdateLanguageServer=!0,this.languageServerIsDefault=!0,this.changed=new s.EventEmitter,this.disposables=[],this._pythonPath="python",this._defaultInterpreterPath="",this.workspace=n||new c.WorkspaceService,this.workspaceRoot=e,this.initialize()}get onDidChange(){return this.changed.event}get pythonPath(){return this._pythonPath}set pythonPath(e){if(this._pythonPath!==e)try{this._pythonPath=this.getPythonExecutable(e)}catch(t){this._pythonPath=e}}get defaultInterpreterPath(){return this._defaultInterpreterPath}set defaultInterpreterPath(e){if(this._defaultInterpreterPath!==e)try{this._defaultInterpreterPath=this.getPythonExecutable(e)}catch(t){this._defaultInterpreterPath=e}}static getInstance(e,t,n,r){n=n||new c.WorkspaceService;const i=v.getSettingsUriAndTarget(e,n).uri,o=i?i.fsPath:"";if(!v.pythonSettings.has(o)){const e=new v(i,t,n,r);v.pythonSettings.set(o,e)}return v.pythonSettings.get(o)}static getSettingsUriAndTarget(e,t){t=t||new c.WorkspaceService;const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri);return{uri:r,target:r?s.ConfigurationTarget.WorkspaceFolder:s.ConfigurationTarget.Global}}static dispose(){if(!u.isTestExecution())throw new Error("Dispose can only be called from unit tests");v.pythonSettings.forEach(e=>e&&e.dispose()),v.pythonSettings.clear()}static toSerializable(e){const t={};return Object.entries(e).forEach(e=>{const[n,r]=e;n.includes("Manager")||n.includes("Service")||n.includes("onDid")||(t[n]=r)}),t}dispose(){this.disposables.forEach(e=>e&&e.dispose()),this.disposables=[]}update(e){var t,n;const r=null===(t=this.workspaceRoot)||void 0===t?void 0:t.fsPath,i=new d.SystemVariables(void 0,r,this.workspace);this.pythonPath=this.getPythonPath(e,i,r);const o=i.resolveAny(e.get("defaultInterpreterPath"));if(this.defaultInterpreterPath=o||u.DEFAULT_INTERPRETER_SETTING,this.defaultInterpreterPath===u.DEFAULT_INTERPRETER_SETTING){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);this.defaultInterpreterPath=null!==(n=null==e?void 0:e.path)&&void 0!==n?n:this.defaultInterpreterPath}this.defaultInterpreterPath=y(this.defaultInterpreterPath,r),this.venvPath=i.resolveAny(e.get("venvPath")),this.venvFolders=i.resolveAny(e.get("venvFolders"));const s=i.resolveAny(e.get("condaPath"));this.condaPath=s&&s.length>0?y(s,r):s;const c=i.resolveAny(e.get("pipenvPath"));this.pipenvPath=c&&c.length>0?y(c,r):c;const l=i.resolveAny(e.get("poetryPath"));this.poetryPath=l&&l.length>0?y(l,r):l,this.downloadLanguageServer=i.resolveAny(e.get("downloadLanguageServer",!0)),this.autoUpdateLanguageServer=i.resolveAny(e.get("autoUpdateLanguageServer",!0));const p=e.get("envFile");this.envFile=i.resolveAny(p),a.sendSettingTelemetry(this.workspace,p),this.devOptions=i.resolveAny(e.get("devOptions")),this.devOptions=Array.isArray(this.devOptions)?this.devOptions:[],this.disableInstallationChecks=!0===e.get("disableInstallationCheck"),this.globalModuleInstallation=!0===e.get("globalModuleInstallation");const h=i.resolveAny(e.get("terminal"));this.terminal?Object.assign(this.terminal,h):(this.terminal=h,u.isTestExecution()&&!this.terminal&&(this.terminal={})),this.terminal=this.terminal?this.terminal:{executeInFileDir:!0,launchArgs:[],activateEnvironment:!0,activateEnvInCurrentTerminal:!1}}getPythonExecutable(e){return function(e){if("python"===(e=f(e))||-1===e.indexOf(i.sep)||i.basename(e)===i.dirname(e))return e;if(g(e))return e;const t=["python","python4","python3.6","python3.5","python3","python2.7","python2","python3.7","python3.8","python3.9"];for(let n of t)if(l.IS_WINDOWS){if(n+=".exe",g(i.join(e,n)))return i.join(e,n);if(g(i.join(e,"Scripts",n)))return i.join(e,"Scripts",n)}else{if(g(i.join(e,n)))return i.join(e,n);if(g(i.join(e,"bin",n)))return i.join(e,"bin",n)}return e}(e)}onWorkspaceFoldersChanged(){const e=this.workspace.workspaceFolders.map(e=>e.uri.fsPath),t=Array.from(v.pythonSettings.keys()).filter(t=>e.indexOf(t)<0);if(t.length>0)for(const e of t)v.pythonSettings.delete(e)}initialize(){const e=()=>{const e=this.workspace.getConfiguration("python",this.workspaceRoot);this.update(e),this.debounceChangeNotification()};this.disposables.push(this.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this.disposables.push(this.interpreterAutoSelectionService.onDidChangeAutoSelectedInterpreter(e.bind(this))),this.disposables.push(this.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration("python")&&e()})),this.interpreterPathService&&this.disposables.push(this.interpreterPathService.onDidChange(e.bind(this)));const t=this.workspace.getConfiguration("python",this.workspaceRoot);t&&this.update(t)}debounceChangeNotification(){this.changed.fire()}getPythonPath(e,t,n){if(this.pythonPath=t.resolveAny(this.interpreterPathService?this.interpreterPathService.get(this.workspaceRoot):e.get("pythonPath")),!process.env.CI_DISABLE_AUTO_SELECTION&&(0===this.pythonPath.length||"python"===this.pythonPath)&&this.interpreterAutoSelectionService){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);e&&(this.pythonPath=e.path,this.workspaceRoot&&this.interpreterAutoSelectionService.setWorkspaceInterpreter(this.workspaceRoot,e).ignoreErrors())}return y(this.pythonPath,n)}}function y(e,t){return t||(t=__dirname),e=f(e),u.isTestExecution()&&!e?t:-1===e.indexOf(i.sep)||i.isAbsolute(e)?e:i.resolve(t,e)}function g(e){return o.existsSync(e)&&i.basename(h.getOSType()===h.OSType.Windows?e.toLowerCase():e).startsWith("python")}v.pythonSettings=new Map,r([p.debounceSync(1)],v.prototype,"debounceChangeNotification",null),t.PythonSettings=v},function(e,t){e.exports=require("./node_modules/request")},function(e,t,n){"use strict";e.exports={copySync:n(233)}},function(e,t){e.exports=e=>{const t=process.versions.node.split(".").map(e=>parseInt(e,10));return e=e.split(".").map(e=>parseInt(e,10)),t[0]>e[0]||t[0]===e[0]&&(t[1]>e[1]||t[1]===e[1]&&t[2]>=e[2])}},function(e,t,n){"use strict";const r=n(32);e.exports={utimesMillis:function(e,t,n,i){r.open(e,"r+",(e,o)=>{if(e)return i(e);r.futimes(o,t,n,e=>{r.close(o,t=>{i&&i(e||t)})})})},utimesMillisSync:function(e,t,n){const i=r.openSync(e,"r+");return r.futimesSync(i,t,n),r.closeSync(i)}}},function(e,t,n){"use strict";const r=n(38).fromCallback;e.exports={copy:r(n(235))}},function(e,t,n){e.exports=_;var r=n(16),i=n(182),o=n(106),s=(o.Minimatch,n(257)),a=n(78).EventEmitter,c=n(0),u=n(68),l=n(156),p=n(259),d=n(183),h=(d.alphasort,d.alphasorti,d.setopts),f=d.ownProp,v=n(260),y=(n(24),d.childrenIgnored),g=d.isIgnored,m=n(185);function _(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return p(e,t)}return new E(e,t,n)}_.sync=p;var b=_.GlobSync=p.GlobSync;function E(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof E))return new E(e,t,n);h(this,e,t),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=m(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return s();for(var o=0;o<r;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}_.glob=_,_.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}({},t);n.noprocess=!0;var r=new E(e,n).minimatch.set;if(!e)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},_.Glob=E,s(E,a),E.prototype._finish=function(){if(u(this instanceof E),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},E.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--e&&t._finish()}},E.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),o=this,s=r.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);r.forEach((function(n,r){n=o._makeAbs(n),i.realpath(n,o.realpathCache,(function(r,i){r?"stat"===r.syscall?a[n]=!0:o.emit("error",r):a[i]=!0,0==--s&&(o.matches[e]=a,t())}))}))},E.prototype._mark=function(e){return d.mark(this,e)},E.prototype._makeAbs=function(e){return d.makeAbs(this,e)},E.prototype.abort=function(){this.aborted=!0,this.emit("abort")},E.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},E.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<r.length;t++){var i=r[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},E.prototype._process=function(e,t,n,r){if(u(this instanceof E),u("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,r]);else{for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,r);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var a,c=e.slice(s);null===i?a=".":l(i)||l(e.join("/"))?(i&&l(i)||(i="/"+i),a=i):a=i;var p=this._makeAbs(a);if(y(this,a))return r();c[0]===o.GLOBSTAR?this._processGlobStar(i,a,p,c,t,n,r):this._processReaddir(i,a,p,c,t,n,r)}},E.prototype._processReaddir=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){return a._processReaddir2(e,t,n,r,i,o,u,s)}))},E.prototype._processReaddir2=function(e,t,n,r,i,o,s,a){if(!s)return a();for(var u=r[0],l=!!this.minimatch.negate,p=u._glob,d=this.dot||"."===p.charAt(0),h=[],f=0;f<s.length;f++){if("."!==(y=s[f]).charAt(0)||d)(l&&!e?!y.match(u):y.match(u))&&h.push(y)}var v=h.length;if(0===v)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<v;f++){var y=h[f];e&&(y="/"!==e?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=c.join(this.root,y)),this._emitMatch(i,y)}return a()}r.shift();for(f=0;f<v;f++){y=h[f];e&&(y="/"!==e?e+"/"+y:e+y),this._process([y].concat(r),i,o,a)}a()},E.prototype._emitMatch=function(e,t){if(!this.aborted&&!g(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0;var i=this.statCache[n];i&&this.emit("stat",t,i),this.emit("match",t)}}},E.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,i=v("lstat\0"+e,(function(r,i){if(r&&"ENOENT"===r.code)return t();var o=i&&i.isSymbolicLink();n.symlinks[e]=o,o||!i||i.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));i&&r.lstat(e,i)}},E.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=v("readdir\0"+e+"\0"+t,n))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,n);if(f(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return n();if(Array.isArray(i))return n(null,i)}r.readdir(e,function(e,t,n){return function(r,i){r?e._readdirError(t,r,n):e._readdirEntries(t,i,n)}}(this,e,n))}},E.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,n(null,t)}},E.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},E.prototype._processGlobStar=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,u){a._processGlobStar2(e,t,n,r,i,o,u,s)}))},E.prototype._processGlobStar2=function(e,t,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,a);var p=this.symlinks[n],d=s.length;if(p&&o)return a();for(var h=0;h<d;h++){if("."!==s[h].charAt(0)||this.dot){var f=u.concat(s[h],c);this._process(f,i,!0,a);var v=u.concat(s[h],r);this._process(v,i,!0,a)}}a()},E.prototype._processSimple=function(e,t,n){var r=this;this._stat(e,(function(i,o){r._processSimple2(e,t,i,o,n)}))},E.prototype._processSimple2=function(e,t,n,r,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!r)return i();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},E.prototype._stat=function(e,t){var n=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!i||"DIR"===o)return t(null,o);if(i&&"FILE"===o)return t()}var s=this.statCache[n];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===a?t():t(null,a,s)}var c=this,u=v("stat\0"+n,(function(i,o){if(o&&o.isSymbolicLink())return r.stat(n,(function(r,i){r?c._stat2(e,n,null,o,t):c._stat2(e,n,r,i,t)}));c._stat2(e,n,i,o,t)}));u&&r.lstat(n,u)},E.prototype._stat2=function(e,t,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=r,"/"===t.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,r)}},function(e,t,n){e.exports=l,l.realpath=l,l.sync=p,l.realpathSync=p,l.monkeypatch=function(){r.realpath=l,r.realpathSync=p},l.unmonkeypatch=function(){r.realpath=i,r.realpathSync=o};var r=n(16),i=r.realpath,o=r.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=n(253);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,n){if(a)return i(e,t,n);"function"==typeof t&&(n=t,t=null),i(e,t,(function(r,i){u(r)?c.realpath(e,t,n):n(r,i)}))}function p(e,t){if(a)return o(e,t);try{return o(e,t)}catch(n){if(u(n))return c.realpathSync(e,t);throw n}}},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,n),e.changedCwd=!1;var o=process.cwd();r(n,"cwd")?(e.cwd=i.resolve(n.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=n.root||i.resolve(e.cwd,"/"),e.root=i.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:p(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=r,t.makeAbs=p,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),r=0,i=e.matches.length;r<i;r++){var o=e.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[r];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:u));if(e.mark){for(r=0;r<n.length;r++)n[r]=e._mark(n[r]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),r=e.cache[t]||e.cache[p(e,t)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n})))}e.ignore.length&&(n=n.filter((function(t){return!d(e,t)})));e.found=n},t.mark=function(e,t){var n=p(e,t),r=e.cache[n],i=t;if(r){var o="DIR"===r||Array.isArray(r),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=p(e,i);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return i},t.isIgnored=d,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var i=n(0),o=n(106),s=n(156),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function p(e,t){var n=t;return n="/"===t.charAt(0)?i.join(e.root,t):s(t)||""===t?t:e.changedCwd?i.resolve(e.cwd,t):i.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function d(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}}},function(e,t,n){var r=n(184);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var r=n(25),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=void 0;var r=n(39);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.LazyServiceIdentifer=void 0;var r=n(39),i=n(25),o=n(45),s=n(63),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=a,t.inject=function(e){return function(t,n,a){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(i.INJECT_TAG,e);"number"==typeof a?s.tagParameter(t,n,a,c):s.tagProperty(t,n,c)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var r=n(25),i=n(70),o=n(45),s=n(268),a=function(){function e(e,t,n,a){this.id=i.id(),this.type=e,this.serviceIdentifier=n,this.name=new s.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof a?c=new o.Metadata(r.NAMED_TAG,a):a instanceof o.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return e.key!==r.INJECT_TAG&&e.key!==r.MULTI_INJECT_TAG&&e.key!==r.NAME_TAG&&e.key!==r.UNMANAGED_TAG&&e.key!==r.NAMED_TAG}))},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===r.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return e.key!==r.INJECT_TAG&&e.key!==r.MULTI_INJECT_TAG&&e.key!==r.NAME_TAG&&e.key!==r.UNMANAGED_TAG&&e.key!==r.NAMED_TAG})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n(157),i=n(158),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var r=n(25),i=n(45),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var s=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=s;var a=s(r.NAMED_TAG);t.namedConstraint=a;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},function(e,t,n){var r=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&p(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&p(e,n,t[n]);return e},h=e=>i(e,"__esModule",{value:!0}),f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),v=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of s(t))!u.call(e,r)&&"default"!==r&&i(e,r,{get:()=>t[r],enumerable:!(n=o(t,r))||n.enumerable});return e})(h(i(null!=e?r(c(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),y=f((e,t)=>{"use strict";var n=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.enableDebug&&console.info(e.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.disableWarnings||console.warn(e.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=n}),g=f(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=lr(),i=n(78),o=function(){function e(){}return e.prototype.active=function(){var e=this,n=r.CorrelationContextManager.getCurrentContext();return t(t({},n),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&n:(e._activeSymbol=t,n)},setValue:function(){}})},e.prototype.with=function(t,n){var i=t.parentSpanId,o=t.name,s=e._spanToContext(t,i,o);return r.CorrelationContextManager.runWithContext(s,n)()},e.prototype.bind=function(e){return"function"==typeof e?r.CorrelationContextManager.wrapCallback(e):(e instanceof i.EventEmitter&&r.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},e._spanToContext=function(e,n,i){var o=n?"|"+e.spanContext().traceId+"."+n+".":e.spanContext().traceId,s=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return r.CorrelationContextManager.spanToContextObject(s,o,i)},e}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o}),m=f((e,t)=>{var n;e=t.exports=q,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],o=e.src=[],s=0,a=s++;o[a]="0|[1-9]\\d*";var c=s++;o[c]="[0-9]+";var u=s++;o[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var l=s++;o[l]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var p=s++;o[p]="("+o[c]+")\\.("+o[c]+")\\.("+o[c]+")";var d=s++;o[d]="(?:"+o[a]+"|"+o[u]+")";var h=s++;o[h]="(?:"+o[c]+"|"+o[u]+")";var f=s++;o[f]="(?:-("+o[d]+"(?:\\."+o[d]+")*))";var v=s++;o[v]="(?:-?("+o[h]+"(?:\\."+o[h]+")*))";var y=s++;o[y]="[0-9A-Za-z-]+";var g=s++;o[g]="(?:\\+("+o[y]+"(?:\\."+o[y]+")*))";var m=s++,_="v?"+o[l]+o[f]+"?"+o[g]+"?";o[m]="^"+_+"$";var b="[v=\\s]*"+o[p]+o[v]+"?"+o[g]+"?",E=s++;o[E]="^"+b+"$";var S=s++;o[S]="((?:<|>)?=?)";var w=s++;o[w]=o[c]+"|x|X|\\*";var T=s++;o[T]=o[a]+"|x|X|\\*";var P=s++;o[P]="[v=\\s]*("+o[T]+")(?:\\.("+o[T]+")(?:\\.("+o[T]+")(?:"+o[f]+")?"+o[g]+"?)?)?";var I=s++;o[I]="[v=\\s]*("+o[w]+")(?:\\.("+o[w]+")(?:\\.("+o[w]+")(?:"+o[v]+")?"+o[g]+"?)?)?";var C=s++;o[C]="^"+o[S]+"\\s*"+o[P]+"$";var O=s++;o[O]="^"+o[S]+"\\s*"+o[I]+"$";var A=s++;o[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var x=s++;o[x]="(?:~>?)";var R=s++;o[R]="(\\s*)"+o[x]+"\\s+",i[R]=new RegExp(o[R],"g");var N=s++;o[N]="^"+o[x]+o[P]+"$";var k=s++;o[k]="^"+o[x]+o[I]+"$";var D=s++;o[D]="(?:\\^)";var j=s++;o[j]="(\\s*)"+o[D]+"\\s+",i[j]=new RegExp(o[j],"g");var M=s++;o[M]="^"+o[D]+o[P]+"$";var L=s++;o[L]="^"+o[D]+o[I]+"$";var F=s++;o[F]="^"+o[S]+"\\s*("+b+")$|^$";var V=s++;o[V]="^"+o[S]+"\\s*("+_+")$|^$";var U=s++;o[U]="(\\s*)"+o[S]+"\\s*("+b+"|"+o[P]+")",i[U]=new RegExp(o[U],"g");var B=s++;o[B]="^\\s*("+o[P]+")\\s+-\\s+("+o[P]+")\\s*$";var H=s++;o[H]="^\\s*("+o[I]+")\\s+-\\s+("+o[I]+")\\s*$";var W,G=s++;for(o[G]="(<|>)?=?\\s*\\*",W=0;W<35;W++)n(W,o[W]),i[W]||(i[W]=new RegExp(o[W]));function $(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof q)return e;if("string"!=typeof e||e.length>256)return null;if(!(t.loose?i[E]:i[m]).test(e))return null;try{return new q(e,t)}catch(e){return null}}function q(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof q){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof q))return new q(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[E]:i[m]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}e.parse=$,e.valid=function(e,t){var n=$(e,t);return n?n.version:null},e.clean=function(e,t){var n=$(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},e.SemVer=q,q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},q.prototype.toString=function(){return this.version},q.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof q||(e=new q(e,this.options)),this.compareMain(e)||this.comparePre(e)},q.prototype.compareMain=function(e){return e instanceof q||(e=new q(e,this.options)),z(this.major,e.major)||z(this.minor,e.minor)||z(this.patch,e.patch)},q.prototype.comparePre=function(e){if(e instanceof q||(e=new q(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return z(r,i)}while(++t)},q.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new q(e,n).inc(t,r).version}catch(e){return null}},e.diff=function(e,t){if(J(e,t))return null;var n=$(e),r=$(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},e.compareIdentifiers=z;var K=/^[0-9]+$/;function z(e,t){var n=K.test(e),r=K.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Y(e,t,n){return new q(e,n).compare(new q(t,n))}function X(e,t,n){return Y(e,t,n)>0}function Q(e,t,n){return Y(e,t,n)<0}function J(e,t,n){return 0===Y(e,t,n)}function Z(e,t,n){return 0!==Y(e,t,n)}function ee(e,t,n){return Y(e,t,n)>=0}function te(e,t,n){return Y(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return J(e,n,r);case"!=":return Z(e,n,r);case">":return X(e,n,r);case">=":return ee(e,n,r);case"<":return Q(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}e.rcompareIdentifiers=function(e,t){return z(t,e)},e.major=function(e,t){return new q(e,t).major},e.minor=function(e,t){return new q(e,t).minor},e.patch=function(e,t){return new q(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,n){return Y(t,e,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compare(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.rcompare(t,r,n)}))},e.gt=X,e.lt=Q,e.eq=J,e.neq=Z,e.gte=ee,e.lte=te,e.cmp=ne,e.Comparator=re;var ie={};function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof re)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,i,o,s,a,c,u,l,p,d){return((t=se(n)?"":se(r)?">="+n+".0.0":se(i)?">="+n+"."+r+".0":">="+t)+" "+(a=se(c)?"":se(u)?"<"+(+c+1)+".0.0":se(l)?"<"+c+"."+(+u+1)+".0":p?"<="+c+"."+u+"."+l+"-"+p:"<="+a)).trim()}function ce(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new oe(t,n)}catch(e){return!1}return t.test(e)}function le(e,t,n,r){var i,o,s,a,c;switch(e=new q(e,r),t=new oe(t,r),n){case">":i=X,o=te,s=Q,a=">",c=">=";break;case"<":i=Q,o=ee,s=X,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],p=null,d=null;if(l.forEach((function(e){e.semver===ie&&(e=new re(">=0.0.0")),p=p||e,d=d||e,i(e.semver,p.semver,r)?p=e:s(e.semver,d.semver,r)&&(d=e)})),p.operator===a||p.operator===c||(!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?i[F]:i[V],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new q(n[2],this.options.loose):this.semver=ie},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new q(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new oe(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),ue(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},e.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?i[H]:i[B];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(i[U],"$1$2$3"),n("comparator trim",e,i[U]),e=(e=(e=e.replace(i[R],"$1~")).replace(i[j],"$1^")).split(/\s+/).join(" ");var o=t?i[F]:i[V],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?i[L]:i[M];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?i[k]:i[N];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?i[O]:i[C];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=se(i),u=c||se(o),l=u||se(s);return"="===r&&l&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&l?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[G],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new re(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new q(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=ue,e.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(!r||-1===i.compare(e))&&(i=new q(r=e,n))})),r},e.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(!r||1===i.compare(e))&&(i=new q(r=e,n))})),r},e.minVersion=function(e,t){e=new oe(e,t);var n=new q("0.0.0");if(e.test(n)||(n=new q("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new q(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!n||X(n,t))&&(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}return n&&e.test(n)?n:null},e.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},e.ltr=function(e,t,n){return le(e,t,"<",n)},e.gtr=function(e,t,n){return le(e,t,">",n)},e.outside=le,e.prerelease=function(e,t){var n=$(e,t);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(e,t,n){return e=new oe(e,n),t=new oe(t,n),e.intersects(t)},e.coerce=function(e){if(e instanceof q)return e;if("string"!=typeof e)return null;var t=e.match(i[A]);return null==t?null:$(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),_=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=n(0),r=m(),i=n(193),o=Object.keys(process.binding("natives")),s=i.prototype.require;e.makePatchingRequire=function(e){var n={};return function(a){var c=s.apply(this,arguments);if(e[a]){var u=i._resolveFilename(a,this);if(n.hasOwnProperty(u))return n[u];var l=void 0;if(o.indexOf(a)<0)try{l=s.call(this,t.join(a,"package.json")).version}catch(e){return c}else l=process.version.substring(1);var p=l.indexOf("-");p>=0&&(l=l.substring(0,p));for(var d=c,h=0,f=e[a];h<f.length;h++){var v=f[h];r.satisfies(l,v.versionSpecifier)&&(d=v.patch(d,u))}return n[u]=d}return c}}}),b=f((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),E=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=_(),r=_();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var i=function(e){return!0},o=function(){function e(){this.version=b().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach((function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(r)}catch(e){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,n){void 0===n&&(n=i),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},e.prototype.unsubscribe=function(e,t,n){void 0===n&&(n=i);var r=this.subscribers[e];if(r)for(var o=0;o<r.length;++o)if(r[o].listener===t&&r[o].filter===n)return r.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new o,n(193).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource}),S=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),w=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e(this._entries),i=0,o=t;i<o.length;i++){var s=o[i];r._entries.delete(s)}return r},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t}),T=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),P=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=ve(),n=w(),r=T();e.createBaggage=function(e){return void 0===e&&(e={}),new n.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(t.diag.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:r.baggageEntryMetadataSymbol,toString:function(){return e}}}}),I=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),C=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),O=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],n=function(){function e(e){return function(){var t=arguments;if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}for(var n=0;n<t.length;n++)this[t[n].n]=e(t[n].c)};e.DiagConsoleLogger=n}),A=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"}),x=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(O(),e),n(A(),e)}),R=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,n){null!=e&&(e[t]=n)}}}),N=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),k=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),D=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};var t=function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}};e.ROOT_CONTEXT=new t}),j=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"}),M=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=L(),n=j(),r=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(t){return r.test(t)&&t!==e.INVALID_TRACEID}function s(t){return i.test(t)&&t!==e.INVALID_SPANID}e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:n.TraceFlags.NONE},e.isValidTraceId=o,e.isValidSpanId=s,e.isSpanContextValid=function(e){return o(e.traceId)&&s(e.spanId)},e.wrapSpanContext=function(e){return new t.NonRecordingSpan(e)}}),L=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=M(),n=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=n}),F=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=D(),n=L(),r=t.createContextKey("OpenTelemetry Context Key SPAN");function i(e){return e.getValue(r)||void 0}function o(e,t){return e.setValue(r,t)}e.getSpan=i,e.setSpan=o,e.deleteSpan=function(e){return e.deleteValue(r)},e.setSpanContext=function(e,t){return o(e,new n.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=i(e))||void 0===t?void 0:t.spanContext()}}),V=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=ve(),n=F(),r=L(),i=M(),o=function(){function e(){}return e.prototype.startSpan=function(e,t,o){if(Boolean(null==t?void 0:t.root))return new r.NonRecordingSpan;var s=o&&n.getSpanContext(o);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(s)&&i.isSpanContextValid(s)?new r.NonRecordingSpan(s):new r.NonRecordingSpan},e.prototype.startActiveSpan=function(e,r,i,o){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=r:3===arguments.length?(s=r,c=i):(s=r,a=i,c=o);var u=null!=a?a:t.context.active(),l=this.startSpan(e,s,u),p=n.setSpan(u,l);return t.context.with(p,c,void 0,l)}},e}();e.NoopTracer=o}),U=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=V(),n=function(){function e(e,t,n){this._provider=e,this.name=t,this.version=n}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):new t.NoopTracer},e}();e.ProxyTracer=n}),B=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=V(),n=function(){function e(){}return e.prototype.getTracer=function(e,n){return new t.NoopTracer},e}();e.NoopTracerProvider=n}),H=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=U(),n=new(B().NoopTracerProvider),r=function(){function e(){}return e.prototype.getTracer=function(e,n){var r;return null!==(r=this.getDelegateTracer(e,n))&&void 0!==r?r:new t.ProxyTracer(this,e,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:n},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t)},e}();e.ProxyTracerProvider=r}),W=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),G=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}),$=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),q=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}),K=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),z=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Y=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"}),X=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Q=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),J=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Z=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ee=f(e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var n=D(),r=function(){function e(){}return e.prototype.active=function(){return n.ROOT_CONTEXT},e.prototype.with=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return n.call.apply(n,t([r],i))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=r}),te=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global}),ne=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(te(),e)}),re=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ne(),e)}),ie=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.1"}),oe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=ie(),n=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function r(e){var t=new Set([e]),r=new Set,i=e.match(n);if(!i)return function(){return!1};var o=+i[1],s=+i[2],a=+i[3];function c(e){return r.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var i=e.match(n);if(!i)return c(e);var l=+i[1],p=+i[2],d=+i[3];return o!==l?c(e):0===o?s===p&&a<=d?u(e):c(e):s<=p?u(e):c(e)}}e._makeCompatibilityCheck=r,e.isCompatible=r(t.VERSION)}),se=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=re(),n=ie(),r=oe(),i=n.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=t._globalThis;e.registerGlobal=function(e,t,r,i){var a;void 0===i&&(i=!1);var c=s[o]=null!==(a=s[o])&&void 0!==a?a:{version:n.VERSION};if(!i&&c[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(u.stack||u.message),!1}if(c.version!==n.VERSION){u=new Error("@opentelemetry/api: All API registration versions must match");return r.error(u.stack||u.message),!1}return c[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+n.VERSION+"."),!0},e.getGlobal=function(e){var t,n,i=null===(t=s[o])||void 0===t?void 0:t.version;if(i&&r.isCompatible(i))return null===(n=s[o])||void 0===n?void 0:n[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+n.VERSION+".");var r=s[o];r&&delete r[e]}}),ae=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=se(),n=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r("verbose",this._namespace,e)},e}();function r(e,n,r){var i=t.getGlobal("diag");if(i)return r.unshift(n),i[e].apply(i,r)}e.DiagComponentLogger=n}),ce=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=A();e.createLogLevelDiagLogger=function(e,n){function r(t,r){var i=n[t];return"function"==typeof i&&e>=r?i.bind(n):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),n=n||{},{error:r("error",t.DiagLogLevel.ERROR),warn:r("warn",t.DiagLogLevel.WARN),info:r("info",t.DiagLogLevel.INFO),debug:r("debug",t.DiagLogLevel.DEBUG),verbose:r("verbose",t.DiagLogLevel.VERBOSE)}}}),ue=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=ae(),n=ce(),r=A(),i=se(),o=function(){function e(){function e(e){return function(){var t=i.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var o=this;o.setLogger=function(e,t){var s,a;if(void 0===t&&(t=r.DiagLogLevel.INFO),e===o){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return o.error(null!==(s=c.stack)&&void 0!==s?s:c.message),!1}var u=i.getGlobal("diag"),l=n.createLogLevelDiagLogger(t,e);if(u){var p=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+p),l.warn("Current logger will overwrite one already registered from "+p)}return i.registerGlobal("diag",l,o,!0)},o.disable=function(){i.unregisterGlobal("diag",o)},o.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},o.verbose=e("verbose"),o.debug=e("debug"),o.info=e("info"),o.warn=e("warn"),o.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=o}),le=f(e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var n=ee(),r=se(),i=ue(),o="context",s=new n.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return r.registerGlobal(o,e,i.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,t([e,n,r],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return r.getGlobal(o)||s},e.prototype.disable=function(){this._getContextManager().disable(),r.unregisterGlobal(o,i.DiagAPI.instance())},e}();e.ContextAPI=a}),pe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=se(),n=H(),r=M(),i=F(),o=ue(),s="trace",a=function(){function e(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=r.wrapSpanContext,this.isSpanContextValid=r.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){return this._proxyTracerProvider.setDelegate(e),t.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance())},e.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider},e}();e.TraceAPI=a}),de=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t}),he=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=D().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,n){return e.setValue(t,n)},e.deleteBaggage=function(e){return e.deleteValue(t)}}),fe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=se(),n=de(),r=R(),i=he(),o=P(),s=ue(),a="propagation",c=new n.NoopTextMapPropagator,u=function(){function e(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,s.DiagAPI.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=r.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=r.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=u}),ve=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.baggageEntryMetadataFromString=void 0,n(S(),e);var r=P();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return r.baggageEntryMetadataFromString}}),n(I(),e),n(C(),e),n(x(),e),n(R(),e),n(N(),e),n(k(),e),n(U(),e),n(H(),e),n(W(),e),n(G(),e),n($(),e),n(q(),e),n(K(),e),n(z(),e),n(Y(),e),n(j(),e),n(X(),e),n(Q(),e),n(J(),e);var i=M();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}}),n(D(),e),n(Z(),e);var o=le();e.context=o.ContextAPI.getInstance();var s=pe();e.trace=s.TraceAPI.getInstance();var a=fe();e.propagation=a.PropagationAPI.getInstance();var c=ue();e.diag=c.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),ye=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=ve().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}}),ge=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),me=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=ve(),n=ge();e.serializeKeyPairs=e=>e.reduce((e,t)=>{let r=`${e}${""!==e?n.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return r.length>n.BAGGAGE_MAX_TOTAL_LENGTH?e:r},"");e.getKeyPairs=e=>e.getAllEntries().map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`);e.parsePairKeyValue=e=>{let r=e.split(n.BAGGAGE_PROPERTIES_SEPARATOR);if(r.length<=0)return;let i=r.shift();if(!i)return;let o=i.split(n.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==o.length)return;let s,a=decodeURIComponent(o[0].trim()),c=decodeURIComponent(o[1].trim());return r.length>0&&(s=t.baggageEntryMetadataFromString(r.join(n.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:s}};e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(n.BAGGAGE_ITEMS_SEPARATOR).map(t=>e.parsePairKeyValue(t)).filter(e=>void 0!==e&&e.value.length>0).reduce((e,t)=>(e[t.key]=t.value,e),{})}),_e=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=ve(),n=ye(),r=ge(),i=me();e.HttpBaggagePropagator=class{inject(e,o,s){let a=t.propagation.getBaggage(e);if(!a||n.isTracingSuppressed(e))return;let c=i.getKeyPairs(a).filter(e=>e.length<=r.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,r.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=i.serializeKeyPairs(c);u.length>0&&s.set(o,r.BAGGAGE_HEADER,u)}extract(e,n,o){let s=o.get(n,r.BAGGAGE_HEADER);if(!s)return e;let a={};return 0===s.length||(s.split(r.BAGGAGE_ITEMS_SEPARATOR).forEach(e=>{let t=i.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}}),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[r.BAGGAGE_HEADER]}}}),be=f(e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let r of e)if(null!=r){if(!t){if(n(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}(e):n(e))}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let n={};if(null==e||"object"!=typeof e)return n;for(let[r,i]of Object.entries(e))t(i)&&(Array.isArray(i)?n[r]=i.slice():n[r]=i);return n},e.isAttributeValue=t}),Ee=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=ve();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},n=e;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(e=>{if(t[e])return;let r=n[e];r&&(t[e]=String(r))}),n=Object.getPrototypeOf(n);return t}(e))}(e))}}}),Se=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Ee().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e};e.globalErrorHandler=e=>{try{t(e)}catch(e){}}}),we=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}),Te=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=ve(),n=we(),r=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(e){return r.indexOf(e)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(e){return o.indexOf(e)>-1}function a(e,t,n,r=-1/0,i=1/0){if(void 0!==n[e]){let o=Number(n[e]);isNaN(o)||(t[e]=o<r?r:o>i?i:o)}}function c(e,t,n,r=","){let i=n[e];"string"==typeof i&&(t[e]=i.split(r).map(e=>e.trim()))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:n.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var u={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function l(e,t,n){let r=n[e];if("string"==typeof r){let n=u[r.toUpperCase()];null!=n&&(t[e]=n)}}e.parseEnvironment=function(t){let n={};for(let r in e.DEFAULT_ENVIRONMENT){let e=r;switch(e){case"OTEL_LOG_LEVEL":l(e,n,t);break;default:if(i(e))a(e,n,t);else if(s(e))c(e,n,t);else{let r=t[e];null!=r&&(n[e]=String(r))}}}return n}}),Pe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=n(35),r=Te();e.getEnv=function(){let e=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,e)}}),Ie=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,n="";for(let r=0;r<t;r+=2){let t=e.substring(r,r+2),i=parseInt(t,16);n+=String.fromCharCode(i)}return Buffer.from(n,"ascii").toString("base64")}}),Ce=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;e.RandomIdGenerator=class{constructor(){this.generateTraceId=n(16),this.generateSpanId=n(8)}};var t=Buffer.allocUnsafe(16);function n(e){return function(){for(let n=0;n<e/4;n++)t.writeUInt32BE(Math.random()*2**32>>>0,4*n);for(let n=0;n<e&&!(t[n]>0);n++)n===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}}),Oe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=n(287);e.otperformance=t.performance}),Ae=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),xe=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),Re=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(xe(),e)}),Ne=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),ke=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ne(),e)}),De=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Re(),e),n(ke(),e)}),je=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=Ae(),n=De();e.SDK_INFO={[n.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[n.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[n.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.TelemetrySdkLanguageValues.NODEJS,[n.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}}),Me=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}}),Le=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Pe(),e),n(Ie(),e),n(Ce(),e),n(Oe(),e),n(je(),e),n(Me(),e)}),Fe=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Le(),e)}),Ve=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=Fe(),n=Math.pow(10,9);function r(e){let t=e/1e3,r=Math.trunc(t);return[r,Number((t-r).toFixed(9))*n]}function i(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let n=t.otperformance;e=n.timing&&n.timing.fetchStart}return e}function o(e){let o=r(i()),s=r("number"==typeof e?e:t.otperformance.now()),a=o[0]+s[0],c=o[1]+s[1];return c>n&&(c-=n,a+=1),[a,c]}function s(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=o,e.timeInputToHrTime=function(e){if(s(e))return e;if("number"==typeof e)return e<i()?o(e):r(e);if(e instanceof Date)return r(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let r=t[0]-e[0],i=t[1]-e[1];return i<0&&(r-=1,i+=n),[r,i]},e.hrTimeToTimeStamp=function(e){let t=`${"0".repeat(9)}${e[1]}Z`,n=t.substr(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",n)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=s,e.isTimeInput=function(e){return s(e)||"number"==typeof e||e instanceof Date}}),Ue=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Be=f(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}),He=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=ve();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map(e=>"function"==typeof e.fields?e.fields():[]).reduce((e,t)=>e.concat(t),[])))}inject(e,n,r){for(let i of this._propagators)try{i.inject(e,n,r)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}}extract(e,n,r){return this._propagators.reduce((e,i)=>{try{return i.extract(e,n,r)}catch(e){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}return e},e)}fields(){return this._fields.slice()}}}),We=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",n=new RegExp(`^(?:${`[a-z]${t}{0,255}`}|${`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`})$`),r=/^[ -~]{0,255}[!-~]$/,i=/,|=/;e.validateKey=function(e){return n.test(e)},e.validateValue=function(e){return r.test(e)&&!i.test(e)}}),Ge=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=We(),n=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((e,n)=>{let r=n.trim(),i=r.indexOf("=");if(-1!==i){let o=r.slice(0,i),s=r.slice(i+1,n.length);t.validateKey(o)&&t.validateValue(s)&&e.set(o,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new n;return e._internalState=new Map(this._internalState),e}};e.TraceState=n}),$e=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=ve(),n=ye(),r=Ge();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var i=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function o(e){let t=i.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=o;e.HttpTraceContextPropagator=class{inject(r,i,o){let s=t.trace.getSpanContext(r);if(!s||n.isTracingSuppressed(r)||!t.isSpanContextValid(s))return;let a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||t.TraceFlags.NONE).toString(16)}`;o.set(i,e.TRACE_PARENT_HEADER,a),s.traceState&&o.set(i,e.TRACE_STATE_HEADER,s.traceState.serialize())}extract(n,i,s){let a=s.get(i,e.TRACE_PARENT_HEADER);if(!a)return n;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return n;let u=o(c);if(!u)return n;u.isRemote=!0;let l=s.get(i,e.TRACE_STATE_HEADER);if(l){let e=Array.isArray(l)?l.join(","):l;u.traceState=new r.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(n,u)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}}),qe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ke=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=ve().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,n){return e.setValue(t,n)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}}),ze=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=ve();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}}),Ye=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=ve();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}}),Xe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=ve(),n=Se(),r=ze(),i=Ye();e.ParentBasedSampler=class{constructor(e){var t,o,s,a;this._root=e.root,this._root||(n.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new i.AlwaysOnSampler,this._remoteParentNotSampled=null!==(o=e.remoteParentNotSampled)&&void 0!==o?o:new r.AlwaysOffSampler,this._localParentSampled=null!==(s=e.localParentSampled)&&void 0!==s?s:new i.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new r.AlwaysOffSampler}shouldSample(e,n,r,i,o,s){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,n,r,i,o,s):this._remoteParentNotSampled.shouldSample(e,n,r,i,o,s):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,n,r,i,o,s):this._localParentNotSampled.shouldSample(e,n,r,i,o,s):this._root.shouldSample(e,n,r,i,o,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}}),Qe=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=ve();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,n){return{decision:t.isValidTraceId(n)&&this._accumulate(n)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let n=0;n<e.length/8;n++){let r=8*n;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t}}}),Je=f(e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,n){if(!n)return!1;for(let r of n)if(t(e,r))return!0;return!1}}),Ze=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}}),et=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,n(_e(),e),n(be(),e),n(Se(),e),n(Ee(),e),n(Ve(),e),n(Ue(),e),n(Be(),e),n(Ae(),e),e.baggageUtils=me(),n(Fe(),e),n(He(),e),n($e(),e),n(qe(),e),n(Ke(),e),n(ze(),e),n(Ye(),e),n(Xe(),e),n(Qe(),e),n(ye(),e),n(Ge(),e),n(Te(),e),n(we(),e),n(Je(),e),n(Ze(),e),n(Ae(),e)}),tt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),nt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=ve(),n=et(),r=De(),i=tt();e.Span=class{constructor(e,r,i,o,s,a,c=[],u=n.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=i,this._spanContext=o,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=n.timeInputToHrTime(u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(e,r){return null==r||this._isSpanEnded()?this:0===e.length?(t.diag.warn("Invalid attribute key: "+e),this):n.isAttributeValue(r)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=r),this):(t.diag.warn("Invalid attribute value set for key: "+e),this)}setAttributes(e){for(let[t,n]of Object.entries(e))this.setAttribute(t,n);return this}addEvent(e,r,i){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),n.isTimeInput(r)&&(void 0===i&&(i=r),r=void 0),void 0===i&&(i=n.hrTime()),this.events.push({name:e,attributes:r,time:n.timeInputToHrTime(i)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=n.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=n.timeInputToHrTime(e),this._duration=n.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,o=n.hrTime()){let s={};"string"==typeof e?s[r.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?s[r.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(s[r.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(s[r.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(s[r.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),s[r.SemanticAttributes.EXCEPTION_TYPE]||s[r.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,s,o):t.diag.warn("Failed to record an exception "+e)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}}),rt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=ve(),n=et(),r=n.getEnv(),i=n.TracesSamplerValues.AlwaysOn;function o(e=n.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case n.TracesSamplerValues.AlwaysOn:return new n.AlwaysOnSampler;case n.TracesSamplerValues.AlwaysOff:return new n.AlwaysOffSampler;case n.TracesSamplerValues.ParentBasedAlwaysOn:return new n.ParentBasedSampler({root:new n.AlwaysOnSampler});case n.TracesSamplerValues.ParentBasedAlwaysOff:return new n.ParentBasedSampler({root:new n.AlwaysOffSampler});case n.TracesSamplerValues.TraceIdRatio:return new n.TraceIdRatioBasedSampler(s(e));case n.TracesSamplerValues.ParentBasedTraceIdRatio:return new n.ParentBasedSampler({root:new n.TraceIdRatioBasedSampler(s(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new n.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:o(r),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:n.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:n.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:n.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=o;function s(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1;let n=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(n)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to 1.`),1):n<0||n>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to 1.`),1):n}}),it=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=rt();e.mergeConfig=function(e){let n={sampler:t.buildSamplerFromEnv()},r=Object.assign({},t.DEFAULT_CONFIG,n,e);return r.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}}),ot=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=ve(),n=et(),r=nt(),i=it();e.Tracer=class{constructor(e,t,r){this._tracerProvider=r;let o=i.mergeConfig(t);this._sampler=o.sampler,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new n.RandomIdGenerator,this.resource=r.resource,this.instrumentationLibrary=e}startSpan(e,i={},o=t.context.active()){var s,a;if(n.isTracingSuppressed(o))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,u,l,p=function(e,n){if(!e.root)return t.trace.getSpanContext(n)}(i,o),d=this._idGenerator.generateSpanId();p&&t.trace.isSpanContextValid(p)?(c=p.traceId,u=p.traceState,l=p.spanId):c=this._idGenerator.generateTraceId();let h=null!==(s=i.kind)&&void 0!==s?s:t.SpanKind.INTERNAL,f=null!==(a=i.links)&&void 0!==a?a:[],v=n.sanitizeAttributes(i.attributes),y=this._sampler.shouldSample(i.root?t.trace.setSpanContext(o,t.INVALID_SPAN_CONTEXT):o,c,e,h,v,f),g={traceId:c,spanId:d,traceFlags:y.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:u};if(y.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(g);let m=new r.Span(this,o,e,g,h,l,f,i.startTime);return m.setAttributes(Object.assign(v,y.attributes)),m}startActiveSpan(e,n,r,i){let o,s,a;if(arguments.length<2)return;2===arguments.length?a=n:3===arguments.length?(o=n,a=r):(o=n,s=r,a=i);let c=null!=s?s:t.context.active(),u=this.startSpan(e,o,c),l=t.trace.setSpan(c,u);return t.context.with(l,a,void 0,u)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}}),st=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return"unknown_service:"+process.argv0}}),at=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=ht(),r=ve(),i=n(24);e.detectResources=async(e={})=>{let n=Object.assign(e),i=await Promise.all((n.detectors||[]).map(async e=>{try{let t=await e.detect(n);return r.diag.debug(e.constructor.name+" found resource.",t),t}catch(n){return r.diag.debug(`${e.constructor.name} failed: ${n.message}`),t.Resource.empty()}}));return o(i),i.reduce((e,t)=>e.merge(t),t.Resource.empty())};var o=e=>{e.forEach(e=>{if(Object.keys(e.attributes).length>0){let t=i.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(t)}})}}),ct=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=ve(),n=et(),r=De(),i=yt();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let o={},s=n.getEnv(),a=s.OTEL_RESOURCE_ATTRIBUTES,c=s.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(o,e)}catch(e){t.diag.debug("EnvDetector failed: "+e.message)}return c&&(o[r.ResourceAttributes.SERVICE_NAME]=c),new i.Resource(o)}_parseResourceAttributes(e){if(!e)return{};let t={},n=e.split(this._COMMA_SEPARATOR,-1);for(let e of n){let n=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==n.length)continue;let[r,i]=n;if(r=r.trim(),i=i.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(r))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(i))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);t[r]=i}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let n=e.charAt(t);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}}),ut=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=ve(),n=De(),r=yt();e.processDetector=new class{async detect(e){let t={[n.ResourceAttributes.PROCESS_PID]:process.pid,[n.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[n.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[n.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,i){return""===e[n.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[n.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[n.ResourceAttributes.PROCESS_COMMAND]||""===e[n.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),r.Resource.empty()):new r.Resource(Object.assign({},e))}}}),lt=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ct(),e),n(ut(),e)}),pt=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(st(),e),n(at(),e),n(lt(),e)}),dt=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(pt(),e)}),ht=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=De(),n=et(),r=dt(),i=class{constructor(e){this.attributes=e}static empty(){return i.EMPTY}static default(){return new i({[t.ResourceAttributes.SERVICE_NAME]:r.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:n.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new i(t)}};e.Resource=i,i.EMPTY=new i({})}),ft=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yt=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ht(),e),n(dt(),e),n(ft(),e),n(vt(),e)}),gt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=et();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise(n=>{Promise.all(e).then(()=>{n()}).catch(e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),n()})})}onStart(e,t){for(let n of this._spanProcessors)n.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise((t,n)=>{Promise.all(e).then(()=>{t()},n)})}}}),mt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}}),_t=f((e,t)=>{var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Function]",s="[object Object]",a=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[i]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[o]=u["[object Map]"]=u["[object Number]"]=u[s]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var l="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,d=l||p||Function("return this")(),h="object"==typeof e&&e&&!e.nodeType&&e,f=h&&"object"==typeof t&&t&&!t.nodeType&&t,v=f&&f.exports===h,y=v&&l.process,g=function(){try{return f&&f.require&&f.require("util").types||y&&y.binding&&y.binding("util")}catch(e){}}(),m=g&&g.isTypedArray;function _(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var b,E=Array.prototype,S=Function.prototype,w=Object.prototype,T=d["__core-js_shared__"],P=S.toString,I=w.hasOwnProperty,C=(b=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",O=w.toString,A=P.call(Object),x=RegExp("^"+P.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=v?d.Buffer:void 0,N=d.Symbol,k=d.Uint8Array,D=R?R.allocUnsafe:void 0,j=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),M=Object.create,L=w.propertyIsEnumerable,F=E.splice,V=N?N.toStringTag:void 0,U=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),B=R?R.isBuffer:void 0,H=Math.max,W=Date.now,G=le(d,"Map"),$=le(Object,"create"),q=function(){function e(){}return function(t){if(!Se(t))return{};if(M)return M(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function X(e){var t=this.__data__=new z(e);this.size=t.size}function Q(e,t){var n=ge(e),r=!n&&ye(e),i=!n&&!r&&_e(e),o=!n&&!r&&!i&&Te(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)(t||I.call(e,u))&&(!s||!("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||pe(u,c)))&&a.push(u);return a}function J(e,t,n){(void 0!==n&&!ve(e[t],n)||void 0===n&&!(t in e))&&te(e,t,n)}function Z(e,t,n){var r=e[t];(!I.call(e,t)||!ve(r,n)||void 0===n&&!(t in e))&&te(e,t,n)}function ee(e,t){for(var n=e.length;n--;)if(ve(e[n][0],t))return n;return-1}function te(e,t,n){"__proto__"==t&&U?U(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}K.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},K.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},K.prototype.get=function(e){var t=this.__data__;if($){var r=t[e];return r===n?void 0:r}return I.call(t,e)?t[e]:void 0},K.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:I.call(t,e)},K.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$&&void 0===t?n:t,this},z.prototype.clear=function(){this.__data__=[],this.size=0},z.prototype.delete=function(e){var t=this.__data__,n=ee(t,e);return!(n<0)&&(n==t.length-1?t.pop():F.call(t,n,1),--this.size,!0)},z.prototype.get=function(e){var t=this.__data__,n=ee(t,e);return n<0?void 0:t[n][1]},z.prototype.has=function(e){return ee(this.__data__,e)>-1},z.prototype.set=function(e,t){var n=this.__data__,r=ee(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(G||z),string:new K}},Y.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return ue(this,e).get(e)},Y.prototype.has=function(e){return ue(this,e).has(e)},Y.prototype.set=function(e,t){var n=ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},X.prototype.clear=function(){this.__data__=new z,this.size=0},X.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},X.prototype.get=function(e){return this.__data__.get(e)},X.prototype.has=function(e){return this.__data__.has(e)},X.prototype.set=function(e,t){var n=this.__data__;if(n instanceof z){var r=n.__data__;if(!G||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Y(r)}return n.set(e,t),this.size=n.size,this};var ne=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}();function re(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":V&&V in Object(e)?function(e){var t=I.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(e){}var i=O.call(e);return r&&(t?e[V]=n:delete e[V]),i}(e):function(e){return O.call(e)}(e)}function ie(e){return we(e)&&re(e)==i}function oe(e){return!(!Se(e)||function(e){return!!C&&C in e}(e))&&(be(e)?x:a).test(function(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function se(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=de(e),n=[];for(var r in e)"constructor"==r&&(t||!I.call(e,r))||n.push(r);return n}function ae(e,t,n,r,i){e!==t&&ne(t,(function(o,a){if(i||(i=new X),Se(o))!function(e,t,n,r,i,o,a){var c=he(e,n),u=he(t,n),l=a.get(u);if(l)return void J(e,n,l);var p=o?o(c,u,n+"",e,t,a):void 0,d=void 0===p;if(d){var h=ge(u),f=!h&&_e(u),v=!h&&!f&&Te(u);p=u,h||f||v?ge(c)?p=c:function(e){return we(e)&&me(e)}(c)?p=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(c):f?(d=!1,p=function(e,t){if(t)return e.slice();var n=e.length,r=D?D(n):new e.constructor(n);return e.copy(r),r}(u,!0)):v?(d=!1,p=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new k(t).set(new k(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(u,!0)):p=[]:function(e){if(!we(e)||re(e)!=s)return!1;var t=j(e);if(null===t)return!0;var n=I.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&P.call(n)==A}(u)||ye(u)?(p=c,ye(c)?p=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),i?te(n,a,c):Z(n,a,c)}return n}(e,Pe(e))}(c):(!Se(c)||be(c))&&(p=function(e){return"function"!=typeof e.constructor||de(e)?{}:q(j(e))}(u))):d=!1}d&&(a.set(u,p),i(p,u,r,o,a),a.delete(u)),J(e,n,p)}(e,t,a,n,ae,r,i);else{var c=r?r(he(e,a),o,a+"",e,t,i):void 0;void 0===c&&(c=o),J(e,a,c)}}),Pe)}function ce(e,t){return fe(function(e,t,n){return t=H(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=H(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),_(e,this,a)}}(e,t,Oe),e+"")}function ue(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return oe(n)?n:void 0}function pe(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&c.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||w)}function he(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fe=function(e){var t=0,n=0;return function(){var r=W(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:Ce(t),writable:!0})}:Oe);function ve(e,t){return e===t||e!=e&&t!=t}var ye=ie(function(){return arguments}())?ie:function(e){return we(e)&&I.call(e,"callee")&&!L.call(e,"callee")},ge=Array.isArray;function me(e){return null!=e&&Ee(e.length)&&!be(e)}var _e=B||function(){return!1};function be(e){if(!Se(e))return!1;var t=re(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Te=m?function(e){return function(t){return e(t)}}(m):function(e){return we(e)&&Ee(e.length)&&!!u[re(e)]};function Pe(e){return me(e)?Q(e,!0):se(e)}var Ie=function(e){return ce((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&function(e,t,n){if(!Se(n))return!1;var r=typeof t;return!!("number"==r?me(n)&&pe(t,n.length):"string"==r&&t in n)&&ve(n[t],e)}(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t}))}((function(e,t,n){ae(e,t,n)}));function Ce(e){return function(){return e}}function Oe(e){return e}t.exports=Ie}),bt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=ve(),n=et();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let r=n.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise((e,t)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(e).catch(e=>{t(e)})})),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise((e,t)=>{let n=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e()}).catch(t)})}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((e,r)=>{let i=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);t.context.with(n.suppressTracing(t.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),t=>{var o;clearTimeout(i),t.code===n.ExportResultCode.SUCCESS?e():r(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(e=>{n.globalErrorHandler(e)})},this._scheduledDelayMillis),n.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}}),Et=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=bt(),n=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=n}),St=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Et(),e)}),wt=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(St(),e)}),Tt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,n,r=ve(),i=et(),o=yt(),s=kt(),a=rt(),c=gt(),u=mt(),l=_t(),p=wt();(n=t=e.ForceFlushState||(e.ForceFlushState={}))[n.resolved=0]="resolved",n[n.timeout=1]="timeout",n[n.error=2]="error",n[n.unresolved=3]="unresolved";var d=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let n=l({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=n.resource)&&void 0!==t?t:o.Resource.empty(),this.resource=o.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let r=this._buildExporterFromEnv();if(void 0!==r){let e=new p.BatchSpanProcessor(r);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t){let n=`${e}@${t||""}`;return this._tracers.has(n)||this._tracers.set(n,new s.Tracer({name:e,version:t},this._config,this)),this._tracers.get(n)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch(e=>r.diag.error("Error while trying to shutdown current span processor",e)),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){r.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&r.context.setGlobalContextManager(e.contextManager),e.propagator&&r.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map(n=>new Promise(r=>{let i,o=setTimeout(()=>{r(new Error(`Span processor did not completed within timeout period of ${e} ms`)),i=t.timeout},e);n.forceFlush().then(()=>{clearTimeout(o),i!==t.timeout&&(i=t.resolved,r(i))}).catch(e=>{clearTimeout(o),i=t.error,r(e)})}));return new Promise((e,r)=>{Promise.all(n).then(n=>{let i=n.filter(e=>e!==t.resolved);i.length>0?r(i):e()}).catch(e=>r([e]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=d._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=d._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(i.getEnv().OTEL_PROPAGATORS)),t=e.map(e=>{let t=this._getPropagator(e);return t||r.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t}).reduce((e,t)=>(t&&e.push(t),e),[]);if(0!==t.length)return 1===e.length?t[0]:new i.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=i.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||r.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=d,d._registeredPropagators=new Map([["tracecontext",()=>new i.HttpTraceContextPropagator],["baggage",()=>new i.HttpBaggagePropagator]]),d._registeredExporters=new Map}),Pt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=et();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,n){for(let t of e)console.log(this._exportInfo(t));if(n)return n({code:t.ExportResultCode.SUCCESS})}}}),It=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=et();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,n){if(this._stopped)return n({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout(()=>n({code:t.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}}),Ct=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ot=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=ve(),n=et();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(n.suppressTracing(t.context.active()),()=>{this._exporter.export([e],e=>{var t;e.code!==n.ExportResultCode.SUCCESS&&n.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))})})}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise((e,t)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(e).catch(e=>{t(e)})})),this._shuttingDownPromise}}}),At=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Nt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kt=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ot(),e),n(Tt(),e),n(wt(),e),n(Pt(),e),n(It(),e),n(Ct(),e),n(Ot(),e),n(At(),e),n(mt(),e),n(nt(),e),n(xt(),e),n(Rt(),e),n(Nt(),e)}),Dt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=E();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var n=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(r){if(n)return r;try{var i=kt(),o=ve(),s=(new i.BasicTracerProvider).getTracer("applicationinsights tracer"),a=r.setTracer;r.setTracer=function(n){var r=n.startSpan;n.startSpan=function(e,n,i){var o=r.call(this,e,n,i),s=o.end;return o.end=function(){var e=s.apply(this,arguments);return t.channel.publish("azure-coretracing",o),e},o},n[e.AzureMonitorSymbol]=!0,a.call(this,n)},o.trace.getSpan(o.context.active()),r.setTracer(s),n=!0}catch(e){}return r}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}}),jt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=E();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var n=e.prototype._emit;return e.prototype._emit=function(e,r){var i=n.apply(this,arguments);if(!r){var o=i;o||(o=n.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}}),Mt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=E(),r=n(77);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var n=new r.Writable,i=new r.Writable;n.write=function(e){if(!e)return!0;var n=e.toString();return t.channel.publish("console",{message:n}),!0},i.write=function(e){if(!e)return!0;var n=e.toString();return t.channel.publish("console",{message:n,stderr:!0}),!0};for(var o=new e.Console(n,i),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++){s(c[a])}return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),n(288)}}),Lt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=E();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var n=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=n.apply(this,arguments),r=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}}),Ft=f(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var n=E();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var r=e.instrument({operationIdGenerator:{next:function(){return n.channel.bindToContext((function(e){return e()}))}}}),i={};return r.on("started",(function(e){i[e.requestId]||(i[e.requestId]=t(t({},e),{time:new Date}))})),r.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),r.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var r=e.instrument(),i={},o={};return r.on("started",(function(e){i[e.requestId]||(o[e.requestId]=n.channel.bindToContext((function(e){return e()})),i[e.requestId]=t(t({},e),{time:new Date}))})),r.on("succeeded",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),r.on("failed",(function(e){var t=i[e.requestId];t&&delete i[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),r=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=n.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var i=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=n.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e}}(e);var t=e.instrument(),r={},i={};return t.on("started",(function(e){r[e.requestId]||(i[e.requestId]=n.channel.bindToContext((function(e){return e()})),r[e.requestId]=e)})),t.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),t.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return n.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.enable=function(){n.channel.registerMonkeyPatch("mongodb",e.mongo2),n.channel.registerMonkeyPatch("mongodb",e.mongo3),n.channel.registerMonkeyPatch("mongodb",e.mongo330)}}),Vt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=E(),r=n(0);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,i){var o=function(e,n){return function(n,r){var i=e[n];i&&(e[n]=function(){for(var e=arguments.length-1,n=arguments.length-1;n>=0;--n){if("function"==typeof arguments[n]){e=n;break}if(void 0!==arguments[n])break}var o=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof o&&(r?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=t.channel.bindToContext(r(s,o))):arguments[e]=t.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=n(289)(r.dirname(i)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),o(a)("createQuery",(function(e,n){return function(r){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:r,duration:o,time:e.startDate}),n.apply(this,arguments)}}));var c=n(290)(r.dirname(i)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}}),Ut=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=E();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var n=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),n.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}}),Bt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=E(),r=n(78);e.postgres6={versionSpecifier:"6.*",patch:function(e,n){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,n,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime();function l(e){e&&e[o]&&(e=e[o]);var n=t.channel.bindToContext((function(n,i){var o=process.hrtime(u);if(c.result=i&&{rowCount:i.rowCount,command:i.command},c.error=n,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",c),n){if(e)return e.apply(this,arguments);a&&a instanceof r.EventEmitter&&a.emit("error",n)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(n,o,{value:e}),n}catch(t){return e}}try{"string"==typeof e?n instanceof Array?(c.query.preparable={text:e,args:n},s=l(s)):(c.query.text=e,s?s=l(s):n=l(n)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):n?n=l(n):e.callback=l(e.callback))}catch(e){return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=n,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,n){var i=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,n,s){var a,c=this,u=!!s,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},p=process.hrtime();function d(e){e&&e[o]&&(e=e[o]);var n=t.channel.bindToContext((function(n,i){var o=process.hrtime(p);if(l.result=i&&{rowCount:i.rowCount,command:i.command},l.error=n,l.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",l),n){if(e)return e.apply(this,arguments);a&&a instanceof r.EventEmitter&&a.emit("error",n)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(n,o,{value:e}),n}catch(t){return e}}try{"string"==typeof e?n instanceof Array?(l.query.preparable={text:e,args:n},s=(u="function"==typeof s)?d(s):s):(l.query.text=e,s?s=(u="function"==typeof s)?d(s):s:n=(u="function"==typeof n)?d(n):n):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,s?(u="function"==typeof s,s=d(s)):n?n=(u="function"==typeof n)?d(n):n:(u="function"==typeof e.callback,e.callback=u?d(e.callback):e.callback))}catch(e){return i.apply(this,arguments)}return arguments[0]=e,arguments[1]=n,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=i.apply(this,arguments),u?a:a.then((function(e){return d()(void 0,e),new c._Promise((function(t,n){t(e)}))})).catch((function(e){return d()(e,void 0),new c._Promise((function(t,n){n(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}}),Ht=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=E();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var n=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var r=e.callback;if(!r||!r.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;e.callback=t.channel.bindToContext((function(n,a){var c=process.hrtime(o),u=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:u,address:i,commandObj:e,err:n,result:a,time:s}),"function"==typeof r&&r.apply(this,arguments)})),e.callback.pubsubBound=!0}}return n.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}}),Wt=f(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var n=E();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var r=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function e(e){var r=process.hrtime(),i={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return n.channel.bindToContext((function(o,s,a){var c=process.hrtime(r);i=t(t({},i),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!o&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:o,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),n.channel.publish("tedious",i),e.call(this,o,s,a)}))}var i=arguments[0];arguments[0].callback=e(i.callback),r.apply(this,arguments)},e}},e.enable=function(){n.channel.registerMonkeyPatch("tedious",e.tedious)}}),Gt=f(e=>{"use strict";var t,n=e&&e.__extends||(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,n)},function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),r=e&&e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var i=E();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,n){var r=e.call(this,n)||this;return r.winston=t,r}return n(t,e),t.prototype.log=function(e,t){var n=e.message,o=e.level,s=e.meta,a=r(e,["message","level","meta"]);o="function"==typeof Symbol.for?e[Symbol.for("level")]:o,n=e instanceof Error?e:n;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,o);for(var u in s=s||{},a)a.hasOwnProperty(u)&&(s[u]=a[u]);i.channel.publish("winston",{message:n,level:o,levelKind:c,meta:s}),t()},t}(e.Transport);function o(){var n,r=arguments[0].levels||e.config.npm.levels;for(var i in r)r.hasOwnProperty(i)&&(n=void 0===n||r[i]>r[n]?i:n);this.add(new t(e,{level:n}))}var s=e.createLogger;e.createLogger=function(){var n,r=arguments[0].levels||e.config.npm.levels;for(var i in r)r.hasOwnProperty(i)&&(n=void 0===n||r[i]>r[n]?i:n);var a=s.apply(this,arguments);a.add(new t(e,{level:n}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),o.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),o.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,r=function(n,r,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",i.channel.publish("winston",{level:n,message:r,meta:o,levelKind:s}),r};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==r&&(this.filters=this.filters.filter((function(e){return e!==r})),this.filters.push(r)):this.filters=[r],n.apply(this,arguments)},e}},e.enable=function(){i.channel.registerMonkeyPatch("winston",e.winston2),i.channel.registerMonkeyPatch("winston",e.winston3)}}),$t=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=Dt();e.azuresdk=t;var n=jt();e.bunyan=n;var r=Mt();e.console=r;var i=Lt();e.mongodbCore=i;var o=Ft();e.mongodb=o;var s=Vt();e.mysql=s;var a=Ut();e.pgPool=a;var c=Bt();e.pg=c;var u=Ht();e.redis=u;var l=Wt();e.tedious=l;var p=Gt();e.winston=p,e.enable=function(){n.enable(),r.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),u.enable(),p.enable(),t.enable(),l.enable()}}),qt=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=g(),n=y();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var r,i,o,s,a="DiagnosticChannel";if(e.IsInitialized){for(s in r=$t(),i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:r.bunyan,console:r.console,mongodb:r.mongodb,mongodbCore:r.mongodbCore,mysql:r.mysql,redis:r.redis,pg:r.pg,pgPool:r.pgPool,winston:r.winston,azuresdk:r.azuresdk})-1===i.indexOf(s)&&(o[s].enable(),n.info(a,"Subscribed to "+s+" events"));i.length>0&&n.info(a,"Some modules will not be patched",i)}else n.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(n){if(e.IsInitialized){var r=E();r.channel.addContextPreservation(n),r.channel.spanContextPropagator=t.AsyncScopeManager}}}),Kt=f((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),zt=f((e,t)=>{"use strict";var r=e&&e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=n(130),o=n(131),s=n(108),a=n(153),c=y(),u=Kt(),l=function(){function e(){}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++){n=o[s];if((n=e.trim(n))&&0===n.indexOf(i)){r=n.substring(i.length,o[s].length);break}}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),r=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",i=0;i<4;i++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(i>0?i+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++){if(new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1}return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[u.requestContextHeader];if(n)for(var r=n.split(","),i=0;i<r.length;++i){var o=r[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,u){n&&0===n.indexOf("//")&&(n="https:"+n);var l=s.parse(n),p=r(r({},a),{host:l.hostname,port:l.port,path:l.pathname}),d=void 0;if("https:"===l.protocol&&(d=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(d=t.proxyHttpUrl||void 0),d){0===d.indexOf("//")&&(d="http:"+d);var h=s.parse(d);"https:"===h.protocol?(c.info("Proxies that use HTTPS are not supported"),d=void 0):p=r(r({},p),{host:h.hostname,port:h.port||"80",path:n,headers:r(r({},p.headers),{Host:l.hostname})})}var f="https:"===l.protocol&&!d;return f&&void 0!==t.httpsAgent?p.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(p.agent=e.tlsRestrictedAgent):p.agent=t.httpAgent,f?o.request(p,u):i.request(p,u)},e.safeIncludeCorrelationHeader=function(t,n,r){var i;if("string"==typeof r)i=r;else if(r instanceof Array)i=r.join(",");else if(r&&"function"==typeof r.toString)try{i=r.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,r)}i?e.addCorrelationIdHeaderFromString(t,n,i):n.setHeader(u.requestContextHeader,u.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,n){var r=n.split(","),i=u.requestContextSourceKey+"=";r.some((function(e){return e.substring(0,i.length)===i}))||t.setHeader(u.requestContextHeader,n+","+u.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=l}),Yt=f((e,t)=>{"use strict";var n=zt(),r=y(),i=function(){function e(){}return e.queryCorrelationId=function(t,i){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))i(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(i);else{e.pendingLookups[o]=[i];var s=function(){if(e.pendingLookups[o]){var i={method:"GET",disableAppInsightsAutoCollection:!0};r.info(e.TAG,i);var a=n.makeRequest(t,o,i,(function(n){if(200===n.statusCode){var i="";n.setEncoding("utf-8"),n.on("data",(function(e){i+=e})),n.on("end",(function(){r.info(e.TAG,i);var t=e.correlationIdPrefix+i;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach((function(e){return e(t)})),delete e.pendingLookups[o]}))}else n.statusCode>=400&&n.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){r.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,n){var r=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[r];i&&(e.pendingLookups[r]=i.filter((function(e){return e!=n})),0==e.pendingLookups[r].length&&delete e.pendingLookups[r])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+n.w3cTraceId()+"."},e.appendSuffix=function(t,r,i){if(t.length+r.length<e.requestIdMaxLength)return t+r+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(r=n.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,o)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=n.randomu32(),e}();t.exports=i}),Xt=f((e,t)=>{"use strict";var n=zt(),r=Yt(),i=function(){function e(t,i){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=n.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=n.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=n.w3cTraceId().substr(0,16),this.traceId=n.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(i){this.parentId=i.slice();var a=r.getRootId(i);e.isValidTraceId(a)||(this.legacyRootId=a,a=n.w3cTraceId()),-1!==i.indexOf("|")&&(i=i.substring(1+i.substring(0,i.length-1).lastIndexOf("."),i.length-1)),this.traceId=a,this.spanId=i}else this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=n.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=i}),Qt=f((e,t)=>{"use strict";var n=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var n=t[0].trim(),r=t[1].trim(),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var n=[],r={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||r[c[0]])return null;r[c[0]]=!0,n.push(a)}}return n},e.strict=!0,e}();t.exports=n}),Jt=f((e,t)=>{"use strict";var n=function(){};t.exports=n}),Zt=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(Jt());t.exports=i}),en=f((e,t)=>{"use strict";var n=function(){};t.exports=n}),tn=f((e,t)=>{"use strict";var n=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"};t.exports=n}),nn=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){return e.call(this)||this}return r(t,e),t}(en());t.exports=i}),rn=f((e,t)=>{"use strict";var n,r;(r=n||(n={}))[r.Measurement=0]="Measurement",r[r.Aggregation=1]="Aggregation",t.exports=n}),on=f((e,t)=>{"use strict";var n=rn(),r=function(){this.kind=n.Measurement};t.exports=r}),sn=f((e,t)=>{"use strict";var n=function(){this.ver=1,this.sampleRate=100,this.tags={}};t.exports=n}),an=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(Jt());t.exports=i}),cn=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return r(t,e),t}(Jt());t.exports=i}),un=f((e,t)=>{"use strict";var n=function(){this.hasFullStack=!0,this.parsedStack=[]};t.exports=n}),ln=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return r(t,e),t}(Jt());t.exports=i}),pn=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return r(t,e),t}(Jt());t.exports=i}),dn=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(an());t.exports=i}),hn=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return r(t,e),t}(Jt());t.exports=i}),fn=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(Jt());t.exports=i}),vn=f((e,t)=>{"use strict";var n,r;(r=n||(n={}))[r.Verbose=0]="Verbose",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.Critical=4]="Critical",t.exports=n}),yn=f((e,t)=>{"use strict";var n=function(){};t.exports=n}),gn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=Zt(),e.Base=en(),e.ContextTagKeys=tn(),e.Data=nn(),e.DataPoint=on(),e.DataPointType=rn(),e.Domain=Jt(),e.Envelope=sn(),e.EventData=an(),e.ExceptionData=cn(),e.ExceptionDetails=un(),e.MessageData=ln(),e.MetricData=pn(),e.PageViewData=dn(),e.RemoteDependencyData=hn(),e.RequestData=fn(),e.SeverityLevel=vn(),e.StackFrame=yn()}),mn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=gn(),n=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=n,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}}),_n=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),En=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),wn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Tn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Pn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),In=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),On=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),An=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rn=f(e=>{"use strict";var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(n=t=e.TelemetryType||(e.TelemetryType={}))[n.Event=0]="Event",n[n.Exception=1]="Exception",n[n.Trace=2]="Trace",n[n.Metric=3]="Metric",n[n.Request=4]="Request",n[n.Dependency=5]="Dependency",n[n.Availability=6]="Availability",n[n.PageView=7]="PageView"}),Nn=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(_n(),e),n(bn(),e),n(En(),e),n(Sn(),e),n(wn(),e),n(Tn(),e),n(Pn(),e),n(In(),e),n(Cn(),e),n(On(),e),n(An(),e),n(xn(),e),n(Rn(),e)}),kn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),jn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ln=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Vn=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Un=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Bn=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(kn(),e),n(Dn(),e),n(jn(),e),n(Mn(),e),n(Ln(),e),n(Fn(),e),n(Vn(),e),n(Un(),e)}),Hn=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(mn(),e),n(gn(),e),n(Nn(),e),n(Bn(),e)}),Wn=f((e,t)=>{"use strict";var n=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=n}),Gn=f((e,t)=>{"use strict";var r,i=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(108),s=Hn(),a=zt(),c=Kt(),u=Wn(),l=Yt(),p=Qt(),d=Xt(),h=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var n in e)t[n]||(t[n]=e[n]);if(e.properties)for(var n in e.properties)t.properties[n]=e.properties[n]}return t},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,n=o.parse(e.url),r=n.pathname,i=n.search,s=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return o.format({protocol:s,host:e.headers.host,pathname:r,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var n=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,r=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,i=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,o=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,l.w3cEnabled&&(r||n)?(this.traceparent=new d(r?r.toString():null),this.tracestate=r&&n&&new p(n?n.toString():null),this.setBackCompatFromThisTraceContext()):i?l.w3cEnabled?(this.traceparent=new d(null,i),this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=l.generateRequestId(this.parentId),this.operationId=l.getRootId(this.requestId)):l.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=l.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=l.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=l.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(u);t.exports=h}),$n=f((e,t)=>{"use strict";function n(e){return"function"==typeof e}var r=console.error.bind(console);function i(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function o(e){e&&e.logger&&(n(e.logger)?r=e.logger:r("new logger isn't a function, not replacing"))}function s(e,t,o){if(e&&e[t]){if(!o)return r("no wrapper function"),void r((new Error).stack);if(n(e[t])&&n(o)){var s=e[t],a=o(s,t);return i(a,"__original",s),i(a,"__unwrap",(function(){e[t]===a&&i(e,t,s)})),i(a,"__wrapped",!0),i(e,t,a),a}r("original object and wrapper must be functions")}else r("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void r("no original to unwrap to -- has "+t+" already been unwrapped?"):(r("no function to unwrap."),void r((new Error).stack))}o.wrap=s,o.massWrap=function(e,t,n){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,n)}))})):r("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):r("must provide one or more functions to unwrap on modules")},t.exports=o}),qn=f((e,t)=>{"use strict";var n=$n(),r=n.wrap,i=n.unwrap,o="wrap@before";function s(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function a(e,t){var n;return n=e._events&&e._events[t],Array.isArray(n)||(n=n?[n]:[]),n}function c(e,t,n){var r=a(e,t).filter((function(e){return-1===n.indexOf(e)}));r.length>0&&function(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r],s=e[o];if("function"==typeof s)s(i);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](i)}}(e,r)}function u(e,t){if(e){var n=e;if("function"==typeof e)n=t(e);else if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r])}return n}}t.exports=function(e,t,n){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function l(e){return function(t,n){var i=a(this,t).slice();try{var o=e.call(this,t,n);return c(this,t,i),o}finally{this.on.__wrapped||r(this,"on",l),this.addListener.__wrapped||r(this,"addListener",l)}}}e[o]?"function"==typeof e[o]?s(e,o,[e[o],t]):Array.isArray(e[o])&&e[o].push(t):s(e,o,t),e.__wrapped||(r(e,"addListener",l),r(e,"on",l),r(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var o=this._events[t];function s(e){return function(){this._events[t]=o;try{return e.apply(this,arguments)}finally{o=this._events[t],this._events[t]=u(o,n)}}}r(this,"removeListener",s);try{return this._events[t]=u(o,n),e.apply(this,arguments)}finally{i(this,"removeListener"),this._events[t]=o}}})),s(e,"__unwrap",(function(){i(e,"addListener"),i(e,"on"),i(e,"emit"),delete e[o],delete e.__wrapped})),s(e,"__wrapped",!0))}}),Kn=f((e,t)=>{"use strict";var r=n(24),i=n(68),o=qn(),s=n(291),a="cls@contexts",c="error@context",u=process.env.DEBUG_CLS_HOOKED,l=-1;function p(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function d(e){return process.namespaces[e]}function h(e){let t=d(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function f(...e){u&&process._rawDebug(""+r.format(...e))}t.exports={getNamespace:d,createNamespace:function(e){i.ok(e,"namespace must be given a name."),u&&f(`NS-CREATING NAMESPACE (${e})`);let t=new p(e);return t.id=l,s.createHook({init(n,i,o,a){if(l=s.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),u){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${i}] (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(0===l){let o=s.triggerAsyncId(),c=t._contexts.get(o);if(c){if(t._contexts.set(n,c),u){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(u){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}if(u&&"PROMISE"===i){f(r.inspect(a,{showHidden:!0}));let s=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(n){let i;if(l=s.executionAsyncId(),i=t._contexts.get(n)||t._contexts.get(l),i){if(u){let o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`),t._indent+=2}t.enter(i)}else if(u){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${l} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){let i;if(l=s.executionAsyncId(),i=t._contexts.get(n)||t._contexts.get(l),i){if(u){let o=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`)}t.exit(i)}else if(u){let o=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${l} triggerId:${o} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(i)}`)}},destroy(n){if(l=s.executionAsyncId(),u){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${l} asyncId:${n} triggerId:${i} active:${r.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(t._contexts.get(l))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},p.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=t,u){f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return t},p.prototype.get=function(e){if(this.active){if(u){let t=s.executionAsyncId(),n=s.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);f(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${l} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[e]}if(u){let t=s.currentId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${l} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}},p.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=l,u){let t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${r.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},p.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(u){let e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${r.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(u){let e=s.triggerAsyncId(),n=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${r.inspect(t)}`)}this.exit(t)}},p.prototype.runAndReturn=function(e){let t;return this.run((function(n){t=e(n)})),t},p.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return u&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(t)),n.then(e=>(u&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e)).catch(e=>{throw e[c]=t,u&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e})},p.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},p.prototype.enter=function(e){if(i.ok(e,"context must be provided for entering"),u){let t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}this._set.push(this.active),this.active=e},p.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),u){let t=s.executionAsyncId(),n=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}if(this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(u&&f("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},p.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},p.prototype.fromException=function(e){return e[c]},process.namespaces={}}),zn=f((e,t)=>{"use strict";function n(){}t.exports=function(){let e=this._hooks,t=this._state,r=process.nextTick;process.nextTick=function(){if(!t.enabled)return r.apply(process,arguments);let i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];let o=i[0];if("function"!=typeof o)throw new TypeError("callback is not a function");let s=new n,a=--t.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},r.apply(process,i)}}}),Yn=f((e,t)=>{"use strict";function n(){}t.exports=function(){let e=this._hooks,t=this._state,r=global.Promise,i=r.prototype.then;function o(t,n,r,i){return"function"!=typeof t?i?function(t){return function(n){return e.destroy.call(null,t),n}}(r):function(t){return function(n){throw e.destroy.call(null,t),n}}(r):function(){e.pre.call(n,r);try{return t.apply(this,arguments)}finally{e.post.call(n,r,!1),e.destroy.call(null,r)}}}r.prototype.then=function(r,s){if(!t.enabled)return i.call(this,r,s);let a=new n,c=--t.counter;return e.init.call(a,c,0,null,null),i.call(this,o(r,a,c,!0),o(s,a,c,!1))}}}),Xn=f((e,t)=>{"use strict";var r=n(194);function i(){}function o(){}function s(){}var a=new Map,c=new Map,u=new Map,l=null,p=!1;function d(e,t,n,i,o,s,a){let c=r[n],u=r[i];r[n]=function(){if(!t.enabled)return c.apply(r,arguments);let n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];let i=n[0];if("function"!=typeof i)throw new TypeError('"callback" argument must be a function');let u,d=new o,h=--t.counter;return e.init.call(d,h,0,null,null),n[0]=function(){l=u,e.pre.call(d,h);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(d,h,!0),s.delete(u),e.destroy.call(null,h)}))}e.post.call(d,h,!1),l=null,(a||p)&&(p=!1,s.delete(u),e.destroy.call(null,h))},u=c.apply(r,n),s.set(u,h),u},r[i]=function(t){if(l===t&&null!==t)p=!0;else if(s.has(t)){let n=s.get(t);s.delete(t),e.destroy.call(null,n)}u.apply(r,arguments)}}t.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",i,a,!0),d(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",s,u,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate}}),Qn=f((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),Jn=f((e,t)=>{"use strict";var n=process.binding("async_wrap"),r=n.Providers.TIMERWRAP,i={nextTick:zn(),promise:Yn(),timers:Xn()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],i=this.destroyFns=[];this.init=function(t,n,i,s){if(n!==r)for(let r of e)r(t,this,n,i,s);else o.add(t)},this.pre=function(e){if(!o.has(e))for(let n of t)n(e,this)},this.post=function(e,t){if(!o.has(e))for(let r of n)r(e,this,t)},this.destroy=function(e){if(o.has(e))o.delete(e);else for(let t of i)t(e)}}function c(e,t){let n=e.indexOf(t);-1!==n&&e.splice(n,1)}function u(){this._state=new s,this._hooks=new a,this.version=Qn().version,this.providers=n.Providers;for(let e of Object.keys(i))i[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),n.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,n.enable()},u.prototype.disable=function(){this._state.enabled=!1,n.disable()}}),Zn=f((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),er=f((e,t)=>{t.exports=function(e,t){var n=[];n.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}(e));for(var r=0;r<t.length;r++){var i,o=t[r];try{i=o.toString()}catch(e){try{i="<error: "+e+">"}catch(e){i="<error>"}}n.push("    at "+i)}return n.join("\n")}}),tr=f((e,t)=>{var n=er();function r(){this.extend=new s,this.filter=new s,this.format=new a,this.version=Zn().version}var i=!1;r.prototype.callSite=function e(t){t||(t={}),i=!0;var n={};Error.captureStackTrace(n,e);var r=n.stack;return i=!1,r=r.slice(t.slice||0),t.extend&&(r=this.extend._modify(n,r)),t.filter&&(r=this.filter._modify(n,r)),r};var o=new r;function s(){this._modifiers=[]}function a(){this._formater=n,this._previous=void 0}s.prototype._modify=function(e,t){for(var n=0,r=this._modifiers.length;n<r;n++)t=this._modifiers[n](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=n,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===n?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function u(e,t){if(i)return t;if(c)return n(e,t);var r=t.concat();r=o.extend._modify(e,r),r=(r=o.filter._modify(e,r)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:r}),c=!0;var s=o.format._formater(e,r);return c=!1,s}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?o.format._roolback():(o.format._backup(),o.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=o}),nr=f((e,t)=>{if(global._stackChain){if(global._stackChain.version!==Zn().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=tr()}),rr=f((e,t)=>{"use strict";var n=Jn();if(global._asyncHook){if(global._asyncHook.version!==Qn().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else nr().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new n}),ir=f((e,t)=>{"use strict";var r=n(24),i=n(68),o=qn(),s=rr(),a="cls@contexts",c="error@context",u=[];for(let e in s.providers)u[s.providers[e]]=e;var l,p,d=process.env.DEBUG_CLS_HOOKED,h=-1;function f(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function v(e){return process.namespaces[e]}function y(e){let t=v(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function g(e){process.env.DEBUG&&process._rawDebug(e)}function m(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:v,createNamespace:function(e){i.ok(e,"namespace must be given a name."),d&&g("CREATING NAMESPACE "+e);let t=new f(e);return t.id=h,s.addHooks({init(n,i,o,s,a){h=n,s?(t._contexts.set(n,t._contexts.get(s)),d&&g("PARENTID: "+e+" uid:"+n+" parent:"+s+" provider:"+o)):t._contexts.set(h,t.active),d&&g("INIT "+e+" uid:"+n+" parent:"+s+" provider:"+u[o]+" active:"+r.inspect(t.active,!0))},pre(n,i){h=n;let o=t._contexts.get(n);o?(d&&g(" PRE "+e+" uid:"+n+" handle:"+m(i)+" context:"+r.inspect(o)),t.enter(o)):d&&g(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+m(i))},post(n,i){h=n;let o=t._contexts.get(n);o?(d&&g(" POST "+e+" uid:"+n+" handle:"+m(i)+" context:"+r.inspect(o)),t.exit(o)):d&&g(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+m(i))},destroy(n){h=n,d&&g("DESTROY "+e+" uid:"+n+" context:"+r.inspect(t._contexts.get(h))+" active:"+r.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t},destroyNamespace:y,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){y(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},f.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return d&&g("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+h+" active:"+r.inspect(this.active,!0)),this.active[e]=t,t},f.prototype.get=function(e){if(this.active)return d&&g("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+h+" active:"+r.inspect(this.active,!0)),this.active[e];d&&g("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+h+" active:"+r.inspect(this.active,!0))},f.prototype.createContext=function(){d&&g("   CREATING Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=h,d&&g("   CREATED Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  context:"+r.inspect(e,!0,2,!0)),e},f.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return d&&g(" BEFORE RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{d&&g(" AFTER RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t)}},f.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},f.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return d&&g(" BEFORE runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),n.then(e=>(d&&g(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e)).catch(e=>{throw e[c]=t,d&&g(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e})},f.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{n.exit(t)}}},f.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),d&&g("  ENTER "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+r.inspect(e)),this._set.push(this.active),this.active=e},f.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),d&&g("  EXIT "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+r.inspect(e)),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(d&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},f.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,n=e[a];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},f.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),d)for(p in(l=nr()).filter._modifiers)l.filter.deattach(p)}),or=f((e,t)=>{"use strict";var n=m();process&&n.gte(process.versions.node,"8.0.0")?t.exports=Kn():t.exports=ir()}),sr=f((e,t)=>{var n,r,i,o,s,a=$n().wrap,c=[],u=0,l=!1,p=[];function d(e,t){var n=e.length,r=t.length,i=[];if(0===n&&0===r)return i;for(var o=0;o<n;o++)i[o]=e[o];if(0===r)return i;for(var s=0;s<r;s++){var a=!0;for(o=0;o<n;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}function h(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=1),"function"==typeof e.before&&(this.before=e.before,this.flags|=2),"function"==typeof e.after&&(this.after=e.after,this.flags|=4),"function"==typeof e.error&&(this.error=e.error,this.flags|=8),this.uid=++u,this.data=void 0===t?null:t}function f(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof h?e:new h(e,t)}process._fatalException?(i=!1,n=function(e){var t=c.length;if(i||0===t)return!1;var n=!1;i=!0;for(var r=0;r<t;++r){var s=c[r];if(0!=(8&s.flags)){var a=o&&o[s.uid];n=s.error(a,e)||n}}return i=!1,p.length>0&&(c=p.pop()),o=void 0,n&&!l},r=function(e,t,n){var r=[];l=!0;for(var i=0;i<n;++i){var s=t[i];if(r[s.uid]=s.data,0!=(1&s.flags)){var a=s.create(s.data);void 0!==a&&(r[s.uid]=a)}}return l=!1,function(){o=r,p.push(c),c=d(t,c),l=!0;for(var i=0;i<n;++i)(2&t[i].flags)>0&&t[i].before(this,r[t[i].uid]);l=!1;var s=e.apply(this,arguments);for(l=!0,i=0;i<n;++i)(4&t[i].flags)>0&&t[i].after(this,r[t[i].uid]);return l=!1,c=p.pop(),o=void 0,s}},a(process,"_fatalException",(function(e){return function(t){return n(t)||e(t)}}))):(s=!1,n=function(e){if(s)throw e;for(var t=!1,n=c.length,r=0;r<n;++r){var i=c[r];0!=(8&i.flags)&&(t=i.error(null,e)||t)}if(!t&&l)throw e},r=function(e,t,r){var i=[];l=!0;for(var o=0;o<r;++o){var a=t[o];if(i[a.uid]=a.data,0!=(1&a.flags)){var u=a.create(a.data);void 0!==u&&(i[a.uid]=u)}}return l=!1,function(){var o,a=!1,u=!1;p.push(c),c=d(t,c),l=!0;for(var h=0;h<r;++h)(2&t[h].flags)>0&&t[h].before(this,i[t[h].uid]);l=!1;try{o=e.apply(this,arguments)}catch(e){a=!0;for(h=0;h<r;++h)if(0!=(8&c[h].flags))try{u=c[h].error(i[t[h].uid],e)||u}catch(e){throw s=!0,e}if(!u)throw process.removeListener("uncaughtException",n),process._originalNextTick((function(){process.addListener("uncaughtException",n)})),e}finally{if(!a||u){for(l=!0,h=0;h<r;++h)(4&t[h].flags)>0&&t[h].after(this,i[t[h].uid]);l=!1}c=p.pop()}return o}},process.addListener("uncaughtException",n)),h.prototype.create=void 0,h.prototype.before=void 0,h.prototype.after=void 0,h.prototype.error=void 0,h.prototype.data=void 0,h.prototype.uid=0,h.prototype.flags=0,process.createAsyncListener=f,process.addAsyncListener=function(e,t){var n;n=e instanceof h?e:f(e,t);for(var r=!1,i=0;i<c.length;i++)if(n===c[i]){r=!0;break}return r||c.push(n),n},process.removeAsyncListener=function(e){for(var t=0;t<c.length;t++)if(e===c[t]){c.splice(t,1);break}},t.exports=function(e){var t=c.length;if(0===t)return e;for(var n=c.slice(),i=0;i<t;++i)if(n[i].flags>0)return r(e,n,t);return function(e,t,n){l=!0;for(var r=0;r<n;++r){var i=t[r];i.create&&i.create(i.data)}return l=!1,function(){p.push(c),c=d(t,c);var n=e.apply(this,arguments);return c=p.pop(),n}}(e,n,t)}}),ar=f((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var n,r;super((function(e,o){n=this,r=[function(n){return t(i,!1),e(n)},function(e){return t(i,!1),o(e)}]}));var i=this;try{e.apply(n,r)}catch(e){r[1](e)}return i}}}),cr=f(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=$n(),t=m(),r=e.wrap,i=e.massWrap,o=sr(),s=n(24),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),u=t.gte(process.version,"8.0.0"),l=t.gte(process.version,"11.0.0"),p=n(292);function d(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=o(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function h(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=o(t._originalOnread)}}c&&!p._normalizeArgs?p._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],n={};"object"==typeof t&&null!==t?n=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?n.path=t:(n.port=t,e.length>1&&"string"==typeof e[1]&&(n.host=e[1]));var r=e[e.length-1];return"function"!=typeof r?[n,null]:[n,r]}:!c&&!p._normalizeConnectArgs&&(p._normalizeConnectArgs=function(e){var t,n={};"object"==typeof e[0]&&null!==e[0]?n=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?n.path=e[0]:(n.port=e[0],"string"==typeof e[1]&&(n.host=e[1]));var r=e[e.length-1];return"function"==typeof r?[n,r]:[n]}),"_setUpListenHandle"in p.Server.prototype?r(p.Server.prototype,"_setUpListenHandle",d):r(p.Server.prototype,"_listen2",d),r(p.Socket.prototype,"connect",(function(e){return function(){var t;(t=u&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?p._normalizeArgs(arguments):p._normalizeConnectArgs(arguments))[1]&&(t[1]=o(t[1]));var n=e.apply(this,t);return h(this),n}}));var f=n(130);r(f.Agent.prototype,"addRequest",(function(e){return function(t){var n=t.onSocket;return t.onSocket=o((function(e){return h(e),n.apply(this,arguments)})),e.apply(this,arguments)}}));var v=n(109);function y(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=o(e._handle.onread),r(e._handle,"close",R))})),e._handle&&(e._handle.onexit=o(e._handle.onexit))}v.ChildProcess?r(v.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return y(this),t}})):i(v,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return y(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),i(process,g,x),r(process,"nextTick",R);var _=["setTimeout","setInterval"];global.setImmediate&&_.push("setImmediate");var b=n(194),E=global.setTimeout===b.setTimeout;i(b,_,R),E&&i(global,_,R);var S=n(293);i(S,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],x),S.resolveNaptr&&r(S,"resolveNaptr",x);var w,T,P,I=n(16);i(I,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],x),I.lchown&&r(I,"lchown",x),I.lchmod&&r(I,"lchmod",x),I.ftruncate&&r(I,"ftruncate",x);try{w=n(195)}catch(e){}w&&w.Deflate&&w.Deflate.prototype&&((T=Object.getPrototypeOf(w.Deflate.prototype))._transform?r(T,"_transform",x):T.write&&T.flush&&T.end&&i(T,["write","flush","end"],x));try{P=n(119)}catch(e){}P&&(C=["pbkdf2","randomBytes"],l||C.push("pseudoRandomBytes"),i(P,C,x));var C,O,A=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function x(e){var t=function(){var t,n=arguments.length-1;if("function"==typeof arguments[n]){t=Array(arguments.length);for(var r=0;r<arguments.length-1;r++)t[r]=arguments[r];t[n]=o(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,n,r,i))};case 4:return function(n,r,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=o(s)),e.call(this,n,r,i,s))};case 5:return function(n,r,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=o(a)),e.call(this,n,r,i,s,a))};case 6:return function(n,r,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=o(c)),e.call(this,n,r,i,s,a,c))};default:return t}}function R(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=o(arguments[0]);for(var n=1;n<arguments.length;n++)t[n]=arguments[n]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i))};case 4:return function(n,r,i,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i,s))};case 5:return function(n,r,i,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i,s,a))};case 6:return function(n,r,i,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,n,r,i,s,a,c))};default:return t}}A&&(O=process.addAsyncListener({create:function(){A=!1}}),global.Promise.resolve(!0).then((function(){A=!1})),process.removeAsyncListener(O)),A&&function(){var e=global.Promise;function t(r){if(!(this instanceof t))return e(r);if("function"!=typeof r)return new e(r);var i,o,s=new e((function(e,t){i=this,o=[function(t){return n(s,!1),e(t)},function(e){return n(s,!1),t(e)}]}));s.__proto__=t.prototype;try{r.apply(i,o)}catch(e){o[1](e)}return s}if(s.inherits(t,e),r(e.prototype,"then",c),e.prototype.chain&&r(e.prototype,"chain",c),a)global.Promise=ar()(e,n);else{["all","race","reject","resolve","accept","defer"].forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])})),global.Promise=t}function n(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=o(i))}function i(t,r,o,s){var a;try{return{returnVal:a=r.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){var e=a.__asl_wrapper||i;return e.apply(this,arguments)}:n(s,!0)}}function c(e){return function(){var t=this,n=e.apply(t,Array.prototype.map.call(arguments,r));return n.__asl_wrapper=function(e,r,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,n),n.__asl_wrapper(e,r,o,s)):i(e,r,o,s)},n;function r(e){return"function"!=typeof e?e:o((function(r){var o=(t.__asl_wrapper||i)(this,e,r,n);if(o.error)throw o.errorVal;return o.returnVal}))}}}}()}),ur=f((e,t)=>{"use strict";var r=n(68),i=qn(),o="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function u(e){var t=c(e);r.ok(t,"can't delete nonexistent namespace!"),r.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){u(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||cr(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{n.exit(t)}}},a.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);r.ok(t>=0,"context not currently entered; can't exit"),r.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;i(e,(function(e){!e||(e[o]||(e[o]=Object.create(null)),e[o][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,n=e[o];return Object.keys(n).forEach((function(e){var r=n[e];t=r.namespace.bind(t,r.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||l(),t.exports={getNamespace:c,createNamespace:function(e){r.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:u,reset:l}}),lr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=y(),n=qt(),r=Xt(),i=Qt(),o=Gn(),s=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,n,r,i,o){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new a(r)}:null},e.spanToContextObject=function(t,n,i){var o=new r;return o.traceId=t.traceId,o.spanId=t.spanId,o.traceFlag=r.formatOpenTelemetryTraceFlags(t.traceFlags)||r.DEFAULT_TRACE_FLAG,o.parentId=n,e.generateContextObject(o.traceId,o.parentId,i,null,o)},e.runWithContext=function(t,n){var r;return e.enabled?e.session.bind(n,((r={})[e.CONTEXT_NAME]=t,r))():n()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,n){var r;return e.enabled?e.session.bind(t,n?((r={})[e.CONTEXT_NAME]=n,r):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=or():this.cls=ur()),e.session=this.cls.createNamespace("AI-CLS-Session"),n.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(n,s){var a=n&&n.traceContext||null,c=n&&n.traceId?n:null,u=n&&n.headers;if(c){var l=new r("00-"+c.traceId+"-"+c.spanId+"-01"),p=new i(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof s?s:"",void 0,l,p)}if(a){l=new r(a.traceparent),p=new i(a.tracestate);var d="object"==typeof s?new o(s):null;return e.generateContextObject(l.traceId,l.parentId,"string"==typeof s?s:d.getOperationName({}),d&&d.getCorrelationContextHeader()||void 0,l,p)}if(u){l=new r(u.traceparent?u.traceparent.toString():null),p=new i(u.tracestate?u.tracestate.toString():null),d=new o(n);return e.generateContextObject(l.traceId,l.parentId,d.getOperationName({}),d.getCorrelationContextHeader(),l,p)}return t.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,r=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&r},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=s;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(n,r){if(e.bannedCharacters.test(n)||e.bannedCharacters.test(r))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+n+" and value: "+r);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===n)return void(o.value=r)}this.props.push({key:n,value:r})}},e.bannedCharacters=/[,=]/,e}()}),pr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Hn(),n=E(),r=[],i=function(e){var n=e.data.message;r.forEach((function(r){n instanceof Error?r.trackException({exception:n}):(n.lastIndexOf("\n")==n.length-1&&(n=n.substring(0,n.length-1)),r.trackTrace({message:n,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("console",i),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("console",i)},e.dispose=function(){n.channel.unsubscribe("console",i),r=[]}}),dr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Hn(),n=E(),r=[],i={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},o=function(e){var t=e.data.result;r.forEach((function(n){var r=i[e.data.level];t instanceof Error?n.trackException({exception:t}):n.trackTrace({message:t,severity:r})}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("bunyan",o),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("bunyan",o)},e.dispose=function(){n.channel.unsubscribe("bunyan",o),r=[]}}),hr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Hn(),n=E(),r=[],i={syslog:function(e){var n={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===n[e]?t.SeverityLevel.Information:n[e]},npm:function(e){var n={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===n[e]?t.SeverityLevel.Information:n[e]},unknown:function(e){return t.SeverityLevel.Information}},o=function(e){var t=e.data.message;r.forEach((function(n){if(t instanceof Error)n.trackException({exception:t,properties:e.data.meta});else{var r=i[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:r,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===r.length&&n.channel.subscribe("winston",o),r.push(t)):0===(r=r.filter((function(e){return e!=t}))).length&&n.channel.unsubscribe("winston",o)},e.dispose=function(){n.channel.unsubscribe("winston",o),r=[]}}),fr=f((e,t)=>{"use strict";var n=qt(),r=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){n.IsInitialized&&(pr().enable(e&&t,this._client),dr().enable(e,this._client),hr().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=r}),vr=f((e,t)=>{"use strict";var n=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||13===parseInt(n[0])&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){this._isInitialized=!0;if(!this._exceptionListenerHandle){var r=function(t,r,i){void 0===i&&(i=new Error(e._FALLBACK_ERROR_MESSAGE)),n._client.trackException({exception:i}),n._client.flush({isAppCrashing:!0}),t&&r&&1===process.listeners(r).length&&(console.error(i),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=n}),yr=f(e=>{"use strict";var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(r=n=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",r.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",r.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",r.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",r.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",r.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",r.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",r.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",r.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(i=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[i.PROCESSOR_TIME]=n.PROCESSOR_TIME,t[i.REQUEST_RATE]=n.REQUEST_RATE,t[i.REQUEST_DURATION]=n.REQUEST_DURATION,t[n.COMMITTED_BYTES]=n.COMMITTED_BYTES,t[n.REQUEST_FAILURE_RATE]=n.REQUEST_FAILURE_RATE,t[n.DEPENDENCY_RATE]=n.DEPENDENCY_RATE,t[n.DEPENDENCY_FAILURE_RATE]=n.DEPENDENCY_FAILURE_RATE,t[n.DEPENDENCY_DURATION]=n.DEPENDENCY_DURATION,t[n.EXCEPTION_RATE]=n.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),gr=f((e,t)=>{"use strict";var r=n(35),i=yr(),o=function(){function e(t,n,r){void 0===n&&(n=6e4),void 0===r&&(r=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=r}return e.prototype.enable=function(t,n){var i=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval((function(){return i.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalRequestExecutionTime+=r,!1===n&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalDependencyExecutionTime+=r,!1===n&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var u=e[c],l=this._lastCpus[c],p=(u.model,u.speed,u.times),d=l.times;t+=p.user-d.user||0,n+=p.sys-d.sys||0,o+=p.nice-d.nice||0,s+=p.idle-d.idle||0,a+=p.irq-d.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),v=process.hrtime(),y=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;if(void 0!==this._lastHrtime&&2===this._lastHrtime.length)h=100*y/((1e6*(v[0]-this._lastHrtime[0])+(v[1]-this._lastHrtime[1])/1e3||0)*e.length);this._lastAppCpuUsage=f,this._lastHrtime=v}var g=t+n+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(g-s)/g*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:h||t/g*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.freemem(),t=process.memoryUsage().rss,n=r.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,o=n.totalFailedRequestCount-t.totalFailedRequestCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/r||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var u=r/a,l=o/a;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:l})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},r=n.totalDependencyCount-t.totalDependencyCount||0,o=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/r||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var u=r/a,l=o/a;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:l}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},r=n.totalExceptionCount-t.totalExceptionCount||0,o=n.time-t.time;if(o>0){var s=r/(o/1e3);this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=o}),mr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0};e.AggregatedMetricCounter=t}),_r=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),br=f((e,t)=>{"use strict";var n=e&&e.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=yr(),i=mr(),o=_r(),s=function(){function e(t,n){void 0===n&&(n=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=n}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return n.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._requestCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}i.intervalExecutionTime+=r,i.totalCount++}},e.countDependency=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._dependencyCountersCollection);if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}i.intervalExecutionTime+=r,i.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var n=!1,r=0;r<t.length;r++){if(e===t[r].dimensions)return t[r];if(Object.keys(e).length===Object.keys(t[r].dimensions).length){for(var o in e)if(e[o]!=t[r].dimensions[o]){n=!0;break}if(!n)return t[r];n=!1}}var s=new i.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var n=e._requestCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/i||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:n.dimensions,value:s,count:i,aggregationInterval:o,metricType:r.MetricId.REQUESTS_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var n=e._dependencyCountersCollection[t];n.time=+new Date;var i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime,s=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/i||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,o>0&&i>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:n.dimensions,value:s,count:i,aggregationInterval:o,metricType:r.MetricId.DEPENDENCIES_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var n=e._exceptionCountersCollection[t],i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:n.dimensions,value:i,count:i,aggregationInterval:o,metricType:r.MetricId.EXCEPTIONS_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var n=e._traceCountersCollection[t],i=n.totalCount-n.lastTotalCount||0,o=n.time-n.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:n.dimensions,value:i,count:i,aggregationInterval:o,metricType:r.MetricId.TRACES_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var r in e.dimensions)t[o.PreaggregatedMetricPropertyNames[r]]=e.dimensions[r];t=n(n({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=s}),Er=f((e,t)=>{"use strict";var r=n(35),i=n(16),o=n(0),s=Hn(),a=y(),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.sdkVersion=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c}),Sr=f((e,t)=>{"use strict";var r,i=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(108),s=Hn(),a=zt(),c=Kt(),u=Wn(),l=Yt(),p=function(e){function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=o.parse(this.url);n.search=void 0,n.hash=void 0;var r=this.method.toUpperCase()+" "+n.pathname,i=s.RemoteDependencyDataConstants.TYPE_HTTP,a=n.hostname;n.port&&(a+=":"+n.port),this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(a+=" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var u in e)c[u]||(c[u]=e[u]);if(e.properties)for(var u in e.properties)c.properties[u]=e.properties[u]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=o.parse(e);else{var n=o.parse(e);e="443"===n.host?o.parse("https://"+e):o.parse("http://"+e)}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var r=e;e={},r&&Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.path){var i=o.parse(e.path);e.pathname=i.pathname,e.search=i.search}e.host&&e.port&&(!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host));return e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(u);t.exports=p}),wr=f(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var n=ve(),r=yr();function i(e){var n=t({},e);return Object.keys(r.SpanAttribute).forEach((function(e){delete n[e]})),n}e.spanToTelemetryContract=function(e){var o="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",s=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",u=c.toUpperCase()===r.DependencyTypeName.Http||!!e.attributes[r.SpanAttribute.HttpUrl],l=c.toLowerCase()===r.DependencyTypeName.Grpc;if(u){var p=e.attributes[r.SpanAttribute.HttpMethod]||"GET",d=new URL(e.attributes[r.SpanAttribute.HttpUrl].toString()),h=e.attributes[r.SpanAttribute.HttpHost]||d.host,f=e.attributes[r.SpanAttribute.HttpPort]||d.port||null,v=p+" "+(d.pathname||"/"),y=r.DependencyTypeName.Http,g=f?(h+":"+f).toString():h.toString(),m=d.toString(),_=e.attributes[r.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:o,name:v,dependencyTypeName:y,target:g,data:m,success:_<400,duration:s,url:m,resultCode:String(_),properties:i(e.attributes)}}if(l){p=e.attributes[r.SpanAttribute.GrpcMethod]||"rpc";var b=e.attributes[r.SpanAttribute.GrpcService],E=b?p+" "+b:e.name;return{id:o,duration:s,name:E,target:b.toString(),data:b.toString()||E,url:b.toString()||E,dependencyTypeName:r.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:i(e.attributes)}}var S=e.name,w=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:o,duration:s,name:S,target:a,data:a||S,url:a||S,dependencyTypeName:e.kind===n.SpanKind.INTERNAL?r.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},i(e.attributes)),{"_MS.links":w||void 0})}}}),Tr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=ve(),n=E(),r=Xt(),i=wr(),o=g(),s=[];e.subscriber=function(e){var n=e.data,a=i.spanToTelemetryContract(n),c=n.spanContext(),u=new r;u.traceId=c.traceId,u.spanId=c.spanId,u.traceFlag=r.formatOpenTelemetryTraceFlags(c.traceFlags),u.parentId=n.parentSpanId?"|"+c.traceId+"."+n.parentSpanId+".":null,o.AsyncScopeManager.with(n,(function(){s.forEach((function(e){n.kind===t.SpanKind.SERVER?e.trackRequest(a):(n.kind===t.SpanKind.CLIENT||n.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,r){t?(0===s.length&&n.channel.subscribe("azure-coretracing",e.subscriber),s.push(r)):0===(s=s.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("azure-coretracing",e.subscriber)}}),Pr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=E(),n=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&n.forEach((function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("mongodb",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}}),Ir=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=E(),n=[];e.subscriber=function(e){n.forEach((function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("mysql",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}}),Cr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=E(),n=[];e.subscriber=function(e){n.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("redis",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("redis",e.subscriber)}}),Or=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=E(),n=[];e.subscriber=function(e){n.forEach((function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(r,i){r?(0===n.length&&t.channel.subscribe("postgres",e.subscriber),n.push(i)):0===(n=n.filter((function(e){return e!=i}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}}),Ar=f((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},i=n(130),o=n(131),s=y(),a=zt(),c=Kt(),u=Sr(),l=lr(),p=Yt(),d=Xt(),h=qt(),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),h.IsInitialized&&(Tr().enable(!0,this._client),Pr().enable(e,this._client),Ir().enable(e,this._client),Cr().enable(e,this._client),Or().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=i.request,s=o.request,a=function(n,r){var i=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag];r.headers&&r.headers["user-agent"]&&-1!==r.headers["user-agent"].toString().indexOf("azsdk-js")&&(i=!1),n[e.alreadyAutoCollectedFlag]=!0,n&&r&&i&&(l.CorrelationContextManager.wrapEmitter(n),e.trackRequest(t._client,{options:r,request:n}))};i.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var s=n.call.apply(n,r([i,e],t));return a(s,e),s},o.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=s.call.apply(s,r([o,e],t));return a(i,e),i},i.get=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=(t=i.request).call.apply(t,r([i,e],n));return s.end(),s},o.get=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var s=(t=o.request).call.apply(t,r([o,e],n));return s.end(),s}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r,i,o=new u(n.options,n.request),h=l.CorrelationContextManager.getCurrentContext();if(h&&h.operation&&h.operation.traceparent&&d.isValidTraceId(h.operation.traceparent.traceId))h.operation.traceparent.updateSpanId(),r=h.operation.traceparent.getBackCompatRequestId();else if(p.w3cEnabled){i=(v=new d).toString(),r=v.getBackCompatRequestId()}else r=h&&h.operation&&h.operation.parentId+e.requestNumber+++".";if(a.canIncludeCorrelationHeader(t,o.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var f=n.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,n.request,f)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(h&&h.operation)try{if(n.request.setHeader(c.requestIdHeader,r),t.config.ignoreLegacyHeaders||(n.request.setHeader(c.parentIdHeader,h.operation.id),n.request.setHeader(c.rootIdHeader,r)),i||h.operation.traceparent)n.request.setHeader(c.traceparentHeader,i||h.operation.traceparent.toString());else if(p.w3cEnabled){var v=(new d).toString();n.request.setHeader(c.traceparentHeader,v)}if(h.operation.tracestate){var y=h.operation.tracestate.toString();y&&n.request.setHeader(c.traceStateHeader,y)}var g=h.customProperties.serializeToHeader();g&&n.request.setHeader(c.correlationContextHeader,g)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}n.request.on&&(n.request.on("response",(function(e){o.onResponse(e);var i=o.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)})),n.request.on("error",(function(e){o.onError(e);var i=o.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects.Error=e,t.trackDependency(i)})),n.request.on("abort",(function(){o.onError(new Error);var e=o.getDependencyTelemetry(n,r);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=n.options,e.contextObjects["http.ClientRequest"]=n.request,t.trackDependency(e)})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=f}),xr=f((e,t)=>{"use strict";var r=n(35),i=yr(),o=zt(),s=Er(),a=Ar(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return n.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var n=this,o=!1,a={},c=s.sdkVersion;a.sdk=c,a.osType=r.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(o=!0,this._getAzureComputeMetadata(e,(function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),o||(this._client.trackMetric({name:i.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var n,r=this,i=((n={method:"GET"})[a.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),s=o.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",i,(function(e){if(200===e.statusCode){r._isVM=!0;var n="";e.on("data",(function(e){n+=e})),e.on("end",(function(){r._vmData=r._isJSON(n)?JSON.parse(n):{},t()}))}else t()}));s&&(s.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(r._isVM=!1),t()})),s.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch(e){return!1}},e}();t.exports=c}),Rr=f((e,t)=>{"use strict";var r=n(130),i=n(131),o=y(),s=zt(),a=Kt(),c=Gn(),u=lr(),l=gr(),p=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=function(n){if(n){if("function"!=typeof n)throw new Error("onRequest handler must be a function");return function(r,i){u.CorrelationContextManager.wrapEmitter(r),u.CorrelationContextManager.wrapEmitter(i);var o=r&&!r[e.alreadyAutoCollectedFlag];if(r&&o){var s=new c(r),a=t._generateCorrelationContext(s);u.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(r[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:r,response:i},s)),"function"==typeof n&&n(r,i)}))}else"function"==typeof n&&n(r,i)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return t(e,n(r));default:return t(e,r)}},e.on=e.addListener},s=r.createServer;r.createServer=function(e,t){if(t&&"function"==typeof t){var r=s(e,n(t));return o(r),r}r=s(n(e));return o(r),r};var a=i.createServer;i.createServer=function(e,t){var r=a(e,n(t));return o(r),r}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){e.addResponseCorrelationIdHeader(t,n.response);var r=u.CorrelationContextManager.getCurrentContext(),i=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){var i=u.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",(function(){e.endRequest(t,a,n,null,null)})),n.request.on&&n.request.on("error",(function(r){e.endRequest(t,a,n,null,r)})),n.request.on&&n.request.on("aborted",(function(){e.endRequest(t,a,n,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,n)}},e.endRequest=function(e,t,n,r,i){i?t.onError(i,r):t.onResponse(n.response,r);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,u.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=p}),Nr=f((e,t)=>{"use strict";var r=e&&e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=n(35),o=Hn(),s=yr(),a=zt(),c=y(),u=a.w3cTraceId(),l=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,n,r){var o=i&&"function"==typeof i.hostname&&i.hostname()||"Unknown",s=r.tags&&r.keys&&r.keys.cloudRoleInstance&&r.tags[r.keys.cloudRoleInstance]||o,a=r.tags&&r.keys&&r.keys.cloudRole&&r.tags[r.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:r.tags[r.keys.internalSdkVersion],StreamId:u,MachineName:o,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.name;return r(r({},n),{Name:i})},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.severityLevel||0;return r(r({},n),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[i]})},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.exceptions,o="",s="",a="";return i&&i.length>0&&(i[0].parsedStack&&i[0].parsedStack.length>0?i[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):i[0].stack&&i[0].stack.length>0&&(o=i[0].stack),s=i[0].message,a=i[0].typeName),r(r({},n),{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r(r({},n),{Name:i.name,Success:i.success,Duration:i.duration,ResponseCode:i.responseCode,OperationName:i.name})},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r(r({},n),{Name:i.name,Target:i.target,Success:i.success,Duration:i.duration,ResultCode:i.resultCode,CommandName:i.data,OperationName:n.OperationId,DependencyTypeName:i.type})},e.createQuickPulseDocument=function(t){var n,r;return t.data.baseType?(r=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:n,__type:r,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],n=e.data.baseData.measurements||{};for(var r in n)if(n.hasOwnProperty(r)){var i={key:r,value:n[r]};t.push(i)}var o=e.data.baseData.properties||{};for(var r in o)if(o.hasOwnProperty(r)){i={key:r,value:o[r]};t.push(i)}return t},e.keys=new o.ContextTagKeys,e}();t.exports=l}),kr=f((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}}),Dr=f((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(131),s=Ar(),a=y(),c=kr(),u=zt(),l="POST",p="x-ms-qps-transmission-time",d="x-ms-qps-service-polling-interval-hint",h="x-ms-qps-service-endpoint-redirect",f="x-ms-qps-instance-name",v="x-ms-qps-stream-id",g="x-ms-qps-machine-name",m="x-ms-qps-role-name",_="x-ms-qps-invariant-version",b="x-ms-qps-subscribed",E=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,n){var r=[{name:v,value:e.StreamId},{name:g,value:e.MachineName},{name:m,value:e.RoleName},{name:f,value:e.Instance},{name:_,value:e.InvariantVersion.toString()}];this._submitData(e,t,n,"ping",r)},e.prototype.post=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,this._submitData([e],t,n,"post")];case 1:return r.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,n,a,f){return r(this,void 0,void 0,(function(){var r,v,y,g,m,_=this;return i(this,(function(i){return r=JSON.stringify(e),(g={})[s.disableCollectionRequestOption]=!0,g.host=t&&t.length>0?t:this._config.quickPulseHost,g.method=l,g.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,g.headers=((m={Expect:"100-continue"})[p]=c.getTransmissionTime(),m["Content-Type"]="application/json",m["Content-Length"]=Buffer.byteLength(r),m),v=g,f&&f.length>0&&f.forEach((function(e){return v.headers[e.name]=e.value})),this._config.httpsAgent?v.agent=this._config.httpsAgent:v.agent=u.tlsRestrictedAgent,(y=o.request(v,(function(e){if(200==e.statusCode){var t="true"===e.headers[b],r=e.headers[h]?e.headers[h].toString():null,i=e.headers[d]?parseInt(e.headers[d].toString()):null;_._consecutiveErrors=0,n(t,e,r,i)}else _._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),n()}))).on("error",(function(e){_._onError(e),n()})),y.write(r),y.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(n="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,n,t)):a.info(e.TAG,n,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=E}),jr=f((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=y(),o=Nr(),s=Dr(),a=yr(),c=Er(),u=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,n=e.count||1,r=a.PerformanceToQuickPulseCounter[e.name];r&&(this._metrics[r]?(this._metrics[r].Value=(this._metrics[r].Value*this._metrics[r].Weight+t*n)/(this._metrics[r].Weight+n),this._metrics[r].Weight+=n):(this._metrics[r]=o.createQuickPulseMetric(e),this._metrics[r].Name=r,this._metrics[r].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return n(this,void 0,void 0,(function(){var t,n,i,s,a=this;return r(this,(function(r){switch(r.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),n=o.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(n)]:[3,2];case 1:return r.sent(),[3,3];case 2:this._ping(n),r.label=3;case 3:return i=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,s=this._isCollectingData?e.POST_INTERVAL:i,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,s=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(s=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),s),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,n,r){null!=e?(this._isCollectingData!==e&&(i.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,i.info("Redirecting endpoint to: ",n)),r&&r>0&&(this._pollingIntervalHint=r),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=u}),Mr=f((e,t)=>{"use strict";var n=yr(),r=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR).reduce((function(t,n){var r=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===r.length){var i=r[0].toLowerCase(),o=r[1];t[i]=o}return t}),{});if(Object.keys(r).length>0){if(r.endpointsuffix){var i=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+i+"dc."+r.endpointsuffix,r.liveendpoint=r.liveendpoint||"https://"+i+"live."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||n.DEFAULT_BREEZE_ENDPOINT,r.liveendpoint=r.liveendpoint||n.DEFAULT_LIVEMETRICS_ENDPOINT}return r},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=r}),Lr=f((e,t)=>{"use strict";var r=Yt(),i=Mr(),o=(y(),yr()),s=n(108),a=function(){function e(t){var n=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var r=process.env[e.ENV_connectionString],a=i.parse(t),c=i.parse(r),u=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||u||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return n.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a}),Fr=f(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=Lr(),i=Er(),o=y(),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,r,i){var s=this;if(void 0===r&&(r={}),void 0===i&&(i=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=n(294);e._emitter=new a,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,i),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),i),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var n=process.env[r.ENV_nativeMetricsDisableAll],i=process.env[r.ENV_nativeMetricsDisablers];if(n)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++){s[c[a]]=!0}return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var n=e._emitter.getGCData();for(var r in n){var o=n[r].metrics,s=r+" Garbage Collection Duration",a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var n=e._emitter.getLoopData().loopUsage;if(0!=n.count){var r=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:n.total,count:n.count,min:n.min,max:n.max,stdDev:r,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,n;if(!this._disabledMetrics.heap){var r=process.memoryUsage(),o=r.heapUsed,s=r.heapTotal,a=r.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,n)})}},e}();e.AutoCollectNativePerformance=s}),Vr=f((e,t)=>{"use strict";var n=y(),r=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void n.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;n||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e}();t.exports=r}),Ur=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}}),Br=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=Hn();function n(e){var t=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var r=0;r<e.length;r++)n=((n<<5)+n|0)+e.charCodeAt(r)|0;return(n=n<=-2147483648?t:Math.abs(n))/t*100}e.samplingTelemetryProcessor=function(e,r){var i=e.sampleRate;return!!(null==i||i>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(r.correlationContext&&r.correlationContext.operation?n(r.correlationContext.operation.id)<i:100*Math.random()<i)},e.getSamplingHashCode=n}),Hr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=gr(),n=Hn();e.performanceMetricsTelemetryProcessor=function(e,r){switch(r&&r.addDocument(e),e.data.baseType){case n.TelemetryTypeString.Exception:t.countException();break;case n.TelemetryTypeString.Request:var i=e.data.baseData;t.countRequest(i.duration,i.success);break;case n.TelemetryTypeString.Dependency:var o=e.data.baseData;t.countDependency(o.duration,o.success)}return!0}}),Wr=f(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var n=Hn(),r=br(),i=Hn();e.preAggregatedMetricsTelemetryProcessor=function(e,o){if(r.isEnabled())switch(e.data.baseType){case i.TelemetryTypeString.Exception:var s=e.data.baseData;s.properties=t(t({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole]};r.countException(a);break;case i.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],traceSeverityLevel:n.SeverityLevel[c.severity]};r.countTrace(u);break;case i.TelemetryTypeString.Request:var l=e.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],requestSuccess:l.success,requestResultCode:l.responseCode};r.countRequest(l.duration,p);break;case i.TelemetryTypeString.Dependency:var d=e.data.baseData;d.properties=t(t({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],dependencySuccess:d.success,dependencyType:d.type,dependencyTarget:d.target,dependencyResultCode:d.resultCode};r.countDependency(d.duration,h)}return!0}}),Gr=f(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=e&&e.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ur(),e),n(Br(),e),n(Hr(),e),n(Wr(),e)}),$r=f((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=n(16),s=n(35),a=n(0),c=n(195),u=n(109),l=y(),p=Ar(),d=zt(),h=function(){function e(t,n,r){if(this._redirectedHost=null,this._config=t,this._onSuccess=n,this._onError=r,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||l.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,n,r){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){i._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,n){return r(this,void 0,void 0,(function(){var r,o,s,a,u=this;return i(this,(function(i){return t&&(r=this._redirectedHost||this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach((function(e){var t=u._stringify(e);"string"==typeof t&&(s+=t+"\n")})),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),c.gzip(a,(function(i,s){var c=s;i?(l.warn(i),c=a,o.headers["Content-Length"]=a.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=s.length.toString()),l.info(e.TAG,o),o[p.disableCollectionRequestOption]=!0;var h=d.makeRequest(u._config,r,o,(function(r){r.setEncoding("utf-8");var i="";r.on("data",(function(e){i+=e})),r.on("end",(function(){if(u._numConsecutiveFailures=0,u._enableDiskRetryMode)if(200===r.statusCode)u._resendTimer||(u._resendTimer=setTimeout((function(){u._resendTimer=null,u._sendFirstFileOnDisk()}),u._resendInterval),u._resendTimer.unref());else if(u._isRetriable(r.statusCode))try{var o=JSON.parse(i),s=[];o.errors.forEach((function(e){u._isRetriable(e.statusCode)&&s.push(t[e.index])})),s.length>0&&u._storeToDisk(s)}catch(e){u._storeToDisk(t)}if(307===r.statusCode||308===r.statusCode)if(u._numConsecutiveRedirects++,u._numConsecutiveRedirects<10){var a=r.headers.location?r.headers.location.toString():null;a&&(u._redirectedHost=a,u.send(t,n))}else"function"==typeof n&&n("Error sending telemetry because of circular redirects.");else u._numConsecutiveRedirects=0,"function"==typeof n&&n(i),l.info(e.TAG,i),"function"==typeof u._onSuccess&&u._onSuccess(i)}))}));h.on("error",(function(r){if(u._numConsecutiveFailures++,!u._enableDiskRetryMode||u._numConsecutiveFailures>0&&u._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";u._enableDiskRetryMode&&(i="Ingestion endpoint could not be reached "+u._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(e.TAG,i,d.dumpObj(r))}else{i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(e.TAG,i,d.dumpObj(r))}u._onErrorHelper(r),"function"==typeof n&&(r&&n(d.dumpObj(r)),n("Error sending telemetry")),u._enableDiskRetryMode&&u._storeToDisk(t)})),h.write(c),h.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,n){var r=u.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",(function(e){return n(e)})),r.on("close",(function(e,t){return n(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!u.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=u.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var n=u.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";n.stdout.on("data",(function(e){return r+=e})),n.on("error",(function(e){return t(e,null)})),n.on("close",(function(n,i){return e.ACL_IDENTITY=r&&r.trim(),t(0===n?null:new Error("Getting ACL identity did not succeed (PS returned code "+n+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(u.spawnSync){var t=u.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,n){var r=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?n(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,n(i);r._runICACLS(r._getACLArguments(t,o),(function(r){return e.ACLED_DIRECTORIES[t]=!r,n(r)}))}))):n(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var n=this;o.lstat(e,(function(r,i){r&&"ENOENT"===r.code?o.mkdir(e,(function(r){r&&"EEXIST"!==r.code?t(r):n._applyACLRules(e,t)})):!r&&i.isDirectory()?n._applyACLRules(e,t):t(r||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){o.readdir(e,(function(n,r){if(n)return t(n,-1);var i=null,s=0,c=0;if(0!==r.length)for(var u=0;u<r.length;u++)o.stat(a.join(e,r[u]),(function(e,n){c++,e?i=e:n.isFile()&&(s+=n.size),c===r.length&&t(i,i?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),n=0,r=0;r<t.length;r++)n+=o.statSync(a.join(e,t[r])).size;return n},e.prototype._storeToDisk=function(t){var n=this;l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(r){if(r)return l.warn(e.TAG,"Error while checking/creating directory: "+(r&&r.message)),void n._onErrorHelper(r);n._getShallowDirectorySize(n._tempDir,(function(r,i){if(r||i<0)return l.warn(e.TAG,"Error while checking directory size: "+(r&&r.message)),void n._onErrorHelper(r);if(i>n._maxBytesOnDisk)l.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+i);else{var s=(new Date).getTime()+".ai.json",c=a.join(n._tempDir,s);l.info(e.TAG,"saving data to disk at: "+c),o.writeFile(c,n._stringify(t),{mode:384},(function(e){return n._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var n=this._getShallowDirectorySizeSync(this._tempDir);if(n>this._maxBytesOnDisk)return void l.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);var r=(new Date).getTime()+".ai.json",i=a.join(this._tempDir,r);l.info(e.TAG,"saving data before crash to disk at: "+i),o.writeFileSync(i,t,{mode:384})}catch(t){l.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;o.exists(this._tempDir,(function(t){t&&o.readdir(e._tempDir,(function(t,n){if(t)e._onErrorHelper(t);else if((n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var r=n[0],i=a.join(e._tempDir,r);o.readFile(i,(function(t,n){t?e._onErrorHelper(t):o.unlink(i,(function(t){if(t)e._onErrorHelper(t);else try{var r=JSON.parse(n.toString());e.send(r)}catch(e){l.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){l.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;o.exists(this._tempDir,(function(n){n&&o.readdir(t._tempDir,(function(n,r){n?t._onErrorHelper(n):(r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&r.forEach((function(n){var r=new Date(parseInt(n.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>r){var i=a.join(t._tempDir,n);o.unlink(i,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.exports=h}),qr=f((e,t)=>{"use strict";var n=Hn(),r=zt(),i=lr(),o=function(){function e(){}return e.createEnvelope=function(t,i,o,s,a){var c=null;switch(i){case n.TelemetryType.Trace:c=e.createTraceData(t);break;case n.TelemetryType.Dependency:c=e.createDependencyData(t);break;case n.TelemetryType.Event:c=e.createEventData(t);break;case n.TelemetryType.Exception:c=e.createExceptionData(t);break;case n.TelemetryType.Request:c=e.createRequestData(t);break;case n.TelemetryType.Metric:c=e.createMetricData(t);break;case n.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case n.TelemetryType.PageView:c=e.createPageViewData(t)}if(o&&n.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in o)c.baseData.properties[u]||(c.baseData.properties[u]=o[u]);else c.baseData.properties=o;c.baseData.properties=r.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",p=new n.Envelope;return p.data=c,p.iKey=l,p.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),p.tags=this.getTags(s,t.tagOverrides),p.time=(new Date).toISOString(),p.ver=1,p.sampleRate=a?a.samplingPercentage:100,i===n.TelemetryType.Metric&&(p.sampleRate=100),p},e.createTraceData=function(e){var t=new n.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Information:t.severityLevel=e.severity;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Trace),r.baseData=t,r},e.createDependencyData=function(e){var t=new n.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=r.w3cTraceId();var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Dependency),i.baseData=t,i},e.createEventData=function(e){var t=new n.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Event),r.baseData=t,r},e.createExceptionData=function(e){var t=new n.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var i=e.exception.stack,o=new n.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(i),o.hasFullStack=r.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new n.Data;return s.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new n.RequestData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=r.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Request),i.baseData=t,i},e.createMetricData=function(e){var t=new n.MetricData;t.metrics=[];var r=new n.DataPoint;r.count=isNaN(e.count)?1:e.count,r.kind=n.DataPointType.Aggregation,r.max=isNaN(e.max)?e.value:e.max,r.min=isNaN(e.min)?e.value:e.min,r.name=e.name,r.stdDev=isNaN(e.stdDev)?0:e.stdDev,r.value=e.value,t.metrics.push(r),t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Metric),i.baseData=t,i},e.createAvailabilityData=function(e){var t=new n.AvailabilityData;e.id?t.id=e.id:t.id=r.w3cTraceId(),t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Availability),i.baseData=t,i},e.createPageViewData=function(e){var t=new n.PageViewData;t.name=e.name,t.duration=r.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var i=new n.Data;return i.baseType=n.telemetryTypeToBaseType(n.TelemetryType.PageView),i.baseData=t,i},e.getTags=function(e,t){var n=i.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var o in e.tags)r[o]=e.tags[o];if(t)for(var o in t)r[o]=t[o];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var a=n[o];if(s.regex.test(a)){var c=new s(n[o],r++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var u=0,l=t.length-1,p=0,d=u,h=l;u<l;){if((p+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var f=h-d+1;t.splice(d,f);break}d=u,h=l,u++,l--}}return t},e}(),s=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=r.trim(t);var i=t.match(e.regex);i&&i.length>=5&&(this.method=r.trim(i[2])||this.method,this.fileName=r.trim(i[4])||"<no_filename>",this.line=parseInt(i[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=o}),Kr=f((e,t)=>{"use strict";var r=n(108),i=Lr(),o=Er(),s=Hn(),a=Vr(),c=Gr(),u=lr(),l=$r(),p=zt(),d=y(),h=qr(),f=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var n=new l(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),n)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,s.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!p.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=r.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var n=h.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(n,this.context);var r=this.runTelemetryProcessors(n,e.contextObjects);r=r&&c.samplingTelemetryProcessor(n,{correlationContext:u.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(n,this.context),r&&(c.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else d.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var n=!0,r=this._telemetryProcessors.length;if(0===r)return n;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<r;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){n=!1;break}}catch(t){n=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return n&&(e&&e.tags&&(e.tags=p.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=p.validateStringMap(e.data.baseData.properties))),n},e}();t.exports=f}),zr=f((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=Kr(),o=Rr(),s=Ar(),a=y(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?o.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?o.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(i);t.exports=c}),Yr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Xr=f(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,n,r=lr(),i=fr(),o=vr(),s=gr(),a=br(),c=xr(),u=Ar(),l=Rr(),p=Yt(),d=y(),h=jr(),f=Fr();e.TelemetryClient=zr(),e.Contracts=Hn(),e.azureFunctionsTypes=Yr(),(n=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[n.AI=0]="AI",n[n.AI_AND_W3C=1]="AI_AND_W3C";var v,g,m,_,b,E,S,w,T,P,I,C=!0,O=!1,A=!0,x=!0,R=!0,N=!1,k=!0,D=!0,j=!0,M=!0,L=!1,F=!0,V=void 0,U=void 0,B=!1;function H(){return e.defaultClient?(B=!0,m.enable(C,O),_.enable(A),b.enable(x),E.enable(R),S.enable(N,e.defaultClient.config),w.enable(F,g),T.useAutoCorrelation(M,v),T.enable(k),P.enable(D),e.liveMetricsClient&&L&&e.liveMetricsClient.enable(L)):d.warn("Start cannot be called before setup"),W}e.setup=function(t){return e.defaultClient?d.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),m=new i(e.defaultClient),_=new o(e.defaultClient),b=new s(e.defaultClient),E=new a(e.defaultClient),S=new c(e.defaultClient),T=new l(e.defaultClient),P=new u(e.defaultClient),w||(w=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(j,V,U),W},e.start=H,e.getCorrelationContext=function(){return M?r.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return r.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return r.CorrelationContextManager.wrapCallback(e,t)};var W=function(){function n(){}return n.setDistributedTracingMode=function(e){return p.w3cEnabled=e===t.AI_AND_W3C,n},n.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),C=e,O=t,B&&m.enable(e,t),n},n.setAutoCollectExceptions=function(e){return A=e,B&&_.enable(e),n},n.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),x=e;var r=f.AutoCollectNativePerformance.parseEnabled(t);return F=r.isEnabled,g=r.disabledMetrics,B&&(b.enable(e),w.enable(r.isEnabled,r.disabledMetrics)),n},n.setAutoCollectPreAggregatedMetrics=function(e){return R=e,B&&E.enable(e),n},n.setAutoCollectHeartbeat=function(t){return N=t,B&&S.enable(t,e.defaultClient.config),n},n.setAutoCollectRequests=function(e){return k=e,B&&T.enable(e),n},n.setAutoCollectDependencies=function(e){return D=e,B&&P.enable(e),n},n.setAutoDependencyCorrelation=function(e,t){return M=e,v=t,B&&T.useAutoCorrelation(e,t),n},n.setUseDiskRetryCaching=function(t,r,i){return j=t,V=r,U=i,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,r,i),n},n.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),d.enableDebug=e,d.disableWarnings=!t,n},n.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new h(e.defaultClient.config,null),I=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(I),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),L=t,n):(d.warn("Live metrics client cannot be setup without the default client"),n)},n.start=H,n}();e.Configuration=W,e.dispose=function(){p.w3cEnabled=!0,e.defaultClient=null,B=!1,m&&m.dispose(),_&&_.dispose(),b&&b.dispose(),E&&E.dispose(),S&&S.dispose(),w&&w.dispose(),T&&T.dispose(),P&&P.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),L=!1,e.liveMetricsClient=void 0)}});((e,t)=>{for(var n in h(e),t)i(e,n,{get:t[n],enumerable:!0})})(t,{default:()=>ii});var Qr,Jr,Zr=v(n(35)),ei=v(n(5)),ti=v(n(5)),ni=v(n(5));function ri(){return void 0!==ni.env.isTelemetryEnabled?ni.env.isTelemetryEnabled?Qr.ON:Qr.OFF:ni.workspace.getConfiguration("telemetry").get("enableTelemetry")?Qr.ON:Qr.OFF}(Jr=Qr||(Qr={})).ON="on",Jr.ERROR="error",Jr.OFF="off";var ii=class extends class{constructor(e,t,n,r,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=r,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),void 0!==ti.env.onDidChangeTelemetryEnabled?(this.disposables.push(ti.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(ti.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(ti.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=ri();this.userOptIn=e===Qr.ON,this.errorOptIn=e===Qr.ERROR||e===Qr.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(n=>{0===e.indexOf(n+"+")&&(t=n)}),t}get extension(){return void 0===this._extension&&(this._extension=ti.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return!1!==this.errorOptIn&&(!this.firstParty||("other"!==this.cleanRemoteName(ti.env.remoteName)||!(void 0===this.extension||this.extension.extensionKind===ti.ExtensionKind.Workspace||ti.env.uiKind===ti.UIKind.Web)))}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,ti&&ti.env){switch(e["common.vscodemachineid"]=ti.env.machineId,e["common.vscodesessionid"]=ti.env.sessionId,e["common.vscodeversion"]=ti.version,e["common.isnewappinstall"]=ti.env.isNewAppInstall?ti.env.isNewAppInstall.toString():"false",e["common.product"]=ti.env.appHost,ti.env.uiKind){case ti.UIKind.Web:e["common.uikind"]="web";break;case ti.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(ti.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(null==e)return"";let r=[];""!==ti.env.appRoot&&r.push(new RegExp(ti.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let t=[];for(let i of r)for(;(n=i.exec(e))&&n;)t.push([n.index,i.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(n=s.exec(e))&&n;)n[0]&&!o.test(n[0])&&t.every(([e,t])=>n.index<e||n.index>=t)&&(i+=e.substring(a,n.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(i+=e.substr(a))}for(let e of r)i=i.replace(e,"");return i}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t=Object.create(null);for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(r.toLowerCase())?t[n]="<REDACTED: secret>":i.test(r)?t[n]="<REDACTED: email>":t[n]=r}return t}sendTelemetryEvent(e,t,n){if(this.userOptIn&&""!==e){t=d(d({},t),this.getCommonProperties());let r=this.cloneAndChange(t,(e,t)=>this.anonymizeFilePaths(t,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(r),measurements:n})}}sendTelemetryErrorEvent(e,t,n,r){if(this.errorOptIn&&""!==e){t=d(d({},t),this.getCommonProperties());let i=this.cloneAndChange(t,(e,t)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(t,this.firstParty):void 0===r||-1!==r.indexOf(e)?"REDACTED":this.anonymizeFilePaths(t,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:n})}}sendTelemetryException(e,t,n){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=d(d({},t),this.getCommonProperties());let r=this.cloneAndChange(t,(e,t)=>this.anonymizeFilePaths(t,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(r),measurements:n})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}}{constructor(e,t,n,r){let i=new class{constructor(e){this._key=e,this._isInstantiated=!1,ri()!==Qr.OFF&&this.instantiateAppender()}logEvent(e,t){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}logException(e,t){!this._appInsightsClient||this._appInsightsClient.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}instantiateAppender(){this._isInstantiated||Promise.resolve().then(()=>v(Xr())).then(e=>{e.defaultClient?(this._appInsightsClient=new e.TelemetryClient(this._key),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(e.setup(this._key).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=e.defaultClient),ei&&ei.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=ei.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=ei.env.sessionId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRole]=ei.env.appName,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRoleInstance]=ei.env.appName),this._key&&0===this._key.indexOf("AIF-")&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1"),this._isInstantiated=!0})}}(n);n&&0===n.indexOf("AIF-")&&(r=!0),super(e,t,i,{release:Zr.release(),platform:Zr.platform()},r)}}},function(e,t){e.exports=require("module")},function(e,t){e.exports=require("timers")},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceOptions=t.LogLevel=void 0,function(e){e[e.Off=0]="Off",e[e.Error=10]="Error",e[e.Warn=20]="Warn",e[e.Info=30]="Info",e[e.Debug=40]="Debug"}(t.LogLevel||(t.LogLevel={})),function(e){e[e.None=0]="None",e[e.Arguments=1]="Arguments",e[e.ReturnValue=2]="ReturnValue"}(t.TraceOptions||(t.TraceOptions={}))},function(e,t,n){
/*!
 * Tmp
 *
 * Copyright (c) 2011-2015 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
var r=n(16),i=n(0),o=n(119),s=n(299),a=n(153),c=s(),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,p=a.O_CREAT|a.O_EXCL|a.O_RDWR,d=[],h=!1,f=!1;function v(e){var t=[],n=null;try{n=o.randomBytes(e)}catch(t){n=o.pseudoRandomBytes(e)}for(var r=0;r<e;r++)t.push(u[n[r]%u.length]);return t.join("")}function y(e,t){if("function"==typeof e){var n=e;e=t||{},t=n}else void 0===e&&(e={});return[e,t]}function g(e){if(e.name)return i.join(e.dir||c,e.name);if(e.template)return e.template.replace(l,v(6));var t=[e.prefix||"tmp-",process.pid,v(12),e.postfix||""].join("");return i.join(e.dir||c,t)}function m(e,t){var n=y(e,t),i=n[0],o=n[1],s=i.tries||3;return isNaN(s)||s<0?o(new Error("Invalid tries")):i.template&&!i.template.match(l)?o(new Error("Invalid template provided")):void function e(){var t=g(i);r.stat(t,(function(n){if(!n)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}()}function _(e){var t=y(e)[0],n=t.tries||3;if(isNaN(n)||n<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(l))throw new Error("Invalid template provided");do{var i=g(t);try{r.statSync(i)}catch(e){return i}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function b(e){var t=[e];do{for(var n=t.pop(),o=!1,s=r.readdirSync(n),a=0,c=s.length;a<c;a++){var u=i.join(n,s[a]);r.lstatSync(u).isDirectory()?(o||(o=!0,t.push(n)),t.push(u)):r.unlinkSync(u)}o||r.rmdirSync(n)}while(0!==t.length)}function E(e,t,n){var i=w((function(e){try{r.closeSync(e[0])}catch(e){if(e.errno!=-a.EBADF&&e.errno!=-a.ENOENT)throw e}r.unlinkSync(e[1])}),[t,e]);return n.keep||d.unshift(i),i}function S(e,t){var n=w(t.unsafeCleanup?b:r.rmdirSync.bind(r),e);return t.keep||d.unshift(n),n}function w(e,t){var n=!1;return function r(){if(!n){var i=d.indexOf(r);i>=0&&d.splice(i,1),n=!0,e(t)}}}function T(){if(!f||h)for(var e=0,t=d.length;e<t;e++)try{d[e].call(null)}catch(e){}}var P=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===P[0]&&(P[1]<9||9===P[1]&&P[2]<5)&&process.addListener("uncaughtException",(function(e){throw f=!0,T(),e})),process.addListener("exit",(function(e){e&&(f=!0),T()})),e.exports.tmpdir=c,e.exports.dir=function(e,t){var n=y(e,t),i=n[0],o=n[1];m(i,(function(e,t){if(e)return o(e);r.mkdir(t,i.mode||448,(function(e){if(e)return o(e);o(null,t,S(t,i))}))}))},e.exports.dirSync=function(e){var t=y(e)[0],n=_(t);return r.mkdirSync(n,t.mode||448),{name:n,removeCallback:S(n,t)}},e.exports.file=function(e,t){var n=y(e,t),i=n[0],o=n[1];i.postfix=void 0===i.postfix?".tmp":i.postfix,m(i,(function(e,t){if(e)return o(e);r.open(t,p,i.mode||384,(function(e,n){if(e)return o(e);o(null,t,n,E(t,n,i))}))}))},e.exports.fileSync=function(e){var t=y(e)[0];t.postfix=t.postfix||".tmp";var n=_(t),i=r.openSync(n,p,t.mode||384);return{name:n,fd:i,removeCallback:E(n,i,t)}},e.exports.tmpName=m,e.exports.tmpNameSync=_,e.exports.setGracefulCleanup=function(){h=!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cancellation=t.wrapCancellationTokens=t.createPromiseFromCancellation=t.CancellationError=void 0;const r=n(5),i=n(11),o=n(52);class s extends Error{constructor(){super(o.Common.canceled())}}t.CancellationError=s,t.createPromiseFromCancellation=function(e){return new Promise((t,n)=>{if(!e.token)return;e.token.onCancellationRequested(()=>{if(e.token.isCancellationRequested){if("resolve"===e.cancelAction)return t(e.defaultValue);if("reject"===e.cancelAction)return n(new s)}})})},t.wrapCancellationTokens=function(...e){const t=new r.CancellationTokenSource;for(const n of e)if(n){if(n.isCancellationRequested)return n;n.onCancellationRequested(()=>t.cancel())}return t.token},function(e){function t(e){return!!e&&e.isCancellationRequested}e.race=function(e,t){if(t){const n=i.createDeferred();return t.onCancellationRequested(()=>{n.completed||n.reject(new s)}),t.isCancellationRequested?n.reject(new s):e(t).then(e=>{n.completed||n.resolve(e)}).catch(e=>{n.completed||n.reject(e)}),n.promise}return e()},e.isCanceled=t,e.throwIfCanceled=function(e){if(t(e))throw new s}}(t.Cancellation||(t.Cancellation={}))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrioritizedEnvKinds=t.getKindDisplayName=void 0;const r=n(23);t.getKindDisplayName=function(e){for(const[t,n]of[[r.PythonEnvKind.System,"system"],[r.PythonEnvKind.MacDefault,"mac default"],[r.PythonEnvKind.WindowsStore,"windows store"],[r.PythonEnvKind.Pyenv,"pyenv"],[r.PythonEnvKind.CondaBase,"conda"],[r.PythonEnvKind.Poetry,"poetry"],[r.PythonEnvKind.Custom,"custom"],[r.PythonEnvKind.Venv,"venv"],[r.PythonEnvKind.VirtualEnv,"virtualenv"],[r.PythonEnvKind.VirtualEnvWrapper,"virtualenv"],[r.PythonEnvKind.Pipenv,"pipenv"],[r.PythonEnvKind.Conda,"conda"]])if(e===t)return n;return""},t.getPrioritizedEnvKinds=function(){return[r.PythonEnvKind.Pyenv,r.PythonEnvKind.CondaBase,r.PythonEnvKind.Conda,r.PythonEnvKind.WindowsStore,r.PythonEnvKind.Pipenv,r.PythonEnvKind.Poetry,r.PythonEnvKind.Venv,r.PythonEnvKind.VirtualEnvWrapper,r.PythonEnvKind.VirtualEnv,r.PythonEnvKind.OtherVirtual,r.PythonEnvKind.OtherGlobal,r.PythonEnvKind.MacDefault,r.PythonEnvKind.System,r.PythonEnvKind.Custom,r.PythonEnvKind.Unknown]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSemVerSafe=t.areSimilarVersions=t.areIdenticalVersion=t.parseVersionInfo=t.validateVersionInfo=t.normalizeVersionInfo=t.compareVersions=t.isVersionInfoEmpty=t.parseBasicVersionInfo=t.getVersionString=t.EMPTY_VERSION=void 0;const r=n(65),i=n(313);function o(e){if("number"==typeof e)return Number.isNaN(e)?[-1,"missing"]:e<0?[-1,""]:[e,""];if("string"==typeof e){const t=parseInt(e,10);return Number.isNaN(t)?[-1,"string not numeric"]:t<0?[-1,""]:[t,""]}return null==e?[-1,"missing"]:[-1,"unsupported type"]}function s(e,t,n){if(!(0===t||t>0)&&n&&""!==n)throw Error(`invalid ${e} version (failed to normalize; ${n})`)}t.EMPTY_VERSION={major:-1,minor:-1,micro:-1,unnormalized:{major:void 0,minor:void 0,micro:void 0}},Object.freeze(t.EMPTY_VERSION),t.getVersionString=function(e){return e.major<0?"":e.minor<0?""+e.major:e.micro<0?`${e.major}.${e.minor}`:`${e.major}.${e.minor}.${e.micro}`};const a=i.verboseRegExp("\n    ^\n    (.*?)  # <before>\n    (\\d+)  # <major>\n    (?:\n        [.]\n        (\\d+)  # <minor>\n        (?:\n            [.]\n            (\\d+)  # <micro>\n        )?\n    )?\n    ([^\\d].*)?  # <after>\n    $\n","s");function c(e){const t=e.match(a);if(!t)return;const[,n,r,i,o,s]=t;if(n&&n.endsWith("."))return;if(s&&""!==s){if("."===s)return;if(!(n&&""!==n||o&&""!==o))return}return{version:{major:parseInt(r,10),minor:i?parseInt(i,10):-1,micro:o?parseInt(o,10):-1},before:n||"",after:s||""}}function u(e,t,n){return e.major<t.major?[1,"major"]:e.major>t.major?[-1,"major"]:-1===e.major?[0,""]:e.minor<t.minor?[1,"minor"]:e.minor>t.minor?[-1,"minor"]:-1===e.minor?[0,""]:e.micro<t.micro?[1,"micro"]:e.micro>t.micro?[-1,"micro"]:void 0!==n?n(e,t):[0,""]}t.parseBasicVersionInfo=c,t.isVersionInfoEmpty=function(e){return!!e&&("number"==typeof e.major&&"number"==typeof e.minor&&"number"==typeof e.micro&&(e.major<0&&e.minor<0&&e.micro<0))},t.compareVersions=u,t.normalizeVersionInfo=function(e){const n=function(e){if(!e)return t.EMPTY_VERSION;const n=function(e){const t={major:e.major,minor:e.minor,micro:e.micro},{unnormalized:n}=e;return void 0!==n&&(t.unnormalized={major:n.major,minor:n.minor,micro:n.micro}),t}(e);return void 0===n.unnormalized&&(n.unnormalized={},[n.major,n.unnormalized.major]=o(n.major),[n.minor,n.unnormalized.minor]=o(n.minor),[n.micro,n.unnormalized.micro]=o(n.micro)),n}(e);return n.raw=e.raw,n.raw||(n.raw=""),n},t.validateVersionInfo=function(e){!function(e){var t,n,r;const i=e;if(s("major",e.major,null===(t=i.unnormalized)||void 0===t?void 0:t.major),s("minor",e.minor,null===(n=i.unnormalized)||void 0===n?void 0:n.minor),s("micro",e.micro,null===(r=i.unnormalized)||void 0===r?void 0:r.micro),e.major<0)throw Error("missing major version");if(e.minor<0&&(0===e.micro||e.micro>0))throw Error("missing minor version")}(e)},t.parseVersionInfo=function(e){const t=c(e);if(void 0!==t)return t.version.raw=e,t},t.areIdenticalVersion=function(e,t,n){const[r]=u(e,t,n);return 0===r},t.areSimilarVersions=function(e,t,n){const[r,i]=u(e,t,n);return 0===r||"major"!==i&&(r<0?-1===t[i]:-1===e[i])},t.parseSemVerSafe=function(e){e=e.replace(/\.00*(?=[1-9]|0\.)/,".");const t=r.coerce(e);return null!==t&&r.valid(t)?t:new r.SemVer("0.0.0")}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(317),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){var r=n(203).Symbol;e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentActivationService=void 0,t.IEnvironmentActivationService=Symbol("IEnvironmentActivationService")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvTypeHeuristic=t.EnvironmentTypeComparer=t.EnvTypeHeuristic=void 0;const o=n(1),s=n(163),a=n(19),c=n(26),u=n(12);var l;!function(e){e[e.Local=1]="Local",e[e.Global=2]="Global",e[e.GlobalInterpreters=3]="GlobalInterpreters"}(l=t.EnvTypeHeuristic||(t.EnvTypeHeuristic={}));let p=class{constructor(e){var t,n;this.interpreterHelper=e,this.workspaceFolderPath=null!==(n=null===(t=this.interpreterHelper.getActiveWorkspaceUri(void 0))||void 0===t?void 0:t.folderUri.fsPath)&&void 0!==n?n:""}compare(e,t){const n=function(e,t,n){const r=f(e,n),i=f(t,n);return Math.sign(r-i)}(e,t,this.workspaceFolderPath);if(0!==n)return n;const r=function(e,t){if(!e)return 1;if(!t)return-1;if(e.raw===t.raw)return 0;if(e.major===t.major)return e.minor===t.minor?e.patch===t.patch?e.build.join(" ")>t.build.join(" ")?-1:1:e.patch>t.patch?-1:1:e.minor>t.minor?-1:1;return e.major>t.major?-1:1}(e.version,t.version);if(0!==r)return r;if(h(e)&&!h(t))return 1;if(!h(e)&&h(t))return-1;if(h(i=e)&&("base"===i.envName||"miniconda"===i.envName))return 1;var i;const o=d(e,this.interpreterHelper),s=d(t,this.interpreterHelper);return o===s?0:o>s?1:-1}};function d(e,t){const n=[],r=[];if(e.version&&n.push(e.version.raw),e.architecture&&n.push(s.getArchitectureDisplayName(e.architecture)),e.companyDisplayName&&e.companyDisplayName.length>0?n.push(e.companyDisplayName.trim()):n.push("Python"),e.envType){const n=t.getInterpreterTypeDisplayName(e.envType);n&&r.push(n)}e.envName&&e.envName.length>0&&r.push(e.envName);const i=0===r.length?"":`(${r.join(": ")})`;return`${n.join(" ")} ${i}`.trim()}function h(e){return e.envType===c.EnvironmentType.Conda}function f(e,t){const{envType:n}=e;if(t.length>0&&(e.envPath&&a.isParentPath(e.envPath,t)||e.path&&a.isParentPath(e.path,t)))return l.Local;switch(n){case c.EnvironmentType.Venv:case c.EnvironmentType.Conda:case c.EnvironmentType.VirtualEnv:case c.EnvironmentType.VirtualEnvWrapper:case c.EnvironmentType.Pipenv:case c.EnvironmentType.Poetry:return l.Global;default:return l.GlobalInterpreters}}p=r([o.injectable(),i(0,o.inject(u.IInterpreterHelper))],p),t.EnvironmentTypeComparer=p,t.getEnvTypeHeuristic=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activate=t.initialize=void 0;const r=n(5),i=n(208),o=n(9),s=n(359),a=n(360),c=n(365),u=n(368),l=n(19),p=n(391),d=n(392),h=n(393),f=n(394),v=n(395),y=n(396),g=n(397),m=n(398),_=n(218),b=n(401),E=n(403),S=n(404),w=n(405),T=n(406);function P(e){const{initRoot:t,addRoot:n,removeRoot:i}=e,o=r.workspace.workspaceFolders;return o&&o.map(e=>e.uri).forEach(t),r.workspace.onDidChangeWorkspaceFolders(e=>{for(const t of e.removed)i(t.uri);for(const t of e.added)n(t.uri)})}t.initialize=async function(e){const t=await S.createPythonEnvironments(()=>async function(e){let t=new p.ExtensionLocators(function(e){const t=[];t.push(new y.PyenvLocator,new h.CondaEnvironmentLocator,new f.GlobalVirtualEnvironmentLocator,new d.CustomVirtualEnvironmentLocator),o.getOSType()===o.OSType.Windows?t.push(new g.WindowsRegistryLocator,new m.WindowsStoreLocator,new c.WindowsPathEnvVarLocator):t.push(new v.PosixKnownPathsLocator);const n=t.filter(e=>void 0!==e.dispose);return e.disposables.push(...n),t}(e),function(e){const t=new p.WorkspaceLocators(P,[e=>[new u.WorkspaceVirtualEnvironmentLocator(e.fsPath),new E.PoetryLocator(e.fsPath)]]);return e.disposables.push(t),t}(e));const n=_.getEnvironmentInfoService(e.disposables);t=new s.PythonEnvsReducer(t);const r=new a.PythonEnvsResolver(t,n);return new T.EnvsCollectionService(await async function(e){const t=i.getGlobalStorage(e.context,"PYTHON_ENV_INFO_CACHE");return await w.createCollectionCache({load:async()=>t.get(),store:async e=>t.set(e)})}(e),r)}(e));return l.initializeExternalDependencies(e.legacyIOC.serviceContainer),b.registerNewDiscoveryForIOC(e.legacyIOC.serviceManager,t),t},t.activate=async function(e,t){return e.triggerRefresh().ignoreErrors(),{fullyReady:Promise.resolve()}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalStorage=t.PersistentStateFactory=t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED=t.GLOBAL_PERSISTENT_KEYS_DEPRECATED=t.PersistentState=void 0;const o=n(1),s=n(4),a=n(7),c=n(17),u=n(6),l=n(86);class p{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e){try{this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e)}catch(e){s.traceError("Error while updating storage for key:",this.key,e)}}}t.PersistentState=p,t.GLOBAL_PERSISTENT_KEYS_DEPRECATED="PYTHON_EXTENSION_GLOBAL_STORAGE_KEYS",t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED="PYTHON_EXTENSION_WORKSPACE_STORAGE_KEYS";let d=class{constructor(e,t,n){this.globalState=e,this.workspaceState=t,this.cmdManager=n,this._globalKeysStorage=new p(this.globalState,"PYTHON_GLOBAL_STORAGE_KEYS",[]),this._workspaceKeysStorage=new p(this.workspaceState,"PYTHON_WORKSPACE_STORAGE_KEYS",[]),this.cleanedOnce=!1}async activate(){this.cmdManager.registerCommand(c.Commands.ClearStorage,this.cleanAllPersistentStates.bind(this));const e=this.createGlobalPersistentState(t.GLOBAL_PERSISTENT_KEYS_DEPRECATED,[]),n=this.createWorkspacePersistentState(t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED,[]);e.value.length>0&&e.updateValue([]).ignoreErrors(),n.value.length>0&&n.updateValue([]).ignoreErrors()}createGlobalPersistentState(e,t,n){return this.addKeyToStorage("global",e,t).ignoreErrors(),new p(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return this.addKeyToStorage("workspace",e,t).ignoreErrors(),new p(this.workspaceState,e,t,n)}async addKeyToStorage(e,t,n){const r="global"===e?this._globalKeysStorage:this._workspaceKeysStorage;r.value.find(e=>e.key===t)||await r.updateValue([{key:t,defaultValue:n},...r.value])}async cleanAllPersistentStates(){this.cleanedOnce?s.traceError("Storage can only be cleaned once per session, reload window."):(await Promise.all(this._globalKeysStorage.value.map(async e=>{const t=this.createGlobalPersistentState(e.key);await t.updateValue(e.defaultValue)})),await Promise.all(this._workspaceKeysStorage.value.map(async e=>{const t=this.createWorkspacePersistentState(e.key);await t.updateValue(e.defaultValue)})),await this._globalKeysStorage.updateValue([]),await this._workspaceKeysStorage.updateValue([]),this.cleanedOnce=!0,s.traceVerbose("Finished clearing storage."))}};r([l.cache(-1,!0)],d.prototype,"addKeyToStorage",null),d=r([o.injectable(),i(0,o.inject(u.IMemento)),i(0,o.named(u.GLOBAL_MEMENTO)),i(1,o.inject(u.IMemento)),i(1,o.named(u.WORKSPACE_MEMENTO)),i(2,o.inject(a.ICommandManager))],d),t.PersistentStateFactory=d,t.getGlobalStorage=function(e,t,n){const r=new p(e.globalState,"PYTHON_GLOBAL_STORAGE_KEYS",[]);if(!r.value.find(e=>e.key===t&&e.defaultValue===n)){const e=[{key:t,defaultValue:n},...r.value];r.updateValue(e).ignoreErrors()}const i=new p(e.globalState,t,n);return{get:()=>i.value,set:e=>i.updateValue(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locators=t.combineIterators=void 0;const r=n(11),i=n(74),o=n(366);function s(e){const t=r.chain(e),n=e.map(e=>e.onUpdated).filter(e=>e);return n&&0!==n.length?(t.onUpdated=e=>{const t=new i.Disposables;let r=n.length;return n.forEach(n=>{const i=n(t=>{null===t?(r-=1,0===r&&e(null)):e(t)});t.push(i)}),t},t):t}t.combineIterators=s;class a extends o.PythonEnvsWatchers{constructor(e){super(e),this.locators=e}iterEnvs(e){return s(this.locators.map(t=>t.iterEnvs(e)))}}t.Locators=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvs=t.getQueryFilter=void 0;const r=n(11),i=n(31),o=n(4);t.getQueryFilter=function(e){var t;const n=void 0!==e.kinds&&e.kinds.length>0?e.kinds:void 0,r=!(null===(t=e.searchLocations)||void 0===t?void 0:t.doNotIncludeNonRooted),o=function(e){if(void 0===e.searchLocations)return;if(0===e.searchLocations.roots.length)return[];return e.searchLocations.roots.map(e=>i.getURIFilter(e,{checkParent:!0}))}(e);return e=>!!function(e){return void 0===n||n.includes(e.kind)}(e)&&!!function(e){if(void 0===e.searchLocation)return r;const t=e.searchLocation;return void 0===o||o.some(e=>e(t))}(e)},t.getEnvs=async function(e){const t=[],n=r.createDeferred();if(void 0===e.onUpdated)n.resolve();else{const r=e.onUpdated(e=>{if(null===e)n.resolve(),r.dispose();else{const{index:n,update:r}=e;if(void 0===t[n]){const e=JSON.stringify(r);o.traceVerbose("Updates sent for an env which was classified as invalid earlier, currently not expected, "+e)}t[n]=r}})}let i=0;for await(const n of e)void 0===t[i]&&(t[i]=n),i+=1;return await n.promise,t.filter(e=>void 0!==e).map(e=>e)}},function(e,t,n){"use strict";e.exports=n(371)},function(e,t){
/*!
 * normalize-path <https://github.com/jonschlinkert/normalize-path>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */
e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("expected path to be a string");if("\\"===e||"/"===e)return"/";var n=e.length;if(n<=1)return e;var r="";if(n>4&&"\\"===e[3]){var i=e[2];"?"!==i&&"."!==i||"\\\\"!==e.slice(0,2)||(e=e.slice(2),r="//")}var o=e.split(/[/\\]+/);return!1!==t&&""===o[o.length-1]&&o.pop(),r+o.join("/")}},function(e,t,n){
/*!
 * is-glob <https://github.com/jonschlinkert/is-glob>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var r=n(376),i={"{":"}","(":")","[":"]"},o=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,s=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;e.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(r(e))return!0;var n,a=o;for(t&&!1===t.strict&&(a=s);n=a.exec(e);){if(n[2])return!0;var c=n.index+n[0].length,u=n[1],l=u?i[u]:null;if(u&&l){var p=e.indexOf(l,c);-1!==p&&(c=p+1)}e=e.slice(c)}return!1}},function(e,t,n){"use strict";
/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const r=n(24),i=n(379),o=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),s=e=>"number"==typeof e||"string"==typeof e&&""!==e,a=e=>Number.isInteger(+e),c=e=>{let t=""+e,n=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++n];);return n>0},u=(e,t,n)=>{if(t>0){let n="-"===e[0]?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return!1===n?String(e):e},l=(e,t)=>{let n="-"===e[0]?"-":"";for(n&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return n?"-"+e:e},p=(e,t,n,r)=>{if(n)return i(e,t,{wrap:!1,...r});let o=String.fromCharCode(e);return e===t?o:`[${o}-${String.fromCharCode(t)}]`},d=(e,t,n)=>{if(Array.isArray(e)){let t=!0===n.wrap,r=n.capture?"":"?:";return t?`(${r}${e.join("|")})`:e.join("|")}return i(e,t,n)},h=(...e)=>new RangeError("Invalid range arguments: "+r.inspect(...e)),f=(e,t,n)=>{if(!0===n.strictRanges)throw h([e,t]);return[]},v=(e,t,n=1,r={})=>{let i=Number(e),o=Number(t);if(!Number.isInteger(i)||!Number.isInteger(o)){if(!0===r.strictRanges)throw h([e,t]);return[]}0===i&&(i=0),0===o&&(o=0);let s=i>o,a=String(e),f=String(t),v=String(n);n=Math.max(Math.abs(n),1);let y=c(a)||c(f)||c(v),g=y?Math.max(a.length,f.length,v.length):0,m=!1===y&&!1===((e,t,n)=>"string"==typeof e||"string"==typeof t||!0===n.stringify)(e,t,r),_=r.transform||(e=>t=>!0===e?Number(t):String(t))(m);if(r.toRegex&&1===n)return p(l(e,g),l(t,g),!0,r);let b={negatives:[],positives:[]},E=[],S=0;for(;s?i>=o:i<=o;)!0===r.toRegex&&n>1?b[(w=i)<0?"negatives":"positives"].push(Math.abs(w)):E.push(u(_(i,S),g,m)),i=s?i-n:i+n,S++;var w;return!0===r.toRegex?n>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let n,r=t.capture?"":"?:",i="",o="";return e.positives.length&&(i=e.positives.join("|")),e.negatives.length&&(o=`-(${r}${e.negatives.join("|")})`),n=i&&o?`${i}|${o}`:i||o,t.wrap?`(${r}${n})`:n})(b,r):d(E,null,{wrap:!1,...r}):E},y=(e,t,n,r={})=>{if(null==t&&s(e))return[e];if(!s(e)||!s(t))return f(e,t,r);if("function"==typeof n)return y(e,t,1,{transform:n});if(o(n))return y(e,t,0,n);let i={...r};return!0===i.capture&&(i.wrap=!0),n=n||i.step||1,a(n)?a(e)&&a(t)?v(e,t,n,i):((e,t,n=1,r={})=>{if(!a(e)&&e.length>1||!a(t)&&t.length>1)return f(e,t,r);let i=r.transform||(e=>String.fromCharCode(e)),o=(""+e).charCodeAt(0),s=(""+t).charCodeAt(0),c=o>s,u=Math.min(o,s),l=Math.max(o,s);if(r.toRegex&&1===n)return p(u,l,!1,r);let h=[],v=0;for(;c?o>=s:o<=s;)h.push(i(o,v)),o=c?o-n:o+n,v++;return!0===r.toRegex?d(h,null,{wrap:!1,options:r}):h})(e,t,Math.max(Math.abs(n),1),i):null==n||o(n)?y(e,t,1,n):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(n,i)};e.exports=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePythonExeGlobs=t.PythonEnvStructure=t.watchLocationForPythonBinaries=void 0;const r=n(106),i=n(0),o=n(168),s=n(9),a=n(4),[c,u]=s.getOSType()===s.OSType.Windows?["python.exe","Scripts"]:["python","bin"];var l;t.watchLocationForPythonBinaries=function(e,t,n=c){const u=i.posix.normalize(n),[l]=u.split("/").slice(-1);return o.watchLocationForPattern(e,u,(function(e,n){a.traceVerbose("Received event",e,JSON.stringify(n),"for baseglob",l),r(i.basename(n),l,{nocase:s.getOSType()===s.OSType.Windows})&&t(e,n)}))},function(e){e.Standard="standard",e.Flat="flat"}(l=t.PythonEnvStructure||(t.PythonEnvStructure={})),t.resolvePythonExeGlobs=function(e=c,t=l.Standard){if(i.posix.normalize(e).includes("/"))throw Error(`invalid basename glob "${e}"`);const n=[];return t===l.Standard?n.push(e,"*/"+e,`*/${u}/${e}`):t===l.Flat&&n.push(e),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyResourceBasedLocator=void 0;const r=n(11),i=n(74),o=n(141);class s extends o.Locator{constructor(){super(...arguments),this.disposables=new i.Disposables}async dispose(){await this.disposables.dispose()}async*iterEnvs(e){await this.ensureResourcesReady(),yield*this.doIterEnvs(e),this.ensureWatchersReady().ignoreErrors()}async initResources(){}async initWatchers(){}async ensureResourcesReady(){void 0===this.resourcesReady?(this.resourcesReady=r.createDeferred(),await this.initResources(),this.resourcesReady.resolve()):await this.resourcesReady.promise}async ensureWatchersReady(){void 0===this.watchersReady?(this.watchersReady=r.createDeferred(),await this.initWatchers(),this.watchersReady.resolve()):await this.watchersReady.promise}}t.LazyResourceBasedLocator=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMacDefaultPythonPath=void 0;const r=n(9);t.isMacDefaultPythonPath=function(e){return r.getOSType()===r.OSType.OSX&&(["python","/usr/bin/python"].includes(e)||e.startsWith("/usr/bin/python2"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentInfoService=t.EnvironmentInfoServiceQueuePriority=void 0;const r=n(11),i=n(399),o=n(400),s=n(72),a=n(4);var c;async function u(e){const t=await o.getInterpreterInfo(s.buildPythonExecInfo(e)).catch(e=>{a.traceVerbose(e)});if(void 0!==t&&void 0!==t.version)return t}!function(e){e[e.Default=0]="Default",e[e.High=1]="High"}(c=t.EnvironmentInfoServiceQueuePriority||(t.EnvironmentInfoServiceQueuePriority={}));class l{constructor(){this.cache=new Map}dispose(){void 0!==this.workerPool&&(this.workerPool.stop(),this.workerPool=void 0)}async getEnvironmentInfo(e,t){const n=this.cache.get(e);if(void 0!==n)return n.promise;void 0===this.workerPool&&(this.workerPool=i.createRunningWorkerPool(u));const o=r.createDeferred();return this.cache.set(e,o),(t===c.High?this.workerPool.addToQueue(e,i.QueuePosition.Front):this.workerPool.addToQueue(e,i.QueuePosition.Back)).then(t=>(o.resolve(t),void 0===t&&this.cache.delete(e),t))}isInfoProvided(e){const t=this.cache.get(e);return!(!t||!t.completed)}}let p;t.getEnvironmentInfoService=function(e){if(void 0===p){const t=new l;null==e||e.push({dispose:()=>{t.dispose(),p=void 0}}),p=t}return p}},function(e){e.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENCODING=void 0,t.DEFAULT_ENCODING="utf8"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessService=void 0;const r=n(78),i=n(433);class o extends r.EventEmitter{constructor(e,t){super(),this.decoder=e,this.env=t,this.processesToKill=new Set}static isAlive(e){try{return process.kill(e,0),!0}catch(e){return!1}}static kill(e){i.killPid(e)}dispose(){this.removeAllListeners(),this.processesToKill.forEach(e=>{try{e.dispose()}catch(e){}})}execObservable(e,t,n={}){const r=i.execObservable(e,t,n,this.decoder,this.env,this.processesToKill);return this.emit("exec",e,t,n),r}exec(e,t,n={}){const r=i.plainExec(e,t,n,this.decoder,this.env,this.processesToKill);return this.emit("exec",e,t,n),r}shellExec(e,t={}){return this.emit("exec",e,void 0,t),i.shellExec(e,t,this.env,this.processesToKill)}}t.ProcessService=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedError=t.ErrorUtils=void 0;const r=n(35);t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf("No module named "+e)>0||t.indexOf(`No module named '${e}'`)>0))}};class i extends Error{constructor(e,t){super(e),this.stack=`${new Error("").stack}${r.EOL}${r.EOL}${t.stack}`}}t.WrappedError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_WINDOWS=void 0,t.IS_WINDOWS=/^win/.test(process.platform)},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VenvBaseActivationCommandProvider=void 0;const o=n(1),s=n(0),a=n(18),c=n(13),u=n(6);let l=class{constructor(e){this.serviceContainer=e}getActivationCommands(e,t){const n=this.serviceContainer.get(u.IConfigurationService).getSettings(e).pythonPath;return this.getActivationCommandsForInterpreter(n,t)}};l=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],l);t.VenvBaseActivationCommandProvider=class extends l{isShellSupported(e){return void 0!==this.scripts[e]}async findScriptFile(e,t){const n=this.serviceContainer.get(c.IFileSystem),r=this.scripts[t];if(!r)return;return function(e,t,n,r){const i="string"==typeof e?[e]:e;return async e=>{const o=t(e);for(const e of i){const t=n(o,e);if(await r(t))return t}}}(r,s.dirname,s.join,e=>n.fileExists(e))(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0,void 0===Reflect.metadata&&n(228);n(229).initialize(n(5));const r={},i=new(n(64).StopWatch),o=n(4),s=[];o.initializeFileLogging(s);const a=n(5),c=n(7),u=n(6),l=n(11),p=n(52),d=n(302),h=n(408),f=n(495),v=n(496),y=n(12);let g;r.codeLoadingTime=i.elapsedTime,t.activate=async function(e){let t,n;try{[t,n]=await async function(e,t,n){e.subscriptions.push(...s);const r=l.createDeferred();(function(e){const t={location:a.ProgressLocation.Window,title:p.Common.loadingExtension()};a.window.withProgress(t,()=>e)})(r.promise),n.startActivateTime=t.elapsedTime;const i=h.initializeGlobals(e);g=i.legacyIOC.serviceContainer,h.initializeStandard(i);const u=await h.initializeComponents(i),f=(await d.activateComponents(i,u)).map(e=>e.fullyReady),m=(async()=>{await Promise.all(f)})();return n.totalActivateTime=t.elapsedTime-n.startActivateTime,r.resolve(),setTimeout(async()=>{var e;if(g){const t=g.get(y.IInterpreterService),n=null!==(e=g.get(c.IWorkspaceService).workspaceFolders)&&void 0!==e?e:[];await t.refresh(n.length>0?n[0].uri:void 0).catch(e=>o.traceError("Python Extension: interpreterManager.refresh",e))}v.runAfterActivation()}),[m,i.legacyIOC.serviceContainer]}(e,i,r)}catch(e){throw await async function(e,t){(function(e){try{let t=a.window;g&&(t=g.get(c.IApplicationShell)),t.showErrorMessage(e).ignoreErrors()}catch(e){o.traceError("failed to notify user",e)}})("Extension activation failed, run the 'Developer: Toggle Developer Tools' command for more information."),o.traceError("extension activation failed",e),await f.sendErrorTelemetry(e,t,g)}(e,r),e}f.sendStartupTelemetry(t,r,i,n).ignoreErrors()},t.deactivate=function(){if(g){const e=g.get(u.IAsyncDisposableRegistry);if(e)return e.dispose()}return Promise.resolve()}},function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=e:r=i(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,h=new(l||"function"!=typeof WeakMap?function(){var e=c.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+s()}while(c.has(e,t));return e[t]=!0,t}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function f(e,t,n){var r=h.get(e);if(b(r)){if(!n)return;r=new p,h.set(e,r)}var i=r.get(t);if(b(i)){if(!n)return;i=new p,r.set(t,i)}return i}function v(e,t,n){var r=f(t,n,!1);return!b(r)&&!!r.has(e)}function y(e,t,n){var r=f(t,n,!1);if(!b(r))return r.get(e)}function g(e,t,n,r){f(n,r,!0).set(e,t)}function m(e,t){var n=[],r=f(e,t,!1);if(b(r))return n;for(var o=function(e){var t=O(e,i);if(!I(t))throw new TypeError;var n=t.call(e);if(!S(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=A(o);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{x(o)}finally{throw e}}s++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function b(e){return void 0===e}function E(e){return null===e}function S(e){return"object"==typeof e?null!==e:"function"==typeof e}function w(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=O(e,r);if(void 0!==i){var o=i.call(e,n);if(S(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(I(n))if(!S(i=n.call(e)))return i;if(I(r=e.valueOf))if(!S(i=r.call(e)))return i}else{var r;if(I(r=e.valueOf))if(!S(i=r.call(e)))return i;var i,o=e.toString;if(I(o))if(!S(i=o.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function T(e){var t=w(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function P(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function I(e){return"function"==typeof e}function C(e){return"function"==typeof e}function O(e,t){var n=e[t];if(null!=n){if(!I(n))throw new TypeError;return n}}function A(e){var t=e.next();return!t.done&&t}function x(e){var t=e.return;t&&t.call(e)}function R(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function N(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(b(n)){if(!P(e))throw new TypeError;if(!C(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!b(r)&&!E(r)){if(!C(r))throw new TypeError;t=r}}return t}(e,t)}if(!P(e))throw new TypeError;if(!S(t))throw new TypeError;if(!S(r)&&!b(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!b(o)&&!E(o)){if(!S(o))throw new TypeError;r=o}}return r}(e,t,n=T(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!S(n))throw new TypeError;if(!b(r)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;g(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!S(n))throw new TypeError;return b(r)||(r=T(r)),g(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return b(n)||(n=T(n)),function e(t,n,r){if(v(t,n,r))return!0;var i=R(n);return!E(i)&&e(t,i,r)}(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return b(n)||(n=T(n)),v(e,t,n)})),e("getMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return b(n)||(n=T(n)),function e(t,n,r){if(v(t,n,r))return y(t,n,r);var i=R(n);return E(i)?void 0:e(t,i,r)}(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!S(t))throw new TypeError;return b(n)||(n=T(n)),y(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!S(e))throw new TypeError;return b(t)||(t=T(t)),function e(t,n){var r=m(t,n),i=R(t);if(null===i)return r;var o=e(i,n);if(o.length<=0)return r;if(r.length<=0)return o;for(var s=new d,a=[],c=0,u=r;c<u.length;c++){var l=u[c];s.has(l)||(s.add(l),a.push(l))}for(var p=0,h=o;p<h.length;p++){l=h[p];s.has(l)||(s.add(l),a.push(l))}return a}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!S(e))throw new TypeError;return b(t)||(t=T(t)),m(e,t)})),e("deleteMetadata",(function(e,t,n){if(!S(t))throw new TypeError;b(n)||(n=T(n));var r=f(t,n,!1);if(b(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=h.get(t);return i.delete(n),i.size>0||h.delete(t),!0}))}(r)}()}(n||(n={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=t.SourceMapSupport=void 0;const r=n(0);n(14);const i=n(118),o=n(129),s=n(4);class a{constructor(e){this.vscode=e,this.config=this.vscode.workspace.getConfiguration("python.diagnostics",null)}async initialize(){if(!this.enabled)return;await this.enableSourceMaps(!0),n(300).install();const e=n(52),t=e.Diagnostics.disableSourceMaps();this.vscode.window.showWarningMessage(e.Diagnostics.warnSourceMaps(),t).then(e=>{e===t&&this.disable().ignoreErrors()})}get enabled(){return this.config.get("sourceMapsEnabled",!1)}async disable(){this.enabled&&await this.config.update("sourceMapsEnabled",!1,this.vscode.ConfigurationTarget.Global),await this.enableSourceMaps(!1)}async enableSourceMaps(e){const t=r.join(o.EXTENSION_ROOT_DIR,"out","client","extension.js"),n=r.join(o.EXTENSION_ROOT_DIR,"out","client","debugger","debugAdapter","main.js");await Promise.all([this.enableSourceMap(e,t),this.enableSourceMap(e,n)])}async enableSourceMap(e,t){const n=t+".map",r=t+".map.disabled";e?await this.rename(r,n):await this.rename(n,r)}async rename(e,t){const n=new i.FileSystem;await n.fileExists(t)||await n.move(e,t)}}t.SourceMapSupport=a,t.initialize=function(e=n(5)){e.workspace.getConfiguration("python.diagnostics",null).get("sourceMapsEnabled",!1)?new a(e).initialize().catch(e=>{s.traceError("Failed to initialize source map support in extension")}):new a(e).disable().ignoreErrors()}},function(e,t,n){var r=n(153),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},e.exports=function(e){r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,i){e.open(t,r.O_WRONLY|r.O_SYMLINK,n,(function(t,r){t?i&&i(t):e.fchmod(r,n,(function(t){e.close(r,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,n){var i,o=e.openSync(t,r.O_WRONLY|r.O_SYMLINK,n),s=!0;try{i=e.fchmodSync(o,n),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e);e.lutimes||function(e){r.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,n,i,o){e.open(t,r.O_SYMLINK,(function(t,r){t?o&&o(t):e.futimes(r,n,i,(function(t){e.close(r,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,n,i){var o,s=e.openSync(t,r.O_SYMLINK),a=!0;try{o=e.futimesSync(s,n,i),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===s&&(e.rename=(t=e.rename,function(n,r,i){var o=Date.now(),s=0;t(n,r,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(r,(function(e,o){e&&"ENOENT"===e.code?t(n,r,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}));var t;function n(t){return t?function(n,r,i){return t.call(e,n,r,(function(e){l(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!l(e))throw e}}:t}function o(t){return t?function(n,r,i,o){return t.call(e,n,r,i,(function(e){l(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function a(t){return t?function(n,r,i){try{return t.call(e,n,r,i)}catch(e){if(!l(e))throw e}}:t}function c(t){return t?function(n,r,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?t.call(e,n,r,o):t.call(e,n,o)}:t}function u(t){return t?function(n,r){var i=r?t.call(e,n,r):t.call(e,n);return i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296),i}:t}function l(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=(d=e.read,function(t,n,r,i,o,s){var a;if(s&&"function"==typeof s){var c=0;a=function(u,l,p){if(u&&"EAGAIN"===u.code&&c<10)return c++,d.call(e,t,n,r,i,o,a);s.apply(this,arguments)}}return d.call(e,t,n,r,i,o,a)}),e.readSync=(p=e.readSync,function(t,n,r,i,o){for(var s=0;;)try{return p.call(e,t,n,r,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}});var p;var d}},function(e,t,n){var r=n(77).Stream;e.exports=function(e){return{ReadStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=i[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){o._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()}))},WriteStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t,n){"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}},function(e,t,n){"use strict";const r=n(32),i=n(0),o=n(51).mkdirsSync,s=n(179).utimesMillisSync,a=n(121);function c(e,t,n,o){if(!o.filter||o.filter(t,n))return function(e,t,n,o){const s=(o.dereference?r.statSync:r.lstatSync)(t);if(s.isDirectory())return function(e,t,n,i,o){if(!t)return function(e,t,n,i){return r.mkdirSync(n),p(t,n,i),l(n,e)}(e.mode,n,i,o);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${i}' with directory '${n}'.`);return p(n,i,o)}(s,e,t,n,o);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(e,t,n,i,o){return t?function(e,t,n,i){if(i.overwrite)return r.unlinkSync(n),u(e,t,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,i,o):u(e,n,i,o)}(s,e,t,n,o);if(s.isSymbolicLink())return function(e,t,n,o){let s=r.readlinkSync(t);o.dereference&&(s=i.resolve(process.cwd(),s));if(e){let e;try{e=r.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return r.symlinkSync(s,n);throw e}if(o.dereference&&(e=i.resolve(process.cwd(),e)),a.isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(r.statSync(n).isDirectory()&&a.isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function(e,t){return r.unlinkSync(t),r.symlinkSync(e,t)}(s,n)}return r.symlinkSync(s,n)}(e,t,n,o)}(e,t,n,o)}function u(e,t,n,i){return r.copyFileSync(t,n),i.preserveTimestamps&&function(e,t,n){(function(e){return 0==(128&e)})(e)&&function(e,t){l(e,128|t)}(n,e);(function(e,t){const n=r.statSync(e);s(t,n.atime,n.mtime)})(t,n)}(e.mode,t,n),l(n,e.mode)}function l(e,t){return r.chmodSync(e,t)}function p(e,t,n){r.readdirSync(e).forEach(r=>function(e,t,n,r){const o=i.join(t,e),s=i.join(n,e),{destStat:u}=a.checkPathsSync(o,s,"copy");return c(u,o,s,r)}(r,e,t,n))}e.exports=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:s,destStat:u}=a.checkPathsSync(e,t,"copy");return a.checkParentPathsSync(e,s,t,"copy"),function(e,t,n,s){if(s.filter&&!s.filter(t,n))return;const a=i.dirname(n);r.existsSync(a)||o(a);return c(e,t,n,s)}(u,e,t,n)}},function(e,t,n){"use strict";const r=n(120),i=n(0),o=n(178)("10.12.0"),s=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(i.parse(e).root,""))){const t=new Error("Path contains invalid characters: "+e);throw t.code="EINVAL",t}}},a=e=>("number"==typeof e&&(e={mode:e}),{mode:511,...e}),c=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};e.exports.makeDir=async(e,t)=>{if(s(e),t=a(t),o){const n=i.resolve(e);return r.mkdir(n,{mode:t.mode,recursive:!0})}const n=async e=>{try{await r.mkdir(e,t.mode)}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(i.dirname(e)===e)throw c(e);if(t.message.includes("null bytes"))throw t;return await n(i.dirname(e)),n(e)}try{if(!(await r.stat(e)).isDirectory())throw new Error("The path is not a directory")}catch{throw t}}};return n(i.resolve(e))},e.exports.makeDirSync=(e,t)=>{if(s(e),t=a(t),o){const n=i.resolve(e);return r.mkdirSync(n,{mode:t.mode,recursive:!0})}const n=e=>{try{r.mkdirSync(e,t.mode)}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(i.dirname(e)===e)throw c(e);if(t.message.includes("null bytes"))throw t;return n(i.dirname(e)),n(e)}try{if(!r.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch{throw t}}};return n(i.resolve(e))}},function(e,t,n){"use strict";const r=n(32),i=n(0),o=n(51).mkdirs,s=n(69).pathExists,a=n(179).utimesMillis,c=n(121);function u(e,t,n,r,a){const c=i.dirname(n);s(c,(i,s)=>i?a(i):s?p(e,t,n,r,a):void o(c,i=>i?a(i):p(e,t,n,r,a)))}function l(e,t,n,r,i,o){Promise.resolve(i.filter(n,r)).then(s=>s?e(t,n,r,i,o):o(),e=>o(e))}function p(e,t,n,r,i){return r.filter?l(d,e,t,n,r,i):d(e,t,n,r,i)}function d(e,t,n,i,o){(i.dereference?r.stat:r.lstat)(t,(s,a)=>s?o(s):a.isDirectory()?function(e,t,n,i,o,s){if(!t)return function(e,t,n,i,o){r.mkdir(n,r=>{if(r)return o(r);y(t,n,i,t=>t?o(t):v(n,e,o))})}(e.mode,n,i,o,s);if(t&&!t.isDirectory())return s(new Error(`Cannot overwrite non-directory '${i}' with directory '${n}'.`));return y(n,i,o,s)}(a,e,t,n,i,o):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?function(e,t,n,i,o,s){return t?function(e,t,n,i,o){if(!i.overwrite)return i.errorOnExist?o(new Error(`'${n}' already exists`)):o();r.unlink(n,r=>r?o(r):h(e,t,n,i,o))}(e,n,i,o,s):h(e,n,i,o,s)}(a,e,t,n,i,o):a.isSymbolicLink()?m(e,t,n,i,o):void 0)}function h(e,t,n,i,o){r.copyFile(t,n,r=>r?o(r):i.preserveTimestamps?function(e,t,n,r){if(function(e){return 0==(128&e)}(e))return function(e,t,n){return v(e,128|t,n)}(n,e,i=>i?r(i):f(e,t,n,r));return f(e,t,n,r)}(e.mode,t,n,o):v(n,e.mode,o))}function f(e,t,n,i){!function(e,t,n){r.stat(e,(e,r)=>e?n(e):a(t,r.atime,r.mtime,n))}(t,n,t=>t?i(t):v(n,e,i))}function v(e,t,n){return r.chmod(e,t,n)}function y(e,t,n,i){r.readdir(e,(r,o)=>r?i(r):g(o,e,t,n,i))}function g(e,t,n,r,o){const s=e.pop();return s?function(e,t,n,r,o,s){const a=i.join(n,t),u=i.join(r,t);c.checkPaths(a,u,"copy",(t,i)=>{if(t)return s(t);const{destStat:c}=i;p(c,a,u,o,t=>t?s(t):g(e,n,r,o,s))})}(e,s,t,n,r,o):o()}function m(e,t,n,o,s){r.readlink(t,(t,a)=>t?s(t):(o.dereference&&(a=i.resolve(process.cwd(),a)),e?void r.readlink(n,(t,u)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?r.symlink(a,n,s):s(t):(o.dereference&&(u=i.resolve(process.cwd(),u)),c.isSrcSubdir(a,u)?s(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&c.isSrcSubdir(u,a)?s(new Error(`Cannot overwrite '${u}' with '${a}'.`)):function(e,t,n){r.unlink(t,i=>i?n(i):r.symlink(e,t,n))}(a,n,s))):r.symlink(a,n,s)))}e.exports=function(e,t,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),c.checkPaths(e,t,"copy",(i,o)=>{if(i)return r(i);const{srcStat:s,destStat:a}=o;c.checkParentPaths(e,s,t,"copy",i=>i?r(i):n.filter?l(u,a,e,t,n,r):u(a,e,t,n,r))})}},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(32),o=n(0),s=n(51),a=n(122),c=r((function(e,t){t=t||function(){},i.readdir(e,(n,r)=>{if(n)return s.mkdirs(e,t);r=r.map(t=>o.join(e,t)),function e(){const n=r.pop();if(!n)return t();a.remove(n,n=>{if(n)return t(n);e()})}()})}));function u(e){let t;try{t=i.readdirSync(e)}catch{return s.mkdirsSync(e)}t.forEach(t=>{t=o.join(e,t),a.removeSync(t)})}e.exports={emptyDirSync:u,emptydirSync:u,emptyDir:c,emptydir:c}},function(e,t,n){"use strict";const r=n(32),i=n(0),o=n(68),s="win32"===process.platform;function a(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||r[t],e[t+="Sync"]=e[t]||r[t]}),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),o(e,"rimraf: missing path"),o.strictEqual(typeof e,"string","rimraf: path should be a string"),o.strictEqual(typeof n,"function","rimraf: callback function required"),o(t,"rimraf: invalid options argument provided"),o.strictEqual(typeof t,"object","rimraf: options should be object"),a(t),u(e,t,(function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries){r++;return setTimeout(()=>u(e,t,i),100*r)}"ENOENT"===o.code&&(o=null)}n(o)}))}function u(e,t,n){o(e),o(t),o("function"==typeof n),t.lstat(e,(r,i)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&s?l(e,t,r,n):i&&i.isDirectory()?d(e,t,r,n):void t.unlink(e,r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return s?l(e,t,r,n):d(e,t,r,n);if("EISDIR"===r.code)return d(e,t,r,n)}return n(r)}))}function l(e,t,n,r){o(e),o(t),o("function"==typeof r),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,o)=>{i?r("ENOENT"===i.code?null:n):o.isDirectory()?d(e,t,n,r):t.unlink(e,r)})})}function p(e,t,n){let r;o(e),o(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?f(e,t,n):t.unlinkSync(e)}function d(e,t,n,r){o(e),o(t),o("function"==typeof r),t.rmdir(e,s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?r(n):r(s):function(e,t,n){o(e),o(t),o("function"==typeof n),t.readdir(e,(r,o)=>{if(r)return n(r);let s,a=o.length;if(0===a)return t.rmdir(e,n);o.forEach(r=>{c(i.join(e,r),t,r=>{if(!s)return r?n(s=r):void(0==--a&&t.rmdir(e,n))})})})}(e,t,r)})}function h(e,t){let n;a(t=t||{}),o(e,"rimraf: missing path"),o.strictEqual(typeof e,"string","rimraf: path should be a string"),o(t,"rimraf: missing options"),o.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&s&&p(e,t,n)}try{n&&n.isDirectory()?f(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return s?p(e,t,n):f(e,t,n);if("EISDIR"!==n.code)throw n;f(e,t,n)}}function f(e,t,n){o(e),o(t);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){if(o(e),o(t),t.readdirSync(e).forEach(n=>h(i.join(e,n),t)),!s){return t.rmdirSync(e,t)}{const n=Date.now();do{try{return t.rmdirSync(e,t)}catch{}}while(Date.now()-n<500)}}(e,t);else if("ENOENT"!==r.code)throw r}}e.exports=c,c.sync=h},function(e,t,n){"use strict";const r=n(239),i=n(240),o=n(241);e.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(0),o=n(32),s=n(51);e.exports={createFile:r((function(e,t){function n(){o.writeFile(e,"",e=>{if(e)return t(e);t()})}o.stat(e,(r,a)=>{if(!r&&a.isFile())return t();const c=i.dirname(e);o.stat(c,(e,r)=>{if(e)return"ENOENT"===e.code?s.mkdirs(c,e=>{if(e)return t(e);n()}):t(e);r.isDirectory()?n():o.readdir(c,e=>{if(e)return t(e)})})})})),createFileSync:function(e){let t;try{t=o.statSync(e)}catch{}if(t&&t.isFile())return;const n=i.dirname(e);try{o.statSync(n).isDirectory()||o.readdirSync(n)}catch(e){if(!e||"ENOENT"!==e.code)throw e;s.mkdirsSync(n)}o.writeFileSync(e,"")}}},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(0),o=n(32),s=n(51),a=n(69).pathExists;e.exports={createLink:r((function(e,t,n){function r(e,t){o.link(e,t,e=>{if(e)return n(e);n(null)})}a(t,(c,u)=>c?n(c):u?n(null):void o.lstat(e,o=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);const c=i.dirname(t);a(c,(i,o)=>i?n(i):o?r(e,t):void s.mkdirs(c,i=>{if(i)return n(i);r(e,t)}))}))})),createLinkSync:function(e,t){if(o.existsSync(t))return;try{o.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=i.dirname(t);return o.existsSync(n)||s.mkdirsSync(n),o.linkSync(e,t)}}},function(e,t,n){"use strict";const r=n(38).fromCallback,i=n(0),o=n(32),s=n(51),a=s.mkdirs,c=s.mkdirsSync,u=n(242),l=u.symlinkPaths,p=u.symlinkPathsSync,d=n(243),h=d.symlinkType,f=d.symlinkTypeSync,v=n(69).pathExists;e.exports={createSymlink:r((function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,v(t,(s,c)=>s?r(s):c?r(null):void l(e,t,(s,c)=>{if(s)return r(s);e=c.toDst,h(c.toCwd,n,(n,s)=>{if(n)return r(n);const c=i.dirname(t);v(c,(n,i)=>n?r(n):i?o.symlink(e,t,s,r):void a(c,n=>{if(n)return r(n);o.symlink(e,t,s,r)}))})}))})),createSymlinkSync:function(e,t,n){if(o.existsSync(t))return;const r=p(e,t);e=r.toDst,n=f(r.toCwd,n);const s=i.dirname(t);return o.existsSync(s)||c(s),o.symlinkSync(e,t,n)}}},function(e,t,n){"use strict";const r=n(0),i=n(32),o=n(69).pathExists;e.exports={symlinkPaths:function(e,t,n){if(r.isAbsolute(e))return i.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e}));{const s=r.dirname(t),a=r.join(s,e);return o(a,(t,o)=>t?n(t):o?n(null,{toCwd:a,toDst:e}):i.lstat(e,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:r.relative(s,e)})))}},symlinkPathsSync:function(e,t){let n;if(r.isAbsolute(e)){if(n=i.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const o=r.dirname(t),s=r.join(o,e);if(n=i.existsSync(s),n)return{toCwd:s,toDst:e};if(n=i.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(o,e)}}}}},function(e,t,n){"use strict";const r=n(32);e.exports={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);r.lstat(e,(e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)})},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=r.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}}},function(e,t,n){"use strict";const r=n(38).fromPromise,i=n(245);i.outputJson=r(n(247)),i.outputJsonSync=n(248),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},function(e,t,n){"use strict";const r=n(246);e.exports={readJson:r.readFile,readJsonSync:r.readFileSync,writeJson:r.writeFile,writeJsonSync:r.writeFileSync}},function(e,t,n){let r;try{r=n(32)}catch(e){r=n(16)}const i=n(38),{stringify:o,stripBom:s}=n(154);const a={readFile:i.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||r,o=!("throws"in t)||t.throws;let a,c=await i.fromCallback(n.readFile)(e,t);c=s(c);try{a=JSON.parse(c,t?t.reviver:null)}catch(t){if(o)throw t.message=`${e}: ${t.message}`,t;return null}return a})),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||r,i=!("throws"in t)||t.throws;try{let r=n.readFileSync(e,t);return r=s(r),JSON.parse(r,t.reviver)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:i.fromPromise((async function(e,t,n={}){const s=n.fs||r,a=o(t,n);await i.fromCallback(s.writeFile)(e,a,n)})),writeFileSync:function(e,t,n={}){const i=n.fs||r,s=o(t,n);return i.writeFileSync(e,s,n)}};e.exports=a},function(e,t,n){"use strict";const{stringify:r}=n(154),{outputFile:i}=n(155);e.exports=async function(e,t,n={}){const o=r(t,n);await i(e,o,n)}},function(e,t,n){"use strict";const{stringify:r}=n(154),{outputFileSync:i}=n(155);e.exports=function(e,t,n){const o=r(t,n);i(e,o,n)}},function(e,t,n){"use strict";e.exports={moveSync:n(250)}},function(e,t,n){"use strict";const r=n(32),i=n(0),o=n(177).copySync,s=n(122).removeSync,a=n(51).mkdirpSync,c=n(121);function u(e,t,n){try{r.renameSync(e,t)}catch(r){if("EXDEV"!==r.code)throw r;return function(e,t,n){return o(e,t,{overwrite:n,errorOnExist:true}),s(e)}(e,t,n)}}e.exports=function(e,t,n){const o=(n=n||{}).overwrite||n.clobber||!1,{srcStat:l}=c.checkPathsSync(e,t,"move");return c.checkParentPathsSync(e,l,t,"move"),a(i.dirname(t)),function(e,t,n){if(n)return s(t),u(e,t,n);if(r.existsSync(t))throw new Error("dest already exists.");return u(e,t,n)}(e,t,o)}},function(e,t,n){"use strict";const r=n(38).fromCallback;e.exports={move:r(n(252))}},function(e,t,n){"use strict";const r=n(32),i=n(0),o=n(180).copy,s=n(122).remove,a=n(51).mkdirp,c=n(69).pathExists,u=n(121);function l(e,t,n,i){r.rename(e,t,r=>r?"EXDEV"!==r.code?i(r):function(e,t,n,r){o(e,t,{overwrite:n,errorOnExist:!0},t=>t?r(t):s(e,r))}(e,t,n,i):i())}e.exports=function(e,t,n,r){"function"==typeof n&&(r=n,n={});const o=n.overwrite||n.clobber||!1;u.checkPaths(e,t,"move",(n,p)=>{if(n)return r(n);const{srcStat:d}=p;u.checkParentPaths(e,d,t,"move",n=>{if(n)return r(n);a(i.dirname(t),n=>n?r(n):function(e,t,n,r){if(n)return s(t,i=>i?r(i):l(e,t,n,r));c(t,(i,o)=>i?r(i):o?r(new Error("dest already exists.")):l(e,t,n,r))}(e,t,o,r))})})}},function(e,t,n){var r=n(0),i="win32"===process.platform,o=n(16),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}r.normalize;if(i)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(i)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,s,a,l,p=e,d={},h={};function f(){var t=u.exec(e);n=t[0].length,s=t[0],a=t[0],l="",i&&!h[a]&&(o.lstatSync(a),h[a]=!0)}for(f();n<e.length;){c.lastIndex=n;var v=c.exec(e);if(l=s,s+=v[0],a=l+v[1],n=c.lastIndex,!(h[a]||t&&t[a]===a)){var y;if(t&&Object.prototype.hasOwnProperty.call(t,a))y=t[a];else{var g=o.lstatSync(a);if(!g.isSymbolicLink()){h[a]=!0,t&&(t[a]=a);continue}var m=null;if(!i){var _=g.dev.toString(32)+":"+g.ino.toString(32);d.hasOwnProperty(_)&&(m=d[_])}null===m&&(o.statSync(a),m=o.readlinkSync(a)),y=r.resolve(l,m),t&&(t[a]=y),i||(d[_]=m)}e=r.resolve(y,e.slice(n)),f()}}return t&&(t[p]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var s,l,p,d,h=e,f={},v={};function y(){var t=u.exec(e);s=t[0].length,l=t[0],p=t[0],d="",i&&!v[p]?o.lstat(p,(function(e){if(e)return n(e);v[p]=!0,g()})):process.nextTick(g)}function g(){if(s>=e.length)return t&&(t[h]=e),n(null,e);c.lastIndex=s;var r=c.exec(e);return d=l,l+=r[0],p=d+r[1],s=c.lastIndex,v[p]||t&&t[p]===p?process.nextTick(g):t&&Object.prototype.hasOwnProperty.call(t,p)?b(t[p]):o.lstat(p,m)}function m(e,r){if(e)return n(e);if(!r.isSymbolicLink())return v[p]=!0,t&&(t[p]=p),process.nextTick(g);if(!i){var s=r.dev.toString(32)+":"+r.ino.toString(32);if(f.hasOwnProperty(s))return _(null,f[s],p)}o.stat(p,(function(e){if(e)return n(e);o.readlink(p,(function(e,t){i||(f[s]=t),_(e,t)}))}))}function _(e,i,o){if(e)return n(e);var s=r.resolve(d,i);t&&(t[o]=s),b(s)}function b(t){e=r.resolve(t,e.slice(s)),y()}y()}},function(e,t,n){var r=n(255),i=n(256);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var o=[],s=i("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c,u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),y=u||p,g=s.body.indexOf(",")>=0;if(!y&&!g)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];if(y)c=s.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var n=[],r=i("{","}",t);if(!r)return t.split(",");var o=r.pre,s=r.body,a=r.post,c=o.split(",");c[c.length-1]+="{"+s+"}";var u=e(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));return n.push.apply(n,c),n}(s.body)).length)if(1===(c=e(c[0],!1).map(d)).length)return(b=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+c[0]+e}))}var m,_=s.pre,b=s.post.length?e(s.post,!1):[""];if(y){var E=l(c[0]),S=l(c[1]),w=Math.max(c[0].length,c[1].length),T=3==c.length?Math.abs(l(c[2])):1,P=f;S<E&&(T*=-1,P=v);var I=c.some(h);m=[];for(var C=E;P(C,S);C+=T){var O;if(p)"\\"===(O=String.fromCharCode(C))&&(O="");else if(O=String(C),I){var A=w-O.length;if(A>0){var x=new Array(A+1).join("0");O=C<0?"-"+x+O.slice(1):x+O}}m.push(O)}}else m=r(c,(function(t){return e(t,!1)}));for(var R=0;R<m.length;R++)for(var N=0;N<b.length;N++){var k=_+m[R]+b[N];(!n||y||k)&&o.push(k)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(p)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function p(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function d(e){return"{"+e+"}"}function h(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function v(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var r=[],i=0;i<e.length;i++){var o=t(e[i],i);n(o)?r.push.apply(r,o):r.push(o)}return r};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t,n){e instanceof RegExp&&(e=i(e,n)),t instanceof RegExp&&(t=i(t,n));var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function i(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var r,i,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(e,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(t,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}e.exports=r,r.range=o},function(e,t,n){try{var r=n(24);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(258)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=f,f.GlobSync=v;var r=n(16),i=n(182),o=n(106),s=(o.Minimatch,n(181).Glob,n(24),n(0)),a=n(68),c=n(156),u=n(183),l=(u.alphasort,u.alphasorti,u.setopts),p=u.ownProp,d=u.childrenIgnored,h=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new v(e,t).found}function v(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof v))return new v(e,t);if(l(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}v.prototype._finish=function(){if(a(this instanceof v),this.realpath){var e=this;this.matches.forEach((function(t,n){var r=e.matches[n]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),r[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;r[e._makeAbs(o)]=!0}}))}u.finish(this)},v.prototype._process=function(e,t,n){a(this instanceof v);for(var r,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:r=null;break;default:r=e.slice(0,i).join("/")}var s,u=e.slice(i);null===r?s=".":c(r)||c(e.join("/"))?(r&&c(r)||(r="/"+r),s=r):s=r;var l=this._makeAbs(s);d(this,s)||(u[0]===o.GLOBSTAR?this._processGlobStar(r,s,l,u,t,n):this._processReaddir(r,s,l,u,t,n))},v.prototype._processReaddir=function(e,t,n,r,i,o){var a=this._readdir(n,o);if(a){for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,p=this.dot||"."===l.charAt(0),d=[],h=0;h<a.length;h++){if("."!==(y=a[h]).charAt(0)||p)(u&&!e?!y.match(c):y.match(c))&&d.push(y)}var f=d.length;if(0!==f)if(1!==r.length||this.mark||this.stat){r.shift();for(h=0;h<f;h++){var v;y=d[h];v=e?[e,y]:[y],this._process(v.concat(r),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<f;h++){var y=d[h];e&&(y="/"!==e.slice(-1)?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=s.join(this.root,y)),this._emitMatch(i,y)}}}},v.prototype._emitMatch=function(e,t){if(!h(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},v.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=r.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=n&&n.isSymbolicLink();return this.symlinks[e]=i,i||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},v.prototype._readdir=function(e,t){if(t&&!p(this.symlinks,e))return this._readdirInGlobStar(e);if(p(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,r.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},v.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var r=t[n];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,t},v.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=t.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},v.prototype._processGlobStar=function(e,t,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var p=0;p<l;p++){if("."!==s[p].charAt(0)||this.dot){var d=c.concat(s[p],a);this._process(d,i,!0);var h=c.concat(s[p],r);this._process(h,i,!0)}}}},v.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var r=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),r&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},v.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&p(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return i;if(n&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=r.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=r.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!n||"FILE"!==i)&&i},v.prototype._mark=function(e){return u.mark(this,e)},v.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},function(e,t,n){var r=n(184),i=Object.create(null),o=n(185);function s(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r]=e[r];return n}e.exports=r((function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o((function t(){var n=i[e],r=n.length,o=s(arguments);try{for(var a=0;a<r;a++)n[a].apply(null,o)}finally{n.length>r?(n.splice(0,r),process.nextTick((function(){t.apply(null,o)}))):delete i[e]}}))}(e))}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var o=n(262),s=n(39),a=n(57),c=n(25),u=n(186),l=n(263),p=n(270),d=n(272),h=n(70),f=n(107),v=n(275),y=n(276),g=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=a.BindingScopeEnum.Transient;else if(t.defaultScope!==a.BindingScopeEnum.Singleton&&t.defaultScope!==a.BindingScopeEnum.Transient&&t.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=h.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return e.merge=function(t,n){var r=new e,i=l.getBindingDictionary(r),o=l.getBindingDictionary(t),s=l.getBindingDictionary(n);function a(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return a(o,i),a(s,i),r},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],s=t(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||a.BindingScopeEnum.Transient,n=new o.Binding(e,t);return this._bindingDictionary.add(e,n),new d.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+f.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=l.createMockRequest(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(v.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,a.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,a.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,n,r,i,o){var a=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(c)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(c);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=l.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),p.resolve(n)}},e}();t.Container=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n(57),i=n(70),o=function(){function e(e,t){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var r=n(264),i=n(39),o=n(57),s=n(25),a=n(187),c=n(107),u=n(265),l=n(45),p=n(266),d=n(267),h=n(269),f=n(189);function v(e){return e._bindingDictionary}function y(e,t,n,o,s){var a=g(n.container,s.serviceIdentifier),u=[];return a.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),a=g(n.container,s.serviceIdentifier)),u=t?a:a.filter((function(e){var t=new h.Request(e.serviceIdentifier,n,o,e,s);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var s=c.getServiceIdentifierAsString(e),a=i.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(o,s,g),new Error(a);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;s=c.getServiceIdentifierAsString(e),a=i.AMBIGUOUS_MATCH+" "+s;throw a+=c.listRegisteredBindingsForServiceIdentifier(o,s,g),new Error(a)}}(s.serviceIdentifier,u,s,n.container),u}function g(e,t){var n=[],r=v(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=g(e.parent,t)),n}t.getBindingDictionary=v,t.plan=function(e,t,n,r,v,g,m,_){void 0===_&&(_=!1);var b=new u.Context(t),E=function(e,t,n,r,i,o){var a=e?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new l.Metadata(a,n),u=new f.Target(t,r,n,c);if(void 0!==i){var p=new l.Metadata(i,o);u.metadata.push(p)}return u}(n,r,v,"",g,m);try{return function e(t,n,r,s,a,c){var u,l;if(null===a){u=y(t,n,s,null,c),l=new h.Request(r,s,null,u,c);var f=new p.Plan(s,l);s.addPlan(f)}else u=y(t,n,s,a,c),l=a.addChildRequest(c.serviceIdentifier,u,c);u.forEach((function(n){var r=null;if(c.isArray())r=l.addChildRequest(n.serviceIdentifier,n,c);else{if(n.cache)return;r=l}if(n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType){var a=d.getDependencies(t,n.implementationType);if(!s.container.options.skipBaseClassChecks){var u=d.getBaseClassDependencyCount(t,n.implementationType);if(a.length<u){var p=i.ARGUMENTS_LENGTH_MISMATCH(d.getFunctionName(n.implementationType));throw new Error(p)}}a.forEach((function(n){e(t,!1,n.serviceIdentifier,s,r,n)}))}}))}(e,_,v,b,null,E),b}catch(e){throw a.isStackOverflowExeption(e)&&b.plan&&c.circularDependencyToException(b.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new f.Target(o.TargetTypeEnum.Variable,"",t,new l.Metadata(n,r)),s=new u.Context(e);return new h.Request(t,s,null,[],i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0;t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n(70),i=function(){function e(e){this.id=r.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;var r=function(e,t){this.parentContext=e,this.rootRequest=t};t.Plan=r},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var i=n(188),o=n(39),s=n(57),a=n(25),c=n(107);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return c.getFunctionName}});var u=n(189);function l(e,t,n,i){var a=e.getConstructorMetadata(n),c=a.compilerGeneratedMetadata;if(void 0===c){var l=o.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(l)}var h=a.userGeneratedMetadata,f=Object.keys(h),v=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=p(s,e,t,n,r);null!==a&&o.push(a)}return o}(i,t,c,h,0===n.length&&f.length>0?f.length:n.length),y=function e(t,n){for(var i=t.getPropertiesMetadata(n),o=[],a=Object.keys(i),c=0,l=a;c<l.length;c++){var p=l[c],h=i[p],f=d(i[p]),v=f.targetName||p,y=f.inject||f.multiInject,g=new u.Target(s.TargetTypeEnum.ClassProperty,v,y);g.metadata=h,o.push(g)}var m=Object.getPrototypeOf(n.prototype).constructor;if(m!==Object){var _=e(t,m);o=r(o,_)}return o}(e,n);return r(v,y)}function p(e,t,n,r,a){var c=a[e.toString()]||[],l=d(c),p=!0!==l.unmanaged,h=r[e],f=l.inject||l.multiInject;if((h=f||h)instanceof i.LazyServiceIdentifer&&(h=h.unwrap()),p){if(!t&&(h===Object||h===Function||void 0===h)){var v=o.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(v)}var y=new u.Target(s.TargetTypeEnum.ConstructorArgument,l.targetName,h);return y.metadata=c,y}return null}function d(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[a.INJECT_TAG],multiInject:t[a.MULTI_INJECT_TAG],targetName:t[a.NAME_TAG],unmanaged:t[a.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return l(e,c.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=l(t,c.getFunctionName(r),r,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===a.UNMANAGED_TAG}))})),s=[].concat.apply([],o).length,u=i.length-s;return u>0?u:e(t,r)}return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var r=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n(70),i=function(){function e(e,t,n,i,o){this.id=r.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n(39),i=n(57),o=n(187),s=n(107),a=n(271),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},u=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,l=t.target&&t.target.isArray(),p=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(l&&p)return o.map((function(t){return u(e)(t)}));var d=null;if(!t.target.isOptional()||0!==n.length){var h=n[0],f=h.scope===i.BindingScopeEnum.Singleton,v=h.scope===i.BindingScopeEnum.Request;if(f&&h.activated)return h.cache;if(v&&null!==e&&e.has(h.id))return e.get(h.id);if(h.type===i.BindingTypeEnum.ConstantValue)d=h.cache;else if(h.type===i.BindingTypeEnum.Function)d=h.cache;else if(h.type===i.BindingTypeEnum.Constructor)d=h.implementationType;else if(h.type===i.BindingTypeEnum.DynamicValue&&null!==h.dynamicValue)d=c("toDynamicValue",h.serviceIdentifier,(function(){return h.dynamicValue(t.parentContext)}));else if(h.type===i.BindingTypeEnum.Factory&&null!==h.factory)d=c("toFactory",h.serviceIdentifier,(function(){return h.factory(t.parentContext)}));else if(h.type===i.BindingTypeEnum.Provider&&null!==h.provider)d=c("toProvider",h.serviceIdentifier,(function(){return h.provider(t.parentContext)}));else{if(h.type!==i.BindingTypeEnum.Instance||null===h.implementationType){var y=s.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+y)}d=a.resolveInstance(h.implementationType,o,u(e))}return"function"==typeof h.onActivation&&(d=h.onActivation(t.parentContext,d)),f&&(h.cache=d,h.activated=!0),v&&null!==e&&!e.has(h.id)&&e.set(h.id,d),d}}};t.resolve=function(e){return u(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var i=n(39),o=n(57),s=n(25);t.resolveInstance=function(e,t,n){var a,c,u=null;if(t.length>0){var l=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n);c=l,u=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var o=i[n];e[r]=o})),e}(u=new((a=e).bind.apply(a,r([void 0],c))),t,n)}else u=new e;return function(e,t){if(Reflect.hasMetadata(s.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(s.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,u),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var r=n(39),i=n(57),o=n(273),s=n(190),a=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new s.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n(274),i=n(157),o=n(158),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n(57),i=n(190),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var r=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var r=n(39),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(r.NULL_ARGUMENT);if(null==t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n(70),i=function(e){this.id=r.id(),this.registry=e};t.ContainerModule=i;var o=function(e){this.id=r.id(),this.registry=e};t.AsyncContainerModule=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var r=n(39),i=n(25);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n(45),i=n(63);t.tagged=function(e,t){return function(n,o,s){var a=new r.Metadata(e,t);"number"==typeof s?i.tagParameter(n,o,s,a):i.tagProperty(n,o,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var r=n(25),i=n(45),o=n(63);t.named=function(e){return function(t,n,s){var a=new i.Metadata(r.NAMED_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var r=n(25),i=n(45),o=n(63);t.optional=function(){return function(e,t,n){var s=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,s):o.tagProperty(e,t,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var r=n(25),i=n(45),o=n(63);t.unmanaged=function(){return function(e,t,n){var s=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var r=n(25),i=n(45),o=n(63);t.multiInject=function(e){return function(t,n,s){var a=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var r=n(25),i=n(45),o=n(63);t.targetName=function(e){return function(t,n,s){var a=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,s,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var r=n(39),i=n(25),o=n(45);t.postConstruct=function(){return function(e,t,n){var s=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,s,e.constructor)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=void 0,t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},function(e,t){e.exports=require("perf_hooks")},function(e,t){e.exports=require("console")},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=289},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=290},function(e,t){e.exports=require("async_hooks")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("dns")},function(e,t){e.exports=require("applicationinsights-native-metrics")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileLogger=void 0;const r=n(24),i=n(159);function o(e,...t){return`[${e.toUpperCase()} ${i.getTimeForLogging()}]: ${r.format(...t)}\r\n`}t.FileLogger=class{constructor(e){this.stream=e}traceError(...e){this.stream.write(o("error",...e))}traceWarn(...e){this.stream.write(o("warn",...e))}traceInfo(...e){this.stream.write(o("info",...e))}traceVerbose(...e){this.stream.write(o("debug",...e))}dispose(){try{this.stream.close()}catch(e){}}}},function(e,t,n){var r=n(109),i=n(16),o=n(0);e.exports=function(){if("x64"===process.arch)return"x64";if("darwin"===process.platform)return"x64";if("win32"===process.platform){var e=!1;try{e=!(!process.env.SYSTEMROOT||!i.statSync(process.env.SYSTEMROOT))}catch(e){}var t=e?process.env.SYSTEMROOT:"C:\\Windows",n=!1;try{n=!!i.statSync(o.join(t,"sysnative"))}catch(e){}return n?"x64":"x86"}return"linux"===process.platform&&"64\n"===r.execSync("getconf LONG_BIT",{encoding:"utf8"})?"x64":"x86"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNoPermissionsError=t.isNotDirError=t.isFileIsDirError=t.isFileExistsError=t.isFileNotFoundError=t.createDirNotEmptyError=void 0;const r=n(5);var i;function o(e,t){const n=e.code;if(n)return n===t}!function(e){const t=r.FileSystemError.FileNotFound().name,n=r.FileSystemError.FileExists().name,i=r.FileSystemError.FileIsADirectory().name,o=r.FileSystemError.FileNotADirectory().name,s=r.FileSystemError.NoPermissions().name,a=[t,n,i,o,s];function c(e,t){if(a.includes(e.name))return e.name===t}e.isFileNotFound=function(e){return c(e,t)},e.isFileExists=function(e){return c(e,n)},e.isFileIsDir=function(e){return c(e,i)},e.isNotDir=function(e){return c(e,o)},e.isNoPermissions=function(e){return c(e,s)}}(i||(i={})),t.createDirNotEmptyError=function(e){const t=new Error(`directory "${e}" not empty`);return t.name="SystemError",t.code="ENOTEMPTY",t.path=e,t.syscall="rmdir",t},t.isFileNotFoundError=function(e){const t=i.isFileNotFound(e);return void 0!==t?t:o(e,"ENOENT")},t.isFileExistsError=function(e){const t=i.isFileExists(e);return void 0!==t?t:o(e,"EEXIST")},t.isFileIsDirError=function(e){const t=i.isFileIsDir(e);return void 0!==t?t:o(e,"EISDIR")},t.isNotDirError=function(e){const t=i.isNotDir(e);return void 0!==t?t:o(e,"ENOTDIR")},t.isNoPermissionsError=function(e){const t=i.isNoPermissions(e);return void 0!==t?t:o(e,"EACCES")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryFileSystem=void 0;const r=n(197);class i{constructor(e){this.raw=e}static withDefaults(){return new i(r)}createFile(e,t){const n={postfix:e,mode:t};return new Promise((e,t)=>{this.raw.file(n,(n,r,i,o)=>{if(n)return t(n);e({filePath:r,dispose:o})})})}}t.TemporaryFileSystem=i},function(e,t,n){"use strict";var r="win32"===process.platform,i=r?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=r?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",i.test(e)&&(e=e.slice(0,-1)),e}},function(e,t){e.exports=require("./node_modules/source-map-support")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadLocalizedStringsForBrowser=t.loadLocalizedStringsUsingNodeFS=t.getLocalizedString=t.shouldLoadUsingNodeFS=t._getAskedForCollection=t._resetCollections=void 0;const r=n(5),i=n(0),o=n(129);let s,a,c,u={};function l(){try{if(null===navigator||void 0===navigator?void 0:navigator.language)return navigator.language.toLowerCase()}catch(e){}const e=process.env.VSCODE_NLS_CONFIG;return e?JSON.parse(e).locale:"en-us"}async function p(e){try{const t=e?`package.nls.${e}.json`:"package.nls.json",n=r.Uri.joinPath(r.Uri.file(o.EXTENSION_ROOT_DIR),t),i=await r.workspace.fs.readFile(n),s=(new TextDecoder).decode(i);return JSON.parse(s)}catch(e){return{}}}t._resetCollections=function(){c="",s=void 0,u={}},t._getAskedForCollection=function(){return u},t.shouldLoadUsingNodeFS=function(){return!s||l()!==c},t.getLocalizedString=function(e,t){let n=a;if(s&&s.hasOwnProperty(e)&&(n=s),void 0===n)throw new Error("Localizations haven't been loaded yet for key: "+e);let r=n[e];return!r&&t&&(r=t),u[e]=r,r},t.loadLocalizedStringsUsingNodeFS=function(e){c=l();const t=i.join(o.EXTENSION_ROOT_DIR,`package.nls.${c}.json`);if(e.fileExistsSync(t)){const n=e.readFileSync(t);s=JSON.parse(n)}else s={};if(!a){const t=i.join(o.EXTENSION_ROOT_DIR,"package.nls.json");if(e.fileExistsSync(t)){const n=e.readFileSync(t);a=JSON.parse(n)}else a={}}},t.loadLocalizedStringsForBrowser=async function(){c=l(),s=await p(c),a||(a=await p())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateComponents=void 0;const r=n(303),i=n(111),o=n(7),s=n(17),a=n(306),c=n(6),u=n(31),l=n(12),p=n(4),d=n(328),h=n(329),f=n(330),v=n(136),y=n(338),g=n(351),m=n(207),_=n(407);t.activateComponents=async function(e,t){const n=await async function(e){const{context:t,legacyIOC:n}=e,{serviceManager:m,serviceContainer:b}=n,E=m.get(o.IApplicationEnvironment),{enableProposedApi:S}=E.packageJson;m.addSingletonInstance(s.UseProposedApi,S),y.registerTypes(m),a.registerTypes(m),f.registerTypes(m),p.setLoggingLevel(_.getLoggingLevel()),r.registerTypes(m);b.get(l.IInterpreterService).initialize();const w=m.get(c.IDisposableRegistry),T=b.get(o.ICommandManager),P=m.get(c.IOutputChannel,s.STANDARD_OUTPUT_CHANNEL);w.push(T.registerCommand(s.Commands.ViewOutput,()=>P.show())),T.executeCommand("setContext","python.vscode.channel",E.channel).then(u.noop,u.noop);const I=b.get(i.IExtensionActivationManager);t.subscriptions.push(I),b.get(c.IConfigurationService).getSettings().initialize();const C=I.activate();m.get(v.ICodeExecutionManager).registerCommands(),t.subscriptions.push(new d.ReplProvider(b));const O=new h.TerminalProvider(b);return t.subscriptions.push(O),g.registerTypes(m,e.context),{fullyReady:C}}(e),b=[m.activate(t.pythonEnvs,e)];return Promise.all([n,...b])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(304),i=n(111);t.registerTypes=function(e){e.add(i.IExtensionActivationManager,r.ExtensionActivationManager)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionActivationManager=void 0;const o=n(1),s=n(7),a=n(17),c=n(13),u=n(6),l=n(81),p=n(4),d=n(160),h=n(111);let f=class{constructor(e,t,n,r,i,o,s,a){this.activationServices=e,this.singleActivationServices=t,this.documentManager=n,this.autoSelection=r,this.workspaceService=i,this.fileSystem=o,this.activeResourceService=s,this.interpreterPathService=a,this.activatedWorkspaces=new Set,this.isInterpreterSetForWorkspacePromises=new Map,this.disposables=[]}dispose(){for(;this.disposables.length>0;){this.disposables.shift().dispose()}this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}async activate(){await this.initialize(),await Promise.all([Promise.all(this.singleActivationServices.map(e=>e.activate())),this.activateWorkspace(this.activeResourceService.getActiveResource())])}async activateWorkspace(e){const t=this.getWorkspaceKey(e);this.activatedWorkspaces.has(t)||(this.activatedWorkspaces.add(t),await this.interpreterPathService.copyOldInterpreterStorageValuesToNew(e),await d.sendActivationTelemetry(this.fileSystem,this.workspaceService,e),await this.autoSelection.autoSelectInterpreter(e),await Promise.all(this.activationServices.map(t=>t.activate(e))))}async initialize(){this.addHandlers(),this.addRemoveDocOpenedHandlers()}onDocOpened(e){if(e.languageId!==a.PYTHON_LANGUAGE)return;const t=this.getWorkspaceKey(e.uri);if(""===t&&this.workspaceService.hasWorkspaceFolders)return;if(this.activatedWorkspaces.has(t))return;const n=this.workspaceService.getWorkspaceFolder(e.uri);this.activateWorkspace(n?n.uri:void 0).ignoreErrors()}addHandlers(){this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}addRemoveDocOpenedHandlers(){this.hasMultipleWorkspaces()?this.docOpenedHandler||(this.docOpenedHandler=this.documentManager.onDidOpenTextDocument(this.onDocOpened,this)):this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}onWorkspaceFoldersChanged(){const e=this.workspaceService.workspaceFolders.map(e=>this.getWorkspaceKey(e.uri)),t=Array.from(this.activatedWorkspaces.keys()).filter(t=>e.indexOf(t)<0);if(t.length>0)for(const e of t)this.activatedWorkspaces.delete(e);this.addRemoveDocOpenedHandlers()}hasMultipleWorkspaces(){return this.workspaceService.hasWorkspaceFolders&&this.workspaceService.workspaceFolders.length>1}getWorkspaceKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}};r([p.traceDecoratorError("Failed to activate a workspace")],f.prototype,"activateWorkspace",null),f=r([o.injectable(),i(0,o.multiInject(h.IExtensionActivationService)),i(1,o.multiInject(h.IExtensionSingleActivationService)),i(2,o.inject(s.IDocumentManager)),i(3,o.inject(l.IInterpreterAutoSelectionService)),i(4,o.inject(s.IWorkspaceService)),i(5,o.inject(c.IFileSystem)),i(6,o.inject(s.IActiveResourceService)),i(7,o.inject(u.IInterpreterPathService))],f),t.ExtensionActivationManager=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.isObject=t.isString=t.isArray=void 0;const r="number",i="string",o="object";t.isArray=function(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==r||e.constructor!==Array)},t.isString=function(e){return typeof e===i||e instanceof String},t.isObject=function(e){return!(typeof e!==o||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)},t.isNumber=function(e){return(typeof e===r||e instanceof Number)&&!isNaN(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(6),i=n(307),o=n(308),s=n(310),a=n(311),c=n(312),u=n(326),l=n(327),p=n(82);t.registerTypes=function(e){e.addSingleton(p.IModuleInstaller,o.CondaInstaller),e.addSingleton(p.IModuleInstaller,a.PipInstaller),e.addSingleton(p.IModuleInstaller,s.PipEnvInstaller),e.addSingleton(p.IModuleInstaller,c.PoetryInstaller),e.addSingleton(p.IInstallationChannelManager,i.InstallationChannelManager),e.addSingleton(p.IProductService,l.ProductService),e.addSingleton(p.IProductPathService,u.DataScienceProductPathService,r.ProductType.DataScience)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallationChannelManager=void 0;const o=n(1),s=n(12),a=n(18),c=n(26),u=n(7),l=n(13),p=n(52),d=n(31),h=n(161),f=n(82);let v=class{constructor(e){this.serviceContainer=e}async getInstallationChannel(e,t){const n=await this.getInstallationChannels(t);if(1===n.length)return n[0];const r=h.ProductNames.get(e),i=this.serviceContainer.get(u.IApplicationShell);if(0===n.length)return void await this.showNoInstallersMessage(d.isResource(t)?t:void 0);const o="Select an option to install "+r,s=n.map(e=>({label:"Install using "+e.displayName,description:"",installer:e})),a=await i.showQuickPick(s,{matchOnDescription:!0,matchOnDetail:!0,placeHolder:o});return a?a.installer:void 0}async getInstallationChannels(e){const t=this.serviceContainer.getAll(f.IModuleInstaller),n=[];if(0===t.length)return[];t.sort((e,t)=>t.priority-e.priority);let r=t[0].priority;for(const i of t){if(i.priority!==r){if(n.length>0)break;r=i.priority}await i.isSupported(e)&&n.push(i)}return n}async showNoInstallersMessage(e){const t=this.serviceContainer.get(s.IInterpreterService),n=await t.getActiveInterpreter(e);if(!n)return;const r=this.serviceContainer.get(u.IApplicationShell);let i;if(i=n.envType===c.EnvironmentType.Conda?await r.showErrorMessage(p.Installer.noCondaOrPipInstaller(),p.Installer.searchForHelp()):await r.showErrorMessage(p.Installer.noPipInstaller(),p.Installer.searchForHelp()),"Search for help"===i){const e=this.serviceContainer.get(l.IPlatformService),t=e.isWindows?"Windows":e.isMac?"MacOS":"Linux";r.openUrl(`https://www.bing.com/search?q=Install Pip ${t} ${n.envType===c.EnvironmentType.Conda?"Conda":""}`)}}};v=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],v),t.InstallationChannelManager=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInstaller=void 0;const o=n(1),s=n(12),a=n(18),c=n(26),u=n(6),l=n(31),p=n(112),d=n(82);let h=class extends p.ModuleInstaller{constructor(e){super(e)}get name(){return"Conda"}get displayName(){return"Conda"}get type(){return c.ModuleInstallerType.Conda}get priority(){return 0}async isSupported(e){if(!1===this._isCondaAvailable)return!1;const t=this.serviceContainer.get(s.ICondaService);return this._isCondaAvailable=await t.isCondaAvailable(),!!this._isCondaAvailable&&this.isCurrentEnvironmentACondaEnvironment(e)}async getExecutionInfo(e,t,n=0){const r=this.serviceContainer.get(s.ICondaService),i=await r.getCondaFile(),o=l.isResource(t)?this.serviceContainer.get(u.IConfigurationService).getSettings(t).pythonPath:t.path,a=this.serviceContainer.get(s.IComponentAdapter),c=await a.getCondaEnvironment(o),h=[n&d.ModuleInstallFlags.upgrade?"update":"install"];return[u.Product.tensorboard,u.Product.ipykernel,u.Product.pandas,u.Product.nbconvert,u.Product.jupyter,u.Product.notebook].map(p.translateProductToModule).includes(e)&&h.push("-c","conda-forge"),c&&c.name?(h.push("--name"),h.push(c.name.toCommandArgument())):c&&c.path&&(h.push("--prefix"),h.push(c.path.fileToCommandArgument())),n&d.ModuleInstallFlags.updateDependencies&&h.push("--update-deps"),n&d.ModuleInstallFlags.reInstall&&h.push("--force-reinstall"),h.push(e),h.push("-y"),{args:h,execPath:i}}async isCurrentEnvironmentACondaEnvironment(e){const t=this.serviceContainer.get(s.IComponentAdapter),n=l.isResource(e)?this.serviceContainer.get(u.IConfigurationService).getSettings(e).pythonPath:e.path;return t.isCondaEnvironment(n)}};h=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],h),t.CondaInstaller=h},function(e,t){e.exports=require("./node_modules/sudo-prompt")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvInstaller=t.pipenvName=void 0;const o=n(1),s=n(12),a=n(18),c=n(83),u=n(26),l=n(7),p=n(31),d=n(112),h=n(82);t.pipenvName="pipenv";let f=class extends d.ModuleInstaller{get name(){return"pipenv"}get type(){return u.ModuleInstallerType.Pipenv}get displayName(){return t.pipenvName}get priority(){return 10}constructor(e){super(e)}async isSupported(e){if(p.isResource(e)){const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e),n=e?this.serviceContainer.get(l.IWorkspaceService).getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==u.EnvironmentType.Pipenv)&&c.isPipenvEnvironmentRelatedToFolder(t.path,n.uri.fsPath)}return e.envType===u.EnvironmentType.Pipenv}async getExecutionInfo(e,n,r=0){const i=[r&h.ModuleInstallFlags.reInstall||r&h.ModuleInstallFlags.updateDependencies||r&h.ModuleInstallFlags.upgrade?"update":"install",e,"--dev"];return"black"===e&&i.push("--pre"),{args:i,execPath:t.pipenvName}}};f=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],f),t.PipEnvInstaller=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipInstaller=void 0;const o=n(1),s=n(18),a=n(26),c=n(7),u=n(40),l=n(31),p=n(112),d=n(82);let h=class extends p.ModuleInstaller{get name(){return"Pip"}get type(){return a.ModuleInstallerType.Pip}get displayName(){return"Pip"}get priority(){return 0}constructor(e){super(e)}isSupported(e){return this.isPipAvailable(e)}async getExecutionInfo(e,t,n=0){const r=[],i=this.serviceContainer.get(c.IWorkspaceService).getConfiguration("http").get("proxy","");return i.length>0&&(r.push("--proxy"),r.push(i)),r.push("install","-U"),n&d.ModuleInstallFlags.reInstall&&r.push("--force-reinstall"),{args:[...r,e],moduleName:"pip"}}isPipAvailable(e){const t=this.serviceContainer.get(u.IPythonExecutionFactory),n=l.isResource(e)?e:void 0,r=l.isResource(e)?void 0:e.path;return t.create({resource:n,pythonPath:r}).then(e=>e.isModuleInstalled("pip")).catch(()=>!1)}};h=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],h),t.PipInstaller=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryInstaller=t.poetryName=void 0;const o=n(1),s=n(12),a=n(18),c=n(162),u=n(26),l=n(7),p=n(6),d=n(31),h=n(112);t.poetryName="poetry";let f=class extends h.ModuleInstaller{constructor(e,t,n){super(e),this.workspaceService=t,this.configurationService=n}get name(){return"poetry"}get type(){return u.ModuleInstallerType.Poetry}get displayName(){return t.poetryName}get priority(){return 10}async isSupported(e){if(!e)return!1;if(!d.isResource(e))return!1;const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e),n=e?this.workspaceService.getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==u.EnvironmentType.Poetry)&&c.isPoetryEnvironmentRelatedToFolder(t.path,n.uri.fsPath,this.configurationService.getSettings(e).poetryPath)}async getExecutionInfo(e,t){const n=this.configurationService.getSettings(d.isResource(t)?t:void 0).poetryPath,r=["add","--dev",e];return"black"===e&&r.push("--allow-prereleases"),{args:r,execPath:n}}};f=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(l.IWorkspaceService)),i(2,o.inject(p.IConfigurationService))],f),t.PoetryInstaller=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verboseRegExp=void 0,t.verboseRegExp=function(e,t){return e=(e=e.replace(/(^| {2})# .*$/gm,"")).replace(/\s+?/g,""),RegExp(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readRegistryKeys=t.readRegistryValues=t.REG_SZ=t.HKLM=t.HKCU=void 0;const r=n(85);Object.defineProperty(t,"HKCU",{enumerable:!0,get:function(){return r.HKCU}}),Object.defineProperty(t,"HKLM",{enumerable:!0,get:function(){return r.HKLM}}),Object.defineProperty(t,"REG_SZ",{enumerable:!0,get:function(){return r.REG_SZ}});const i=n(11);t.readRegistryValues=async function(e){const t=new(n(85))(e),r=i.createDeferred();return t.values((e,t)=>{e&&r.reject(e),r.resolve(t)}),r.promise},t.readRegistryKeys=async function(e){const t=new(n(85))(e),r=i.createDeferred();return t.keys((e,t)=>{e&&r.reject(e),r.resolve(t)}),r.promise}},function(e,t,n){var r=n(202),i=n(316),o=n(318),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,u,l,p,d,h,f=0,v=!1,y=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=c,r=u;return c=u=void 0,f=t,p=e.apply(r,n)}function _(e){return f=e,d=setTimeout(E,t),v?m(e):p}function b(e){var n=e-h;return void 0===h||n>=t||n<0||y&&e-f>=l}function E(){var e=i();if(b(e))return S(e);d=setTimeout(E,function(e){var n=t-(e-h);return y?a(n,l-(e-f)):n}(e))}function S(e){return d=void 0,g&&c?m(e):(c=u=void 0,p)}function w(){var e=i(),n=b(e);if(c=arguments,u=this,h=e,n){if(void 0===d)return _(h);if(y)return clearTimeout(d),d=setTimeout(E,t),m(h)}return void 0===d&&(d=setTimeout(E,t)),p}return t=o(t)||0,r(n)&&(v=!!n.leading,l=(y="maxWait"in n)?s(o(n.maxWait)||0,t):l,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=h=u=d=void 0},w.flush=function(){return void 0===d?p:S(i())},w}},function(e,t,n){var r=n(203);e.exports=function(){return r.Date.now()}},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t,n){var r=n(319),i=n(202),o=n(321),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},function(e,t,n){var r=n(320),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},function(e,t){var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},function(e,t,n){var r=n(322),i=n(325);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(204),i=n(323),o=n(324),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(204),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceProductPathService=t.BaseProductPathsService=void 0;const o=n(1),s=n(0),a=n(18),c=n(6);let u=class{constructor(e){this.serviceContainer=e,this.configService=e.get(c.IConfigurationService),this.productInstaller=e.get(c.IInstaller)}isExecutableAModule(e,t){let n;try{n=this.productInstaller.translateProductToModuleName(e)}catch(e){}const r=this.getExecutableNameFromSettings(e,t);return"string"==typeof n&&n.length>0&&s.basename(r)===r}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.BaseProductPathsService=u;let l=class extends u{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e)}};l=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],l),t.DataScienceProductPathService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductService=void 0;const i=n(1),o=n(6);let s=class{constructor(){this.ProductTypes=new Map,this.ProductTypes.set(o.Product.jupyter,o.ProductType.DataScience),this.ProductTypes.set(o.Product.notebook,o.ProductType.DataScience),this.ProductTypes.set(o.Product.ipykernel,o.ProductType.DataScience),this.ProductTypes.set(o.Product.nbconvert,o.ProductType.DataScience),this.ProductTypes.set(o.Product.kernelspec,o.ProductType.DataScience),this.ProductTypes.set(o.Product.pandas,o.ProductType.DataScience),this.ProductTypes.set(o.Product.tensorboard,o.ProductType.DataScience),this.ProductTypes.set(o.Product.torchProfilerInstallName,o.ProductType.DataScience),this.ProductTypes.set(o.Product.torchProfilerImportName,o.ProductType.DataScience)}getProductType(e){return this.ProductTypes.get(e)}};s=r([i.injectable()],s),t.ProductService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ReplProvider=void 0;const i=n(7),o=n(17),s=n(21),a=n(22),c=n(136);class u{constructor(e){this.serviceContainer=e,this.disposables=[],this.activeResourceService=this.serviceContainer.get(i.IActiveResourceService),this.registerCommand()}dispose(){this.disposables.forEach(e=>e.dispose())}registerCommand(){const e=this.serviceContainer.get(i.ICommandManager).registerCommand(o.Commands.Start_REPL,this.commandHandler,this);this.disposables.push(e)}async commandHandler(){const e=this.activeResourceService.getActiveResource(),t=this.serviceContainer.get(c.ICodeExecutionService,"repl");await t.initializeRepl(e)}}r([s.captureTelemetry(a.EventName.REPL)],u.prototype,"commandHandler",null),t.ReplProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalProvider=void 0;const i=n(7),o=n(17),s=n(20),a=n(6),c=n(86),u=n(21),l=n(22);class p{constructor(e){this.serviceContainer=e,this.disposables=[],this.registerCommands(),this.activeResourceService=this.serviceContainer.get(i.IActiveResourceService)}async initialize(e){const t=this.serviceContainer.get(a.IConfigurationService).getSettings(this.activeResourceService.getActiveResource());if(e&&t.terminal.activateEnvInCurrentTerminal){const t="hideFromUser"in e.creationOptions&&e.creationOptions.hideFromUser;if(!t){const t=this.serviceContainer.get(s.ITerminalActivator);await t.activateEnvironmentInTerminal(e,{preserveFocus:!0})}u.sendTelemetryEvent(l.EventName.ACTIVATE_ENV_IN_CURRENT_TERMINAL,void 0,{isTerminalVisible:!t})}}dispose(){this.disposables.forEach(e=>e.dispose())}registerCommands(){const e=this.serviceContainer.get(i.ICommandManager).registerCommand(o.Commands.Create_Terminal,this.onCreateTerminal,this);this.disposables.push(e)}async onCreateTerminal(){const e=this.serviceContainer.get(s.ITerminalServiceFactory),t=this.activeResourceService.getActiveResource();await e.createTerminalService(t,"Python").show(!1)}}r([c.swallowExceptions("Failed to initialize terminal provider")],p.prototype,"initialize",null),r([u.captureTelemetry(l.EventName.TERMINAL_CREATE,{triggeredBy:"commandpalette"})],p.prototype,"onCreateTerminal",null),t.TerminalProvider=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(331),i=n(332),o=n(335),s=n(337),a=n(166),c=n(136);t.registerTypes=function(e){e.addSingleton(c.ICodeExecutionHelper,o.CodeExecutionHelper),e.addSingleton(c.ICodeExecutionManager,r.CodeExecutionManager),e.addSingleton(c.ICodeExecutionService,i.DjangoShellCodeExecutionProvider,"djangoShell"),e.addSingleton(c.ICodeExecutionService,a.TerminalCodeExecutionProvider,"standard"),e.addSingleton(c.ICodeExecutionService,s.ReplProvider,"repl")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionManager=void 0;const o=n(1),s=n(5),a=n(7),c=n(17);n(14);const u=n(13),l=n(6),p=n(31),d=n(18),h=n(4),f=n(21),v=n(22),y=n(136);let g=class{constructor(e,t,n,r){this.commandManager=e,this.disposableRegistry=t,this.fileSystem=n,this.serviceContainer=r,this.eventEmitter=new s.EventEmitter}get onExecutedCode(){return this.eventEmitter.event}registerCommands(){[c.Commands.Exec_In_Terminal,c.Commands.Exec_In_Terminal_Icon].forEach(e=>{this.disposableRegistry.push(this.commandManager.registerCommand(e,async t=>{const n=e===c.Commands.Exec_In_Terminal?"command":"icon";await this.executeFileInTerminal(t,n).catch(e=>h.traceError("Failed to execute file in terminal",e))}))})}async executeFileInTerminal(e,t){f.sendTelemetryEvent(v.EventName.EXECUTION_CODE,void 0,{scope:"file",trigger:t});const n=this.serviceContainer.get(y.ICodeExecutionHelper),r=(e=e instanceof s.Uri?e:void 0)||await n.getFileToExecute();if(!r)return;await n.saveFileIfDirty(r);try{const e=await this.fileSystem.readFile(r.fsPath);this.eventEmitter.fire(e)}catch(e){p.noop()}const i=this.serviceContainer.get(y.ICodeExecutionService,"standard");await i.executeFile(r)}};g=r([o.injectable(),i(0,o.inject(a.ICommandManager)),i(1,o.inject(l.IDisposableRegistry)),i(2,o.inject(u.IFileSystem)),i(3,o.inject(d.IServiceContainer))],g),t.CodeExecutionManager=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoShellCodeExecutionProvider=void 0;const o=n(1),s=n(0),a=n(7);n(14);const c=n(13),u=n(20),l=n(6),p=n(72),d=n(333),h=n(166);let f=class extends h.TerminalCodeExecutionProvider{constructor(e,t,n,r,i,o,s,a){super(e,t,n,a,i),this.terminalTitle="Django Shell",a.push(new d.DjangoContextInitializer(r,n,s,o))}async getExecutableInfo(e,t=[]){const n=await super.getExecutableInfo(e,t),r=e?this.workspace.getWorkspaceFolder(e):void 0,i=Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders[0].uri.fsPath:"",o=r?r.uri.fsPath:i,a=0===o.length?"manage.py":s.join(o,"manage.py");return p.copyPythonExecInfo(n,[a.fileToCommandArgument(),"shell"])}async getExecuteFileArgs(e,t=[]){const n=await super.getExecutableInfo(e);return p.copyPythonExecInfo(n,t)}};f=r([o.injectable(),i(0,o.inject(u.ITerminalServiceFactory)),i(1,o.inject(l.IConfigurationService)),i(2,o.inject(a.IWorkspaceService)),i(3,o.inject(a.IDocumentManager)),i(4,o.inject(c.IPlatformService)),i(5,o.inject(a.ICommandManager)),i(6,o.inject(c.IFileSystem)),i(7,o.inject(l.IDisposableRegistry))],f),t.DjangoShellCodeExecutionProvider=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoContextInitializer=void 0;const i=n(1),o=n(0),s=n(334),a=n(4);let c=class{constructor(e,t,n,r){this.documentManager=e,this.workpaceService=t,this.fileSystem=n,this.monitoringActiveTextEditor=!1,this.workspaceContextKeyValues=new Map,this.lastCheckedWorkspace="",this.disposables=[],this.isDjangoProject=new s.ContextKey("python.isDjangoProject",r),this.ensureContextStateIsSet().catch(e=>a.traceError("Python Extension: ensureState",e)),this.disposables.push(this.workpaceService.onDidChangeWorkspaceFolders(()=>this.updateContextKeyBasedOnActiveWorkspace()))}dispose(){this.disposables.forEach(e=>e.dispose())}updateContextKeyBasedOnActiveWorkspace(){this.monitoringActiveTextEditor||(this.monitoringActiveTextEditor=!0,this.disposables.push(this.documentManager.onDidChangeActiveTextEditor(()=>this.ensureContextStateIsSet())))}getActiveWorkspace(){if(!Array.isArray(this.workpaceService.workspaceFolders)||0===this.workpaceService.workspaceFolders.length)return;if(1===this.workpaceService.workspaceFolders.length)return this.workpaceService.workspaceFolders[0].uri.fsPath;const e=this.documentManager.activeTextEditor;if(!e)return;const t=this.workpaceService.getWorkspaceFolder(e.document.uri);return t?t.uri.fsPath:void 0}async ensureContextStateIsSet(){const e=this.getActiveWorkspace();if(!e)return this.isDjangoProject.set(!1);if(this.lastCheckedWorkspace!==e)if(this.workspaceContextKeyValues.has(e))await this.isDjangoProject.set(this.workspaceContextKeyValues.get(e));else{const t=await this.fileSystem.fileExists(o.join(e,"manage.py"));await this.isDjangoProject.set(t),this.workspaceContextKeyValues.set(e,t),this.lastCheckedWorkspace=e}}};c=r([i.injectable()],c),t.DjangoContextInitializer=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKey=void 0;t.ContextKey=class{constructor(e,t){this.name=e,this.commandManager=t}get value(){return this.lastValue}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionHelper=void 0,n(14);const o=n(1),s=n(5),a=n(7),c=n(17),u=n(113),l=n(40),p=n(11),d=n(12),h=n(18),f=n(4);let v=class{constructor(e){this.documentManager=e.get(a.IDocumentManager),this.applicationShell=e.get(a.IApplicationShell),this.processServiceFactory=e.get(l.IProcessServiceFactory),this.interpreterService=e.get(d.IInterpreterService)}async normalizeLines(e,t){var n,r,i,o;try{if(0===e.trim().length)return"";e=e.replace(new RegExp("\\r","g"),"");const s=await this.interpreterService.getActiveInterpreter(t),a=await this.processServiceFactory.create(t),[c,l]=u.normalizeSelection(),d=a.execObservable((null==s?void 0:s.path)||"python",c,{throwOnStdErr:!0}),h=p.createDeferred();let f="";d.out.subscribe({next:e=>{"stdout"===e.source&&(f+=e.out)},complete:()=>{h.resolve(f)}});const v=JSON.stringify({code:e});null===(r=null===(n=d.proc)||void 0===n?void 0:n.stdin)||void 0===r||r.write(v),null===(o=null===(i=d.proc)||void 0===i?void 0:i.stdin)||void 0===o||o.end();const y=await h.promise;return l(JSON.parse(y).normalized)}catch(t){return f.traceError(t,"Python: Failed to normalize code for execution in terminal"),e}}async getFileToExecute(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage("The active file needs to be saved before it can be run");else{if(e.document.languageId===c.PYTHON_LANGUAGE)return e.document.isDirty&&await e.document.save(),e.document.uri;this.applicationShell.showErrorMessage("The active file is not a Python source file")}else this.applicationShell.showErrorMessage("No open file to run in terminal")}async getSelectedTextToExecute(e){if(!e)return;const{selection:t}=e;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?function(e){const{selection:t}=e,n=new s.Range(t.start,t.end),r=e.document.getText(n),i=e.document.lineAt(t.start.line).text;if(r.trim()===i.trim())return i;return r}(e):function(e){const{selection:t}=e,n=new s.Range(t.start,t.end),r=e.document.getText(n),i=new s.Range(new s.Position(t.start.line,0),new s.Position(t.end.line,e.document.lineAt(t.end.line).text.length)),o=e.document.getText(i);if(r.trim()===o.trim())return o;const a=e.document.lineAt(t.start.line).text,c=new s.Range(t.start,new s.Position(t.start.line,a.length)),u=e.document.getText(c);if(u.trimLeft()===a.trimLeft())return a+r.substr(u.length);return r}(e),n}async saveFileIfDirty(e){const t=this.documentManager.textDocuments.filter(t=>t.uri.path===e.path);1===t.length&&t[0].isDirty&&await t[0].save()}};v=r([o.injectable(),i(0,o.inject(h.IServiceContainer))],v),t.CodeExecutionHelper=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unittestDiscovery=t.runAdapter=void 0;const r=n(0),i=n(167),o=r.join(i._SCRIPTS_DIR,"testing_tools");t.runAdapter=function(e){return[r.join(o,"run_adapter.py"),...e]},t.unittestDiscovery=function(e){return[r.join(o,"unittest_discovery.py"),...e]}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReplProvider=void 0;const o=n(1),s=n(7),a=n(13),c=n(20),u=n(6),l=n(166);let p=class extends l.TerminalCodeExecutionProvider{constructor(e,t,n,r,i){super(e,t,n,r,i),this.terminalTitle="REPL"}};p=r([o.injectable(),i(0,o.inject(c.ITerminalServiceFactory)),i(1,o.inject(u.IConfigurationService)),i(2,o.inject(s.IWorkspaceService)),i(3,o.inject(u.IDisposableRegistry)),i(4,o.inject(a.IPlatformService))],p),t.ReplProvider=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=t.registerInterpreterTypes=void 0;const r=n(111),i=n(339),o=n(205),s=n(340),a=n(341),c=n(81),u=n(206),l=n(342),p=n(343),d=n(138),h=n(12),f=n(347),v=n(348),y=n(349),g=n(350);function m(e){e.addSingleton(r.IExtensionActivationService,g.VirtualEnvironmentPrompt),e.addSingleton(h.IInterpreterService,v.InterpreterService),e.addSingleton(d.IPythonPathUpdaterServiceFactory,p.PythonPathUpdaterServiceFactory),e.addSingleton(d.IPythonPathUpdaterServiceManager,l.PythonPathUpdaterService),e.addSingleton(h.IInterpreterHelper,f.InterpreterHelper),e.addSingleton(d.IInterpreterComparer,u.EnvironmentTypeComparer),e.addSingleton(c.IInterpreterAutoSelectionService,s.InterpreterAutoSelectionService),e.addSingleton(r.IExtensionActivationService,y.CondaInheritEnvPrompt)}t.registerInterpreterTypes=m,t.registerTypes=function(e){m(e),e.addSingleton(c.IInterpreterAutoSelectionProxyService,a.InterpreterAutoSelectionProxyService),e.addSingleton(i.EnvironmentActivationService,i.EnvironmentActivationService),e.addSingleton(o.IEnvironmentActivationService,i.EnvironmentActivationService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentActivationService=t.EnvironmentActivationServiceCache=void 0,n(14);const o=n(1),s=n(7),a=n(17),c=n(13),u=n(113),l=n(40),p=n(20),d=n(6),h=n(11),f=n(164),v=n(9),y=n(137),g=n(21),m=n(22),_=n(12),b=n(196),E=n(4),S="e8b39361-0157-4923-80e1-22d70d46dee6",w={[v.OSType.Windows]:{shell:"cmd",shellType:p.TerminalShellType.commandPrompt},[v.OSType.OSX]:{shell:"bash",shellType:p.TerminalShellType.bash},[v.OSType.Linux]:{shell:"bash",shellType:p.TerminalShellType.bash},[v.OSType.Unknown]:void 0},T=["The process cannot access the file because it is being used by another process","The directory is not empty"];class P{constructor(){this.normalMap=new Map}static forceUseStatic(){P.useStatic=!0}static forceUseNormal(){P.useStatic=!1}get(e){return P.useStatic?P.staticMap.get(e):this.normalMap.get(e)}set(e,t){P.useStatic?P.staticMap.set(e,t):this.normalMap.set(e,t)}delete(e){P.useStatic?P.staticMap.delete(e):this.normalMap.delete(e)}clear(){P.useStatic||this.normalMap.clear()}}t.EnvironmentActivationServiceCache=P,P.useStatic=!1,P.staticMap=new Map;let I=class{constructor(e,t,n,r,i,o,s){this.helper=e,this.platform=t,this.processServiceFactory=n,this.currentProcess=r,this.workspace=i,this.interpreterService=o,this.envVarsService=s,this.disposables=[],this.activatedEnvVariablesCache=new P,this.envVarsService.onDidEnvironmentVariablesChange(()=>this.activatedEnvVariablesCache.clear(),this,this.disposables),this.interpreterService.onDidChangeInterpreter(()=>this.activatedEnvVariablesCache.clear(),this,this.disposables)}dispose(){this.disposables.forEach(e=>e.dispose())}async getActivatedEnvironmentVariables(e,t,n){var r;const i=`${this.workspace.getWorkspaceFolderIdentifier(e)}_${this.platform.isWindows?null==t?void 0:t.path.toLowerCase():null==t?void 0:t.path}`;if(null===(r=this.activatedEnvVariablesCache.get(i))||void 0===r?void 0:r.hasData)return this.activatedEnvVariablesCache.get(i).data;const o=new f.InMemoryCache(6e5);return this.getActivatedEnvironmentVariablesImpl(e,t,n).then(e=>(o.data=e,this.activatedEnvVariablesCache.set(i,o),e))}async getActivatedEnvironmentVariablesImpl(e,t,n){const r=w[this.platform.osType];if(!r)return;let i=!1;try{const n=await this.helper.getEnvironmentActivationShellCommands(e,r.shellType,t);if(E.traceVerbose(`Activation Commands received ${n} for shell ${r.shell}`),!n||!Array.isArray(n)||0===n.length)return;i=n.join(" ").toLowerCase().includes("conda");const o=this.fixActivationCommands(n).join(" && "),s=await this.processServiceFactory.create(e),c=await this.envVarsService.getEnvironmentVariables(e),l=Object.keys(c).length,p=l?c:{...this.currentProcess.env},d=p[a.PYTHON_WARNINGS];p[a.PYTHON_WARNINGS]="ignore",E.traceVerbose((l?"Has":"No")+" Custom Env Vars");const[f,v]=u.printEnvVariables();f.forEach((e,t)=>{f[t]=e.toCommandArgument()});const y=`${o} && echo '${S}' && python ${f.join(" ")}`;let g;E.traceVerbose("Activating Environment to capture Environment variables, "+y);let m,_=1;for(;!g;)try{g=await s.shellExec(y,{env:p,shell:r.shell,timeout:6e4,maxBuffer:1e6,throwOnStdErr:!1});try{m=this.parseEnvironmentOutput(g.stdout,v)}catch(e){if(!g.stderr)throw e}if(g.stderr){if(!m)throw new Error(`StdErr from ShellExec, ${g.stderr} for ${y}`);E.traceWarn("Got env variables but with errors",g.stderr)}}catch(e){const t=e.toString();if(!(T.find(e=>t.includes(e))&&_<10))throw e;E.traceInfo("Conda is busy, attempting to retry ..."),g=void 0,_+=1,await h.sleep(500)}return d&&m?m[a.PYTHON_WARNINGS]=d:m&&delete m[a.PYTHON_WARNINGS],m}catch(e){if(E.traceError("getActivatedEnvironmentVariables",e),g.sendTelemetryEvent(m.EventName.ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED,void 0,{isPossiblyCondaEnv:i,terminal:r.shellType}),n)throw e}}fixActivationCommands(e){return e.map(e=>e.replace(/^source\s+/,". "))}parseEnvironmentOutput(e,t){return t((e=e.substring(e.indexOf(S)+S.length)).substring(e.indexOf("{")).trim())}};r([E.traceDecoratorVerbose("getActivatedEnvironmentVariables",b.TraceOptions.Arguments),g.captureTelemetry(m.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,{failed:!1},!0)],I.prototype,"getActivatedEnvironmentVariables",null),r([E.traceDecoratorError("Failed to parse Environment variables"),E.traceDecoratorVerbose("parseEnvironmentOutput",b.TraceOptions.None)],I.prototype,"parseEnvironmentOutput",null),I=r([o.injectable(),i(0,o.inject(p.ITerminalHelper)),i(1,o.inject(c.IPlatformService)),i(2,o.inject(l.IProcessServiceFactory)),i(3,o.inject(d.ICurrentProcess)),i(4,o.inject(s.IWorkspaceService)),i(5,o.inject(_.IInterpreterService)),i(6,o.inject(y.IEnvironmentVariablesProvider))],I),t.EnvironmentActivationService=I},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterAutoSelectionService=void 0;const o=n(1),s=n(5),a=n(7);n(14);const c=n(13),u=n(6),l=n(11),p=n(53),d=n(21),h=n(22),f=n(206),v=n(138),y=n(12),g=n(81);let m=class{constructor(e,t,n,r,i,o,a){this.workspaceService=e,this.stateFactory=t,this.fs=n,this.interpreterService=r,this.envTypeComparer=i,this.interpreterHelper=a,this.autoSelectedWorkspacePromises=new Map,this.didAutoSelectedInterpreterEmitter=new s.EventEmitter,this.autoSelectedInterpreterByWorkspace=new Map,this.globallyPreferredInterpreter=this.stateFactory.createGlobalPersistentState("preferredGlobalPyInterpreter",void 0),o.registerInstance(this)}async autoSelectInterpreter(e){const t=this.getWorkspacePathKey(e),n=this.autoSelectedWorkspacePromises.has(t);if(!n){const n=l.createDeferred();this.autoSelectedWorkspacePromises.set(t,n),await this.initializeStore(e),await this.clearWorkspaceStoreIfInvalid(e),await this.autoselectInterpreterWithLocators(e),n.resolve()}return d.sendTelemetryEvent(h.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,void 0,{useCachedInterpreter:n}),this.autoSelectedWorkspacePromises.get(t).promise}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){const t=this.getWorkspaceState(e);if(t&&t.value)return t.value;const n=this.getWorkspacePathKey(e);return this.autoSelectedInterpreterByWorkspace.has(n)?this.autoSelectedInterpreterByWorkspace.get(n):this.globallyPreferredInterpreter.value}async setWorkspaceInterpreter(e,t){await this.storeAutoSelectedInterpreter(e,t)}async setGlobalInterpreter(e){await this.storeAutoSelectedInterpreter(void 0,e)}async clearWorkspaceStoreIfInvalid(e){const t=this.getWorkspaceState(e);t&&t.value&&!await this.fs.fileExists(t.value.path)&&await t.updateValue(void 0)}async storeAutoSelectedInterpreter(e,t){const n=this.getWorkspacePathKey(e);if(""===n){if(this.globallyPreferredInterpreter.value&&this.globallyPreferredInterpreter.value.version&&t&&t.version&&p.compareSemVerLikeVersions(this.globallyPreferredInterpreter.value.version,t.version)>0)return;await this.globallyPreferredInterpreter.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}else{const r=this.getWorkspaceState(e);r&&t&&await r.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}}async initializeStore(e){const t=this.getWorkspacePathKey(e);this.autoSelectedInterpreterByWorkspace.delete(t),this.globallyPreferredInterpreter||await this.clearStoreIfFileIsInvalid()}async clearStoreIfFileIsInvalid(){this.globallyPreferredInterpreter=this.stateFactory.createGlobalPersistentState("preferredGlobalPyInterpreter",void 0),this.globallyPreferredInterpreter.value&&!await this.fs.fileExists(this.globallyPreferredInterpreter.value.path)&&await this.globallyPreferredInterpreter.updateValue(void 0)}getWorkspacePathKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}getWorkspaceState(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e);if(t){const e="autoSelectedWorkspacePythonInterpreter-"+t.folderUri.fsPath;return this.stateFactory.createWorkspacePersistentState(e,void 0)}}getAutoSelectionInterpretersQueryState(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e),n="autoSelectionInterpretersQueried-"+((null==t?void 0:t.folderUri.fsPath)||"global");return this.stateFactory.createWorkspacePersistentState(n,void 0)}async autoselectInterpreterWithLocators(e){const t=this.getAutoSelectionInterpretersQueryState(e);!0!==t.value&&e&&await this.interpreterService.triggerRefresh({searchLocations:{roots:[e],doNotIncludeNonRooted:!0}});const n=await this.interpreterService.getAllInterpreters(e),r=this.interpreterHelper.getActiveWorkspaceUri(e),i=n.filter(e=>f.getEnvTypeHeuristic(e,(null==r?void 0:r.folderUri.fsPath)||"")!==f.EnvTypeHeuristic.Global);i.sort(this.envTypeComparer.compare.bind(this.envTypeComparer)),r?this.setWorkspaceInterpreter(r.folderUri,i[0]):this.setGlobalInterpreter(i[0]),t.updateValue(!0),this.didAutoSelectedInterpreterEmitter.fire()}};m=r([o.injectable(),i(0,o.inject(a.IWorkspaceService)),i(1,o.inject(u.IPersistentStateFactory)),i(2,o.inject(c.IFileSystem)),i(3,o.inject(y.IInterpreterService)),i(4,o.inject(v.IInterpreterComparer)),i(5,o.inject(g.IInterpreterAutoSelectionProxyService)),i(6,o.inject(y.IInterpreterHelper))],m),t.InterpreterAutoSelectionService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterAutoSelectionProxyService=void 0;const o=n(1),s=n(5),a=n(6);let c=class{constructor(e){this.disposables=e,this.didAutoSelectedInterpreterEmitter=new s.EventEmitter}registerInstance(e){this.instance=e,this.disposables.push(this.instance.onDidChangeAutoSelectedInterpreter(()=>this.didAutoSelectedInterpreterEmitter.fire()))}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){return this.instance?this.instance.getAutoSelectedInterpreter(e):void 0}async setWorkspaceInterpreter(e,t){return this.instance?this.instance.setWorkspaceInterpreter(e,t):void 0}};c=r([o.injectable(),i(0,o.inject(a.IDisposableRegistry))],c),t.InterpreterAutoSelectionProxyService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathUpdaterService=void 0;const o=n(1),s=n(0),a=n(5),c=n(64),u=n(4),l=n(21),p=n(22),d=n(12),h=n(138);let f=class{constructor(e,t){this.pythonPathSettingsUpdaterFactory=e,this.pyenvs=t}async updatePythonPath(e,t,n,r){const i=new c.StopWatch,o=this.getPythonUpdaterService(t,r);let l=!1;try{await o.updatePythonPath(e?s.normalize(e):void 0)}catch(e){l=!0;const t=e&&"string"==typeof e.message?e.message:"";a.window.showErrorMessage("Failed to set 'pythonPath'. Error: "+t),u.traceError(e)}this.sendTelemetry(i.elapsedTime,l,n,e).catch(e=>u.traceError("Python Extension: sendTelemetry",e))}async sendTelemetry(e,t,n,r){var i;const o={failed:t,trigger:n};if(!t&&r){const e=await this.pyenvs.getInterpreterInformation(r);e&&(o.pythonVersion=null===(i=e.version)||void 0===i?void 0:i.raw)}l.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER,e,o)}getPythonUpdaterService(e,t){switch(e){case a.ConfigurationTarget.Global:return this.pythonPathSettingsUpdaterFactory.getGlobalPythonPathConfigurationService();case a.ConfigurationTarget.Workspace:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspacePythonPathConfigurationService(t);default:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspaceFolderPythonPathConfigurationService(t)}}};f=r([o.injectable(),i(0,o.inject(h.IPythonPathUpdaterServiceFactory)),i(1,o.inject(d.IComponentAdapter))],f),t.PythonPathUpdaterService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathUpdaterServiceFactory=void 0;const o=n(1),s=n(7),a=n(6),c=n(18),u=n(344),l=n(345),p=n(346);let d=class{constructor(e){this.workspaceService=e.get(s.IWorkspaceService),this.interpreterPathService=e.get(a.IInterpreterPathService),this.inDeprecatePythonPathExperiment=!0}getGlobalPythonPathConfigurationService(){return new u.GlobalPythonPathUpdaterService(this.inDeprecatePythonPathExperiment,this.workspaceService,this.interpreterPathService)}getWorkspacePythonPathConfigurationService(e){return new p.WorkspacePythonPathUpdaterService(e,this.inDeprecatePythonPathExperiment,this.workspaceService,this.interpreterPathService)}getWorkspaceFolderPythonPathConfigurationService(e){return new l.WorkspaceFolderPythonPathUpdaterService(e,this.inDeprecatePythonPathExperiment,this.workspaceService,this.interpreterPathService)}};d=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],d),t.PythonPathUpdaterServiceFactory=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalPythonPathUpdaterService=void 0;const r=n(5);t.GlobalPythonPathUpdaterService=class{constructor(e,t,n){this.inDeprecatePythonPathExperiment=e,this.workspaceService=t,this.interpreterPathService=n}async updatePythonPath(e){const t=this.workspaceService.getConfiguration("python"),n=this.inDeprecatePythonPathExperiment?this.interpreterPathService.inspect(void 0):t.inspect("pythonPath");n&&n.globalValue===e||(this.inDeprecatePythonPathExperiment?await this.interpreterPathService.update(void 0,r.ConfigurationTarget.Global,e):await t.update("pythonPath",e,!0))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderPythonPathUpdaterService=void 0;const r=n(0),i=n(5);t.WorkspaceFolderPythonPathUpdaterService=class{constructor(e,t,n,r){this.workspaceFolder=e,this.inDeprecatePythonPathExperiment=t,this.workspaceService=n,this.interpreterPathService=r}async updatePythonPath(e){const t=this.workspaceService.getConfiguration("python",this.workspaceFolder),n=this.inDeprecatePythonPathExperiment?this.interpreterPathService.inspect(this.workspaceFolder):t.inspect("pythonPath");n&&n.workspaceFolderValue===e||(e&&e.startsWith(this.workspaceFolder.fsPath)&&(e=r.relative(this.workspaceFolder.fsPath,e)),this.inDeprecatePythonPathExperiment?await this.interpreterPathService.update(this.workspaceFolder,i.ConfigurationTarget.WorkspaceFolder,e):await t.update("pythonPath",e,i.ConfigurationTarget.WorkspaceFolder))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspacePythonPathUpdaterService=void 0;const r=n(0),i=n(5);t.WorkspacePythonPathUpdaterService=class{constructor(e,t,n,r){this.workspace=e,this.inDeprecatePythonPathExperiment=t,this.workspaceService=n,this.interpreterPathService=r}async updatePythonPath(e){const t=this.workspaceService.getConfiguration("python",this.workspace),n=this.inDeprecatePythonPathExperiment?this.interpreterPathService.inspect(this.workspace):t.inspect("pythonPath");n&&n.workspaceValue===e||(e&&e.startsWith(this.workspace.fsPath)&&(e=r.relative(this.workspace.fsPath,e)),this.inDeprecatePythonPathExperiment?await this.interpreterPathService.update(this.workspace,i.ConfigurationTarget.Workspace,e):await t.update("pythonPath",e,!1))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterHelper=t.isInterpreterLocatedInWorkspace=void 0;const o=n(1),s=n(5),a=n(7),c=n(79),u=n(18),l=n(53),p=n(26),d=n(12);t.isInterpreterLocatedInWorkspace=function(e,t){const n=c.FileSystemPaths.withDefaults(),r=n.normCase(e.path),i=n.normCase(t.fsPath);return r.startsWith(i)};let h=class{constructor(e,t){this.serviceContainer=e,this.pyenvs=t}getActiveWorkspaceUri(e){const t=this.serviceContainer.get(a.IWorkspaceService);if(!t.hasWorkspaceFolders)return;if(Array.isArray(t.workspaceFolders)&&1===t.workspaceFolders.length)return{folderUri:t.workspaceFolders[0].uri,configTarget:s.ConfigurationTarget.Workspace};if(e){const n=t.getWorkspaceFolder(e);if(n)return{configTarget:s.ConfigurationTarget.WorkspaceFolder,folderUri:n.uri}}const n=this.serviceContainer.get(a.IDocumentManager);if(n.activeTextEditor){const e=t.getWorkspaceFolder(n.activeTextEditor.document.uri);if(e)return{configTarget:s.ConfigurationTarget.WorkspaceFolder,folderUri:e.uri}}}async getInterpreterInformation(e){return this.pyenvs.getInterpreterInformation(e)}async isMacDefaultPythonPath(e){return this.pyenvs.isMacDefaultPythonPath(e)}getInterpreterTypeDisplayName(e){return p.getEnvironmentTypeName(e)}getBestInterpreter(e){if(!Array.isArray(e)||0===e.length)return;const t=function(e){if(0===e.length)return[];if(1===e.length)return[e[0]];const t=e.slice();return t.sort((e,t)=>e.version&&t.version?l.compareSemVerLikeVersions(e.version,t.version):0),t}(e);return t[t.length-1]}};h=r([o.injectable(),i(0,o.inject(u.IServiceContainer)),i(1,o.inject(d.IComponentAdapter))],h),t.InterpreterHelper=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterService=void 0;const o=n(1),s=n(5);n(14);const a=n(7),c=n(40),u=n(6),l=n(18),p=n(12);let d=class{constructor(e,t){this.serviceContainer=e,this.pyenvs=t,this._pythonPathSetting="",this.didChangeInterpreterConfigurationEmitter=new s.EventEmitter,this.didChangeInterpreterEmitter=new s.EventEmitter,this.didChangeInterpreterInformation=new s.EventEmitter,this._onConfigChanged=e=>{this.didChangeInterpreterConfigurationEmitter.fire(e);const t=this.configService.getSettings(e);""!==this._pythonPathSetting&&this._pythonPathSetting===t.pythonPath||(this._pythonPathSetting=t.pythonPath,this.didChangeInterpreterEmitter.fire())},this.configService=this.serviceContainer.get(u.IConfigurationService),this.interpreterPathService=this.serviceContainer.get(u.IInterpreterPathService),this.onDidChangeInterpreters=t.onChanged}async hasInterpreters(e=(async()=>!0)){return this.pyenvs.hasInterpreters(e)}get onRefreshStart(){return this.pyenvs.onRefreshStart}triggerRefresh(e){return this.pyenvs.triggerRefresh(e)}get refreshPromise(){return this.pyenvs.refreshPromise}get onDidChangeInterpreter(){return this.didChangeInterpreterEmitter.event}get onDidChangeInterpreterInformation(){return this.didChangeInterpreterInformation.event}get onDidChangeInterpreterConfiguration(){return this.didChangeInterpreterConfigurationEmitter.event}async refresh(e){}initialize(){const e=this.serviceContainer.get(u.IDisposableRegistry),t=this.serviceContainer.get(a.IDocumentManager);e.push(t.onDidChangeActiveTextEditor(e=>e&&e.document?this.refresh(e.document.uri):void 0));this.serviceContainer.get(a.IWorkspaceService);const n=this.configService.getSettings();this._pythonPathSetting=n.pythonPath,e.push(this.interpreterPathService.onDidChange(e=>{this._onConfigChanged(e.uri)}))}getInterpreters(e){return this.pyenvs.getInterpreters(e)}async getAllInterpreters(e){return await this.refreshPromise,this.getInterpreters(e)}dispose(){this.didChangeInterpreterEmitter.dispose(),this.didChangeInterpreterInformation.dispose()}async getActiveInterpreter(e){const t=this.serviceContainer.tryGet(c.IPythonExecutionFactory),n=t?await t.create({resource:e}):void 0,r=n?await n.getExecutablePath().catch(()=>{}):void 0;if(r)return this.getInterpreterDetails(r)}async getInterpreterDetails(e){return this.pyenvs.getInterpreterDetails(e)}};d=r([o.injectable(),i(0,o.inject(l.IServiceContainer)),i(1,o.inject(p.IComponentAdapter))],d),t.InterpreterService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInheritEnvPrompt=t.condaInheritEnvPromptKey=void 0;const o=n(1),s=n(5),a=n(7),c=n(13),u=n(6),l=n(52),p=n(4),d=n(26),h=n(21),f=n(22),v=n(12);t.condaInheritEnvPromptKey="CONDA_INHERIT_ENV_PROMPT_KEY";let y=class{constructor(e,t,n,r,i,o,s=!1){this.interpreterService=e,this.workspaceService=t,this.browserService=n,this.appShell=r,this.persistentStateFactory=i,this.platformService=o,this.hasPromptBeenShownInCurrentSession=s}async activate(e){this.initializeInBackground(e).ignoreErrors()}async initializeInBackground(e){await this.shouldShowPrompt(e)&&await this.promptAndUpdate()}async promptAndUpdate(){const e=this.persistentStateFactory.createGlobalPersistentState(t.condaInheritEnvPromptKey,!0);if(!e.value)return;const n=[l.Common.bannerLabelYes(),l.Common.bannerLabelNo(),l.Common.moreInfo()],r=await this.appShell.showInformationMessage(l.Interpreters.condaInheritEnvMessage(),...n);h.sendTelemetryEvent(f.EventName.CONDA_INHERIT_ENV_PROMPT,void 0,{selection:r?["Yes","No","More Info"][n.indexOf(r)]:void 0}),r&&(r===n[0]?await this.workspaceService.getConfiguration("terminal").update("integrated.inheritEnv",!1,s.ConfigurationTarget.Global):r===n[1]?await e.updateValue(!1):r===n[2]&&this.browserService.launch("https://aka.ms/AA66i8f"))}async shouldShowPrompt(e){if(this.hasPromptBeenShownInCurrentSession)return!1;if(this.platformService.isWindows)return!1;const t=await this.interpreterService.getActiveInterpreter(e);if(!t||t.envType!==d.EnvironmentType.Conda)return!1;const n=this.workspaceService.getConfiguration("terminal",e).inspect("integrated.inheritEnv");return n?void 0===n.globalValue&&void 0===n.workspaceValue&&void 0===n.workspaceFolderValue&&(this.hasPromptBeenShownInCurrentSession=!0,!0):(p.traceError("WorkspaceConfiguration.inspect returns `undefined` for setting `terminal.integrated.inheritEnv`"),!1)}};r([p.traceDecoratorError("Failed to intialize conda inherit env prompt")],y.prototype,"initializeInBackground",null),r([p.traceDecoratorError("Failed to display conda inherit env prompt")],y.prototype,"promptAndUpdate",null),r([p.traceDecoratorError("Failed to check whether to display prompt for conda inherit env setting")],y.prototype,"shouldShowPrompt",null),y=r([o.injectable(),i(0,o.inject(v.IInterpreterService)),i(1,o.inject(a.IWorkspaceService)),i(2,o.inject(u.IBrowserService)),i(3,o.inject(a.IApplicationShell)),i(4,o.inject(u.IPersistentStateFactory)),i(5,o.inject(c.IPlatformService)),i(6,o.optional())],y),t.CondaInheritEnvPrompt=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualEnvironmentPrompt=void 0;const o=n(1),s=n(5),a=n(7),c=n(6),u=n(11),l=n(52),p=n(4),d=n(21),h=n(22),f=n(138),v=n(12);let y=class{constructor(e,t,n,r,i,o){this.persistentStateFactory=e,this.helper=t,this.pythonPathUpdaterService=n,this.disposableRegistry=r,this.appShell=i,this.pyenvs=o}async activate(e){const t=this.pyenvs.onDidCreate(e,()=>this.handleNewEnvironment(e));this.disposableRegistry.push(t)}async handleNewEnvironment(e){await u.sleep(1e3);const t=await this.pyenvs.getWorkspaceVirtualEnvInterpreters(e),n=Array.isArray(t)&&t.length>0?this.helper.getBestInterpreter(t):void 0;n&&await this.notifyUser(n,e)}async notifyUser(e,t){const n=this.persistentStateFactory.createWorkspacePersistentState("MESSAGE_KEY_FOR_VIRTUAL_ENV",!0);if(!n.value)return;const r=[l.Common.bannerLabelYes(),l.Common.bannerLabelNo(),l.Common.doNotShowAgain()],i=await this.appShell.showInformationMessage(l.Interpreters.environmentPromptMessage(),...r);d.sendTelemetryEvent(h.EventName.PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT,void 0,{selection:i?["Yes","No","Ignore"][r.indexOf(i)]:void 0}),i&&(i===r[0]?await this.pythonPathUpdaterService.updatePythonPath(e.path,s.ConfigurationTarget.WorkspaceFolder,"ui",t):i===r[2]&&await n.updateValue(!1))}};r([p.traceDecoratorError("Error in event handler for detection of new environment")],y.prototype,"handleNewEnvironment",null),y=r([o.injectable(),i(0,o.inject(c.IPersistentStateFactory)),i(1,o.inject(v.IInterpreterHelper)),i(2,o.inject(f.IPythonPathUpdaterServiceManager)),i(3,o.inject(c.IDisposableRegistry)),i(4,o.inject(a.IApplicationShell)),i(5,o.inject(v.IComponentAdapter))],y),t.VirtualEnvironmentPrompt=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(5),i=n(352),o=n(355),s=n(356);t.registerTypes=function(e,t){e.addSingleton(s.PythonEnvironmentTreeDataProvider,s.PythonEnvironmentTreeDataProvider);const n=e.get(s.PythonEnvironmentTreeDataProvider);t.subscriptions.push(r.commands.registerCommand("python.envManager.refresh",()=>n.refresh())),r.window.createTreeView("pythonEnvironments",{treeDataProvider:n}),o.PackagesViewProvider.register(t),i.activate(t,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActivatedEnvVariables=t.activate=void 0;const r=n(5),i=n(0),o=n(197),s=n(44),a=n(20),c=n(11),u=n(167),l=n(64),p=n(80),d=n(118),h=n(9),f=n(353);async function v(e,t,n){const r=d.getHashString(t),o=function(e,t){switch(e){case a.TerminalShellType.commandPrompt:case a.TerminalShellType.powershell:case a.TerminalShellType.powershellCore:return{contents:`\n@ECHO off\n"${t}"  %*\n`,extension:".cmd"};default:return{contents:`#!/bin/sh\n"${t}"   "$@"\nret=$?\nexit $ret\n`,extension:""}}}(e,t),c=i.join(n.globalStorageUri.fsPath,"symlinks","python_"+r),u=i.join(c,"python"+o.extension);return await s.pathExists(u)||(await s.ensureDir(c),await s.writeFile(u,o.contents)),c}t.activate=function(e,t){r.commands.registerCommand("python.envManager.openInTerminal",async n=>{const o=t.get(a.ITerminalHelper),s=await async function(){if(!r.workspace.workspaceFolders||0===r.workspace.workspaceFolders.length)return;if(1===r.workspace.workspaceFolders.length)return r.workspace.workspaceFolders[0].uri;return r.window.showWorkspaceFolderPick({placeHolder:"Select cwd for terminal"}).then(e=>null==e?void 0:e.uri)}(),u=n.env.envName?"Python "+n.env.envName:n.env.displayName,l=r.window.createTerminal({hideFromUser:!0,name:u,cwd:s}),d=o.identifyTerminalShell(l),y=await o.getEnvironmentActivationCommands(d,s,n.env);if(Array.isArray(y)&&y.length>0){l.show(!1);for(const e of y||[])l.sendText(e),y.length>1&&await c.sleep(1e3)}else if(!f)try{const[t,a]=await Promise.all([g(o,d,l,n.env.path),v(d,n.env.path,e)]);if(l.dispose(),h.getOSType()===h.OSType.Windows)"string"==typeof t.Path&&(t.Path=`${a}${i.delimiter}${t.Path}`),"string"==typeof t.PATH&&(t.PATH=`${a}${i.delimiter}${t.PATH}`);else{const e=p.getSearchPathEnvVarNames()[0];t[e]=`${a}${i.delimiter}${t[e]}`}r.window.createTerminal({hideFromUser:!1,name:u,cwd:s,env:t,strictEnv:!0}).show(!1)}catch(e){console.error(`Failed to create terminal for ${n.env.envType}:${n.env.path}`,e)}})};const y=new Map;async function g(e,t,n,r){if(y.has(r))return y.get(r);const a=(async()=>{const a=await new Promise((e,t)=>{o.file({postfix:".txt"},(n,r,i,o)=>{if(n)return t(n);e({filePath:r,dispose:o})})});a.dispose();const p=e.buildCommandForTerminal(t,r,[i.join(u._SCRIPTS_DIR,"printEnvVariablesToFile.py"),a.filePath]);n.sendText(p);const d=new l.StopWatch;for(;d.elapsedTime<5e3&&!await s.pathExists(a.filePath);)await c.sleep(100);if(!await s.pathExists(a.filePath))throw new Error(`Failed to generate env vars for ${r}, with command ${p}`);try{return JSON.parse(await s.readFile(a.filePath,"utf8"))}catch(e){throw console.error(`Failed to parse activated env vars for ${r}, with command ${p}`,e),new Error(`Failed to parse activated env vars for ${r}, with command ${p}`)}})();return y.set(r,a),a.finally(()=>y.delete(r)),a}t.getActivatedEnvVariables=g},function(e,t,n){"use strict";const r=n(35),i=n(16),o=n(354),s=()=>{if("linux"!==process.platform)return!1;if(r.release().toLowerCase().includes("microsoft"))return!o();try{return!!i.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!o()}catch(e){return!1}};process.env.__IS_WSL_TEST__?e.exports=s:e.exports=s()},function(e,t,n){"use strict";const r=n(16);let i;e.exports=()=>(void 0===i&&(i=function(){try{return r.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return r.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackagesViewProvider=void 0;const r=n(5);class i{constructor(e){this._extensionUri=e,i.instance=this}static register(e){const t=new i(e.extensionUri);e.subscriptions.push(r.window.registerWebviewViewProvider(i.viewType,t))}resolveWebviewView(e,t,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage(e=>{var t;switch(e.type){case"colorSelected":null===(t=r.window.activeTextEditor)||void 0===t||t.insertSnippet(new r.SnippetString("#"+e.value))}})}addColor(){var e,t;this._view&&(null===(t=(e=this._view).show)||void 0===t||t.call(e,!0),this._view.webview.postMessage({type:"addColor"}))}clearColors(){this._view&&this._view.webview.postMessage({type:"clearColors"})}_getHtmlForWebview(e){const t=e.asWebviewUri(r.Uri.joinPath(this._extensionUri,"media","main.js")),n=e.asWebviewUri(r.Uri.joinPath(this._extensionUri,"media","reset.css")),i=e.asWebviewUri(r.Uri.joinPath(this._extensionUri,"media","vscode.css")),o=e.asWebviewUri(r.Uri.joinPath(this._extensionUri,"media","main.css")),s=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\x3c!--\n\t\t\t\t\tUse a content security policy to only allow loading images from https or from our extension directory,\n\t\t\t\t\tand only allow scripts that have a specific nonce.\n\t\t\t\t--\x3e\n\t\t\t\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src 'nonce-${s}';">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<link href="${n}" rel="stylesheet">\n\t\t\t\t<link href="${i}" rel="stylesheet">\n\t\t\t\t<link href="${o}" rel="stylesheet">\n\n\t\t\t\t<title>Cat Colors</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<ul class="color-list">\n\t\t\t\t</ul>\n\t\t\t\t<button class="add-color-button">Add Color</button>\n\t\t\t\t<script nonce="${s}" src="${t}"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}}t.PackagesViewProvider=i,i.viewType="python.packages"},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvironmentTreeDataProvider=void 0;const o=n(1),s=n(47),a=n(44),c=n(0),u=n(5),l=n(6),p=n(9),d=n(129),h=n(12),f=n(26),v=n(357),y=n(358),g=n(31);class m{constructor(e){this.pkg=e}}class _{constructor(e){this.type=e,this.environments=new Set}}class b{constructor(e){this.env=e}get id(){return y.getEnvironmentId(this.env)}}class E{constructor(e,t){this.label=e,this.value=t}}class S{constructor(e){var t;this.env=e,this.info=[],e.envName&&this.info.push(new E("Name",e.envName)),(null===(t=e.version)||void 0===t?void 0:t.raw)&&this.info.push(new E("Version",e.version.raw)),e.architecture!==p.Architecture.Unknown&&this.info.push(new E("Archictecture",e.architecture===p.Architecture.x64?"64-bit":"32-bit")),e.path&&this.info.push(new E("Executable",y.getDisplayPath(e.path))),e.sysPrefix&&this.info.push(new E("SysPrefix",y.getDisplayPath(e.sysPrefix))),e.pipEnvWorkspaceFolder&&this.info.push(new E("Folder",y.getDisplayPath(e.pipEnvWorkspaceFolder))),this.info.push(new E("Environment Type",y.getEnvironmentTypeName(e.envType)))}}class w{constructor(e){this.env=e}}let T=class{constructor(e,t){this.interpreterService=e,this.persistentStateFactory=t,this.interpreterInfo=new Map,this.environmentTypes=new Map,this._changeTreeData=new u.EventEmitter,this.onDidChangeTreeData=this._changeTreeData.event,this.globalVirtualEnvState=this.persistentStateFactory.createGlobalPersistentState("PYTHON:PACKAGE_MANAGER:ENVS_CACHE",[]),this.refreshInternal()}async getTreeItem(e){var t,n;if(e instanceof b){const r=(null===(t=e.env.version)||void 0===t?void 0:t.raw)||"",i=e.env.envName||(null===(n=e.env.version)||void 0===n?void 0:n.raw)||y.getDisplayPath(e.env.envPath)||y.getDisplayPath(e.env.path),o=new u.TreeItem(i+(r?` (${r})`:""),u.TreeItemCollapsibleState.Collapsed);return o.tooltip=[r,y.getDisplayPath(e.env.path)].filter(e=>!!e).join("\n"),o.description=y.getDisplayPath(e.env.path),o.contextValue="env",o.iconPath=u.Uri.file(c.join(d.EXTENSION_ROOT_DIR,"resources/logo.svg")),o}if(e instanceof S){const e=new u.TreeItem("Info",u.TreeItemCollapsibleState.Collapsed);return e.contextValue="envInfo",e.iconPath=new u.ThemeIcon("info"),e}if(e instanceof m){const t=new u.TreeItem(e.pkg.name);return t.contextValue="package",t.description=e.pkg.version,"channel"in e.pkg&&(t.tooltip=[e.pkg.channel||"",e.pkg.base_url||""].filter(e=>e.trim().length).join(": ")),t.iconPath=new u.ThemeIcon("library"),t}if(e instanceof w){const e=new u.TreeItem("Packages",u.TreeItemCollapsibleState.Collapsed);return e.contextValue="packageContainer",e.iconPath=new u.ThemeIcon("package"),e}if(e instanceof E){const t=new u.TreeItem(e.label);return t.description=e.value,t.contextValue="info",t}const r=new u.TreeItem(y.getEnvironmentTypeName(e),u.TreeItemCollapsibleState.Collapsed);return r.contextValue="envType",e===f.EnvironmentType.Conda&&this.condaInfo?r.description=this.condaInfo.conda_version:e===f.EnvironmentType.Pyenv&&this.pyEnvVersion&&(r.description=this.pyEnvVersion),r.iconPath=new u.ThemeIcon("folder-library"),r}async getChildren(e){if(!e)return Array.from(this.environmentTypes.keys()).sort();if(e instanceof m)return[];if(e instanceof S)return e.info;if(e instanceof E)return[];if(e instanceof b)return[new S(e.env),new w(e.env)];if(e instanceof w)return v.getPackages(e.env).then(e=>e.map(e=>new m(e)));const t=this.environmentTypes.get(e);return t?Array.from(t.environments).map(e=>this.interpreterInfo.get(e)).sort():[]}refresh(){this.interpreterService.triggerRefresh().then(()=>this.refreshInternal())}refreshInternal(){this.refreshToolVersions(),this.refreshEnvironments().then(e=>this.buildEnvironments(e))}async refreshToolVersions(){v.getCondaVersion().then(e=>{e&&(this.condaInfo=e,this.environmentTypes.has(f.EnvironmentType.Conda)&&this._changeTreeData.fire(f.EnvironmentType.Conda))}),v.getPyEnvVersion().then(e=>{e&&(this.pyEnvVersion=e,this.environmentTypes.has(f.EnvironmentType.Pyenv)&&this._changeTreeData.fire(f.EnvironmentType.Pyenv))})}buildEnvironments(e){const t=new Set;let n=!1;const r=new Set,i=new Set;e.forEach(e=>{const o=y.getEnvironmentId(e);r.add(e.envType),i.add(o);const s=this.interpreterInfo.get(o);s?JSON.stringify(s.env)!==JSON.stringify(e)&&(s.env=e,t.add(o)):(n=!0,t.add(o),this.interpreterInfo.set(o,new b(e)));const a=e.envType;let c=this.environmentTypes.get(a);c?c.environments.has(o)||(n=!0,c.environments.add(o)):(n=!0,c=new _(a),c.environments.add(o),this.environmentTypes.set(a,c))}),r.size!==this.environmentTypes.size&&Array.from(this.environmentTypes.keys()).filter(e=>!r.has(e)).forEach(e=>{this.environmentTypes.delete(e),n=!0}),this.environmentTypes.forEach(e=>{Array.from(e.environments).filter(e=>!i.has(e)).forEach(t=>{e.environments.delete(t),n=!0})}),n&&this._changeTreeData.fire()}async refreshEnvironments(){const e=[],t=Promise.all(this.globalVirtualEnvState.value.map(async t=>{await a.pathExists(t.path)&&e.push(t)})),n=await Promise.all([...(u.workspace.workspaceFolders||[]).map(async e=>this.interpreterService.getAllInterpreters(e.uri)),this.interpreterService.getAllInterpreters(void 0)]);await t.catch(g.noop);const r=new Map;e.forEach(e=>r.set(y.getEnvironmentId(e),e)),s.flatten(n).forEach(e=>r.set(y.getEnvironmentId(e),e));const i=Array.from(r.values());return this.globalVirtualEnvState.updateValue(i),i}};T=r([o.injectable(),i(0,o.inject(h.IInterpreterService)),i(1,o.inject(l.IPersistentStateFactory))],T),t.PythonEnvironmentTreeDataProvider=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPyEnvVersion=t.getCondaVersion=t.getCondaPackages=t.getPipPackages=t.getPackages=void 0;const r=n(44),i=n(0),o=n(4),s=n(71),a=n(73),c=n(19),u=n(26);async function l(e){if(e.envType===u.EnvironmentType.Conda)return;const t=await c.exec(e.path,["-m","pip","list","--format","json"],{timeout:6e4});o.traceVerbose("conda info --json: "+t.stdout);return t.stdout.trim()?JSON.parse(t.stdout):[]}async function p(e){if(e.envType!==u.EnvironmentType.Conda||!e.envName&&!e.envPath)return;const t=await s.Conda.getConda();if(!t)return;const n=e.envName?["list","-n",e.envName]:["list","-p",e.envPath],r=await c.exec(t.command,n.concat(["--json"]),{timeout:6e4}),i=r.stdout.trim();return o.traceVerbose("conda info --json: "+r.stdout),i?JSON.parse(r.stdout):[]}t.getPackages=async function(e){try{const[t,n]=await Promise.all([l(e),p(e)]),r=new Map;return(t||[]).forEach(e=>r.set(e.name,e)),(n||[]).forEach(e=>r.set(e.name,e)),Array.from(r.values()).sort((e,t)=>e.name.toLocaleLowerCase().localeCompare(t.name.toLocaleLowerCase()))}catch(t){return o.traceError(`Failed to get package information for ${e.displayName})`,t),[]}},t.getPipPackages=l,t.getCondaPackages=p,t.getCondaVersion=async function(){const e=await s.Conda.getConda();if(e)return e.getInfo().catch(e=>o.traceError("Failed to get conda info",e))},t.getPyEnvVersion=async function(){const e=a.getPyenvDir(),t=i.join(e,"CHANGELOG.md");try{if(await r.pathExists(t)){const e=await r.readFile(t,"utf-8"),n=e.indexOf("## Release ");if(-1===n)return void o.traceError(`Failed to identify pyenv version from ${t}, with text ${e.substring(0,100)}`);const i=n+"## Release ".length,s=e.substring(i,i+20).splitLines().map(e=>e.trim()).filter(e=>e.length);return 0===s.length?"":s[0]}}catch(e){o.traceError("Failed to get pyenv version",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentTypeName=t.getDisplayPath=t.getEnvironmentId=void 0;const r=n(5),i=n(0),o=n(110)("~");t.getEnvironmentId=function(e){return`${e.envName}:${e.path}`},t.getDisplayPath=function(e){return e?(e=r.workspace.asRelativePath(e,!1)).startsWith(o)?`~${i.sep}${i.relative(o,e)}`:e:""},t.getEnvironmentTypeName=function(e){return e.toString()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsReducer=void 0;const r=n(47),i=n(5),o=n(4),s=n(23),a=n(84);async function c(e,t,n,i,o){n.pending+=1;const a=o[e],c=function(e,t){var n,i;const[o]=function(...e){const t=[s.PythonEnvKind.Pyenv,s.PythonEnvKind.CondaBase,s.PythonEnvKind.Conda,s.PythonEnvKind.WindowsStore,s.PythonEnvKind.Pipenv,s.PythonEnvKind.Poetry,s.PythonEnvKind.Venv,s.PythonEnvKind.VirtualEnvWrapper,s.PythonEnvKind.VirtualEnv,s.PythonEnvKind.OtherVirtual,s.PythonEnvKind.OtherGlobal,s.PythonEnvKind.MacDefault,s.PythonEnvKind.System,s.PythonEnvKind.Custom,s.PythonEnvKind.Unknown];return e.sort((e,n)=>t.indexOf(e.kind)-t.indexOf(n.kind))}(e,t),a=r.cloneDeep(o);return a.source=r.uniq((null!==(n=e.source)&&void 0!==n?n:[]).concat(null!==(i=t.source)&&void 0!==i?i:[])),a}(a,t);r.isEqual(a,c)||(o[e]=c,i.fire({index:e,old:a,update:c})),n.pending-=1,u(n,i)}function u(e,t){e.done&&0===e.pending&&(t.fire(null),t.dispose())}t.PythonEnvsReducer=class{constructor(e){this.parentLocator=e}get onChanged(){return this.parentLocator.onChanged}iterEnvs(e){const t=new i.EventEmitter,n=async function*(e,t){const n={done:!1,pending:0},r=[];if(void 0!==e.onUpdated){const i=e.onUpdated(e=>{if(n.pending+=1,null===e)n.done=!0,i.dispose();else{if(void 0===e.update)throw new Error("Unsupported behavior: `undefined` environment updates are not supported from downstream locators in reducer");if(void 0!==r[e.index]){const n=r[e.index];r[e.index]=e.update,t.fire({index:e.index,old:n,update:e.update})}else o.traceVerbose(`Expected already iterated env, got ${e.old} (#${e.index})`)}n.pending-=1,u(n,t)})}let i=await e.next();for(;!i.done;){const o=i.value,s=r.findIndex(e=>a.areSameEnv(e.executablePath,o.executablePath));-1!==s?c(s,o,n,t,r).ignoreErrors():(yield o,r.push(o)),i=await e.next()}void 0===e.onUpdated&&(n.done=!0,u(n,t))}(this.parentLocator.iterEnvs(e),t);return n.onUpdated=t.event,n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsResolver=void 0;const r=n(47),i=n(5),o=n(361),s=n(84),a=n(363),c=n(4);function u(e,t){e.done&&0===e.pending&&(t.fire(null),t.dispose())}function l(e,t){const n=r.cloneDeep(t);return n.version=e.version,n.executable.filename=e.executable.filename,n.executable.sysPrefix=e.executable.sysPrefix,n.arch=e.arch,n.display=s.getEnvDisplayString(n),n}t.PythonEnvsResolver=class{constructor(e,t){this.parentLocator=e,this.environmentInfoService=t}get onChanged(){return this.parentLocator.onChanged}async resolveEnv(e){const t=await o.identifyEnvironment(e),n=await a.resolveBasicEnv({kind:t,executablePath:e}),r=await this.environmentInfoService.getEnvironmentInfo(n.executable.filename);if(r)return l(r,n)}iterEnvs(e){const t=new i.EventEmitter,n=this.parentLocator.iterEnvs(e),r=this.iterEnvsIterator(n,t);return r.onUpdated=t.event,r}async*iterEnvsIterator(e,t){const n={done:!1,pending:0},r=[];if(void 0!==e.onUpdated){const i=e.onUpdated(async e=>{if(n.pending+=1,null===e)n.done=!0,i.dispose();else{if(void 0===e.update)throw new Error("Unsupported behavior: `undefined` environment updates are not supported from downstream locators in resolver");void 0!==r[e.index]?(r[e.index]=await a.resolveBasicEnv(e.update),this.resolveInBackground(e.index,n,t,r).ignoreErrors()):c.traceVerbose(`Expected already iterated env, got ${e.old} (#${e.index})`)}n.pending-=1,u(n,t)})}let i=await e.next();for(;!i.done;){const o=await a.resolveBasicEnv(i.value);r.push(o),yield o,this.resolveInBackground(r.indexOf(o),n,t,r).ignoreErrors(),i=await e.next()}void 0===e.onUpdated&&(n.done=!0,u(n,t))}async resolveInBackground(e,t,n,r){t.pending+=1;const i=await this.environmentInfoService.getEnvironmentInfo(r[e].executable.filename),o=r[e];if(i){const t=l(i,r[e]);r[e]=t,n.fire({old:o,index:e,update:t})}else n.fire({old:o,index:e,update:void 0});t.pending-=1,u(t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.identifyEnvironment=void 0;const r=n(23),i=n(200),o=n(71),s=n(362),a=n(83),c=n(162),u=n(73),l=n(87),p=n(139);t.identifyEnvironment=async function(e){const t=function(){const e=()=>Promise.resolve(!1),t=new Map;return Object.values(r.PythonEnvKind).forEach(n=>{t.set(n,e)}),t.set(r.PythonEnvKind.Conda,o.isCondaEnvironment),t.set(r.PythonEnvKind.WindowsStore,p.isWindowsStoreEnvironment),t.set(r.PythonEnvKind.Pipenv,a.isPipenvEnvironment),t.set(r.PythonEnvKind.Pyenv,u.isPyenvEnvironment),t.set(r.PythonEnvKind.Poetry,c.isPoetryEnvironment),t.set(r.PythonEnvKind.Venv,l.isVenvEnvironment),t.set(r.PythonEnvKind.VirtualEnvWrapper,l.isVirtualenvwrapperEnvironment),t.set(r.PythonEnvKind.VirtualEnv,l.isVirtualenvEnvironment),t.set(r.PythonEnvKind.Unknown,()=>Promise.resolve(!0)),t.set(r.PythonEnvKind.OtherGlobal,s.isGloballyInstalledEnv),t}(),n=i.getPrioritizedEnvKinds();for(const r of n){const n=t.get(r);if(n&&await n(e))return r}return r.PythonEnvKind.Unknown}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGloballyInstalledEnv=void 0;const r=n(80),i=n(9),o=n(19),s=n(165),a=n(73);t.isGloballyInstalledEnv=async function(e){return async function(e){let t=[];t=i.getOSType()===i.OSType.Windows?r.getSearchPathEntries():await s.commonPosixBinPaths();t=t.filter(e=>!a.isPyenvShimDir(e));for(const n of t)if(o.isParentPath(e,n))return!0;return!1}(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBasicEnv=void 0;const r=n(0),i=n(5),o=n(47),s=n(23),a=n(84),c=n(46),u=n(19),l=n(71),p=n(73),d=n(9),h=n(53),f=n(135),v=n(364),y=n(4);function g(){const e=new Map,t=e=>t=>async function(e,t){let n;try{n=v.parseVersionFromExecutable(e)}catch(e){n=s.UNKNOWN_PYTHON_VERSION}return a.buildEnvInfo({kind:t,version:n,executable:e})}(t,e);return Object.values(s.PythonEnvKind).forEach(n=>{e.set(n,t(n))}),s.virtualEnvKinds.forEach(t=>{e.set(t,(e=>t=>m(t,e))(t))}),e.set(s.PythonEnvKind.Conda,_),e.set(s.PythonEnvKind.WindowsStore,E),e.set(s.PythonEnvKind.Pyenv,b),e}async function m(e,t){const n=a.buildEnvInfo({kind:t,version:await c.getPythonVersionFromPath(e),executable:e}),i=c.getEnvironmentDirFromPath(e);return n.location=i,n.name=r.basename(i),n}async function _(e){var t;const n=await l.Conda.getConda();void 0===n&&y.traceWarn(e+" identified as Conda environment even though Conda is not installed");const r=null!==(t=await(null==n?void 0:n.getEnvList()))&&void 0!==t?t:[],i=a.getEnvMatcher(e);for(const{name:e,prefix:t}of r){const n=await c.getInterpreterPathFromDir(t);if(n&&i(n)){const r=a.buildEnvInfo({executable:n,kind:s.PythonEnvKind.Conda,org:l.AnacondaCompanyName,location:t,source:[],version:await c.getPythonVersionFromPath(n)});return e&&(r.name=e),r}}return y.traceError(`${e} identified as a Conda environment but is not returned via '${null==n?void 0:n.command} info' command`),m(e,s.PythonEnvKind.Conda)}async function b(e){const t=c.getEnvironmentDirFromPath(e),n=r.basename(t),i=p.parsePyenvVersion(n),o=a.buildEnvInfo({kind:s.PythonEnvKind.Pyenv,executable:e,source:[],location:t,version:await c.getPythonVersionFromPath(e,null==i?void 0:i.pythonVer),org:i&&i.distro?i.distro:""});return o.name=n,o}async function E(e){return a.buildEnvInfo({kind:s.PythonEnvKind.WindowsStore,executable:e,version:h.getPythonVersionFromPath(e),org:"Microsoft",arch:d.Architecture.x64,source:[s.PythonEnvSource.PathEnvVar]})}t.resolveBasicEnv=async function({kind:e,executablePath:t,source:n}){var c;const l=g().get(e),p=await l(t);return p.searchLocation=function(e){const t=u.getWorkspaceFolders();if(t.some(t=>u.isParentPath(e.executable.filename,t)))return i.Uri.file(r.dirname(e.location));return}(p),p.source=o.uniq(p.source.concat(null!=n?n:[])),d.getOSType()===d.OSType.Windows&&(null===(c=p.source)||void 0===c?void 0:c.includes(s.PythonEnvSource.WindowsRegistry))&&await async function(e){var t,n,r;let i=f.getRegistryInterpretersSync();i||(y.traceError("Expected registry interpreter cache to be initialized already"),i=await f.getRegistryInterpreters());const c=i.find(t=>u.arePathsSame(t.interpreterPath,e.executable.filename));if(c){const i=null!==(n=null!==(t=c.versionStr)&&void 0!==t?t:c.sysVersionStr)&&void 0!==n?n:c.interpreterPath;let u;try{u=h.parseVersion(i)}catch(e){u=s.UNKNOWN_PYTHON_VERSION}e.kind=e.kind===s.PythonEnvKind.Unknown?s.PythonEnvKind.OtherGlobal:e.kind,e.version=a.comparePythonVersionSpecificity(u,e.version)>0?u:e.version,e.distro.defaultDisplayName=c.companyDisplayName,e.arch="32bit"===c.bitnessStr?d.Architecture.x86:d.Architecture.x64,e.distro.org=null!==(r=c.distroOrgName)&&void 0!==r?r:e.distro.org,e.source=o.uniq(e.source.concat(s.PythonEnvSource.WindowsRegistry))}else y.traceWarn("Expected registry to find the interpreter as source was set")}(p),p.display=a.getEnvDisplayString(p),p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseVersionFromExecutable=void 0;const r=n(0),i=n(9),o=n(53),s=n(19);t.parseVersionFromExecutable=function(e){const t=function(e){if(e=s.normCasePath(e),i.getOSType()===i.OSType.Windows){if("python.exe"===e)return o.getEmptyVersion()}else if("python"===e)return o.parseVersion("2.7");if(!e.startsWith("python"))throw Error(`not a Python executable (expected "python..", got "${e}")`);return o.parseVersion(e)}(r.basename(e));return 2===t.major&&-1===t.minor&&(t.minor=7),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsPathEnvVarLocator=void 0;const r=n(80),i=n(74),o=n(46),s=n(73),a=n(139),c=n(23),u=n(209),l=n(210),p=n(367);async function*d(e){for await(const t of o.iterPythonExecutablesInDir(e))await o.looksLikeBasicGlobalPython(t)&&(yield t.filename)}t.WindowsPathEnvVarLocator=class{constructor(){this.disposables=new i.Disposables;const e=r.getSearchPathEntries().filter(e=>!a.isWindowsStoreDir(e)&&!s.isPyenvShimDir(e)).map(e=>function(e,t,n){const r=new p.DirFilesLocator(e,t,d,n);return{iterEnvs:async function*(e){yield*await l.getEnvs(r.iterEnvs(e))},dispose:async()=>{},onChanged:r.onChanged}}(e,c.PythonEnvKind.System,[c.PythonEnvSource.PathEnvVar]));this.disposables.push(...e),this.locators=new u.Locators(e),this.onChanged=this.locators.onChanged}async dispose(){this.locators.dispose(),await this.disposables.dispose()}iterEnvs(e){return this.locators.iterEnvs(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsWatchers=void 0;const r=n(74),i=n(114);t.PythonEnvsWatchers=class{constructor(e){this.watcher=new i.PythonEnvsWatcher,this.disposables=new r.Disposables,this.onChanged=this.watcher.onChanged,e.forEach(e=>{const t=e.onChanged(e=>this.watcher.fire(e));this.disposables.push(t)})}dispose(){this.disposables.dispose().ignoreErrors()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirFilesLocator=void 0;const r=n(46),i=n(114);async function*o(e){for await(const t of r.iterPythonExecutablesInDir(e))yield t.filename}t.DirFilesLocator=class extends class{constructor(e,t,n){this.kind=e,this.getExecutables=t,this.source=n,this.watcher=new i.PythonEnvsWatcher,this.onChanged=this.watcher.onChanged}iterEnvs(e){const t=this.getExecutables();return async function*(e,n){for await(const r of t)yield{executablePath:r,kind:e,source:n}}(this.kind,this.source)}}{constructor(e,t,n=o,r){super(t,()=>n(e),r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceVirtualEnvironmentLocator=void 0;const r=n(0),i=n(11),o=n(46),s=n(19),a=n(83),c=n(87),u=n(23),l=n(88);n(14);const p=n(115),d=n(4);function h(e){return p.asyncFilter([e,r.join(e,".direnv")],s.pathExists)}async function f(e){return await a.isPipenvEnvironment(e)?u.PythonEnvKind.Pipenv:await c.isVenvEnvironment(e)?u.PythonEnvKind.Venv:await c.isVirtualenvEnvironment(e)?u.PythonEnvKind.VirtualEnv:u.PythonEnvKind.Unknown}class v extends l.FSWatchingLocator{constructor(e){super(()=>h(this.root),f,{delayOnCreated:1e3},l.FSWatcherKind.Workspace),this.root=e}doIterEnvs(){return async function*(e){const t=(await h(e)).map(e=>async function*(){d.traceVerbose("Searching for workspace virtual envs in: "+e);const t=o.findInterpretersInDir(e,2);for await(const e of t){const{filename:t}=e;if(await o.looksLikeBasicVirtualPython(e)){const e=await f(t);yield{kind:e,executablePath:t},d.traceVerbose("Workspace Virtual Environment: [added] "+t)}else d.traceVerbose("Workspace Virtual Environment: [skipped] "+t)}}());yield*i.iterable(i.chain(t))}(this.root)}}t.WorkspaceVirtualEnvironmentLocator=v},function(e,t,n){"use strict";const{EventEmitter:r}=n(78),i=n(16),o=n(0),{promisify:s}=n(24),a=n(370),c=n(374).default,u=n(375),l=n(213),p=n(377),d=n(212),h=n(384),f=n(388),{EV_ALL:v,EV_READY:y,EV_ADD:g,EV_CHANGE:m,EV_UNLINK:_,EV_ADD_DIR:b,EV_UNLINK_DIR:E,EV_RAW:S,EV_ERROR:w,STR_CLOSE:T,STR_END:P,BACK_SLASH_RE:I,DOUBLE_SLASH_RE:C,SLASH_OR_BACK_SLASH_RE:O,DOT_RE:A,REPLACER_RE:x,SLASH:R,SLASH_SLASH:N,BRACE_START:k,BANG:D,ONE_DOT:j,TWO_DOTS:M,GLOBSTAR:L,SLASH_GLOBSTAR:F,ANYMATCH_OPTS:V,STRING_TYPE:U,FUNCTION_TYPE:B,EMPTY_STR:H,EMPTY_FN:W,isWindows:G,isMacos:$}=n(172),q=s(i.stat),K=s(i.readdir),z=(e=[])=>Array.isArray(e)?e:[e],Y=(e,t=[])=>(e.forEach(e=>{Array.isArray(e)?Y(e,t):t.push(e)}),t),X=e=>{const t=Y(z(e));if(!t.every(e=>typeof e===U))throw new TypeError("Non-string provided as watch path: "+t);return t.map(J)},Q=e=>{let t=e.replace(I,R),n=!1;for(t.startsWith(N)&&(n=!0);t.match(C);)t=t.replace(C,R);return n&&(t=R+t),t},J=e=>Q(o.normalize(Q(e))),Z=(e=H)=>t=>typeof t!==U?t:J(o.isAbsolute(t)?t:o.join(e,t)),ee=(e,t)=>void 0===e[t];class te{constructor(e,t){this.path=e,this._removeWatcher=t,this.items=new Set}add(e){const{items:t}=this;t&&e!==j&&e!==M&&t.add(e)}async remove(e){const{items:t}=this;if(!t)return;if(t.delete(e),t.size>0)return;const n=this.path;try{await K(n)}catch(e){this._removeWatcher&&this._removeWatcher(o.dirname(n),o.basename(n))}}has(e){const{items:t}=this;if(t)return t.has(e)}getChildren(){const{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}class ne{constructor(e,t,n,r){this.fsw=r,this.path=e=e.replace(x,H),this.watchPath=t,this.fullWatchPath=o.resolve(t),this.hasGlob=t!==e,e===H&&(this.hasGlob=!1),this.globSymlink=!(!this.hasGlob||!n)&&void 0,this.globFilter=!!this.hasGlob&&c(e,void 0,V),this.dirParts=this.getDirParts(e),this.dirParts.forEach(e=>{e.length>1&&e.pop()}),this.followSymlinks=n,this.statMethod=n?"stat":"lstat"}checkGlobSymlink(e){return void 0===this.globSymlink&&(this.globSymlink=e.fullParentDir!==this.fullWatchPath&&{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return o.join(this.watchPath,o.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:t}=e;if(t&&t.isSymbolicLink())return this.filterDir(e);const n=this.entryPath(e);return(!this.hasGlob||typeof this.globFilter!==B||this.globFilter(n))&&this.fsw._isntIgnored(n,t)&&this.fsw._hasReadPermissions(t)}getDirParts(e){if(!this.hasGlob)return[];const t=[];return(e.includes(k)?p.expand(e):[e]).forEach(e=>{t.push(o.relative(this.watchPath,e).split(O))}),t}filterDir(e){if(this.hasGlob){const t=this.getDirParts(this.checkGlobSymlink(e));let n=!1;this.unmatchedGlob=!this.dirParts.some(e=>e.every((e,r)=>(e===L&&(n=!0),n||!t[0][r]||c(e,t[0][r],V))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class re extends r{constructor(e){super();const t={};e&&Object.assign(t,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,ee(t,"persistent")&&(t.persistent=!0),ee(t,"ignoreInitial")&&(t.ignoreInitial=!1),ee(t,"ignorePermissionErrors")&&(t.ignorePermissionErrors=!1),ee(t,"interval")&&(t.interval=100),ee(t,"binaryInterval")&&(t.binaryInterval=300),ee(t,"disableGlobbing")&&(t.disableGlobbing=!1),t.enableBinaryInterval=t.binaryInterval!==t.interval,ee(t,"useFsEvents")&&(t.useFsEvents=!t.usePolling);f.canUse()||(t.useFsEvents=!1),ee(t,"usePolling")&&!t.useFsEvents&&(t.usePolling=$);const n=process.env.CHOKIDAR_USEPOLLING;if(void 0!==n){const e=n.toLowerCase();t.usePolling="false"!==e&&"0"!==e&&("true"===e||"1"===e||!!e)}const r=process.env.CHOKIDAR_INTERVAL;r&&(t.interval=Number.parseInt(r,10)),ee(t,"atomic")&&(t.atomic=!t.usePolling&&!t.useFsEvents),t.atomic&&(this._pendingUnlinks=new Map),ee(t,"followSymlinks")&&(t.followSymlinks=!0),ee(t,"awaitWriteFinish")&&(t.awaitWriteFinish=!1),!0===t.awaitWriteFinish&&(t.awaitWriteFinish={});const i=t.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),t.ignored&&(t.ignored=z(t.ignored));let o=0;this._emitReady=()=>{o++,o>=this._readyCount&&(this._emitReady=W,this._readyEmitted=!0,process.nextTick(()=>this.emit(y)))},this._emitRaw=(...e)=>this.emit(S,...e),this._readyEmitted=!1,this.options=t,t.useFsEvents?this._fsEventsHandler=new f(this):this._nodeFsHandler=new h(this),Object.freeze(t)}add(e,t,n){const{cwd:r,disableGlobbing:i}=this.options;this.closed=!1;let s=X(e);return r&&(s=s.map(e=>{const t=((e,t)=>o.isAbsolute(e)?e:e.startsWith(D)?D+o.join(t,e.slice(1)):o.join(t,e))(e,r);return i||!l(e)?t:d(t)})),s=s.filter(e=>e.startsWith(D)?(this._ignoredPaths.add(e.slice(1)),!1):(this._ignoredPaths.delete(e),this._ignoredPaths.delete(e+F),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=s.length),this.options.persistent&&(this._readyCount*=2),s.forEach(e=>this._fsEventsHandler._addToFsEvents(e))):(this._readyCount||(this._readyCount=0),this._readyCount+=s.length,Promise.all(s.map(async e=>{const r=await this._nodeFsHandler._addToNodeFs(e,!n,0,0,t);return r&&this._emitReady(),r})).then(e=>{this.closed||e.filter(e=>e).forEach(e=>{this.add(o.dirname(e),o.basename(t||e))})})),this}unwatch(e){if(this.closed)return this;const t=X(e),{cwd:n}=this.options;return t.forEach(e=>{o.isAbsolute(e)||this._closers.has(e)||(n&&(e=o.join(n,e)),e=o.resolve(e)),this._closePath(e),this._ignoredPaths.add(e),this._watched.has(e)&&this._ignoredPaths.add(e+F),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(t=>t.forEach(t=>{const n=t();n instanceof Promise&&e.push(n)})),this._streams.forEach(e=>e.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(e=>e.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(e=>{this["_"+e].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((t,n)=>{const r=this.options.cwd?o.relative(this.options.cwd,n):n;e[r||j]=t.getChildren().sort()}),e}emitWithAll(e,t){this.emit(...t),e!==w&&this.emit(v,...t)}async _emit(e,t,n,r,i){if(this.closed)return;const s=this.options;G&&(t=o.normalize(t)),s.cwd&&(t=o.relative(s.cwd,t));const a=[e,t];void 0!==i?a.push(n,r,i):void 0!==r?a.push(n,r):void 0!==n&&a.push(n);const c=s.awaitWriteFinish;let u;if(c&&(u=this._pendingWrites.get(t)))return u.lastChange=new Date,this;if(s.atomic){if(e===_)return this._pendingUnlinks.set(t,a),setTimeout(()=>{this._pendingUnlinks.forEach((e,t)=>{this.emit(...e),this.emit(v,...e),this._pendingUnlinks.delete(t)})},"number"==typeof s.atomic?s.atomic:100),this;e===g&&this._pendingUnlinks.has(t)&&(e=a[0]=m,this._pendingUnlinks.delete(t))}if(c&&(e===g||e===m)&&this._readyEmitted){const n=(t,n)=>{t?(e=a[0]=w,a[1]=t,this.emitWithAll(e,a)):n&&(a.length>2?a[2]=n:a.push(n),this.emitWithAll(e,a))};return this._awaitWriteFinish(t,c.stabilityThreshold,e,n),this}if(e===m){if(!this._throttle(m,t,50))return this}if(s.alwaysStat&&void 0===n&&(e===g||e===b||e===m)){const e=s.cwd?o.join(s.cwd,t):t;let n;try{n=await q(e)}catch(e){}if(!n||this.closed)return;a.push(n)}return this.emitWithAll(e,a),this}_handleError(e){const t=e&&e.code;return e&&"ENOENT"!==t&&"ENOTDIR"!==t&&(!this.options.ignorePermissionErrors||"EPERM"!==t&&"EACCES"!==t)&&this.emit(w,e),e||this.closed}_throttle(e,t,n){this._throttled.has(e)||this._throttled.set(e,new Map);const r=this._throttled.get(e),i=r.get(t);if(i)return i.count++,!1;let o;const s=()=>{const e=r.get(t),n=e?e.count:0;return r.delete(t),clearTimeout(o),e&&clearTimeout(e.timeoutObject),n};o=setTimeout(s,n);const a={timeoutObject:o,clear:s,count:0};return r.set(t,a),a}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,t,n,r){let s,a=e;this.options.cwd&&!o.isAbsolute(e)&&(a=o.join(this.options.cwd,e));const c=new Date,u=n=>{i.stat(a,(i,o)=>{if(i||!this._pendingWrites.has(e))return void(i&&"ENOENT"!==i.code&&r(i));const a=Number(new Date);n&&o.size!==n.size&&(this._pendingWrites.get(e).lastChange=a);a-this._pendingWrites.get(e).lastChange>=t?(this._pendingWrites.delete(e),r(void 0,o)):s=setTimeout(u,this.options.awaitWriteFinish.pollInterval,o)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:c,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(s),n)}),s=setTimeout(u,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,t){if(this.options.atomic&&A.test(e))return!0;if(!this._userIgnored){const{cwd:e}=this.options,t=this.options.ignored,n=t&&t.map(Z(e)),r=z(n).filter(e=>typeof e===U&&!l(e)).map(e=>e+F),i=this._getGlobIgnored().map(Z(e)).concat(n,r);this._userIgnored=c(i,void 0,V)}return this._userIgnored([e,t])}_isntIgnored(e,t){return!this._isIgnored(e,t)}_getWatchHelpers(e,t){const n=t||this.options.disableGlobbing||!l(e)?e:u(e),r=this.options.followSymlinks;return new ne(e,n,r,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const t=o.resolve(e);return this._watched.has(t)||this._watched.set(t,new te(t,this._boundRemove)),this._watched.get(t)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const t=511&(e&&Number.parseInt(e.mode,10)),n=Number.parseInt(t.toString(8)[0],10);return Boolean(4&n)}_remove(e,t,n){const r=o.join(e,t),i=o.resolve(r);if(n=null!=n?n:this._watched.has(r)||this._watched.has(i),!this._throttle("remove",r,100))return;n||this.options.useFsEvents||1!==this._watched.size||this.add(e,t,!0);this._getWatchedDir(r).getChildren().forEach(e=>this._remove(r,e));const s=this._getWatchedDir(e),a=s.has(t);s.remove(t);let c=r;if(this.options.cwd&&(c=o.relative(this.options.cwd,r)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)){if(this._pendingWrites.get(c).cancelWait()===g)return}this._watched.delete(r),this._watched.delete(i);const u=n?E:_;a&&!this._isIgnored(r)&&this._emit(u,r),this.options.useFsEvents||this._closePath(r)}_closePath(e){this._closeFile(e);const t=o.dirname(e);this._getWatchedDir(t).remove(o.basename(e))}_closeFile(e){const t=this._closers.get(e);t&&(t.forEach(e=>e()),this._closers.delete(e))}_addPathCloser(e,t){if(!t)return;let n=this._closers.get(e);n||(n=[],this._closers.set(e,n)),n.push(t)}_readdirp(e,t){if(this.closed)return;const n={type:v,alwaysStat:!0,lstat:!0,...t};let r=a(e,n);return this._streams.add(r),r.once(T,()=>{r=void 0}),r.once(P,()=>{r&&(this._streams.delete(r),r=void 0)}),r}}t.FSWatcher=re;t.watch=(e,t)=>{const n=new re(t);return n.add(e),n}},function(e,t,n){"use strict";const r=n(16),{Readable:i}=n(77),o=n(0),{promisify:s}=n(24),a=n(211),c=s(r.readdir),u=s(r.stat),l=s(r.lstat),p=s(r.realpath),d=new Set(["ENOENT","EPERM","EACCES","ELOOP"]),h="files",f="directories",v="files_directories",y="all",g=[h,f,v,y],m=e=>{if(void 0!==e){if("function"==typeof e)return e;if("string"==typeof e){const t=a(e.trim());return e=>t(e.basename)}if(Array.isArray(e)){const t=[],n=[];for(const r of e){const e=r.trim();"!"===e.charAt(0)?n.push(a(e.slice(1))):t.push(a(e))}return n.length>0?t.length>0?e=>t.some(t=>t(e.basename))&&!n.some(t=>t(e.basename)):e=>!n.some(t=>t(e.basename)):e=>t.some(t=>t(e.basename))}}};class _ extends i{static get defaultOptions(){return{root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:h,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(e={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:e.highWaterMark||4096});const t={..._.defaultOptions,...e},{root:n,type:i}=t;this._fileFilter=m(t.fileFilter),this._directoryFilter=m(t.directoryFilter);const s=t.lstat?l:u;"win32"===process.platform&&3===u.length?this._stat=e=>s(e,{bigint:!0}):this._stat=s,this._maxDepth=t.depth,this._wantsDir=[f,v,y].includes(i),this._wantsFile=[h,v,y].includes(i),this._wantsEverything=i===y,this._root=o.resolve(n),this._isDirent="Dirent"in r&&!t.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(n,1)],this.reading=!1,this.parent=void 0}async _read(e){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&e>0;){const{path:t,depth:n,files:r=[]}=this.parent||{};if(r.length>0){const i=r.splice(0,e).map(e=>this._formatEntry(e,t));for(const t of await Promise.all(i)){if(this.destroyed)return;const r=await this._getEntryType(t);"directory"===r&&this._directoryFilter(t)?(n<=this._maxDepth&&this.parents.push(this._exploreDir(t.fullPath,n+1)),this._wantsDir&&(this.push(t),e--)):("file"===r||this._includeAsFile(t))&&this._fileFilter(t)&&this._wantsFile&&(this.push(t),e--)}}else{const e=this.parents.pop();if(!e){this.push(null);break}if(this.parent=await e,this.destroyed)return}}}catch(e){this.destroy(e)}finally{this.reading=!1}}}async _exploreDir(e,t){let n;try{n=await c(e,this._rdOptions)}catch(e){this._onError(e)}return{files:n,depth:t,path:e}}async _formatEntry(e,t){let n;try{const r=this._isDirent?e.name:e,i=o.resolve(o.join(t,r));n={path:o.relative(this._root,i),fullPath:i,basename:r},n[this._statsProp]=this._isDirent?e:await this._stat(i)}catch(e){this._onError(e)}return n}_onError(e){var t;t=e,d.has(t.code)&&!this.destroyed?this.emit("warn",e):this.destroy(e)}async _getEntryType(e){const t=e&&e[this._statsProp];if(t){if(t.isFile())return"file";if(t.isDirectory())return"directory";if(t&&t.isSymbolicLink()){const t=e.fullPath;try{const e=await p(t),n=await l(e);if(n.isFile())return"file";if(n.isDirectory()){const n=e.length;return t.startsWith(e)&&t.substr(n,1)===o.sep?this._onError(new Error(`Circular symlink detected: "${t}" points to "${e}"`)):"directory"}}catch(e){this._onError(e)}}}}_includeAsFile(e){const t=e&&e[this._statsProp];return t&&this._wantsEverything&&!t.isDirectory()}}const b=(e,t={})=>{let n=t.entryType||t.type;if("both"===n&&(n=v),n&&(t.type=n),!e)throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");if("string"!=typeof e)throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(n&&!g.includes(n))throw new Error("readdirp: Invalid type passed. Use one of "+g.join(", "));return t.root=e,new _(t)};b.promise=(e,t={})=>new Promise((n,r)=>{const i=[];b(e,t).on("data",e=>i.push(e)).on("end",()=>n(i)).on("error",e=>r(e))}),b.ReaddirpStream=_,b.default=b,e.exports=b},function(e,t,n){"use strict";const r=n(0),i=n(372),o=n(373),s=n(169),a=n(140),c=(e,t,n=!1)=>{if(Array.isArray(e)){const r=e.map(e=>c(e,t,n));return e=>{for(const t of r){const n=t(e);if(n)return n}return!1}}const r=(i=e)&&"object"==typeof i&&!Array.isArray(i)&&e.tokens&&e.input;var i;if(""===e||"string"!=typeof e&&!r)throw new TypeError("Expected pattern to be a non-empty string");const o=t||{},a=s.isWindows(t),u=r?c.compileRe(e,t):c.makeRe(e,t,!1,!0),l=u.state;delete u.state;let p=()=>!1;if(o.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};p=c(o.ignore,e,n)}const d=(n,r=!1)=>{const{isMatch:i,match:s,output:d}=c.test(n,u,t,{glob:e,posix:a}),h={glob:e,state:l,regex:u,posix:a,input:n,output:d,match:s,isMatch:i};return"function"==typeof o.onResult&&o.onResult(h),!1===i?(h.isMatch=!1,!!r&&h):p(n)?("function"==typeof o.onIgnore&&o.onIgnore(h),h.isMatch=!1,!!r&&h):("function"==typeof o.onMatch&&o.onMatch(h),!r||h)};return n&&(d.state=l),d};c.test=(e,t,n,{glob:r,posix:i}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const o=n||{},a=o.format||(i?s.toPosixSlashes:null);let u=e===r,l=u&&a?a(e):e;return!1===u&&(l=a?a(e):e,u=l===r),!1!==u&&!0!==o.capture||(u=!0===o.matchBase||!0===o.basename?c.matchBase(e,t,n,i):t.exec(l)),{isMatch:Boolean(u),match:u,output:l}},c.matchBase=(e,t,n,i=s.isWindows(n))=>(t instanceof RegExp?t:c.makeRe(t,n)).test(r.basename(e)),c.isMatch=(e,t,n)=>c(t,n)(e),c.parse=(e,t)=>Array.isArray(e)?e.map(e=>c.parse(e,t)):o(e,{...t,fastpaths:!1}),c.scan=(e,t)=>i(e,t),c.compileRe=(e,t,n=!1,r=!1)=>{if(!0===n)return e.output;const i=t||{},o=i.contains?"":"^",s=i.contains?"":"$";let a=`${o}(?:${e.output})${s}`;e&&!0===e.negated&&(a=`^(?!${a}).*$`);const u=c.toRegex(a,t);return!0===r&&(u.state=e),u},c.makeRe=(e,t,n=!1,r=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");const i=t||{};let s,a={negated:!1,fastpaths:!0},u="";return e.startsWith("./")&&(e=e.slice(2),u=a.prefix="./"),!1===i.fastpaths||"."!==e[0]&&"*"!==e[0]||(s=o.fastpaths(e,t)),void 0===s?(a=o(e,t),a.prefix=u+(a.prefix||"")):a.output=s,c.compileRe(a,t,n,r)},c.toRegex=(e,t)=>{try{const n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=a,e.exports=c},function(e,t,n){"use strict";const r=n(169),{CHAR_ASTERISK:i,CHAR_AT:o,CHAR_BACKWARD_SLASH:s,CHAR_COMMA:a,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:u,CHAR_FORWARD_SLASH:l,CHAR_LEFT_CURLY_BRACE:p,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:f,CHAR_QUESTION_MARK:v,CHAR_RIGHT_CURLY_BRACE:y,CHAR_RIGHT_PARENTHESES:g,CHAR_RIGHT_SQUARE_BRACKET:m}=n(140),_=e=>e===l||e===s,b=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const n=t||{},E=e.length-1,S=!0===n.parts||!0===n.scanToEnd,w=[],T=[],P=[];let I,C,O=e,A=-1,x=0,R=0,N=!1,k=!1,D=!1,j=!1,M=!1,L=!1,F=!1,V=!1,U=!1,B=0,H={value:"",depth:0,isGlob:!1};const W=()=>A>=E,G=()=>(I=C,O.charCodeAt(++A));for(;A<E;){let e;if(C=G(),C!==s){if(!0===L||C===p){for(B++;!0!==W()&&(C=G());)if(C!==s)if(C!==p){if(!0!==L&&C===c&&(C=G())===c){if(N=H.isBrace=!0,D=H.isGlob=!0,U=!0,!0===S)continue;break}if(!0!==L&&C===a){if(N=H.isBrace=!0,D=H.isGlob=!0,U=!0,!0===S)continue;break}if(C===y&&(B--,0===B)){L=!1,N=H.isBrace=!0,U=!0;break}}else B++;else F=H.backslashes=!0,G();if(!0===S)continue;break}if(C!==l){if(!0!==n.noext){if(!0===(C===f||C===o||C===i||C===v||C===u)&&O.charCodeAt(A+1)===d){if(D=H.isGlob=!0,j=H.isExtglob=!0,U=!0,!0===S){for(;!0!==W()&&(C=G());)if(C!==s){if(C===g){D=H.isGlob=!0,U=!0;break}}else F=H.backslashes=!0,C=G();continue}break}}if(C===i){if(I===i&&(M=H.isGlobstar=!0),D=H.isGlob=!0,U=!0,!0===S)continue;break}if(C===v){if(D=H.isGlob=!0,U=!0,!0===S)continue;break}if(C===h)for(;!0!==W()&&(e=G());)if(e!==s){if(e===m){if(k=H.isBracket=!0,D=H.isGlob=!0,U=!0,!0===S)continue;break}}else F=H.backslashes=!0,G();if(!0===n.nonegate||C!==u||A!==x){if(!0!==n.noparen&&C===d){if(D=H.isGlob=!0,!0===S){for(;!0!==W()&&(C=G());)if(C!==d){if(C===g){U=!0;break}}else F=H.backslashes=!0,C=G();continue}break}if(!0===D){if(U=!0,!0===S)continue;break}}else V=H.negated=!0,x++}else{if(w.push(A),T.push(H),H={value:"",depth:0,isGlob:!1},!0===U)continue;if(I===c&&A===x+1){x+=2;continue}R=A+1}}else F=H.backslashes=!0,C=G(),C===p&&(L=!0)}!0===n.noext&&(j=!1,D=!1);let $=O,q="",K="";x>0&&(q=O.slice(0,x),O=O.slice(x),R-=x),$&&!0===D&&R>0?($=O.slice(0,R),K=O.slice(R)):!0===D?($="",K=O):$=O,$&&""!==$&&"/"!==$&&$!==O&&_($.charCodeAt($.length-1))&&($=$.slice(0,-1)),!0===n.unescape&&(K&&(K=r.removeBackslashes(K)),$&&!0===F&&($=r.removeBackslashes($)));const z={prefix:q,input:e,start:x,base:$,glob:K,isBrace:N,isBracket:k,isGlob:D,isExtglob:j,isGlobstar:M,negated:V};if(!0===n.tokens&&(z.maxDepth=0,_(C)||T.push(H),z.tokens=T),!0===n.parts||!0===n.tokens){let t;for(let r=0;r<w.length;r++){const i=t?t+1:x,o=w[r],s=e.slice(i,o);n.tokens&&(0===r&&0!==x?(T[r].isPrefix=!0,T[r].value=q):T[r].value=s,b(T[r]),z.maxDepth+=T[r].depth),0===r&&""===s||P.push(s),t=o}if(t&&t+1<e.length){const r=e.slice(t+1);P.push(r),n.tokens&&(T[T.length-1].value=r,b(T[T.length-1]),z.maxDepth+=T[T.length-1].depth)}z.slashes=w,z.parts=P}return z}},function(e,t,n){"use strict";const r=n(140),i=n(169),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:s,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:u}=r,l=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const n=`[${e.join("-")}]`;try{new RegExp(n)}catch(t){return e.map(e=>i.escapeRegex(e)).join("..")}return n},p=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=u[e]||e;const n={...t},d="number"==typeof n.maxLength?Math.min(o,n.maxLength):o;let h=e.length;if(h>d)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${d}`);const f={type:"bos",value:"",output:n.prepend||""},v=[f],y=n.capture?"":"?:",g=i.isWindows(t),m=r.globChars(g),_=r.extglobChars(m),{DOT_LITERAL:b,PLUS_LITERAL:E,SLASH_LITERAL:S,ONE_CHAR:w,DOTS_SLASH:T,NO_DOT:P,NO_DOT_SLASH:I,NO_DOTS_SLASH:C,QMARK:O,QMARK_NO_DOT:A,STAR:x,START_ANCHOR:R}=m,N=e=>`(${y}(?:(?!${R}${e.dot?T:b}).)*?)`,k=n.dot?"":P,D=n.dot?O:A;let j=!0===n.bash?N(n):x;n.capture&&(j=`(${j})`),"boolean"==typeof n.noext&&(n.noextglob=n.noext);const M={input:e,index:-1,start:0,dot:!0===n.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:v};e=i.removePrefix(e,M),h=e.length;const L=[],F=[],V=[];let U,B=f;const H=()=>M.index===h-1,W=M.peek=(t=1)=>e[M.index+t],G=M.advance=()=>e[++M.index],$=()=>e.slice(M.index+1),q=(e="",t=0)=>{M.consumed+=e,M.index+=t},K=e=>{M.output+=null!=e.output?e.output:e.value,q(e.value)},z=()=>{let e=1;for(;"!"===W()&&("("!==W(2)||"?"===W(3));)G(),M.start++,e++;return e%2!=0&&(M.negated=!0,M.start++,!0)},Y=e=>{M[e]++,V.push(e)},X=e=>{M[e]--,V.pop()},Q=e=>{if("globstar"===B.type){const t=M.braces>0&&("comma"===e.type||"brace"===e.type),n=!0===e.extglob||L.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||n||(M.output=M.output.slice(0,-B.output.length),B.type="star",B.value="*",B.output=j,M.output+=B.output)}if(L.length&&"paren"!==e.type&&!_[e.value]&&(L[L.length-1].inner+=e.value),(e.value||e.output)&&K(e),B&&"text"===B.type&&"text"===e.type)return B.value+=e.value,void(B.output=(B.output||"")+e.value);e.prev=B,v.push(e),B=e},J=(e,t)=>{const r={..._[t],conditions:1,inner:""};r.prev=B,r.parens=M.parens,r.output=M.output;const i=(n.capture?"(":"")+r.open;Y("parens"),Q({type:e,value:t,output:M.output?"":w}),Q({type:"paren",extglob:!0,value:G(),output:i}),L.push(r)},Z=e=>{let t=e.close+(n.capture?")":"");if("negate"===e.type){let r=j;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(r=N(n)),(r!==j||H()||/^\)+$/.test($()))&&(t=e.close=")$))"+r),"bos"===e.prev.type&&H()&&(M.negatedExtglob=!0)}Q({type:"paren",extglob:!0,value:U,output:t}),X("parens")};if(!1!==n.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let r=!1,o=e.replace(c,(e,t,n,i,o,s)=>"\\"===i?(r=!0,e):"?"===i?t?t+i+(o?O.repeat(o.length):""):0===s?D+(o?O.repeat(o.length):""):O.repeat(n.length):"."===i?b.repeat(n.length):"*"===i?t?t+i+(o?j:""):j:t?e:"\\"+e);return!0===r&&(o=!0===n.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),o===e&&!0===n.contains?(M.output=e,M):(M.output=i.wrapOutput(o,M,t),M)}for(;!H();){if(U=G(),"\0"===U)continue;if("\\"===U){const e=W();if("/"===e&&!0!==n.bash)continue;if("."===e||";"===e)continue;if(!e){U+="\\",Q({type:"text",value:U});continue}const t=/^\\+/.exec($());let r=0;if(t&&t[0].length>2&&(r=t[0].length,M.index+=r,r%2!=0&&(U+="\\")),!0===n.unescape?U=G()||"":U+=G()||"",0===M.brackets){Q({type:"text",value:U});continue}}if(M.brackets>0&&("]"!==U||"["===B.value||"[^"===B.value)){if(!1!==n.posix&&":"===U){const e=B.value.slice(1);if(e.includes("[")&&(B.posix=!0,e.includes(":"))){const e=B.value.lastIndexOf("["),t=B.value.slice(0,e),n=B.value.slice(e+2),r=s[n];if(r){B.value=t+r,M.backtrack=!0,G(),f.output||1!==v.indexOf(B)||(f.output=w);continue}}}("["===U&&":"!==W()||"-"===U&&"]"===W())&&(U="\\"+U),"]"!==U||"["!==B.value&&"[^"!==B.value||(U="\\"+U),!0===n.posix&&"!"===U&&"["===B.value&&(U="^"),B.value+=U,K({value:U});continue}if(1===M.quotes&&'"'!==U){U=i.escapeRegex(U),B.value+=U,K({value:U});continue}if('"'===U){M.quotes=1===M.quotes?0:1,!0===n.keepQuotes&&Q({type:"text",value:U});continue}if("("===U){Y("parens"),Q({type:"paren",value:U});continue}if(")"===U){if(0===M.parens&&!0===n.strictBrackets)throw new SyntaxError(p("opening","("));const e=L[L.length-1];if(e&&M.parens===e.parens+1){Z(L.pop());continue}Q({type:"paren",value:U,output:M.parens?")":"\\)"}),X("parens");continue}if("["===U){if(!0!==n.nobracket&&$().includes("]"))Y("brackets");else{if(!0!==n.nobracket&&!0===n.strictBrackets)throw new SyntaxError(p("closing","]"));U="\\"+U}Q({type:"bracket",value:U});continue}if("]"===U){if(!0===n.nobracket||B&&"bracket"===B.type&&1===B.value.length){Q({type:"text",value:U,output:"\\"+U});continue}if(0===M.brackets){if(!0===n.strictBrackets)throw new SyntaxError(p("opening","["));Q({type:"text",value:U,output:"\\"+U});continue}X("brackets");const e=B.value.slice(1);if(!0===B.posix||"^"!==e[0]||e.includes("/")||(U="/"+U),B.value+=U,K({value:U}),!1===n.literalBrackets||i.hasRegexChars(e))continue;const t=i.escapeRegex(B.value);if(M.output=M.output.slice(0,-B.value.length),!0===n.literalBrackets){M.output+=t,B.value=t;continue}B.value=`(${y}${t}|${B.value})`,M.output+=B.value;continue}if("{"===U&&!0!==n.nobrace){Y("braces");const e={type:"brace",value:U,output:"(",outputIndex:M.output.length,tokensIndex:M.tokens.length};F.push(e),Q(e);continue}if("}"===U){const e=F[F.length-1];if(!0===n.nobrace||!e){Q({type:"text",value:U,output:U});continue}let t=")";if(!0===e.dots){const e=v.slice(),r=[];for(let t=e.length-1;t>=0&&(v.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&r.unshift(e[t].value);t=l(r,n),M.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const n=M.output.slice(0,e.outputIndex),r=M.tokens.slice(e.tokensIndex);e.value=e.output="\\{",U=t="\\}",M.output=n;for(const e of r)M.output+=e.output||e.value}Q({type:"brace",value:U,output:t}),X("braces"),F.pop();continue}if("|"===U){L.length>0&&L[L.length-1].conditions++,Q({type:"text",value:U});continue}if(","===U){let e=U;const t=F[F.length-1];t&&"braces"===V[V.length-1]&&(t.comma=!0,e="|"),Q({type:"comma",value:U,output:e});continue}if("/"===U){if("dot"===B.type&&M.index===M.start+1){M.start=M.index+1,M.consumed="",M.output="",v.pop(),B=f;continue}Q({type:"slash",value:U,output:S});continue}if("."===U){if(M.braces>0&&"dot"===B.type){"."===B.value&&(B.output=b);const e=F[F.length-1];B.type="dots",B.output+=U,B.value+=U,e.dots=!0;continue}if(M.braces+M.parens===0&&"bos"!==B.type&&"slash"!==B.type){Q({type:"text",value:U,output:b});continue}Q({type:"dot",value:U,output:b});continue}if("?"===U){if(!(B&&"("===B.value)&&!0!==n.noextglob&&"("===W()&&"?"!==W(2)){J("qmark",U);continue}if(B&&"paren"===B.type){const e=W();let t=U;if("<"===e&&!i.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===B.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test($()))&&(t="\\"+U),Q({type:"text",value:U,output:t});continue}if(!0!==n.dot&&("slash"===B.type||"bos"===B.type)){Q({type:"qmark",value:U,output:A});continue}Q({type:"qmark",value:U,output:O});continue}if("!"===U){if(!0!==n.noextglob&&"("===W()&&("?"!==W(2)||!/[!=<:]/.test(W(3)))){J("negate",U);continue}if(!0!==n.nonegate&&0===M.index){z();continue}}if("+"===U){if(!0!==n.noextglob&&"("===W()&&"?"!==W(2)){J("plus",U);continue}if(B&&"("===B.value||!1===n.regex){Q({type:"plus",value:U,output:E});continue}if(B&&("bracket"===B.type||"paren"===B.type||"brace"===B.type)||M.parens>0){Q({type:"plus",value:U});continue}Q({type:"plus",value:E});continue}if("@"===U){if(!0!==n.noextglob&&"("===W()&&"?"!==W(2)){Q({type:"at",extglob:!0,value:U,output:""});continue}Q({type:"text",value:U});continue}if("*"!==U){"$"!==U&&"^"!==U||(U="\\"+U);const e=a.exec($());e&&(U+=e[0],M.index+=e[0].length),Q({type:"text",value:U});continue}if(B&&("globstar"===B.type||!0===B.star)){B.type="star",B.star=!0,B.value+=U,B.output=j,M.backtrack=!0,M.globstar=!0,q(U);continue}let t=$();if(!0!==n.noextglob&&/^\([^?]/.test(t)){J("star",U);continue}if("star"===B.type){if(!0===n.noglobstar){q(U);continue}const r=B.prev,i=r.prev,o="slash"===r.type||"bos"===r.type,s=i&&("star"===i.type||"globstar"===i.type);if(!0===n.bash&&(!o||t[0]&&"/"!==t[0])){Q({type:"star",value:U,output:""});continue}const a=M.braces>0&&("comma"===r.type||"brace"===r.type),c=L.length&&("pipe"===r.type||"paren"===r.type);if(!o&&"paren"!==r.type&&!a&&!c){Q({type:"star",value:U,output:""});continue}for(;"/**"===t.slice(0,3);){const n=e[M.index+4];if(n&&"/"!==n)break;t=t.slice(3),q("/**",3)}if("bos"===r.type&&H()){B.type="globstar",B.value+=U,B.output=N(n),M.output=B.output,M.globstar=!0,q(U);continue}if("slash"===r.type&&"bos"!==r.prev.type&&!s&&H()){M.output=M.output.slice(0,-(r.output+B.output).length),r.output="(?:"+r.output,B.type="globstar",B.output=N(n)+(n.strictSlashes?")":"|$)"),B.value+=U,M.globstar=!0,M.output+=r.output+B.output,q(U);continue}if("slash"===r.type&&"bos"!==r.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";M.output=M.output.slice(0,-(r.output+B.output).length),r.output="(?:"+r.output,B.type="globstar",B.output=`${N(n)}${S}|${S}${e})`,B.value+=U,M.output+=r.output+B.output,M.globstar=!0,q(U+G()),Q({type:"slash",value:"/",output:""});continue}if("bos"===r.type&&"/"===t[0]){B.type="globstar",B.value+=U,B.output=`(?:^|${S}|${N(n)}${S})`,M.output=B.output,M.globstar=!0,q(U+G()),Q({type:"slash",value:"/",output:""});continue}M.output=M.output.slice(0,-B.output.length),B.type="globstar",B.output=N(n),B.value+=U,M.output+=B.output,M.globstar=!0,q(U);continue}const r={type:"star",value:U,output:j};!0!==n.bash?!B||"bracket"!==B.type&&"paren"!==B.type||!0!==n.regex?(M.index!==M.start&&"slash"!==B.type&&"dot"!==B.type||("dot"===B.type?(M.output+=I,B.output+=I):!0===n.dot?(M.output+=C,B.output+=C):(M.output+=k,B.output+=k),"*"!==W()&&(M.output+=w,B.output+=w)),Q(r)):(r.output=U,Q(r)):(r.output=".*?","bos"!==B.type&&"slash"!==B.type||(r.output=k+r.output),Q(r))}for(;M.brackets>0;){if(!0===n.strictBrackets)throw new SyntaxError(p("closing","]"));M.output=i.escapeLast(M.output,"["),X("brackets")}for(;M.parens>0;){if(!0===n.strictBrackets)throw new SyntaxError(p("closing",")"));M.output=i.escapeLast(M.output,"("),X("parens")}for(;M.braces>0;){if(!0===n.strictBrackets)throw new SyntaxError(p("closing","}"));M.output=i.escapeLast(M.output,"{"),X("braces")}if(!0===n.strictSlashes||"star"!==B.type&&"bracket"!==B.type||Q({type:"maybe_slash",value:"",output:S+"?"}),!0===M.backtrack){M.output="";for(const e of M.tokens)M.output+=null!=e.output?e.output:e.value,e.suffix&&(M.output+=e.suffix)}return M};d.fastpaths=(e,t)=>{const n={...t},s="number"==typeof n.maxLength?Math.min(o,n.maxLength):o,a=e.length;if(a>s)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${s}`);e=u[e]||e;const c=i.isWindows(t),{DOT_LITERAL:l,SLASH_LITERAL:p,ONE_CHAR:d,DOTS_SLASH:h,NO_DOT:f,NO_DOTS:v,NO_DOTS_SLASH:y,STAR:g,START_ANCHOR:m}=r.globChars(c),_=n.dot?v:f,b=n.dot?y:f,E=n.capture?"":"?:";let S=!0===n.bash?".*?":g;n.capture&&(S=`(${S})`);const w=e=>!0===e.noglobstar?S:`(${E}(?:(?!${m}${e.dot?h:l}).)*?)`,T=e=>{switch(e){case"*":return`${_}${d}${S}`;case".*":return`${l}${d}${S}`;case"*.*":return`${_}${S}${l}${d}${S}`;case"*/*":return`${_}${S}${p}${d}${b}${S}`;case"**":return _+w(n);case"**/*":return`(?:${_}${w(n)}${p})?${b}${d}${S}`;case"**/*.*":return`(?:${_}${w(n)}${p})?${b}${S}${l}${d}${S}`;case"**/.*":return`(?:${_}${w(n)}${p})?${l}${d}${S}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const n=T(t[1]);if(!n)return;return n+l+t[2]}}},P=i.removePrefix(e,{negated:!1,prefix:""});let I=T(P);return I&&!0!==n.strictSlashes&&(I+=p+"?"),I},e.exports=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(211),i=n(212),o={returnIndex:!1},s=(e,t,n,r)=>{const o=Array.isArray(n),s=o?n[0]:n;if(!o&&"string"!=typeof s)throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(s));const a=i(s);for(let e=0;e<t.length;e++){if((0,t[e])(a))return!!r&&-1}const c=o&&[a].concat(n.slice(1));for(let t=0;t<e.length;t++){const n=e[t];if(o?n(...c):n(a))return!r||t}return!!r&&-1},a=(e,t,n=o)=>{if(null==e)throw new TypeError("anymatch: specify first argument");const i="boolean"==typeof n?{returnIndex:n}:n,a=i.returnIndex||!1,c=(u=e,Array.isArray(u)?u:[u]);var u;const l=c.filter(e=>"string"==typeof e&&"!"===e.charAt(0)).map(e=>e.slice(1)).map(e=>r(e,i)),p=c.map(e=>((e,t)=>{if("function"==typeof e)return e;if("string"==typeof e){const n=r(e,t);return t=>e===t||n(t)}return e instanceof RegExp?t=>e.test(t):e=>!1})(e,i));return null==t?(e,t=!1)=>s(p,l,e,"boolean"==typeof t&&t):s(p,l,t,a)};a.default=a,e.exports=a},function(e,t,n){"use strict";var r=n(213),i=n(0).posix.dirname,o="win32"===n(35).platform(),s=/\\/g,a=/[\{\[].*[\}\]]$/,c=/(^|[^\\])([\{\[]|\([^\)]+$)/,u=/\\([\!\*\?\|\[\]\(\)\{\}])/g;e.exports=function(e,t){Object.assign({flipBackslashes:!0},t).flipBackslashes&&o&&e.indexOf("/")<0&&(e=e.replace(s,"/")),a.test(e)&&(e+="/"),e+="a";do{e=i(e)}while(r(e)||c.test(e));return e.replace(u,"$1")}},function(e,t){
/*!
 * is-extglob <https://github.com/jonschlinkert/is-extglob>
 *
 * Copyright (c) 2014-2016, Jon Schlinkert.
 * Licensed under the MIT License.
 */
e.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},function(e,t,n){"use strict";const r=n(170),i=n(378),o=n(381),s=n(382),a=(e,t={})=>{let n=[];if(Array.isArray(e))for(let r of e){let e=a.create(r,t);Array.isArray(e)?n.push(...e):n.push(e)}else n=[].concat(a.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(n=[...new Set(n)]),n};a.parse=(e,t={})=>s(e,t),a.stringify=(e,t={})=>r("string"==typeof e?a.parse(e,t):e,t),a.compile=(e,t={})=>("string"==typeof e&&(e=a.parse(e,t)),i(e,t)),a.expand=(e,t={})=>{"string"==typeof e&&(e=a.parse(e,t));let n=o(e,t);return!0===t.noempty&&(n=n.filter(Boolean)),!0===t.nodupes&&(n=[...new Set(n)]),n},a.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?a.compile(e,t):a.expand(e,t),e.exports=a},function(e,t,n){"use strict";const r=n(214),i=n(171);e.exports=(e,t={})=>{let n=(e,o={})=>{let s=i.isInvalidBrace(o),a=!0===e.invalid&&!0===t.escapeInvalid,c=!0===s||!0===a,u=!0===t.escapeInvalid?"\\":"",l="";if(!0===e.isOpen)return u+e.value;if(!0===e.isClose)return u+e.value;if("open"===e.type)return c?u+e.value:"(";if("close"===e.type)return c?u+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let n=i.reduce(e.nodes),o=r(...n,{...t,wrap:!1,toRegex:!0});if(0!==o.length)return n.length>1&&o.length>1?`(${o})`:o}if(e.nodes)for(let t of e.nodes)l+=n(t,e);return l};return n(e)}},function(e,t,n){"use strict";
/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const r=n(380),i=(e,t,n)=>{if(!1===r(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===r(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let o={relaxZeros:!0,...n};"boolean"==typeof o.strictZeros&&(o.relaxZeros=!1===o.strictZeros);let c=e+":"+t+"="+String(o.relaxZeros)+String(o.shorthand)+String(o.capture)+String(o.wrap);if(i.cache.hasOwnProperty(c))return i.cache[c].result;let u=Math.min(e,t),l=Math.max(e,t);if(1===Math.abs(u-l)){let n=e+"|"+t;return o.capture?`(${n})`:!1===o.wrap?n:`(?:${n})`}let p=f(e)||f(t),d={min:e,max:t,a:u,b:l},h=[],v=[];if(p&&(d.isPadded=p,d.maxLen=String(d.max).length),u<0){v=s(l<0?Math.abs(l):1,Math.abs(u),d,o),u=d.a=0}return l>=0&&(h=s(u,l,d,o)),d.negatives=v,d.positives=h,d.result=function(e,t,n){let r=a(e,t,"-",!1,n)||[],i=a(t,e,"",!1,n)||[],o=a(e,t,"-?",!0,n)||[];return r.concat(o).concat(i).join("|")}(v,h,o),!0===o.capture?d.result=`(${d.result})`:!1!==o.wrap&&h.length+v.length>1&&(d.result=`(?:${d.result})`),i.cache[c]=d,d.result};function o(e,t,n){if(e===t)return{pattern:e,count:[],digits:0};let r=function(e,t){let n=[];for(let r=0;r<e.length;r++)n.push([e[r],t[r]]);return n}(e,t),i=r.length,o="",s=0;for(let e=0;e<i;e++){let[t,i]=r[e];t===i?o+=t:"0"!==t||"9"!==i?o+=h(t,i,n):s++}return s&&(o+=!0===n.shorthand?"\\d":"[0-9]"),{pattern:o,count:[s],digits:i}}function s(e,t,n,r){let i,s=function(e,t){let n=1,r=1,i=l(e,n),o=new Set([t]);for(;e<=i&&i<=t;)o.add(i),n+=1,i=l(e,n);for(i=p(t+1,r)-1;e<i&&i<=t;)o.add(i),r+=1,i=p(t+1,r)-1;return o=[...o],o.sort(c),o}(e,t),a=[],u=e;for(let e=0;e<s.length;e++){let t=s[e],c=o(String(u),String(t),r),l="";n.isPadded||!i||i.pattern!==c.pattern?(n.isPadded&&(l=v(t,n,r)),c.string=l+c.pattern+d(c.count),a.push(c),u=t+1,i=c):(i.count.length>1&&i.count.pop(),i.count.push(c.count[0]),i.string=i.pattern+d(i.count),u=t+1)}return a}function a(e,t,n,r,i){let o=[];for(let i of e){let{string:e}=i;r||u(t,"string",e)||o.push(n+e),r&&u(t,"string",e)&&o.push(n+e)}return o}function c(e,t){return e>t?1:t>e?-1:0}function u(e,t,n){return e.some(e=>e[t]===n)}function l(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function p(e,t){return e-e%Math.pow(10,t)}function d(e){let[t=0,n=""]=e;return n||t>1?`{${t+(n?","+n:"")}}`:""}function h(e,t,n){return`[${e}${t-e==1?"":"-"}${t}]`}function f(e){return/^-?(0+)\d/.test(e)}function v(e,t,n){if(!t.isPadded)return e;let r=Math.abs(t.maxLen-String(e).length),i=!1!==n.relaxZeros;switch(r){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${r}}`:`0{${r}}`}}i.cache={},i.clearCache=()=>i.cache={},e.exports=i},function(e,t,n){"use strict";
/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,n){"use strict";const r=n(214),i=n(170),o=n(171),s=(e="",t="",n=!1)=>{let r=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return n?o.flatten(t).map(e=>`{${e}}`):t;for(let i of e)if(Array.isArray(i))for(let e of i)r.push(s(e,t,n));else for(let e of t)!0===n&&"string"==typeof e&&(e=`{${e}}`),r.push(Array.isArray(e)?s(i,e,n):i+e);return o.flatten(r)};e.exports=(e,t={})=>{let n=void 0===t.rangeLimit?1e3:t.rangeLimit,a=(e,c={})=>{e.queue=[];let u=c,l=c.queue;for(;"brace"!==u.type&&"root"!==u.type&&u.parent;)u=u.parent,l=u.queue;if(e.invalid||e.dollar)return void l.push(s(l.pop(),i(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void l.push(s(l.pop(),["{}"]));if(e.nodes&&e.ranges>0){let a=o.reduce(e.nodes);if(o.exceedsLimit(...a,t.step,n))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=r(...a,t);return 0===c.length&&(c=i(e,t)),l.push(s(l.pop(),c)),void(e.nodes=[])}let p=o.encloseBrace(e),d=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,d=h.queue;for(let t=0;t<e.nodes.length;t++){let n=e.nodes[t];"comma"!==n.type||"brace"!==e.type?"close"!==n.type?n.value&&"open"!==n.type?d.push(s(d.pop(),n.value)):n.nodes&&a(n,e):l.push(s(l.pop(),d,p)):(1===t&&d.push(""),d.push(""))}return d};return o.flatten(a(e))}},function(e,t,n){"use strict";const r=n(170),{MAX_LENGTH:i,CHAR_BACKSLASH:o,CHAR_BACKTICK:s,CHAR_COMMA:a,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:u,CHAR_RIGHT_PARENTHESES:l,CHAR_LEFT_CURLY_BRACE:p,CHAR_RIGHT_CURLY_BRACE:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:v,CHAR_SINGLE_QUOTE:y,CHAR_NO_BREAK_SPACE:g,CHAR_ZERO_WIDTH_NOBREAK_SPACE:m}=n(383);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let n=t||{},_="number"==typeof n.maxLength?Math.min(i,n.maxLength):i;if(e.length>_)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${_})`);let b,E={type:"root",input:e,nodes:[]},S=[E],w=E,T=E,P=0,I=e.length,C=0,O=0;const A=()=>e[C++],x=e=>{if("text"===e.type&&"dot"===T.type&&(T.type="text"),!T||"text"!==T.type||"text"!==e.type)return w.nodes.push(e),e.parent=w,e.prev=T,T=e,e;T.value+=e.value};for(x({type:"bos"});C<I;)if(w=S[S.length-1],b=A(),b!==m&&b!==g)if(b!==o)if(b!==f)if(b!==h)if(b!==u)if(b!==l)if(b!==v&&b!==y&&b!==s)if(b!==p)if(b!==d)if(b===a&&O>0){if(w.ranges>0){w.ranges=0;let e=w.nodes.shift();w.nodes=[e,{type:"text",value:r(w)}]}x({type:"comma",value:b}),w.commas++}else if(b===c&&O>0&&0===w.commas){let e=w.nodes;if(0===O||0===e.length){x({type:"text",value:b});continue}if("dot"===T.type){if(w.range=[],T.value+=b,T.type="range",3!==w.nodes.length&&5!==w.nodes.length){w.invalid=!0,w.ranges=0,T.type="text";continue}w.ranges++,w.args=[];continue}if("range"===T.type){e.pop();let t=e[e.length-1];t.value+=T.value+b,T=t,w.ranges--;continue}x({type:"dot",value:b})}else x({type:"text",value:b});else{if("brace"!==w.type){x({type:"text",value:b});continue}let e="close";w=S.pop(),w.close=!0,x({type:e,value:b}),O--,w=S[S.length-1]}else{O++;let e=T.value&&"$"===T.value.slice(-1)||!0===w.dollar;w=x({type:"brace",open:!0,close:!1,dollar:e,depth:O,commas:0,ranges:0,nodes:[]}),S.push(w),x({type:"open",value:b})}else{let e,n=b;for(!0!==t.keepQuotes&&(b="");C<I&&(e=A());)if(e!==o){if(e===n){!0===t.keepQuotes&&(b+=e);break}b+=e}else b+=e+A();x({type:"text",value:b})}else{if("paren"!==w.type){x({type:"text",value:b});continue}w=S.pop(),x({type:"text",value:b}),w=S[S.length-1]}else w=x({type:"paren",nodes:[]}),S.push(w),x({type:"text",value:b});else{P++;let e;for(;C<I&&(e=A());)if(b+=e,e!==h)if(e!==o){if(e===f&&(P--,0===P))break}else b+=A();else P++;x({type:"text",value:b})}else x({type:"text",value:"\\"+b});else x({type:"text",value:(t.keepEscaping?b:"")+A()});do{if(w=S.pop(),"root"!==w.type){w.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=S[S.length-1],t=e.nodes.indexOf(w);e.nodes.splice(t,1,...w.nodes)}}while(S.length>0);return x({type:"eos"}),E}},function(e,t,n){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:"",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,n){"use strict";const r=n(16),i=n(0),{promisify:o}=n(24),s=n(385),{isWindows:a,isLinux:c,EMPTY_FN:u,EMPTY_STR:l,KEY_LISTENERS:p,KEY_ERR:d,KEY_RAW:h,HANDLER_KEYS:f,EV_CHANGE:v,EV_ADD:y,EV_ADD_DIR:g,EV_ERROR:m,STR_DATA:_,STR_END:b,BRACE_START:E,STAR:S}=n(172),w=o(r.open),T=o(r.stat),P=o(r.lstat),I=o(r.close),C=o(r.realpath),O={lstat:P,stat:T},A=(e,t)=>{e instanceof Set?e.forEach(t):t(e)},x=(e,t,n)=>{let r=e[t];r instanceof Set||(e[t]=r=new Set([r])),r.add(n)},R=(e,t,n)=>{const r=e[t];r instanceof Set?r.delete(n):r===n&&delete e[t]},N=e=>e instanceof Set?0===e.size:!e,k=new Map;function D(e,t,n,o,s){const a=(t,r)=>{n(e),s(t,r,{watchedPath:e}),r&&e!==r&&j(i.resolve(e,r),p,i.join(e,r))};try{return r.watch(e,t,a)}catch(e){o(e)}}const j=(e,t,n,r,i)=>{const o=k.get(e);o&&A(o[t],e=>{e(n,r,i)})},M=(e,t,n,r)=>{const{listener:i,errHandler:o,rawEmitter:s}=r;let c,u=k.get(t);if(!n.persistent)return c=D(e,n,i,o,s),c.close.bind(c);if(u)x(u,p,i),x(u,d,o),x(u,h,s);else{if(c=D(e,n,j.bind(null,t,p),o,j.bind(null,t,h)),!c)return;c.on(m,async n=>{const r=j.bind(null,t,d);if(u.watcherUnusable=!0,a&&"EPERM"===n.code)try{const t=await w(e,"r");await I(t),r(n)}catch(e){}else r(n)}),u={listeners:i,errHandlers:o,rawEmitters:s,watcher:c},k.set(t,u)}return()=>{R(u,p,i),R(u,d,o),R(u,h,s),N(u.listeners)&&(u.watcher.close(),k.delete(t),f.forEach((e=>t=>{const n=e[t];n instanceof Set?n.clear():delete e[t]})(u)),u.watcher=void 0,Object.freeze(u))}},L=new Map;e.exports=class{constructor(e){this.fsw=e,this._boundHandleError=t=>e._handleError(t)}_watchWithNodeFs(e,t){const n=this.fsw.options,o=i.dirname(e),a=i.basename(e);this.fsw._getWatchedDir(o).add(a);const c=i.resolve(e),l={persistent:n.persistent};let d;return t||(t=u),n.usePolling?(l.interval=n.enableBinaryInterval&&s(a)?n.binaryInterval:n.interval,d=((e,t,n,i)=>{const{listener:o,rawEmitter:s}=i;let a=L.get(t),c=new Set,u=new Set;const l=a&&a.options;return l&&(l.persistent<n.persistent||l.interval>n.interval)&&(c=a.listeners,u=a.rawEmitters,r.unwatchFile(t),a=void 0),a?(x(a,p,o),x(a,h,s)):(a={listeners:o,rawEmitters:s,options:n,watcher:r.watchFile(t,n,(n,r)=>{A(a.rawEmitters,e=>{e(v,t,{curr:n,prev:r})});const i=n.mtimeMs;(n.size!==r.size||i>r.mtimeMs||0===i)&&A(a.listeners,t=>t(e,n))})},L.set(t,a)),()=>{R(a,p,o),R(a,h,s),N(a.listeners)&&(L.delete(t),r.unwatchFile(t),a.options=a.watcher=void 0,Object.freeze(a))}})(e,c,l,{listener:t,rawEmitter:this.fsw._emitRaw})):d=M(e,c,l,{listener:t,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),d}_handleFile(e,t,n){if(this.fsw.closed)return;const r=i.dirname(e),o=i.basename(e),s=this.fsw._getWatchedDir(r);let a=t;if(s.has(o))return;const u=async(t,n)=>{if(this.fsw._throttle("watch",e,5))if(n&&0!==n.mtimeMs){if(s.has(o)){const t=n.atimeMs,r=n.mtimeMs;(!t||t<=r||r!==a.mtimeMs)&&this.fsw._emit(v,e,n),a=n}}else try{const n=await T(e);if(this.fsw.closed)return;const r=n.atimeMs,i=n.mtimeMs;(!r||r<=i||i!==a.mtimeMs)&&this.fsw._emit(v,e,n),c&&a.ino!==n.ino?(this.fsw._closeFile(t),a=n,this.fsw._addPathCloser(t,this._watchWithNodeFs(e,u))):a=n}catch(e){this.fsw._remove(r,o)}},l=this._watchWithNodeFs(e,u);if((!n||!this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(y,e,0))return;this.fsw._emit(y,e,t)}return l}async _handleSymlink(e,t,n,r){if(this.fsw.closed)return;const i=e.fullPath,o=this.fsw._getWatchedDir(t);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();const t=await C(n);if(this.fsw.closed)return;return o.has(r)?this.fsw._symlinkPaths.get(i)!==t&&(this.fsw._symlinkPaths.set(i,t),this.fsw._emit(v,n,e.stats)):(o.add(r),this.fsw._symlinkPaths.set(i,t),this.fsw._emit(y,n,e.stats)),this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(i))return!0;this.fsw._symlinkPaths.set(i,!0)}_handleRead(e,t,n,r,o,s,a){if(e=i.join(e,l),!n.hasGlob&&!(a=this.fsw._throttle("readdir",e,1e3)))return;const c=this.fsw._getWatchedDir(n.path),u=new Set;let p=this.fsw._readdirp(e,{fileFilter:e=>n.filterPath(e),directoryFilter:e=>n.filterDir(e),depth:0}).on(_,async a=>{if(this.fsw.closed)return void(p=void 0);const l=a.path;let d=i.join(e,l);u.add(l),a.stats.isSymbolicLink()&&await this._handleSymlink(a,e,d,l)||(this.fsw.closed?p=void 0:l!==r&&(r||c.has(l))||(this.fsw._incrReadyCount(),d=i.join(o,i.relative(o,d)),this._addToNodeFs(d,t,n,s+1)))}).on(m,this._boundHandleError);return new Promise(t=>p.once(b,()=>{if(this.fsw.closed)return void(p=void 0);const l=!!a&&a.clear();t(),c.getChildren().filter(t=>t!==e&&!u.has(t)&&(!n.hasGlob||n.filterPath({fullPath:i.resolve(e,t)}))).forEach(t=>{this.fsw._remove(e,t)}),p=void 0,l&&this._handleRead(e,!1,n,r,o,s,a)}))}async _handleDir(e,t,n,r,o,s,a){const c=this.fsw._getWatchedDir(i.dirname(e)),u=c.has(i.basename(e));let l;n&&this.fsw.options.ignoreInitial||o||u||s.hasGlob&&!s.globFilter(e)||this.fsw._emit(g,e,t),c.add(i.basename(e)),this.fsw._getWatchedDir(e);const p=this.fsw.options.depth;if((null==p||r<=p)&&!this.fsw._symlinkPaths.has(a)){if(!o&&(await this._handleRead(e,n,s,o,e,r,void 0),this.fsw.closed))return;l=this._watchWithNodeFs(e,(t,n)=>{n&&0===n.mtimeMs||this._handleRead(t,!1,s,o,e,r,void 0)})}return l}async _addToNodeFs(e,t,n,r,o){const s=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return s(),!1;const a=this.fsw._getWatchHelpers(e,r);!a.hasGlob&&n&&(a.hasGlob=n.hasGlob,a.globFilter=n.globFilter,a.filterPath=e=>n.filterPath(e),a.filterDir=e=>n.filterDir(e));try{const n=await O[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,n))return s(),!1;const c=this.fsw.options.followSymlinks&&!e.includes(S)&&!e.includes(E);let u;if(n.isDirectory()){const i=c?await C(e):e;if(this.fsw.closed)return;if(u=await this._handleDir(a.watchPath,n,t,r,o,a,i),this.fsw.closed)return;e!==i&&void 0!==i&&this.fsw._symlinkPaths.set(i,!0)}else if(n.isSymbolicLink()){const o=c?await C(e):e;if(this.fsw.closed)return;const s=i.dirname(a.watchPath);if(this.fsw._getWatchedDir(s).add(a.watchPath),this.fsw._emit(y,a.watchPath,n),u=await this._handleDir(s,n,t,r,e,a,o),this.fsw.closed)return;void 0!==o&&this.fsw._symlinkPaths.set(i.resolve(e),o)}else u=this._handleFile(a.watchPath,n,t);return s(),this.fsw._addPathCloser(e,u),!1}catch(t){if(this.fsw._handleError(t))return s(),e}}}},function(e,t,n){"use strict";const r=n(0),i=n(386),o=new Set(i);e.exports=e=>o.has(r.extname(e).slice(1).toLowerCase())},function(e,t,n){e.exports=n(387)},function(e){e.exports=JSON.parse('["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","oga","ogg","ogv","otf","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]')},function(e,t,n){"use strict";const r=n(16),i=n(0),{promisify:o}=n(24);let s;try{s=n(389)}catch(e){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(e)}if(s){const e=process.version.match(/v(\d+)\.(\d+)/);if(e&&e[1]&&e[2]){const t=Number.parseInt(e[1],10),n=Number.parseInt(e[2],10);8===t&&n<16&&(s=void 0)}}const{EV_ADD:a,EV_CHANGE:c,EV_ADD_DIR:u,EV_UNLINK:l,EV_ERROR:p,STR_DATA:d,STR_END:h,FSEVENT_CREATED:f,FSEVENT_MODIFIED:v,FSEVENT_DELETED:y,FSEVENT_MOVED:g,FSEVENT_UNKNOWN:m,FSEVENT_TYPE_FILE:_,FSEVENT_TYPE_DIRECTORY:b,FSEVENT_TYPE_SYMLINK:E,ROOT_GLOBSTAR:S,DIR_SUFFIX:w,DOT_SLASH:T,FUNCTION_TYPE:P,EMPTY_FN:I,IDENTITY_FN:C}=n(172),O=o(r.stat),A=o(r.lstat),x=o(r.realpath),R={stat:O,lstat:A},N=new Map,k=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),D=(e,t)=>({stop:s.watch(e,t)});const j=e=>{let t=0;for(const n of N.keys())if(0===n.indexOf(e)&&(t++,t>=10))return!0;return!1},M=(e,t)=>{let n=0;for(;!e.indexOf(t)&&(e=i.dirname(e))!==t;)n++;return n},L=(e,t)=>e.type===b&&t.isDirectory()||e.type===E&&t.isSymbolicLink()||e.type===_&&t.isFile();e.exports=class{constructor(e){this.fsw=e}checkIgnored(e,t){const n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,t))return n.add(e),t&&t.isDirectory()&&n.add(e+S),!0;n.delete(e),n.delete(e+S)}addOrChange(e,t,n,r,i,o,s,u){const l=i.has(o)?c:a;this.handleEvent(l,e,t,n,r,i,o,s,u)}async checkExists(e,t,n,r,i,o,s,a){try{const c=await O(e);if(this.fsw.closed)return;L(s,c)?this.addOrChange(e,t,n,r,i,o,s,a):this.handleEvent(l,e,t,n,r,i,o,s,a)}catch(c){"EACCES"===c.code?this.addOrChange(e,t,n,r,i,o,s,a):this.handleEvent(l,e,t,n,r,i,o,s,a)}}handleEvent(e,t,n,r,i,o,s,c,p){if(!this.fsw.closed&&!this.checkIgnored(t))if(e===l){const e=c.type===b;(e||o.has(s))&&this.fsw._remove(i,s,e)}else{if(e===a){if(c.type===b&&this.fsw._getWatchedDir(t),c.type===E&&p.followSymlinks){const e=void 0===p.depth?void 0:M(n,r)+1;return this._addToFsEvents(t,!1,!0,e)}this.fsw._getWatchedDir(i).add(s)}const o=c.type===b?e+w:e;this.fsw._emit(o,t),o===u&&this._addToFsEvents(t,!1,!0)}}_watchWithFsEvents(e,t,n,r){if(this.fsw.closed)return;if(this.fsw._isIgnored(e))return;const o=this.fsw.options,a=function(e,t,n,r){let o=i.extname(e)?i.dirname(e):e;const a=i.dirname(o);let c=N.get(o);j(a)&&(o=a);const u=i.resolve(e),l=u!==t,p=(e,r,o)=>{l&&(e=e.replace(t,u)),e!==u&&e.indexOf(u+i.sep)||n(e,r,o)};let d=!1;for(const e of N.keys())if(0===t.indexOf(i.resolve(e)+i.sep)){o=e,c=N.get(o),d=!0;break}return c||d?c.listeners.add(p):(c={listeners:new Set([p]),rawEmitter:r,watcher:D(o,(e,t)=>{if(!c.listeners.size)return;const n=s.getInfo(e,t);c.listeners.forEach(r=>{r(e,t,n)}),c.rawEmitter(n.event,e,n)})},N.set(o,c)),()=>{const e=c.listeners;if(e.delete(p),!e.size&&(N.delete(o),c.watcher))return c.watcher.stop().then(()=>{c.rawEmitter=c.watcher=void 0,Object.freeze(c)})}}(e,t,async(s,a,c)=>{if(this.fsw.closed)return;if(void 0!==o.depth&&M(s,t)>o.depth)return;const u=n(i.join(e,i.relative(e,s)));if(r&&!r(u))return;const p=i.dirname(u),d=i.basename(u),h=this.fsw._getWatchedDir(c.type===b?u:p);if(k.has(a)||c.event===m)if(typeof o.ignored===P){let e;try{e=await O(u)}catch(e){}if(this.fsw.closed)return;if(this.checkIgnored(u,e))return;L(c,e)?this.addOrChange(u,s,t,p,h,d,c,o):this.handleEvent(l,u,s,t,p,h,d,c,o)}else this.checkExists(u,s,t,p,h,d,c,o);else switch(c.event){case f:case v:return this.addOrChange(u,s,t,p,h,d,c,o);case y:case g:return this.checkExists(u,s,t,p,h,d,c,o)}},this.fsw._emitRaw);return this.fsw._emitReady(),a}async _handleFsEventsSymlink(e,t,n,r){if(!this.fsw.closed&&!this.fsw._symlinkPaths.has(t)){this.fsw._symlinkPaths.set(t,!0),this.fsw._incrReadyCount();try{const t=await x(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(t))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(t||e,r=>{let o=e;return t&&t!==T?o=r.replace(t,e):r!==T&&(o=i.join(e,r)),n(o)},!1,r)}catch(e){if(this.fsw._handleError(e))return this.fsw._emitReady()}}}emitAdd(e,t,n,r,o){const s=n(e),c=t.isDirectory(),l=this.fsw._getWatchedDir(i.dirname(s)),p=i.basename(s);c&&this.fsw._getWatchedDir(s),l.has(p)||(l.add(p),r.ignoreInitial&&!0!==o||this.fsw._emit(c?u:a,s,t))}initWatch(e,t,n,r){if(this.fsw.closed)return;const o=this._watchWithFsEvents(n.watchPath,i.resolve(e||n.watchPath),r,n.globFilter);this.fsw._addPathCloser(t,o)}async _addToFsEvents(e,t,n,r){if(this.fsw.closed)return;const o=this.fsw.options,s=typeof t===P?t:C,a=this.fsw._getWatchHelpers(e);try{const t=await R[a.statMethod](a.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(a.watchPath,t))throw null;if(t.isDirectory()){if(a.globFilter||this.emitAdd(s(e),t,s,o,n),r&&r>o.depth)return;this.fsw._readdirp(a.watchPath,{fileFilter:e=>a.filterPath(e),directoryFilter:e=>a.filterDir(e),...(c=o.depth-(r||0),isNaN(c)?{}:{depth:c})}).on(d,e=>{if(this.fsw.closed)return;if(e.stats.isDirectory()&&!a.filterPath(e))return;const t=i.join(a.watchPath,e.path),{fullPath:r}=e;if(a.followSymlinks&&e.stats.isSymbolicLink()){const e=void 0===o.depth?void 0:M(t,i.resolve(a.watchPath))+1;this._handleFsEventsSymlink(t,r,s,e)}else this.emitAdd(t,e.stats,s,o,n)}).on(p,I).on(h,()=>{this.fsw._emitReady()})}else this.emitAdd(a.watchPath,t,s,o,n),this.fsw._emitReady()}catch(e){e&&!this.fsw._handleError(e)||(this.fsw._emitReady(),this.fsw._emitReady())}var c;if(o.persistent&&!0!==n)if(typeof t===P)this.initWatch(void 0,e,a,s);else{let t;try{t=await x(a.watchPath)}catch(e){}this.initWatch(t,e,a,s)}}},e.exports.canUse=()=>s&&N.size<128},function(e,t,n){"use strict";if("darwin"!==process.platform)throw new Error(`Module 'fsevents' is not compatible with platform '${process.platform}'`);const r=n(390),i=r.constants;function o(e){return i.ItemIsFile&e?"file":i.ItemIsDir&e?"directory":i.ItemIsSymlink&e?"symlink":void 0}function s(e){return i.ItemRemoved&e?"deleted":i.ItemRenamed&e?"moved":i.ItemCreated&e?"created":i.ItemModified&e?"modified":i.RootChanged&e?"root-changed":i.ItemCloned&e?"cloned":function(e){for(let t in e)if(e[t])return!0;return!1}(e)?"modified":"unknown"}function a(e){return{inode:!!(i.ItemInodeMetaMod&e),finder:!!(i.ItemFinderInfoMod&e),access:!!(i.ItemChangeOwner&e),xattrs:!!(i.ItemXattrMod&e)}}t.watch=function(e,t){if("string"!=typeof e)throw new TypeError("fsevents argument 1 must be a string and not a "+typeof e);if("function"!=typeof t)throw new TypeError("fsevents argument 2 must be a function and not a "+typeof t);let n=r.start(e,t);if(!n)throw new Error("could not watch: "+e);return()=>{const e=n?Promise.resolve(n).then(r.stop):Promise.resolve(void 0);return n=void 0,e}},t.getInfo=function(e,t){return{path:e,flags:t,event:s(t),type:o(t),changes:a(t)}},t.constants=i},function(e,t,n){(function(e){try{process.dlopen(e,__dirname+"/"+n.p+"047bc7a1ca6245a660a213f1ff8a1558.node")}catch(e){throw new Error("node-loader:\n"+e)}}).call(this,n(199)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceLocators=t.ExtensionLocators=void 0;const r=n(11),i=n(31),o=n(74),s=n(209),a=n(216);class c extends s.Locators{constructor(e,t){super([...e,t]),this.nonWorkspace=e,this.workspace=t}iterEnvs(e){var t;const n=[this.workspace.iterEnvs(e)];return(null===(t=null==e?void 0:e.searchLocations)||void 0===t?void 0:t.doNotIncludeNonRooted)||n.push(...this.nonWorkspace.map(t=>t.iterEnvs(e))),s.combineIterators(n)}}t.ExtensionLocators=c;class u extends a.LazyResourceBasedLocator{constructor(e,t){super(),this.watchRoots=e,this.factories=t,this.locators={},this.roots={}}async dispose(){await super.dispose();Object.keys(this.roots).map(e=>this.roots[e]).forEach(e=>this.removeRoot(e))}doIterEnvs(e){const t=Object.keys(this.locators).map(t=>{if(void 0!==(null==e?void 0:e.searchLocations)){const n=this.roots[t],o=i.getURIFilter(n,{checkParent:!0,checkChild:!0});if(!e.searchLocations.roots.some(o))return r.iterEmpty()}const[n]=this.locators[t];return n.iterEnvs(e)});return s.combineIterators(t)}async initResources(){const e=this.watchRoots({initRoot:e=>this.addRoot(e),addRoot:e=>{this.removeRoot(e),this.addRoot(e),this.emitter.fire({searchLocation:e})},removeRoot:e=>{this.removeRoot(e),this.emitter.fire({searchLocation:e})}});this.disposables.push(e)}addRoot(e){const t=[],n=new o.Disposables;this.factories.forEach(r=>{r(e).forEach(e=>{t.push(e),void 0!==e.dispose&&n.push(e)})});const r=new s.Locators(t),i=e.toString();this.locators[i]=[r,n],this.roots[i]=e,n.push(r.onChanged(t=>{void 0===t.searchLocation&&(t.searchLocation=e),this.emitter.fire(t)}))}removeRoot(e){const t=e.toString(),n=this.locators[t];if(void 0===n)return;const[,r]=n;delete this.locators[t],delete this.roots[t],r.dispose()}}t.WorkspaceLocators=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomVirtualEnvironmentLocator=t.VENVFOLDERS_SETTING_KEY=t.VENVPATH_SETTING_KEY=void 0;const r=n(47),i=n(0),o=n(11),s=n(9),a=n(23),c=n(88),u=n(46),l=n(19),p=n(83),d=n(87);n(14);const h=n(115),f=n(4);async function v(){var e;const n=[],o=l.getPythonSetting(t.VENVPATH_SETTING_KEY);o&&n.push(l.untildify(o));const a=null!==(e=l.getPythonSetting(t.VENVFOLDERS_SETTING_KEY))&&void 0!==e?e:[],c=s.getUserHomeDir();return c&&await l.pathExists(c)&&a.map(e=>i.join(c,e)).forEach(e=>n.push(e)),h.asyncFilter(r.uniq(n),l.pathExists)}async function y(e){return await p.isPipenvEnvironment(e)?a.PythonEnvKind.Pipenv:await d.isVirtualenvwrapperEnvironment(e)?a.PythonEnvKind.VirtualEnvWrapper:await d.isVenvEnvironment(e)?a.PythonEnvKind.Venv:await d.isVirtualenvEnvironment(e)?a.PythonEnvKind.VirtualEnv:a.PythonEnvKind.Unknown}t.VENVPATH_SETTING_KEY="venvPath",t.VENVFOLDERS_SETTING_KEY="venvFolders";class g extends c.FSWatchingLocator{constructor(){super(v,y,{delayOnCreated:1e3})}async initResources(){this.disposables.push(l.onDidChangePythonSetting(t.VENVPATH_SETTING_KEY,()=>this.emitter.fire({}))),this.disposables.push(l.onDidChangePythonSetting(t.VENVFOLDERS_SETTING_KEY,()=>this.emitter.fire({})))}doIterEnvs(){return async function*(){const e=(await v()).map(e=>async function*(){f.traceVerbose("Searching for custom virtual envs in: "+e);const t=u.findInterpretersInDir(e,2);for await(const e of t){const{filename:t}=e;if(await u.looksLikeBasicVirtualPython(e))try{const e=await y(t);yield{kind:e,executablePath:t},f.traceVerbose("Custom Virtual Environment: [added] "+t)}catch(e){f.traceError("Failed to process environment: "+t,e)}else f.traceVerbose("Custom Virtual Environment: [skipped] "+t)}}());yield*o.iterable(o.chain(e))}()}}t.CustomVirtualEnvironmentLocator=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CondaEnvironmentLocator=void 0,n(14);const r=n(23),i=n(141),o=n(46),s=n(71),a=n(4);class c extends i.Locator{async*iterEnvs(){const e=await s.Conda.getConda();if(void 0===e)return void a.traceVerbose("Couldn't locate the conda binary.");a.traceVerbose("Searching for conda environments using "+e.command);const t=await e.getEnvList();for(const{prefix:e}of t){const t=await o.getInterpreterPathFromDir(e);if(void 0!==t){a.traceVerbose("Found conda environment: "+t);try{yield{kind:r.PythonEnvKind.Conda,executablePath:t}}catch(e){a.traceError("Failed to process environment: "+t,e)}}}}}t.CondaEnvironmentLocator=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalVirtualEnvironmentLocator=void 0;const r=n(47),i=n(0),o=n(11),s=n(9),a=n(23),c=n(88),u=n(46),l=n(19),p=n(83),d=n(87);n(14);const h=n(115),f=n(4);async function v(){const e=[];let t=s.getEnvironmentVariable("WORKON_HOME");t&&(t=l.untildify(t),await l.pathExists(t)&&e.push(t));const n=s.getUserHomeDir();if(n&&await l.pathExists(n)){const t=["Envs",".direnv",".venvs",".virtualenvs",i.join(".local","share","virtualenvs")];s.getOSType()!==s.OSType.Windows&&t.push("envs");(await h.asyncFilter(t.map(e=>i.join(n,e)),l.pathExists)).forEach(t=>e.push(t))}return r.uniq(e)}async function y(e){return await p.isPipenvEnvironment(e)?a.PythonEnvKind.Pipenv:await d.isVirtualenvwrapperEnvironment(e)?a.PythonEnvKind.VirtualEnvWrapper:await d.isVenvEnvironment(e)?a.PythonEnvKind.Venv:await d.isVirtualenvEnvironment(e)?a.PythonEnvKind.VirtualEnv:a.PythonEnvKind.Unknown}class g extends c.FSWatchingLocator{constructor(e){super(v,y,{delayOnCreated:1e3}),this.searchDepth=e}doIterEnvs(){var e;const t=null!==(e=this.searchDepth)&&void 0!==e?e:2;return async function*(){const e=(await v()).map(e=>async function*(){f.traceVerbose("Searching for global virtual envs in: "+e);const n=u.findInterpretersInDir(e,t);for await(const e of n){const{filename:t}=e;if(await u.looksLikeBasicVirtualPython(e)){const e=await y(t);try{yield{kind:e,executablePath:t},f.traceVerbose("Global Virtual Environment: [added] "+t)}catch(e){f.traceError("Failed to process environment: "+t,e)}}else f.traceVerbose("Global Virtual Environment: [skipped] "+t)}}());yield*o.iterable(o.chain(e))}()}}t.GlobalVirtualEnvironmentLocator=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PosixKnownPathsLocator=void 0;const r=n(35),i=n(65),o=n(23),s=n(141),a=n(165),c=n(73),u=n(9),l=n(217),p=n(4);class d extends s.Locator{constructor(){super(...arguments),this.kind=o.PythonEnvKind.OtherGlobal}iterEnvs(){let e=!1;u.getOSType()===u.OSType.OSX&&i.gte(r.release(),"21.0.0")&&(e=!0);return async function*(t){const n=(await a.commonPosixBinPaths()).filter(e=>!c.isPyenvShimDir(e));let r=await a.getPythonBinFromPosixPaths(n);e&&(r=r.filter(e=>!l.isMacDefaultPythonPath(e)));for(const e of r)try{yield{executablePath:e,kind:t,source:[o.PythonEnvSource.PathEnvVar]}}catch(t){p.traceError("Failed to process environment: "+e,t)}}(this.kind)}}t.PosixKnownPathsLocator=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PyenvLocator=void 0;const r=n(0),i=n(23),o=n(88),s=n(46),a=n(19),c=n(73),u=n(4);function l(){return r.join(c.getPyenvDir(),"versions")}class p extends o.FSWatchingLocator{constructor(){super(l,async()=>i.PythonEnvKind.Pyenv)}doIterEnvs(){return async function*(){const e=l(),t=a.getSubDirs(e,{resolveSymlinks:!0});for await(const e of t){const t=await s.getInterpreterPathFromDir(e);if(t)try{yield{kind:i.PythonEnvKind.Pyenv,executablePath:t}}catch(e){u.traceError("Failed to process environment: "+t,e)}}}()}}t.PyenvLocator=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsRegistryLocator=void 0;const r=n(23),i=n(141),o=n(135),s=n(4);class a extends i.Locator{iterEnvs(){return async function*(){const e=await o.getRegistryInterpreters();for(const t of e)try{const e={kind:r.PythonEnvKind.OtherGlobal,executablePath:t.interpreterPath,source:[r.PythonEnvSource.WindowsRegistry]};yield e}catch(e){s.traceError("Failed to process environment: "+t,e)}}()}}t.WindowsRegistryLocator=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsStoreLocator=t.getWindowsStorePythonExes=void 0;const r=n(44),i=n(106),o=n(0),s=n(23),a=n(88),c=n(215),u=n(139);function l(e){return i(o.basename(e),"python3.{[0-9],[0-9][0-9]}.exe",{nocase:!0})}async function p(){if(await u.isStorePythonInstalled()){const e=u.getWindowsStoreAppsRoot();return(await r.readdir(e)).map(t=>o.join(e,t)).filter(l)}return[]}t.getWindowsStorePythonExes=p;class d extends a.FSWatchingLocator{constructor(){super(u.getWindowsStoreAppsRoot,async()=>this.kind,{baseGlob:"PythonSoftwareFoundation.Python.3.{[0-9],[0-9][0-9]}_*",searchLocation:u.getWindowsStoreAppsRoot(),envStructure:c.PythonEnvStructure.Flat}),this.kind=s.PythonEnvKind.WindowsStore}doIterEnvs(){return async function*(e){const t=await p();yield*t.map(async t=>({kind:e,executablePath:t}))}(this.kind)}}t.WindowsStoreLocator=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRunningWorkerPool=t.QueuePosition=void 0;const r=n(4),i=n(11);var o;!function(e){e[e.Back=0]="Back",e[e.Front=1]="Front"}(o=t.QueuePosition||(t.QueuePosition={}));class s{constructor(e,t,n,r){this.next=e,this.workFunc=t,this.postResult=n,this.name=r,this.stopProcessing=!1}stop(){this.stopProcessing=!0}async start(){for(;!this.stopProcessing;)try{const e=await this.next();try{const t=await this.workFunc(e);this.postResult(e,t)}catch(t){this.postResult(e,void 0,t)}}catch(e){r.traceError(`Error while running worker[${this.name}].`,e);continue}}}class a{constructor(){this.items=[],this.results=new Map}add(e,t){const n={item:e};t===o.Front?this.items.unshift(n):this.items.push(n);const r=i.createDeferred();return this.results.set(n,r),r.promise}completed(e,t,n){const r=this.results.get(e);void 0!==r&&(this.results.delete(e),void 0!==n&&r.reject(n),r.resolve(t))}next(){return this.items.shift()}clear(){this.results.forEach((e,t,n)=>{e.reject(Error("Queue stopped processing")),n.delete(t)})}}class c{constructor(e,t=2,n="Worker"){this.workerFunc=e,this.numWorkers=t,this.name=n,this.workers=[],this.waitingWorkersUnblockQueue=[],this.queue=new a,this.stopProcessing=!1}addToQueue(e,t){if(this.stopProcessing)throw Error("Queue is stopped");const n=this.queue.add(e,t),i=this.waitingWorkersUnblockQueue.shift();if(i){const e=this.queue.next();void 0!==e?i.unblock(e):r.traceError("Work queue was empty immediately after adding item.")}return n}start(){this.stopProcessing=!1;let e=this.numWorkers;for(;e>0;)this.workers.push(new s(()=>this.nextWorkItem(),e=>this.workerFunc(e.item),(e,t,n)=>this.queue.completed(e,t,n),`${this.name} ${e}`)),e-=1;this.workers.forEach(async e=>e.start())}stop(){this.stopProcessing=!0;let e=this.workers.shift();for(;e;)e.stop(),e=this.workers.shift();this.queue.clear();let t=this.waitingWorkersUnblockQueue.shift();for(;t;)t.stop(),t=this.waitingWorkersUnblockQueue.shift()}nextWorkItem(){const e=this.queue.next();return void 0!==e?Promise.resolve(e):new Promise((e,t)=>{this.waitingWorkersUnblockQueue.push({unblock:n=>{this.stopProcessing&&t(),e(n)},stop:()=>{t()}})})}}t.createRunningWorkerPool=function(e,t,n){const r=new c(e,t,n);return r.start(),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterpreterInfo=void 0;const r=n(113),i=n(9),o=n(4),s=n(19),a=n(72),c=n(53);t.getInterpreterInfo=async function(e){const[t,n]=r.interpreterInfo(),u=a.copyPythonExecInfo(e,t),l=[u.command,...u.args],p=l.reduce((e,t)=>e?`${e} "${t}"`:`"${t}"`,""),d=await s.shellExecute(p,{timeout:15e3});if(d.stderr)return void o.traceError(`Failed to parse interpreter information for ${l} stderr: ${d.stderr}`);const h=n(d.stdout);return o.traceInfo("Found interpreter for "+l),function(e,t){let n=""+t.versionInfo.slice(0,3).join(".");if(void 0!==t.versionInfo[3]&&["final","alpha","beta","candidate"].includes(t.versionInfo[3])&&(n=`${n}-${t.versionInfo[3]}`,void 0!==t.versionInfo[4])){let e=-1;try{e=parseInt(""+t.versionInfo[4],10)}catch(t){e=-1}n=e>=0?`${n}${e}`:n}return{arch:t.is64Bit?i.Architecture.x64:i.Architecture.x86,executable:{filename:e,sysPrefix:t.sysPrefix,mtime:-1,ctime:-1},version:{...c.parseVersion(n),sysVersion:t.sysVersion}}}(e.pythonExecutable,h)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.registerNewDiscoveryForIOC=void 0;const i=n(1),o=n(47),s=n(5),a=n(168),c=n(12),u=n(23),l=n(217),p=n(19),d=n(26),h=n(53),f=n(218),v=n(11),y=n(115),g=n(71),m=n(139),_=n(402),b=n(4),E=new Map(Object.entries({[u.PythonEnvKind.OtherGlobal]:d.EnvironmentType.Global,[u.PythonEnvKind.System]:d.EnvironmentType.System,[u.PythonEnvKind.MacDefault]:d.EnvironmentType.System,[u.PythonEnvKind.WindowsStore]:d.EnvironmentType.WindowsStore,[u.PythonEnvKind.Pyenv]:d.EnvironmentType.Pyenv,[u.PythonEnvKind.Conda]:d.EnvironmentType.Conda,[u.PythonEnvKind.CondaBase]:d.EnvironmentType.Conda,[u.PythonEnvKind.VirtualEnv]:d.EnvironmentType.VirtualEnv,[u.PythonEnvKind.Pipenv]:d.EnvironmentType.Pipenv,[u.PythonEnvKind.Poetry]:d.EnvironmentType.Poetry,[u.PythonEnvKind.Venv]:d.EnvironmentType.Venv,[u.PythonEnvKind.VirtualEnvWrapper]:d.EnvironmentType.VirtualEnvWrapper}));function S(e){const{name:t,location:n,executable:r,arch:i,kind:o,version:s,distro:a}=e,{filename:c,sysPrefix:u}=r,l={sysPrefix:u,envType:d.EnvironmentType.Unknown,envName:t,envPath:n,path:c,architecture:i},p=E.get(o);if(void 0!==p&&(l.envType=p),void 0!==s){const{release:e,sysVersion:t}=s;l.sysVersion=void 0===e?"":t;const n=h.toSemverLikeVersion(s);l.version=n}return void 0!==a&&""!==a.org&&(l.companyDisplayName=a.org),l.displayName=e.display,l}let w=class{constructor(e){this.api=e,this.refreshing=new s.EventEmitter,this.refreshed=new s.EventEmitter,this.changed=new s.EventEmitter,this.api.onChanged(e=>{this.changed.fire({type:e.type,new:e.new?S(e.new):void 0,old:e.old?S(e.old):void 0,resource:e.searchLocation})})}triggerRefresh(e){return this.api.triggerRefresh(e)}get refreshPromise(){return this.api.refreshPromise}get onRefreshStart(){return this.api.onRefreshStart}get onChanged(){return this.changed.event}onDidCreate(e,t){const n=e?s.workspace.getWorkspaceFolder(e):void 0;return this.api.onChanged(e=>{n&&e.searchLocation&&(b.traceVerbose(`Received event ${JSON.stringify(e)} file change event`),e.type===a.FileChangeType.Created&&p.isParentPath(e.searchLocation.fsPath,n.uri.fsPath)&&t())})}get onRefreshing(){return this.refreshing.event}get onRefreshed(){return this.refreshed.event}async getInterpreterInformation(e){const t=await this.api.resolveEnv(e);return t?S(t):void 0}async isMacDefaultPythonPath(e){return l.isMacDefaultPythonPath(e)}async getInterpreterDetails(e){const t=await this.api.resolveEnv(e);if(t){if(null==t?void 0:t.executable.sysPrefix){const n=f.getEnvironmentInfoService(),r=await n.getEnvironmentInfo(e,f.EnvironmentInfoServiceQueuePriority.High);r&&(t.executable.sysPrefix=r.executable.sysPrefix,t.version=r.version)}return S(t)}}async isCondaEnvironment(e){return g.isCondaEnvironment(e)}async getCondaEnvironment(e){if(!await g.isCondaEnvironment(e))return;const t=await this.api.resolveEnv(e);return t?{name:t.name,path:t.location}:void 0}async isWindowsStoreInterpreter(e){return m.isWindowsStoreEnvironment(e)}async hasInterpreters(e=(async()=>!0)){const t=v.createDeferred();this.api.onChanged(async n=>{n.new&&await e(S(n.new))&&t.resolve()});if(this.api.getEnvs().length>0)return!0;await Promise.race([t.promise,this.api.refreshPromise]);return(await y.asyncFilter(this.api.getEnvs(),t=>e(S(t)))).length>0}getInterpreters(e,t){this.refreshing.fire();const n={};let r;void 0!==e&&(r=s.workspace.getWorkspaceFolder(e)),!r&&s.workspace.workspaceFolders&&s.workspace.workspaceFolders.length>0&&(!e||"untitled"===e.scheme)&&([r]=s.workspace.workspaceFolders),n.searchLocations=void 0!==r?{roots:[r.uri]}:{roots:[]};let i=this.api.getEnvs(n);t&&(i=i.filter(e=>o.intersection(t,e.source).length>0));const a=i.map(S);return this.refreshed.fire(),a}async getWorkspaceVirtualEnvInterpreters(e,t){const n=s.workspace.getWorkspaceFolder(e);if(!n)return[];const r={searchLocations:{roots:[n.uri]}};(null==t?void 0:t.ignoreCache)&&await this.api.triggerRefresh(r),await this.api.refreshPromise;return this.api.getEnvs(r).map(S)}};w=r([i.injectable()],w),t.registerNewDiscoveryForIOC=function(e,t){e.addSingleton(c.ICondaService,_.CondaService),e.addSingletonInstance(c.IComponentAdapter,new w(t))}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaService=void 0;const o=n(1),s=n(0),a=n(65),c=n(7),u=n(13),l=n(40),p=n(6),d=n(86),h=n(4),f=n(71);let v=class{constructor(e,t,n,r,i){this.processServiceFactory=e,this.platform=t,this.fileSystem=n,this.disposableRegistry=r,this.workspaceService=i,this.addCondaPathChangedHandler()}async getCondaFile(){return this.condaFile||(this.condaFile=f.Conda.getConda().then(e=>{var t;return null!==(t=null==e?void 0:e.command)&&void 0!==t?t:"conda"})),this.condaFile}async isCondaAvailable(){return"boolean"==typeof this.isAvailable?this.isAvailable:this.getCondaVersion().then(e=>this.isAvailable=void 0!==e).catch(()=>this.isAvailable=!1)}async getCondaVersion(){const e=await this.processServiceFactory.create(),t=await this._getCondaInfo().catch(()=>{});let n;if(t&&t.conda_version)n=t.conda_version;else{const t=await this.getCondaFile().then(t=>e.exec(t,["--version"],{})).then(e=>e.stdout.trim()).catch(()=>{});n=t&&t.startsWith("conda ")?t.substring("conda ".length).trim():t}if(!n)return;const r=a.parse(n,!0);return r||(h.traceWarn("Unable to parse Version of Conda, "+n),new a.SemVer("0.0.1"))}async getCondaFileFromInterpreter(e,t){const n=this.platform.isWindows?"conda.exe":"conda",r=this.platform.isWindows?"Scripts":"bin",i=e?s.dirname(e):"",o=t?i.indexOf(s.join("envs",t)):-1;if(o>0){const e=i.slice(0,o);let t=s.join(e,n);if(await this.fileSystem.fileExists(t))return t;if(t=s.join(e,r,n),await this.fileSystem.fileExists(t))return t}let a=s.join(i,n);return await this.fileSystem.fileExists(a)?a:(a=s.join(i,r,n),await this.fileSystem.fileExists(a)?a:void 0)}async _getCondaInfo(){const e=await f.Conda.getConda();return null==e?void 0:e.getInfo()}addCondaPathChangedHandler(){const e=this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this));this.disposableRegistry.push(e)}async onDidChangeConfiguration(e){-1!==(this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders.map(e=>e.uri):[void 0]).findIndex(t=>e.affectsConfiguration("python.condaPath",t))&&(this.condaFile=void 0)}};r([d.cache(12e4)],v.prototype,"getCondaVersion",null),r([h.traceDecoratorVerbose("Get Conda File from interpreter"),d.cache(12e4)],v.prototype,"getCondaFileFromInterpreter",null),r([d.cache(6e4)],v.prototype,"_getCondaInfo",null),v=r([o.injectable(),i(0,o.inject(l.IProcessServiceFactory)),i(1,o.inject(u.IPlatformService)),i(2,o.inject(u.IFileSystem)),i(3,o.inject(p.IDisposableRegistry)),i(4,o.inject(c.IWorkspaceService))],v),t.CondaService=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryLocator=void 0;const r=n(0),i=n(11),o=n(23),s=n(88),a=n(46),c=n(19),u=n(162);n(14);const l=n(115),p=n(4);class d extends s.FSWatchingLocator{constructor(e){super(()=>async function(e){const t=[],n=await u.Poetry.getPoetry(e),i=await(null==n?void 0:n.getEnvList());if(null==i?void 0:i.length)t.push(r.dirname(i[0]));else{const e=await(null==n?void 0:n.getVirtualenvsPathSetting());e&&t.push(e)}return t}(e),async()=>o.PythonEnvKind.Poetry,void 0,s.FSWatcherKind.Workspace),this.root=e}doIterEnvs(){return async function*(e){const t=(await async function(e){const t=[r.join(e,u.localPoetryEnvDirName)],n=await u.Poetry.getPoetry(e),i=await(null==n?void 0:n.getEnvList());return i&&t.push(...i),l.asyncFilter(t,c.pathExists)}(e)).map(e=>async function*(){p.traceVerbose("Searching for poetry virtual envs in: "+e);const t=await a.getInterpreterPathFromDir(e);if(void 0!==t){const e=await async function(e){return await u.isPoetryEnvironment(e)?o.PythonEnvKind.Poetry:o.PythonEnvKind.Unknown}(t);try{yield{executablePath:t,kind:e},p.traceVerbose("Poetry Virtual Environment: [added] "+t)}catch(e){p.traceError("Failed to process environment: "+t,e)}}}());yield*i.iterable(i.chain(t))}(this.root)}}t.PoetryLocator=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonEnvironments=void 0;class r{constructor(e){this.getLocator=e}async activate(){this.locator=await this.getLocator()}get onRefreshStart(){return this.locator.onRefreshStart}get refreshPromise(){return this.locator.refreshPromise}get onChanged(){return this.locator.onChanged}getEnvs(e){return this.locator.getEnvs(e)}async resolveEnv(e){return this.locator.resolveEnv(e)}async triggerRefresh(e){return this.locator.triggerRefresh(e)}}t.createPythonEnvironments=async function(e){const t=new r(e);return await t.activate(),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCollectionCache=t.PythonEnvInfoCache=void 0;const r=n(4),i=n(19),o=n(84),s=n(114);class a extends s.PythonEnvsWatcher{constructor(e){super(),this.persistentStorage=e,this.envs=[]}async validateCache(){(await Promise.all(this.envs.map(e=>i.pathExists(e.executable.filename)))).map((e,t)=>e?-1:t).filter(e=>-1!==e).forEach(e=>{const t=this.envs.splice(e,1)[0];this.fire({old:t,new:void 0})})}getAllEnvs(){return this.envs}addEnv(e,t){this.envs.find(t=>o.areSameEnv(t,e))||(t&&(e.hasCompleteInfo=!0),this.envs.push(e),this.fire({new:e}))}updateEnv(e,t){const n=this.envs.findIndex(t=>o.areSameEnv(t,e));-1!==n&&(void 0===t?this.envs.splice(n,1):this.envs[n]=t,this.fire({old:e,new:t}))}getCompleteInfo(e){const t=this.envs.find(t=>o.areSameEnv(t,e));return(null==t?void 0:t.hasCompleteInfo)?t:void 0}async clearAndReloadFromStorage(){var e;this.envs=null!==(e=await this.persistentStorage.load())&&void 0!==e?e:this.envs}async flush(){this.envs.length&&(r.traceInfo("Environments added to cache",JSON.stringify(this.envs)),this.envs.forEach(e=>{e.hasCompleteInfo=!0}),await this.persistentStorage.store(this.envs))}}t.PythonEnvInfoCache=a,t.createCollectionCache=async function(e){const t=new a(e);return await t.clearAndReloadFromStorage(),await t.validateCache(),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvsCollectionService=void 0;const r=n(5);n(14);const i=n(11),o=n(64),s=n(4),a=n(21),c=n(22),u=n(210),l=n(114);class p extends l.PythonEnvsWatcher{constructor(e,t){super(),this.cache=e,this.locator=t,this.refreshPromises=new Map,this.scheduledRefreshes=new Map,this.refreshStarted=new r.EventEmitter,this.locator.onChanged(e=>{this.scheduledRefreshes.get(void 0)||this.scheduleNewRefresh(void 0).then(()=>{this.fire({type:e.type,searchLocation:e.searchLocation})})}),this.cache.onChanged(e=>{this.fire(e)})}get onRefreshStart(){return this.refreshStarted.event}get refreshPromise(){return this.refreshPromises.size>0?Promise.all(Array.from(this.refreshPromises.values())).then():void 0}async resolveEnv(e){const t=this.cache.getCompleteInfo(e);if(t)return t;const n=await this.locator.resolveEnv(e);return n&&this.cache.addEnv(n,!0),n}getEnvs(e){const t=this.cache.getAllEnvs();return 0===t.length&&0===this.refreshPromises.size&&(s.traceError("Refresh should have already been triggered when activating discovery component"),this.triggerRefresh().ignoreErrors()),e?t.filter(u.getQueryFilter(e)):t}triggerRefresh(e){let t=this.getRefreshPromiseForQuery(e);return t||(t=this.startRefresh(e)),t}startRefresh(e){const t=new o.StopWatch,n=i.createDeferred();this.refreshPromises.set(e,n.promise),this.refreshStarted.fire();const r=this.locator.iterEnvs(e);return this.addEnvsToCacheFromIterator(r).then(async()=>{this.refreshPromises.delete(e),n.resolve(),a.sendTelemetryEvent(c.EventName.PYTHON_INTERPRETER_DISCOVERY,t.elapsedTime,{interpreters:this.cache.getAllEnvs().length})}).catch(e=>n.reject(e))}async addEnvsToCacheFromIterator(e){const t=[],n={done:!1,pending:0},r=i.createDeferred();if(void 0!==e.onUpdated){const i=e.onUpdated(async e=>{null===e?(n.done=!0,i.dispose()):(n.pending+=1,this.cache.updateEnv(t[e.index],e.update),e.update&&(t[e.index]=e.update),n.pending-=1),n.done&&0===n.pending&&r.resolve()})}else r.resolve();for await(const n of e)t.push(n),this.cache.addEnv(n);await r.promise,await this.cache.validateCache(),this.cache.flush().ignoreErrors()}getRefreshPromiseForQuery(e){var t;return null!==(t=this.refreshPromises.get(e))&&void 0!==t?t:this.refreshPromises.get(void 0)}async scheduleNewRefresh(e){var t;this.scheduledRefreshes.set(e,!0);return(null!==(t=this.getRefreshPromiseForQuery(e))&&void 0!==t?t:Promise.resolve()).then(()=>{this.scheduledRefreshes.set(e,!1),this.startRefresh(e)})}}t.EnvsCollectionService=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoggingLevel=void 0;const r=n(173);t.getLoggingLevel=function(){var e;return null!==(e=(new r.WorkspaceService).getConfiguration("python").get("logging.level"))&&void 0!==e?e:"error"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeComponents=t.initializeStandard=t.initializeGlobals=void 0;const r=n(1),i=n(5),o=n(17),s=n(409),a=n(411),c=n(443),u=n(6),l=n(489),p=n(492),d=n(493),h=n(18),f=n(207),v=n(4),y=n(494);t.initializeGlobals=function(e){const t=new r.Container({skipBaseClassChecks:!0}),n=new d.ServiceManager(t),s=new p.ServiceContainer(t),a=e.subscriptions;n.addSingletonInstance(h.IServiceContainer,s),n.addSingletonInstance(h.IServiceManager,n),n.addSingletonInstance(u.IDisposableRegistry,a),n.addSingletonInstance(u.IMemento,e.globalState,u.GLOBAL_MEMENTO),n.addSingletonInstance(u.IMemento,e.workspaceState,u.WORKSPACE_MEMENTO),n.addSingletonInstance(u.IExtensionContext,e);const c=i.window.createOutputChannel("Python Environments");return e.subscriptions.push(v.registerLogger(new y.OutputChannelLogger(c))),n.addSingletonInstance(u.IOutputChannel,c,o.STANDARD_OUTPUT_CHANNEL),{context:e,disposables:a,legacyIOC:{serviceManager:n,serviceContainer:s}}},t.initializeStandard=function(e){const{serviceManager:t}=e.legacyIOC;c.registerTypes(t),l.registerTypes(t),s.registerTypes(t),a.registerTypes(t)},t.initializeComponents=async function(e){return{pythonEnvs:await f.initialize(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(118),i=n(410),o=n(163),s=n(13);t.registerTypes=function(e){e.addSingleton(s.IPlatformService,i.PlatformService),e.addSingleton(s.IFileSystem,r.FileSystem),e.addSingleton(s.IRegistry,o.RegistryImplementation)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=void 0;const i=n(1),o=n(35),s=n(65),a=n(21),c=n(22),u=n(80),l=n(9),p=n(201);let d=class{constructor(){this.osType=l.getOSType(),this.osType===l.OSType.Unknown&&a.sendTelemetryEvent(c.EventName.PLATFORM_INFO,void 0,{failureType:c.PlatformErrors.FailedToDetermineOS})}get pathVariableName(){return u.getSearchPathEnvVarNames(this.osType)[0]}get virtualEnvBinName(){return this.isWindows?"Scripts":"bin"}async getVersion(){if(this.version)return this.version;switch(this.osType){case l.OSType.Windows:case l.OSType.OSX:try{const e=s.coerce(o.release());if(e)return a.sendTelemetryEvent(c.EventName.PLATFORM_INFO,void 0,{osVersion:`${e.major}.${e.minor}.${e.patch}`}),this.version=e,this.version;throw new Error("Unable to parse version")}catch(e){return a.sendTelemetryEvent(c.EventName.PLATFORM_INFO,void 0,{failureType:c.PlatformErrors.FailedToParseVersion}),p.parseSemVerSafe(o.release())}default:throw new Error("Not Supported")}}get isWindows(){return this.osType===l.OSType.Windows}get isMac(){return this.osType===l.OSType.OSX}get isLinux(){return this.osType===l.OSType.Linux}get osRelease(){return o.release()}get is64bit(){return l.getArchitecture()===l.Architecture.x64}};d=r([i.injectable()],d),t.PlatformService=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(412),i=n(432),o=n(436),s=n(442),a=n(40);t.registerTypes=function(e){e.addSingleton(a.IBufferDecoder,r.BufferDecoder),e.addSingleton(a.IProcessServiceFactory,i.ProcessServiceFactory),e.addSingleton(a.IPythonExecutionFactory,o.PythonExecutionFactory),e.addSingleton(a.IPythonToolExecutionService,s.PythonToolExecutionService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecoder=void 0;const i=n(413),o=n(1),s=n(221);let a=class{decode(e,t=s.DEFAULT_ENCODING){return t=i.encodingExists(t)?t:s.DEFAULT_ENCODING,i.decode(Buffer.concat(e),t)}};a=r([o.injectable()],a),t.BufferDecoder=a},function(e,t,n){"use strict";var r=n(89).Buffer,i=n(414),o=e.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(e,t,n){e=""+(e||"");var i=o.getEncoder(t,n),s=i.write(e),a=i.end();return a&&a.length>0?r.concat([s,a]):s},o.decode=function(e,t,n){"string"==typeof e&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),e=r.from(""+(e||""),"binary"));var i=o.getDecoder(t,n),s=i.write(e),a=i.end();return a?s+a:s},o.encodingExists=function(e){try{return o.getCodec(e),!0}catch(e){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(e){o.encodings||(o.encodings=n(415));for(var t=o._canonicalizeEncoding(e),r={};;){var i=o._codecDataCache[t];if(i)return i;var s=o.encodings[t];switch(typeof s){case"string":t=s;break;case"object":for(var a in s)r[a]=s[a];r.encodingName||(r.encodingName=t),t=s.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new s(r,o),o._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},o._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(e,t){var n=o.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new i.PrependBOM(r,t)),r},o.getDecoder=function(e,t){var n=o.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(r=new i.StripBOM(r,t)),r};var s="undefined"!=typeof process&&process.versions&&process.versions.node;if(s){var a=s.split(".").map(Number);(a[0]>0||a[1]>=10)&&n(430)(o),n(431)(o)}},function(e,t,n){"use strict";function r(e,t){this.encoder=e,this.addBOM=!0}function i(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=r,r.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},r.prototype.end=function(){return this.encoder.end()},t.StripBOM=i,i.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),t},i.prototype.end=function(){return this.decoder.end()}},function(e,t,n){"use strict";for(var r=[n(416),n(418),n(419),n(420),n(421),n(422),n(423),n(424)],i=0;i<r.length;i++){e=r[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}},function(e,t,n){"use strict";var r=n(89).Buffer;function i(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=u,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=l,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=a,i.prototype.decoder=s;var o=n(417).StringDecoder;function s(e,t){o.call(this,t.enc)}function a(e,t){this.enc=t.enc}function c(e,t){this.prevStr=""}function u(e,t){}function l(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),s.prototype=o.prototype,a.prototype.write=function(e){return r.from(e,this.enc)},a.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),r.from(e,"base64")},c.prototype.end=function(){return r.from(this.prevStr,"base64")},u.prototype.write=function(e){for(var t=r.alloc(3*e.length),n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=192+(o>>>6),t[n++]=128+(63&o)):(t[n++]=224+(o>>>12),t[n++]=128+(o>>>6&63),t[n++]=128+(63&o))}return t.slice(0,n)},u.prototype.end=function(){},l.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<e.length;o++){var s=e[o];128!=(192&s)?(n>0&&(i+=this.defaultCharUnicode,n=0),s<128?i+=String.fromCharCode(s):s<224?(t=31&s,n=1,r=1):s<240?(t=15&s,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&s,r++,0===--n&&(i+=2===r&&t<128&&t>0||3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},l.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t){e.exports=require("string_decoder")},function(e,t,n){"use strict";var r=n(89).Buffer;function i(){}function o(){}function s(){this.overflowByte=-1}function a(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function u(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function l(e,t){var n=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])n="utf-16be";else if(255==e[0]&&254==e[1])n="utf-16le";else{for(var r=0,i=0,o=Math.min(e.length-e.length%2,64),s=0;s<o;s+=2)0===e[s]&&0!==e[s+1]&&i++,0!==e[s]&&0===e[s+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}t.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=s,i.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=r.from(e,"ucs2"),n=0;n<t.length;n+=2){var i=t[n];t[n]=t[n+1],t[n+1]=i}return t},o.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return"";var t=r.alloc(e.length+1),n=0,i=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,i=2);n<e.length-1;n+=2,i+=2)t[i]=e[n+1],t[i+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,i).toString("ucs2")},s.prototype.end=function(){},t.utf16=a,a.prototype.encoder=c,a.prototype.decoder=u,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},u.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var t=l(e=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},u.prototype.end=function(){if(!this.decoder){var e=r.concat(this.initialBytes),t=l(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),i=this.decoder.end();return i?n+i:n}return this.decoder.end()}},function(e,t,n){"use strict";var r=n(89).Buffer;function i(e,t){this.iconv=t}t.utf7=i,t.unicode11utf7="utf7",i.prototype.encoder=s,i.prototype.decoder=a,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function s(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){return r.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,u=[],l=0;l<256;l++)u[l]=c.test(String.fromCharCode(l));var p="+".charCodeAt(0),d="-".charCodeAt(0),h="&".charCodeAt(0);function f(e,t){this.iconv=t}function v(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function y(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!u[e[s]]){if(s==n&&e[s]==d)t+="+";else{var a=o+e.slice(n,s).toString();t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=d&&s--,n=s+1,i=!1,o=""}}else e[s]==p&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+e.slice(n).toString()).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=f,f.prototype.encoder=v,f.prototype.decoder=y,f.prototype.bomAware=!0,v.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*e.length+10),s=0,a=0;a<e.length;a++){var c=e.charCodeAt(a);32<=c&&c<=126?(t&&(i>0&&(s+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),s),i=0),o[s++]=d,t=!1),t||(o[s++]=c,c===h&&(o[s++]=d))):(t||(o[s++]=h,t=!0),t&&(n[i++]=c>>8,n[i++]=255&c,i==n.length&&(s+=o.write(n.toString("base64").replace(/\//g,","),s),i=0)))}return this.inBase64=t,this.base64AccumIdx=i,o.slice(0,s)},v.prototype.end=function(){var e=r.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=d,this.inBase64=!1),e.slice(0,t)};var g=u.slice();g[",".charCodeAt(0)]=!0,y.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!g[e[s]]){if(s==n&&e[s]==d)t+="&";else{var a=o+e.slice(n,s).toString().replace(/,/g,"/");t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=d&&s--,n=s+1,i=!1,o=""}}else e[s]==h&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+e.slice(n).toString().replace(/,/g,"/")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},y.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t,n){"use strict";var r=n(89).Buffer;function i(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);e.chars=n+e.chars}this.decodeBuf=r.from(e.chars,"ucs2");var o=r.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(i=0;i<e.chars.length;i++)o[e.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function s(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=s,o.prototype.write=function(e){for(var t=r.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},o.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.decodeBuf,n=r.alloc(2*e.length),i=0,o=0,s=0;s<e.length;s++)i=2*e[s],n[o=2*s]=t[i],n[o+1]=t[i+1];return n.toString("ucs2")},s.prototype.end=function(){}},function(e,t,n){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,n){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t,n){"use strict";var r=n(89).Buffer;t._dbcs=s;for(var i=new Array(256),o=0;o<256;o++)i[o]=-1;function s(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=i.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var o={};if(e.encodeSkipVals)for(r=0;r<e.encodeSkipVals.length;r++){var s=e.encodeSkipVals[r];if("number"==typeof s)o[s]=!0;else for(var a=s.from;a<=s.to;a++)o[a]=!0}if(this._fillEncodeTable(0,0,o),e.encodeAdd)for(var c in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,c)&&this._setEncodeChar(c.charCodeAt(0),e.encodeAdd[c]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],-1===this.defCharSB&&(this.defCharSB=this.encodeTable[0]["?"]),-1===this.defCharSB&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var u=this.decodeTables.length,l=this.decodeTables[u]=i.slice(0),p=this.decodeTables.length,d=this.decodeTables[p]=i.slice(0);for(r=129;r<=254;r++){var h=-1e3-this.decodeTables[0][r],f=this.decodeTables[h];for(a=48;a<=57;a++)f[a]=-1e3-u}for(r=129;r<=254;r++)l[r]=-1e3-p;for(r=48;r<=57;r++)d[r]=-2}}function a(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function c(e,t){this.nodeIdx=0,this.prevBuf=r.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function u(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);e[i]<=t?n=i:r=i}return n}s.prototype.encoder=a,s.prototype.decoder=c,s.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var o=n[t[r]];if(-1==o)n[t[r]]=-1e3-this.decodeTables.length,this.decodeTables.push(n=i.slice(0));else{if(!(o<=-1e3))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[-1e3-o]}}return n},s.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var o=0;o<i.length;){var s=i.charCodeAt(o++);if(55296<=s&&s<56320){var a=i.charCodeAt(o++);if(!(56320<=a&&a<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(s-55296)+(a-56320)}else if(4080<s&&s<=4095){for(var c=4095-s+2,u=[],l=0;l<c;l++)u.push(i.charCodeAt(o++));n[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(u)}else n[t++]=s}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);var p=n[t-1]+1;for(o=0;o<i;o++)n[t++]=p++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},s.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=i.slice(0)),this.encodeTable[t]},s.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=t:-1==n[r]&&(n[r]=t)},s.prototype._setEncodeSequence=function(e,t){var n,r=e[0],i=this._getEncodeBucket(r),o=255&r;i[o]<=-10?n=this.encodeTableSeq[-10-i[o]]:(n={},-1!==i[o]&&(n[-1]=i[o]),i[o]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var s=1;s<e.length-1;s++){var a=n[r];"object"==typeof a?n=a:(n=n[r]={},void 0!==a&&(n[-1]=a))}n[r=e[e.length-1]]=t},s.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=0;i<256;i++){var o=r[i],s=t+i;n[s]||(o>=0?this._setEncodeChar(o,s):o<=-1e3?this._fillEncodeTable(-1e3-o,s<<8,n):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],s))}},a.prototype.write=function(e){for(var t=r.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,i=this.seqObj,o=-1,s=0,a=0;;){if(-1===o){if(s==e.length)break;var c=e.charCodeAt(s++)}else{c=o;o=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===n){n=c;continue}n=c,c=-1}else-1!==n?(c=65536+1024*(n-55296)+(c-56320),n=-1):c=-1;else-1!==n&&(o=c,c=-1,n=-1);var l=-1;if(void 0!==i&&-1!=c){var p=i[c];if("object"==typeof p){i=p;continue}"number"==typeof p?l=p:null==p&&void 0!==(p=i[-1])&&(l=p,o=c),i=void 0}else if(c>=0){var d=this.encodeTable[c>>8];if(void 0!==d&&(l=d[255&c]),l<=-10){i=this.encodeTableSeq[-10-l];continue}if(-1==l&&this.gb18030){var h=u(this.gb18030.uChars,c);if(-1!=h){l=this.gb18030.gbChars[h]+(c-this.gb18030.uChars[h]);t[a++]=129+Math.floor(l/12600),l%=12600,t[a++]=48+Math.floor(l/1260),l%=1260,t[a++]=129+Math.floor(l/10),l%=10,t[a++]=48+l;continue}}}-1===l&&(l=this.defaultCharSingleByte),l<256?t[a++]=l:l<65536?(t[a++]=l>>8,t[a++]=255&l):(t[a++]=l>>16,t[a++]=l>>8&255,t[a++]=255&l)}return this.seqObj=i,this.leadSurrogate=n,t.slice(0,a)},a.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=r.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},a.prototype.findIdx=u,c.prototype.write=function(e){var t=r.alloc(2*e.length),n=this.nodeIdx,i=this.prevBuf,o=this.prevBuf.length,s=-this.prevBuf.length;o>0&&(i=r.concat([i,e.slice(0,10)]));for(var a=0,c=0;a<e.length;a++){var l,p=a>=0?e[a]:i[a+o];if((l=this.decodeTables[n][p])>=0);else if(-1===l)a=s,l=this.defaultCharUnicode.charCodeAt(0);else if(-2===l){var d=s>=0?e.slice(s,a+1):i.slice(s+o,a+1+o),h=12600*(d[0]-129)+1260*(d[1]-48)+10*(d[2]-129)+(d[3]-48),f=u(this.gb18030.gbChars,h);l=this.gb18030.uChars[f]+h-this.gb18030.gbChars[f]}else{if(l<=-1e3){n=-1e3-l;continue}if(!(l<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+l+" at "+n+"/"+p);for(var v=this.decodeTableSeq[-10-l],y=0;y<v.length-1;y++)l=v[y],t[c++]=255&l,t[c++]=l>>8;l=v[v.length-1]}if(l>65535){l-=65536;var g=55296+Math.floor(l/1024);t[c++]=255&g,t[c++]=g>>8,l=56320+l%1024}t[c++]=255&l,t[c++]=l>>8,n=0,s=a+1}return this.nodeIdx=n,this.prevBuf=s>=0?e.slice(s):i.slice(s+o),t.slice(0,c).toString("ucs2")},c.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=r.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(425)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(426)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(174)}},gbk:{type:"_dbcs",table:function(){return n(174).concat(n(219))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(174).concat(n(219))},gb18030:function(){return n(427)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(428)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(220)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(220).concat(n(429))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},function(e){e.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},function(e){e.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},function(e,t,n){"use strict";var r=n(116).Buffer,i=n(77).Transform;function o(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,i.call(this,t)}function s(e,t){this.conv=e,(t=t||{}).encoding=this.encoding="utf8",i.call(this,t)}e.exports=function(e){e.encodeStream=function(t,n){return new o(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new s(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=o,e.IconvLiteDecoderStream=s,e._collect=s.prototype.collect},o.prototype=Object.create(i.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},o.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},o.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",(function(e){t.push(e)})),this.on("end",(function(){e(null,r.concat(t))})),this},s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(e,t,n){if(!r.isBuffer(e))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i,this.encoding),n()}catch(e){n(e)}},s.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},s.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",(function(e){t+=e})),this.on("end",(function(){e(null,t)})),this}},function(e,t,n){"use strict";var r=n(116).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(r.from||new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var i={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};r.isNativeEncoding=function(e){return e&&i[e.toLowerCase()]};var o=n(116).SlowBuffer;if(t.SlowBufferToString=o.prototype.toString,o.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.SlowBufferWrite=o.prototype.write,o.prototype.write=function(n,i,o,s){if(isFinite(i))isFinite(o)||(s=o,o=void 0);else{var a=s;s=i,i=o,o=a}i=+i||0;var c=this.length-i;if(o?(o=+o)>c&&(o=c):o=c,s=String(s||"utf8").toLowerCase(),r.isNativeEncoding(s))return t.SlowBufferWrite.call(this,n,i,o,s);if(n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var u=e.encode(n,s);return u.length<o&&(o=u.length),u.copy(this,i,0,o),o},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=o.byteLength=function(n,i){return i=String(i||"utf8").toLowerCase(),r.isNativeEncoding(i)?t.BufferByteLength.call(this,n,i):e.encode(n,i).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,i,o,s){var a=i,c=o,u=s;if(isFinite(i))isFinite(o)||(s=o,o=void 0);else{var l=s;s=i,i=o,o=l}if(s=String(s||"utf8").toLowerCase(),r.isNativeEncoding(s))return t.BufferWrite.call(this,n,a,c,u);i=+i||0;var p=this.length-i;if(o?(o=+o)>p&&(o=p):o=p,n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var d=e.encode(n,s);return d.length<o&&(o=d.length),d.copy(this,i,0,o),o},e.supportsStreams){var s=n(77).Readable;t.ReadableSetEncoding=s.prototype.setEncoding,s.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},s.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete r.isNativeEncoding;var i=n(116).SlowBuffer;if(i.prototype.toString=t.SlowBufferToString,i.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var o=n(77).Readable;o.prototype.setEncoding=t.ReadableSetEncoding,delete o.prototype.collect}t=void 0}}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessServiceFactory=void 0;const o=n(1),s=n(6),a=n(137),c=n(222),u=n(40);let l=class{constructor(e,t,n,r){this.envVarsService=e,this.processLogger=t,this.decoder=n,this.disposableRegistry=r}async create(e){const t=await this.envVarsService.getEnvironmentVariables(e),n=new c.ProcessService(this.decoder,t);return this.disposableRegistry.push(n),n.on("exec",this.processLogger.logProcess.bind(this.processLogger))}};l=r([o.injectable(),i(0,o.inject(a.IEnvironmentVariablesProvider)),i(1,o.inject(u.IProcessLogger)),i(2,o.inject(u.IBufferDecoder)),i(3,o.inject(s.IDisposableRegistry))],l),t.ProcessServiceFactory=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.killPid=t.execObservable=t.plainExec=t.shellExec=void 0;const r=n(109),i=n(434),o=n(11),s=n(221),a=n(40),c=n(31);function u(e,t){const n={...e},r=n;if(r){r.encoding="string"==typeof r.encoding&&r.encoding.length>0?r.encoding:s.DEFAULT_ENCODING;const{encoding:e}=r;delete r.encoding,r.encoding=e}if(n.env&&0!==Object.keys(n.env).length)n.env={...n.env};else{const e=t||process.env;n.env={...e}}return r&&r.extraVariables&&(n.env={...n.env,...r.extraVariables}),n.env.PYTHONUNBUFFERED="1",n.env.PYTHONIOENCODING||(n.env.PYTHONIOENCODING="utf-8"),n}function l(e){try{"win32"===process.platform?r.execSync(`taskkill /pid ${e} /T /F`):process.kill(e)}catch(e){}}t.shellExec=function(e,t={},n,i){const o=u(t,n);return new Promise((t,n)=>{const s=r.exec(e,o,(e,r,i)=>{e&&null!==e?n(e):o.throwOnStdErr&&i&&i.length?n(new Error(i)):t({stderr:i&&i.length>0?i:void 0,stdout:r})}),a={dispose:()=>{s.killed||s.kill()}};i&&i.add(a)})},t.plainExec=function(e,t,n={},i,s,l){var p,d;const h=u(n,s),f=h.encoding?h.encoding:"utf8",v=r.spawn(e,t,h);null===(p=v.stdout)||void 0===p||p.on("error",c.noop),null===(d=v.stderr)||void 0===d||d.on("error",c.noop);const y=o.createDeferred(),g={dispose:()=>{v.killed||y.completed||v.kill()}};null==l||l.add(g);const m=[],_=(e,t,n)=>{null==e||e.on(t,n),m.push({dispose:()=>null==e?void 0:e.removeListener(t,n)})};n.token&&m.push(n.token.onCancellationRequested(g.dispose));const b=[];_(v.stdout,"data",e=>b.push(e));const E=[];return _(v.stderr,"data",e=>{n.mergeStdOutErr?(b.push(e),E.push(e)):E.push(e)}),v.once("close",()=>{if(y.completed)return;const e=0===E.length||null==i?void 0:i.decode(E,f);if(e&&e.length>0&&n.throwOnStdErr)y.reject(new a.StdErrError(e));else{const t=i?i.decode(b,f):"";y.resolve({stdout:t,stderr:e})}m.forEach(e=>e.dispose())}),v.once("error",e=>{y.reject(e),m.forEach(e=>e.dispose())}),y.promise},t.execObservable=function(e,t,n={},o,s,c){const p=u(n,s),d=p.encoding?p.encoding:"utf8",h=r.spawn(e,t,p);let f=!1;const v={dispose(){!h||h.killed||f||l(h.pid),h&&h.unref()}};null==c||c.add(v);const y=new i.Observable(e=>{const t=[],r=(e,n,r)=>{null==e||e.on(n,r),t.push({dispose:()=>null==e?void 0:e.removeListener(n,r)})};n.token&&t.push(n.token.onCancellationRequested(()=>{f||h.killed||(h.kill(),f=!0)}));const i=(t,r)=>{const i=o?o.decode([r],d):"";"stderr"===t&&n.throwOnStdErr?e.error(new a.StdErrError(i)):e.next({source:t,out:i})};r(h.stdout,"data",e=>i("stdout",e)),r(h.stderr,"data",e=>i("stderr",e)),h.once("close",()=>{f=!0,e.complete(),t.forEach(e=>e.dispose())}),h.once("exit",()=>{f=!0,e.complete(),t.forEach(e=>e.dispose())}),h.once("error",n=>{f=!0,e.error(n),t.forEach(e=>e.dispose())})});return{proc:h,out:y,dispose:v.dispose}},t.killPid=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(435))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(497);t.Observable=r.Observable},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExecutionFactory=t.CONDA_RUN_VERSION=void 0;const o=n(1),s=n(65),a=n(205),c=n(12),u=n(18),l=n(21),p=n(22),d=n(13),h=n(6),f=n(222),v=n(437),y=n(440),g=n(40),m=n(81),_=n(11),b=n(4);t.CONDA_RUN_VERSION="4.6.0";let E=class{constructor(e,t,n,r,i,o,s,a,c){this.serviceContainer=e,this.activationHelper=t,this.processServiceFactory=n,this.configService=r,this.condaService=i,this.decoder=o,this.pyenvs=s,this.autoSelection=a,this.interpreterPathExpHelper=c,this.disposables=this.serviceContainer.get(h.IDisposableRegistry),this.logger=this.serviceContainer.get(g.IProcessLogger),this.fileSystem=this.serviceContainer.get(d.IFileSystem)}async create(e){let{pythonPath:t}=e;if(!t){const n=this.interpreterPathExpHelper.get(e.resource);if(!n||"python"===n){await Promise.race([this.autoSelection.autoSelectInterpreter(e.resource).then(()=>!0),_.sleep(5e4).then(()=>!1)])||b.traceError("Autoselection timeout out, this is likely a issue with how consumer called execution factory API. Using default python to execute.")}t=this.configService.getSettings(e.resource).pythonPath}const n=await this.processServiceFactory.create(e.resource),r=this.pyenvs.isWindowsStoreInterpreter.bind(this.pyenvs);return S(t,n,this.fileSystem,void 0,await r(t))}async createActivatedEnvironment(e){const t=await this.activationHelper.getActivatedEnvironmentVariables(e.resource,e.interpreter,e.allowEnvironmentFetchExceptions),n=t&&Object.keys(t).length>0;if(l.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,void 0,{hasEnvVars:n}),!n)return this.create({resource:e.resource,pythonPath:e.interpreter?e.interpreter.path:void 0});const r=e.interpreter?e.interpreter.path:this.configService.getSettings(e.resource).pythonPath,i=new f.ProcessService(this.decoder,{...t});return i.on("exec",this.logger.logProcess.bind(this.logger)),this.disposables.push(i),S(r,i,this.fileSystem)}async createCondaExecutionService(e,n,r){const i=n?Promise.resolve(n):this.processServiceFactory.create(r),o=this.serviceContainer.get(c.IComponentAdapter),[a,u,l,p]=await Promise.all([this.condaService.getCondaVersion(),o.getCondaEnvironment(e),this.condaService.getCondaFile(),i]);return a&&s.gte(a,t.CONDA_RUN_VERSION)&&u&&l&&p?(n||(p.on("exec",this.logger.logProcess.bind(this.logger)),this.disposables.push(p)),S(e,p,this.fileSystem,[l,u])):Promise.resolve(void 0)}};function S(e,t,n,r,i){let o=v.createPythonEnv(e,t,n);if(r){const[i,s]=r;o=v.createCondaEnv(i,s,e,t,n)}else i&&(o=v.createWindowsStoreEnv(e,t));const s=y.createPythonProcessService(t,o);return{getInterpreterInformation:()=>o.getInterpreterInformation(),getExecutablePath:()=>o.getExecutablePath(),isModuleInstalled:e=>o.isModuleInstalled(e),getModuleVersion:e=>o.getModuleVersion(e),getExecutionInfo:e=>o.getExecutionInfo(e),execObservable:(e,t)=>s.execObservable(e,t),execModuleObservable:(e,t,n)=>s.execModuleObservable(e,t,n),exec:(e,t)=>s.exec(e,t),execModule:(e,t,n)=>s.execModule(e,t,n)}}E=r([o.injectable(),i(0,o.inject(u.IServiceContainer)),i(1,o.inject(a.IEnvironmentActivationService)),i(2,o.inject(g.IProcessServiceFactory)),i(3,o.inject(h.IConfigurationService)),i(4,o.inject(c.ICondaService)),i(5,o.inject(g.IBufferDecoder)),i(6,o.inject(c.IComponentAdapter)),i(7,o.inject(m.IInterpreterAutoSelectionService)),i(8,o.inject(h.IInterpreterPathProxyService))],E),t.PythonExecutionFactory=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWindowsStoreEnv=t.createCondaEnv=t.createPythonEnv=void 0;const r=n(4),i=n(72),o=n(438),s=n(439),a=n(134);class c{constructor(e,t){this.pythonPath=e,this.deps=t,this.cachedExecutablePath=new Map,this.cachedInterpreterInformation=null}getExecutionInfo(e=[]){const t=this.deps.getPythonArgv(this.pythonPath);return i.buildPythonExecInfo(t,e)}getExecutionObservableInfo(e=[]){const t=this.deps.getObservablePythonArgv(this.pythonPath);return i.buildPythonExecInfo(t,e)}async getInterpreterInformation(){return null===this.cachedInterpreterInformation&&(this.cachedInterpreterInformation=await this.getInterpreterInformationImpl()),this.cachedInterpreterInformation}async getExecutablePath(){if(await this.deps.isValidExecutable(this.pythonPath))return this.pythonPath;const e=this.cachedExecutablePath.get(this.pythonPath);if(void 0!==e)return e;const t=this.getExecutionInfo(),n=o.getExecutablePath(t,this.deps.exec);return this.cachedExecutablePath.set(this.pythonPath,n),n}async getModuleVersion(e){const[t,n]=a.getModuleVersion(e),i=this.getExecutionInfo(t);let o;try{o=await this.deps.exec(i.command,i.args)}catch(t){return void r.traceInfo("Error when getting version of module "+e,t)}return n(o.stdout)}async isModuleInstalled(e){const[t]=a.isModuleInstalled(e),n=this.getExecutionInfo(t);try{await this.deps.exec(n.command,n.args)}catch(t){return r.traceInfo("Error when checking if module is installed "+e,t),!1}return!0}async getInterpreterInformationImpl(){try{const e=this.getExecutionInfo();return await s.getInterpreterInfo(e,this.deps.shellExec,{info:r.traceInfo,error:r.traceError})}catch(e){r.traceError(`Failed to get interpreter information for '${this.pythonPath}'`,e)}}}function u(e,t,n,r,i){return{getPythonArgv:e=>t||[e],getObservablePythonArgv:e=>n||[e],isValidExecutable:e,exec:async(e,t)=>r(e,t,{throwOnStdErr:!0}),shellExec:async(e,t)=>i(e,{timeout:t})}}t.createPythonEnv=function(e,t,n){const r=u(async e=>n.pathExists(e),void 0,void 0,(e,n,r)=>t.exec(e,n,r),(e,n)=>t.shellExec(e,n));return new c(e,r)},t.createCondaEnv=function(e,t,n,r,i){const o=["run"];""===t.name?o.push("-p",t.path):o.push("-n",t.name);const s=u(async e=>i.pathExists(e),[e,...o,"python"],void 0,(e,t,n)=>r.exec(e,t,n),(e,t)=>r.shellExec(e,t));return new c(n,s)},t.createWindowsStoreEnv=function(e,t){const n=u(async e=>!0,void 0,void 0,(e,n,r)=>t.exec(e,n,r),(e,n)=>t.shellExec(e,n));return new c(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExecutablePath=void 0;const r=n(134),i=n(72);t.getExecutablePath=async function(e,t){const[n,o]=r.getExecutable(),s=i.copyPythonExecInfo(e,n);return o((await t(s.command,s.args)).stdout)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterpreterInfo=void 0;const r=n(65),i=n(113),o=n(9),s=n(72);t.getInterpreterInfo=async function(e,t,n){const[a,c]=i.interpreterInfo(),u=s.copyPythonExecInfo(e,a),l=[u.command,...u.args],p=l.reduce((e,t)=>e?`${e} "${t}"`:`"${t.replaceAll("\\","\\\\")}"`,""),d=await t(p,15e3);if(d.stderr)return void(n&&n.error(`Failed to parse interpreter information for ${l} stderr: ${d.stderr}`));const h=c(d.stdout);return n&&n.info("Found interpreter for "+l),function(e,t){let n=""+t.versionInfo.slice(0,3).join(".");if(void 0!==t.versionInfo[3]&&["alpha","beta","candidate"].includes(t.versionInfo[3])&&(n=`${n}-${t.versionInfo[3]}`,void 0!==t.versionInfo[4])){let e=-1;try{e=parseInt(""+t.versionInfo[4],10)}catch(t){e=-1}n=e>=0?`${n}${e}`:n}return{architecture:t.is64Bit?o.Architecture.x64:o.Architecture.x86,path:e,version:new r.SemVer(n),sysVersion:t.sysVersion,sysPrefix:t.sysPrefix}}(e.pythonExecutable,h)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonProcessService=void 0;const r=n(223),i=n(441),o=n(134);class s{constructor(e){this.deps=e}execObservable(e,t){const n={...t},r=this.deps.getExecutionObservableInfo(e);return this.deps.execObservable(r.command,r.args,n)}execModuleObservable(e,t,n){const r=o.execModule(e,t),i={...n},s=this.deps.getExecutionObservableInfo(r);return this.deps.execObservable(s.command,s.args,i)}async exec(e,t){const n={...t},r=this.deps.getExecutionInfo(e);return this.deps.exec(r.command,r.args,n)}async execModule(e,t,n){const s=o.execModule(e,t),a={...n},c=this.deps.getExecutionInfo(s),u=await this.deps.exec(c.command,c.args,a);if(e&&r.ErrorUtils.outputHasModuleNotInstalledError(e,u.stderr)){if(!await this.deps.isModuleInstalled(e))throw new i.ModuleNotInstalledError(e)}return u}}t.createPythonProcessService=function(e,t){return new s({isModuleInstalled:async e=>t.isModuleInstalled(e),getExecutionInfo:e=>t.getExecutionInfo(e),getExecutionObservableInfo:e=>t.getExecutionObservableInfo(e),exec:async(t,n,r)=>e.exec(t,n,r),execObservable:(t,n,r)=>e.execObservable(t,n,r)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleNotInstalledError=void 0;class r extends Error{constructor(e){super(`Module '${e}' not installed.`)}}t.ModuleNotInstalledError=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonToolExecutionService=void 0;const o=n(1),s=n(18),a=n(40);let c=class{constructor(e){this.serviceContainer=e}async execObservable(e,t,n){if(t.env)throw new Error("Environment variables are not supported");if(e.moduleName&&e.moduleName.length>0){return(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModuleObservable(e.moduleName,e.args,t)}return(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).execObservable(e.execPath,e.args,{...t})}async exec(e,t,n){if(t.env)throw new Error("Environment variables are not supported");if(e.moduleName&&e.moduleName.length>0){return(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModule(e.moduleName,e.args,t)}return(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).exec(e.execPath,e.args,{...t})}};c=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],c),t.PythonToolExecutionService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(111),i=n(6),o=n(444),s=n(445),a=n(447),c=n(448),u=n(449),l=n(450),p=n(451),d=n(452),h=n(7),f=n(173),v=n(453),y=n(454),g=n(455),m=n(456),_=n(460),b=n(461),E=n(462),S=n(463),w=n(465),T=n(208),P=n(224),I=n(466),C=n(467),O=n(468),A=n(40),x=n(469),R=n(471),N=n(472),k=n(473),D=n(474),j=n(475),M=n(476),L=n(479),F=n(481),V=n(482),U=n(483),B=n(484),H=n(20),W=n(485),G=n(486),$=n(487),q=n(488);t.registerTypes=function(e){e.addSingletonInstance(i.IsWindows,P.IS_WINDOWS),e.addSingleton(h.IActiveResourceService,o.ActiveResourceService),e.addSingleton(i.IInterpreterPathProxyService,$.InterpreterPathProxyService),e.addSingleton(i.IInterpreterPathService,b.InterpreterPathService),e.addSingleton(i.IExtensions,p.Extensions),e.addSingleton(i.IRandom,G.Random),e.addSingleton(i.IPersistentStateFactory,T.PersistentStateFactory),e.addBinding(i.IPersistentStateFactory,r.IExtensionSingleActivationService),e.addSingleton(H.ITerminalServiceFactory,M.TerminalServiceFactory),e.addSingleton(i.IPathUtils,I.PathUtils),e.addSingleton(h.IApplicationShell,a.ApplicationShell),e.addSingleton(h.IClipboard,c.ClipboardService),e.addSingleton(i.ICurrentProcess,C.CurrentProcess),e.addSingleton(i.IInstaller,_.ProductInstaller),e.addSingleton(h.ICommandManager,u.CommandManager),e.addSingleton(h.IContextKeyManager,q.ContextKeyManager),e.addSingleton(i.IConfigurationService,y.ConfigurationService),e.addSingleton(h.IWorkspaceService,f.WorkspaceService),e.addSingleton(A.IProcessLogger,O.ProcessLogger),e.addSingleton(h.IDocumentManager,l.DocumentManager),e.addSingleton(h.ITerminalManager,d.TerminalManager),e.addSingleton(h.IApplicationEnvironment,s.ApplicationEnvironment),e.addSingleton(i.IBrowserService,E.BrowserService),e.addSingleton(i.IHttpClient,w.HttpClient),e.addSingleton(i.IFileDownloader,S.FileDownloader),e.addSingleton(i.IEditorUtils,m.EditorUtils),e.addSingleton(H.ITerminalActivator,x.TerminalActivator),e.addSingleton(H.ITerminalHelper,L.TerminalHelper),e.addSingleton(H.ITerminalActivationCommandProvider,R.Bash,H.TerminalActivationProviders.bashCShellFish),e.addSingleton(H.ITerminalActivationCommandProvider,N.CommandPromptAndPowerShell,H.TerminalActivationProviders.commandPromptAndPowerShell),e.addSingleton(H.ITerminalActivationCommandProvider,j.PyEnvActivationCommandProvider,H.TerminalActivationProviders.pyenv),e.addSingleton(H.ITerminalActivationCommandProvider,k.CondaActivationCommandProvider,H.TerminalActivationProviders.conda),e.addSingleton(H.ITerminalActivationCommandProvider,D.PipEnvActivationCommandProvider,H.TerminalActivationProviders.pipenv),e.addSingleton(i.IToolExecutionPath,g.PipEnvExecutionPath,i.ToolExecutionPath.pipenv),e.addSingleton(i.IAsyncDisposableRegistry,v.AsyncDisposableRegistry),e.addSingleton(W.IMultiStepInputFactory,W.MultiStepInputFactory),e.addSingleton(H.IShellDetector,V.TerminalNameShellDetector),e.addSingleton(H.IShellDetector,F.SettingsShellDetector),e.addSingleton(H.IShellDetector,U.UserEnvironmentShellDetector),e.addSingleton(H.IShellDetector,B.VSCEnvironmentShellDetector)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveResourceService=void 0;const o=n(1),s=n(7);let a=class{constructor(e,t){this.documentManager=e,this.workspaceService=t}getActiveResource(){const e=this.documentManager.activeTextEditor;return e&&!e.document.isUntitled?e.document.uri:Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.length>0?this.workspaceService.workspaceFolders[0].uri:void 0}};a=r([o.injectable(),i(0,o.inject(s.IDocumentManager)),i(1,o.inject(s.IWorkspaceService))],a),t.ActiveResourceService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEnvironment=void 0;const o=n(1),s=n(0),a=n(65),c=n(5),u=n(13),l=n(6),p=n(9);let d=class{constructor(e,t,n){this.platform=e,this.pathUtils=t,this.process=n}get userSettingsFile(){const e="insiders"===this.channel?"Code - Insiders":"Code";switch(this.platform.osType){case p.OSType.OSX:return s.join(this.pathUtils.home,"Library","Application Support",e,"User","settings.json");case p.OSType.Linux:return s.join(this.pathUtils.home,".config",e,"User","settings.json");case p.OSType.Windows:return this.process.env.APPDATA?s.join(this.process.env.APPDATA,e,"User","settings.json"):void 0;default:return}}get appName(){return c.env.appName}get vscodeVersion(){return c.version}get appRoot(){return c.env.appRoot}get uiKind(){return c.env.uiKind}get language(){return c.env.language}get sessionId(){return c.env.sessionId}get machineId(){return c.env.machineId}get extensionName(){return this.packageJson.displayName}get shell(){return c.env.shell}get packageJson(){return n(446)}get channel(){return this.appName.indexOf("Insider")>0?"insiders":"stable"}get extensionChannel(){const e=a.parse(this.packageJson.version);return!e||e.prerelease.length>0?"insiders":"stable"}get uriScheme(){return c.env.uriScheme}};d=r([o.injectable(),i(0,o.inject(u.IPlatformService)),i(1,o.inject(l.IPathUtils)),i(2,o.inject(l.ICurrentProcess))],d),t.ApplicationEnvironment=d},function(e){e.exports=JSON.parse('{"name":"python-environment-manager","displayName":"Python Environment Manager","description":"View and manage Python environments & pacakges.","version":"1.0.3","capabilities":{"untrustedWorkspaces":{"supported":false,"description":"Management of Python environments in untrusted workspaces is not supported."},"virtualWorkspaces":{"supported":false,"description":"Management of Python environments is not supported on the web."}},"publisher":"donjayamanne","author":{"name":"Don Jayamanne"},"license":"MIT","homepage":"https://github.com/DonJayamanne/vscode-python-manager","repository":{"type":"git","url":"https://github.com/DonJayamanne/vscode-python-manager"},"bugs":{"url":"https://github.com/DonJayamanne/vscode-python-manager/issues"},"qna":"https://github.com/DonJayamanne/vscode-python-manager/issues","icon":"icon.png","galleryBanner":{"color":"#1e415e","theme":"dark"},"engines":{"vscode":"^1.62.0"},"keywords":["python","conda","venv","pipenv","pyenv","packages"],"categories":["Programming Languages","Machine Learning","Other","Data Science"],"activationEvents":["onView:pythonEnvironments"],"main":"./out/client/extension","browser":"./dist/extension.browser.js","contributes":{"commands":[{"command":"python.envManager.clearPersistentStorage","title":"Python: Clear Environment Manager cache","enablement":"false"},{"command":"python.envManager.create","title":"Create Environment","icon":"$(add)","enablement":"false"},{"command":"python.envManager.delete","title":"Delete Environment","icon":"$(trash)","enablement":"false"},{"command":"python.envManager.viewPackages","title":"View Packages","icon":"$(package)"},{"command":"python.envManager.openInTerminal","title":"Open in Terminal","icon":"$(terminal)"},{"command":"python.envManager.refresh","title":"Refresh Environments","icon":"$(refresh)"}],"menus":{"view/title":[{"command":"python.envManager.refresh","when":"view == pythonEnvironments","group":"navigation"}],"view/item/context":[{"command":"python.envManager.create","when":"view == pythonEnvironments && viewItem == envType && false","group":"inline"},{"command":"python.envManager.delete","when":"view == pythonEnvironments && viewItem == env && false","group":"inline"},{"command":"python.envManager.openInTerminal","when":"view == pythonEnvironments && viewItem == env","group":"inline@2"}]},"viewsWelcome":[],"viewsContainers":{"activitybar":[{"id":"package-explorer","title":"Python","icon":"resources/logo.svg"}]},"views":{"package-explorer":[{"id":"pythonEnvironments","name":"Environments","icon":"resources/logo.svg","contextualTitle":"Environment Manager"}]}},"scripts":{"package":"gulp clean && gulp prePublishBundle && vsce package -o python-env-manager.vsix","prePublish":"gulp clean && gulp prePublishNonBundle","compile":"tsc -watch -p ./","compiled":"deemon npm run compile","kill-compiled":"deemon --kill npm run compile","checkDependencies":"gulp checkDependencies","test":"node ./out/test/standardTest.js && node ./out/test/multiRootTest.js","test:unittests":"mocha --config ./build/.mocha.unittests.json","test:unittests:cover":"nyc --no-clean --nycrc-path ./build/.nycrc mocha --config ./build/.mocha.unittests.json","test:functional":"mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:functional:perf":"node --inspect-brk ./node_modules/mocha/bin/_mocha --require source-map-support/register --config ./build/.mocha.functional.perf.json","test:functional:memleak":"node --inspect-brk ./node_modules/mocha/bin/_mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:functional:cover":"nyc --no-clean --nycrc-path ./build/.nycrc mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:cover:report":"nyc --nycrc-path ./build/.nycrc  report --reporter=text --reporter=html --reporter=text-summary --reporter=cobertura","testDebugger":"node ./out/test/testBootstrap.js ./out/test/debuggerTest.js","testDebugger:cover":"nyc --no-clean --use-spawn-wrap --nycrc-path ./build/.nycrc --require source-map-support/register node ./out/test/debuggerTest.js","testSingleWorkspace":"node ./out/test/testBootstrap.js ./out/test/standardTest.js","testSingleWorkspace:cover":"nyc --no-clean --use-spawn-wrap --nycrc-path ./build/.nycrc --require source-map-support/register node ./out/test/standardTest.js","preTestJediLSP":"node ./out/test/languageServers/jedi/lspSetup.js","testJediLSP":"node ./out/test/languageServers/jedi/lspSetup.js && cross-env CODE_TESTS_WORKSPACE=src/test VSC_PYTHON_CI_TEST_GREP=\'Language Server:\' node ./out/test/testBootstrap.js ./out/test/standardTest.js && node ./out/test/languageServers/jedi/lspTeardown.js","testMultiWorkspace":"node ./out/test/testBootstrap.js ./out/test/multiRootTest.js","testPerformance":"node ./out/test/testBootstrap.js ./out/test/performanceTest.js","testSmoke":"cross-env INSTALL_JUPYTER_EXTENSION=true \\"node ./out/test/smokeTest.js\\"","testInsiders":"cross-env VSC_PYTHON_CI_TEST_VSC_CHANNEL=insiders INSTALL_PYLANCE_EXTENSION=true TEST_FILES_SUFFIX=insiders.test CODE_TESTS_WORKSPACE=src/testMultiRootWkspc/smokeTests \\"node ./out/test/standardTest.js\\"","lint-staged":"node gulpfile.js","lint":"eslint --ext .ts,.js src build","lint-fix":"eslint --fix --ext .ts,.js src build gulpfile.js","format-check":"prettier --check \'src/**/*.ts\' \'build/**/*.js\' \'.github/**/*.yml\' gulpfile.js","format-fix":"prettier --write \'src/**/*.ts\' \'build/**/*.js\' \'.github/**/*.yml\' gulpfile.js","clean":"gulp clean","addExtensionPackDependencies":"gulp addExtensionPackDependencies","updateBuildNumber":"gulp updateBuildNumber","verifyBundle":"gulp verifyBundle","webpack":"webpack"},"dependencies":{"@vscode/codicons":"0.0.26","@vscode/jupyter-lsp-middleware":"^0.2.15","arch":"^2.1.0","azure-storage":"^2.10.4","chokidar":"^3.4.3","diff-match-patch":"^1.0.0","fs-extra":"^9.1.0","glob":"^7.1.2","hash.js":"^1.1.7","iconv-lite":"^0.4.21","inversify":"^5.0.4","is-wsl":"^2.2.0","jsonc-parser":"^2.0.3","lodash":"^4.17.21","md5":"^2.2.1","minimatch":"^3.0.4","named-js-regexp":"^1.3.3","node-stream-zip":"^1.6.0","reflect-metadata":"^0.1.12","request":"^2.87.0","request-progress":"^3.0.0","rxjs":"^6.5.4","rxjs-compat":"^6.5.4","semver":"^5.5.0","sudo-prompt":"^8.2.0","tmp":"^0.0.29","typescript-char":"^0.0.0","uint64be":"^1.0.1","unicode":"^10.0.0","untildify":"^3.0.2","vscode-debugadapter":"^1.28.0","vscode-debugprotocol":"^1.28.0","vscode-extension-telemetry":"0.4.2","vscode-jsonrpc":"6.0.0","vscode-languageclient":"7.0.0","vscode-languageserver":"7.0.0","vscode-languageserver-protocol":"3.16.0","vscode-tas-client":"^0.1.22","winreg":"^1.2.4","xml2js":"^0.4.19"},"devDependencies":{"@istanbuljs/nyc-config-typescript":"^0.1.3","@types/chai":"^4.1.2","@types/chai-arrays":"^1.0.2","@types/chai-as-promised":"^7.1.0","@types/diff-match-patch":"^1.0.32","@types/download":"^6.2.2","@types/fs-extra":"^5.0.1","@types/get-port":"^3.2.0","@types/glob":"^5.0.35","@types/lodash":"^4.14.104","@types/md5":"^2.1.32","@types/mocha":"^5.2.7","@types/nock":"^10.0.3","@types/node":"^12.19.12","@types/request":"^2.47.0","@types/semver":"^5.5.0","@types/shortid":"^0.0.29","@types/sinon":"^7.5.1","@types/tmp":"0.0.33","@types/untildify":"^3.0.0","@types/uuid":"^3.4.3","@types/vscode":"~1.53.0","@types/winreg":"^1.2.30","@types/xml2js":"^0.4.2","@typescript-eslint/eslint-plugin":"^3.7.0","@typescript-eslint/parser":"^3.7.0","@vscode/test-electron":"^1.6.1","chai":"^4.1.2","chai-arrays":"^2.0.0","chai-as-promised":"^7.1.1","copy-webpack-plugin":"^5.1.2","cross-spawn":"^6.0.5","deemon":"^1.6.0","del":"^3.0.0","download":"^7.0.0","eslint":"^7.2.0","eslint-config-airbnb":"^18.2.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.22.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-react":"^7.20.3","eslint-plugin-react-hooks":"^4.0.0","expose-loader":"^0.7.5","flat":"^4.0.0","get-port":"^3.2.0","gulp":"^4.0.0","gulp-chmod":"^2.0.0","gulp-gunzip":"^1.1.0","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.4","gulp-typescript":"^4.0.1","lolex":"^5.1.2","mocha":"^8.1.1","mocha-junit-reporter":"^1.17.0","mocha-multi-reporters":"^1.1.7","nock":"^10.0.6","node-has-native-dependencies":"^1.0.2","node-loader":"^1.0.2","nyc":"^15.0.0","prettier":"^2.0.2","rewiremock":"^3.13.0","rimraf":"^3.0.2","shortid":"^2.2.8","sinon":"^8.0.1","source-map-support":"^0.5.12","ts-loader":"^5.3.0","ts-mock-imports":"^1.3.0","ts-mockito":"^2.5.0","ts-node":"^8.3.0","tsconfig-paths-webpack-plugin":"^3.2.0","typemoq":"^2.1.0","typescript":"4.1.5","typescript-formatter":"^7.1.0","uuid":"^3.3.2","vsce":"^1.96.1","vscode-debugadapter-testsupport":"^1.27.0","webpack":"^4.33.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.1.2","webpack-fix-default-import-plugin":"^1.0.3","webpack-merge":"^4.1.4","webpack-node-externals":"^1.7.2","webpack-require-from":"^1.8.0","yargs":"^15.3.1"},"__metadata":{"id":"f1f59ae4-9318-4f3c-a9b5-81b2eaa5f8a5","publisherDisplayName":"Microsoft","publisherId":"998b010b-e2af-44a5-a6cd-0b5fd3b9b6f8"}}')},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationShell=void 0;const i=n(1),o=n(5);let s=class{get onDidChangeWindowState(){return o.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return o.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return o.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return o.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return o.window.showQuickPick(e,t,n)}showOpenDialog(e){return o.window.showOpenDialog(e)}showSaveDialog(e){return o.window.showSaveDialog(e)}showInputBox(e,t){return o.window.showInputBox(e,t)}openUrl(e){o.env.openExternal(o.Uri.parse(e))}setStatusBarMessage(e,t){return o.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t){return o.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return o.window.showWorkspaceFolderPick(e)}withProgress(e,t){return o.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new o.CancellationTokenSource).token,r=this.createStatusBarItem(o.StatusBarAlignment.Left),i={report:t=>{r.text=`${e} ${t.message}`}};return r.show(),t(i,n).then(e=>(r.dispose(),e))}createQuickPick(){return o.window.createQuickPick()}createInputBox(){return o.window.createInputBox()}createTreeView(e,t){return o.window.createTreeView(e,t)}createOutputChannel(e){return o.window.createOutputChannel(e)}};s=r([i.injectable()],s),t.ApplicationShell=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardService=void 0;const i=n(1),o=n(5);let s=class{async readText(){return o.env.clipboard.readText()}async writeText(e){await o.env.clipboard.writeText(e)}};s=r([i.injectable()],s),t.ClipboardService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const i=n(1),o=n(5);let s=class{registerCommand(e,t,n){return o.commands.registerCommand(e,t,n)}registerTextEditorCommand(e,t,n){return o.commands.registerTextEditorCommand(e,t,n)}executeCommand(e,...t){return o.commands.executeCommand(e,...t)}getCommands(e){return o.commands.getCommands(e)}};s=r([i.injectable()],s),t.CommandManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentManager=void 0;const i=n(1),o=n(5);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return o.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}createTextEditorDecorationType(e){return o.window.createTextEditorDecorationType(e)}};s=r([i.injectable()],s),t.DocumentManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0;const i=n(1),o=n(5);let s=class{get all(){return o.extensions.all}get onDidChange(){return o.extensions.onDidChange}getExtension(e){return o.extensions.getExtension(e)}};s=r([i.injectable()],s),t.Extensions=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const i=n(1),o=n(5);let s=class{get onDidCloseTerminal(){return o.window.onDidCloseTerminal}get onDidOpenTerminal(){return o.window.onDidOpenTerminal}createTerminal(e){return o.window.createTerminal(e)}};s=r([i.injectable()],s),t.TerminalManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncDisposableRegistry=void 0;const i=n(1),o=n(74);let s=class{constructor(){this.disposables=new o.Disposables}push(...e){this.disposables.push(...e)}async dispose(){return this.disposables.dispose()}};s=r([i.injectable()],s),t.AsyncDisposableRegistry=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;const o=n(1),s=n(5),a=n(81),c=n(18),u=n(7),l=n(175),p=n(17),d=n(6);let h=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(u.IWorkspaceService)}getSettings(e){const t=this.serviceContainer.get(a.IInterpreterAutoSelectionService),n=this.serviceContainer.get(d.IInterpreterPathService);return l.PythonSettings.getInstance(e,t,this.workspaceService,n)}async updateSectionSetting(e,t,n,r,i){const o=this.serviceContainer.get(d.IInterpreterPathService);let a={uri:r,target:i||s.ConfigurationTarget.WorkspaceFolder};"python"===e&&i!==s.ConfigurationTarget.Global&&(a=l.PythonSettings.getSettingsUriAndTarget(r,this.workspaceService)),i=i||a.target;const c=this.workspaceService.getConfiguration(e,a.uri),u="python"===e&&"pythonPath"===t?o.inspect(a.uri):c.inspect(t);void 0!==u&&(i===s.ConfigurationTarget.Global&&u.globalValue===n||i===s.ConfigurationTarget.Workspace&&u.workspaceValue===n||i===s.ConfigurationTarget.WorkspaceFolder&&u.workspaceFolderValue===n)||("python"===e&&"pythonPath"===t?await o.update(a.uri,i,n):(await c.update(t,n,i),await this.verifySetting(c,i,t,n)))}async updateSetting(e,t,n,r){return this.updateSectionSetting("python",e,t,n,r)}isTestExecution(){return"1"===process.env.VSC_PYTHON_CI_TEST}async verifySetting(e,t,n,r){if(this.isTestExecution()&&!p.isUnitTestExecution()){let i=0;do{const o=e.inspect(n);if(!o&&void 0===r)break;if(o&&void 0!==r){let e;if(e=t===s.ConfigurationTarget.Global?o.globalValue:t===s.ConfigurationTarget.Workspace?o.workspaceValue:o.workspaceFolderValue,e===r)break}await new Promise(e=>setTimeout(e,250)),i+=1}while(i<20)}}};h=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],h),t.ConfigurationService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvExecutionPath=void 0;const o=n(1),s=n(6);let a=class{constructor(e){this.configService=e}get executable(){return this.configService.getSettings().pipenvPath}};a=r([o.injectable(),i(0,o.inject(s.IConfigurationService))],a),t.PipEnvExecutionPath=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorUtils=t.getTempFileWithDocumentContents=t.getWorkspaceEditsFromPatch=t.getTextEditsFromPatch=void 0;const i=n(90),o=n(1),s=n(457),a=n(35),c=n(0),u=n(5),l=n(4),p=n(223),d=n(31);var h;!function(e){e[e.Delete=0]="Delete",e[e.Insert=1]="Insert",e[e.Replace=2]="Replace"}(h||(h={}));const f=a.EOL.length;class v{constructor(e,t){this.action=e,this.start=t,this.text=""}apply(){switch(this.action){case h.Insert:return u.TextEdit.insert(this.start,this.text);case h.Delete:return u.TextEdit.delete(new u.Range(this.start,this.end));case h.Replace:return u.TextEdit.replace(new u.Range(this.start,this.end),this.text);default:return new u.TextEdit(new u.Range(new u.Position(0,0),new u.Position(0,0)),"")}}}function y(e,t,r=0){let i=r,o=0;const s=e.split(/\r?\n/g);i>0&&s.filter((e,t)=>t<i).forEach(e=>o+=e.length+f);const a=[];let c,l=null;for(let e=0;e<t.length;e+=1){let r=new u.Position(i,o);for(let n=0;n<t[e][1].length;n+=1)"\n"!==t[e][1][n]?o+=1:(o=0,i+=1);const p=n(90);switch(t[e][0]){case p.DIFF_DELETE:if(0===s[i-1].length&&s[r.line-1]&&0===s[r.line-1].length?(r=new u.Position(r.line-1,0),c=new u.Position(i-1,0)):c=new u.Position(i,o),null===l)l=new v(h.Delete,r);else if(l.action!==h.Delete)throw new Error("cannot format due to an internal error.");l.end=c;break;case p.DIFF_INSERT:null===l?l=new v(h.Insert,r):l.action===h.Delete&&(l.action=h.Replace),i=r.line,o=r.character,l.text+=t[e][1];break;case p.DIFF_EQUAL:null!==l&&(a.push(l),l=null)}}return null!==l&&a.push(l),a}function g(e){const t=[];if(!e)return t;const r=e.split(/[\r\n]/);let o=0;const s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;for(;o<r.length;){const e=r[o].match(s);if(!e)throw new Error("Invalid patch string: "+r[o]);const a=new i.diff_match_patch.patch_obj;t.push(a),a.start1=parseInt(e[1],10),""===e[2]?(a.start1-=1,a.length1=1):"0"===e[2]?a.length1=0:(a.start1-=1,a.length1=parseInt(e[2],10)),a.start2=parseInt(e[3],10),""===e[4]?(a.start2-=1,a.length2=1):"0"===e[4]?a.length2=0:(a.start2-=1,a.length2=parseInt(e[4],10)),o+=1;const c=n(90);for(;o<r.length;){const e=r[o].charAt(0);let t;try{t=r[o].substring(1)}catch(e){throw new Error("Illegal escape in patch_fromText")}if("-"===e)a.diffs.push([c.DIFF_DELETE,t]);else if("+"===e)a.diffs.push([c.DIFF_INSERT,t]);else if(" "===e)a.diffs.push([c.DIFF_EQUAL,t]);else{if("@"===e)break;if(""!==e)throw new Error(`Invalid patch mode '${e}' in: ${t}`)}o+=1}}return t}t.getTextEditsFromPatch=function(e,t){if(t.startsWith("---")&&(t=t.substring(t.indexOf("@@"))),0===t.length)return[];t=t.replace(/\\ No newline at end of file[\r\n]/,"");const r=new(n(90).diff_match_patch),i=g.call(r,t);if(!Array.isArray(i)||0===i.length)throw new Error("Unable to parse Patch string");const o=[];return i.forEach(t=>{t.diffs.forEach(e=>{e[1]+=a.EOL}),y(e,t.diffs,t.start1).forEach(e=>o.push(e.apply()))}),o},t.getWorkspaceEditsFromPatch=function(e,t,r){const i=new u.WorkspaceEdit;return e.forEach(e=>{const o=e.indexOf("@@");if(-1===o)return;const s=e.substring(0,o).split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0&&e.toLowerCase().endsWith(".py")&&e.indexOf(" a")>0);if(e.startsWith("---")&&(e=e.substring(o)),0===e.length)return;if(0===s.length)return;let l=s[0].substring(s[0].indexOf(" a")+3).trim();if(l=t&&!c.isAbsolute(l)?c.resolve(t,l):l,!r.fileExistsSync(l))return;e=e.replace(/\\ No newline at end of file[\r\n]/,"");const p=new(n(90).diff_match_patch),d=g.call(p,e);if(!Array.isArray(d)||0===d.length)throw new Error("Unable to parse Patch string");const f=r.readFileSync(l),v=u.Uri.file(l);d.forEach(e=>{e.diffs.forEach(e=>{e[1]+=a.EOL}),y(f,e.diffs,e.start1).forEach(e=>{switch(e.action){case h.Delete:i.delete(v,new u.Range(e.start,e.end));break;case h.Insert:i.insert(v,e.start,e.text);break;case h.Replace:i.replace(v,new u.Range(e.start,e.end),e.text)}})})}),i},t.getTempFileWithDocumentContents=async function(e,t){let n=`${e.uri.fsPath}.${s(e.uri.fsPath+e.uri.fragment)}.tmp`;try{d.isNotebookCell(e.uri)&&!await t.fileExists(e.uri.fsPath)&&(n=(await t.createTemporaryFile(`${c.basename(e.uri.fsPath)}-${e.uri.fragment}.tmp`)).filePath),await t.writeFile(n,e.getText())}catch(e){throw l.traceError("Failed to create a temporary file",e),new p.WrappedError("Failed to create a temporary file, "+e.message,e)}return n};let m=class{getWorkspaceEditsFromPatch(e,t,r){const i=new u.WorkspaceEdit;if(t.startsWith("---")&&(t=t.substring(t.indexOf("@@"))),0===t.length)return i;t=t.replace(/\\ No newline at end of file[\r\n]/,"");const o=new(n(90).diff_match_patch),s=g.call(o,t);if(!Array.isArray(s)||0===s.length)throw new Error("Unable to parse Patch string");return s.forEach(t=>{t.diffs.forEach(e=>{e[1]+=a.EOL}),y(e,t.diffs,t.start1).forEach(e=>{switch(e.action){case h.Delete:i.delete(r,new u.Range(e.start,e.end));break;case h.Insert:i.insert(r,e.start,e.text);break;case h.Replace:i.replace(r,new u.Range(e.start,e.end),e.text)}})}),i}};m=r([o.injectable()],m),t.EditorUtils=m},function(e,t,n){var r,i,o,s,a;r=n(458),i=n(225).utf8,o=n(459),s=n(225).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,p=-1732584194,d=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=a._ff,v=a._gg,y=a._hh,g=a._ii;for(h=0;h<n.length;h+=16){var m=u,_=l,b=p,E=d;u=f(u,l,p,d,n[h+0],7,-680876936),d=f(d,u,l,p,n[h+1],12,-389564586),p=f(p,d,u,l,n[h+2],17,606105819),l=f(l,p,d,u,n[h+3],22,-1044525330),u=f(u,l,p,d,n[h+4],7,-176418897),d=f(d,u,l,p,n[h+5],12,1200080426),p=f(p,d,u,l,n[h+6],17,-1473231341),l=f(l,p,d,u,n[h+7],22,-45705983),u=f(u,l,p,d,n[h+8],7,1770035416),d=f(d,u,l,p,n[h+9],12,-1958414417),p=f(p,d,u,l,n[h+10],17,-42063),l=f(l,p,d,u,n[h+11],22,-1990404162),u=f(u,l,p,d,n[h+12],7,1804603682),d=f(d,u,l,p,n[h+13],12,-40341101),p=f(p,d,u,l,n[h+14],17,-1502002290),u=v(u,l=f(l,p,d,u,n[h+15],22,1236535329),p,d,n[h+1],5,-165796510),d=v(d,u,l,p,n[h+6],9,-1069501632),p=v(p,d,u,l,n[h+11],14,643717713),l=v(l,p,d,u,n[h+0],20,-373897302),u=v(u,l,p,d,n[h+5],5,-701558691),d=v(d,u,l,p,n[h+10],9,38016083),p=v(p,d,u,l,n[h+15],14,-660478335),l=v(l,p,d,u,n[h+4],20,-405537848),u=v(u,l,p,d,n[h+9],5,568446438),d=v(d,u,l,p,n[h+14],9,-1019803690),p=v(p,d,u,l,n[h+3],14,-187363961),l=v(l,p,d,u,n[h+8],20,1163531501),u=v(u,l,p,d,n[h+13],5,-1444681467),d=v(d,u,l,p,n[h+2],9,-51403784),p=v(p,d,u,l,n[h+7],14,1735328473),u=y(u,l=v(l,p,d,u,n[h+12],20,-1926607734),p,d,n[h+5],4,-378558),d=y(d,u,l,p,n[h+8],11,-2022574463),p=y(p,d,u,l,n[h+11],16,1839030562),l=y(l,p,d,u,n[h+14],23,-35309556),u=y(u,l,p,d,n[h+1],4,-1530992060),d=y(d,u,l,p,n[h+4],11,1272893353),p=y(p,d,u,l,n[h+7],16,-155497632),l=y(l,p,d,u,n[h+10],23,-1094730640),u=y(u,l,p,d,n[h+13],4,681279174),d=y(d,u,l,p,n[h+0],11,-358537222),p=y(p,d,u,l,n[h+3],16,-722521979),l=y(l,p,d,u,n[h+6],23,76029189),u=y(u,l,p,d,n[h+9],4,-640364487),d=y(d,u,l,p,n[h+12],11,-421815835),p=y(p,d,u,l,n[h+15],16,530742520),u=g(u,l=y(l,p,d,u,n[h+2],23,-995338651),p,d,n[h+0],6,-198630844),d=g(d,u,l,p,n[h+7],10,1126891415),p=g(p,d,u,l,n[h+14],15,-1416354905),l=g(l,p,d,u,n[h+5],21,-57434055),u=g(u,l,p,d,n[h+12],6,1700485571),d=g(d,u,l,p,n[h+3],10,-1894986606),p=g(p,d,u,l,n[h+10],15,-1051523),l=g(l,p,d,u,n[h+1],21,-2054922799),u=g(u,l,p,d,n[h+8],6,1873313359),d=g(d,u,l,p,n[h+15],10,-30611744),p=g(p,d,u,l,n[h+6],15,-1560198380),l=g(l,p,d,u,n[h+13],21,1309151649),u=g(u,l,p,d,n[h+4],6,-145523070),d=g(d,u,l,p,n[h+11],10,-1120210379),p=g(p,d,u,l,n[h+2],15,718787259),l=g(l,p,d,u,n[h+9],21,-343485551),u=u+m>>>0,l=l+_>>>0,p=p+b>>>0,d=d+E>>>0}return r.endian([u,l,p,d])})._ff=function(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,n,r,i,o,s){var a=e+(t^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?t.push(n.charAt(i>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInstaller=t.DataScienceInstaller=t.Product=void 0;const o=n(1),s=n(65);n(14);const a=n(12),c=n(18),u=n(26),l=n(21),p=n(22),d=n(40),h=n(6),f=n(31),v=n(112),y=n(161),g=n(82),m=n(4),_=n(7),b=n(17),E=n(52);var S=n(6);Object.defineProperty(t,"Product",{enumerable:!0,get:function(){return S.Product}});const w=new Map([[h.Product.torchProfilerInstallName,new Set([u.EnvironmentType.Conda])]]);class T{constructor(e,t){this.serviceContainer=e,this.outputChannel=t,this.appShell=e.get(_.IApplicationShell),this.configService=e.get(h.IConfigurationService),this.workspaceService=e.get(_.IWorkspaceService),this.productService=e.get(g.IProductService),this.persistentStateFactory=e.get(h.IPersistentStateFactory)}promptToInstall(e,t,n,r){const i=t&&f.isResource(t)?this.workspaceService.getWorkspaceFolder(t):void 0,o=`${e}${i?i.uri.fsPath:""}`;if(T.PromptPromises.has(o))return T.PromptPromises.get(o);const s=this.promptToInstallImplementation(e,t,n,r);return T.PromptPromises.set(o,s),s.then(()=>T.PromptPromises.delete(o)).ignoreErrors(),s.catch(()=>T.PromptPromises.delete(o)).ignoreErrors(),s}async install(e,t,n,r){if(e===h.Product.unittest)return h.InstallerResponse.Installed;const i=this.serviceContainer.get(g.IInstallationChannelManager),o=await i.getInstallationChannel(e,t);return o?(await o.installModule(e,t,n,r).catch(t=>m.traceError(`Error in installing the product '${y.ProductNames.get(e)}', ${t}`)),this.isInstalled(e,t).then(t=>(l.sendTelemetryEvent(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:o.displayName,productName:y.ProductNames.get(e),isInstalled:t}),t?h.InstallerResponse.Installed:h.InstallerResponse.Ignore))):(l.sendTelemetryEvent(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",productName:y.ProductNames.get(e)}),h.InstallerResponse.Ignore)}async isProductVersionCompatible(e,t,n){const r=await this.getProductSemVer(e,n);return r?s.satisfies(r,t)?h.ProductInstallStatus.Installed:h.ProductInstallStatus.NeedsUpgrade:h.ProductInstallStatus.NotInstalled}async getProductSemVer(e,t){const n=f.isResource(t)?void 0:t,r=f.isResource(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);let o;if(this.isExecutableAModule(e,r)){const e=await this.serviceContainer.get(d.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0});o=await e.getModuleVersion(i)}else{const e=await this.serviceContainer.get(d.IProcessServiceFactory).create(r);o=(await e.exec(i,["--version"],{mergeStdOutErr:!0})).stdout.trim()}if(!o)return null;try{return s.coerce(o)}catch(t){return m.traceError(`Unable to parse version ${o} for product ${e}: `,t),null}}async isInstalled(e,t){if(e===h.Product.unittest)return!0;const n=f.isResource(t)?void 0:t,r=f.isResource(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);if(this.isExecutableAModule(e,r)){return(await this.serviceContainer.get(d.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0})).isModuleInstalled(i)}return(await this.serviceContainer.get(d.IProcessServiceFactory).create(r)).exec(i,["--version"],{mergeStdOutErr:!0}).then(()=>!0).catch(()=>!1)}getExecutableNameFromSettings(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(g.IProductPathService,n).getExecutableNameFromSettings(e,t)}isExecutableAModule(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(g.IProductPathService,n).isExecutableAModule(e,t)}}T.PromptPromises=new Map;class P extends T{async install(e,t,n,r){var i,o,s,a;if(f.isResource(t))throw new Error("All data science packages require an interpreter be passed in");const c=t,d=await this.serviceContainer.get(g.IInstallationChannelManager).getInstallationChannels(c),_=v.translateProductToModule(e),b=!(null===(i=w.get(e))||void 0===i?void 0:i.has(u.EnvironmentType.Conda));let S=u.ModuleInstallerType.Unknown;if(c.envType===u.EnvironmentType.Conda&&b)S=u.ModuleInstallerType.Conda;else if(c.envType!==u.EnvironmentType.Conda||b)switch(c.envType){case u.EnvironmentType.Pipenv:S=u.ModuleInstallerType.Pipenv;break;case u.EnvironmentType.Poetry:S=u.ModuleInstallerType.Poetry;break;default:S=u.ModuleInstallerType.Pip}else m.traceInfo(`Interpreter type is conda but package ${_} is not available through conda, using pip instead.`),S=u.ModuleInstallerType.Pip;const T=d.find(e=>e.type===S),P=`${(null===(o=c.version)||void 0===o?void 0:o.major)||""}.${(null===(s=c.version)||void 0===s?void 0:s.minor)||""}.${(null===(a=c.version)||void 0===a?void 0:a.patch)||""}`;return T?(await T.installModule(e,c,n,r).catch(e=>m.traceError(`Error in installing the module '${_}', ${e}`)),this.isInstalled(e,c).then(t=>(l.sendTelemetryEvent(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:(null==T?void 0:T.displayName)||"",requiredInstaller:S,version:P,envType:c.envType,isInstalled:t,productName:y.ProductNames.get(e)}),t?h.InstallerResponse.Installed:h.InstallerResponse.Ignore))):(this.appShell.showErrorMessage(E.Installer.couldNotInstallLibrary().format(_)).then(f.noop,f.noop),l.sendTelemetryEvent(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:S,productName:y.ProductNames.get(e),version:P,envType:c.envType}),h.InstallerResponse.Ignore)}async promptToInstallImplementation(e,t,n,r){const i=y.ProductNames.get(e);return"Yes"===await this.appShell.showErrorMessage(E.Installer.dataScienceInstallPrompt().format(i),"Yes","No")?this.install(e,t,n):h.InstallerResponse.Ignore}}t.DataScienceInstaller=P;let I=class{constructor(e,t){this.serviceContainer=e,this.outputChannel=t,this.productService=e.get(g.IProductService),this.interpreterService=this.serviceContainer.get(a.IInterpreterService)}dispose(){}async promptToInstall(e,t,n,r){return(f.isResource(t)?await this.interpreterService.getActiveInterpreter(t):t)?this.createInstaller(e).promptToInstall(e,t,n,r):h.InstallerResponse.Ignore}async isProductVersionCompatible(e,t,n){return this.createInstaller(e).isProductVersionCompatible(e,t,n)}async install(e,t,n,r){return this.createInstaller(e).install(e,t,n,r)}async isInstalled(e,t){return this.createInstaller(e).isInstalled(e,t)}translateProductToModuleName(e){return v.translateProductToModule(e)}createInstaller(e){switch(this.productService.getProductType(e)){case h.ProductType.DataScience:return new P(this.serviceContainer,this.outputChannel)}throw new Error("Unknown product "+e)}};I=r([o.injectable(),i(0,o.inject(c.IServiceContainer)),i(1,o.inject(h.IOutputChannel)),i(1,o.named(b.STANDARD_OUTPUT_CHANNEL))],I),t.ProductInstaller=I},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathService=t.defaultInterpreterPathSetting=t.isGlobalSettingCopiedKey=t.workspaceFolderKeysForWhichTheCopyIsDone_Key=t.workspaceKeysForWhichTheCopyIsDone_Key=void 0;const o=n(44),s=n(1),a=n(5),c=n(4),u=n(7),l=n(175),p=n(17),d=n(79),h=n(6);t.workspaceKeysForWhichTheCopyIsDone_Key="workspaceKeysForWhichTheCopyIsDone_Key",t.workspaceFolderKeysForWhichTheCopyIsDone_Key="workspaceFolderKeysForWhichTheCopyIsDone_Key",t.isGlobalSettingCopiedKey="isGlobalSettingCopiedKey",t.defaultInterpreterPathSetting="defaultInterpreterPath";const f=function(){if(process.env.CI_PYTHON_PATH&&o.existsSync(process.env.CI_PYTHON_PATH))return process.env.CI_PYTHON_PATH;return"python"}();let v=class{constructor(e,t,n){this.persistentStateFactory=e,this.workspaceService=t,this._didChangeInterpreterEmitter=new a.EventEmitter,n.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))),this.fileSystemPaths=d.FileSystemPaths.withDefaults()}get onDidChange(){return this._didChangeInterpreterEmitter.event}async onDidChangeConfiguration(e){e.affectsConfiguration("python."+t.defaultInterpreterPathSetting)&&this._didChangeInterpreterEmitter.fire({uri:void 0,configTarget:a.ConfigurationTarget.Global})}inspect(e){let t,n;(e=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri)&&(t=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,a.ConfigurationTarget.WorkspaceFolder),void 0),n=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,a.ConfigurationTarget.Workspace),void 0));const r=this.workspaceService.getConfiguration("python",e).inspect("defaultInterpreterPath");return{globalValue:r.globalValue,workspaceFolderValue:(null==t?void 0:t.value)||r.workspaceFolderValue,workspaceValue:(null==n?void 0:n.value)||r.workspaceValue}}get(e){const t=this.inspect(e);return t.workspaceFolderValue||t.workspaceValue||t.globalValue||(p.isTestExecution()?f:"python")}async update(e,t,n){if(e=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri,t===a.ConfigurationTarget.Global){const e=this.workspaceService.getConfiguration("python");return void(e.inspect("defaultInterpreterPath").globalValue!==n&&(await e.update("defaultInterpreterPath",n,!0),this._didChangeInterpreterEmitter.fire({uri:void 0,configTarget:t})))}if(!e)return void c.traceError("Cannot update workspace settings as no workspace is opened");const r=this.getSettingKey(e,t),i=this.persistentStateFactory.createGlobalPersistentState(r,void 0);i.value!==n&&(await i.updateValue(n),this._didChangeInterpreterEmitter.fire({uri:e,configTarget:t}))}getSettingKey(e,t){let n;const r=this.workspaceService.getWorkspaceFolderIdentifier(e);return n=t===a.ConfigurationTarget.WorkspaceFolder?"WORKSPACE_FOLDER_INTERPRETER_PATH_"+r:this.workspaceService.workspaceFile?"WORKSPACE_INTERPRETER_PATH_"+this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath):"WORKSPACE_FOLDER_INTERPRETER_PATH_"+r,n}async copyOldInterpreterStorageValuesToNew(e){e=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri;const t=this.workspaceService.getConfiguration("python",e).inspect("pythonPath");await Promise.all([this._copyWorkspaceFolderValueToNewStorage(e,t.workspaceFolderValue),this._copyWorkspaceValueToNewStorage(e,t.workspaceValue),this._moveGlobalSettingValueToNewStorage(t.globalValue)])}async _copyWorkspaceFolderValueToNewStorage(e,n){const r=this.workspaceService.getWorkspaceFolderIdentifier(e,"");if(""===r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.workspaceFolderKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,a.ConfigurationTarget.WorkspaceFolder,n),await i.updateValue([r,...o]))}async _copyWorkspaceValueToNewStorage(e,n){const r=this.workspaceService.workspaceFile?this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath):void 0;if(!r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.workspaceKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,a.ConfigurationTarget.Workspace,n),await i.updateValue([r,...o]))}async _moveGlobalSettingValueToNewStorage(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.isGlobalSettingCopiedKey,!1);!n.value&&(await this.update(void 0,a.ConfigurationTarget.Global,e),await n.updateValue(!0))}};v=r([s.injectable(),i(0,s.inject(h.IPersistentStateFactory)),i(1,s.inject(u.IWorkspaceService)),i(2,s.inject(h.IDisposableRegistry))],v),t.InterpreterPathService=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=t.launch=void 0;const i=n(1),o=n(5);function s(e){o.env.openExternal(o.Uri.parse(e))}t.launch=s;let a=class{launch(e){s(e)}};a=r([i.injectable()],a),t.BrowserService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileDownloader=void 0;const o=n(1),s=n(7),a=n(17),c=n(13),u=n(6),l=n(52),p=n(31);let d=class{constructor(e,t,n){this.httpClient=e,this.fs=t,this.appShell=n}async downloadFile(e,t){t.outputChannel&&t.outputChannel.appendLine(l.Http.downloadingFile().format(e));const n=await this.fs.createTemporaryFile(t.extension);return await this.downloadFileWithStatusBarProgress(e,t.progressMessagePrefix,n.filePath).then(p.noop,e=>(n.dispose(),Promise.reject(e))),n.filePath}async downloadFileWithStatusBarProgress(e,t,n){await this.appShell.withProgressCustomIcon(a.Octicons.Downloading,async r=>{const i=await this.httpClient.downloadFile(e),o=this.fs.createWriteStream(n);return this.displayDownloadProgress(e,r,i,o,t)})}async displayDownloadProgress(e,t,r,i,o){return new Promise((s,a)=>{r.on("response",t=>{200!==t.statusCode&&a(new Error(`Failed with status ${t.statusCode}, ${t.statusMessage}, Uri ${e}`))});n(464)(r).on("progress",e=>{const n=function(e,t){const n=Math.round(t.size.transferred/1024),r=Math.round(t.size.total/1024),i=Math.round(100*t.percent);return l.Http.downloadingFileProgress().format(e,n.toString(),r.toString(),i.toString())}(o,e);t.report({message:n})}).on("error",a).pipe(i).on("error",a).on("close",s)})}};d=r([o.injectable(),i(0,o.inject(u.IHttpClient)),i(1,o.inject(c.IFileSystem)),i(2,o.inject(s.IApplicationShell))],d),t.FileDownloader=d},function(e,t){e.exports=require("./node_modules/request-progress")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const o=n(1),s=n(499),a=n(18),c=n(4),u=n(7);let l=class{constructor(e){const t=e.get(u.IWorkspaceService);this.requestOptions={proxy:t.getConfiguration("http").get("proxy","")}}async downloadFile(e){return(await Promise.resolve().then(()=>n(176)))(e,this.requestOptions)}async getJSON(e,t=!0){const n=await this.getContents(e);return this.parseBodyToJSON(n,t)}async parseBodyToJSON(e,t){if(t)return JSON.parse(e);{let t=[];const n=s.parse(e,t,{allowTrailingComma:!0,disallowComments:!1});return t.length>0&&c.traceError("JSONC parser returned ParseError codes",t),n}}async exists(e){const t=n(176);return new Promise(n=>{try{t.get(e,this.requestOptions).on("response",e=>n(200===e.statusCode)).on("error",()=>n(!1))}catch(e){n(!1)}})}async getContents(e){const t=n(176);return new Promise((n,r)=>{t(e,this.requestOptions,(t,i,o)=>t?r(t):200!==i.statusCode?r(new Error(`Failed with status ${i.statusCode}, ${i.statusMessage}, Uri ${e}`)):void n(o))})}};l=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],l),t.HttpClient=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PathUtils=void 0;const o=n(1),s=n(0),a=n(6),c=n(9),u=n(79),l=n(110);let p=class{constructor(e){const t=e?c.OSType.Windows:c.OSType.Unknown;this.utils=new u.FileSystemPathUtils(l("~"),u.FileSystemPaths.withDefaults(),new u.Executables(s.delimiter,t),s)}get home(){return this.utils.home}get delimiter(){return this.utils.executables.delimiter}get separator(){return this.utils.paths.sep}getPathVariableName(){return this.utils.executables.envVar}getDisplayName(e,t){return this.utils.getDisplayName(e,t)}basename(e,t){return this.utils.paths.basename(e,t)}};p=r([o.injectable(),i(0,o.inject(a.IsWindows))],p),t.PathUtils=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentProcess=void 0;const i=n(1);let o=class{constructor(){this.on=(e,t)=>(process.on(e,t),process)}get env(){return process.env}get argv(){return process.argv}get stdout(){return process.stdout}get stdin(){return process.stdin}get execPath(){return process.execPath}};o=r([i.injectable()],o),t.CurrentProcess=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessLogger=void 0;const o=n(1),s=n(4),a=n(17),c=n(6),u=n(52);let l=class{constructor(e,t){this.outputChannel=e,this.pathUtils=t}logProcess(e,t,n){if(!a.isTestExecution()&&a.isCI&&process.env.UITEST_DISABLE_PROCESS_LOGGING)return;let r;r=t?[e,...t].map(e=>e.trimQuotes()):e.split('" "').map(e=>e.trimQuotes());const i=["> "+r.reduce((e,t,n)=>{const r=this.pathUtils.getDisplayName(t).toCommandArgument();return 0===n?r:`${e} ${r}`},"")];n&&n.cwd&&i.push(`${u.Logging.currentWorkingDirectory()} ${this.pathUtils.getDisplayName(n.cwd)}`),i.forEach(e=>{s.traceInfo(e),this.outputChannel.appendLine(e)})}};l=r([o.injectable(),i(0,o.inject(c.IOutputChannel)),i(0,o.named(a.STANDARD_OUTPUT_CHANNEL)),i(1,o.inject(c.IPathUtils))],l),t.ProcessLogger=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalActivator=void 0;const o=n(1),s=n(6),a=n(20),c=n(470);let u=class{constructor(e,t){this.helper=e,this.configurationService=t,this.pendingActivations=new WeakMap,this.initialize()}async activateEnvironmentInTerminal(e,t){let n=this.pendingActivations.get(e);return n||(n=this.activateEnvironmentInTerminalImpl(e,t),this.pendingActivations.set(e,n),n)}async activateEnvironmentInTerminalImpl(e,t){return!(!this.configurationService.getSettings(null==t?void 0:t.resource).terminal.activateEnvironment||(null==t?void 0:t.hideFromUser))&&this.baseActivator.activateEnvironmentInTerminal(e,t)}initialize(){this.baseActivator=new c.BaseTerminalActivator(this.helper)}};u=r([o.injectable(),i(0,o.inject(a.ITerminalHelper)),i(1,o.inject(s.IConfigurationService))],u),t.TerminalActivator=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTerminalActivator=void 0;const r=n(11);t.BaseTerminalActivator=class{constructor(e){this.helper=e,this.activatedTerminals=new Map}async activateEnvironmentInTerminal(e,t){if(this.activatedTerminals.has(e))return this.activatedTerminals.get(e);const n=r.createDeferred();this.activatedTerminals.set(e,n.promise);const i=this.helper.identifyTerminalShell(e),o=await this.helper.getEnvironmentActivationCommands(i,null==t?void 0:t.resource,null==t?void 0:t.interpreter);let s=!1;if(o)for(const n of o)e.show(null==t?void 0:t.preserveFocus),e.sendText(n),await this.waitForCommandToProcess(i),s=!0;return n.resolve(s),s}async waitForCommandToProcess(e){await r.sleep(500)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Bash=t.getAllScripts=void 0;const i=n(1);n(14);const o=n(20),s=n(226),a={[o.TerminalShellType.wsl]:["activate.sh","activate"],[o.TerminalShellType.ksh]:["activate.sh","activate"],[o.TerminalShellType.zsh]:["activate.sh","activate"],[o.TerminalShellType.gitbash]:["activate.sh","activate"],[o.TerminalShellType.bash]:["activate.sh","activate"],[o.TerminalShellType.tcshell]:["activate.csh"],[o.TerminalShellType.cshell]:["activate.csh"],[o.TerminalShellType.fish]:["activate.fish"]};t.getAllScripts=function(){const e=[];for(const t of Object.keys(a)){const n=t;for(const t of a[n])e.includes(t)||e.push(t)}return e};let c=class extends s.VenvBaseActivationCommandProvider{constructor(){super(...arguments),this.scripts=a}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return["source "+n.fileToCommandArgument()]}};c=r([i.injectable()],c),t.Bash=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandPromptAndPowerShell=t.getAllScripts=void 0;const o=n(1),s=n(0),a=n(18);n(14);const c=n(20),u=n(226),l={[c.TerminalShellType.commandPrompt]:["activate.bat","Activate.ps1"],[c.TerminalShellType.powershell]:["Activate.ps1","activate.bat"],[c.TerminalShellType.powershellCore]:["Activate.ps1","activate.bat"]};t.getAllScripts=function(e){const t=[];for(const n of Object.keys(l)){const r=n;for(const n of l[r])t.includes(n)||t.push(n,e("Scripts",n),e("scripts",n))}return t};let p=class extends u.VenvBaseActivationCommandProvider{constructor(e){super(e),this.scripts={};for(const e of Object.keys(l)){const t=e,n=[];for(const e of l[t])n.push(e,s.join("Scripts",e),s.join("scripts",e));this.scripts[t]=n}}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return t===c.TerminalShellType.commandPrompt&&n.endsWith("activate.bat")?[n.fileToCommandArgument()]:t!==c.TerminalShellType.powershell&&t!==c.TerminalShellType.powershellCore||!n.endsWith("Activate.ps1")?t===c.TerminalShellType.commandPrompt&&n.endsWith("Activate.ps1")?[]:void 0:["& "+n.fileToCommandArgument()]}};p=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],p),t.CommandPromptAndPowerShell=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t._getPowershellCommands=t.CondaActivationCommandProvider=void 0,n(14);const o=n(1),s=n(0),a=n(12),c=n(13),u=n(6),l=n(20);let p=class{constructor(e,t,n,r){this.condaService=e,this.platform=t,this.configService=n,this.pyenvs=r}isShellSupported(){return!0}getActivationCommands(e,t){const{pythonPath:n}=this.configService.getSettings(e);return this.getActivationCommandsForInterpreter(n,t)}async getActivationCommandsForInterpreter(e,t){const n=await this.pyenvs.getCondaEnvironment(e);if(!n)return;const r=n.name.length>0?n.name:n.path,i=await this.condaService.getCondaVersion();if(i&&i.major>=4){if(i.minor>=6&&(t===l.TerminalShellType.powershell||t===l.TerminalShellType.powershellCore))return d(r);if(i.minor>=4){const t=await this.condaService.getCondaFileFromInterpreter(e,n.name);if(t){const e=s.join(s.dirname(t),"activate").fileToCommandArgument();return[this.platform.isWindows?e:"source "+e,"conda activate "+r.toCommandArgument()]}}}switch(t){case l.TerminalShellType.powershell:case l.TerminalShellType.powershellCore:return d(r);case l.TerminalShellType.fish:return async function(e,t){return[`${t.fileToCommandArgument()} activate ${e.toCommandArgument()}`]}(r,await this.condaService.getCondaFile());default:return this.platform.isWindows?this.getWindowsCommands(r):async function(e,t){const n=s.dirname(t);return[`source ${s.join(n,"activate").fileToCommandArgument()} ${e.toCommandArgument()}`]}(r,await this.condaService.getCondaFile())}}async getWindowsActivateCommand(){let e="activate";const t=await this.condaService.getCondaFile();if(t&&s.basename(t)!==t){const n=s.dirname(t);e=s.join(n,e),e=e.toCommandArgument()}return e}async getWindowsCommands(e){return[`${await this.getWindowsActivateCommand()} ${e.toCommandArgument()}`]}};async function d(e){return["conda activate "+e.toCommandArgument()]}p=r([o.injectable(),i(0,o.inject(a.ICondaService)),i(1,o.inject(c.IPlatformService)),i(2,o.inject(u.IConfigurationService)),i(3,o.inject(a.IComponentAdapter))],p),t.CondaActivationCommandProvider=p,t._getPowershellCommands=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvActivationCommandProvider=void 0;const o=n(1);n(14);const s=n(12),a=n(83),c=n(26),u=n(7),l=n(6);let p=class{constructor(e,t,n){this.interpreterService=e,this.pipEnvExecution=t,this.workspaceService=n}isShellSupported(){return!1}async getActivationCommands(e){const t=await this.interpreterService.getActiveInterpreter(e);if(!t||t.envType!==c.EnvironmentType.Pipenv)return;const n=e?this.workspaceService.getWorkspaceFolder(e):void 0;if(n&&!await a.isPipenvEnvironmentRelatedToFolder(t.path,null==n?void 0:n.uri.fsPath))return;return[this.pipEnvExecution.executable.fileToCommandArgument()+" shell"]}async getActivationCommandsForInterpreter(e){const t=await this.interpreterService.getInterpreterDetails(e);if(!t||t.envType!==c.EnvironmentType.Pipenv)return;return[this.pipEnvExecution.executable.fileToCommandArgument()+" shell"]}};p=r([o.injectable(),i(0,o.inject(s.IInterpreterService)),i(1,o.inject(l.IToolExecutionPath)),i(1,o.named(l.ToolExecutionPath.pipenv)),i(2,o.inject(u.IWorkspaceService))],p),t.PipEnvActivationCommandProvider=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PyEnvActivationCommandProvider=void 0;const o=n(1),s=n(12),a=n(18),c=n(26);let u=class{constructor(e){this.serviceContainer=e}isShellSupported(e){return!0}async getActivationCommands(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return["pyenv shell "+n.envName.toCommandArgument()]}async getActivationCommandsForInterpreter(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getInterpreterDetails(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return["pyenv shell "+n.envName.toCommandArgument()]}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.PyEnvActivationCommandProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalServiceFactory=void 0;const o=n(1),s=n(12),a=n(18),c=n(7),u=n(13),l=n(477),p=n(478);let d=class{constructor(e,t,n){this.serviceContainer=e,this.fs=t,this.interpreterService=n,this.terminalServices=new Map}getTerminalService(e){const t=null==e?void 0:e.resource,n=null==e?void 0:e.title,r="string"==typeof n&&n.trim().length>0?n.trim():"Python",i=null==e?void 0:e.interpreter,o=this.getTerminalId(r,t,i);if(!this.terminalServices.has(o)){const t=new l.TerminalService(this.serviceContainer,e);this.terminalServices.set(o,t)}return new p.SynchronousTerminalService(this.fs,this.interpreterService,this.terminalServices.get(o),i)}createTerminalService(e,t){return t="string"==typeof t&&t.trim().length>0?t.trim():"Python",new l.TerminalService(this.serviceContainer,{resource:e,title:t})}getTerminalId(e,t,n){if(!t&&!n)return e;const r=this.serviceContainer.get(c.IWorkspaceService).getWorkspaceFolder(t||void 0);return`${e}:${(null==r?void 0:r.uri.fsPath)||""}:${null==n?void 0:n.path}`}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(u.IFileSystem)),i(2,o.inject(s.IInterpreterService))],d),t.TerminalServiceFactory=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalService=void 0;const o=n(1),s=n(5);n(14);const a=n(12),c=n(18),u=n(21),l=n(22),p=n(7),d=n(6),h=n(20);let f=class{constructor(e,t){this.serviceContainer=e,this.options=t,this.terminalClosed=new s.EventEmitter;const n=this.serviceContainer.get(d.IDisposableRegistry);n.push(this),this.terminalHelper=this.serviceContainer.get(h.ITerminalHelper),this.terminalManager=this.serviceContainer.get(p.ITerminalManager),this.terminalManager.onDidCloseTerminal(this.terminalCloseHandler,this,n),this.terminalActivator=this.serviceContainer.get(h.ITerminalActivator)}get onDidCloseTerminal(){return this.terminalClosed.event.bind(this.terminalClosed)}dispose(){this.terminal&&this.terminal.dispose()}async sendCommand(e,t,n){var r;await this.ensureTerminal();const i=this.terminalHelper.buildCommandForTerminal(this.terminalShellType,e,t);(null===(r=this.options)||void 0===r?void 0:r.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(i,!0)}async sendText(e){var t;await this.ensureTerminal(),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(e)}async show(e=!0){var t;await this.ensureTerminal(e),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(e)}async ensureTerminal(e=!0){var t,n,r,i,o,s,a;this.terminal||(this.terminalShellType=this.terminalHelper.identifyTerminalShell(this.terminal),this.terminal=this.terminalManager.createTerminal({name:(null===(t=this.options)||void 0===t?void 0:t.title)||"Python",env:null===(n=this.options)||void 0===n?void 0:n.env,hideFromUser:null===(r=this.options)||void 0===r?void 0:r.hideFromUser}),await new Promise(e=>setTimeout(e,100)),await this.terminalActivator.activateEnvironmentInTerminal(this.terminal,{resource:null===(i=this.options)||void 0===i?void 0:i.resource,preserveFocus:e,interpreter:null===(o=this.options)||void 0===o?void 0:o.interpreter,hideFromUser:null===(s=this.options)||void 0===s?void 0:s.hideFromUser}),(null===(a=this.options)||void 0===a?void 0:a.hideFromUser)||this.terminal.show(e),this.sendTelemetry().ignoreErrors())}terminalCloseHandler(e){e===this.terminal&&(this.terminalClosed.fire(),this.terminal=void 0)}async sendTelemetry(){var e,t;const n=this.serviceContainer.get(d.IConfigurationService).getSettings(null===(e=this.options)||void 0===e?void 0:e.resource).pythonPath,r=(null===(t=this.options)||void 0===t?void 0:t.interpreter)||await this.serviceContainer.get(a.IInterpreterService).getInterpreterDetails(n),i=r&&r.version?r.version.raw:void 0,o=r?r.envType:void 0;u.captureTelemetry(l.EventName.TERMINAL_CREATE,{terminal:this.terminalShellType,pythonVersion:i,interpreterType:o})}};f=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],f),t.TerminalService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronousTerminalService=void 0;const o=n(1),s=n(12),a=n(4),c=n(198),u=n(13),l=n(113),p=n(11),d=n(31);var h;!function(e){e[e.notStarted=0]="notStarted",e[e.started=1]="started",e[e.completed=2]="completed",e[e.errored=4]="errored"}(h||(h={}));class f{constructor(e,t,n){this.lockFile=e,this.fs=t,this.command=n,this.state=h.notStarted,this._completed=p.createDeferred(),this.registerStateUpdate(),this._completed.promise.finally(()=>this.dispose()).ignoreErrors()}get completed(){return this._completed.promise}dispose(){this.disposable&&(this.disposable.dispose(),this.disposable=void 0)}registerStateUpdate(){const e=setInterval(async()=>{const e=await this.getLockFileState(this.lockFile);if(e!==this.state&&a.traceVerbose(`Command state changed to ${e}. ${this.command.join(" ")}`),this.state=e,e&h.errored){const e=await this.fs.readFile(this.lockFile+".error").catch(()=>"");this._completed.reject(new Error(`Command failed with errors, check the terminal for details. Command: ${this.command.join(" ")}\n${e}`))}else e&h.completed&&this._completed.resolve()},100);this.disposable={dispose:()=>clearInterval(e)}}async getLockFileState(e){const t=await this.fs.readFile(e);let n=h.notStarted;return t.includes("START")&&(n|=h.started),t.includes("END")&&(n|=h.completed),t.includes("FAIL")&&(n|=h.completed|h.errored),n}}let v=class{constructor(e,t,n,r){this.fs=e,this.interpreter=t,this.terminalService=n,this.pythonInterpreter=r,this.disposables=[]}get onDidCloseTerminal(){return this.terminalService.onDidCloseTerminal}dispose(){for(this.terminalService.dispose();this.disposables.length;){const e=this.disposables.shift();if(!e)break;try{e.dispose()}catch(e){d.noop()}}}async sendCommand(e,t,n,r=!0){if(!n)return this.terminalService.sendCommand(e,t);const i=await this.createLockFile(),o=new f(i.filePath,this.fs,[e,...t]);try{const s=this.pythonInterpreter||await this.interpreter.getActiveInterpreter(void 0),a=l.shell_exec(e,i.filePath,t);await this.terminalService.sendCommand((null==s?void 0:s.path)||"python",a);const u=r?o.completed:o.completed.catch(d.noop);await c.Cancellation.race(()=>u,n)}finally{o.dispose(),i.dispose()}}sendText(e){return this.terminalService.sendText(e)}show(e){return this.terminalService.show(e)}createLockFile(){return this.fs.createTemporaryFile(".log").then(e=>(this.disposables.push(e),e))}};v=r([i(0,o.inject(u.IFileSystem)),i(1,o.inject(s.IInterpreterService))],v),t.SynchronousTerminalService=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalHelper=void 0;const o=n(1),s=n(12),a=n(18),c=n(4),u=n(26),l=n(21),p=n(22),d=n(7);n(14);const h=n(13),f=n(6),v=n(9),y=n(480),g=n(20);let m=class{constructor(e,t,n,r,i,o,s,a,c,u,l){this.platform=e,this.terminalManager=t,this.serviceContainer=n,this.interpreterService=r,this.configurationService=i,this.conda=o,this.bashCShellFish=s,this.commandPromptAndPowerShell=a,this.pyenv=c,this.pipenv=u,this.shellDetector=new y.ShellDetector(this.platform,l)}createTerminal(e){return this.terminalManager.createTerminal({name:e})}identifyTerminalShell(e){return this.shellDetector.identifyTerminalShell(e)}buildCommandForTerminal(e,t,n){const r=e===g.TerminalShellType.powershell||e===g.TerminalShellType.powershellCore?"& ":"",i=n.map(e=>e.toCommandArgument());return`${r}${t.fileToCommandArgument()} ${i.join(" ")}`.trim()}async getEnvironmentActivationCommands(e,t,n){const r=[this.pipenv,this.pyenv,this.bashCShellFish,this.commandPromptAndPowerShell],i=this.getActivationCommands(t||void 0,n,e,r);return this.sendTelemetry(e,p.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL,n,i).ignoreErrors(),i}async getEnvironmentActivationShellCommands(e,t,n){if(this.platform.osType===v.OSType.Unknown)return;const r=[this.bashCShellFish,this.commandPromptAndPowerShell],i=this.getActivationCommands(e,n,t,r);return this.sendTelemetry(t,p.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE,n,i).ignoreErrors(),i}async sendTelemetry(e,t,n,r){let i=!1,o=!1;try{const e=await r;i=Array.isArray(e)&&e.length>0}catch(e){o=!0,c.traceError("Failed to get activation commands",e)}const s=n&&n.version?n.version.raw:void 0,a={failed:o,hasCommands:i,interpreterType:n?n.envType:u.EnvironmentType.Unknown,terminal:e,pythonVersion:s};l.sendTelemetryEvent(t,void 0,a)}async getActivationCommands(e,t,n,r){const i=this.configurationService.getSettings(e),o=this.serviceContainer.get(s.IComponentAdapter);if(t?t.envType===u.EnvironmentType.Conda:await o.isCondaEnvironment(i.pythonPath)){const r=t?await this.conda.getActivationCommandsForInterpreter(t.path,n):await this.conda.getActivationCommands(e,n);if(Array.isArray(r))return r}const a=r.filter(e=>e.isShellSupported(n));for(const r of a){const i=t?await r.getActivationCommandsForInterpreter(t.path,n):await r.getActivationCommands(e,n);if(Array.isArray(i)&&i.length>0)return i}}};r([c.traceDecoratorError("Failed to capture telemetry")],m.prototype,"sendTelemetry",null),m=r([o.injectable(),i(0,o.inject(h.IPlatformService)),i(1,o.inject(d.ITerminalManager)),i(2,o.inject(a.IServiceContainer)),i(3,o.inject(s.IInterpreterService)),i(4,o.inject(f.IConfigurationService)),i(5,o.inject(g.ITerminalActivationCommandProvider)),i(5,o.named(g.TerminalActivationProviders.conda)),i(6,o.inject(g.ITerminalActivationCommandProvider)),i(6,o.named(g.TerminalActivationProviders.bashCShellFish)),i(7,o.inject(g.ITerminalActivationCommandProvider)),i(7,o.named(g.TerminalActivationProviders.commandPromptAndPowerShell)),i(8,o.inject(g.ITerminalActivationCommandProvider)),i(8,o.named(g.TerminalActivationProviders.pyenv)),i(9,o.inject(g.ITerminalActivationCommandProvider)),i(9,o.named(g.TerminalActivationProviders.pipenv)),i(10,o.multiInject(g.IShellDetector))],m),t.TerminalHelper=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShellDetector=void 0;const o=n(1),s=n(4),a=n(21),c=n(22);n(14);const u=n(13),l=n(9),p=n(20),d={[l.OSType.Linux]:p.TerminalShellType.bash,[l.OSType.OSX]:p.TerminalShellType.bash,[l.OSType.Windows]:p.TerminalShellType.commandPrompt,[l.OSType.Unknown]:p.TerminalShellType.other};let h=class{constructor(e,t){this.platform=e,this.shellDetectors=t}identifyTerminalShell(e){let t;const n={failed:!0,shellIdentificationSource:"default",terminalProvided:!!e,hasCustomShell:void 0,hasShellInEnv:void 0},r=this.shellDetectors.slice().sort((e,t)=>t.priority-e.priority);for(const i of r)if(t=i.identify(n,e),s.traceVerbose(`${i}. Shell identified as ${t} ${e?`(Terminal name is ${e.name})`:""}`),t&&t!==p.TerminalShellType.other){n.failed=!1;break}return a.sendTelemetryEvent(c.EventName.TERMINAL_SHELL_IDENTIFICATION,void 0,n),s.traceVerbose(`Shell identified as '${t}'`),void 0!==t&&t!==p.TerminalShellType.other||(s.traceVerbose("Using default OS shell"),t=d[this.platform.osType]),t}};h=r([o.injectable(),i(0,o.inject(u.IPlatformService)),i(1,o.multiInject(p.IShellDetector))],h),t.ShellDetector=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsShellDetector=void 0;const o=n(1),s=n(4),a=n(7),c=n(13),u=n(9),l=n(20),p=n(142);let d=class extends p.BaseShellDetector{constructor(e,t){super(2),this.workspace=e,this.platform=t}getTerminalShellPath(){const e=this.workspace.getConfiguration("terminal.integrated.shell");let t="";switch(this.platform.osType){case u.OSType.Windows:t="windows";break;case u.OSType.OSX:t="osx";break;case u.OSType.Linux:t="linux";break;default:return""}return e.get(t)}identify(e,t){const n=this.getTerminalShellPath();e.hasCustomShell=!!n;const r=n?this.identifyShellFromShellPath(n):l.TerminalShellType.other;return r!==l.TerminalShellType.other?e.shellIdentificationSource="environment":e.shellIdentificationSource="settings",s.traceVerbose(`Shell path from user settings '${n}'`),r}};d=r([o.injectable(),i(0,o.inject(a.IWorkspaceService)),i(1,o.inject(c.IPlatformService))],d),t.SettingsShellDetector=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalNameShellDetector=void 0;const i=n(1),o=n(4),s=n(20),a=n(142);let c=class extends a.BaseShellDetector{constructor(){super(4)}identify(e,t){if(!t)return;const n=this.identifyShellFromShellPath(t.name);return o.traceVerbose(`Terminal name '${t.name}' identified as shell '${n}'`),e.shellIdentificationSource=n===s.TerminalShellType.other?e.shellIdentificationSource:"terminalName",n}};c=r([i.injectable()],c),t.TerminalNameShellDetector=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserEnvironmentShellDetector=void 0;const o=n(1),s=n(4),a=n(13),c=n(6),u=n(9),l=n(20),p=n(142);let d=class extends p.BaseShellDetector{constructor(e,t){super(1),this.currentProcess=e,this.platform=t}getDefaultPlatformShell(){return function(e,t){if(e.osType===u.OSType.Windows)return function(e,t){const n=parseFloat(e.osRelease)>=10,r=t.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),i=`${t.env.windir}\\${r?"Sysnative":"System32"}\\WindowsPowerShell\\v1.0\\powershell.exe`;return n?i:function(e){return e.env.comspec||"cmd.exe"}(t)}(e,t);return t.env.SHELL&&"/bin/false"!==t.env.SHELL?t.env.SHELL:"/bin/bash"}(this.platform,this.currentProcess)}identify(e,t){const n=this.getDefaultPlatformShell();e.hasShellInEnv=!!n;const r=this.identifyShellFromShellPath(n);return r!==l.TerminalShellType.other&&(e.shellIdentificationSource="environment"),s.traceVerbose(`Shell path from user env '${n}'`),r}};d=r([o.injectable(),i(0,o.inject(c.ICurrentProcess)),i(1,o.inject(a.IPlatformService))],d),t.UserEnvironmentShellDetector=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCEnvironmentShellDetector=void 0;const o=n(1),s=n(4),a=n(7),c=n(20),u=n(142);let l=class extends u.BaseShellDetector{constructor(e){super(3),this.appEnv=e}identify(e,t){const n=(null==t?void 0:t.creationOptions)&&"shellPath"in t.creationOptions&&t.creationOptions.shellPath?t.creationOptions.shellPath:this.appEnv.shell;if(!n)return;const r=this.identifyShellFromShellPath(n);return s.traceVerbose(`Terminal shell path '${n}' identified as shell '${r}'`),e.shellIdentificationSource=r===c.TerminalShellType.other?e.shellIdentificationSource:"vscode",e.failed=r!==c.TerminalShellType.other,r}};l=r([i(0,o.inject(a.IApplicationEnvironment))],l),t.VSCEnvironmentShellDetector=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInputFactory=t.IMultiStepInputFactory=t.MultiStepInput=void 0;const o=n(1),s=n(5),a=n(7);class c{constructor(){}}c.back=new c,c.cancel=new c,c.resume=new c;class u{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}async showQuickPick({title:e,step:t,totalSteps:n,items:r,activeItem:i,placeholder:o,customButtonSetup:a,matchOnDescription:u,matchOnDetail:l,acceptFilterBoxTextAsSelection:p,onChangeItem:d,keepScrollPosition:h,sortByLabel:f}){const v=[];try{return await new Promise((y,g)=>{const m=this.shell.createQuickPick();m.title=e,m.step=t,m.sortByLabel=f||!1,m.totalSteps=n,m.placeholder=o,m.ignoreFocusOut=!0,m.items=r,m.matchOnDescription=u||!1,m.matchOnDetail=l||!1,m.activeItems=i?[i]:[],m.buttons=this.steps.length>1?[s.QuickInputButtons.Back]:[],a&&(m.buttons=[...m.buttons,a.button]),v.push(m.onDidTriggerButton(async e=>{e===s.QuickInputButtons.Back?g(c.back):e===(null==a?void 0:a.button)?await a.callback(m):y(e)}),m.onDidChangeSelection(e=>y(e[0])),m.onDidHide(()=>{y(void 0)})),p&&v.push(m.onDidAccept(()=>{y(m.value)})),this.current&&this.current.dispose(),this.current=m,d&&v.push(d.event(e=>d.callback(e,m))),this.current.show(),m.keepScrollPosition=h})}finally{v.forEach(e=>e.dispose())}}async showInputBox({title:e,step:t,totalSteps:n,value:r,prompt:i,validate:o,password:a,buttons:u}){const l=[];try{return await new Promise((p,d)=>{const h=this.shell.createInputBox();h.title=e,h.step=t,h.totalSteps=n,h.password=!!a,h.value=r||"",h.prompt=i,h.ignoreFocusOut=!0,h.buttons=[...this.steps.length>1?[s.QuickInputButtons.Back]:[],...u||[]];let f=o("");l.push(h.onDidTriggerButton(e=>{e===s.QuickInputButtons.Back?d(c.back):p(e)}),h.onDidAccept(async()=>{const e=h.value;h.enabled=!1,h.busy=!0,await o(e)||p(e),h.enabled=!0,h.busy=!1}),h.onDidChangeValue(async e=>{const t=o(e);f=t;const n=await t;t===f&&(h.validationMessage=n)}),h.onDidHide(()=>{p(void 0)})),this.current&&this.current.dispose(),this.current=h,this.current.show()})}finally{l.forEach(e=>e.dispose())}}async stepThrough(e,t){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=await n(this,t)}catch(e){if(e===c.back)this.steps.pop(),n=this.steps.pop();else if(e===c.resume)n=this.steps.pop();else{if(e!==c.cancel)throw e;n=void 0}}}this.current&&this.current.dispose()}}t.MultiStepInput=u,t.IMultiStepInputFactory=Symbol("IMultiStepInputFactory");let l=class{constructor(e){this.shell=e}create(){return new u(this.shell)}};l=r([o.injectable(),i(0,o.inject(a.IApplicationShell))],l),t.MultiStepInputFactory=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Random=void 0;const i=n(119),o=n(1);function s(e=0,t=10){return e+function(){let e=0;const t=i.randomBytes(2);return e=(t.readUInt8(0)<<8)+t.readUInt8(1),e/(Math.pow(16,4)-1)}()*(t-e)}let a=class{getRandomInt(e=0,t=10){return s(e,t)}};a=r([o.injectable()],a),t.Random=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathProxyService=void 0;const o=n(1),s=n(7),a=n(6),c=n(133);let u=class{constructor(e,t){this.interpreterPathService=e,this.workspace=t}get(e){var t;const n=new c.SystemVariables(void 0,null===(t=this.workspace.getWorkspaceFolder(e))||void 0===t?void 0:t.uri.fsPath,this.workspace);this.workspace.getConfiguration("python",e);return n.resolveAny(this.interpreterPathService.get(e))}};u=r([o.injectable(),i(0,o.inject(a.IInterpreterPathService)),i(1,o.inject(s.IWorkspaceService))],u),t.InterpreterPathProxyService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKeyManager=void 0;const o=n(1),s=n(7);let a=class{constructor(e){this.commandManager=e,this.values=new Map}async setContext(e,t){return this.values.get(e)===t?Promise.resolve():(this.values.set(e,t),this.commandManager.executeCommand("setContext",e,t))}};a=r([o.injectable(),i(0,o.inject(s.ICommandManager))],a),t.ContextKeyManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(490),i=n(491),o=n(137);t.registerTypes=function(e){e.addSingleton(o.IEnvironmentVariablesService,r.EnvironmentVariablesService),e.addSingleton(o.IEnvironmentVariablesProvider,i.EnvironmentVariablesProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvFile=t.EnvironmentVariablesService=void 0;const o=n(1),s=n(0),a=n(4),c=n(21),u=n(22),l=n(13),p=n(6);let d=class{constructor(e,t){this.pathUtils=e,this.fs=t}async parseFile(e,t){if(!e||!await this.fs.pathExists(e))return;const n=await this.fs.readFile(e).catch(e=>{a.traceError("Custom .env is likely not pointing to a valid file",e)});return n?h(n,t):void 0}mergeVariables(e,t){if(!t)return;const n=["PYTHONPATH",this.pathVariable];Object.keys(e).forEach(r=>{n.indexOf(r)>=0||void 0===t[r]&&(t[r]=e[r])})}appendPythonPath(e,...t){return this.appendPaths(e,"PYTHONPATH",...t)}appendPath(e,...t){return this.appendPaths(e,this.pathVariable,...t)}get pathVariable(){return this._pathVariable||(this._pathVariable=this.pathUtils.getPathVariableName()),this._pathVariable}appendPaths(e,t,...n){const r=n.filter(e=>"string"==typeof e&&e.trim().length>0).map(e=>e.trim()).join(s.delimiter);if(0===r.length)return e;const i=e?e[t]:void 0;return i&&"string"==typeof i&&i.length>0?e[t]=i+s.delimiter+r:e[t]=r,e}};function h(e,t){const n=t||{},r={};return e.toString().split("\n").forEach((e,t)=>{const[i,o]=function(e){const t=e.match(/^\s*([a-zA-Z]\w*)\s*=\s*(.*?)?\s*$/);if(!t)return["",""];const n=t[1];let r=t[2];r&&""!==r?("'"===r[0]&&"'"===r[r.length-1]||'"'===r[0]&&'"'===r[r.length-1])&&(r=r.substring(1,r.length-1),r=r.replace(/\\n/gm,"\n")):r="";return[n,r]}(e);""!==i&&(r[i]=function(e,t,n,r=""){let i=!1,o=e;o=o.replace(f,(e,o,s,a,c)=>a>0&&"\\"===c[a-1]?e:s&&""!==s||!o||""===o?(i=!0,e):t[o]||n[o]||r),i||o===e||(e=o,c.sendTelemetryEvent(u.EventName.ENVFILE_VARIABLE_SUBSTITUTION));return e.replace(/\\\$/g,"$")}(o,r,n))}),r}d=r([o.injectable(),i(0,o.inject(p.IPathUtils)),i(1,o.inject(l.IFileSystem))],d),t.EnvironmentVariablesService=d,t.parseEnvFile=h;const f=/\${([a-zA-Z]\w*)?([^}\w].*)?}/g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentVariablesProvider=void 0;const o=n(1),s=n(5),a=n(4),c=n(160),u=n(7),l=n(175),p=n(13),d=n(6),h=n(164),f=n(133),v=n(137);let y=class{constructor(e,t,n,r,i,o=36e5){this.envVarsService=e,this.platformService=n,this.workspaceService=r,this.process=i,this.cacheDuration=o,this.trackedWorkspaceFolders=new Set,this.fileWatchers=new Map,this.disposables=[],this.envVarCaches=new Map,t.push(this),this.changeEventEmitter=new s.EventEmitter;const a=this.workspaceService.onDidChangeConfiguration(this.configurationChanged,this);this.disposables.push(a)}get onDidEnvironmentVariablesChange(){return this.changeEventEmitter.event}dispose(){this.changeEventEmitter.dispose(),this.fileWatchers.forEach(e=>{e&&e.dispose()})}async getEnvironmentVariables(e){var t,n;const r=null!==(n=null===(t=this.getWorkspaceFolderUri(e))||void 0===t?void 0:t.fsPath)&&void 0!==n?n:"";let i=this.envVarCaches.get(r);if(i){const t=i.data;if(t)return a.traceVerbose("Cached data exists getEnvironmentVariables, "+(e?e.fsPath:"<No Resource>")),{...t}}else i=new h.InMemoryCache(this.cacheDuration),this.envVarCaches.set(r,i);const o=await this._getEnvironmentVariables(e);return i.data={...o},o}async _getEnvironmentVariables(e){let t=await this.getCustomEnvironmentVariables(e);t||(t={}),this.envVarsService.mergeVariables(this.process.env,t);const n=this.platformService.pathVariableName,r=this.process.env[n];return r&&this.envVarsService.appendPath(t,r),this.process.env.PYTHONPATH&&this.envVarsService.appendPythonPath(t,this.process.env.PYTHONPATH),t}async getCustomEnvironmentVariables(e){var t;const n=new f.SystemVariables(void 0,null===(t=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri)||void 0===t?void 0:t.fsPath,this.workspaceService),r=this.workspaceService.getConfiguration("python",e).get("envFile"),i=n.resolveAny(r),o=this.getWorkspaceFolderUri(e);return this.trackedWorkspaceFolders.add(o?o.fsPath:""),this.createFileWatcher(i,o),this.envVarsService.parseFile(i,this.process.env)}configurationChanged(e){this.trackedWorkspaceFolders.forEach(t=>{const n=t&&t.length>0?s.Uri.file(t):void 0;e.affectsConfiguration("python.envFile",n)&&this.onEnvironmentFileChanged(n)})}createFileWatcher(e,t){if(this.fileWatchers.has(e))return;const n=this.workspaceService.createFileSystemWatcher(e);this.fileWatchers.set(e,n),n&&(this.disposables.push(n.onDidChange(()=>this.onEnvironmentFileChanged(t))),this.disposables.push(n.onDidCreate(()=>this.onEnvironmentFileCreated(t))),this.disposables.push(n.onDidDelete(()=>this.onEnvironmentFileChanged(t))))}getWorkspaceFolderUri(e){if(!e)return;const t=this.workspaceService.getWorkspaceFolder(e);return t?t.uri:void 0}onEnvironmentFileCreated(e){this.onEnvironmentFileChanged(e),c.sendFileCreationTelemetry()}onEnvironmentFileChanged(e){this.envVarCaches.clear(),this.changeEventEmitter.fire(e)}};y=r([o.injectable(),i(0,o.inject(v.IEnvironmentVariablesService)),i(1,o.inject(d.IDisposableRegistry)),i(2,o.inject(p.IPlatformService)),i(3,o.inject(u.IWorkspaceService)),i(4,o.inject(d.ICurrentProcess)),i(5,o.optional())],y),t.EnvironmentVariablesProvider=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceContainer=void 0;const i=n(78),o=n(1),s=n(4);try{o.decorate(o.injectable(),i.EventEmitter)}catch(e){s.traceWarn("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let a=class{constructor(e){this.container=e}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch(e){}}};a=r([o.injectable()],a),t.ServiceContainer=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(1);let o=class{constructor(e){this.container=e}add(e,t,n,r){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t),r&&r.forEach(t=>{this.addBinding(e,t)})}addFactory(e,t){this.container.bind(e).toFactory(t)}addBinding(e,t){this.container.bind(t).toService(e)}addSingleton(e,t,n,r){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope(),r&&r.forEach(t=>{this.addBinding(e,t)})}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch(e){}}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindSingleton(e,t,n){n?this.container.rebind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.rebind(e).to(t).inSingletonScope()}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}dispose(){this.container.unbindAll(),this.container.unload()}};o=r([i.injectable()],o),t.ServiceManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelLogger=void 0;const r=n(24),i=n(159);function o(e,...t){return`[${e.toUpperCase()} ${i.getTimeForLogging()}]: ${r.format(...t)}`}t.OutputChannelLogger=class{constructor(e){this.channel=e}traceError(...e){this.channel.appendLine(o("error",...e))}traceWarn(...e){this.channel.appendLine(o("warn",...e))}traceInfo(...e){this.channel.appendLine(o("info",...e))}traceVerbose(...e){this.channel.appendLine(o("debug",...e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasUserDefinedPythonPath=t.sendErrorTelemetry=t.sendStartupTelemetry=void 0;const r=n(7),i=n(17),o=n(20),s=n(6),a=n(81),c=n(12),u=n(4),l=n(26),p=n(21),d=n(22);function h(e,t){t.get(r.IWorkspaceService);let n;return n=t.get(s.IInterpreterPathService).inspect(e),!!(n.workspaceFolderValue&&"python"!==n.workspaceFolderValue||n.workspaceValue&&"python"!==n.workspaceValue||n.globalValue&&"python"!==n.globalValue)}async function f(e){const t=e.get(o.ITerminalHelper).identifyTerminalShell(),n=e.get(c.ICondaService),i=e.get(c.IInterpreterService),p=e.get(r.IWorkspaceService),d=e.get(s.IConfigurationService),f=p.hasWorkspaceFolders?p.workspaceFolders[0].uri:void 0,v=d.getSettings(f),[y,g]=await Promise.all([n.getCondaVersion().then(e=>e?e.raw:"").catch(()=>""),i.hasInterpreters(async e=>{var t;return 3===(null===(t=e.version)||void 0===t?void 0:t.major)})]),m=p.hasWorkspaceFolders?p.workspaceFolders.length:0;await i.refreshPromise;const _=await i.getActiveInterpreter().catch(()=>{}),b=_&&_.version?_.version.raw:void 0,E=_?_.envType:void 0;E===l.EnvironmentType.Unknown&&u.traceError("Active interpreter type is detected as Unknown",JSON.stringify(_));return{condaVersion:y,terminal:t,pythonVersion:b,interpreterType:E,workspaceFolderCount:m,hasPython3:g,usingUserDefinedInterpreter:h(f,e),usingGlobalInterpreter:function(e,t){const n=t.get(a.IInterpreterAutoSelectionService).getAutoSelectedInterpreter(void 0);return!!n&&e===n.path}(v.pythonPath,e)}}t.sendStartupTelemetry=async function(e,t,n,r){if(!i.isTestExecution())try{await e,t.totalNonBlockingActivateTime=n.elapsedTime-t.startActivateTime;const i=await f(r);p.sendTelemetryEvent(d.EventName.EDITOR_LOAD,t,i)}catch(e){u.traceError("sendStartupTelemetry() failed.",e)}},t.sendErrorTelemetry=async function(e,t,n){try{let r={};if(n)try{r=await f(n)}catch(e){u.traceError("getActivationTelemetryProps() failed.",e)}p.sendTelemetryEvent(d.EventName.EDITOR_LOAD,t,r,e)}catch(e){u.traceError("sendErrorTelemetry() failed.",e)}},t.hasUserDefinedPythonPath=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runAfterActivation=t.addItemsToRunAfterActivation=void 0;const r=[];let i=!1;t.addItemsToRunAfterActivation=function(e){i?e():r.push(e)},t.runAfterActivation=function(){for(i=!0;r.length>0;){const e=r.shift();e&&e()}}},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(2),o=n(27),s=n(8),a=n(10);var c=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new u(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i.b(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(s.a),l=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i.b(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new a.a).add(this.source.subscribe(new p(this.getSubject(),this))),e.closed&&(this._connection=null,e=a.a.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new c(e));var e},t}(r.a),p=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i.b(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(o.c),d=(s.a,n(125)),h=n(36),f=n(37),v=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i.b(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new f.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(o.b),y=n(104),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i.b(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),a.a.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(o.b),m=n(103),_=n(49),b=n(149),E=n(56),S=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i.b(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(E.a),w=n(55),T=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.b(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(w.a))(S),P=function(e){function t(t,n){void 0===t&&(t=I),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i.b(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(w.a),I=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i.b(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(E.a),C=n(75),O=n(76),A=n(91),x=n(66),R=n(58);function N(e){return!!e&&(e instanceof r.a||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var k=n(126),D=n(127),j=n(60),M=n(128),L=n(28),F=n(101),V=n(15),U=n(30);function B(e,t,n){if(t){if(!Object(U.a)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return B(e,n).apply(void 0,r).pipe(Object(L.a)((function(e){return Object(V.a)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o,s=this,a={context:s,subject:o,callbackFunc:e,scheduler:n};return new r.a((function(r){if(n){var i={args:t,subscriber:r,params:a};return n.schedule(H,0,i)}if(!o){o=new g;try{e.apply(s,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(e){Object(F.a)(o)?o.error(e):console.warn(e)}}return o.subscribe(r)}))}}function H(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new g;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(a.schedule(W,0,{value:r,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(r))}function W(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function G(e,t,n){if(t){if(!Object(U.a)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return G(e,n).apply(void 0,r).pipe(Object(L.a)((function(e){return Object(V.a)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var o={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r.a((function(r){var i=o.context,s=o.subject;if(n)return n.schedule($,0,{params:o,subscriber:r,context:i});if(!s){s=o.subject=new g;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){Object(F.a)(s)?s.error(e):console.warn(e)}}return s.subscribe(r)}))}}function $(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new g;try{o.apply(i,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(a.schedule(K,0,{err:r,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(q,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(K,0,{err:e,subject:c}))}}this.add(c.subscribe(r))}function q(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function K(e){var t=e.err;e.subject.error(t)}var z=n(123),Y=n(96),X=n(42),Q=n(41),J=n(92),Z=n(43);var ee=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new te(e,this.project,this.concurrent))},e}(),te=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i.b(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new J.a(this,t,n),i=this.destination;i.add(r);var o=Object(X.a)(this,e,void 0,void 0,r);o!==r&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Q.a);function ne(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(e((function(e,r){return Object(Z.a)(t(e,r)).pipe(Object(L.a)((function(t,i){return n(e,t,r,i)})))}),r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new ee(t,r))})}(R.a,e)}function re(){return ne(1)}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return re()(Y.a.apply(void 0,e))}var oe=n(100),se=n(33),ae=n(67);function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Object(V.a)(n))return ue(n,null);if(Object(ae.a)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return ue(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var i=e.pop();return ue(e=1===e.length&&Object(V.a)(e[0])?e[0]:e,null).pipe(Object(L.a)((function(e){return i.apply(void 0,e)})))}return ue(e,null)}function ue(e,t){return new r.a((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var c=Object(Z.a)(e[a]),u=!1;n.add(c.subscribe({next:function(e){u||(u=!0,s++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&u||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},c=0;c<r;c++)a(c);else n.complete()}))}var le=n(48);function pe(e,t,n,i){return Object(le.a)(n)&&(i=n,n=void 0),i?pe(e,t,n).pipe(Object(L.a)((function(e){return Object(V.a)(e)?i.apply(void 0,e):i(e)}))):new r.a((function(r){!function e(t,n,r,i,o){var s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var a=t;t.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var c=t;t.on(n,r),s=function(){return c.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var u=t;t.addListener(n,r),s=function(){return u.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,p=t.length;l<p;l++)e(t[l],n,r,i,o)}i.add(s)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function de(e,t,n){return n?de(e,t).pipe(Object(L.a)((function(e){return Object(V.a)(e)?n.apply(void 0,e):n(e)}))):new r.a((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(Object(le.a)(t))return function(){return t(i,r)}}))}function he(e,t,n,i,o){var s,a;if(1==arguments.length){var c=e;a=c.initialState,t=c.condition,n=c.iterate,s=c.resultSelector||R.a,o=c.scheduler}else void 0===i||Object(U.a)(i)?(a=e,s=R.a,o=i):(a=e,s=i);return new r.a((function(e){var r=a;if(o)return o.schedule(fe,0,{subscriber:e,iterate:n,condition:t,resultSelector:s,state:r});for(;;){if(t){var i=void 0;try{i=t(r)}catch(t){return void e.error(t)}if(!i){e.complete();break}}var c=void 0;try{c=s(r)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))}function fe(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function ve(e,t,n){return void 0===t&&(t=se.a),void 0===n&&(n=se.a),Object(oe.a)((function(){return e()?t:n}))}var ye=n(62);function ge(e,t){return void 0===e&&(e=0),void 0===t&&(t=_.a),(!Object(ye.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=_.a),new r.a((function(n){return n.add(t.schedule(me,e,{subscriber:n,counter:0,period:e})),n}))}function me(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var _e=n(54);function be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,i=null,o=e[e.length-1];return Object(U.a)(o)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof o&&(n=e.pop()),null===i&&1===e.length&&e[0]instanceof r.a?e[0]:ne(n)(Object(_e.a)(e,i))}var Ee=new r.a(x.a);function Se(){return Ee}function we(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return se.a;var n=e[0],i=e.slice(1);return 1===e.length&&Object(V.a)(n)?we.apply(void 0,n):new r.a((function(e){var t=function(){return e.add(we.apply(void 0,i).subscribe(e))};return Object(Z.a)(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function Te(e,t){return t?new r.a((function(n){var r=Object.keys(e),i=new a.a;return i.add(t.schedule(Pe,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i})):new r.a((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function Pe(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var Ie=n(148),Ce=n(61);function Oe(e,t){return function(n){return n.lift(new Ae(e,t))}}var Ae=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new xe(e,this.predicate,this.thisArg))},e}(),xe=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i.b(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(s.a);function Re(e,t,n){return[Oe(t,n)(new r.a(Object(Ce.a)(e))),Oe(Object(Ie.a)(t,n))(new r.a(Object(Ce.a)(e)))]}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(V.a)(e[0]))return e[0];e=e[0]}return Object(_e.a)(e,void 0).lift(new ke)}var ke=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new De(e))},e}(),De=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.b(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(X.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(Q.a),je=n(124),Me=n(144);function Le(e,t,n){void 0===e&&(e=0);var i=-1;return Object(ye.a)(t)?i=Number(t)<1?1:Number(t):Object(U.a)(t)&&(n=t),Object(U.a)(n)||(n=_.a),new r.a((function(t){var r=Object(ye.a)(e)?e:+e-n.now();return n.schedule(Fe,r,{index:0,period:i,subscriber:t})}))}function Fe(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Ve(e,t){return new r.a((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?Object(Z.a)(i):se.a).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}var Ue=n(34);function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Object(_e.a)(e,void 0).lift(new He(n))}var He=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new We(e,this.resultSelector))},e}(),We=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i.b(t,e),t.prototype._next=function(e){var t=this.iterators;Object(V.a)(e)?t.push(new $e(e)):"function"==typeof e[Ue.a]?t.push(new Ge(e[Ue.a]())):t.push(new qe(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var s,a=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.a),Ge=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),$e=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Ue.a]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),qe=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i.b(t,e),t.prototype[Ue.a]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Object(X.a)(this,this.observable,this,t)},t}(Q.a),Ke=n(150),ze=n(29);n.d(t,"Observable",(function(){return r.a})),n.d(t,"ConnectableObservable",(function(){return l})),n.d(t,"GroupedObservable",(function(){return d.a})),n.d(t,"observable",(function(){return h.a})),n.d(t,"Subject",(function(){return o.b})),n.d(t,"BehaviorSubject",(function(){return v})),n.d(t,"ReplaySubject",(function(){return y.a})),n.d(t,"AsyncSubject",(function(){return g})),n.d(t,"asapScheduler",(function(){return m.a})),n.d(t,"asyncScheduler",(function(){return _.a})),n.d(t,"queueScheduler",(function(){return b.a})),n.d(t,"animationFrameScheduler",(function(){return T})),n.d(t,"VirtualTimeScheduler",(function(){return P})),n.d(t,"VirtualAction",(function(){return I})),n.d(t,"Scheduler",(function(){return C.a})),n.d(t,"Subscription",(function(){return a.a})),n.d(t,"Subscriber",(function(){return s.a})),n.d(t,"Notification",(function(){return O.a})),n.d(t,"NotificationKind",(function(){return O.b})),n.d(t,"pipe",(function(){return A.a})),n.d(t,"noop",(function(){return x.a})),n.d(t,"identity",(function(){return R.a})),n.d(t,"isObservable",(function(){return N})),n.d(t,"ArgumentOutOfRangeError",(function(){return k.a})),n.d(t,"EmptyError",(function(){return D.a})),n.d(t,"ObjectUnsubscribedError",(function(){return f.a})),n.d(t,"UnsubscriptionError",(function(){return j.a})),n.d(t,"TimeoutError",(function(){return M.a})),n.d(t,"bindCallback",(function(){return B})),n.d(t,"bindNodeCallback",(function(){return G})),n.d(t,"combineLatest",(function(){return z.b})),n.d(t,"concat",(function(){return ie})),n.d(t,"defer",(function(){return oe.a})),n.d(t,"empty",(function(){return se.b})),n.d(t,"forkJoin",(function(){return ce})),n.d(t,"from",(function(){return Z.a})),n.d(t,"fromEvent",(function(){return pe})),n.d(t,"fromEventPattern",(function(){return de})),n.d(t,"generate",(function(){return he})),n.d(t,"iif",(function(){return ve})),n.d(t,"interval",(function(){return ge})),n.d(t,"merge",(function(){return be})),n.d(t,"never",(function(){return Se})),n.d(t,"of",(function(){return Y.a})),n.d(t,"onErrorResumeNext",(function(){return we})),n.d(t,"pairs",(function(){return Te})),n.d(t,"partition",(function(){return Re})),n.d(t,"race",(function(){return Ne})),n.d(t,"range",(function(){return je.b})),n.d(t,"throwError",(function(){return Me.a})),n.d(t,"timer",(function(){return Le})),n.d(t,"using",(function(){return Ve})),n.d(t,"zip",(function(){return Be})),n.d(t,"scheduled",(function(){return Ke.a})),n.d(t,"EMPTY",(function(){return se.a})),n.d(t,"NEVER",(function(){return Ee})),n.d(t,"config",(function(){return ze.a}))},function(e,t,n){"use strict";n.r(t);var r=n(29),i=n(92),o=n(41),s=n(75),a=n(27),c=n(93),u=n(8),l=n(3),p=n(94),d=n(151);function h(e,t){return t?Object(d.a)(e,t):new l.a(Object(p.a)(e))}var f=n(95),v=n(152);function y(e,t){if(!e)throw new Error("Iterable cannot be null");return t?Object(v.a)(e,t):new l.a(Object(f.a)(e))}var g=n(2),m="undefined"!=typeof window&&window,_="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,b="undefined"!=typeof global&&global,E=m||b||_,S=n(28);function w(e,t){return void 0===t&&(t=null),new x({method:"GET",url:e,headers:t})}function T(e,t,n){return new x({method:"POST",url:e,body:t,headers:n})}function P(e,t){return new x({method:"DELETE",url:e,headers:t})}function I(e,t,n){return new x({method:"PUT",url:e,body:t,headers:n})}function C(e,t,n){return new x({method:"PATCH",url:e,body:t,headers:n})}var O=Object(S.a)((function(e,t){return e.response}));function A(e,t){return O(new x({method:"GET",url:e,responseType:"json",headers:t}))}var x=function(e){function t(t){var n=e.call(this)||this,r={async:!0,createXHR:function(){return this.crossDomain?function(){if(E.XMLHttpRequest)return new E.XMLHttpRequest;if(E.XDomainRequest)return new E.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(E.XMLHttpRequest)return new E.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(e=t[n],new E.ActiveXObject(e))break}catch(e){}return new E.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)r.url=t;else for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return n.request=r,n}var n;return g.b(t,e),t.prototype._subscribe=function(e){return new R(e,this.request)},t.create=((n=function(e){return new t(e)}).get=w,n.post=T,n.delete=P,n.put=I,n.patch=C,n.getJSON=A,n),t}(l.a),R=function(e){function t(t,n){var r=e.call(this,t)||this;r.request=n,r.done=!1;var i=n.headers=n.headers||{};return n.crossDomain||r.getHeader(i,"X-Requested-With")||(i["X-Requested-With"]="XMLHttpRequest"),r.getHeader(i,"Content-Type")||E.FormData&&n.body instanceof E.FormData||void 0===n.body||(i["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=r.serializeBody(n.body,r.getHeader(n.headers,"Content-Type")),r.send(),r}return g.b(t,e),t.prototype.next=function(e){this.done=!0;var t,n=this.xhr,r=this.request,i=this.destination;try{t=new N(e,n,r)}catch(e){return i.error(e)}i.next(t)},t.prototype.send=function(){var e=this.request,t=this.request,n=t.user,r=t.method,i=t.url,o=t.async,s=t.password,a=t.headers,c=t.body;try{var u=this.xhr=e.createXHR();this.setupEvents(u,e),n?u.open(r,i,o,n,s):u.open(r,i,o),o&&(u.timeout=e.timeout,u.responseType=e.responseType),"withCredentials"in u&&(u.withCredentials=!!e.withCredentials),this.setHeaders(u,a),c?u.send(c):u.send()}catch(e){this.error(e)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(E.FormData&&e instanceof E.FormData)return e;if(t){var n=t.indexOf(";");-1!==n&&(t=t.substring(0,n))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setRequestHeader(n,t[n])},t.prototype.getHeader=function(e,t){for(var n in e)if(n.toLowerCase()===t.toLowerCase())return e[n]},t.prototype.setupEvents=function(e,t){var n=t.progressSubscriber;function r(e){var t,n=r,i=n.subscriber,o=n.progressSubscriber,s=n.request;o&&o.error(e);try{t=new j(this,s)}catch(e){t=e}i.error(t)}if(e.ontimeout=r,r.request=t,r.subscriber=this,r.progressSubscriber=n,e.upload&&"withCredentials"in e){var i,o;if(n)i=function(e){i.progressSubscriber.next(e)},E.XDomainRequest?e.onprogress=i:e.upload.onprogress=i,i.progressSubscriber=n;o=function(e){var t,n=o,r=n.progressSubscriber,i=n.subscriber,s=n.request;r&&r.error(e);try{t=new k("ajax error",this,s)}catch(e){t=e}i.error(t)},e.onerror=o,o.request=t,o.subscriber=this,o.progressSubscriber=n}function s(e){}function a(e){var t=a,n=t.subscriber,r=t.progressSubscriber,i=t.request;if(4===this.readyState){var o=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;if(0===o&&(o=s?200:0),o<400)r&&r.complete(),n.next(e),n.complete();else{r&&r.error(e);var c=void 0;try{c=new k("ajax error "+o,this,i)}catch(e){c=e}n.error(c)}}}e.onreadystatechange=s,s.subscriber=this,s.progressSubscriber=n,s.request=t,e.onload=a,a.subscriber=this,a.progressSubscriber=n,a.request=t},t.prototype.unsubscribe=function(){var t=this.done,n=this.xhr;!t&&n&&4!==n.readyState&&"function"==typeof n.abort&&n.abort(),e.prototype.unsubscribe.call(this)},t}(u.a),N=function(){return function(e,t,n){this.originalEvent=e,this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=D(this.responseType,t)}}(),k=function(){function e(e,t,n){return Error.call(this),this.message=e,this.name="AjaxError",this.xhr=t,this.request=n,this.status=t.status,this.responseType=t.responseType||n.responseType,this.response=D(this.responseType,t),this}return e.prototype=Object.create(Error.prototype),e}();function D(e,t){switch(e){case"json":return function(e){return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null")}(t);case"xml":return t.responseXML;case"text":default:return"response"in t?t.response:t.responseText}}var j=function(e,t){return k.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this},M=function(){return x.create}(),L=n(10),F=n(104),V={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},U=function(e){function t(t,n){var r=e.call(this)||this;if(t instanceof l.a)r.destination=n,r.source=t;else{var i=r._config=g.a({},V);if(r._output=new a.b,"string"==typeof t)i.url=t;else for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");r.destination=new F.a}return r}return g.b(t,e),t.prototype.lift=function(e){var n=new t(this._config,this.destination);return n.operator=e,n.source=this,n},t.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new F.a),this._output=new a.b},t.prototype.multiplex=function(e,t,n){var r=this;return new l.a((function(i){try{r.next(e())}catch(e){i.error(e)}var o=r.subscribe((function(e){try{n(e)&&i.next(e)}catch(e){i.error(e)}}),(function(e){return i.error(e)}),(function(){return i.complete()}));return function(){try{r.next(t())}catch(e){i.error(e)}o.unsubscribe()}}))},t.prototype._connectSocket=function(){var e=this,t=this._config,n=t.WebSocketCtor,r=t.protocol,i=t.url,o=t.binaryType,s=this._output,a=null;try{a=r?new n(i,r):new n(i),this._socket=a,o&&(this._socket.binaryType=o)}catch(e){return void s.error(e)}var c=new L.a((function(){e._socket=null,a&&1===a.readyState&&a.close()}));a.onopen=function(t){if(!e._socket)return a.close(),void e._resetState();var n=e._config.openObserver;n&&n.next(t);var r=e.destination;e.destination=u.a.create((function(t){if(1===a.readyState)try{var n=e._config.serializer;a.send(n(t))}catch(t){e.destination.error(t)}}),(function(t){var n=e._config.closingObserver;n&&n.next(void 0),t&&t.code?a.close(t.code,t.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e._config.closingObserver;t&&t.next(void 0),a.close(),e._resetState()})),r&&r instanceof F.a&&c.add(r.subscribe(e.destination))},a.onerror=function(t){e._resetState(),s.error(t)},a.onclose=function(t){e._resetState();var n=e._config.closeObserver;n&&n.next(t),t.wasClean?s.complete():s.error(t)},a.onmessage=function(t){try{var n=e._config.deserializer;s.next(n(t))}catch(e){s.error(e)}}},t.prototype._subscribe=function(e){var t=this,n=this.source;return n?n.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add((function(){var e=t._socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())})),e)},t.prototype.unsubscribe=function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),e.prototype.unsubscribe.call(this)},t}(a.a);function B(e){return new U(e)}var H=n(123),W=n(124),G=n(103),$=n(62),q=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=G.a);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!Object($.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=G.a),i}return g.b(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=G.a),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(l.a);n(49);var K=function(){return function(e,t){this.value=e,this.timestamp=t}}();u.a,n(100);var z=function(){return function(e,t){this.value=e,this.interval=t}}(),Y=n(125),X=n(42),Q={leading:!0,trailing:!1};o.a;var J=n(59),Z=n(34),ee=n(36),te=n(126),ne=n(127),re=n(117),ie=n(37),oe=n(128),se=n(60);function ae(e,t){for(var n=0,r=t.length;n<r;n++)for(var i=t[n],o=Object.getOwnPropertyNames(i.prototype),s=0,a=o.length;s<a;s++){var c=o[s];e.prototype[c]=i.prototype[c]}}var ce={e:{}},ue=n(50),le=n(58),pe=n(15),de=n(98);function he(e){return e instanceof Date&&!isNaN(+e)}var fe,ve=n(48),ye=n(147),ge=n(67),me=n(146),_e=n(99),be=n(30),Ee=n(66),Se=n(148),we=n(91),Te=n(61),Pe=n(97),Ie=n(145),Ce=n(143);function Oe(){ce.e=void 0;try{return fe.apply(this,arguments)}catch(e){return ce.e=e,ce}finally{fe=void 0}}function Ae(e){return fe=e,Oe}n.d(t,"config",(function(){return r.a})),n.d(t,"InnerSubscriber",(function(){return i.a})),n.d(t,"OuterSubscriber",(function(){return o.a})),n.d(t,"Scheduler",(function(){return s.a})),n.d(t,"AnonymousSubject",(function(){return a.a})),n.d(t,"SubjectSubscription",(function(){return c.a})),n.d(t,"Subscriber",(function(){return u.a})),n.d(t,"fromPromise",(function(){return h})),n.d(t,"fromIterable",(function(){return y})),n.d(t,"ajax",(function(){return M})),n.d(t,"webSocket",(function(){return B})),n.d(t,"ajaxGet",(function(){return w})),n.d(t,"ajaxPost",(function(){return T})),n.d(t,"ajaxDelete",(function(){return P})),n.d(t,"ajaxPut",(function(){return I})),n.d(t,"ajaxPatch",(function(){return C})),n.d(t,"ajaxGetJSON",(function(){return A})),n.d(t,"AjaxObservable",(function(){return x})),n.d(t,"AjaxSubscriber",(function(){return R})),n.d(t,"AjaxResponse",(function(){return N})),n.d(t,"AjaxError",(function(){return k})),n.d(t,"AjaxTimeoutError",(function(){return j})),n.d(t,"WebSocketSubject",(function(){return U})),n.d(t,"CombineLatestOperator",(function(){return H.a})),n.d(t,"dispatch",(function(){return W.a})),n.d(t,"SubscribeOnObservable",(function(){return q})),n.d(t,"Timestamp",(function(){return K})),n.d(t,"TimeInterval",(function(){return z})),n.d(t,"GroupedObservable",(function(){return Y.a})),n.d(t,"defaultThrottleConfig",(function(){return Q})),n.d(t,"rxSubscriber",(function(){return J.a})),n.d(t,"iterator",(function(){return Z.a})),n.d(t,"observable",(function(){return ee.a})),n.d(t,"ArgumentOutOfRangeError",(function(){return te.a})),n.d(t,"EmptyError",(function(){return ne.a})),n.d(t,"Immediate",(function(){return re.a})),n.d(t,"ObjectUnsubscribedError",(function(){return ie.a})),n.d(t,"TimeoutError",(function(){return oe.a})),n.d(t,"UnsubscriptionError",(function(){return se.a})),n.d(t,"applyMixins",(function(){return ae})),n.d(t,"errorObject",(function(){return ce})),n.d(t,"hostReportError",(function(){return ue.a})),n.d(t,"identity",(function(){return le.a})),n.d(t,"isArray",(function(){return pe.a})),n.d(t,"isArrayLike",(function(){return de.a})),n.d(t,"isDate",(function(){return he})),n.d(t,"isFunction",(function(){return ve.a})),n.d(t,"isIterable",(function(){return ye.a})),n.d(t,"isNumeric",(function(){return $.a})),n.d(t,"isObject",(function(){return ge.a})),n.d(t,"isObservable",(function(){return me.a})),n.d(t,"isPromise",(function(){return _e.a})),n.d(t,"isScheduler",(function(){return be.a})),n.d(t,"noop",(function(){return Ee.a})),n.d(t,"not",(function(){return Se.a})),n.d(t,"pipe",(function(){return we.a})),n.d(t,"root",(function(){return E})),n.d(t,"subscribeTo",(function(){return Te.a})),n.d(t,"subscribeToArray",(function(){return Pe.a})),n.d(t,"subscribeToIterable",(function(){return f.a})),n.d(t,"subscribeToObservable",(function(){return Ie.a})),n.d(t,"subscribeToPromise",(function(){return p.a})),n.d(t,"subscribeToResult",(function(){return X.a})),n.d(t,"toSubscriber",(function(){return Ce.a})),n.d(t,"tryCatch",(function(){return Ae}))},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=!1);var n=0,r=e.length,a="",c=0,u=16,l=0,p=0,d=0,h=0,f=0;function v(t,r){for(var i=0,o=0;i<t||!r;){var s=e.charCodeAt(n);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}n++,i++}return i<t&&(o=-1),o}function y(){if(a="",f=0,c=n,p=l,h=d,n>=r)return c=r,u=17;var t=e.charCodeAt(n);if(i(t)){do{n++,a+=String.fromCharCode(t),t=e.charCodeAt(n)}while(i(t));return u=15}if(o(t))return n++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,a+="\n"),l++,d=n,u=14;switch(t){case 123:return n++,u=1;case 125:return n++,u=2;case 91:return n++,u=3;case 93:return n++,u=4;case 58:return n++,u=6;case 44:return n++,u=5;case 34:return n++,a=function(){for(var t="",i=n;;){if(n>=r){t+=e.substring(i,n),f=2;break}var s=e.charCodeAt(n);if(34===s){t+=e.substring(i,n),n++;break}if(92!==s){if(s>=0&&s<=31){if(o(s)){t+=e.substring(i,n),f=2;break}f=6}n++}else{if(t+=e.substring(i,n),++n>=r){f=2;break}switch(s=e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=v(4,!0);a>=0?t+=String.fromCharCode(a):f=4;break;default:f=5}i=n}}return t}(),u=10;case 47:var y=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<r&&!o(e.charCodeAt(n));)n++;return a=e.substring(y,n),u=12}if(42===e.charCodeAt(n+1)){n+=2;for(var m=r-1,_=!1;n<m;){var b=e.charCodeAt(n);if(42===b&&47===e.charCodeAt(n+1)){n+=2,_=!0;break}n++,o(b)&&(13===b&&10===e.charCodeAt(n)&&n++,l++,d=n)}return _||(n++,f=1),a=e.substring(y,n),u=13}return a+=String.fromCharCode(t),n++,u=16;case 45:if(a+=String.fromCharCode(t),++n===r||!s(e.charCodeAt(n)))return u=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&s(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&s(e.charCodeAt(n))))return f=3,e.substring(t,n);for(n++;n<e.length&&s(e.charCodeAt(n));)n++}var r=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&s(e.charCodeAt(n))){for(n++;n<e.length&&s(e.charCodeAt(n));)n++;r=n}else f=3;return e.substring(t,r)}(),u=11;default:for(;n<r&&g(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(a=e.substring(c,n)){case"true":return u=8;case"false":return u=9;case"null":return u=7}return u=16}return a+=String.fromCharCode(t),n++,u=16}}function g(e){if(i(e)||o(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,a="",c=0,u=16,f=0},getPosition:function(){return n},scan:t?function(){var e;do{e=y()}while(e>=12&&e<=15);return e}:y,getToken:function(){return u},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenStartLine:function(){return p},getTokenStartCharacter:function(){return c-h},getTokenError:function(){return f}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function o(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function a(e,t,n){var i,o,s,a,l;if(t){for(a=t.offset,l=a+t.length,s=a;s>0&&!u(e,s-1);)s--;for(var p=l;p<e.length&&!u(e,p);)p++;o=e.substring(s,p),i=function(e,t){var n=0,r=0,i=t.tabSize||4;for(;n<e.length;){var o=e.charAt(n);if(" "===o)r++;else{if("\t"!==o)break;r+=i}n++}return Math.floor(r/i)}(o,n)}else o=e,i=0,s=0,a=0,l=e.length;var d,h=function(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}(n,e),f=!1,v=0;d=n.insertSpaces?c(" ",n.tabSize||4):"\t";var y=r(o,!1),g=!1;function m(){return h+c(d,i+v)}function _(){var e=y.scan();for(f=!1;15===e||14===e;)f=f||14===e,e=y.scan();return g=16===e||0!==y.getTokenError(),e}var b=[];function E(t,n,r){!g&&n<l&&r>a&&e.substring(n,r)!==t&&b.push({offset:n,length:r-n,content:t})}var S=_();if(17!==S){var w=y.getTokenOffset()+s;E(c(d,i),s,w)}for(;17!==S;){for(var T=y.getTokenOffset()+y.getTokenLength()+s,P=_(),I="";!f&&(12===P||13===P);){E(" ",T,y.getTokenOffset()+s),T=y.getTokenOffset()+y.getTokenLength()+s,I=12===P?m():"",P=_()}if(2===P)1!==S&&(v--,I=m());else if(4===P)3!==S&&(v--,I=m());else{switch(S){case 3:case 1:v++,I=m();break;case 5:case 12:I=m();break;case 13:I=f?m():" ";break;case 6:I=" ";break;case 10:if(6===P){I="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===P||13===P?I=" ":5!==P&&17!==P&&(g=!0);break;case 16:g=!0}!f||12!==P&&13!==P||(I=m())}E(I,T,y.getTokenOffset()+s),S=P}return b}function c(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function u(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var l;function p(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=l.DEFAULT);var r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===r.type&&(r.length=e-r.offset,r=r.parent)}function o(e){return r.children.push(e),e}h(e,{onObjectBegin:function(e){r=o({type:"object",offset:e,length:-1,parent:r,children:[]})},onObjectProperty:function(e,t,n){(r=o({type:"property",offset:t,length:-1,parent:r,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:r})},onObjectEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onArrayBegin:function(e,t){r=o({type:"array",offset:e,length:-1,parent:r,children:[]})},onArrayEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onLiteralValue:function(e,t,n){o({type:f(e),offset:t,length:n,parent:r,value:e}),i(t+n)},onSeparator:function(e,t,n){"property"===r.type&&(":"===e?r.colonOffset=t:","===e&&i(t))},onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n);var s=r.children[0];return s&&delete s.parent,s}function d(e,t){if(e){for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if("string"==typeof o){if("object"!==n.type||!Array.isArray(n.children))return;for(var s=!1,a=0,c=n.children;a<c.length;a++){var u=c[a];if(Array.isArray(u.children)&&u.children[0].value===o){n=u.children[1],s=!0;break}}if(!s)return}else{var l=o;if("array"!==n.type||l<0||!Array.isArray(n.children)||l>=n.children.length)return;n=n.children[l]}}return n}}function h(e,t,n){void 0===n&&(n=l.DEFAULT);var i=r(e,!1);function o(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function s(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var a=o(t.onObjectBegin),c=s(t.onObjectProperty),u=o(t.onObjectEnd),p=o(t.onArrayBegin),d=o(t.onArrayEnd),h=s(t.onLiteralValue),f=s(t.onSeparator),v=o(t.onComment),y=s(t.onError),g=n&&n.disallowComments,m=n&&n.allowTrailingComma;function _(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:g||b(11);break;case 2:b(12);break;case 6:b(16)}switch(e){case 12:case 13:g?b(10):v();break;case 16:b(1);break;case 15:case 14:break;default:return e}}}function b(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),y(e),t.length+n.length>0)for(var r=i.getToken();17!==r;){if(-1!==t.indexOf(r)){_();break}if(-1!==n.indexOf(r))break;r=_()}}function E(e){var t=i.getTokenValue();return e?h(t):c(t),_(),!0}function S(){switch(i.getToken()){case 3:return function(){p(),_();for(var e=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||b(4,[],[]),f(","),_(),4===i.getToken()&&m)break}else e&&b(6,[],[]);S()||b(4,[],[4,5]),e=!0}return d(),4!==i.getToken()?b(8,[4],[]):_(),!0}();case 1:return function(){a(),_();for(var e=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||b(4,[],[]),f(","),_(),2===i.getToken()&&m)break}else e&&b(6,[],[]);(10!==i.getToken()?(b(3,[],[2,5]),0):(E(!1),6===i.getToken()?(f(":"),_(),S()||b(4,[],[2,5])):b(5,[],[2,5]),1))||b(4,[],[2,5]),e=!0}return u(),2!==i.getToken()?b(7,[2],[]):_(),!0}();case 10:return E(!0);default:return function(){switch(i.getToken()){case 11:var e=0;try{"number"!=typeof(e=JSON.parse(i.getTokenValue()))&&(b(2),e=0)}catch(e){b(2)}h(e);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return _(),!0}()}}return _(),17===i.getToken()||(S()?(17!==i.getToken()&&b(9,[],[]),!0):(b(4,[],[]),!1))}function f(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}function v(e,t,n,r,i){for(var o,s=t.slice(),a=p(e,[]),c=void 0,u=void 0;s.length>0&&(u=s.pop(),void 0===(c=d(a,s))&&void 0!==n);)"string"==typeof u?((o={})[u]=n,n=o):n=[n];if(c){if("object"===c.type&&"string"==typeof u&&Array.isArray(c.children)){var l=d(c,[u]);if(void 0!==l){if(void 0===n){if(!l.parent)throw new Error("Malformed AST");var h=c.children.indexOf(l.parent),f=void 0,v=l.parent.offset+l.parent.length;if(h>0)f=(S=c.children[h-1]).offset+S.length;else if(f=c.offset+1,c.children.length>1)v=c.children[1].offset;return y(e,{offset:f,length:v-f,content:""},r)}return y(e,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r)}if(void 0===n)return[];var g=JSON.stringify(u)+": "+JSON.stringify(n),m=i?i(c.children.map((function(e){return e.children[0].value}))):c.children.length,_=void 0;return y(e,_=m>0?{offset:(S=c.children[m-1]).offset+S.length,length:0,content:","+g}:0===c.children.length?{offset:c.offset+1,length:0,content:g}:{offset:c.offset+1,length:0,content:g+","},r)}if("array"===c.type&&"number"==typeof u&&Array.isArray(c.children)){if(-1===u){g=""+JSON.stringify(n),_=void 0;if(0===c.children.length)_={offset:c.offset+1,length:0,content:g};else _={offset:(S=c.children[c.children.length-1]).offset+S.length,length:0,content:","+g};return y(e,_,r)}if(void 0===n&&c.children.length>=0){var b=u,E=c.children[b];_=void 0;if(1===c.children.length)_={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===b){var S,w=(S=c.children[b-1]).offset+S.length;_={offset:w,length:c.offset+c.length-2-w,content:""}}else _={offset:E.offset,length:c.children[b+1].offset-E.offset,content:""};return y(e,_,r)}throw new Error("Array modification not supported yet")}throw new Error("Can not add "+("number"!=typeof u?"index":"property")+" to parent of type "+c.type)}if(void 0===n)throw new Error("Can not delete in empty document");return y(e,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(n)},r)}function y(e,t,n){var r=g(e,t),i=t.offset,o=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!u(r,i-1);)i--;for(;o<r.length&&!u(r,o);)o++}for(var s=a(r,{offset:i,length:o-i},n),c=s.length-1;c>=0;c--){var l=s[c];r=g(r,l),i=Math.min(i,l.offset),o=Math.max(o,l.offset+l.length),o+=l.content.length-l.length}return[{offset:i,length:e.length-(r.length-o)-i,content:r.substring(i,o)}]}function g(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}n.r(t),function(e){e.DEFAULT={allowTrailingComma:!1}}(l||(l={})),n.d(t,"createScanner",(function(){return m})),n.d(t,"getLocation",(function(){return _})),n.d(t,"parse",(function(){return b})),n.d(t,"parseTree",(function(){return E})),n.d(t,"findNodeAtLocation",(function(){return S})),n.d(t,"findNodeAtOffset",(function(){return w})),n.d(t,"getNodePath",(function(){return T})),n.d(t,"getNodeValue",(function(){return P})),n.d(t,"visit",(function(){return I})),n.d(t,"stripComments",(function(){return C})),n.d(t,"printParseErrorCode",(function(){return O})),n.d(t,"format",(function(){return A})),n.d(t,"modify",(function(){return x})),n.d(t,"applyEdits",(function(){return R}));var m=r,_=function(e,t){var n=[],r=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(e,t,n,r){o.value=e,o.offset=t,o.length=n,o.type=r,o.colonOffset=void 0,i=o}try{h(e,{onObjectBegin:function(e,o){if(t<=e)throw r;i=void 0,s=t>e,n.push("")},onObjectProperty:function(e,i,o){if(t<i)throw r;if(a(e,i,o,"property"),n[n.length-1]=e,t<=i+o)throw r},onObjectEnd:function(e,o){if(t<=e)throw r;i=void 0,n.pop()},onArrayBegin:function(e,o){if(t<=e)throw r;i=void 0,n.push(0)},onArrayEnd:function(e,o){if(t<=e)throw r;i=void 0,n.pop()},onLiteralValue:function(e,n,i){if(t<n)throw r;if(a(e,n,i,f(e)),t<=n+i)throw r},onSeparator:function(e,o,a){if(t<=o)throw r;if(":"===e&&i&&"property"===i.type)i.colonOffset=o,s=!1,i=void 0;else if(","===e){var c=n[n.length-1];"number"==typeof c?n[n.length-1]=c+1:(s=!0,n[n.length-1]=""),i=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:i,isAtPropertyKey:s,matches:function(e){for(var t=0,r=0;t<e.length&&r<n.length;r++)if(e[t]===n[r]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},b=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=l.DEFAULT);var r=null,i=[],o=[];function s(e){Array.isArray(i)?i.push(e):r&&(i[r]=e)}return h(e,{onObjectBegin:function(){var e={};s(e),o.push(i),i=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var e=[];s(e),o.push(i),i=e,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]},E=p,S=d,w=function e(t,n,r){if(void 0===r&&(r=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,r)){var i=t.children;if(Array.isArray(i))for(var o=0;o<i.length&&i[o].offset<=n;o++){var s=e(i[o],n,r);if(s)return s}return t}},T=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var r=t.parent.children[0].value;n.push(r)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&n.push(i)}return n},P=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),r=0,i=t.children;r<i.length;r++){var o=i[r],s=o.children[1];s&&(n[o.children[0].value]=e(s))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}},I=h,C=function(e,t){var n,i,o=r(e),s=[],a=0;do{switch(i=o.getPosition(),n=o.scan()){case 12:case 13:case 17:a!==i&&s.push(e.substring(a,i)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}}while(17!==n);return s.join("")};function O(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function A(e,t,n){return a(e,t,n)}function x(e,t,n,r){return v(e,t,n,r.formattingOptions,r.getInsertionIndex)}function R(e,t){for(var n=t.length-1;n>=0;n--)e=g(e,t[n]);return e}}]);
//# sourceMappingURL=extension.js.map