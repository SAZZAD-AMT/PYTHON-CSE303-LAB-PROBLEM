/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var _3=Object.create;var pl=Object.defineProperty,S3=Object.defineProperties,x3=Object.getOwnPropertyDescriptor,P3=Object.getOwnPropertyDescriptors,k3=Object.getOwnPropertyNames,U_=Object.getOwnPropertySymbols,I3=Object.getPrototypeOf,B_=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable;var H_=(t,e,r)=>e in t?pl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,W=(t,e)=>{for(var r in e||(e={}))B_.call(e,r)&&H_(t,r,e[r]);if(U_)for(var r of U_(e))A3.call(e,r)&&H_(t,r,e[r]);return t},se=(t,e)=>S3(t,P3(e)),V_=t=>pl(t,"__esModule",{value:!0});var k=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),T3=(t,e)=>{V_(t);for(var r in e)pl(t,r,{get:e[r],enumerable:!0})},D3=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of k3(e))!B_.call(t,n)&&n!=="default"&&pl(t,n,{get:()=>e[n],enumerable:!(r=x3(e,n))||r.enumerable});return t},K=t=>D3(V_(pl(t!=null?_3(I3(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var xa=k((Zue,sS)=>{"use strict";var oS=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);sS.exports=t=>t?Object.keys(t).map(e=>[oS.has(e)?oS.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var cS=k((efe,aS)=>{"use strict";aS.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var yl=k((tfe,lS)=>{"use strict";lS.exports=He;He.Node=ys;He.create=He;function He(t){var e=this;if(e instanceof He||(e=new He),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}He.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};He.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};He.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};He.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)H3(this,arguments[t]);return this.length};He.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)V3(this,arguments[t]);return this.length};He.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};He.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};He.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};He.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};He.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};He.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};He.prototype.map=function(t,e){e=e||this;for(var r=new He,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};He.prototype.mapReverse=function(t,e){e=e||this;for(var r=new He,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};He.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};He.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};He.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};He.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};He.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new He;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};He.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new He;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};He.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=B3(this,i,r[n]);return o};He.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function B3(t,e,r){var n=e===t.head?new ys(r,null,e,t):new ys(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function H3(t,e){t.tail=new ys(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function V3(t,e){t.head=new ys(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ys(t,e,r,n){if(!(this instanceof ys))return new ys(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{cS()(He)}catch{}});var Pa=k((rfe,yS)=>{"use strict";var W3=require("events"),uS=require("stream"),wl=yl(),fS=require("string_decoder").StringDecoder,wi=Symbol("EOF"),Cl=Symbol("maybeEmitEnd"),Xi=Symbol("emittedEnd"),rd=Symbol("emittingEnd"),nd=Symbol("closed"),dS=Symbol("read"),vv=Symbol("flush"),pS=Symbol("flushChunk"),yr=Symbol("encoding"),Ci=Symbol("decoder"),id=Symbol("flowing"),bl=Symbol("paused"),El=Symbol("resume"),dr=Symbol("bufferLength"),hS=Symbol("bufferPush"),yv=Symbol("bufferShift"),tr=Symbol("objectMode"),rr=Symbol("destroyed"),mS=global._MP_NO_ITERATOR_SYMBOLS_!=="1",G3=mS&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),z3=mS&&Symbol.iterator||Symbol("iterator not implemented"),gS=t=>t==="end"||t==="finish"||t==="prefinish",K3=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Y3=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);yS.exports=class vS extends uS{constructor(e){super();this[id]=!1,this[bl]=!1,this.pipes=new wl,this.buffer=new wl,this[tr]=e&&e.objectMode||!1,this[tr]?this[yr]=null:this[yr]=e&&e.encoding||null,this[yr]==="buffer"&&(this[yr]=null),this[Ci]=this[yr]?new fS(this[yr]):null,this[wi]=!1,this[Xi]=!1,this[rd]=!1,this[nd]=!1,this.writable=!0,this.readable=!0,this[dr]=0,this[rr]=!1}get bufferLength(){return this[dr]}get encoding(){return this[yr]}set encoding(e){if(this[tr])throw new Error("cannot set encoding in objectMode");if(this[yr]&&e!==this[yr]&&(this[Ci]&&this[Ci].lastNeed||this[dr]))throw new Error("cannot change encoding");this[yr]!==e&&(this[Ci]=e?new fS(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[Ci].write(r)))),this[yr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[tr]}set objectMode(e){this[tr]=this[tr]||!!e}write(e,r,n){if(this[wi])throw new Error("write after end");return this[rr]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[tr]&&!Buffer.isBuffer(e)&&(Y3(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):K3(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[dr]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[tr]&&!(r===this[yr]&&!this[Ci].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[yr]&&(e=this[Ci].write(e)),this.flowing?(this[dr]!==0&&this[vv](!0),this.emit("data",e)):this[hS](e),this[dr]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[rr])return null;try{return this[dr]===0||e===0||e>this[dr]?null:(this[tr]&&(e=null),this.buffer.length>1&&!this[tr]&&(this.encoding?this.buffer=new wl([Array.from(this.buffer).join("")]):this.buffer=new wl([Buffer.concat(Array.from(this.buffer),this[dr])])),this[dS](e||null,this.buffer.head.value))}finally{this[Cl]()}}[dS](e,r){return e===r.length||e===null?this[yv]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[dr]-=e),this.emit("data",r),!this.buffer.length&&!this[wi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[wi]=!0,this.writable=!1,(this.flowing||!this[bl])&&this[Cl](),this}[El](){this[rr]||(this[bl]=!1,this[id]=!0,this.emit("resume"),this.buffer.length?this[vv]():this[wi]?this[Cl]():this.emit("drain"))}resume(){return this[El]()}pause(){this[id]=!1,this[bl]=!0}get destroyed(){return this[rr]}get flowing(){return this[id]}get paused(){return this[bl]}[hS](e){return this[tr]?this[dr]+=1:this[dr]+=e.length,this.buffer.push(e)}[yv](){return this.buffer.length&&(this[tr]?this[dr]-=1:this[dr]-=this.buffer.head.value.length),this.buffer.shift()}[vv](e){do;while(this[pS](this[yv]()));!e&&!this.buffer.length&&!this[wi]&&this.emit("drain")}[pS](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[rr])return;let n=this[Xi];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:o=>this[El]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[El](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[El]():gS(e)&&this[Xi]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Xi]}[Cl](){!this[rd]&&!this[Xi]&&!this[rr]&&this.buffer.length===0&&this[wi]&&(this[rd]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[nd]&&this.emit("close"),this[rd]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==rr&&this[rr])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Xi]===!0)return;this[Xi]=!0,this.readable=!1,this[Ci]&&(r=this[Ci].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[nd]=!0,!this[Xi]&&!this[rr]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{gS(e)?this.removeAllListeners(e):this[Cl]()}}collect(){let e=[];this[tr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[tr]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[tr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[tr]?Promise.reject(new Error("cannot concat in objectMode")):this[yr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(rr,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[G3](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[wi])return Promise.resolve({done:!0});let n=null,i=null,o=l=>{this.removeListener("data",s),this.removeListener("end",a),i(l)},s=l=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:l,done:!!this[wi]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((l,u)=>{i=u,n=l,this.once(rr,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[z3](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[rr]?(e?this.emit("error",e):this.emit(rr),this):(this[rr]=!0,this.buffer=new wl,this[dr]=0,typeof this.close=="function"&&!this[nd]&&this.close(),e?this.emit("error",e):this.emit(rr),this)}static isStream(e){return!!e&&(e instanceof vS||e instanceof uS||e instanceof W3&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var CS=k((nfe,wS)=>{var J3=require("zlib").constants||{ZLIB_VERNUM:4736};wS.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},J3))});var kv=k(Nr=>{"use strict";var wv=require("assert"),Zi=require("buffer").Buffer,bS=require("zlib"),ws=Nr.constants=CS(),Q3=Pa(),ES=Zi.concat,Cs=Symbol("_superWrite"),_l=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},X3=Symbol("opts"),Sl=Symbol("flushFlag"),_S=Symbol("finishFlushFlag"),Cv=Symbol("fullFlushFlag"),nt=Symbol("handle"),od=Symbol("onError"),ka=Symbol("sawError"),bv=Symbol("level"),Ev=Symbol("strategy"),_v=Symbol("ended"),ife=Symbol("_defaultFullFlush"),Sv=class extends Q3{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[ka]=!1,this[_v]=!1,this[X3]=e,this[Sl]=e.flush,this[_S]=e.finishFlush;try{this[nt]=new bS[r](e)}catch(n){throw new _l(n)}this[od]=n=>{this[ka]||(this[ka]=!0,this.close(),this.emit("error",n))},this[nt].on("error",n=>this[od](new _l(n))),this.once("end",()=>this.close)}close(){this[nt]&&(this[nt].close(),this[nt]=null,this.emit("close"))}reset(){if(!this[ka])return wv(this[nt],"zlib binding closed"),this[nt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Cv]),this.write(Object.assign(Zi.alloc(0),{[Sl]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[_S]),this[_v]=!0,super.end(null,null,n)}get ended(){return this[_v]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Zi.from(e,r)),this[ka])return;wv(this[nt],"zlib binding closed");let i=this[nt]._handle,o=i.close;i.close=()=>{};let s=this[nt].close;this[nt].close=()=>{},Zi.concat=l=>l;let a;try{let l=typeof e[Sl]=="number"?e[Sl]:this[Sl];a=this[nt]._processChunk(e,l),Zi.concat=ES}catch(l){Zi.concat=ES,this[od](new _l(l))}finally{this[nt]&&(this[nt]._handle=i,i.close=o,this[nt].close=s,this[nt].removeAllListeners("error"))}this[nt]&&this[nt].on("error",l=>this[od](new _l(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Cs](Zi.from(a[0]));for(let l=1;l<a.length;l++)c=this[Cs](a[l])}else c=this[Cs](Zi.from(a));return n&&n(),c}[Cs](e){return super.write(e)}},eo=class extends Sv{constructor(e,r){e=e||{},e.flush=e.flush||ws.Z_NO_FLUSH,e.finishFlush=e.finishFlush||ws.Z_FINISH;super(e,r);this[Cv]=ws.Z_FULL_FLUSH,this[bv]=e.level,this[Ev]=e.strategy}params(e,r){if(!this[ka]){if(!this[nt])throw new Error("cannot switch params when binding is closed");if(!this[nt].params)throw new Error("not supported in this implementation");if(this[bv]!==e||this[Ev]!==r){this.flush(ws.Z_SYNC_FLUSH),wv(this[nt],"zlib binding closed");let n=this[nt].flush;this[nt].flush=(i,o)=>{this.flush(i),o()};try{this[nt].params(e,r)}finally{this[nt].flush=n}this[nt]&&(this[bv]=e,this[Ev]=r)}}}},SS=class extends eo{constructor(e){super(e,"Deflate")}},xS=class extends eo{constructor(e){super(e,"Inflate")}},xv=Symbol("_portable"),PS=class extends eo{constructor(e){super(e,"Gzip");this[xv]=e&&!!e.portable}[Cs](e){return this[xv]?(this[xv]=!1,e[9]=255,super[Cs](e)):super[Cs](e)}},kS=class extends eo{constructor(e){super(e,"Gunzip")}},IS=class extends eo{constructor(e){super(e,"DeflateRaw")}},AS=class extends eo{constructor(e){super(e,"InflateRaw")}},TS=class extends eo{constructor(e){super(e,"Unzip")}},Pv=class extends Sv{constructor(e,r){e=e||{},e.flush=e.flush||ws.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||ws.BROTLI_OPERATION_FINISH;super(e,r);this[Cv]=ws.BROTLI_OPERATION_FLUSH}},DS=class extends Pv{constructor(e){super(e,"BrotliCompress")}},RS=class extends Pv{constructor(e){super(e,"BrotliDecompress")}};Nr.Deflate=SS;Nr.Inflate=xS;Nr.Gzip=PS;Nr.Gunzip=kS;Nr.DeflateRaw=IS;Nr.InflateRaw=AS;Nr.Unzip=TS;typeof bS.BrotliCompress=="function"?(Nr.BrotliCompress=DS,Nr.BrotliDecompress=RS):Nr.BrotliCompress=Nr.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Ia=k((sfe,OS)=>{var Z3=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;OS.exports=Z3!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var sd=k((cfe,NS)=>{"use strict";var eW=Pa(),Iv=Ia(),Av=Symbol("slurp");NS.exports=class extends eW{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=Iv(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=Iv(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[Av](r),n&&this[Av](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[Av](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?Iv(e[n]):e[n])}}});var Tv=k(ad=>{"use strict";ad.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);ad.code=new Map(Array.from(ad.name).map(t=>[t[1],t[0]]))});var qS=k((ufe,MS)=>{"use strict";var tW=(t,e)=>{if(Number.isSafeInteger(t))t<0?nW(t,e):rW(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},rW=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},nW=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=LS(i):i===0?e[n-1]=0:(r=!0,e[n-1]=FS(i))}},iW=t=>{let e=t[0],r=e===128?sW(t.slice(1,t.length)):e===255?oW(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},oW=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var o=t[i],s;n?s=LS(o):o===0?s=o:(n=!0,s=FS(o)),s!==0&&(r-=s*Math.pow(256,e-i-1))}return r},sW=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},LS=t=>(255^t)&255,FS=t=>(255^t)+1&255;MS.exports={encode:tW,parse:iW}});var Ta=k((ffe,US)=>{"use strict";var Dv=Tv(),Aa=require("path").posix,$S=qS(),Rv=Symbol("slurp"),Lr=Symbol("type"),jS=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Lr]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=bs(e,r,100),this.mode=to(e,r+100,8),this.uid=to(e,r+108,8),this.gid=to(e,r+116,8),this.size=to(e,r+124,12),this.mtime=Ov(e,r+136,12),this.cksum=to(e,r+148,12),this[Rv](n),this[Rv](i,!0),this[Lr]=bs(e,r+156,1),this[Lr]===""&&(this[Lr]="0"),this[Lr]==="0"&&this.path.substr(-1)==="/"&&(this[Lr]="5"),this[Lr]==="5"&&(this.size=0),this.linkpath=bs(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=bs(e,r+265,32),this.gname=bs(e,r+297,32),this.devmaj=to(e,r+329,8),this.devmin=to(e,r+337,8),e[r+475]!==0){let s=bs(e,r+345,155);this.path=s+"/"+this.path}else{let s=bs(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=Ov(e,r+476,12),this.ctime=Ov(e,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=e[s];for(let s=r+156;s<r+512;s++)o+=e[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[Rv](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=aW(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=Es(e,r,100,o)||this.needPax,this.needPax=ro(e,r+100,8,this.mode)||this.needPax,this.needPax=ro(e,r+108,8,this.uid)||this.needPax,this.needPax=ro(e,r+116,8,this.gid)||this.needPax,this.needPax=ro(e,r+124,12,this.size)||this.needPax,this.needPax=Nv(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[Lr].charCodeAt(0),this.needPax=Es(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=Es(e,r+265,32,this.uname)||this.needPax,this.needPax=Es(e,r+297,32,this.gname)||this.needPax,this.needPax=ro(e,r+329,8,this.devmaj)||this.needPax,this.needPax=ro(e,r+337,8,this.devmin)||this.needPax,this.needPax=Es(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=Es(e,r+345,155,s)||this.needPax:(this.needPax=Es(e,r+345,130,s)||this.needPax,this.needPax=Nv(e,r+476,12,this.atime)||this.needPax,this.needPax=Nv(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,ro(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return Dv.name.get(this[Lr])||this[Lr]}get typeKey(){return this[Lr]}set type(e){Dv.code.has(e)?this[Lr]=Dv.code.get(e):this[Lr]=e}},aW=(t,e)=>{let r=100,n=t,i="",o,s=Aa.parse(t).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=Aa.dirname(n),n=Aa.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?o=[n.substr(0,r-1),i,!0]:(n=Aa.join(Aa.basename(i),n),i=Aa.dirname(i));while(i!==s&&!o);o||(o=[t.substr(0,r-1),"",!0])}return o},bs=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),Ov=(t,e,r)=>cW(to(t,e,r)),cW=t=>t===null?null:new Date(t*1e3),to=(t,e,r)=>t[e]&128?$S.parse(t.slice(e,e+r)):uW(t,e,r),lW=t=>isNaN(t)?null:t,uW=(t,e,r)=>lW(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),fW={12:8589934591,8:2097151},ro=(t,e,r,n)=>n===null?!1:n>fW[r]||n<0?($S.encode(n,t.slice(e,e+r)),!0):(dW(t,e,r,n),!1),dW=(t,e,r,n)=>t.write(pW(n,r),e,r,"ascii"),pW=(t,e)=>hW(Math.floor(t).toString(8),e),hW=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",Nv=(t,e,r,n)=>n===null?!1:ro(t,e,r,n.getTime()/1e3),mW=new Array(156).join("\0"),Es=(t,e,r,n)=>n===null?!1:(t.write(n+mW,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);US.exports=jS});var ld=k((dfe,BS)=>{"use strict";var gW=Ta(),vW=require("path"),cd=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new gW({path:("PaxHeader/"+vW.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};cd.parse=(t,e,r)=>new cd(yW(wW(t),e),r);var yW=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,wW=t=>t.replace(/\n$/,"").split(`
`).reduce(CW,Object.create(null)),CW=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let o=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};BS.exports=cd});var Da=k((pfe,HS)=>{HS.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var ud=k((hfe,VS)=>{"use strict";VS.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var Fv=k((mfe,WS)=>{"use strict";var fd=["|","<",">","?",":"],Lv=fd.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),bW=new Map(fd.map((t,e)=>[t,Lv[e]])),EW=new Map(Lv.map((t,e)=>[t,fd[e]]));WS.exports={encode:t=>fd.reduce((e,r)=>e.split(r).join(bW.get(r)),t),decode:t=>Lv.reduce((e,r)=>e.split(r).join(EW.get(r)),t)}});var Mv=k((gfe,zS)=>{var{isAbsolute:_W,parse:GS}=require("path").win32;zS.exports=t=>{let e="",r=GS(t);for(;_W(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=GS(t)}return[e,t]}});var YS=k((vfe,KS)=>{"use strict";KS.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var Gv=k((Cfe,ux)=>{"use strict";var JS=Pa(),QS=ld(),XS=Ta(),Wn=require("fs"),ZS=require("path"),Gn=Ia(),SW=Da(),ex=(t,e)=>e?(t=Gn(t).replace(/^\.(\/|$)/,""),SW(e)+"/"+t):Gn(t),xW=16*1024*1024,tx=Symbol("process"),rx=Symbol("file"),nx=Symbol("directory"),qv=Symbol("symlink"),ix=Symbol("hardlink"),xl=Symbol("header"),dd=Symbol("read"),$v=Symbol("lstat"),pd=Symbol("onlstat"),jv=Symbol("onread"),Uv=Symbol("onreadlink"),Bv=Symbol("openfile"),Hv=Symbol("onopenfile"),no=Symbol("close"),hd=Symbol("mode"),Vv=Symbol("awaitDrain"),Wv=Symbol("ondrain"),zn=Symbol("prefix"),ox=Symbol("hadError"),sx=ud(),PW=Fv(),ax=Mv(),cx=YS(),md=sx(class extends JS{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=Gn(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||xW,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Gn(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Gn(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=ax(this.path);i&&(this.path=o,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=PW.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Gn(r.absolute||ZS.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[pd](this.statCache.get(this.absolute)):this[$v]()}emit(e,...r){return e==="error"&&(this[ox]=!0),super.emit(e,...r)}[$v](){Wn.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[pd](r)})}[pd](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=IW(e),this.emit("stat",e),this[tx]()}[tx](){switch(this.type){case"File":return this[rx]();case"Directory":return this[nx]();case"SymbolicLink":return this[qv]();default:return this.end()}}[hd](e){return cx(e,this.type==="Directory",this.portable)}[zn](e){return ex(e,this.prefix)}[xl](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new XS({path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,mode:this[hd](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new QS({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[nx](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[xl](),this.end()}[qv](){Wn.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[Uv](r)})}[Uv](e){this.linkpath=Gn(e),this[xl](),this.end()}[ix](e){this.type="Link",this.linkpath=Gn(ZS.relative(this.cwd,e)),this.stat.size=0,this[xl](),this.end()}[rx](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[ix](r)}this.linkCache.set(e,this.absolute)}if(this[xl](),this.stat.size===0)return this.end();this[Bv]()}[Bv](){Wn.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[Hv](r)})}[Hv](e){if(this.fd=e,this[ox])return this[no]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[dd]()}[dd](){let{fd:e,buf:r,offset:n,length:i,pos:o}=this;Wn.read(e,r,n,i,o,(s,a)=>{if(s)return this[no](()=>this.emit("error",s));this[jv](a)})}[no](e){Wn.close(this.fd,e)}[jv](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[no](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[no](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[Wv]():this[Vv](()=>this[Wv]())}[Vv](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[Wv](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[no](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[dd]()}}),lx=class extends md{[$v](){this[pd](Wn.lstatSync(this.absolute))}[qv](){this[Uv](Wn.readlinkSync(this.absolute))}[Bv](){this[Hv](Wn.openSync(this.absolute,"r"))}[dd](){let e=!0;try{let{fd:r,buf:n,offset:i,length:o,pos:s}=this,a=Wn.readSync(r,n,i,o,s);this[jv](a),e=!1}finally{if(e)try{this[no](()=>{})}catch{}}}[Vv](e){e()}[no](e){Wn.closeSync(this.fd),e()}},kW=sx(class extends JS{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Gn(e.path),this.mode=this[hd](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Gn(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,o]=ax(this.path);i&&(this.path=o,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new XS({path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new QS({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[zn](this.path),linkpath:this.type==="Link"?this[zn](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[zn](e){return ex(e,this.prefix)}[hd](e){return cx(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});md.Sync=lx;md.Tar=kW;var IW=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";ux.exports=md});var _d=k((Efe,yx)=>{"use strict";var zv=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},AW=Pa(),TW=kv(),DW=sd(),Kv=Gv(),RW=Kv.Sync,OW=Kv.Tar,NW=yl(),fx=Buffer.alloc(1024),gd=Symbol("onStat"),vd=Symbol("ended"),Kn=Symbol("queue"),Ra=Symbol("current"),_s=Symbol("process"),yd=Symbol("processing"),dx=Symbol("processJob"),Yn=Symbol("jobs"),Yv=Symbol("jobDone"),wd=Symbol("addFSEntry"),px=Symbol("addTarEntry"),Jv=Symbol("stat"),Qv=Symbol("readdir"),Cd=Symbol("onreaddir"),bd=Symbol("pipe"),hx=Symbol("entry"),Xv=Symbol("entryOpt"),Zv=Symbol("writeEntryClass"),mx=Symbol("write"),ey=Symbol("ondrain"),Ed=require("fs"),gx=require("path"),LW=ud(),ty=Ia(),ry=LW(class extends AW{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=ty(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Zv]=Kv,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new TW.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[ey]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[ey]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Kn]=new NW,this[Yn]=0,this.jobs=+e.jobs||4,this[yd]=!1,this[vd]=!1}[mx](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[vd]=!0,this[_s](),this}write(e){if(this[vd])throw new Error("write after end");return e instanceof DW?this[px](e):this[wd](e),this.flowing}[px](e){let r=ty(gx.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new zv(e.path,r,!1);n.entry=new OW(e,this[Xv](n)),n.entry.on("end",i=>this[Yv](n)),this[Yn]+=1,this[Kn].push(n)}this[_s]()}[wd](e){let r=ty(gx.resolve(this.cwd,e));this[Kn].push(new zv(e,r)),this[_s]()}[Jv](e){e.pending=!0,this[Yn]+=1;let r=this.follow?"stat":"lstat";Ed[r](e.absolute,(n,i)=>{e.pending=!1,this[Yn]-=1,n?this.emit("error",n):this[gd](e,i)})}[gd](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[_s]()}[Qv](e){e.pending=!0,this[Yn]+=1,Ed.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Yn]-=1,r)return this.emit("error",r);this[Cd](e,n)})}[Cd](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[_s]()}[_s](){if(!this[yd]){this[yd]=!0;for(let e=this[Kn].head;e!==null&&this[Yn]<this.jobs;e=e.next)if(this[dx](e.value),e.value.ignore){let r=e.next;this[Kn].removeNode(e),e.next=r}this[yd]=!1,this[vd]&&!this[Kn].length&&this[Yn]===0&&(this.zip?this.zip.end(fx):(super.write(fx),super.end()))}}get[Ra](){return this[Kn]&&this[Kn].head&&this[Kn].head.value}[Yv](e){this[Kn].shift(),this[Yn]-=1,this[_s]()}[dx](e){if(!e.pending){if(e.entry){e===this[Ra]&&!e.piped&&this[bd](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[gd](e,this.statCache.get(e.absolute)):this[Jv](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[Cd](e,this.readdirCache.get(e.absolute)):this[Qv](e),!e.readdir))){if(e.entry=this[hx](e),!e.entry){e.ignore=!0;return}e===this[Ra]&&!e.piped&&this[bd](e)}}}[Xv](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[hx](e){this[Yn]+=1;try{return new this[Zv](e.path,this[Xv](e)).on("end",()=>this[Yv](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[ey](){this[Ra]&&this[Ra].entry&&this[Ra].entry.resume()}[bd](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[wd](s+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),vx=class extends ry{constructor(e){super(e);this[Zv]=RW}pause(){}resume(){}[Jv](e){let r=this.follow?"statSync":"lstatSync";this[gd](e,Ed[r](e.absolute))}[Qv](e,r){this[Cd](e,Ed.readdirSync(e.absolute))}[bd](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let o=e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[wd](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[mx](i)})}};ry.Sync=vx;yx.exports=ry});var ja=k(kl=>{"use strict";var FW=Pa(),MW=require("events").EventEmitter,wr=require("fs"),ny=wr.writev;if(!ny){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;ny=(r,n,i,o)=>{let s=(c,l)=>o(c,l,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,i,a)}}var Oa=Symbol("_autoClose"),bn=Symbol("_close"),Pl=Symbol("_ended"),Qe=Symbol("_fd"),wx=Symbol("_finished"),io=Symbol("_flags"),iy=Symbol("_flush"),oy=Symbol("_handleChunk"),sy=Symbol("_makeBuf"),Sd=Symbol("_mode"),xd=Symbol("_needDrain"),Na=Symbol("_onerror"),La=Symbol("_onopen"),ay=Symbol("_onread"),Fa=Symbol("_onwrite"),oo=Symbol("_open"),bi=Symbol("_path"),Ss=Symbol("_pos"),Jn=Symbol("_queue"),Ma=Symbol("_read"),Cx=Symbol("_readSize"),so=Symbol("_reading"),Pd=Symbol("_remain"),bx=Symbol("_size"),kd=Symbol("_write"),qa=Symbol("_writing"),Id=Symbol("_defaultFlag"),$a=Symbol("_errored"),cy=class extends FW{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[$a]=!1,this[Qe]=typeof r.fd=="number"?r.fd:null,this[bi]=e,this[Cx]=r.readSize||16*1024*1024,this[so]=!1,this[bx]=typeof r.size=="number"?r.size:1/0,this[Pd]=this[bx],this[Oa]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Qe]=="number"?this[Ma]():this[oo]()}get fd(){return this[Qe]}get path(){return this[bi]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[oo](){wr.open(this[bi],"r",(e,r)=>this[La](e,r))}[La](e,r){e?this[Na](e):(this[Qe]=r,this.emit("open",r),this[Ma]())}[sy](){return Buffer.allocUnsafe(Math.min(this[Cx],this[Pd]))}[Ma](){if(!this[so]){this[so]=!0;let e=this[sy]();if(e.length===0)return process.nextTick(()=>this[ay](null,0,e));wr.read(this[Qe],e,0,e.length,null,(r,n,i)=>this[ay](r,n,i))}}[ay](e,r,n){this[so]=!1,e?this[Na](e):this[oy](r,n)&&this[Ma]()}[bn](){if(this[Oa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Na](e){this[so]=!0,this[bn](),this.emit("error",e)}[oy](e,r){let n=!1;return this[Pd]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[Pd]<=0)&&(n=!1,this[bn](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Qe]=="number"&&this[Ma]();break;case"error":return this[$a]?void 0:(this[$a]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Ex=class extends cy{[oo](){let e=!0;try{this[La](null,wr.openSync(this[bi],"r")),e=!1}finally{e&&this[bn]()}}[Ma](){let e=!0;try{if(!this[so]){this[so]=!0;do{let r=this[sy](),n=r.length===0?0:wr.readSync(this[Qe],r,0,r.length,null);if(!this[oy](n,r))break}while(!0);this[so]=!1}e=!1}finally{e&&this[bn]()}}[bn](){if(this[Oa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.closeSync(e),this.emit("close")}}},ly=class extends MW{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[$a]=!1,this[qa]=!1,this[Pl]=!1,this[xd]=!1,this[Jn]=[],this[bi]=e,this[Qe]=typeof r.fd=="number"?r.fd:null,this[Sd]=r.mode===void 0?438:r.mode,this[Ss]=typeof r.start=="number"?r.start:null,this[Oa]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[Ss]!==null?"r+":"w";this[Id]=r.flags===void 0,this[io]=this[Id]?n:r.flags,this[Qe]===null&&this[oo]()}emit(e,r){if(e==="error"){if(this[$a])return;this[$a]=!0}return super.emit(e,r)}get fd(){return this[Qe]}get path(){return this[bi]}[Na](e){this[bn](),this[qa]=!0,this.emit("error",e)}[oo](){wr.open(this[bi],this[io],this[Sd],(e,r)=>this[La](e,r))}[La](e,r){this[Id]&&this[io]==="r+"&&e&&e.code==="ENOENT"?(this[io]="w",this[oo]()):e?this[Na](e):(this[Qe]=r,this.emit("open",r),this[iy]())}end(e,r){return e&&this.write(e,r),this[Pl]=!0,!this[qa]&&!this[Jn].length&&typeof this[Qe]=="number"&&this[Fa](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Pl]?(this.emit("error",new Error("write() after end()")),!1):this[Qe]===null||this[qa]||this[Jn].length?(this[Jn].push(e),this[xd]=!0,!1):(this[qa]=!0,this[kd](e),!0)}[kd](e){wr.write(this[Qe],e,0,e.length,this[Ss],(r,n)=>this[Fa](r,n))}[Fa](e,r){e?this[Na](e):(this[Ss]!==null&&(this[Ss]+=r),this[Jn].length?this[iy]():(this[qa]=!1,this[Pl]&&!this[wx]?(this[wx]=!0,this[bn](),this.emit("finish")):this[xd]&&(this[xd]=!1,this.emit("drain"))))}[iy](){if(this[Jn].length===0)this[Pl]&&this[Fa](null,0);else if(this[Jn].length===1)this[kd](this[Jn].pop());else{let e=this[Jn];this[Jn]=[],ny(this[Qe],e,this[Ss],(r,n)=>this[Fa](r,n))}}[bn](){if(this[Oa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},_x=class extends ly{[oo](){let e;if(this[Id]&&this[io]==="r+")try{e=wr.openSync(this[bi],this[io],this[Sd])}catch(r){if(r.code==="ENOENT")return this[io]="w",this[oo]();throw r}else e=wr.openSync(this[bi],this[io],this[Sd]);this[La](null,e)}[bn](){if(this[Oa]&&typeof this[Qe]=="number"){let e=this[Qe];this[Qe]=null,wr.closeSync(e),this.emit("close")}}[kd](e){let r=!0;try{this[Fa](null,wr.writeSync(this[Qe],e,0,e.length,this[Ss])),r=!1}finally{if(r)try{this[bn]()}catch{}}}};kl.ReadStream=cy;kl.ReadStreamSync=Ex;kl.WriteStream=ly;kl.WriteStreamSync=_x});var Ld=k((xfe,Tx)=>{"use strict";var qW=ud(),$W=Ta(),jW=require("events"),UW=yl(),BW=1024*1024,HW=sd(),Sx=ld(),VW=kv(),uy=Buffer.from([31,139]),Yr=Symbol("state"),xs=Symbol("writeEntry"),Ei=Symbol("readEntry"),fy=Symbol("nextEntry"),xx=Symbol("processEntry"),Jr=Symbol("extendedHeader"),Il=Symbol("globalExtendedHeader"),ao=Symbol("meta"),Px=Symbol("emitMeta"),it=Symbol("buffer"),_i=Symbol("queue"),Ps=Symbol("ended"),kx=Symbol("emittedEnd"),ks=Symbol("emit"),Cr=Symbol("unzip"),Ad=Symbol("consumeChunk"),Td=Symbol("consumeChunkSub"),dy=Symbol("consumeBody"),Ix=Symbol("consumeMeta"),Ax=Symbol("consumeHeader"),Dd=Symbol("consuming"),py=Symbol("bufferConcat"),hy=Symbol("maybeEnd"),Al=Symbol("writing"),co=Symbol("aborted"),Rd=Symbol("onDone"),Is=Symbol("sawValidEntry"),Od=Symbol("sawNullBlock"),Nd=Symbol("sawEOF"),WW=t=>!0;Tx.exports=qW(class extends jW{constructor(e){e=e||{};super(e);this.file=e.file||"",this[Is]=null,this.on(Rd,r=>{(this[Yr]==="begin"||this[Is]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Rd,e.ondone):this.on(Rd,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||BW,this.filter=typeof e.filter=="function"?e.filter:WW,this.writable=!0,this.readable=!1,this[_i]=new UW,this[it]=null,this[Ei]=null,this[xs]=null,this[Yr]="begin",this[ao]="",this[Jr]=null,this[Il]=null,this[Ps]=!1,this[Cr]=null,this[co]=!1,this[Od]=!1,this[Nd]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Ax](e,r){this[Is]===null&&(this[Is]=!1);let n;try{n=new $W(e,r,this[Jr],this[Il])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Od]?(this[Nd]=!0,this[Yr]==="begin"&&(this[Yr]="header"),this[ks]("eof")):(this[Od]=!0,this[ks]("nullBlock"));else if(this[Od]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[xs]=new HW(n,this[Jr],this[Il]);if(!this[Is])if(o.remain){let s=()=>{o.invalid||(this[Is]=!0)};o.on("end",s)}else this[Is]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[ks]("ignoredEntry",o),this[Yr]="ignore",o.resume()):o.size>0&&(this[ao]="",o.on("data",s=>this[ao]+=s),this[Yr]="meta"):(this[Jr]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[ks]("ignoredEntry",o),this[Yr]=o.remain?"ignore":"header",o.resume()):(o.remain?this[Yr]="body":(this[Yr]="header",o.end()),this[Ei]?this[_i].push(o):(this[_i].push(o),this[fy]())))}}}[xx](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[Ei]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[fy]()),r=!1)):(this[Ei]=null,r=!1),r}[fy](){do;while(this[xx](this[_i].shift()));if(!this[_i].length){let e=this[Ei];!e||e.flowing||e.size===e.remain?this[Al]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[dy](e,r){let n=this[xs],i=n.blockRemain,o=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(o),n.blockRemain||(this[Yr]="header",this[xs]=null,n.end()),o.length}[Ix](e,r){let n=this[xs],i=this[dy](e,r);return this[xs]||this[Px](n),i}[ks](e,r,n){!this[_i].length&&!this[Ei]?this.emit(e,r,n):this[_i].push([e,r,n])}[Px](e){switch(this[ks]("meta",this[ao]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Jr]=Sx.parse(this[ao],this[Jr],!1);break;case"GlobalExtendedHeader":this[Il]=Sx.parse(this[ao],this[Il],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Jr]=this[Jr]||Object.create(null),this[Jr].path=this[ao].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Jr]=this[Jr]||Object.create(null),this[Jr].linkpath=this[ao].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[co]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[co])return;if(this[Cr]===null&&e){if(this[it]&&(e=Buffer.concat([this[it],e]),this[it]=null),e.length<uy.length)return this[it]=e,!0;for(let n=0;this[Cr]===null&&n<uy.length;n++)e[n]!==uy[n]&&(this[Cr]=!1);if(this[Cr]===null){let n=this[Ps];this[Ps]=!1,this[Cr]=new VW.Unzip,this[Cr].on("data",o=>this[Ad](o)),this[Cr].on("error",o=>this.abort(o)),this[Cr].on("end",o=>{this[Ps]=!0,this[Ad]()}),this[Al]=!0;let i=this[Cr][n?"end":"write"](e);return this[Al]=!1,i}}this[Al]=!0,this[Cr]?this[Cr].write(e):this[Ad](e),this[Al]=!1;let r=this[_i].length?!1:this[Ei]?this[Ei].flowing:!0;return!r&&!this[_i].length&&this[Ei].once("drain",n=>this.emit("drain")),r}[py](e){e&&!this[co]&&(this[it]=this[it]?Buffer.concat([this[it],e]):e)}[hy](){if(this[Ps]&&!this[kx]&&!this[co]&&!this[Dd]){this[kx]=!0;let e=this[xs];if(e&&e.blockRemain){let r=this[it]?this[it].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[it]&&e.write(this[it]),e.end()}this[ks](Rd)}}[Ad](e){if(this[Dd])this[py](e);else if(!e&&!this[it])this[hy]();else{if(this[Dd]=!0,this[it]){this[py](e);let r=this[it];this[it]=null,this[Td](r)}else this[Td](e);for(;this[it]&&this[it].length>=512&&!this[co]&&!this[Nd];){let r=this[it];this[it]=null,this[Td](r)}this[Dd]=!1}(!this[it]||this[Ps])&&this[hy]()}[Td](e){let r=0,n=e.length;for(;r+512<=n&&!this[co]&&!this[Nd];)switch(this[Yr]){case"begin":case"header":this[Ax](e,r),r+=512;break;case"ignore":case"body":r+=this[dy](e,r);break;case"meta":r+=this[Ix](e,r);break;default:throw new Error("invalid state: "+this[Yr])}r<n&&(this[it]?this[it]=Buffer.concat([e.slice(r),this[it]]):this[it]=e.slice(r))}end(e){this[co]||(this[Cr]?this[Cr].end(e):(this[Ps]=!0,this.write(e)))}})});var Fd=k((Pfe,Nx)=>{"use strict";var GW=xa(),Dx=Ld(),Ua=require("fs"),zW=ja(),Rx=require("path"),my=Da();Nx.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=GW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&YW(n,e),n.noResume||KW(n),n.file&&n.sync?JW(n):n.file?QW(n,r):Ox(n)};var KW=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},YW=(t,e)=>{let r=new Map(e.map(o=>[my(o),!0])),n=t.filter,i=(o,s)=>{let a=s||Rx.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(Rx.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(my(o)):o=>i(my(o))},JW=t=>{let e=Ox(t),r=t.file,n=!0,i;try{let o=Ua.statSync(r),s=t.maxReadSize||16*1024*1024;if(o.size<s)e.end(Ua.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=Ua.openSync(r,"r");a<o.size;){let l=Ua.readSync(i,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}n=!1}finally{if(n&&i)try{Ua.closeSync(i)}catch{}}},QW=(t,e)=>{let r=new Dx(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),Ua.stat(i,(c,l)=>{if(c)a(c);else{let u=new zW.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},Ox=t=>new Dx(t)});var jx=k((kfe,$x)=>{"use strict";var XW=xa(),Md=_d(),Lx=ja(),Fx=Fd(),Mx=require("path");$x.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=XW(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?ZW(n,e):n.file?eG(n,e,r):n.sync?tG(n,e):rG(n,e)};var ZW=(t,e)=>{let r=new Md.Sync(t),n=new Lx.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),qx(r,e)},eG=(t,e,r)=>{let n=new Md(t),i=new Lx.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return gy(n,e),r?o.then(r,r):o},qx=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Fx({file:Mx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},gy=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Fx({file:Mx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>gy(t,e));t.add(r)}t.end()},tG=(t,e)=>{let r=new Md.Sync(t);return qx(r,e),r},rG=(t,e)=>{let r=new Md(t);return gy(r,e),r}});var vy=k((Ife,zx)=>{"use strict";var nG=xa(),Ux=_d(),Fr=require("fs"),Bx=ja(),Hx=Fd(),Vx=require("path"),Wx=Ta();zx.exports=(t,e,r)=>{let n=nG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?iG(n,e):sG(n,e,r)};var iG=(t,e)=>{let r=new Ux.Sync(t),n=!0,i,o;try{try{i=Fr.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=Fr.openSync(t.file,"w+");else throw c}let s=Fr.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let u=0,f=0;u<512;u+=f){if(f=Fr.readSync(i,a,u,a.length-u,o+u),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new Wx(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(o+l+512>s.size)break;o+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,oG(t,r,o,i,e)}finally{if(n)try{Fr.closeSync(i)}catch{}}},oG=(t,e,r,n,i)=>{let o=new Bx.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),aG(e,i)},sG=(t,e,r)=>{e=Array.from(e);let n=new Ux(t),i=(s,a,c)=>{let l=(h,m)=>{h?Fr.close(s,g=>c(h)):c(null,m)},u=0;if(a===0)return l(null,0);let f=0,d=Buffer.alloc(512),p=(h,m)=>{if(h)return l(h);if(f+=m,f<512&&m)return Fr.read(s,d,f,d.length-f,u+f,p);if(u===0&&d[0]===31&&d[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let g=new Wx(d);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),f=0,Fr.read(s,d,0,512,u,p)};Fr.read(s,d,0,512,u,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",Fr.open(t.file,c,l);if(u)return a(u);Fr.fstat(f,(d,p)=>{if(d)return Fr.close(f,()=>a(d));i(f,p.size,(h,m)=>{if(h)return a(h);let g=new Bx.WriteStream(t.file,{fd:f,start:m});n.pipe(g),g.on("error",a),g.on("close",s),Gx(n,e)})})};Fr.open(t.file,c,l)});return r?o.then(r,r):o},aG=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Hx({file:Vx.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Gx=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Hx({file:Vx.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Gx(t,e));t.add(r)}t.end()}});var Yx=k((Afe,Kx)=>{"use strict";var cG=xa(),lG=vy();Kx.exports=(t,e,r)=>{let n=cG(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),uG(n),lG(n,e,r)};var uG=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var Xx=k((Tfe,Qx)=>{var{promisify:Jx}=require("util"),lo=require("fs"),fG=t=>{if(!t)t={mode:511,fs:lo};else if(typeof t=="object")t=W({mode:511,fs:lo},t);else if(typeof t=="number")t={mode:t,fs:lo};else if(typeof t=="string")t={mode:parseInt(t,8),fs:lo};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||lo.mkdir,t.mkdirAsync=Jx(t.mkdir),t.stat=t.stat||t.fs.stat||lo.stat,t.statAsync=Jx(t.stat),t.statSync=t.statSync||t.fs.statSync||lo.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||lo.mkdirSync,t};Qx.exports=fG});var eP=k((Dfe,Zx)=>{var dG=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:pG,parse:hG}=require("path"),mG=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=pG(t),dG==="win32"){let e=/[*|"<>?:]/,{root:r}=hG(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};Zx.exports=mG});var oP=k((Rfe,iP)=>{var{dirname:tP}=require("path"),rP=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?rP(t,tP(e),e):void 0),nP=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?nP(t,tP(e),e):void 0}};iP.exports={findMade:rP,findMadeSync:nP}});var Cy=k((Ofe,aP)=>{var{dirname:sP}=require("path"),yy=(t,e,r)=>{e.recursive=!1;let n=sP(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return yy(n,e).then(o=>yy(t,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},wy=(t,e,r)=>{let n=sP(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return wy(t,e,wy(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};aP.exports={mkdirpManual:yy,mkdirpManualSync:wy}});var uP=k((Nfe,lP)=>{var{dirname:cP}=require("path"),{findMade:gG,findMadeSync:vG}=oP(),{mkdirpManual:yG,mkdirpManualSync:wG}=Cy(),CG=(t,e)=>(e.recursive=!0,cP(t)===t?e.mkdirAsync(t,e):gG(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return yG(t,e);throw i}))),bG=(t,e)=>{if(e.recursive=!0,cP(t)===t)return e.mkdirSync(t,e);let n=vG(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return wG(t,e);throw i}};lP.exports={mkdirpNative:CG,mkdirpNativeSync:bG}});var hP=k((Lfe,pP)=>{var fP=require("fs"),EG=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,by=EG.replace(/^v/,"").split("."),dP=+by[0]>10||+by[0]==10&&+by[1]>=12,_G=dP?t=>t.mkdir===fP.mkdir:()=>!1,SG=dP?t=>t.mkdirSync===fP.mkdirSync:()=>!1;pP.exports={useNative:_G,useNativeSync:SG}});var CP=k((Ffe,wP)=>{var Ba=Xx(),Ha=eP(),{mkdirpNative:mP,mkdirpNativeSync:gP}=uP(),{mkdirpManual:vP,mkdirpManualSync:yP}=Cy(),{useNative:xG,useNativeSync:PG}=hP(),Va=(t,e)=>(t=Ha(t),e=Ba(e),xG(e)?mP(t,e):vP(t,e)),kG=(t,e)=>(t=Ha(t),e=Ba(e),PG(e)?gP(t,e):yP(t,e));Va.sync=kG;Va.native=(t,e)=>mP(Ha(t),Ba(e));Va.manual=(t,e)=>vP(Ha(t),Ba(e));Va.nativeSync=(t,e)=>gP(Ha(t),Ba(e));Va.manualSync=(t,e)=>yP(Ha(t),Ba(e));wP.exports=Va});var kP=k((Mfe,PP)=>{"use strict";var Qr=require("fs"),As=require("path"),IG=Qr.lchown?"lchown":"chown",AG=Qr.lchownSync?"lchownSync":"chownSync",bP=Qr.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),EP=(t,e,r)=>{try{return Qr[AG](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},TG=(t,e,r)=>{try{return Qr.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},DG=bP?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Qr.chown(t,e,r,n)}:(t,e,r,n)=>n,Ey=bP?(t,e,r)=>{try{return EP(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;TG(t,e,r)}}:(t,e,r)=>EP(t,e,r),RG=process.version,_P=(t,e,r)=>Qr.readdir(t,e,r),OG=(t,e)=>Qr.readdirSync(t,e);/^v4\./.test(RG)&&(_P=(t,e,r)=>Qr.readdir(t,r));var qd=(t,e,r,n)=>{Qr[IG](t,e,r,DG(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},SP=(t,e,r,n,i)=>{if(typeof e=="string")return Qr.lstat(As.resolve(t,e),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=e,SP(t,s,r,n,i)});if(e.isDirectory())_y(As.resolve(t,e.name),r,n,o=>{if(o)return i(o);let s=As.resolve(t,e.name);qd(s,r,n,i)});else{let o=As.resolve(t,e.name);qd(o,r,n,i)}},_y=(t,e,r,n)=>{_P(t,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return qd(t,e,r,n);let s=o.length,a=null,c=l=>{if(!a){if(l)return n(a=l);if(--s==0)return qd(t,e,r,n)}};o.forEach(l=>SP(t,l,e,r,c))})},NG=(t,e,r,n)=>{if(typeof e=="string")try{let i=Qr.lstatSync(As.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&xP(As.resolve(t,e.name),r,n),Ey(As.resolve(t,e.name),r,n)},xP=(t,e,r)=>{let n;try{n=OG(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Ey(t,e,r);throw i}return n&&n.length&&n.forEach(i=>NG(t,i,e,r)),Ey(t,e,r)};PP.exports=_y;_y.sync=xP});var DP=k((qfe,Py)=>{"use strict";var IP=CP(),Xr=require("fs"),$d=require("path"),AP=kP(),En=Ia(),Sy=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},xy=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},jd=(t,e)=>t.get(En(e)),Tl=(t,e,r)=>t.set(En(e),r),LG=(t,e)=>{Xr.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new xy(t,r&&r.code||"ENOTDIR")),e(r)})};Py.exports=(t,e,r)=>{t=En(t);let n=e.umask,i=e.mode|448,o=(i&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,d=En(e.cwd),p=(g,v)=>{g?r(g):(Tl(f,t,!0),v&&c?AP(v,s,a,w=>p(w)):o?Xr.chmod(t,i,r):r())};if(f&&jd(f,t)===!0)return p();if(t===d)return LG(t,p);if(l)return IP(t,{mode:i}).then(g=>p(null,g),p);let m=En($d.relative(d,t)).split("/");Ud(d,m,i,f,u,d,null,p)};var Ud=(t,e,r,n,i,o,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=En($d.resolve(t+"/"+c));if(jd(n,l))return Ud(l,e,r,n,i,o,s,a);Xr.mkdir(l,r,TP(l,e,r,n,i,o,s,a))},TP=(t,e,r,n,i,o,s,a)=>c=>{c?Xr.lstat(t,(l,u)=>{if(l)l.path=l.path&&En(l.path),a(l);else if(u.isDirectory())Ud(t,e,r,n,i,o,s,a);else if(i)Xr.unlink(t,f=>{if(f)return a(f);Xr.mkdir(t,r,TP(t,e,r,n,i,o,s,a))});else{if(u.isSymbolicLink())return a(new Sy(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,Ud(t,e,r,n,i,o,s,a))},FG=t=>{let e=!1,r="ENOTDIR";try{e=Xr.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new xy(t,r)}};Py.exports.sync=(t,e)=>{t=En(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,o=e.uid,s=e.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=En(e.cwd),d=g=>{Tl(u,t,!0),g&&a&&AP.sync(g,o,s),i&&Xr.chmodSync(t,n)};if(u&&jd(u,t)===!0)return d();if(t===f)return FG(f),d();if(c)return d(IP.sync(t,n));let h=En($d.relative(f,t)).split("/"),m=null;for(let g=h.shift(),v=f;g&&(v+="/"+g);g=h.shift())if(v=En($d.resolve(v)),!jd(u,v))try{Xr.mkdirSync(v,n),m=m||v,Tl(u,v,!0)}catch{let b=Xr.lstatSync(v);if(b.isDirectory()){Tl(u,v,!0);continue}else if(l){Xr.unlinkSync(v),Xr.mkdirSync(v,n),m=m||v,Tl(u,v,!0);continue}else if(b.isSymbolicLink())return new Sy(v,v+"/"+h.join("/"))}return d(m)}});var Iy=k(($fe,RP)=>{var ky=Object.create(null),{hasOwnProperty:MG}=Object.prototype;RP.exports=t=>(MG.call(ky,t)||(ky[t]=t.normalize("NFKD")),ky[t])});var FP=k((jfe,LP)=>{var OP=require("assert"),qG=Iy(),$G=Da(),{join:NP}=require("path"),jG=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,UG=jG==="win32";LP.exports=()=>{let t=new Map,e=new Map,r=l=>l.split("/").slice(0,-1).reduce((f,d)=>(f.length&&(d=NP(f[f.length-1],d)),f.push(d||"/"),f),[]),n=new Set,i=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},o=l=>{let{paths:u,dirs:f}=i(l);return u.every(d=>d[0]===l)&&f.every(d=>d[0]instanceof Set&&d[0].has(l))},s=l=>n.has(l)||!o(l)?!1:(n.add(l),l(()=>a(l)),!0),a=l=>{if(!n.has(l))return!1;let{paths:u,dirs:f}=e.get(l),d=new Set;return u.forEach(p=>{let h=t.get(p);OP.equal(h[0],l),h.length===1?t.delete(p):(h.shift(),typeof h[0]=="function"?d.add(h[0]):h[0].forEach(m=>d.add(m)))}),f.forEach(p=>{let h=t.get(p);OP(h[0]instanceof Set),h[0].size===1&&h.length===1?t.delete(p):h[0].size===1?(h.shift(),d.add(h[0])):h[0].delete(l)}),n.delete(l),d.forEach(p=>s(p)),!0};return{check:o,reserve:(l,u)=>{l=UG?["win32 parallelization disabled"]:l.map(d=>qG($G(NP(d))).toLowerCase());let f=new Set(l.map(d=>r(d)).reduce((d,p)=>d.concat(p)));return e.set(u,{dirs:f,paths:l}),l.forEach(d=>{let p=t.get(d);p?p.push(u):t.set(d,[u])}),f.forEach(d=>{let p=t.get(d);p?p[p.length-1]instanceof Set?p[p.length-1].add(u):p.push(new Set([u])):t.set(d,[new Set([u])])}),s(u)}}}});var $P=k((Ufe,qP)=>{var BG=process.env.__FAKE_PLATFORM__||process.platform,HG=BG==="win32",VG=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:WG,O_TRUNC:GG,O_WRONLY:zG,UV_FS_O_FILEMAP:MP=0}=VG.constants,KG=HG&&!!MP,YG=512*1024,JG=MP|GG|WG|zG;qP.exports=KG?t=>t<YG?JG:"w":()=>"w"});var Fy=k((Bfe,ek)=>{"use strict";var QG=require("assert"),XG=Ld(),Ve=require("fs"),ZG=ja(),Si=require("path"),jP=DP(),UP=Fv(),ez=FP(),tz=Mv(),Mr=Ia(),rz=Da(),nz=Iy(),BP=Symbol("onEntry"),Ay=Symbol("checkFs"),HP=Symbol("checkFs2"),Bd=Symbol("pruneCache"),Ty=Symbol("isReusable"),Zr=Symbol("makeFs"),Dy=Symbol("file"),Ry=Symbol("directory"),Hd=Symbol("link"),VP=Symbol("symlink"),WP=Symbol("hardlink"),GP=Symbol("unsupported"),zP=Symbol("checkPath"),uo=Symbol("mkdir"),nr=Symbol("onError"),Vd=Symbol("pending"),KP=Symbol("pend"),Wa=Symbol("unpend"),Oy=Symbol("ended"),Ny=Symbol("maybeClose"),Ly=Symbol("skip"),Dl=Symbol("doChown"),Rl=Symbol("uid"),Ol=Symbol("gid"),Nl=Symbol("checkedCwd"),YP=require("crypto"),JP=$P(),iz=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,Ll=iz==="win32",oz=(t,e)=>{if(!Ll)return Ve.unlink(t,e);let r=t+".DELETE."+YP.randomBytes(16).toString("hex");Ve.rename(t,r,n=>{if(n)return e(n);Ve.unlink(r,e)})},sz=t=>{if(!Ll)return Ve.unlinkSync(t);let e=t+".DELETE."+YP.randomBytes(16).toString("hex");Ve.renameSync(t,e),Ve.unlinkSync(e)},QP=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,XP=t=>nz(rz(Mr(t))).toLowerCase(),az=(t,e)=>{e=XP(e);for(let r of t.keys()){let n=XP(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},cz=t=>{for(let e of t.keys())t.delete(e)},Wd=class extends XG{constructor(e){e||(e={}),e.ondone=r=>{this[Oy]=!0,this[Ny]()};super(e);if(this[Nl]=!1,this.reservations=ez(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Vd]=0,this[Oy]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||Ll,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Mr(Si.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[BP](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Ny](){this[Oy]&&this[Vd]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[zP](e){if(this.strip){let r=Mr(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=Mr(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=Mr(e.path),n=r.split("/");if(n.includes("..")||Ll&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,o]=tz(r);i&&(e.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(Si.isAbsolute(e.path)?e.absolute=Mr(Si.resolve(e.path)):e.absolute=Mr(Si.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Mr(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Si.win32.parse(e.absolute);e.absolute=r+UP.encode(e.absolute.substr(r.length));let{root:n}=Si.win32.parse(e.path);e.path=n+UP.encode(e.path.substr(n.length))}return!0}[BP](e){if(!this[zP](e))return e.resume();switch(QG.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Ay](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[GP](e)}}[nr](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Wa](),r.resume())}[uo](e,r,n){jP(Mr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[Dl](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[Rl](e){return QP(this.uid,e.uid,this.processUid)}[Ol](e){return QP(this.gid,e.gid,this.processGid)}[Dy](e,r){let n=e.mode&4095||this.fmode,i=new ZG.WriteStream(e.absolute,{flags:JP(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&Ve.close(i.fd,()=>{}),i.write=()=>!0,this[nr](c,e),r()});let o=1,s=c=>{if(c){i.fd&&Ve.close(i.fd,()=>{}),this[nr](c,e),r();return}--o==0&&Ve.close(i.fd,l=>{l?this[nr](l,e):this[Wa](),r()})};i.on("finish",c=>{let l=e.absolute,u=i.fd;if(e.mtime&&!this.noMtime){o++;let f=e.atime||new Date,d=e.mtime;Ve.futimes(u,f,d,p=>p?Ve.utimes(l,f,d,h=>s(h&&p)):s())}if(this[Dl](e)){o++;let f=this[Rl](e),d=this[Ol](e);Ve.fchown(u,f,d,p=>p?Ve.chown(l,f,d,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[nr](c,e),r()}),e.pipe(a)),a.pipe(i)}[Ry](e,r){let n=e.mode&4095||this.dmode;this[uo](e.absolute,n,i=>{if(i){this[nr](i,e),r();return}let o=1,s=a=>{--o==0&&(r(),this[Wa](),e.resume())};e.mtime&&!this.noMtime&&(o++,Ve.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[Dl](e)&&(o++,Ve.chown(e.absolute,this[Rl](e),this[Ol](e),s)),s()})}[GP](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[VP](e,r){this[Hd](e,e.linkpath,"symlink",r)}[WP](e,r){let n=Mr(Si.resolve(this.cwd,e.linkpath));this[Hd](e,n,"link",r)}[KP](){this[Vd]++}[Wa](){this[Vd]--,this[Ny]()}[Ly](e){this[Wa](),e.resume()}[Ty](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!Ll}[Ay](e){this[KP]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[HP](e,n))}[Bd](e){e.type==="SymbolicLink"?cz(this.dirCache):e.type!=="Directory"&&az(this.dirCache,e.absolute)}[HP](e,r){this[Bd](e);let n=a=>{this[Bd](e),r(a)},i=()=>{this[uo](this.cwd,this.dmode,a=>{if(a){this[nr](a,e),n();return}this[Nl]=!0,o()})},o=()=>{if(e.absolute!==this.cwd){let a=Mr(Si.dirname(e.absolute));if(a!==this.cwd)return this[uo](a,this.dmode,c=>{if(c){this[nr](c,e),n();return}s()})}s()},s=()=>{Ve.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[Ly](e),n();return}if(a||this[Ty](e,c))return this[Zr](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[Zr](f,e,n);return l?Ve.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return Ve.rmdir(e.absolute,l=>this[Zr](l,e,n))}if(e.absolute===this.cwd)return this[Zr](null,e,n);oz(e.absolute,l=>this[Zr](l,e,n))})};this[Nl]?o():i()}[Zr](e,r,n){if(e){this[nr](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[Dy](r,n);case"Link":return this[WP](r,n);case"SymbolicLink":return this[VP](r,n);case"Directory":case"GNUDumpDir":return this[Ry](r,n)}}[Hd](e,r,n,i){Ve[n](r,e.absolute,o=>{o?this[nr](o,e):(this[Wa](),e.resume()),i()})}},Gd=t=>{try{return[null,t()]}catch(e){return[e,null]}},ZP=class extends Wd{[Zr](e,r){return super[Zr](e,r,()=>{})}[Ay](e){if(this[Bd](e),!this[Nl]){let o=this[uo](this.cwd,this.dmode);if(o)return this[nr](o,e);this[Nl]=!0}if(e.absolute!==this.cwd){let o=Mr(Si.dirname(e.absolute));if(o!==this.cwd){let s=this[uo](o,this.dmode);if(s)return this[nr](s,e)}}let[r,n]=Gd(()=>Ve.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[Ly](e);if(r||this[Ty](e,n))return this[Zr](null,e);if(n.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=s?Gd(()=>{Ve.chmodSync(e.absolute,e.mode)}):[];return this[Zr](a,e)}let[o]=Gd(()=>Ve.rmdirSync(e.absolute));this[Zr](o,e)}let[i]=e.absolute===this.cwd?[]:Gd(()=>sz(e.absolute));this[Zr](i,e)}[Dy](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Ve.closeSync(o)}catch(l){c=l}(a||c)&&this[nr](a||c,e),r()},o;try{o=Ve.openSync(e.absolute,JP(e.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[nr](a,e)),e.pipe(s)),s.on("data",a=>{try{Ve.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{Ve.futimesSync(o,l,u)}catch(f){try{Ve.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[Dl](e)){let l=this[Rl](e),u=this[Ol](e);try{Ve.fchownSync(o,l,u)}catch(f){try{Ve.chownSync(e.absolute,l,u)}catch{c=c||f}}}i(c)})}[Ry](e,r){let n=e.mode&4095||this.dmode,i=this[uo](e.absolute,n);if(i){this[nr](i,e),r();return}if(e.mtime&&!this.noMtime)try{Ve.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[Dl](e))try{Ve.chownSync(e.absolute,this[Rl](e),this[Ol](e))}catch{}r(),e.resume()}[uo](e,r){try{return jP.sync(Mr(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[Hd](e,r,n,i){try{Ve[n+"Sync"](r,e.absolute),i(),e.resume()}catch(o){return this[nr](o,e)}}};Wd.Sync=ZP;ek.exports=Wd});var ok=k((Hfe,ik)=>{"use strict";var lz=xa(),zd=Fy(),tk=require("fs"),rk=ja(),nk=require("path"),My=Da();ik.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=lz(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&uz(n,e),n.file&&n.sync?fz(n):n.file?dz(n,r):n.sync?pz(n):hz(n)};var uz=(t,e)=>{let r=new Map(e.map(o=>[My(o),!0])),n=t.filter,i=(o,s)=>{let a=s||nk.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(nk.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(My(o)):o=>i(My(o))},fz=t=>{let e=new zd.Sync(t),r=t.file,n=tk.statSync(r),i=t.maxReadSize||16*1024*1024;new rk.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},dz=(t,e)=>{let r=new zd(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),tk.stat(i,(c,l)=>{if(c)a(c);else{let u=new rk.ReadStream(i,{readSize:n,size:l.size});u.on("error",a),u.pipe(r)}})});return e?o.then(e,e):o},pz=t=>new zd.Sync(t),hz=t=>new zd(t)});var Ga=k(Dt=>{"use strict";Dt.c=Dt.create=jx();Dt.r=Dt.replace=vy();Dt.t=Dt.list=Fd();Dt.u=Dt.update=Yx();Dt.x=Dt.extract=ok();Dt.Pack=_d();Dt.Unpack=Fy();Dt.Parse=Ld();Dt.ReadEntry=sd();Dt.WriteEntry=Gv();Dt.Header=Ta();Dt.Pax=ld();Dt.types=Tv()});var ak=k((Wfe,sk)=>{var za=1e3,Ka=za*60,Ya=Ka*60,Ts=Ya*24,mz=Ts*7,gz=Ts*365.25;sk.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return vz(t);if(r==="number"&&isFinite(t))return e.long?wz(t):yz(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function vz(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*gz;case"weeks":case"week":case"w":return r*mz;case"days":case"day":case"d":return r*Ts;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ya;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ka;case"seconds":case"second":case"secs":case"sec":case"s":return r*za;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function yz(t){var e=Math.abs(t);return e>=Ts?Math.round(t/Ts)+"d":e>=Ya?Math.round(t/Ya)+"h":e>=Ka?Math.round(t/Ka)+"m":e>=za?Math.round(t/za)+"s":t+"ms"}function wz(t){var e=Math.abs(t);return e>=Ts?Kd(t,e,Ts,"day"):e>=Ya?Kd(t,e,Ya,"hour"):e>=Ka?Kd(t,e,Ka,"minute"):e>=za?Kd(t,e,za,"second"):t+" ms"}function Kd(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var qy=k((Gfe,ck)=>{function Cz(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=ak(),r.destroy=l,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(u){let f,d=null;function p(...h){if(!p.enabled)return;let m=p,g=Number(new Date),v=g-(f||g);m.diff=v,m.prev=f,m.curr=g,f=g,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let w=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(C,S)=>{if(C==="%%")return"%";w++;let _=r.formatters[S];if(typeof _=="function"){let P=h[w];C=_.call(m,P),h.splice(w,1),w--}return C}),r.formatArgs.call(m,h),(m.log||r.log).apply(m,h)}return p.namespace=u,p.useColors=r.useColors(),p.color=r.selectColor(u),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d===null?r.enabled(u):d,set:h=>{d=h}}),typeof r.init=="function"&&r.init(p),p}function n(u,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+u);return d.log=this.log,d}function i(u){r.save(u),r.names=[],r.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),p=d.length;for(f=0;f<p;f++)!d[f]||(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ck.exports=Cz});var lk=k((qr,Yd)=>{qr.formatArgs=Ez;qr.save=_z;qr.load=Sz;qr.useColors=bz;qr.storage=xz();qr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();qr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function bz(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ez(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Yd.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}qr.log=console.debug||console.log||(()=>{});function _z(t){try{t?qr.storage.setItem("debug",t):qr.storage.removeItem("debug")}catch{}}function Sz(){let t;try{t=qr.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function xz(){try{return localStorage}catch{}}Yd.exports=qy()(qr);var{formatters:Pz}=Yd.exports;Pz.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var fk=k((zfe,uk)=>{"use strict";uk.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var hk=k((Kfe,pk)=>{"use strict";var kz=require("os"),dk=require("tty"),en=fk(),{env:Mt}=process,Jd;en("no-color")||en("no-colors")||en("color=false")||en("color=never")?Jd=0:(en("color")||en("colors")||en("color=true")||en("color=always"))&&(Jd=1);function Iz(){if("FORCE_COLOR"in Mt)return Mt.FORCE_COLOR==="true"?1:Mt.FORCE_COLOR==="false"?0:Mt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Mt.FORCE_COLOR,10),3)}function Az(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Tz(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=Iz();n!==void 0&&(Jd=n);let i=r?Jd:n;if(i===0)return 0;if(r){if(en("color=16m")||en("color=full")||en("color=truecolor"))return 3;if(en("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(Mt.TERM==="dumb")return o;if(process.platform==="win32"){let s=kz.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Mt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in Mt)||Mt.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in Mt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Mt.TEAMCITY_VERSION)?1:0;if(Mt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Mt){let s=Number.parseInt((Mt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Mt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Mt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Mt.TERM)||"COLORTERM"in Mt?1:o}function $y(t,e={}){let r=Tz(t,W({streamIsTTY:t&&t.isTTY},e));return Az(r)}pk.exports={supportsColor:$y,stdout:$y({isTTY:dk.isatty(1)}),stderr:$y({isTTY:dk.isatty(2)})}});var gk=k((Ht,Xd)=>{var Dz=require("tty"),Qd=require("util");Ht.init=qz;Ht.log=Lz;Ht.formatArgs=Oz;Ht.save=Fz;Ht.load=Mz;Ht.useColors=Rz;Ht.destroy=Qd.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ht.colors=[6,2,3,4,5,1];try{let t=hk();t&&(t.stderr||t).level>=2&&(Ht.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Ht.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Rz(){return"colors"in Ht.inspectOpts?Boolean(Ht.inspectOpts.colors):Dz.isatty(process.stderr.fd)}function Oz(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Xd.exports.humanize(this.diff)+"[0m")}else t[0]=Nz()+e+" "+t[0]}function Nz(){return Ht.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Lz(...t){return process.stderr.write(Qd.format(...t)+`
`)}function Fz(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Mz(){return process.env.DEBUG}function qz(t){t.inspectOpts={};let e=Object.keys(Ht.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ht.inspectOpts[e[r]]}Xd.exports=qy()(Ht);var{formatters:mk}=Xd.exports;mk.o=function(t){return this.inspectOpts.colors=this.useColors,Qd.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};mk.O=function(t){return this.inspectOpts.colors=this.useColors,Qd.inspect(t,this.inspectOpts)}});var vk=k((Yfe,jy)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?jy.exports=lk():jy.exports=gk()});var wk=k((Jfe,yk)=>{var Fl;yk.exports=function(){if(!Fl){try{Fl=vk()("follow-redirects")}catch{}typeof Fl!="function"&&(Fl=function(){})}Fl.apply(null,arguments)}});var Ja=k((Qfe,Vy)=>{var Ds=require("url"),Uy=Ds.URL,$z=require("http"),jz=require("https"),Ck=require("stream").Writable,Uz=require("assert"),bk=wk(),Rs=["abort","aborted","connect","error","socket","timeout"],By=Object.create(null);Rs.forEach(function(t){By[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var Ek=Zd("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Bz=Zd("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Hz=Zd("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Vz=Zd("ERR_STREAM_WRITE_AFTER_END","write after end");function $r(t,e){Ck.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}$r.prototype=Object.create(Ck.prototype);$r.prototype.abort=function(){xk(this._currentRequest),this.emit("abort")};$r.prototype.write=function(t,e,r){if(this._ending)throw new Vz;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Hz),this.abort())};$r.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};$r.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};$r.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};$r.prototype.setTimeout=function(t,e){var r=this;function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",o),r.removeListener("error",o),r.removeListener("response",o),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){$r.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty($r.prototype,t,{get:function(){return this._currentRequest[t]}})});$r.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};$r.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Ds.format(this._options),n._redirectable=this;for(var i=0;i<Rs.length;i++)n.on(Rs[i],By[Rs[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(l){if(n===s._currentRequest)if(l)s.emit("error",l);else if(o<a.length){var u=a[o++];n.finished||n.write(u.data,u.encoding,c)}else s._ended&&n.end()})()}};$r.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(xk(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Bz);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Hy(/^content-/i,this._options.headers));var n=Hy(/^host$/i,this._options.headers),i=Ds.parse(this._currentUrl),o=n||i.host,s=/^\w+:/.test(r)?this._currentUrl:Ds.format(Object.assign(i,{host:o})),a;try{a=Ds.resolve(s,r)}catch(u){this.emit("error",new Ek(u));return}bk("redirecting to",a),this._isRedirect=!0;var c=Ds.parse(a);if(Object.assign(this._options,c),c.host===o||Gz(c.host,o)||Hy(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var l={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,l)}catch(u){this.emit("error",u);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(u){this.emit("error",new Ek(u))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function _k(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(l,u,f){if(typeof l=="string"){var d=l;try{l=Sk(new Uy(d))}catch{l=Ds.parse(d)}}else Uy&&l instanceof Uy?l=Sk(l):(f=u,u=l,l={protocol:i});return typeof u=="function"&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=r,Uz.equal(u.protocol,i,"protocol mismatch"),bk("options",u),new $r(u,f)}function c(l,u,f){var d=s.request(l,u,f);return d.end(),d}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function Wz(){}function Sk(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function Hy(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function Zd(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function xk(t){for(var e=0;e<Rs.length;e++)t.removeListener(Rs[e],By[Rs[e]]);t.on("error",Wz),t.abort()}function Gz(t,e){let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}Vy.exports=_k({http:$z,https:jz});Vy.exports.wrap=_k});var Yy=k(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.default=Qz;var Yz=Jz(require("crypto"));function Jz(t){return t&&t.__esModule?t:{default:t}}var op=new Uint8Array(256),sp=op.length;function Qz(){return sp>op.length-16&&(Yz.default.randomFillSync(op),sp=0),op.slice(sp,sp+=16)}});var Ok=k(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.default=void 0;var Xz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;ap.default=Xz});var Bl=k(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.default=void 0;var Zz=e4(Ok());function e4(t){return t&&t.__esModule?t:{default:t}}function t4(t){return typeof t=="string"&&Zz.default.test(t)}var r4=t4;cp.default=r4});var Hl=k(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.default=void 0;var n4=i4(Bl());function i4(t){return t&&t.__esModule?t:{default:t}}var Wt=[];for(let t=0;t<256;++t)Wt.push((t+256).toString(16).substr(1));function o4(t,e=0){let r=(Wt[t[e+0]]+Wt[t[e+1]]+Wt[t[e+2]]+Wt[t[e+3]]+"-"+Wt[t[e+4]]+Wt[t[e+5]]+"-"+Wt[t[e+6]]+Wt[t[e+7]]+"-"+Wt[t[e+8]]+Wt[t[e+9]]+"-"+Wt[t[e+10]]+Wt[t[e+11]]+Wt[t[e+12]]+Wt[t[e+13]]+Wt[t[e+14]]+Wt[t[e+15]]).toLowerCase();if(!(0,n4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var s4=o4;lp.default=s4});var Fk=k(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.default=void 0;var a4=Nk(Yy()),c4=Nk(Hl());function Nk(t){return t&&t.__esModule?t:{default:t}}var Lk,Jy,Qy=0,Xy=0;function l4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||Lk,s=t.clockseq!==void 0?t.clockseq:Jy;if(o==null||s==null){let d=t.random||(t.rng||a4.default)();o==null&&(o=Lk=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),s==null&&(s=Jy=(d[6]<<8|d[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Xy+1,l=a-Qy+(c-Xy)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||a>Qy)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qy=a,Xy=c,Jy=s,a+=122192928e5;let u=((a&268435455)*1e4+c)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let d=0;d<6;++d)i[n+d]=o[d];return e||(0,c4.default)(i)}var u4=l4;up.default=u4});var Zy=k(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.default=void 0;var f4=d4(Bl());function d4(t){return t&&t.__esModule?t:{default:t}}function p4(t){if(!(0,f4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var h4=p4;fp.default=h4});var ew=k(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.default=y4;Ns.URL=Ns.DNS=void 0;var m4=Mk(Hl()),g4=Mk(Zy());function Mk(t){return t&&t.__esModule?t:{default:t}}function v4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var qk="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ns.DNS=qk;var $k="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ns.URL=$k;function y4(t,e,r){function n(i,o,s,a){if(typeof i=="string"&&(i=v4(i)),typeof o=="string"&&(o=(0,g4.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(o),c.set(i,o.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){a=a||0;for(let l=0;l<16;++l)s[a+l]=c[l];return s}return(0,m4.default)(c)}try{n.name=t}catch{}return n.DNS=qk,n.URL=$k,n}});var jk=k(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.default=void 0;var w4=C4(require("crypto"));function C4(t){return t&&t.__esModule?t:{default:t}}function b4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),w4.default.createHash("md5").update(t).digest()}var E4=b4;dp.default=E4});var Bk=k(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;var _4=Uk(ew()),S4=Uk(jk());function Uk(t){return t&&t.__esModule?t:{default:t}}var x4=(0,_4.default)("v3",48,S4.default),P4=x4;pp.default=P4});var Vk=k(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.default=void 0;var k4=Hk(Yy()),I4=Hk(Hl());function Hk(t){return t&&t.__esModule?t:{default:t}}function A4(t,e,r){t=t||{};let n=t.random||(t.rng||k4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,I4.default)(n)}var T4=A4;hp.default=T4});var Wk=k(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.default=void 0;var D4=R4(require("crypto"));function R4(t){return t&&t.__esModule?t:{default:t}}function O4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),D4.default.createHash("sha1").update(t).digest()}var N4=O4;mp.default=N4});var zk=k(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.default=void 0;var L4=Gk(ew()),F4=Gk(Wk());function Gk(t){return t&&t.__esModule?t:{default:t}}var M4=(0,L4.default)("v5",80,F4.default),q4=M4;gp.default=q4});var Kk=k(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.default=void 0;var $4="00000000-0000-0000-0000-000000000000";vp.default=$4});var Yk=k(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.default=void 0;var j4=U4(Bl());function U4(t){return t&&t.__esModule?t:{default:t}}function B4(t){if(!(0,j4.default)(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var H4=B4;yp.default=H4});var Jk=k(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});Object.defineProperty(_n,"v1",{enumerable:!0,get:function(){return V4.default}});Object.defineProperty(_n,"v3",{enumerable:!0,get:function(){return W4.default}});Object.defineProperty(_n,"v4",{enumerable:!0,get:function(){return G4.default}});Object.defineProperty(_n,"v5",{enumerable:!0,get:function(){return z4.default}});Object.defineProperty(_n,"NIL",{enumerable:!0,get:function(){return K4.default}});Object.defineProperty(_n,"version",{enumerable:!0,get:function(){return Y4.default}});Object.defineProperty(_n,"validate",{enumerable:!0,get:function(){return J4.default}});Object.defineProperty(_n,"stringify",{enumerable:!0,get:function(){return Q4.default}});Object.defineProperty(_n,"parse",{enumerable:!0,get:function(){return X4.default}});var V4=xi(Fk()),W4=xi(Bk()),G4=xi(Vk()),z4=xi(zk()),K4=xi(Kk()),Y4=xi(Yk()),J4=xi(Bl()),Q4=xi(Hl()),X4=xi(Zy());function xi(t){return t&&t.__esModule?t:{default:t}}});var rw=k((Vde,tI)=>{tI.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Cp=k((Wde,nI)=>{"use strict";var rI=rw();nI.exports=function(e,r){if(!e)return function(i,o){return i?rI(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return rI(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var oI=k((Gde,iI)=>{"use strict";var n6=Cp();iI.exports=function(t){return n6(Object.keys(t))}});var nw=k((zde,sI)=>{"use strict";var i6=rw();sI.exports=function(e,r){return function(n,i){if(n)return i6(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var cI=k((Kde,aI)=>{"use strict";aI.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var uI=k((Yde,lI)=>{"use strict";lI.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var dI=k((Jde,fI)=>{"use strict";fI.exports=function(){return function(e,r){r(!0)}}});var hI=k((Qde,pI)=>{"use strict";pI.exports=function(e){return function(r,n){n(e)}}});var gI=k((Xde,mI)=>{"use strict";mI.exports={keys:oI(),once:nw(),values:Cp(),count:cI(),infinite:uI(),empty:dI(),error:hI()}});var Xa=k((Zde,vI)=>{"use strict";vI.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,f){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var wI=k((epe,yI)=>{"use strict";var o6=Xa();yI.exports=function(e){return o6(null,e)}});var bI=k((tpe,CI)=>{"use strict";var s6=Xa();CI.exports=function(e){return s6(function(r){console.log(r)},e)}});var Za=k((rpe,EI)=>{EI.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var xI=k((npe,SI)=>{"use strict";function _I(t){return t}var a6=Za(),c6=Xa();SI.exports=function(e,r){var n=!1;return r?e=a6(e)||_I:(r=e,e=_I),c6(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var bp=k((ipe,PI)=>{"use strict";var l6=Xa();PI.exports=function(e,r,n){n||(n=r,r=null);var i=l6(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var II=k((ope,kI)=>{"use strict";var u6=bp();kI.exports=function(e){return u6(function(r,n){return r.push(n),r},[],e)}});var TI=k((spe,AI)=>{"use strict";var f6=bp();AI.exports=function(e){return f6(function(r,n){return r+n},"",e)}});var RI=k((ape,DI)=>{"use strict";DI.exports={drain:Xa(),onEnd:wI(),log:bI(),find:xI(),reduce:bp(),collect:II(),concat:TI()}});var NI=k((cpe,OI)=>{"use strict";function d6(t){return t}var p6=Za();OI.exports=function(e){return e?(e=p6(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):d6}});var FI=k((lpe,LI)=>{"use strict";function h6(t){return t}var m6=Za();LI.exports=function(e){if(!e)return h6;e=m6(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(l){r?n=c:c(a)}):o(a,function(l){c(a)})):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(f,d){r=!1,i?(c(i),n&&n(i)):f?s(f,c):c(null,d)}))})}}}});var iw=k((upe,MI)=>{var g6=Za();function v6(t){return t}MI.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:g6(e)||v6}});var Ep=k((fpe,qI)=>{"use strict";var y6=iw();qI.exports=function(e){return e=y6(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var jI=k((dpe,$I)=>{"use strict";var w6=iw(),C6=Ep();$I.exports=function(e){return e=w6(e),C6(function(r){return!e(r)})}});var BI=k((ppe,UI)=>{"use strict";UI.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var VI=k((hpe,HI)=>{"use strict";HI.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i&&!c?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,f){(i=i||u)?l(i):e(f)?l(null,f):(i=!0,n?l(null,f):a(l))})}}}});var ow=k((mpe,WI)=>{"use strict";function b6(t){return t}var E6=Za(),_6=Ep();WI.exports=function(e,r){e=E6(e)||b6;var n={};return _6(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var zI=k((gpe,GI)=>{"use strict";var S6=ow();GI.exports=function(e){return S6(e,!0)}});var YI=k((vpe,KI)=>{"use strict";var x6=Cp(),P6=nw();KI.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=x6(c):typeof c!="function"&&(c=P6(c)),r=c,o()})}}}}});var QI=k((ype,JI)=>{"use strict";JI.exports={map:NI(),asyncMap:FI(),filter:Ep(),filterNot:jI(),through:BI(),take:VI(),unique:ow(),nonUnique:zI(),flatten:YI()}});var sw=k((wpe,XI)=>{"use strict";XI.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var _p=k((Ls,rA)=>{"use strict";var ZI=gI(),eA=RI(),tA=QI();Ls=rA.exports=sw();Ls.pull=Ls;for(xn in ZI)Ls[xn]=ZI[xn];var xn;for(xn in tA)Ls[xn]=tA[xn];var xn;for(xn in eA)Ls[xn]=eA[xn];var xn});var uw=k((Vpe,uA)=>{var Hpe=uA.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var fw=k((ki,pA)=>{var Wpe=sw(),L6=uw();function fA(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function dA(t,e,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,l(),n?s():t(n=!0,s))}function c(u){l(),n||t(n=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){L6(function(u){t(null,function(f,d){if(n=n||f,f===!0)return e._isStdio?s():e.end();if(n=n||f)return fA(e),s(n);if(e._isStdio)e.write(d,function(){u()});else{var p=e.write(d);p===!1?e.once("drain",u):u()}})})})}function F6(t){var e=!1,r=!1,n;function i(){var o=t.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(o){e=o,n&&n(e)}),function(o,s){n=s,e?s(e):r&&i()}}function kp(t){var e=[],r=[],n,i=!1,o;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;r.length;)r.shift()(a);c(a)};var l=u;if(n)return u();t.once("close",u),fA(t)}else r.push(c),s()}}var M6=kp,Ip=function(t,e){return function(r){return dA(r,t,e)}},Ap=function(t){return kp(t)};ki=pA.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return dA(r,t,e),kp(t)}:Ip(t,e):Ap(t)};ki.sink=Ip;ki.source=Ap;ki.read=M6;ki.read1=kp;ki.read2=F6;ki.duplex=function(t,e){return{source:Ap(t),sink:Ip(t,e)}};ki.transform=function(t){return function(e){var r=Ap(t);return Ip(t)(e),r}}});var DA=k((Dhe,TA)=>{var G6=uw();TA.exports=function(t,e){return function(r){var n=[],i,o;function s(l){n.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(i=!0,s(null)),l=="error"&&(o=u)},queue:s},c;return function(l,u){if(i=i||l,l)return r(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,G6(function f(d){if(!!c)if(u=c,o)c=null,u(o);else if(n.length){var p=n.shift();c=null,u(p===null,p)}else r(i,function(h,m){if(h&&h!==!0)return o=h,d();if(i=i||h)e.call(a);else if(m!==null&&(t.call(a,m),o||i))return r(o||i,function(){c=null,u(o||i)});d(f)})})}}}});var OA=k((Rhe,RA)=>{RA.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var o=t;return t=[],o.length==1?o[0]:Buffer.concat(o)}else if(t.length>1&&n<=(i=t[0].length)){var s=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var l=t.shift();c+=l.length,a.push(l)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var MA=k((Ohe,FA)=>{"use strict";var z6=OA();function K6(t){return Number.isFinite(t)}function NA(t){return typeof t=="function"}function LA(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(o,s){clearTimeout(i),n(o,s)})}:t}FA.exports=function(t){var e=[],r,n,i=!1,o=z6(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&o.has(1))e.shift().cb(null,o.get());else if(o.has(e[0].length)){var d=e.shift();d.cb(null,o.get(d.length))}else if(s==!0&&e[0].length&&o.length<e[0].length){var p="stream ended with:"+o.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!o.has(1)||c}function u(){var d=l();d&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,l();o.add(h),u()}))}function f(d){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=LA(d,t),r=d,u()}return f.abort=function(d,p){c=d||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},f.read=function(d,p,h){if(NA(p)&&(h=p,p=t),NA(h))e.push({length:K6(d)?d:null,cb:h}),u();else return a=!0,function(m,g){if(i||o.has(1)){if(m)return r(m,g);e.push({length:null,cb:g}),u()}else LA(r,p)(m,function(v,w){g(v,w)})}},f}});var YA=k(($s,KA)=>{var Y6=DA(),J6=MA(),qA=0,$A=1,jA=2,UA="GOODBYE",Q6=Buffer.isBuffer;function BA(t){return typeof t=="string"}function HA(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return BA(t)&&t===UA?(e.fill(0),[e,null]):(BA(n)?(r=$A,n=Buffer.from(n,"utf-8")):Q6(n)?r=qA:(r=jA,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function VA(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function WA(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(qA===e.type)e.value=t;else if($A===e.type)e.value=t.toString();else if(jA===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function GA(){return Y6(function(t){var e=HA(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function zA(){var t=J6(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(o,s){if(o)return i(o);var a=VA(s);if(a.length===0)return e=!0,i(null,UA);t.read(a.length,function(c,l){if(c)return i(c);try{WA(l,a)}catch(u){return i(u)}i(null,a)})})}}}$s=KA.exports=function(t){return{source:GA()(t.source),sink:function(e){return t.sink(zA()(e))}}};$s.encodePair=HA;$s.decodeHead=VA;$s.decodeBody=WA;$s.encode=GA;$s.decode=zA});var XA=k((Nhe,QA)=>{function Xl(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}QA.exports=function(t){return new rn(t)};function rn(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}rn.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};rn.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],e(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};rn.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new Zl(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};rn.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};rn.prototype.destroy=function(t){t=t||Xl(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};rn.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=JA)};function JA(t){console.error("packet-stream asked to read after closed",t)}rn.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};rn.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};rn.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};rn.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:Xl(o),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Xl(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};rn.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new Zl(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function Zl(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}Zl.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:Xl(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};Zl.prototype.end=function(t){this.write(null,Xl(t||!0))};Zl.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=JA,this._ps=null)}});var eT=k((Lhe,eu)=>{"use strict";var X6=_p();function Z6(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function _w(t,e){let r=[],n=!1,i=!1,o,s,a=Z6((c,l)=>{e&&e(c,l),t=null,e=null,o=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(n=n||l,o){let u=o;o=null,u(n,c)}else!n&&!i&&r.push(c);n&&a(n!==!0?n:null)},{source(c,l){c?(t&&t.write(null,c),l(c),r.length=0,i=!0,a(c!==!0?c:null)):r.length?l(null,r.shift()):n?l(n):o=l},sink(c){if(n)return s=null,c(n,()=>{});s=c,X6.drain(l=>{if(n)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function ZA(t,e){return _w(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function e9(t){return ZA(t).source}function t9(t,e){return ZA(t,e).sink}eu.exports=_w;eu.exports.source=e9;eu.exports.sink=t9;eu.exports.duplex=_w});var rT=k((Fhe,tT)=>{tT.exports=function(e){var r,n,i;function o(s){return function(a,c){s(a,function(l,u){if(l&&!i)return i=!0,c(null,e);l&&r?c(l):l?n=c:c(null,u)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var Sw=k((Mhe,nT)=>{nT.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Mp=k((qhe,oT)=>{"use strict";var iT=Sw();oT.exports=function(e,r){if(!e)return function(i,o){return i?iT(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return iT(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var aT=k(($he,sT)=>{"use strict";var r9=Mp();sT.exports=function(t){return r9(Object.keys(t))}});var xw=k((jhe,cT)=>{"use strict";var n9=Sw();cT.exports=function(e,r){return function(n,i){if(n)return n9(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var uT=k((Uhe,lT)=>{"use strict";lT.exports=function(e){var r=0;return e=e||1/0,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var dT=k((Bhe,fT)=>{"use strict";fT.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var hT=k((Hhe,pT)=>{"use strict";pT.exports=function(){return function(e,r){r(!0)}}});var gT=k((Vhe,mT)=>{"use strict";mT.exports=function(e){return function(r,n){n(e)}}});var yT=k((Whe,vT)=>{"use strict";vT.exports={keys:aT(),once:xw(),values:Mp(),count:uT(),infinite:dT(),empty:hT(),error:gT()}});var sc=k((Ghe,wT)=>{"use strict";wT.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,l=!1;c;)if(l=!1,n(null,function(u,f){if(l=!0,u=u||i){if(c=!1,r)r(u===!0?null:u);else if(u&&u!==!0)throw u}else e&&e(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!l){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var bT=k((zhe,CT)=>{"use strict";var i9=sc();CT.exports=function(e){return i9(null,e)}});var _T=k((Khe,ET)=>{"use strict";var o9=sc();ET.exports=function(e){return o9(function(r){console.log(r)},e)}});var ac=k((Yhe,ST)=>{ST.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var kT=k((Jhe,PT)=>{"use strict";function xT(t){return t}var s9=ac(),a9=sc();PT.exports=function(e,r){var n=!1;return r?e=s9(e)||xT:(r=e,e=xT),a9(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var qp=k((Qhe,IT)=>{"use strict";var c9=sc();IT.exports=function(e,r,n){n||(n=r,r=null);var i=c9(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var TT=k((Xhe,AT)=>{"use strict";var l9=qp();AT.exports=function(e){return l9(function(r,n){return r.push(n),r},[],e)}});var RT=k((Zhe,DT)=>{"use strict";var u9=qp();DT.exports=function(e){return u9(function(r,n){return r+n},"",e)}});var NT=k((eme,OT)=>{"use strict";OT.exports={drain:sc(),onEnd:bT(),log:_T(),find:kT(),reduce:qp(),collect:TT(),concat:RT()}});var FT=k((tme,LT)=>{"use strict";function f9(t){return t}var d9=ac();LT.exports=function(e){return e?(e=d9(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):f9}});var qT=k((rme,MT)=>{"use strict";function p9(t){return t}var h9=ac();MT.exports=function(e){if(!e)return p9;e=h9(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(l,u){l?c(l):i?c(i):(r=!0,e(u,function(f,d){r=!1,i?(c(i),n(i)):f?s(f,c):c(null,d)}))})}}}});var Pw=k((nme,$T)=>{var m9=ac();function g9(t){return t}$T.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:m9(e)||g9}});var $p=k((ime,jT)=>{"use strict";var v9=Pw();jT.exports=function(e){return e=v9(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,l){if(!c&&!e(l))return s?a=!0:n(c,o);o(c,l)}),s=!1}}}});var BT=k((ome,UT)=>{"use strict";var y9=Pw(),w9=$p();UT.exports=function(e){return e=y9(e),w9(function(r){return!e(r)})}});var VT=k((sme,HT)=>{"use strict";HT.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,l){c?i(c):e&&e(l),a(c,l)})}}}});var GT=k((ame,WT)=>{"use strict";WT.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(l){n=!1,c(l||!0)})}return function(c,l){i?n?a(l):l(i):(i=c)?s(i,l):s(null,function(u,f){(i=i||u)?l(i):e(f)?l(null,f):(i=!0,n?l(null,f):a(l))})}}}});var kw=k((cme,zT)=>{"use strict";function C9(t){return t}var b9=ac(),E9=$p();zT.exports=function(e,r){e=b9(e)||C9;var n={};return E9(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var YT=k((lme,KT)=>{"use strict";var _9=kw();KT.exports=function(e){return _9(e,!0)}});var QT=k((ume,JT)=>{"use strict";var S9=Mp(),x9=xw();JT.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(l){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=S9(c):typeof c!="function"&&(c=x9(c)),r=c,o()})}}}}});var ZT=k((fme,XT)=>{"use strict";XT.exports={map:FT(),asyncMap:qT(),filter:$p(),filterNot:BT(),through:VT(),take:GT(),unique:kw(),nonUnique:YT(),flatten:QT()}});var tD=k((dme,eD)=>{"use strict";eD.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var sD=k((tu,oD)=>{"use strict";var rD=yT(),nD=NT(),iD=ZT();tu=oD.exports=tD();for(kn in rD)tu[kn]=rD[kn];var kn;for(kn in iD)tu[kn]=iD[kn];var kn;for(kn in nD)tu[kn]=nD[kn];var kn});var cD=k((pme,aD)=>{var P9=rT(),Iw=sD();aD.exports=function(t,e){e=e||"GOODBYE";var r=P9(e);return{source:Iw(t.source,r),sink:Iw(Iw.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var ru=k(In=>{"use strict";var jp=_p();function k9(t){return t?Object.keys(t).length===0:!0}In.set=function(e,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},i=e,o=a,e=e[a]}i[o]=n};In.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],e==null)return e}return n};In.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function I9(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function A9(t,e){(function r(n,i){let o=e[i];if(n)e.length-1===i?delete n[o]:i<e.length&&r(n[o],i+1);else return;k9(n[o])&&delete n[o]})(t,0)}function T9(t,e){for(let r in e)t[r]=e[r];return t}In.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return T9(I9(e,r),n)};In.unmount=function(e,r){return A9(e,r)};var Up=t=>t==="source",Bp=t=>t==="sink",lD=t=>t==="duplex",D9=t=>t==="sync",R9=t=>t==="async",uD=t=>D9(t)||R9(t),O9=t=>Up(t)||Bp(t)||lD(t);In.isRequest=uD;In.isStream=O9;function Aw(t){return function(e){e(t||!0,()=>{})}}function fD(t){return{source:jp.error(t),sink:Aw(t)}}In.errorAsStream=function(e,r){return Up(e)?jp.error(r):Bp(e)?Aw(r):fD(r)};In.errorAsStreamOrCb=function(e,r,n){return uD(e)?n(r):Up(e)?jp.error(r):Bp(e)?Aw(r):n(r),fD(r)};In.pipeToStream=function(e,r,n){Up(e)?r(n):Bp(e)?n(r):lD(e)&&jp(r,n,r)}});var Tw=k((gme,pD)=>{function dD(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function N9(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var mme=pD.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=N9(dD(r).slice(1),dD(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var gD=k((vme,mD)=>{"use strict";var L9=XA(),Dw=eT(),F9=cD(),cc=ru(),hD=Tw();mD.exports=function(e,r,n){let i=L9({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((d,p)=>{f=!0,u=!0,a(d,p)});try{e("async",c,l)}catch(d){if(u||f)throw hD(d,"no callback provided to muxrpc async funtion");a(d)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:d}=c,p,h;if(s.read=null,!cc.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{h=e(f,u,d)}catch(v){p=v}let g=Dw[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return cc.pipeToStream(f,g,p?cc.errorAsStream(f,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=F9(Dw(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,l){if(a==="emit")return i.message(c);if(!(cc.isRequest(s)||cc.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(cc.isRequest(s))return i.request({name:a,args:c},l);let u=i.stream(),f=Dw[s](u,l);return u.write({name:a,args:c,type:s}),f},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw hD(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var yD=k((yme,vD)=>{"use strict";var M9=Tw(),q9=ru();function Rw(t,e,r,n){for(let i in e){let o=e[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;t[i]=Rw({},a,s,n)}else{let a=o;t[i]=(...c)=>n(a,s,c)}}return t}function $9(t){if(t)throw M9(t,"callback not provided")}function j9(t,e,r,n){t=t||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:$9;if(typeof c=="function"){let l;try{l=r(o,s,a,c)}catch(u){return q9.errorAsStreamOrCb(o,u,c)}return l}else return new Promise((l,u)=>{r(o,s,a,(f,d)=>{f?u(f):l(d)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);Rw(t,s,null,i),n(null,s,t)}]):Rw(t,e,null,i),t}vD.exports=j9});var bD=k((wme,CD)=>{"use strict";var Hp=ru();function wD(t){return Array.isArray(t)?t:t.split(".")}function U9(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}CD.exports=function(e){if(U9(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)Hp.set(r,wD(s),!0)}else r=null;if(o.deny)for(let s of o.deny)Hp.set(n,wD(s),!0);else n={};return this}return e&&i(e),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!Hp.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&Hp.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var _D=k((Cme,ED)=>{"use strict";var B9=bD(),Ow=ru();ED.exports=function(e,r,n){n=B9(n);function i(s,a){return s===Ow.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let l=c.pop(),u;try{u=Ow.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return Ow.get(e,a).apply(this,c)}return function(a,c,l){let u=n.pre(c,l);if(u)throw u;return o.call(this,a,c,l)}}});var PD=k((bme,xD)=>{"use strict";var H9=YA(),V9=require("events").EventEmitter,W9=gD(),G9=yD(),z9=_D();function SD(t,e,r,n,i,o,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new V9;o||(o=H9);let l,u={_emit(d,p){return c&&c._emit(d,p),u},id:n},f=W9(z9(r,e,i).bind(u),o,d=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let p=l;l=null,p(d)}});if(G9(c,t,(d,p,h,m)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(d,p,h,m)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",p=>{u.id=p});let d=!0;c.createStream=p=>{if(l=p,d)return d=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(d,p){return f.close(d,p),this},c}xD.exports=function(t,e,r){return arguments.length>3?SD.apply(this,arguments):function(n,i,o){return SD(t,e,n,o,i,r,!0)}}});var ID=k((Eme,Vp)=>{var K9=require("stream");Vp.exports=Nw;Vp.exports.source=function(t){return Nw(null,t)};Vp.exports.sink=function(t){return Nw(t,null)};var kD=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function Nw(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,o,s=new K9;s.writable=s.readable=!0,s.write=function(g){return r.length?r.shift()(null,g):n.push(g),r.length||(o=!0),!!r.length},s.end=function(){e?n.length?m():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(g,v){n.length?(v(null,n.shift()),n.length||s.emit("drain")):((i=i||g)?v(i):r.push(v),o&&(o=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,d=!1;if(s.sink=function(g){e=g,kD(m)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(g,v)=>{var w=p(g,v);return g==="data"&&s.paused&&kD(s.resume.bind(s)),w};var h=s.pipe.bind(s);s.pipe=function(g,v){var w=h(g,v);return s.paused&&s.resume(),w}}function m(){if(f=!1,!(!e||d)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");d=!0,e(null,function g(v,w){d=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(w),f=!0):v&&(i=v)!==!0?s.emit("error",v):(i=i||v)?s.emit("end"):(s.emit("data",w),d=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,m(),s},s.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var TD=k((_me,AD)=>{AD.exports=Y9;function Y9(t,e){typeof t=="function"&&(e=t,t=!1);var r=[],n,i;function o(f,d){f&&(n=f,i&&u(n)),i=d,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(i){u(n,f);return}r.push(f)}}if(t)return{push:c,end:a,source:o,buffer:r};return o.push=c,o.end=a,o.buffer=r,o;function l(){!i||(n?u(n):!r.length&&s?u(s):r.length&&u(null,r.shift()))}function u(f,d){var p=i;if(f&&e){var h=e;e=null,h(f===!0?null:f)}i=null,p(f,d)}}});var Hw=k((zme,$D)=>{"use strict";var MD=require("child_process"),iK=1024*1024,qD={exec(t,e){MD.exec(t,{maxBuffer:2*iK,windowsHide:!0},e)},spawn(t,e,r){return MD.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(o=>{let s=qD.split(o,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(r=>r.trim().length>0).map(r=>r.split(/(\r\n|\n|\r)/).filter(n=>n.trim().length>0));return e.forEach(r=>{for(let n=0;r[n];){let i=r[n];i.startsWith(" ")?(r[n-1]+=i.trimLeft(),r.splice(n,1)):n+=1}}),e.map(r=>{let n={};return r.forEach(i=>{let o=i.indexOf(":"),s=i.slice(0,o).trim();n[s]=i.slice(o+1).trim()}),n})}};$D.exports=qD});var UD=k((Kme,jD)=>{"use strict";var oK=require("os"),Jp=require("fs"),nn=Hw(),sK=t=>new Promise((e,r)=>{Jp.existsSync(t)?e():Jp.mkdir(t,n=>{n?r(n):e()})}),Vw={darwin(t){return new Promise((e,r)=>{nn.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=nn.stripLine(i.toString(),2),a=nn.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";nn.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=nn.stripLine(o.toString(),2),l=nn.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);if(f&&f[1]===String(t))return!0});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{nn.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=nn.stripLine(i.toString(),4),a=nn.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=oK.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';sK(n).then(()=>{nn.exec(o,()=>{Jp.readFile(i,"utf8",(s,a)=>{if(Jp.unlink(i,()=>{}),s)r(s);else{a=nn.stripLine(a,2);let c=nn.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function aK(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Vw))return n(new Error(`platform ${e} is unsupported`));let i=Vw[e];typeof i=="string"&&(i=Vw[i]),i(t).then(r,n)})}jD.exports=aK});var WD=k((Yme,VD)=>{"use strict";var Qp=require("path"),yo=Hw();function Ww(t,e){return e?t&&t.match?t.match(e):!1:!0}function BD(t){let e=t.split(Qp.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(Qp.sep)}function HD(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return Qp.basename(t.substring(0,e))}return Qp.basename(t)}var Gw={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",yo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=yo.stripLine(o.toString(),1),l=yo.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?Ww(u[4],t.name):!!u[0]).map(u=>{let f=String(u[4]),d=BD(f);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:HD(d),bin:d,cmd:u[4]}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],o=yo.spawn("powershell.exe",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=yo.parseTable(i.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:Ww(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";yo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=yo.stripLine(o.toString(),1),l=yo.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?Ww(u[1],t.name):!!u[0]).map(u=>{let f=String(u[1]),d=BD(f);return{pid:parseInt(u[0],10),name:HD(d),bin:d,cmd:f}});t.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function cK(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in Gw))return n(new Error(`platform ${e} is unsupported`));let i=Gw[e];typeof i=="string"&&(i=Gw[i]),i(t).then(r,n)})}VD.exports=cK});var KD=k((Jme,zD)=>{"use strict";var lK=UD(),GD=WD(),zw={port(t,e){return lK(t,e).then(r=>zw.pid(r,e),()=>[])},pid(t,e){return GD({pid:t,strict:e})},name(t,e){return GD({name:t,strict:e})}};function uK(t,e,r){return new Promise((n,i)=>{if(!(t in zw))i(new Error(`do not support find by "${t}"`));else{let o=/^\d+$/.test(e);t==="pid"&&!o?i(new Error("pid must be a number")):t==="port"&&!o?i(new Error("port must be a number")):zw[t](e,r).then(n,i)}})}zD.exports=uK});var JD=k((Qme,YD)=>{"use strict";YD.exports=KD()});var wu=k((Tve,xO)=>{var SY="2.0.0",xY=256,PY=Number.MAX_SAFE_INTEGER||9007199254740991,kY=16;xO.exports={SEMVER_SPEC_VERSION:SY,MAX_LENGTH:xY,MAX_SAFE_INTEGER:PY,MAX_SAFE_COMPONENT_LENGTH:kY}});var Cu=k((Dve,PO)=>{var IY=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};PO.exports=IY});var Gs=k((Ao,kO)=>{var{MAX_SAFE_COMPONENT_LENGTH:xC}=wu(),AY=Cu();Ao=kO.exports={};var TY=Ao.re=[],fe=Ao.src=[],de=Ao.t={},DY=0,Ae=(t,e,r)=>{let n=DY++;AY(n,e),de[t]=n,fe[n]=e,TY[n]=new RegExp(e,r?"g":void 0)};Ae("NUMERICIDENTIFIER","0|[1-9]\\d*");Ae("NUMERICIDENTIFIERLOOSE","[0-9]+");Ae("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Ae("MAINVERSION",`(${fe[de.NUMERICIDENTIFIER]})\\.(${fe[de.NUMERICIDENTIFIER]})\\.(${fe[de.NUMERICIDENTIFIER]})`);Ae("MAINVERSIONLOOSE",`(${fe[de.NUMERICIDENTIFIERLOOSE]})\\.(${fe[de.NUMERICIDENTIFIERLOOSE]})\\.(${fe[de.NUMERICIDENTIFIERLOOSE]})`);Ae("PRERELEASEIDENTIFIER",`(?:${fe[de.NUMERICIDENTIFIER]}|${fe[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASEIDENTIFIERLOOSE",`(?:${fe[de.NUMERICIDENTIFIERLOOSE]}|${fe[de.NONNUMERICIDENTIFIER]})`);Ae("PRERELEASE",`(?:-(${fe[de.PRERELEASEIDENTIFIER]}(?:\\.${fe[de.PRERELEASEIDENTIFIER]})*))`);Ae("PRERELEASELOOSE",`(?:-?(${fe[de.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${fe[de.PRERELEASEIDENTIFIERLOOSE]})*))`);Ae("BUILDIDENTIFIER","[0-9A-Za-z-]+");Ae("BUILD",`(?:\\+(${fe[de.BUILDIDENTIFIER]}(?:\\.${fe[de.BUILDIDENTIFIER]})*))`);Ae("FULLPLAIN",`v?${fe[de.MAINVERSION]}${fe[de.PRERELEASE]}?${fe[de.BUILD]}?`);Ae("FULL",`^${fe[de.FULLPLAIN]}$`);Ae("LOOSEPLAIN",`[v=\\s]*${fe[de.MAINVERSIONLOOSE]}${fe[de.PRERELEASELOOSE]}?${fe[de.BUILD]}?`);Ae("LOOSE",`^${fe[de.LOOSEPLAIN]}$`);Ae("GTLT","((?:<|>)?=?)");Ae("XRANGEIDENTIFIERLOOSE",`${fe[de.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ae("XRANGEIDENTIFIER",`${fe[de.NUMERICIDENTIFIER]}|x|X|\\*`);Ae("XRANGEPLAIN",`[v=\\s]*(${fe[de.XRANGEIDENTIFIER]})(?:\\.(${fe[de.XRANGEIDENTIFIER]})(?:\\.(${fe[de.XRANGEIDENTIFIER]})(?:${fe[de.PRERELEASE]})?${fe[de.BUILD]}?)?)?`);Ae("XRANGEPLAINLOOSE",`[v=\\s]*(${fe[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${fe[de.XRANGEIDENTIFIERLOOSE]})(?:\\.(${fe[de.XRANGEIDENTIFIERLOOSE]})(?:${fe[de.PRERELEASELOOSE]})?${fe[de.BUILD]}?)?)?`);Ae("XRANGE",`^${fe[de.GTLT]}\\s*${fe[de.XRANGEPLAIN]}$`);Ae("XRANGELOOSE",`^${fe[de.GTLT]}\\s*${fe[de.XRANGEPLAINLOOSE]}$`);Ae("COERCE",`(^|[^\\d])(\\d{1,${xC}})(?:\\.(\\d{1,${xC}}))?(?:\\.(\\d{1,${xC}}))?(?:$|[^\\d])`);Ae("COERCERTL",fe[de.COERCE],!0);Ae("LONETILDE","(?:~>?)");Ae("TILDETRIM",`(\\s*)${fe[de.LONETILDE]}\\s+`,!0);Ao.tildeTrimReplace="$1~";Ae("TILDE",`^${fe[de.LONETILDE]}${fe[de.XRANGEPLAIN]}$`);Ae("TILDELOOSE",`^${fe[de.LONETILDE]}${fe[de.XRANGEPLAINLOOSE]}$`);Ae("LONECARET","(?:\\^)");Ae("CARETTRIM",`(\\s*)${fe[de.LONECARET]}\\s+`,!0);Ao.caretTrimReplace="$1^";Ae("CARET",`^${fe[de.LONECARET]}${fe[de.XRANGEPLAIN]}$`);Ae("CARETLOOSE",`^${fe[de.LONECARET]}${fe[de.XRANGEPLAINLOOSE]}$`);Ae("COMPARATORLOOSE",`^${fe[de.GTLT]}\\s*(${fe[de.LOOSEPLAIN]})$|^$`);Ae("COMPARATOR",`^${fe[de.GTLT]}\\s*(${fe[de.FULLPLAIN]})$|^$`);Ae("COMPARATORTRIM",`(\\s*)${fe[de.GTLT]}\\s*(${fe[de.LOOSEPLAIN]}|${fe[de.XRANGEPLAIN]})`,!0);Ao.comparatorTrimReplace="$1$2$3";Ae("HYPHENRANGE",`^\\s*(${fe[de.XRANGEPLAIN]})\\s+-\\s+(${fe[de.XRANGEPLAIN]})\\s*$`);Ae("HYPHENRANGELOOSE",`^\\s*(${fe[de.XRANGEPLAINLOOSE]})\\s+-\\s+(${fe[de.XRANGEPLAINLOOSE]})\\s*$`);Ae("STAR","(<|>)?=?\\s*\\*");Ae("GTE0","^\\s*>=\\s*0.0.0\\s*$");Ae("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var bu=k((Rve,IO)=>{var RY=["includePrerelease","loose","rtl"],OY=t=>t?typeof t!="object"?{loose:!0}:RY.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};IO.exports=OY});var bh=k((Ove,DO)=>{var AO=/^[0-9]+$/,TO=(t,e)=>{let r=AO.test(t),n=AO.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},NY=(t,e)=>TO(e,t);DO.exports={compareIdentifiers:TO,rcompareIdentifiers:NY}});var ar=k((Nve,LO)=>{var Eh=Cu(),{MAX_LENGTH:RO,MAX_SAFE_INTEGER:_h}=wu(),{re:OO,t:NO}=Gs(),LY=bu(),{compareIdentifiers:Eu}=bh(),sn=class{constructor(e,r){if(r=LY(r),e instanceof sn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>RO)throw new TypeError(`version is longer than ${RO} characters`);Eh("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?OO[NO.LOOSE]:OO[NO.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>_h||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_h||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_h||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<_h)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Eh("SemVer.compare",this.version,this.options,e),!(e instanceof sn)){if(typeof e=="string"&&e===this.version)return 0;e=new sn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof sn||(e=new sn(e,this.options)),Eu(this.major,e.major)||Eu(this.minor,e.minor)||Eu(this.patch,e.patch)}comparePre(e){if(e instanceof sn||(e=new sn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Eh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Eu(n,i)}while(++r)}compareBuild(e){e instanceof sn||(e=new sn(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Eh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Eu(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};LO.exports=sn});var zs=k((Lve,$O)=>{var{MAX_LENGTH:FY}=wu(),{re:FO,t:MO}=Gs(),qO=ar(),MY=bu(),qY=(t,e)=>{if(e=MY(e),t instanceof qO)return t;if(typeof t!="string"||t.length>FY||!(e.loose?FO[MO.LOOSE]:FO[MO.FULL]).test(t))return null;try{return new qO(t,e)}catch{return null}};$O.exports=qY});var UO=k((Fve,jO)=>{var $Y=zs(),jY=(t,e)=>{let r=$Y(t,e);return r?r.version:null};jO.exports=jY});var HO=k((Mve,BO)=>{var UY=zs(),BY=(t,e)=>{let r=UY(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};BO.exports=BY});var WO=k((qve,VO)=>{var HY=ar(),VY=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new HY(t,r).inc(e,n).version}catch{return null}};VO.exports=VY});var an=k(($ve,zO)=>{var GO=ar(),WY=(t,e,r)=>new GO(t,r).compare(new GO(e,r));zO.exports=WY});var Sh=k((jve,KO)=>{var GY=an(),zY=(t,e,r)=>GY(t,e,r)===0;KO.exports=zY});var QO=k((Uve,JO)=>{var YO=zs(),KY=Sh(),YY=(t,e)=>{if(KY(t,e))return null;{let r=YO(t),n=YO(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};JO.exports=YY});var ZO=k((Bve,XO)=>{var JY=ar(),QY=(t,e)=>new JY(t,e).major;XO.exports=QY});var tN=k((Hve,eN)=>{var XY=ar(),ZY=(t,e)=>new XY(t,e).minor;eN.exports=ZY});var nN=k((Vve,rN)=>{var e7=ar(),t7=(t,e)=>new e7(t,e).patch;rN.exports=t7});var oN=k((Wve,iN)=>{var r7=zs(),n7=(t,e)=>{let r=r7(t,e);return r&&r.prerelease.length?r.prerelease:null};iN.exports=n7});var aN=k((Gve,sN)=>{var i7=an(),o7=(t,e,r)=>i7(e,t,r);sN.exports=o7});var lN=k((zve,cN)=>{var s7=an(),a7=(t,e)=>s7(t,e,!0);cN.exports=a7});var xh=k((Kve,fN)=>{var uN=ar(),c7=(t,e,r)=>{let n=new uN(t,r),i=new uN(e,r);return n.compare(i)||n.compareBuild(i)};fN.exports=c7});var pN=k((Yve,dN)=>{var l7=xh(),u7=(t,e)=>t.sort((r,n)=>l7(r,n,e));dN.exports=u7});var mN=k((Jve,hN)=>{var f7=xh(),d7=(t,e)=>t.sort((r,n)=>f7(n,r,e));hN.exports=d7});var _u=k((Qve,gN)=>{var p7=an(),h7=(t,e,r)=>p7(t,e,r)>0;gN.exports=h7});var Ph=k((Xve,vN)=>{var m7=an(),g7=(t,e,r)=>m7(t,e,r)<0;vN.exports=g7});var PC=k((Zve,yN)=>{var v7=an(),y7=(t,e,r)=>v7(t,e,r)!==0;yN.exports=y7});var kh=k((eye,wN)=>{var w7=an(),C7=(t,e,r)=>w7(t,e,r)>=0;wN.exports=C7});var Ih=k((tye,CN)=>{var b7=an(),E7=(t,e,r)=>b7(t,e,r)<=0;CN.exports=E7});var kC=k((rye,bN)=>{var _7=Sh(),S7=PC(),x7=_u(),P7=kh(),k7=Ph(),I7=Ih(),A7=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return _7(t,r,n);case"!=":return S7(t,r,n);case">":return x7(t,r,n);case">=":return P7(t,r,n);case"<":return k7(t,r,n);case"<=":return I7(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};bN.exports=A7});var _N=k((nye,EN)=>{var T7=ar(),D7=zs(),{re:Ah,t:Th}=Gs(),R7=(t,e)=>{if(t instanceof T7)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(Ah[Th.COERCE]);else{let n;for(;(n=Ah[Th.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Ah[Th.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ah[Th.COERCERTL].lastIndex=-1}return r===null?null:D7(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};EN.exports=R7});var TN=k((iye,AN)=>{"use strict";var O7=yl(),Ks=Symbol("max"),Li=Symbol("length"),vc=Symbol("lengthCalculator"),Su=Symbol("allowStale"),Ys=Symbol("maxAge"),Fi=Symbol("dispose"),SN=Symbol("noDisposeOnSet"),jt=Symbol("lruList"),Dn=Symbol("cache"),xN=Symbol("updateAgeOnGet"),IC=()=>1,PN=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[Ks]=e.max||1/0,n=e.length||IC;if(this[vc]=typeof n!="function"?IC:n,this[Su]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ys]=e.maxAge||0,this[Fi]=e.dispose,this[SN]=e.noDisposeOnSet||!1,this[xN]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ks]=e||1/0,xu(this)}get max(){return this[Ks]}set allowStale(e){this[Su]=!!e}get allowStale(){return this[Su]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ys]=e,xu(this)}get maxAge(){return this[Ys]}set lengthCalculator(e){typeof e!="function"&&(e=IC),e!==this[vc]&&(this[vc]=e,this[Li]=0,this[jt].forEach(r=>{r.length=this[vc](r.value,r.key),this[Li]+=r.length})),xu(this)}get lengthCalculator(){return this[vc]}get length(){return this[Li]}get itemCount(){return this[jt].length}rforEach(e,r){r=r||this;for(let n=this[jt].tail;n!==null;){let i=n.prev;IN(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[jt].head;n!==null;){let i=n.next;IN(this,e,n,r),n=i}}keys(){return this[jt].toArray().map(e=>e.key)}values(){return this[jt].toArray().map(e=>e.value)}reset(){this[Fi]&&this[jt]&&this[jt].length&&this[jt].forEach(e=>this[Fi](e.key,e.value)),this[Dn]=new Map,this[jt]=new O7,this[Li]=0}dump(){return this[jt].map(e=>Dh(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[jt]}set(e,r,n){if(n=n||this[Ys],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[vc](r,e);if(this[Dn].has(e)){if(o>this[Ks])return yc(this,this[Dn].get(e)),!1;let c=this[Dn].get(e).value;return this[Fi]&&(this[SN]||this[Fi](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[Li]+=o-c.length,c.length=o,this.get(e),xu(this),!0}let s=new kN(e,r,o,i,n);return s.length>this[Ks]?(this[Fi]&&this[Fi](e,r),!1):(this[Li]+=s.length,this[jt].unshift(s),this[Dn].set(e,this[jt].head),xu(this),!0)}has(e){if(!this[Dn].has(e))return!1;let r=this[Dn].get(e).value;return!Dh(this,r)}get(e){return AC(this,e,!0)}peek(e){return AC(this,e,!1)}pop(){let e=this[jt].tail;return e?(yc(this,e),e.value):null}del(e){yc(this,this[Dn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Dn].forEach((e,r)=>AC(this,r,!1))}},AC=(t,e,r)=>{let n=t[Dn].get(e);if(n){let i=n.value;if(Dh(t,i)){if(yc(t,n),!t[Su])return}else r&&(t[xN]&&(n.value.now=Date.now()),t[jt].unshiftNode(n));return i.value}},Dh=(t,e)=>{if(!e||!e.maxAge&&!t[Ys])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Ys]&&r>t[Ys]},xu=t=>{if(t[Li]>t[Ks])for(let e=t[jt].tail;t[Li]>t[Ks]&&e!==null;){let r=e.prev;yc(t,e),e=r}},yc=(t,e)=>{if(e){let r=e.value;t[Fi]&&t[Fi](r.key,r.value),t[Li]-=r.length,t[Dn].delete(r.key),t[jt].removeNode(e)}},kN=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},IN=(t,e,r,n)=>{let i=r.value;Dh(t,i)&&(yc(t,r),t[Su]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};AN.exports=PN});var cn=k((oye,NN)=>{var wc=class{constructor(e,r){if(r=L7(r),e instanceof wc)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new wc(e.raw,r);if(e instanceof TC)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!RN(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&j7(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=DN.get(n);if(i)return i;let o=this.options.loose,s=o?cr[Yt.HYPHENRANGELOOSE]:cr[Yt.HYPHENRANGE];e=e.replace(s,J7(this.options.includePrerelease)),Ct("hyphen replace",e),e=e.replace(cr[Yt.COMPARATORTRIM],M7),Ct("comparator trim",e,cr[Yt.COMPARATORTRIM]),e=e.replace(cr[Yt.TILDETRIM],q7),e=e.replace(cr[Yt.CARETTRIM],$7),e=e.split(/\s+/).join(" ");let a=o?cr[Yt.COMPARATORLOOSE]:cr[Yt.COMPARATOR],c=e.split(" ").map(d=>U7(d,this.options)).join(" ").split(/\s+/).map(d=>Y7(d,this.options)).filter(this.options.loose?d=>!!d.match(a):()=>!0).map(d=>new TC(d,this.options)),l=c.length,u=new Map;for(let d of c){if(RN(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let f=[...u.values()];return DN.set(n,f),f}intersects(e,r){if(!(e instanceof wc))throw new TypeError("a Range is required");return this.set.some(n=>ON(n,r)&&e.set.some(i=>ON(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new F7(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Q7(this.set[r],e,this.options))return!0;return!1}};NN.exports=wc;var N7=TN(),DN=new N7({max:1e3}),L7=bu(),TC=Pu(),Ct=Cu(),F7=ar(),{re:cr,t:Yt,comparatorTrimReplace:M7,tildeTrimReplace:q7,caretTrimReplace:$7}=Gs(),RN=t=>t.value==="<0.0.0-0",j7=t=>t.value==="",ON=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},U7=(t,e)=>(Ct("comp",t,e),t=V7(t,e),Ct("caret",t),t=B7(t,e),Ct("tildes",t),t=G7(t,e),Ct("xrange",t),t=K7(t,e),Ct("stars",t),t),hr=t=>!t||t.toLowerCase()==="x"||t==="*",B7=(t,e)=>t.trim().split(/\s+/).map(r=>H7(r,e)).join(" "),H7=(t,e)=>{let r=e.loose?cr[Yt.TILDELOOSE]:cr[Yt.TILDE];return t.replace(r,(n,i,o,s,a)=>{Ct("tilde",t,n,i,o,s,a);let c;return hr(i)?c="":hr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:hr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ct("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ct("tilde return",c),c})},V7=(t,e)=>t.trim().split(/\s+/).map(r=>W7(r,e)).join(" "),W7=(t,e)=>{Ct("caret",t,e);let r=e.loose?cr[Yt.CARETLOOSE]:cr[Yt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{Ct("caret",t,i,o,s,a,c);let l;return hr(o)?l="":hr(s)?l=`>=${o}.0.0${n} <${+o+1}.0.0-0`:hr(a)?o==="0"?l=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(Ct("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ct("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ct("caret return",l),l})},G7=(t,e)=>(Ct("replaceXRanges",t,e),t.split(/\s+/).map(r=>z7(r,e)).join(" ")),z7=(t,e)=>{t=t.trim();let r=e.loose?cr[Yt.XRANGELOOSE]:cr[Yt.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{Ct("xRange",t,n,i,o,s,a,c);let l=hr(o),u=l||hr(s),f=u||hr(a),d=f;return i==="="&&d&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):u?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ct("xRange return",n),n})},K7=(t,e)=>(Ct("replaceStars",t,e),t.trim().replace(cr[Yt.STAR],"")),Y7=(t,e)=>(Ct("replaceGTE0",t,e),t.trim().replace(cr[e.includePrerelease?Yt.GTE0PRE:Yt.GTE0],"")),J7=t=>(e,r,n,i,o,s,a,c,l,u,f,d,p)=>(hr(n)?r="":hr(i)?r=`>=${n}.0.0${t?"-0":""}`:hr(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,hr(l)?c="":hr(u)?c=`<${+l+1}.0.0-0`:hr(f)?c=`<${l}.${+u+1}.0-0`:d?c=`<=${l}.${u}.${f}-${d}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Q7=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ct(t[n].semver),t[n].semver!==TC.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Pu=k((sye,$N)=>{var ku=Symbol("SemVer ANY"),Iu=class{static get ANY(){return ku}constructor(e,r){if(r=X7(r),e instanceof Iu){if(e.loose===!!r.loose)return e;e=e.value}RC("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ku?this.value="":this.value=this.operator+this.semver.version,RC("comp",this)}parse(e){let r=this.options.loose?LN[FN.COMPARATORLOOSE]:LN[FN.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new MN(n[2],this.options.loose):this.semver=ku}toString(){return this.value}test(e){if(RC("Comparator.test",e,this.options.loose),this.semver===ku||e===ku)return!0;if(typeof e=="string")try{e=new MN(e,this.options)}catch{return!1}return DC(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Iu))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new qN(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new qN(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=DC(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=DC(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c}};$N.exports=Iu;var X7=bu(),{re:LN,t:FN}=Gs(),DC=kC(),RC=Cu(),MN=ar(),qN=cn()});var Au=k((aye,jN)=>{var Z7=cn(),eJ=(t,e,r)=>{try{e=new Z7(e,r)}catch{return!1}return e.test(t)};jN.exports=eJ});var BN=k((cye,UN)=>{var tJ=cn(),rJ=(t,e)=>new tJ(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));UN.exports=rJ});var VN=k((lye,HN)=>{var nJ=ar(),iJ=cn(),oJ=(t,e,r)=>{let n=null,i=null,o=null;try{o=new iJ(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new nJ(n,r))}),n};HN.exports=oJ});var GN=k((uye,WN)=>{var sJ=ar(),aJ=cn(),cJ=(t,e,r)=>{let n=null,i=null,o=null;try{o=new aJ(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new sJ(n,r))}),n};WN.exports=cJ});var YN=k((fye,KN)=>{var OC=ar(),lJ=cn(),zN=_u(),uJ=(t,e)=>{t=new lJ(t,e);let r=new OC("0.0.0");if(t.test(r)||(r=new OC("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new OC(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||zN(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||zN(r,o))&&(r=o)}return r&&t.test(r)?r:null};KN.exports=uJ});var QN=k((dye,JN)=>{var fJ=cn(),dJ=(t,e)=>{try{return new fJ(t,e).range||"*"}catch{return null}};JN.exports=dJ});var Rh=k((pye,t1)=>{var pJ=ar(),XN=Pu(),{ANY:hJ}=XN,mJ=cn(),gJ=Au(),ZN=_u(),e1=Ph(),vJ=Ih(),yJ=kh(),wJ=(t,e,r,n)=>{t=new pJ(t,n),e=new mJ(e,n);let i,o,s,a,c;switch(r){case">":i=ZN,o=vJ,s=e1,a=">",c=">=";break;case"<":i=e1,o=yJ,s=ZN,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(gJ(t,e,n))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,d=null;if(u.forEach(p=>{p.semver===hJ&&(p=new XN(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===c&&s(t,d.semver))return!1}return!0};t1.exports=wJ});var n1=k((hye,r1)=>{var CJ=Rh(),bJ=(t,e,r)=>CJ(t,e,">",r);r1.exports=bJ});var o1=k((mye,i1)=>{var EJ=Rh(),_J=(t,e,r)=>EJ(t,e,"<",r);i1.exports=_J});var c1=k((gye,a1)=>{var s1=cn(),SJ=(t,e,r)=>(t=new s1(t,r),e=new s1(e,r),t.intersects(e));a1.exports=SJ});var u1=k((vye,l1)=>{var xJ=Au(),PJ=an();l1.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((u,f)=>PJ(u,f,r));for(let u of s)xJ(u,e,r)?(o=u,i||(i=u)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[u,f]of n)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var m1=k((yye,h1)=>{var f1=cn(),Oh=Pu(),{ANY:NC}=Oh,Tu=Au(),LC=an(),kJ=(t,e,r={})=>{if(t===e)return!0;t=new f1(t,r),e=new f1(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=IJ(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},IJ=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===NC){if(e.length===1&&e[0].semver===NC)return!0;r.includePrerelease?t=[new Oh(">=0.0.0-0")]:t=[new Oh(">=0.0.0")]}if(e.length===1&&e[0].semver===NC){if(r.includePrerelease)return!0;e=[new Oh(">=0.0.0")]}let n=new Set,i,o;for(let p of t)p.operator===">"||p.operator===">="?i=d1(i,p,r):p.operator==="<"||p.operator==="<="?o=p1(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=LC(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!Tu(p,String(i),r)||o&&!Tu(p,String(o),r))return null;for(let h of e)if(!Tu(p,String(h),r))return!1;return!0}let a,c,l,u,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of e){if(u=u||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator===">"||p.operator===">="){if(a=d1(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Tu(i.semver,String(p),r))return!1}if(o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(c=p1(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Tu(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&u&&!i&&s!==0||d||f)},d1=(t,e,r)=>{if(!t)return e;let n=LC(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},p1=(t,e,r)=>{if(!t)return e;let n=LC(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};h1.exports=kJ});var v1=k((wye,g1)=>{var FC=Gs();g1.exports={re:FC.re,src:FC.src,tokens:FC.t,SEMVER_SPEC_VERSION:wu().SEMVER_SPEC_VERSION,SemVer:ar(),compareIdentifiers:bh().compareIdentifiers,rcompareIdentifiers:bh().rcompareIdentifiers,parse:zs(),valid:UO(),clean:HO(),inc:WO(),diff:QO(),major:ZO(),minor:tN(),patch:nN(),prerelease:oN(),compare:an(),rcompare:aN(),compareLoose:lN(),compareBuild:xh(),sort:pN(),rsort:mN(),gt:_u(),lt:Ph(),eq:Sh(),neq:PC(),gte:kh(),lte:Ih(),cmp:kC(),coerce:_N(),Comparator:Pu(),Range:cn(),satisfies:Au(),toComparators:BN(),maxSatisfying:VN(),minSatisfying:GN(),minVersion:YN(),validRange:QN(),outside:Rh(),gtr:n1(),ltr:o1(),intersects:c1(),simplifyRange:u1(),subset:m1()}});var mF=k(hF=>{var yQ=Object.create,$u=Object.defineProperty,wQ=Object.getOwnPropertyDescriptor,CQ=Object.getOwnPropertyNames,_L=Object.getOwnPropertySymbols,bQ=Object.getPrototypeOf,SL=Object.prototype.hasOwnProperty,EQ=Object.prototype.propertyIsEnumerable,xL=(t,e,r)=>e in t?$u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lo=(t,e)=>{for(var r in e||(e={}))SL.call(e,r)&&xL(t,r,e[r]);if(_L)for(var r of _L(e))EQ.call(e,r)&&xL(t,r,e[r]);return t},PL=t=>$u(t,"__esModule",{value:!0}),O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_Q=(t,e)=>{PL(t);for(var r in e)$u(t,r,{get:e[r],enumerable:!0})},SQ=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of CQ(e))!SL.call(t,n)&&n!=="default"&&$u(t,n,{get:()=>e[n],enumerable:!(r=wQ(e,n))||r.enumerable});return t},ju=t=>SQ(PL($u(t!=null?yQ(bQ(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Qt=O((t,e)=>{"use strict";var r=function(){function n(){}return n.info=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.enableDebug&&console.info(n.TAG+i,o)},n.warn=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];n.disableWarnings||console.warn(n.TAG+i,o)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();e.exports=r}),kL=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncScopeManager=t.OpenTelemetryScopeManagerWrapper=void 0;var r=Rc(),n=require("events"),i=function(){function o(){}return o.prototype.active=function(){var s=this,a=r.CorrelationContextManager.getCurrentContext();return e(e({},a),{getValue:function(c){return s._activeSymbol?c===s._activeSymbol?a:!1:(s._activeSymbol=c,a)},setValue:function(){}})},o.prototype.with=function(s,a){var c=s.parentSpanId,l=s.name,u=o._spanToContext(s,c,l);return r.CorrelationContextManager.runWithContext(u,a)()},o.prototype.bind=function(s){return typeof s=="function"?r.CorrelationContextManager.wrapCallback(s):(s instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(s),s)},o.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},o.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},o._spanToContext=function(s,a,c){var l=a?"|"+s.spanContext().traceId+"."+a+".":s.spanContext().traceId,u=e(e({},s.spanContext()),{traceFlags:s.spanContext().traceFlags}),f=r.CorrelationContextManager.spanToContextObject(u,l,c);return f},o}();t.OpenTelemetryScopeManagerWrapper=i,t.AsyncScopeManager=new i}),xQ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var f=c++;a[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=c++;a[d]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[f]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[f]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[d]+a[g]+"?"+a[b]+"?";a[C]="^"+S+"$";var _="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",P=c++;a[P]="^"+_+"$";var I=c++;a[I]="((?:<|>)?=?)";var A=c++;a[A]=a[u]+"|x|X|\\*";var R=c++;a[R]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var H=c++;a[H]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var X=c++;a[X]="^"+a[I]+"\\s*"+a[F]+"$";var J=c++;a[J]="^"+a[I]+"\\s*"+a[H]+"$";var Y=c++;a[Y]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var M=c++;a[M]="(\\s*)"+a[te]+"\\s+",s[M]=new RegExp(a[M],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[F]+"$";var V=c++;a[V]="^"+a[te]+a[H]+"$";var z=c++;a[z]="(?:\\^)";var oe=c++;a[oe]="(\\s*)"+a[z]+"\\s+",s[oe]=new RegExp(a[oe],"g");var re="$1^",be=c++;a[be]="^"+a[z]+a[F]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[H]+"$";var xe=c++;a[xe]="^"+a[I]+"\\s*("+_+")$|^$";var Te=c++;a[Te]="^"+a[I]+"\\s*("+S+")$|^$";var he=c++;a[he]="(\\s*)"+a[I]+"\\s*("+_+"|"+a[F]+")",s[he]=new RegExp(a[he],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var pe=c++;for(a[pe]="(<|>)?=?\\s*\\*",Ce=0;Ce<c;Ce++)r(Ce,a[Ce]),s[Ce]||(s[Ce]=new RegExp(a[Ce]));var Ce;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[P]:s[C];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Xo;function Xo(y,E){var x=je(y,E);return x?x.version:null}t.clean=Zo;function Zo(y,E){var x=je(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[P]:s[C]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var N=+D;if(N>=0&&N<i)return N}return D}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),st(this.major,y.major)||st(this.minor,y.minor)||st(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],D=y.prerelease[E];if(r("prerelease compare",E,x,D),x===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(x===void 0)return-1;if(x!==D)return st(x,D)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=es;function es(y,E,x,D){typeof x=="string"&&(D=x,x=void 0);try{return new Q(y,x).inc(E,D).version}catch{return null}}t.diff=ts;function ts(y,E){if(vr(y,E))return null;var x=je(y),D=je(E),N="";if(x.prerelease.length||D.prerelease.length){N="pre";var $="prerelease"}for(var B in x)if((B==="major"||B==="minor"||B==="patch")&&x[B]!==D[B])return N+B;return $}t.compareIdentifiers=st;var Ir=/^[0-9]+$/;function st(y,E){var x=Ir.test(y),D=Ir.test(E);return x&&D&&(y=+y,E=+E),y===E?0:x&&!D?-1:D&&!x?1:y<E?-1:1}t.rcompareIdentifiers=Bn;function Bn(y,E){return st(E,y)}t.major=ur;function ur(y,E){return new Q(y,E).major}t.minor=Gi;function Gi(y,E){return new Q(y,E).minor}t.patch=zi;function zi(y,E){return new Q(y,E).patch}t.compare=Ge;function Ge(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=rs;function rs(y,E){return Ge(y,E,!0)}t.rcompare=Hn;function Hn(y,E,x){return Ge(E,y,x)}t.sort=Ki;function Ki(y,E){return y.sort(function(x,D){return t.compare(x,D,E)})}t.rsort=Yi;function Yi(y,E){return y.sort(function(x,D){return t.rcompare(x,D,E)})}t.gt=Et;function Et(y,E,x){return Ge(y,E,x)>0}t.lt=Bt;function Bt(y,E,x){return Ge(y,E,x)<0}t.eq=vr;function vr(y,E,x){return Ge(y,E,x)===0}t.neq=Vn;function Vn(y,E,x){return Ge(y,E,x)!==0}t.gte=Ar;function Ar(y,E,x){return Ge(y,E,x)>=0}t.lte=At;function At(y,E,x){return Ge(y,E,x)<=0}t.cmp=Tt;function Tt(y,E,x,D){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return vr(y,x,D);case"!=":return Vn(y,x,D);case">":return Et(y,x,D);case">=":return Ar(y,x,D);case"<":return Bt(y,x,D);case"<=":return At(y,x,D);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Ie;function Ie(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Ie){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Ie))return new Ie(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Ie.prototype.parse=function(y){var E=this.options.loose?s[xe]:s[Te],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Ie.prototype.toString=function(){return this.value},Ie.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===_t?!0:(typeof y=="string"&&(y=new Q(y,this.options)),Tt(y,this.operator,this.semver,this.options))},Ie.prototype.intersects=function(y,E){if(!(y instanceof Ie))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(y.value,E),er(this.value,x,E);if(y.operator==="")return x=new ce(this.value,E),er(y.semver,x,E);var D=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),$=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ee=Tt(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),Z=Tt(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return D||N||$&&B||ee||Z},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof Ie)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ye]:s[It];y=y.replace(x,cs),r("hyphen replace",y),y=y.replace(s[he],yt),r("comparator trim",y,s[he]),y=y.replace(s[M],L),y=y.replace(s[oe],re),y=y.split(/\s+/).join(" ");var D=E?s[xe]:s[Te],N=y.split(" ").map(function($){return Cn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(D)})),N=N.map(function($){return new Ie($,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(D){return y.set.some(function(N){return N.every(function($){return D.intersects($,E)})})})})},t.toComparators=Ji;function Ji(y,E){return new ce(y,E).set.map(function(x){return x.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Cn(y,E){return r("comp",y,E),y=is(y,E),r("caret",y),y=Tr(y,E),r("tildes",y),y=ss(y,E),r("xrange",y),y=fr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Tr(y,E){return y.trim().split(/\s+/).map(function(x){return ns(x,E)}).join(" ")}function ns(y,E){var x=E.loose?s[V]:s[q];return y.replace(x,function(D,N,$,B,ee){r("tilde",y,D,N,$,B,ee);var Z;return we(N)?Z="":we($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+(+$+1)+".0"):Z=">="+N+"."+$+"."+B+" <"+N+"."+(+$+1)+".0",r("tilde return",Z),Z})}function is(y,E){return y.trim().split(/\s+/).map(function(x){return os(x,E)}).join(" ")}function os(y,E){r("caret",y,E);var x=E.loose?s[Pe]:s[be];return y.replace(x,function(D,N,$,B,ee){r("caret",y,D,N,$,B,ee);var Z;return we(N)?Z="":we($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?N==="0"?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?$==="0"?Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+$+"."+(+B+1):Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+B+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?Z=">="+N+"."+$+"."+B+" <"+N+"."+$+"."+(+B+1):Z=">="+N+"."+$+"."+B+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+B+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function ss(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return as(x,E)}).join(" ")}function as(y,E){y=y.trim();var x=E.loose?s[J]:s[X];return y.replace(x,function(D,N,$,B,ee,Z){r("xRange",y,D,N,$,B,ee,Z);var Me=we($),De=Me||we(B),ke=De||we(ee),_e=ke;return N==="="&&_e&&(N=""),Me?N===">"||N==="<"?D="<0.0.0":D="*":N&&_e?(De&&(B=0),ee=0,N===">"?(N=">=",De?($=+$+1,B=0,ee=0):(B=+B+1,ee=0)):N==="<="&&(N="<",De?$=+$+1:B=+B+1),D=N+$+"."+B+"."+ee):De?D=">="+$+".0.0 <"+(+$+1)+".0.0":ke&&(D=">="+$+"."+B+".0 <"+$+"."+(+B+1)+".0"),r("xRange return",D),D})}function fr(y,E){return r("replaceStars",y,E),y.trim().replace(s[pe],"")}function cs(y,E,x,D,N,$,B,ee,Z,Me,De,ke,_e){return we(x)?E="":we(D)?E=">="+x+".0.0":we(N)?E=">="+x+"."+D+".0":E=">="+E,we(Z)?ee="":we(Me)?ee="<"+(+Z+1)+".0.0":we(De)?ee="<"+Z+"."+(+Me+1)+".0":ke?ee="<="+Z+"."+Me+"."+De+"-"+ke:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(ls(this.set[E],y,this.options))return!0;return!1};function ls(y,E,x){for(var D=0;D<y.length;D++)if(!y[D].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(D=0;D<y.length;D++)if(r(y[D].semver),y[D].semver!==_t&&y[D].semver.prerelease.length>0){var N=y[D].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(y,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=us;function us(y,E,x){var D=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(B){$.test(B)&&(!D||N.compare(B)===-1)&&(D=B,N=new Q(D,x))}),D}t.minSatisfying=fs;function fs(y,E,x){var D=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(B){$.test(B)&&(!D||N.compare(B)===1)&&(D=B,N=new Q(D,x))}),D}t.minVersion=Wr;function Wr(y,E){y=new ce(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var D=0;D<y.set.length;++D){var N=y.set[D];N.forEach(function($){var B=new Q($.semver.version);switch($.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!x||Et(x,B))&&(x=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&y.test(x)?x:null}t.validRange=ds;function ds(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=ps;function ps(y,E,x){return Dr(y,E,"<",x)}t.gtr=hs;function hs(y,E,x){return Dr(y,E,">",x)}t.outside=Dr;function Dr(y,E,x,D){y=new Q(y,D),E=new ce(E,D);var N,$,B,ee,Z;switch(x){case">":N=Et,$=At,B=Bt,ee=">",Z=">=";break;case"<":N=Bt,$=Ar,B=Et,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(y,E,D))return!1;for(var Me=0;Me<E.set.length;++Me){var De=E.set[Me],ke=null,_e=null;if(De.forEach(function(Je){Je.semver===_t&&(Je=new Ie(">=0.0.0")),ke=ke||Je,_e=_e||Je,N(Je.semver,ke.semver,D)?ke=Je:B(Je.semver,_e.semver,D)&&(_e=Je)}),ke.operator===ee||ke.operator===Z||(!_e.operator||_e.operator===ee)&&$(y,_e.semver)||_e.operator===Z&&B(y,_e.semver))return!1}return!0}t.prerelease=ms;function ms(y,E){var x=je(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Gr;function Gr(y,E,x){return y=new ce(y,x),E=new ce(E,x),y.intersects(E)}t.coerce=gs;function gs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[Y]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),IL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makePatchingRequire=void 0;var e=require("path"),r=xQ(),n=require("module"),i=Object.keys(process.binding("natives")),o=n.prototype.require;function s(a){var c={};return function(l){var u=o.apply(this,arguments);if(a[l]){var f=n._resolveFilename(l,this);if(c.hasOwnProperty(f))return c[f];var d=void 0;if(i.indexOf(l)<0)try{d=o.call(this,e.join(l,"package.json")).version}catch{return u}else d=process.version.substring(1);var p=d.indexOf("-");p>=0&&(d=d.substring(0,p));for(var h=u,m=0,g=a[l];m<g.length;m++){var v=g[m];r.satisfies(d,v.versionSpecifier)&&(h=v.patch(h,f))}return c[f]=h}return u}}t.makePatchingRequire=s}),PQ=O((t,e)=>{e.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Pt=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channel=t.makePatchingRequire=void 0;var e=IL(),r=IL();Object.defineProperty(t,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(s){return!0},i=function(){function s(){this.version=PQ().version,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return s.prototype.shouldPublish=function(a){var c=this.subscribers[a];return c?c.some(function(l){var u=l.filter;return!u||u(!1)}):!1},s.prototype.publish=function(a,c){if(!this.currentlyPublishing){var l=this.subscribers[a];if(l){var u={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(f){var d=f.listener,p=f.filter;try{p&&p(!0)&&d(u)}catch{}}),this.currentlyPublishing=!1}}},s.prototype.subscribe=function(a,c,l){l===void 0&&(l=n),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:c,filter:l})},s.prototype.unsubscribe=function(a,c,l){l===void 0&&(l=n);var u=this.subscribers[a];if(u){for(var f=0;f<u.length;++f)if(u[f].listener===c&&u[f].filter===l)return u.splice(f,1),!0}return!1},s.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete a.knownPatches[c]})},s.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},s.prototype.addContextPreservation=function(a){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return a(c(l))}},s.prototype.registerMonkeyPatch=function(a,c){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(c)},s.prototype.getPatchesObject=function(){return this.knownPatches},s}();global.diagnosticsSource||(global.diagnosticsSource=new i,o=require("module"),o.prototype.require=e.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var o;t.channel=global.diagnosticsSource}),kQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),IQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis=typeof globalThis=="object"?globalThis:global}),AQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(IQ(),t)}),TQ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(AQ(),t)}),AL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.3"}),DQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var e=AL(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(i){var o=new Set([i]),s=new Set,a=i.match(r);if(!a)return function(){return!1};var c={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(c.prerelease!=null)return function(f){return f===i};function l(f){return s.add(f),!1}function u(f){return o.add(f),!0}return function(f){if(o.has(f))return!0;if(s.has(f))return!1;var d=f.match(r);if(!d)return l(f);var p={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return p.prerelease!=null||c.major!==p.major?l(f):c.major===0?c.minor===p.minor&&c.patch<=p.patch?u(f):l(f):c.minor<=p.minor?u(f):l(f)}}t._makeCompatibilityCheck=n,t.isCompatible=n(e.VERSION)}),Uu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var e=TQ(),r=AL(),n=DQ(),i=r.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+i),s=e._globalThis;function a(u,f,d,p){var h;p===void 0&&(p=!1);var m=s[o]=(h=s[o])!==null&&h!==void 0?h:{version:r.VERSION};if(!p&&m[u]){var g=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+u);return d.error(g.stack||g.message),!1}if(m.version!==r.VERSION){var g=new Error("@opentelemetry/api: All API registration versions must match");return d.error(g.stack||g.message),!1}return m[u]=f,d.debug("@opentelemetry/api: Registered a global for "+u+" v"+r.VERSION+"."),!0}t.registerGlobal=a;function c(u){var f,d,p=(f=s[o])===null||f===void 0?void 0:f.version;if(!(!p||!n.isCompatible(p)))return(d=s[o])===null||d===void 0?void 0:d[u]}t.getGlobal=c;function l(u,f){f.debug("@opentelemetry/api: Unregistering a global for "+u+" v"+r.VERSION+".");var d=s[o];d&&delete d[u]}t.unregisterGlobal=l}),RQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;var e=Uu(),r=function(){function i(o){this._namespace=o.namespace||"DiagComponentLogger"}return i.prototype.debug=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("debug",this._namespace,o)},i.prototype.error=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("error",this._namespace,o)},i.prototype.info=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("info",this._namespace,o)},i.prototype.warn=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("warn",this._namespace,o)},i.prototype.verbose=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n("verbose",this._namespace,o)},i}();t.DiagComponentLogger=r;function n(i,o,s){var a=e.getGlobal("diag");if(a)return s.unshift(o),a[i].apply(a,s)}}),pb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(e=t.DiagLogLevel||(t.DiagLogLevel={}))}),OQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var e=pb();function r(n,i){n<e.DiagLogLevel.NONE?n=e.DiagLogLevel.NONE:n>e.DiagLogLevel.ALL&&(n=e.DiagLogLevel.ALL),i=i||{};function o(s,a){var c=i[s];return typeof c=="function"&&n>=a?c.bind(i):function(){}}return{error:o("error",e.DiagLogLevel.ERROR),warn:o("warn",e.DiagLogLevel.WARN),info:o("info",e.DiagLogLevel.INFO),debug:o("debug",e.DiagLogLevel.DEBUG),verbose:o("verbose",e.DiagLogLevel.VERBOSE)}}t.createLogLevelDiagLogger=r}),Bu=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var e=RQ(),r=OQ(),n=pb(),i=Uu(),o="diag",s=function(){function a(){function c(u){return function(){var f=i.getGlobal("diag");if(f)return f[u].apply(f,arguments)}}var l=this;l.setLogger=function(u,f){var d,p;if(f===void 0&&(f=n.DiagLogLevel.INFO),u===l){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((d=h.stack)!==null&&d!==void 0?d:h.message),!1}var m=i.getGlobal("diag"),g=r.createLogLevelDiagLogger(f,u);if(m){var v=(p=new Error().stack)!==null&&p!==void 0?p:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+v),g.warn("Current logger will overwrite one already registered from "+v)}return i.registerGlobal("diag",g,l,!0)},l.disable=function(){i.unregisterGlobal(o,l)},l.createComponentLogger=function(u){return new e.DiagComponentLogger(u)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return a.instance=function(){return this._instance||(this._instance=new a),this._instance},a}();t.DiagAPI=s}),NQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var e=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var i=this._entries.get(n);if(i)return Object.assign({},i)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var i=n[0],o=n[1];return[i,o]})},r.prototype.setEntry=function(n,i){var o=new r(this._entries);return o._entries.set(n,i),o},r.prototype.removeEntry=function(n){var i=new r(this._entries);return i._entries.delete(n),i},r.prototype.removeEntries=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=new r(this._entries),s=0,a=n;s<a.length;s++){var c=a[s];o._entries.delete(c)}return o},r.prototype.clear=function(){return new r},r}();t.BaggageImpl=e}),LQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),TL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var e=Bu(),r=NQ(),n=LQ(),i=e.DiagAPI.instance();function o(a){return a===void 0&&(a={}),new r.BaggageImpl(new Map(Object.entries(a)))}t.createBaggage=o;function s(a){return typeof a!="string"&&(i.error("Cannot create baggage metadata from unknown type: "+typeof a),a=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return a}}}t.baggageEntryMetadataFromString=s}),FQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),MQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),qQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var e=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function i(s){return function(){var a=arguments;if(console){var c=console[s];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,a)}}}for(var o=0;o<e.length;o++)this[e[o].n]=i(e[o].c)}return n}();t.DiagConsoleLogger=r}),$Q=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(qQ(),t),r(pb(),t)}),DL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,r){if(e!=null)return e[r]},keys:function(e){return e==null?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,r,n){e!=null&&(e[r]=n)}}}),jQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),UQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),am=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0;function e(n){return Symbol.for(n)}t.createContextKey=e;var r=function(){function n(i){var o=this;o._currentContext=i?new Map(i):new Map,o.getValue=function(s){return o._currentContext.get(s)},o.setValue=function(s,a){var c=new n(o._currentContext);return c._currentContext.set(s,a),c},o.deleteValue=function(s){var a=new n(o._currentContext);return a._currentContext.delete(s),a}}return n}();t.ROOT_CONTEXT=new r}),BQ=O(t=>{"use strict";var e=t&&t.__spreadArray||function(i,o){for(var s=0,a=o.length,c=i.length;s<a;s++,c++)i[c]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var r=am(),n=function(){function i(){}return i.prototype.active=function(){return r.ROOT_CONTEXT},i.prototype.with=function(o,s,a){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return s.call.apply(s,e([a],c))},i.prototype.bind=function(o,s){return s},i.prototype.enable=function(){return this},i.prototype.disable=function(){return this},i}();t.NoopContextManager=n}),RL=O(t=>{"use strict";var e=t&&t.__spreadArray||function(c,l){for(var u=0,f=l.length,d=c.length;u<f;u++,d++)c[d]=l[u];return c};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var r=BQ(),n=Uu(),i=Bu(),o="context",s=new r.NoopContextManager,a=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(o,l,i.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,u,f){for(var d,p=[],h=3;h<arguments.length;h++)p[h-3]=arguments[h];return(d=this._getContextManager()).with.apply(d,e([l,u,f],p))},c.prototype.bind=function(l,u){return this._getContextManager().bind(l,u)},c.prototype._getContextManager=function(){return n.getGlobal(o)||s},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,i.DiagAPI.instance())},c}();t.ContextAPI=a}),OL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0;var e;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(e=t.TraceFlags||(t.TraceFlags={}))}),hb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var e=OL();t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:e.TraceFlags.NONE}}),mb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;var e=hb(),r=function(){function n(i){i===void 0&&(i=e.INVALID_SPAN_CONTEXT),this._spanContext=i}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(i,o){return this},n.prototype.setAttributes=function(i){return this},n.prototype.addEvent=function(i,o){return this},n.prototype.setStatus=function(i){return this},n.prototype.updateName=function(i){return this},n.prototype.end=function(i){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(i,o){},n}();t.NonRecordingSpan=r}),NL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getSpan=void 0;var e=am(),r=mb(),n=e.createContextKey("OpenTelemetry Context Key SPAN");function i(l){return l.getValue(n)||void 0}t.getSpan=i;function o(l,u){return l.setValue(n,u)}t.setSpan=o;function s(l){return l.deleteValue(n)}t.deleteSpan=s;function a(l,u){return o(l,new r.NonRecordingSpan(u))}t.setSpanContext=a;function c(l){var u;return(u=i(l))===null||u===void 0?void 0:u.spanContext()}t.getSpanContext=c}),gb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;var e=hb(),r=mb(),n=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(l){return n.test(l)&&l!==e.INVALID_TRACEID}t.isValidTraceId=o;function s(l){return i.test(l)&&l!==e.INVALID_SPANID}t.isValidSpanId=s;function a(l){return o(l.traceId)&&s(l.spanId)}t.isSpanContextValid=a;function c(l){return new r.NonRecordingSpan(l)}t.wrapSpanContext=c}),LL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;var e=RL(),r=NL(),n=mb(),i=gb(),o=e.ContextAPI.getInstance(),s=function(){function c(){}return c.prototype.startSpan=function(l,u,f){var d=Boolean(u==null?void 0:u.root);if(d)return new n.NonRecordingSpan;var p=f&&r.getSpanContext(f);return a(p)&&i.isSpanContextValid(p)?new n.NonRecordingSpan(p):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,u,f,d){var p,h,m;if(!(arguments.length<2)){arguments.length===2?m=u:arguments.length===3?(p=u,m=f):(p=u,h=f,m=d);var g=h!=null?h:o.active(),v=this.startSpan(l,p,g),w=r.setSpan(g,v);return o.with(w,m,void 0,v)}},c}();t.NoopTracer=s;function a(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),FL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var e=LL(),r=new e.NoopTracer,n=function(){function i(o,s,a){this._provider=o,this.name=s,this.version=a}return i.prototype.startSpan=function(o,s,a){return this._getTracer().startSpan(o,s,a)},i.prototype.startActiveSpan=function(o,s,a,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},i.prototype._getTracer=function(){if(this._delegate)return this._delegate;var o=this._provider.getDelegateTracer(this.name,this.version);return o?(this._delegate=o,this._delegate):r},i}();t.ProxyTracer=n}),HQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;var e=LL(),r=function(){function n(){}return n.prototype.getTracer=function(i,o){return new e.NoopTracer},n}();t.NoopTracerProvider=r}),ML=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var e=FL(),r=HQ(),n=new r.NoopTracerProvider,i=function(){function o(){}return o.prototype.getTracer=function(s,a){var c;return(c=this.getDelegateTracer(s,a))!==null&&c!==void 0?c:new e.ProxyTracer(this,s,a)},o.prototype.getDelegate=function(){var s;return(s=this._delegate)!==null&&s!==void 0?s:n},o.prototype.setDelegate=function(s){this._delegate=s},o.prototype.getDelegateTracer=function(s,a){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(s,a)},o}();t.ProxyTracerProvider=i}),VQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),WQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0;var e;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(e=t.SamplingDecision||(t.SamplingDecision={}))}),GQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),zQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0;var e;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(e=t.SpanKind||(t.SpanKind={}))}),KQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),YQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0;var e;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(e=t.SpanStatusCode||(t.SpanStatusCode={}))}),QQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),XQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),ZQ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),tX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var e=Uu(),r=ML(),n=gb(),i=NL(),o=Bu(),s="trace",a=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var u=e.registerGlobal(s,this._proxyTracerProvider,o.DiagAPI.instance());return u&&this._proxyTracerProvider.setDelegate(l),u},c.prototype.getTracerProvider=function(){return e.getGlobal(s)||this._proxyTracerProvider},c.prototype.getTracer=function(l,u){return this.getTracerProvider().getTracer(l,u)},c.prototype.disable=function(){e.unregisterGlobal(s,o.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();t.TraceAPI=a}),rX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;var e=function(){function r(){}return r.prototype.inject=function(n,i){},r.prototype.extract=function(n,i){return n},r.prototype.fields=function(){return[]},r}();t.NoopTextMapPropagator=e}),nX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getBaggage=void 0;var e=am(),r=e.createContextKey("OpenTelemetry Baggage Key");function n(s){return s.getValue(r)||void 0}t.getBaggage=n;function i(s,a){return s.setValue(r,a)}t.setBaggage=i;function o(s){return s.deleteValue(r)}t.deleteBaggage=o}),iX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var e=Uu(),r=rX(),n=DL(),i=nX(),o=TL(),s=Bu(),a="propagation",c=new r.NoopTextMapPropagator,l=function(){function u(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}return u.getInstance=function(){return this._instance||(this._instance=new u),this._instance},u.prototype.setGlobalPropagator=function(f){return e.registerGlobal(a,f,s.DiagAPI.instance())},u.prototype.inject=function(f,d,p){return p===void 0&&(p=n.defaultTextMapSetter),this._getGlobalPropagator().inject(f,d,p)},u.prototype.extract=function(f,d,p){return p===void 0&&(p=n.defaultTextMapGetter),this._getGlobalPropagator().extract(f,d,p)},u.prototype.fields=function(){return this._getGlobalPropagator().fields()},u.prototype.disable=function(){e.unregisterGlobal(a,s.DiagAPI.instance())},u.prototype._getGlobalPropagator=function(){return e.getGlobal(a)||c},u}();t.PropagationAPI=l}),ft=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(u,f,d,p){p===void 0&&(p=d),Object.defineProperty(u,p,{enumerable:!0,get:function(){return f[d]}})}:function(u,f,d,p){p===void 0&&(p=d),u[p]=f[d]}),r=t&&t.__exportStar||function(u,f){for(var d in u)d!=="default"&&!Object.prototype.hasOwnProperty.call(f,d)&&e(f,u,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.baggageEntryMetadataFromString=void 0,r(kQ(),t);var n=TL();Object.defineProperty(t,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(FQ(),t),r(MQ(),t),r($Q(),t),r(DL(),t),r(jQ(),t),r(UQ(),t),r(FL(),t),r(ML(),t),r(VQ(),t),r(WQ(),t),r(GQ(),t),r(zQ(),t),r(KQ(),t),r(YQ(),t),r(JQ(),t),r(OL(),t),r(QQ(),t),r(XQ(),t),r(ZQ(),t);var i=gb();Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}});var o=hb();Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),r(am(),t),r(eX(),t);var s=RL();t.context=s.ContextAPI.getInstance();var a=tX();t.trace=a.TraceAPI.getInstance();var c=iX();t.propagation=c.PropagationAPI.getInstance();var l=Bu();t.diag=l.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}}),vb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;var e=ft(),r=e.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(s){return s.setValue(r,!0)}t.suppressTracing=n;function i(s){return s.deleteValue(r)}t.unsuppressTracing=i;function o(s){return s.getValue(r)===!0}t.isTracingSuppressed=o}),qL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,t.BAGGAGE_KEY_PAIR_SEPARATOR="=",t.BAGGAGE_PROPERTIES_SEPARATOR=";",t.BAGGAGE_ITEMS_SEPARATOR=",",t.BAGGAGE_HEADER="baggage",t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,t.BAGGAGE_MAX_TOTAL_LENGTH=8192}),$L=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;var e=ft(),r=qL(),n=a=>a.reduce((c,l)=>{let u=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return u.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:u},"");t.serializeKeyPairs=n;var i=a=>a.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);t.getKeyPairs=i;var o=a=>{let c=a.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let u=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(u.length!==2)return;let f=decodeURIComponent(u[0].trim()),d=decodeURIComponent(u[1].trim()),p;return c.length>0&&(p=e.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:f,value:d,metadata:p}};t.parsePairKeyValue=o;var s=a=>typeof a!="string"||a.length===0?{}:a.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>t.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});t.parseKeyPairsIntoRecord=s}),oX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpBaggagePropagator=void 0;var e=ft(),r=vb(),n=qL(),i=$L(),o=class{inject(s,a,c){let l=e.propagation.getBaggage(s);if(!l||r.isTracingSuppressed(s))return;let u=i.getKeyPairs(l).filter(d=>d.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),f=i.serializeKeyPairs(u);f.length>0&&c.set(a,n.BAGGAGE_HEADER,f)}extract(s,a,c){let l=c.get(a,n.BAGGAGE_HEADER);if(!l)return s;let u={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(f=>{let d=i.parsePairKeyValue(f);if(d){let p={value:d.value};d.metadata&&(p.metadata=d.metadata),u[d.key]=p}}),Object.entries(u).length===0)?s:e.propagation.setBaggage(s,e.propagation.createBaggage(u))}fields(){return[n.BAGGAGE_HEADER]}};t.HttpBaggagePropagator=o}),sX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAttributeValue=t.sanitizeAttributes=void 0;function e(o){let s={};if(o==null||typeof o!="object")return s;for(let[a,c]of Object.entries(o))r(c)&&(Array.isArray(c)?s[a]=c.slice():s[a]=c);return s}t.sanitizeAttributes=e;function r(o){return o==null?!0:Array.isArray(o)?n(o):i(o)}t.isAttributeValue=r;function n(o){let s;for(let a of o)if(a!=null){if(!s){if(i(a)){s=typeof a;continue}return!1}if(typeof a!==s)return!1}return!0}function i(o){switch(typeof o){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),jL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loggingErrorHandler=void 0;var e=ft();function r(){return o=>{e.diag.error(n(o))}}t.loggingErrorHandler=r;function n(o){return typeof o=="string"?o:JSON.stringify(i(o))}function i(o){let s={},a=o;for(;a!==null;)Object.getOwnPropertyNames(a).forEach(c=>{if(s[c])return;let l=a[c];l&&(s[c]=String(l))}),a=Object.getPrototypeOf(a);return s}}),UL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalErrorHandler=t.setGlobalErrorHandler=void 0;var e=jL(),r=e.loggingErrorHandler();function n(o){r=o}t.setGlobalErrorHandler=n;var i=o=>{try{r(o)}catch{}};t.globalErrorHandler=i}),BL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracesSamplerValues=void 0;var e;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(e=t.TracesSamplerValues||(t.TracesSamplerValues={}))}),HL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvironment=t.DEFAULT_ENVIRONMENT=void 0;var e=ft(),r=BL(),n=",",i=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function o(p){return i.indexOf(p)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(p){return s.indexOf(p)>-1}t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:e.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(p,h,m,g=-1/0,v=1/0){if(typeof m[p]!="undefined"){let w=Number(m[p]);isNaN(w)||(w<g?h[p]=g:w>v?h[p]=v:h[p]=w)}}function l(p,h,m,g=n){let v=m[p];typeof v=="string"&&(h[p]=v.split(g).map(w=>w.trim()))}var u={ALL:e.DiagLogLevel.ALL,VERBOSE:e.DiagLogLevel.VERBOSE,DEBUG:e.DiagLogLevel.DEBUG,INFO:e.DiagLogLevel.INFO,WARN:e.DiagLogLevel.WARN,ERROR:e.DiagLogLevel.ERROR,NONE:e.DiagLogLevel.NONE};function f(p,h,m){let g=m[p];if(typeof g=="string"){let v=u[g.toUpperCase()];v!=null&&(h[p]=v)}}function d(p){let h={};for(let m in t.DEFAULT_ENVIRONMENT){let g=m;switch(g){case"OTEL_LOG_LEVEL":f(g,h,p);break;default:if(o(g))c(g,h,p);else if(a(g))l(g,h,p);else{let v=p[g];typeof v!="undefined"&&v!==null&&(h[g]=String(v))}}}return h}t.parseEnvironment=d}),aX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=void 0;var e=require("os"),r=HL();function n(){let i=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:e.hostname()},r.DEFAULT_ENVIRONMENT,i)}t.getEnv=n}),cX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBase64=void 0;function e(r){let n=r.length,i="";for(let o=0;o<n;o+=2){let s=r.substring(o,o+2),a=parseInt(s,16);i+=String.fromCharCode(a)}return Buffer.from(i,"ascii").toString("base64")}t.hexToBase64=e}),lX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RandomIdGenerator=void 0;var e=8,r=16,n=class{constructor(){this.generateTraceId=o(r),this.generateSpanId=o(e)}};t.RandomIdGenerator=n;var i=Buffer.allocUnsafe(r);function o(s){return function(){for(let a=0;a<s/4;a++)i.writeUInt32BE(Math.random()*2**32>>>0,a*4);for(let a=0;a<s&&!(i[a]>0);a++)a===s-1&&(i[s-1]=1);return i.toString("hex",0,s)}}}),uX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.otperformance=void 0;var e=require("perf_hooks");t.otperformance=e.performance}),yb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.23.0"}),fX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcGrpcStatusCodeValues=t.MessagingOperationValues=t.MessagingDestinationKindValues=t.HttpFlavorValues=t.NetTransportValues=t.FaasInvokedProviderValues=t.FaasDocumentOperationValues=t.FaasTriggerValues=t.DbCassandraConsistencyLevelValues=t.DbSystemValues=t.SemanticAttributes=void 0,t.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var e;(function(f){f.OTHER_SQL="other_sql",f.MSSQL="mssql",f.MYSQL="mysql",f.ORACLE="oracle",f.DB2="db2",f.POSTGRESQL="postgresql",f.REDSHIFT="redshift",f.HIVE="hive",f.CLOUDSCAPE="cloudscape",f.HSQLDB="hsqldb",f.PROGRESS="progress",f.MAXDB="maxdb",f.HANADB="hanadb",f.INGRES="ingres",f.FIRSTSQL="firstsql",f.EDB="edb",f.CACHE="cache",f.ADABAS="adabas",f.FIREBIRD="firebird",f.DERBY="derby",f.FILEMAKER="filemaker",f.INFORMIX="informix",f.INSTANTDB="instantdb",f.INTERBASE="interbase",f.MARIADB="mariadb",f.NETEZZA="netezza",f.PERVASIVE="pervasive",f.POINTBASE="pointbase",f.SQLITE="sqlite",f.SYBASE="sybase",f.TERADATA="teradata",f.VERTICA="vertica",f.H2="h2",f.COLDFUSION="coldfusion",f.CASSANDRA="cassandra",f.HBASE="hbase",f.MONGODB="mongodb",f.REDIS="redis",f.COUCHBASE="couchbase",f.COUCHDB="couchdb",f.COSMOSDB="cosmosdb",f.DYNAMODB="dynamodb",f.NEO4J="neo4j",f.GEODE="geode",f.ELASTICSEARCH="elasticsearch",f.MEMCACHED="memcached",f.COCKROACHDB="cockroachdb"})(e=t.DbSystemValues||(t.DbSystemValues={}));var r;(function(f){f.ALL="all",f.EACH_QUORUM="each_quorum",f.QUORUM="quorum",f.LOCAL_QUORUM="local_quorum",f.ONE="one",f.TWO="two",f.THREE="three",f.LOCAL_ONE="local_one",f.ANY="any",f.SERIAL="serial",f.LOCAL_SERIAL="local_serial"})(r=t.DbCassandraConsistencyLevelValues||(t.DbCassandraConsistencyLevelValues={}));var n;(function(f){f.DATASOURCE="datasource",f.HTTP="http",f.PUBSUB="pubsub",f.TIMER="timer",f.OTHER="other"})(n=t.FaasTriggerValues||(t.FaasTriggerValues={}));var i;(function(f){f.INSERT="insert",f.EDIT="edit",f.DELETE="delete"})(i=t.FaasDocumentOperationValues||(t.FaasDocumentOperationValues={}));var o;(function(f){f.AWS="aws",f.AZURE="azure",f.GCP="gcp"})(o=t.FaasInvokedProviderValues||(t.FaasInvokedProviderValues={}));var s;(function(f){f.IP_TCP="ip_tcp",f.IP_UDP="ip_udp",f.IP="ip",f.UNIX="unix",f.PIPE="pipe",f.INPROC="inproc",f.OTHER="other"})(s=t.NetTransportValues||(t.NetTransportValues={}));var a;(function(f){f.HTTP_1_0="1.0",f.HTTP_1_1="1.1",f.HTTP_2_0="2.0",f.SPDY="SPDY",f.QUIC="QUIC"})(a=t.HttpFlavorValues||(t.HttpFlavorValues={}));var c;(function(f){f.QUEUE="queue",f.TOPIC="topic"})(c=t.MessagingDestinationKindValues||(t.MessagingDestinationKindValues={}));var l;(function(f){f.RECEIVE="receive",f.PROCESS="process"})(l=t.MessagingOperationValues||(t.MessagingOperationValues={}));var u;(function(f){f[f.OK=0]="OK",f[f.CANCELLED=1]="CANCELLED",f[f.UNKNOWN=2]="UNKNOWN",f[f.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",f[f.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",f[f.NOT_FOUND=5]="NOT_FOUND",f[f.ALREADY_EXISTS=6]="ALREADY_EXISTS",f[f.PERMISSION_DENIED=7]="PERMISSION_DENIED",f[f.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",f[f.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",f[f.ABORTED=10]="ABORTED",f[f.OUT_OF_RANGE=11]="OUT_OF_RANGE",f[f.UNIMPLEMENTED=12]="UNIMPLEMENTED",f[f.INTERNAL=13]="INTERNAL",f[f.UNAVAILABLE=14]="UNAVAILABLE",f[f.DATA_LOSS=15]="DATA_LOSS",f[f.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(u=t.RpcGrpcStatusCodeValues||(t.RpcGrpcStatusCodeValues={}))}),dX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(fX(),t)}),pX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetrySdkLanguageValues=t.OsTypeValues=t.HostArchValues=t.AwsEcsLaunchtypeValues=t.CloudPlatformValues=t.CloudProviderValues=t.ResourceAttributes=void 0,t.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var e;(function(a){a.AWS="aws",a.AZURE="azure",a.GCP="gcp"})(e=t.CloudProviderValues||(t.CloudProviderValues={}));var r;(function(a){a.AWS_EC2="aws_ec2",a.AWS_ECS="aws_ecs",a.AWS_EKS="aws_eks",a.AWS_LAMBDA="aws_lambda",a.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",a.AZURE_VM="azure_vm",a.AZURE_CONTAINER_INSTANCES="azure_container_instances",a.AZURE_AKS="azure_aks",a.AZURE_FUNCTIONS="azure_functions",a.AZURE_APP_SERVICE="azure_app_service",a.GCP_COMPUTE_ENGINE="gcp_compute_engine",a.GCP_CLOUD_RUN="gcp_cloud_run",a.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",a.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",a.GCP_APP_ENGINE="gcp_app_engine"})(r=t.CloudPlatformValues||(t.CloudPlatformValues={}));var n;(function(a){a.EC2="ec2",a.FARGATE="fargate"})(n=t.AwsEcsLaunchtypeValues||(t.AwsEcsLaunchtypeValues={}));var i;(function(a){a.AMD64="amd64",a.ARM32="arm32",a.ARM64="arm64",a.IA64="ia64",a.PPC32="ppc32",a.PPC64="ppc64",a.X86="x86"})(i=t.HostArchValues||(t.HostArchValues={}));var o;(function(a){a.WINDOWS="windows",a.LINUX="linux",a.DARWIN="darwin",a.FREEBSD="freebsd",a.NETBSD="netbsd",a.OPENBSD="openbsd",a.DRAGONFLYBSD="dragonflybsd",a.HPUX="hpux",a.AIX="aix",a.SOLARIS="solaris",a.Z_OS="z_os"})(o=t.OsTypeValues||(t.OsTypeValues={}));var s;(function(a){a.CPP="cpp",a.DOTNET="dotnet",a.ERLANG="erlang",a.GO="go",a.JAVA="java",a.NODEJS="nodejs",a.PHP="php",a.PYTHON="python",a.RUBY="ruby",a.WEBJS="webjs"})(s=t.TelemetrySdkLanguageValues||(t.TelemetrySdkLanguageValues={}))}),hX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(pX(),t)}),Hu=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(dX(),t),r(hX(),t)}),mX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_INFO=void 0;var e=yb(),r=Hu();t.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:e.VERSION}}),gX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unrefTimer=void 0;function e(r){r.unref()}t.unrefTimer=e}),vX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(aX(),t),r(cX(),t),r(lX(),t),r(uX(),t),r(mX(),t),r(gX(),t)}),VL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(vX(),t)}),yX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;var e=VL(),r=9,n=Math.pow(10,r);function i(m){let g=m/1e3,v=Math.trunc(g),w=Number((g-v).toFixed(r))*n;return[v,w]}function o(){let m=e.otperformance.timeOrigin;if(typeof m!="number"){let g=e.otperformance;m=g.timing&&g.timing.fetchStart}return m}function s(m){let g=i(o()),v=i(typeof m=="number"?m:e.otperformance.now()),w=g[0]+v[0],b=g[1]+v[1];return b>n&&(b-=n,w+=1),[w,b]}t.hrTime=s;function a(m){if(p(m))return m;if(typeof m=="number")return m<o()?s(m):i(m);if(m instanceof Date)return i(m.getTime());throw TypeError("Invalid input type")}t.timeInputToHrTime=a;function c(m,g){let v=g[0]-m[0],w=g[1]-m[1];return w<0&&(v-=1,w+=n),[v,w]}t.hrTimeDuration=c;function l(m){let g=r,v=`${"0".repeat(g)}${m[1]}Z`,w=v.substr(v.length-g-1);return new Date(m[0]*1e3).toISOString().replace("000Z",w)}t.hrTimeToTimeStamp=l;function u(m){return m[0]*n+m[1]}t.hrTimeToNanoseconds=u;function f(m){return Math.round(m[0]*1e3+m[1]/1e6)}t.hrTimeToMilliseconds=f;function d(m){return Math.round(m[0]*1e6+m[1]/1e3)}t.hrTimeToMicroseconds=d;function p(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}t.isTimeInputHrTime=p;function h(m){return p(m)||typeof m=="number"||m instanceof Date}t.isTimeInput=h}),wX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),CX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResultCode=void 0;var e;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(e=t.ExportResultCode||(t.ExportResultCode={}))}),bX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositePropagator=void 0;var e=ft(),r=class{constructor(n={}){var i;this._propagators=(i=n.propagators)!==null&&i!==void 0?i:[],this._fields=Array.from(new Set(this._propagators.map(o=>typeof o.fields=="function"?o.fields():[]).reduce((o,s)=>o.concat(s),[])))}inject(n,i,o){for(let s of this._propagators)try{s.inject(n,i,o)}catch(a){e.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${a.message}`)}}extract(n,i,o){return this._propagators.reduce((s,a)=>{try{return a.extract(s,i,o)}catch(c){e.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${c.message}`)}return s},n)}fields(){return this._fields.slice()}};t.CompositePropagator=r}),EX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;var e="[_0-9a-z-*/]",r=`[a-z]${e}{0,255}`,n=`[a-z0-9]${e}{0,240}@[a-z]${e}{0,13}`,i=new RegExp(`^(?:${r}|${n})$`),o=/^[ -~]{0,255}[!-~]$/,s=/,|=/;function a(l){return i.test(l)}t.validateKey=a;function c(l){return o.test(l)&&!s.test(l)}t.validateValue=c}),WL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceState=void 0;var e=EX(),r=32,n=512,i=",",o="=",s=class{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,c){let l=this._clone();return l._internalState.has(a)&&l._internalState.delete(a),l._internalState.set(a,c),l}unset(a){let c=this._clone();return c._internalState.delete(a),c}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,c)=>(a.push(c+o+this.get(c)),a),[]).join(i)}_parse(a){a.length>n||(this._internalState=a.split(i).reverse().reduce((c,l)=>{let u=l.trim(),f=u.indexOf(o);if(f!==-1){let d=u.slice(0,f),p=u.slice(f+1,l.length);e.validateKey(d)&&e.validateValue(p)&&c.set(d,p)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new s;return a._internalState=new Map(this._internalState),a}};t.TraceState=s}),_X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;var e=ft(),r=vb(),n=WL();t.TRACE_PARENT_HEADER="traceparent",t.TRACE_STATE_HEADER="tracestate";var i="00",o="(?!ff)[\\da-f]{2}",s="(?![0]{32})[\\da-f]{32}",a="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${o})-(${s})-(${a})-(${c})(-.*)?\\s?$`);function u(d){let p=l.exec(d);return!p||p[1]==="00"&&p[5]?null:{traceId:p[2],spanId:p[3],traceFlags:parseInt(p[4],16)}}t.parseTraceParent=u;var f=class{inject(d,p,h){let m=e.trace.getSpanContext(d);if(!m||r.isTracingSuppressed(d)||!e.isSpanContextValid(m))return;let g=`${i}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||e.TraceFlags.NONE).toString(16)}`;h.set(p,t.TRACE_PARENT_HEADER,g),m.traceState&&h.set(p,t.TRACE_STATE_HEADER,m.traceState.serialize())}extract(d,p,h){let m=h.get(p,t.TRACE_PARENT_HEADER);if(!m)return d;let g=Array.isArray(m)?m[0]:m;if(typeof g!="string")return d;let v=u(g);if(!v)return d;v.isRemote=!0;let w=h.get(p,t.TRACE_STATE_HEADER);if(w){let b=Array.isArray(w)?w.join(","):w;v.traceState=new n.TraceState(typeof b=="string"?b:void 0)}return e.trace.setSpanContext(d,v)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}};t.HttpTraceContextPropagator=f}),SX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),xX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;var e=ft(),r=e.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(a){a.HTTP="http"})(n=t.RPCType||(t.RPCType={}));function i(a,c){return a.setValue(r,c)}t.setRPCMetadata=i;function o(a){return a.deleteValue(r)}t.deleteRPCMetadata=o;function s(a){return a.getValue(r)}t.getRPCMetadata=s}),GL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOffSampler=void 0;var e=ft(),r=class{shouldSample(){return{decision:e.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};t.AlwaysOffSampler=r}),zL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlwaysOnSampler=void 0;var e=ft(),r=class{shouldSample(){return{decision:e.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};t.AlwaysOnSampler=r}),PX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentBasedSampler=void 0;var e=ft(),r=UL(),n=GL(),i=zL(),o=class{constructor(s){var a,c,l,u;this._root=s.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new i.AlwaysOnSampler),this._remoteParentSampled=(a=s.remoteParentSampled)!==null&&a!==void 0?a:new i.AlwaysOnSampler,this._remoteParentNotSampled=(c=s.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=s.localParentSampled)!==null&&l!==void 0?l:new i.AlwaysOnSampler,this._localParentNotSampled=(u=s.localParentNotSampled)!==null&&u!==void 0?u:new n.AlwaysOffSampler}shouldSample(s,a,c,l,u,f){let d=e.trace.getSpanContext(s);return!d||!e.isSpanContextValid(d)?this._root.shouldSample(s,a,c,l,u,f):d.isRemote?d.traceFlags&e.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(s,a,c,l,u,f):this._remoteParentNotSampled.shouldSample(s,a,c,l,u,f):d.traceFlags&e.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(s,a,c,l,u,f):this._localParentNotSampled.shouldSample(s,a,c,l,u,f)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};t.ParentBasedSampler=o}),kX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceIdRatioBasedSampler=void 0;var e=ft(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,i){return{decision:e.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?e.SamplingDecision.RECORD_AND_SAMPLED:e.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let i=0;for(let o=0;o<n.length/8;o++){let s=o*8,a=parseInt(n.slice(s,s+8),16);i=(i^a)>>>0}return i}};t.TraceIdRatioBasedSampler=r}),IX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrlIgnored=t.urlMatches=void 0;function e(n,i){return typeof i=="string"?n===i:i.test(n)}t.urlMatches=e;function r(n,i){if(!i)return!1;for(let o of i)if(e(n,o))return!0;return!1}t.isUrlIgnored=r}),AX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWrapped=void 0;function e(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}t.isWrapped=e}),On=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageUtils=void 0,r(oX(),t),r(sX(),t),r(UL(),t),r(jL(),t),r(yX(),t),r(wX(),t),r(CX(),t),r(yb(),t),t.baggageUtils=$L(),r(VL(),t),r(bX(),t),r(_X(),t),r(SX(),t),r(xX(),t),r(GL(),t),r(zL(),t),r(PX(),t),r(kX(),t),r(vb(),t),r(WL(),t),r(HL(),t),r(BL(),t),r(IX(),t),r(AX(),t),r(yb(),t)}),TX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionEventName=void 0,t.ExceptionEventName="exception"}),KL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0;var e=ft(),r=On(),n=Hu(),i=TX(),o=class{constructor(s,a,c,l,u,f,d=[],p=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:e.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=f,this.kind=u,this.links=d,this.startTime=r.timeInputToHrTime(p),this.resource=s.resource,this.instrumentationLibrary=s.instrumentationLibrary,this._spanLimits=s.getSpanLimits(),this._spanProcessor=s.getActiveSpanProcessor(),this._spanProcessor.onStart(this,a)}spanContext(){return this._spanContext}setAttribute(s,a){return a==null||this._isSpanEnded()?this:s.length===0?(e.diag.warn(`Invalid attribute key: ${s}`),this):r.isAttributeValue(a)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,s)?this:(this.attributes[s]=a,this):(e.diag.warn(`Invalid attribute value set for key: ${s}`),this)}setAttributes(s){for(let[a,c]of Object.entries(s))this.setAttribute(a,c);return this}addEvent(s,a,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(e.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(a)&&(typeof c=="undefined"&&(c=a),a=void 0),typeof c=="undefined"&&(c=r.hrTime()),this.events.push({name:s,attributes:a,time:r.timeInputToHrTime(c)}),this)}setStatus(s){return this._isSpanEnded()?this:(this.status=s,this)}updateName(s){return this._isSpanEnded()?this:(this.name=s,this)}end(s=r.hrTime()){if(this._isSpanEnded()){e.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(s),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&e.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(s,a=r.hrTime()){let c={};typeof s=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s:s&&(s.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=s.code.toString():s.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=s.name),s.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=s.message),s.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=s.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(i.ExceptionEventName,c,a):e.diag.warn(`Failed to record an exception ${s}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&e.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};t.Span=o}),YL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildSamplerFromEnv=t.DEFAULT_CONFIG=void 0;var e=ft(),r=On(),n=r.getEnv(),i=r.TracesSamplerValues.AlwaysOn;t.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function o(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(c))});default:return e.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${i}".`),new r.AlwaysOnSampler}}t.buildSamplerFromEnv=o;var s=1;function a(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return e.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):l<0||l>1?(e.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):l}}),DX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var e=YL();function r(n){let i={sampler:e.buildSamplerFromEnv()},o=Object.assign({},e.DEFAULT_CONFIG,i,n);return o.spanLimits=Object.assign({},e.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),o}t.mergeConfig=r}),RX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var e=ft(),r=On(),n=KL(),i=DX(),o=class{constructor(a,c,l){this._tracerProvider=l;let u=i.mergeConfig(c);this._sampler=u.sampler,this._spanLimits=u.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=a}startSpan(a,c={},l=e.context.active()){var u,f;if(r.isTracingSuppressed(l))return e.diag.debug("Instrumentation suppressed, returning Noop Span"),e.trace.wrapSpanContext(e.INVALID_SPAN_CONTEXT);let d=s(c,l),p=this._idGenerator.generateSpanId(),h,m,g;!d||!e.trace.isSpanContextValid(d)?h=this._idGenerator.generateTraceId():(h=d.traceId,m=d.traceState,g=d.spanId);let v=(u=c.kind)!==null&&u!==void 0?u:e.SpanKind.INTERNAL,w=(f=c.links)!==null&&f!==void 0?f:[],b=r.sanitizeAttributes(c.attributes),C=this._sampler.shouldSample(c.root?e.trace.setSpanContext(l,e.INVALID_SPAN_CONTEXT):l,h,a,v,b,w),S=C.decision===e.SamplingDecision.RECORD_AND_SAMPLED?e.TraceFlags.SAMPLED:e.TraceFlags.NONE,_={traceId:h,spanId:p,traceFlags:S,traceState:m};if(C.decision===e.SamplingDecision.NOT_RECORD)return e.diag.debug("Recording is off, propagating context in a non-recording span"),e.trace.wrapSpanContext(_);let P=new n.Span(this,l,a,_,v,g,w,c.startTime);return P.setAttributes(Object.assign(b,C.attributes)),P}startActiveSpan(a,c,l,u){let f,d,p;if(arguments.length<2)return;arguments.length===2?p=c:arguments.length===3?(f=c,p=l):(f=c,d=l,p=u);let h=d!=null?d:e.context.active(),m=this.startSpan(a,f,h),g=e.trace.setSpan(h,m);return e.context.with(g,p,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};t.Tracer=o;function s(a,c){if(!a.root)return e.trace.getSpanContext(c)}}),OX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultServiceName=void 0;function e(){return`unknown_service:${process.argv0}`}t.defaultServiceName=e}),NX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectResources=void 0;var e=QL(),r=ft(),n=require("util"),i=async(s={})=>{let a=Object.assign(s),c=await Promise.all((a.detectors||[]).map(async l=>{try{let u=await l.detect(a);return r.diag.debug(`${l.constructor.name} found resource.`,u),u}catch(u){return r.diag.debug(`${l.constructor.name} failed: ${u.message}`),e.Resource.empty()}}));return o(c),c.reduce((l,u)=>l.merge(u),e.Resource.empty())};t.detectResources=i;var o=s=>{s.forEach(a=>{if(Object.keys(a.attributes).length>0){let c=n.inspect(a.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),LX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envDetector=void 0;var e=ft(),r=On(),n=Hu(),i=wb(),o=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(s){let a={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,u=c.OTEL_SERVICE_NAME;if(l)try{let f=this._parseResourceAttributes(l);Object.assign(a,f)}catch(f){e.diag.debug(`EnvDetector failed: ${f.message}`)}return u&&(a[n.ResourceAttributes.SERVICE_NAME]=u),new i.Resource(a)}_parseResourceAttributes(s){if(!s)return{};let a={},c=s.split(this._COMMA_SEPARATOR,-1);for(let l of c){let u=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(u.length!==2)continue;let[f,d]=u;if(f=f.trim(),d=d.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(f))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(d))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);a[f]=d}return a}_isValid(s){return s.length<=this._MAX_LENGTH&&this._isPrintableString(s)}_isPrintableString(s){for(let a=0;a<s.length;a++){let c=s.charAt(a);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(s){return s.length>0&&this._isValid(s)}};t.envDetector=new o}),FX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processDetector=void 0;var e=ft(),r=Hu(),n=wb(),i=class{async detect(o){let s={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(s,o)}_getResourceAttributes(o,s){return o[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||o[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||o[r.ResourceAttributes.PROCESS_COMMAND]===""||o[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(e.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},o))}};t.processDetector=new i}),MX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(LX(),t),r(FX(),t)}),qX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(OX(),t),r(NX(),t),r(MX(),t)}),JL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(qX(),t)}),QL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var e=Hu(),r=On(),n=JL(),i=class{constructor(o){this.attributes=o}static empty(){return i.EMPTY}static default(){return new i({[e.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[e.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_NAME],[e.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[e.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(o){if(!o||!Object.keys(o.attributes).length)return this;let s=Object.assign({},this.attributes,o.attributes);return new i(s)}};t.Resource=i,i.EMPTY=new i({})}),$X=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),jX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),wb=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(QL(),t),r(JL(),t),r($X(),t),r(jX(),t)}),UX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSpanProcessor=void 0;var e=On(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let i of this._spanProcessors)n.push(i.forceFlush());return new Promise(i=>{Promise.all(n).then(()=>{i()}).catch(o=>{e.globalErrorHandler(o||new Error("MultiSpanProcessor: forceFlush failed")),i()})})}onStart(n,i){for(let o of this._spanProcessors)o.onStart(n,i)}onEnd(n){for(let i of this._spanProcessors)i.onEnd(n)}shutdown(){let n=[];for(let i of this._spanProcessors)n.push(i.shutdown());return new Promise((i,o)=>{Promise.all(n).then(()=>{i()},o)})}};t.MultiSpanProcessor=r}),XL=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpanProcessor=void 0;var e=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};t.NoopSpanProcessor=e}),BX=O((t,e)=>{var r=200,n="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",h="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",w="[object Object]",b="[object Proxy]",C="[object RegExp]",S="[object Set]",_="[object String]",P="[object Undefined]",I="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",F="[object Float32Array]",H="[object Float64Array]",X="[object Int8Array]",J="[object Int16Array]",Y="[object Int32Array]",te="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",q="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,re={};re[F]=re[H]=re[X]=re[J]=re[Y]=re[te]=re[M]=re[L]=re[q]=!0,re[a]=re[c]=re[A]=re[u]=re[R]=re[f]=re[d]=re[p]=re[m]=re[g]=re[w]=re[C]=re[S]=re[_]=re[I]=!1;var be=typeof global=="object"&&global&&global.Object===Object&&global,Pe=typeof self=="object"&&self&&self.Object===Object&&self,xe=be||Pe||Function("return this")(),Te=typeof t=="object"&&t&&!t.nodeType&&t,he=Te&&typeof e=="object"&&e&&!e.nodeType&&e,yt=he&&he.exports===Te,It=yt&&be.process,ye=function(){try{var T=he&&he.require&&he.require("util").types;return T||It&&It.binding&&It.binding("util")}catch{}}(),pe=ye&&ye.isTypedArray;function Ce(T,j,G){switch(G.length){case 0:return T.call(j);case 1:return T.call(j,G[0]);case 2:return T.call(j,G[0],G[1]);case 3:return T.call(j,G[0],G[1],G[2])}return T.apply(j,G)}function je(T,j){for(var G=-1,le=Array(T);++G<T;)le[G]=j(G);return le}function Xo(T){return function(j){return T(j)}}function Zo(T,j){return T==null?void 0:T[j]}function Q(T,j){return function(G){return T(j(G))}}var es=Array.prototype,ts=Function.prototype,Ir=Object.prototype,st=xe["__core-js_shared__"],Bn=ts.toString,ur=Ir.hasOwnProperty,Gi=function(){var T=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),zi=Ir.toString,Ge=Bn.call(Object),rs=RegExp("^"+Bn.call(ur).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hn=yt?xe.Buffer:void 0,Ki=xe.Symbol,Yi=xe.Uint8Array,Et=Hn?Hn.allocUnsafe:void 0,Bt=Q(Object.getPrototypeOf,Object),vr=Object.create,Vn=Ir.propertyIsEnumerable,Ar=es.splice,At=Ki?Ki.toStringTag:void 0,Tt=function(){try{var T=ov(Object,"defineProperty");return T({},"",{}),T}catch{}}(),Ie=Hn?Hn.isBuffer:void 0,_t=Math.max,ce=Date.now,Ji=ov(xe,"Map"),Cn=ov(Object,"create"),we=function(){function T(){}return function(j){if(!vs(j))return{};if(vr)return vr(j);T.prototype=j;var G=new T;return T.prototype=void 0,G}}();function Tr(T){var j=-1,G=T==null?0:T.length;for(this.clear();++j<G;){var le=T[j];this.set(le[0],le[1])}}function ns(){this.__data__=Cn?Cn(null):{},this.size=0}function is(T){var j=this.has(T)&&delete this.__data__[T];return this.size-=j?1:0,j}function os(T){var j=this.__data__;if(Cn){var G=j[T];return G===n?void 0:G}return ur.call(j,T)?j[T]:void 0}function ss(T){var j=this.__data__;return Cn?j[T]!==void 0:ur.call(j,T)}function as(T,j){var G=this.__data__;return this.size+=this.has(T)?0:1,G[T]=Cn&&j===void 0?n:j,this}Tr.prototype.clear=ns,Tr.prototype.delete=is,Tr.prototype.get=os,Tr.prototype.has=ss,Tr.prototype.set=as;function fr(T){var j=-1,G=T==null?0:T.length;for(this.clear();++j<G;){var le=T[j];this.set(le[0],le[1])}}function cs(){this.__data__=[],this.size=0}function ls(T){var j=this.__data__,G=ee(j,T);if(G<0)return!1;var le=j.length-1;return G==le?j.pop():Ar.call(j,G,1),--this.size,!0}function er(T){var j=this.__data__,G=ee(j,T);return G<0?void 0:j[G][1]}function us(T){return ee(this.__data__,T)>-1}function fs(T,j){var G=this.__data__,le=ee(G,T);return le<0?(++this.size,G.push([T,j])):G[le][1]=j,this}fr.prototype.clear=cs,fr.prototype.delete=ls,fr.prototype.get=er,fr.prototype.has=us,fr.prototype.set=fs;function Wr(T){var j=-1,G=T==null?0:T.length;for(this.clear();++j<G;){var le=T[j];this.set(le[0],le[1])}}function ds(){this.size=0,this.__data__={hash:new Tr,map:new(Ji||fr),string:new Tr}}function ps(T){var j=Zf(this,T).delete(T);return this.size-=j?1:0,j}function hs(T){return Zf(this,T).get(T)}function Dr(T){return Zf(this,T).has(T)}function ms(T,j){var G=Zf(this,T),le=G.size;return G.set(T,j),this.size+=G.size==le?0:1,this}Wr.prototype.clear=ds,Wr.prototype.delete=ps,Wr.prototype.get=hs,Wr.prototype.has=Dr,Wr.prototype.set=ms;function Gr(T){var j=this.__data__=new fr(T);this.size=j.size}function gs(){this.__data__=new fr,this.size=0}function y(T){var j=this.__data__,G=j.delete(T);return this.size=j.size,G}function E(T){return this.__data__.get(T)}function x(T){return this.__data__.has(T)}function D(T,j){var G=this.__data__;if(G instanceof fr){var le=G.__data__;if(!Ji||le.length<r-1)return le.push([T,j]),this.size=++G.size,this;G=this.__data__=new Wr(le)}return G.set(T,j),this.size=G.size,this}Gr.prototype.clear=gs,Gr.prototype.delete=y,Gr.prototype.get=E,Gr.prototype.has=x,Gr.prototype.set=D;function N(T,j){var G=cv(T),le=!G&&av(T),qe=!G&&!le&&L_(T),et=!G&&!le&&!qe&&M_(T),at=G||le||qe||et,Ne=at?je(T.length,String):[],ct=Ne.length;for(var zr in T)(j||ur.call(T,zr))&&!(at&&(zr=="length"||qe&&(zr=="offset"||zr=="parent")||et&&(zr=="buffer"||zr=="byteLength"||zr=="byteOffset")||O_(zr,ct)))&&Ne.push(zr);return Ne}function $(T,j,G){(G!==void 0&&!ed(T[j],G)||G===void 0&&!(j in T))&&Z(T,j,G)}function B(T,j,G){var le=T[j];(!(ur.call(T,j)&&ed(le,G))||G===void 0&&!(j in T))&&Z(T,j,G)}function ee(T,j){for(var G=T.length;G--;)if(ed(T[G][0],j))return G;return-1}function Z(T,j,G){j=="__proto__"&&Tt?Tt(T,j,{configurable:!0,enumerable:!0,value:G,writable:!0}):T[j]=G}var Me=o3();function De(T){return T==null?T===void 0?P:v:At&&At in Object(T)?s3(T):d3(T)}function ke(T){return fl(T)&&De(T)==a}function _e(T){if(!vs(T)||u3(T))return!1;var j=uv(T)?rs:z;return j.test(g3(T))}function Je(T){return fl(T)&&F_(T.length)&&!!re[De(T)]}function YV(T){if(!vs(T))return f3(T);var j=N_(T),G=[];for(var le in T)le=="constructor"&&(j||!ur.call(T,le))||G.push(le);return G}function R_(T,j,G,le,qe){T!==j&&Me(j,function(et,at){if(qe||(qe=new Gr),vs(et))JV(T,j,at,G,R_,le,qe);else{var Ne=le?le(sv(T,at),et,at+"",T,j,qe):void 0;Ne===void 0&&(Ne=et),$(T,at,Ne)}},q_)}function JV(T,j,G,le,qe,et,at){var Ne=sv(T,G),ct=sv(j,G),zr=at.get(ct);if(zr){$(T,G,zr);return}var Rr=et?et(Ne,ct,G+"",T,j,at):void 0,dl=Rr===void 0;if(dl){var fv=cv(ct),dv=!fv&&L_(ct),j_=!fv&&!dv&&M_(ct);Rr=ct,fv||dv||j_?cv(Ne)?Rr=Ne:v3(Ne)?Rr=r3(Ne):dv?(dl=!1,Rr=ZV(ct,!0)):j_?(dl=!1,Rr=t3(ct,!0)):Rr=[]:y3(ct)||av(ct)?(Rr=Ne,av(Ne)?Rr=w3(Ne):(!vs(Ne)||uv(Ne))&&(Rr=a3(ct))):dl=!1}dl&&(at.set(ct,Rr),qe(Rr,ct,le,et,at),at.delete(ct)),$(T,G,Rr)}function QV(T,j){return h3(p3(T,j,$_),T+"")}var XV=Tt?function(T,j){return Tt(T,"toString",{configurable:!0,enumerable:!1,value:b3(j),writable:!0})}:$_;function ZV(T,j){if(j)return T.slice();var G=T.length,le=Et?Et(G):new T.constructor(G);return T.copy(le),le}function e3(T){var j=new T.constructor(T.byteLength);return new Yi(j).set(new Yi(T)),j}function t3(T,j){var G=j?e3(T.buffer):T.buffer;return new T.constructor(G,T.byteOffset,T.length)}function r3(T,j){var G=-1,le=T.length;for(j||(j=Array(le));++G<le;)j[G]=T[G];return j}function n3(T,j,G,le){var qe=!G;G||(G={});for(var et=-1,at=j.length;++et<at;){var Ne=j[et],ct=le?le(G[Ne],T[Ne],Ne,G,T):void 0;ct===void 0&&(ct=T[Ne]),qe?Z(G,Ne,ct):B(G,Ne,ct)}return G}function i3(T){return QV(function(j,G){var le=-1,qe=G.length,et=qe>1?G[qe-1]:void 0,at=qe>2?G[2]:void 0;for(et=T.length>3&&typeof et=="function"?(qe--,et):void 0,at&&c3(G[0],G[1],at)&&(et=qe<3?void 0:et,qe=1),j=Object(j);++le<qe;){var Ne=G[le];Ne&&T(j,Ne,le,et)}return j})}function o3(T){return function(j,G,le){for(var qe=-1,et=Object(j),at=le(j),Ne=at.length;Ne--;){var ct=at[T?Ne:++qe];if(G(et[ct],ct,et)===!1)break}return j}}function Zf(T,j){var G=T.__data__;return l3(j)?G[typeof j=="string"?"string":"hash"]:G.map}function ov(T,j){var G=Zo(T,j);return _e(G)?G:void 0}function s3(T){var j=ur.call(T,At),G=T[At];try{T[At]=void 0;var le=!0}catch{}var qe=zi.call(T);return le&&(j?T[At]=G:delete T[At]),qe}function a3(T){return typeof T.constructor=="function"&&!N_(T)?we(Bt(T)):{}}function O_(T,j){var G=typeof T;return j=j==null?s:j,!!j&&(G=="number"||G!="symbol"&&oe.test(T))&&T>-1&&T%1==0&&T<j}function c3(T,j,G){if(!vs(G))return!1;var le=typeof j;return(le=="number"?lv(G)&&O_(j,G.length):le=="string"&&j in G)?ed(G[j],T):!1}function l3(T){var j=typeof T;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?T!=="__proto__":T===null}function u3(T){return!!Gi&&Gi in T}function N_(T){var j=T&&T.constructor,G=typeof j=="function"&&j.prototype||Ir;return T===G}function f3(T){var j=[];if(T!=null)for(var G in Object(T))j.push(G);return j}function d3(T){return zi.call(T)}function p3(T,j,G){return j=_t(j===void 0?T.length-1:j,0),function(){for(var le=arguments,qe=-1,et=_t(le.length-j,0),at=Array(et);++qe<et;)at[qe]=le[j+qe];qe=-1;for(var Ne=Array(j+1);++qe<j;)Ne[qe]=le[qe];return Ne[j]=G(at),Ce(T,this,Ne)}}function sv(T,j){if(!(j==="constructor"&&typeof T[j]=="function")&&j!="__proto__")return T[j]}var h3=m3(XV);function m3(T){var j=0,G=0;return function(){var le=ce(),qe=o-(le-G);if(G=le,qe>0){if(++j>=i)return arguments[0]}else j=0;return T.apply(void 0,arguments)}}function g3(T){if(T!=null){try{return Bn.call(T)}catch{}try{return T+""}catch{}}return""}function ed(T,j){return T===j||T!==T&&j!==j}var av=ke(function(){return arguments}())?ke:function(T){return fl(T)&&ur.call(T,"callee")&&!Vn.call(T,"callee")},cv=Array.isArray;function lv(T){return T!=null&&F_(T.length)&&!uv(T)}function v3(T){return fl(T)&&lv(T)}var L_=Ie||E3;function uv(T){if(!vs(T))return!1;var j=De(T);return j==p||j==h||j==l||j==b}function F_(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=s}function vs(T){var j=typeof T;return T!=null&&(j=="object"||j=="function")}function fl(T){return T!=null&&typeof T=="object"}function y3(T){if(!fl(T)||De(T)!=w)return!1;var j=Bt(T);if(j===null)return!0;var G=ur.call(j,"constructor")&&j.constructor;return typeof G=="function"&&G instanceof G&&Bn.call(G)==Ge}var M_=pe?Xo(pe):Je;function w3(T){return n3(T,q_(T))}function q_(T){return lv(T)?N(T,!0):YV(T)}var C3=i3(function(T,j,G){R_(T,j,G)});function b3(T){return function(){return T}}function $_(T){return T}function E3(){return!1}e.exports=C3}),HX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessorBase=void 0;var e=ft(),r=On(),n=class{constructor(i,o){this._exporter=i,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let s=r.getEnv();this._maxExportBatchSize=typeof(o==null?void 0:o.maxExportBatchSize)=="number"?o.maxExportBatchSize:s.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(o==null?void 0:o.maxQueueSize)=="number"?o.maxQueueSize:s.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(o==null?void 0:o.scheduledDelayMillis)=="number"?o.scheduledDelayMillis:s.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(o==null?void 0:o.exportTimeoutMillis)=="number"?o.exportTimeoutMillis:s.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(i){}onEnd(i){this._isShutdown||this._addToBuffer(i)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}_addToBuffer(i){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(i),this._maybeStartTimer())}_flushAll(){return new Promise((i,o)=>{let s=[],a=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=a;c<l;c++)s.push(this._flushOneBatch());Promise.all(s).then(()=>{i()}).catch(o)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((i,o)=>{let s=setTimeout(()=>{o(new Error("Timeout"))},this._exportTimeoutMillis);e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),a=>{var c;clearTimeout(s),a.code===r.ExportResultCode.SUCCESS?i():o((c=a.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(i=>{r.globalErrorHandler(i)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};t.BatchSpanProcessorBase=n}),VX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchSpanProcessor=void 0;var e=HX(),r=class extends e.BatchSpanProcessorBase{onShutdown(){}};t.BatchSpanProcessor=r}),WX=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(VX(),t)}),ZL=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(WX(),t)}),GX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTracerProvider=t.ForceFlushState=void 0;var e=ft(),r=On(),n=wb(),i=eF(),o=YL(),s=UX(),a=XL(),c=BX(),l=ZL(),u;(function(d){d[d.resolved=0]="resolved",d[d.timeout=1]="timeout",d[d.error=2]="error",d[d.unresolved=3]="unresolved"})(u=t.ForceFlushState||(t.ForceFlushState={}));var f=class{constructor(d={}){var p;this._registeredSpanProcessors=[],this._tracers=new Map;let h=c({},o.DEFAULT_CONFIG,d);this.resource=(p=h.resource)!==null&&p!==void 0?p:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},h,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let g=new l.BatchSpanProcessor(m);this.activeSpanProcessor=g}else this.activeSpanProcessor=new a.NoopSpanProcessor}getTracer(d,p){let h=`${d}@${p||""}`;return this._tracers.has(h)||this._tracers.set(h,new i.Tracer({name:d,version:p},this._config,this)),this._tracers.get(h)}addSpanProcessor(d){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(p=>e.diag.error("Error while trying to shutdown current span processor",p)),this._registeredSpanProcessors.push(d),this.activeSpanProcessor=new s.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(d={}){e.trace.setGlobalTracerProvider(this),d.propagator===void 0&&(d.propagator=this._buildPropagatorFromEnv()),d.contextManager&&e.context.setGlobalContextManager(d.contextManager),d.propagator&&e.propagation.setGlobalPropagator(d.propagator)}forceFlush(){let d=this._config.forceFlushTimeoutMillis,p=this._registeredSpanProcessors.map(h=>new Promise(m=>{let g,v=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${d} ms`)),g=u.timeout},d);h.forceFlush().then(()=>{clearTimeout(v),g!==u.timeout&&(g=u.resolved,m(g))}).catch(w=>{clearTimeout(v),g=u.error,m(w)})}));return new Promise((h,m)=>{Promise.all(p).then(g=>{let v=g.filter(w=>w!==u.resolved);v.length>0?m(v):h()}).catch(g=>m([g]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(d){var p;return(p=f._registeredPropagators.get(d))===null||p===void 0?void 0:p()}_getSpanExporter(d){var p;return(p=f._registeredExporters.get(d))===null||p===void 0?void 0:p()}_buildPropagatorFromEnv(){let d=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),p=d.map(h=>{let m=this._getPropagator(h);return m||e.diag.warn(`Propagator "${h}" requested through environment variable is unavailable.`),m}).reduce((h,m)=>(m&&h.push(m),h),[]);if(p.length!==0)return d.length===1?p[0]:new r.CompositePropagator({propagators:p})}_buildExporterFromEnv(){let d=r.getEnv().OTEL_TRACES_EXPORTER;if(d==="none")return;let p=this._getSpanExporter(d);return p||e.diag.error(`Exporter "${d}" requested through environment variable is unavailable.`),p}};t.BasicTracerProvider=f,f._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),f._registeredExporters=new Map}),zX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleSpanExporter=void 0;var e=On(),r=class{export(n,i){return this._sendSpans(n,i)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:e.hrTimeToMicroseconds(n.startTime),duration:e.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,i){for(let o of n)console.log(this._exportInfo(o));if(i)return i({code:e.ExportResultCode.SUCCESS})}};t.ConsoleSpanExporter=r}),KX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemorySpanExporter=void 0;var e=On(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,i){if(this._stopped)return i({code:e.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>i({code:e.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};t.InMemorySpanExporter=r}),YX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpanProcessor=void 0;var e=ft(),r=On(),n=class{constructor(i){this._exporter=i,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(i){}onEnd(i){this._isShutdown||e.context.with(r.suppressTracing(e.context.active()),()=>{this._exporter.export([i],o=>{var s;o.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((s=o.error)!==null&&s!==void 0?s:new Error(`SimpleSpanProcessor: span export failed (status ${o})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((i,o)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(i).catch(s=>{o(s)})}),this._shuttingDownPromise)}};t.SimpleSpanProcessor=n}),QX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),XX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),ZX=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),eF=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(RX(),t),r(GX(),t),r(ZL(),t),r(zX(),t),r(KX(),t),r(YX(),t),r(JX(),t),r(QX(),t),r(XL(),t),r(KL(),t),r(XX(),t),r(ZX(),t),r(eZ(),t)}),tZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.azureCoreTracing=t.AzureMonitorSymbol=void 0;var e=Pt();t.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(o){if(r)return o;try{var s=eF(),a=ft(),c=new s.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),u=o.setTracer;o.setTracer=function(f){var d=f.startSpan;f.startSpan=function(p,h,m){var g=d.call(this,p,h,m),v=g.end;return g.end=function(){var w=v.apply(this,arguments);return e.channel.publish("azure-coretracing",g),w},g},f[t.AzureMonitorSymbol]=!0,u.call(this,f)},a.trace.getSpan(a.context.active()),o.setTracer(l),r=!0}catch{}return o};t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}t.enable=i}),rZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.bunyan=void 0;var e=Pt(),r=function(i){var o=i.prototype._emit;return i.prototype._emit=function(s,a){var c=o.apply(this,arguments);if(!a){var l=c;l||(l=o.call(this,s,!0)),e.channel.publish("bunyan",{level:s.level,result:l})}return c},i};t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("bunyan",t.bunyan)}t.enable=n}),nZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.console=void 0;var e=Pt(),r=require("stream"),n=function(o){var s=new r.Writable,a=new r.Writable;s.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m}),!0},a.write=function(h){if(!h)return!0;var m=h.toString();return e.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new o.Console(s,a),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],u=function(h){var m=o[h];m&&(o[h]=function(){if(c[h])try{c[h].apply(c,arguments)}catch{}return m.apply(o,arguments)})},f=0,d=l;f<d.length;f++){var p=d[f];u(p)}return o};t.console={versionSpecifier:">= 4.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("console",t.console),require("console")}t.enable=i}),iZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongoCore=void 0;var e=Pt(),r=function(i){var o=i.Server.prototype.connect;return i.Server.prototype.connect=function(){var s=o.apply(this,arguments),a=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=e.channel.bindToContext(arguments[l])),a.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=e.channel.bindToContext(arguments[1])),c.apply(this,arguments)},s},i};t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}t.enable=n}),oZ=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(c){for(var l,u=1,f=arguments.length;u<f;u++){l=arguments[u];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])}return c},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mongo330=t.mongo3=t.mongo2=void 0;var r=Pt(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(f){return f()})}}}),u={};return l.on("started",function(f){u[f.requestId]||(u[f.requestId]=e(e({},f),{time:new Date}))}),l.on("succeeded",function(f){var d=u[f.requestId];d&&delete u[f.requestId],typeof f.operationId=="function"?f.operationId(function(){return r.channel.publish("mongodb",{startedData:d,event:f,succeeded:!0})}):r.channel.publish("mongodb",{startedData:d,event:f,succeeded:!0})}),l.on("failed",function(f){var d=u[f.requestId];d&&delete u[f.requestId],typeof f.operationId=="function"?f.operationId(function(){return r.channel.publish("mongodb",{startedData:d,event:f,succeeded:!1})}):r.channel.publish("mongodb",{startedData:d,event:f,succeeded:!1})}),c},i=function(c){var l=c.instrument(),u={},f={};return l.on("started",function(d){u[d.requestId]||(f[d.requestId]=r.channel.bindToContext(function(p){return p()}),u[d.requestId]=e(e({},d),{time:new Date}))}),l.on("succeeded",function(d){var p=u[d.requestId];p&&delete u[d.requestId],typeof d=="object"&&typeof f[d.requestId]=="function"&&(f[d.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:d,succeeded:!0})}),delete f[d.requestId])}),l.on("failed",function(d){var p=u[d.requestId];p&&delete u[d.requestId],typeof d=="object"&&typeof f[d.requestId]=="function"&&(f[d.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:d,succeeded:!1})}),delete f[d.requestId])}),c},o=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var u=l.apply(this,arguments),f=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=r.channel.bindToContext(arguments[p])),f.apply(this,arguments)};var d=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),d.apply(this,arguments)},u},c},s=function(c){o(c);var l=c.instrument(),u={},f={};return l.on("started",function(d){u[d.requestId]||(f[d.requestId]=r.channel.bindToContext(function(p){return p()}),u[d.requestId]=d)}),l.on("succeeded",function(d){var p=u[d.requestId];p&&delete u[d.requestId],typeof d=="object"&&typeof f[d.requestId]=="function"&&(f[d.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:d,succeeded:!0})}),delete f[d.requestId])}),l.on("failed",function(d){var p=u[d.requestId];p&&delete u[d.requestId],typeof d=="object"&&typeof f[d.requestId]=="function"&&(f[d.requestId](function(){return r.channel.publish("mongodb",{startedData:p,event:d,succeeded:!1})}),delete f[d.requestId])}),c};t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:i},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:s};function a(){r.channel.registerMonkeyPatch("mongodb",t.mongo2),r.channel.registerMonkeyPatch("mongodb",t.mongo3),r.channel.registerMonkeyPatch("mongodb",t.mongo330)}t.enable=a}),sZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.mysql=void 0;var e=Pt(),r=require("path"),n=function(o,s){var a=function(p,h){return function(m,g){var v=p[m];v&&(p[m]=function(){for(var w=arguments.length-1,b=arguments.length-1;b>=0;--b)if(typeof arguments[b]=="function"){w=b;break}else if(typeof arguments[b]!="undefined")break;var C=arguments[w],S={result:null,startTime:null,startDate:null};typeof C=="function"&&(g?(S.startTime=process.hrtime(),S.startDate=new Date,arguments[w]=e.channel.bindToContext(g(S,C))):arguments[w]=e.channel.bindToContext(C));var _=v.apply(this,arguments);return S.result=_,_})}},c=function(p,h){return a(p.prototype,h+".prototype")},l=["connect","changeUser","ping","statistics","end"],u=require(r.dirname(s)+"/lib/Connection");l.forEach(function(p){return c(u,"Connection")(p)}),a(u,"Connection")("createQuery",function(p,h){return function(m){var g=process.hrtime(p.startTime),v=g[0]*1e3+g[1]/1e6|0;e.channel.publish("mysql",{query:p.result,callbackArgs:arguments,err:m,duration:v,time:p.startDate}),h.apply(this,arguments)}});var f=["_enqueueCallback"],d=require(r.dirname(s)+"/lib/Pool");return f.forEach(function(p){return c(d,"Pool")(p)}),o};t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function i(){e.channel.registerMonkeyPatch("mysql",t.mysql)}t.enable=i}),aZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgresPool1=void 0;var e=Pt();function r(i){var o=i.prototype.connect;return i.prototype.connect=function(s){return s&&(arguments[0]=e.channel.bindToContext(s)),o.apply(this,arguments)},i}t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}t.enable=n}),cZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.postgres7=t.postgres6=void 0;var e=Pt(),r=require("events");function n(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,f,d){var p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h=process.hrtime(),m;function g(v){v&&v[l]&&(v=v[l]);var w=e.channel.bindToContext(function(b,C){var S=process.hrtime(h);if(p.result=C&&{rowCount:C.rowCount,command:C.command},p.error=b,p.duration=Math.ceil(S[0]*1e3+S[1]/1e6),e.channel.publish("postgres",p),b){if(v)return v.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",b)}else v&&v.apply(this,arguments)});try{return Object.defineProperty(w,l,{value:v}),w}catch{return v}}try{typeof u=="string"?f instanceof Array?(p.query.preparable={text:u,args:f},d=g(d)):(p.query.text=u,d?d=g(d):f=g(f)):(typeof u.name=="string"?p.query.plan=u.name:u.values instanceof Array?p.query.preparable={text:u.text,args:u.values}:p.query.text=u.text,d?d=g(d):f?f=g(f):u.callback=g(u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=f,arguments[2]=d,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},s}function i(s,a){var c=s.Client.prototype.query,l="__diagnosticOriginalFunc";return s.Client.prototype.query=function(u,f,d){var p=this,h=!!d,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),v;function w(b){b&&b[l]&&(b=b[l]);var C=e.channel.bindToContext(function(S,_){var P=process.hrtime(g);if(m.result=_&&{rowCount:_.rowCount,command:_.command},m.error=S,m.duration=Math.ceil(P[0]*1e3+P[1]/1e6),e.channel.publish("postgres",m),S){if(b)return b.apply(this,arguments);v&&v instanceof r.EventEmitter&&v.emit("error",S)}else b&&b.apply(this,arguments)});try{return Object.defineProperty(C,l,{value:b}),C}catch{return b}}try{typeof u=="string"?f instanceof Array?(m.query.preparable={text:u,args:f},h=typeof d=="function",d=h?w(d):d):(m.query.text=u,d?(h=typeof d=="function",d=h?w(d):d):(h=typeof f=="function",f=h?w(f):f)):(typeof u.name=="string"?m.query.plan=u.name:u.values instanceof Array?m.query.preparable={text:u.text,args:u.values}:m.query.text=u.text,d?(h=typeof d=="function",d=w(d)):f?(h=typeof f=="function",f=h?w(f):f):(h=typeof u.callback=="function",u.callback=h?w(u.callback):u.callback))}catch{return c.apply(this,arguments)}return arguments[0]=u,arguments[1]=f,arguments[2]=d,arguments.length=arguments.length>3?arguments.length:3,v=c.apply(this,arguments),h?v:v.then(function(b){return w()(void 0,b),new p._Promise(function(C,S){C(b)})}).catch(function(b){return w()(b,void 0),new p._Promise(function(C,S){S(b)})})},s}t.postgres6={versionSpecifier:"6.*",patch:n},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:i};function o(){e.channel.registerMonkeyPatch("pg",t.postgres6),e.channel.registerMonkeyPatch("pg",t.postgres7)}t.enable=o}),lZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.redis=void 0;var e=Pt(),r=function(i){var o=i.RedisClient.prototype.internal_send_command;return i.RedisClient.prototype.internal_send_command=function(s){if(s){var a=s.callback;if(!a||!a.pubsubBound){var c=this.address,l=process.hrtime(),u=new Date;s.callback=e.channel.bindToContext(function(f,d){var p=process.hrtime(l),h=p[0]*1e3+p[1]/1e6|0;e.channel.publish("redis",{duration:h,address:c,commandObj:s,err:f,result:d,time:u}),typeof a=="function"&&a.apply(this,arguments)}),s.callback.pubsubBound=!0}}return o.call(this,s)},i};t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){e.channel.registerMonkeyPatch("redis",t.redis)}t.enable=n}),uZ=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(o){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=void 0;var r=Pt(),n=function(o){var s=o.Connection.prototype.makeRequest;return o.Connection.prototype.makeRequest=function(){function a(l){var u=process.hrtime(),f={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(d,p,h){var m=process.hrtime(u);f=e(e({},f),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!d&&{rowCount:p,rows:h},query:{text:this.parametersByName.statement.value},error:d,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",f),l.call(this,d,p,h)})}var c=arguments[0];arguments[0].callback=a(c.callback),s.apply(this,arguments)},o};t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function i(){r.channel.registerMonkeyPatch("tedious",t.tedious)}t.enable=i}),fZ=O(t=>{"use strict";var e=t&&t.__extends||function(){var a=function(c,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(u[d]=f[d])},a(c,l)};return function(c,l){a(c,l);function u(){this.constructor=c}c.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),r=t&&t.__rest||function(a,c){var l={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&c.indexOf(u)<0&&(l[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,u=Object.getOwnPropertySymbols(a);f<u.length;f++)c.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(a,u[f])&&(l[u[f]]=a[u[f]]);return l};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.winston2=t.winston3=void 0;var n=Pt(),i=function(a){var c=a.Logger.prototype.log,l,u=function(f,d,p){var h;return l===a.config.npm.levels?h="npm":l===a.config.syslog.levels?h="syslog":h="unknown",n.channel.publish("winston",{level:f,message:d,meta:p,levelKind:h}),d};return a.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[u]:this.filters[this.filters.length-1]!==u&&(this.filters=this.filters.filter(function(f){return f!==u}),this.filters.push(u)),c.apply(this,arguments)},a},o=function(a){var c=function(p,h){var m;return p.config.npm.levels[h]!=null?m="npm":p.config.syslog.levels[h]!=null?m="syslog":m="unknown",m},l=function(p){e(h,p);function h(m,g){var v=p.call(this,g)||this;return v.winston=m,v}return h.prototype.log=function(m,g){var v=m.message,w=m.level,b=m.meta,C=r(m,["message","level","meta"]);w=typeof Symbol.for=="function"?m[Symbol.for("level")]:w,v=m instanceof Error?m:v;var S=c(this.winston,w);b=b||{};for(var _ in C)C.hasOwnProperty(_)&&(b[_]=C[_]);n.channel.publish("winston",{message:v,level:w,levelKind:S,meta:b}),g()},h}(a.Transport);function u(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);this.add(new l(a,{level:h}))}var f=a.createLogger;a.createLogger=function(){var p=arguments[0].levels||a.config.npm.levels,h;for(var m in p)p.hasOwnProperty(m)&&(h=h===void 0||p[m]>p[h]?m:h);var g=f.apply(this,arguments);g.add(new l(a,{level:h}));var v=g.configure;return g.configure=function(){v.apply(this,arguments),u.apply(this,arguments)},g};var d=a.configure;return a.configure=function(){d.apply(this,arguments),u.apply(this,arguments)},a.add(new l(a)),a};t.winston3={versionSpecifier:"3.x",patch:o},t.winston2={versionSpecifier:"2.x",patch:i};function s(){n.channel.registerMonkeyPatch("winston",t.winston2),n.channel.registerMonkeyPatch("winston",t.winston3)}t.enable=s}),dZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.tedious=t.pgPool=t.pg=t.winston=t.redis=t.mysql=t.mongodb=t.mongodbCore=t.console=t.bunyan=t.azuresdk=void 0;var e=tZ();t.azuresdk=e;var r=rZ();t.bunyan=r;var n=nZ();t.console=n;var i=iZ();t.mongodbCore=i;var o=oZ();t.mongodb=o;var s=sZ();t.mysql=s;var a=aZ();t.pgPool=a;var c=cZ();t.pg=c;var l=lZ();t.redis=l;var u=uZ();t.tedious=u;var f=fZ();t.winston=f;function d(){r.enable(),n.enable(),i.enable(),o.enable(),s.enable(),c.enable(),a.enable(),l.enable(),f.enable(),e.enable(),u.enable()}t.enable=d}),Cb=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextPreservation=t.IsInitialized=void 0;var e=kL(),r=Qt();t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(t.IsInitialized){i=dZ(),o=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",s=o.split(","),a={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston,azuresdk:i.azuresdk};for(c in a)s.indexOf(c)===-1&&(a[c].enable(),r.info(n,"Subscribed to "+c+" events"));s.length>0&&r.info(n,"Some modules will not be patched",s)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var i,o,s,a,c;function l(u){if(t.IsInitialized){var f=Pt();f.channel.addContextPreservation(u),f.channel.spanContextPropagator=e.AsyncScopeManager}}t.registerContextPreservation=l}),Vu=O((t,e)=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),hn=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var f,d=1,p=arguments.length;d<p;d++){f=arguments[d];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])}return u},r.apply(this,arguments)},n=require("http"),i=require("https"),o=require("url"),s=require("constants"),a=Qt(),c=Vu(),l=function(){function u(){}return u.getCookie=function(f,d){var p="";if(f&&f.length&&typeof d=="string")for(var h=f+"=",m=d.split(";"),g=0;g<m.length;g++){var d=m[g];if(d=u.trim(d),d&&d.indexOf(h)===0){p=d.substring(h.length,m[g].length);break}}return p},u.trim=function(f){return typeof f=="string"?f.replace(/^\s+|\s+$/g,""):""},u.int32ArrayToBase64=function(f){var d=function(v,w){return String.fromCharCode(v>>w&255)},p=function(v){return d(v,24)+d(v,16)+d(v,8)+d(v,0)},h=f.map(p).join(""),m=Buffer.from?Buffer.from(h,"binary"):new Buffer(h,"binary"),g=m.toString("base64");return g.substr(0,g.indexOf("="))},u.random32=function(){return 4294967296*Math.random()|0},u.randomu32=function(){return u.random32()+2147483648},u.w3cTraceId=function(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],d="",p,h=0;h<4;h++)p=u.random32(),d+=f[p&15]+f[p>>4&15]+f[p>>8&15]+f[p>>12&15]+f[p>>16&15]+f[p>>20&15]+f[p>>24&15]+f[p>>28&15];var m=f[8+Math.random()*4|0];return d.substr(0,8)+d.substr(9,4)+"4"+d.substr(13,3)+m+d.substr(16,3)+d.substr(19,12)},u.w3cSpanId=function(){return u.w3cTraceId().substring(16)},u.isValidW3CId=function(f){return f.length===32&&f!=="00000000000000000000000000000000"},u.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},u.isError=function(f){return f instanceof Error},u.isPrimitive=function(f){var d=typeof f;return d==="string"||d==="number"||d==="boolean"},u.isDate=function(f){return Object.prototype.toString.call(f)==="[object Date]"},u.msToTimeSpan=function(f){(isNaN(f)||f<0)&&(f=0);var d=(f/1e3%60).toFixed(7).replace(/0{0,4}$/,""),p=""+Math.floor(f/(1e3*60))%60,h=""+Math.floor(f/(1e3*60*60))%24,m=Math.floor(f/(1e3*60*60*24));d=d.indexOf(".")<2?"0"+d:d,p=p.length<2?"0"+p:p,h=h.length<2?"0"+h:h;var g=m>0?m+".":"";return g+h+":"+p+":"+d},u.extractError=function(f){var d=f;return{message:f.message,code:d.code||d.id||""}},u.extractObject=function(f){return f instanceof Error?u.extractError(f):typeof f.toJSON=="function"?f.toJSON():f},u.validateStringMap=function(f){if(typeof f!="object"){a.info("Invalid properties dropped from payload");return}var d={};for(var p in f){var h="",m=f[p],g=typeof m;if(u.isPrimitive(m))h=m.toString();else if(m===null||g==="undefined")h="";else if(g==="function"){a.info("key: "+p+" was function; will not serialize");continue}else{var v=u.isArray(m)?m:u.extractObject(m);try{u.isPrimitive(v)?h=v:h=JSON.stringify(v)}catch(w){h=m.constructor.name.toString()+" (Error: "+w.message+")",a.info("key: "+p+", could not be serialized")}}d[p]=h.substring(0,u.MAX_PROPERTY_LENGTH)}return d},u.canIncludeCorrelationHeader=function(f,d){var p=f&&f.config&&f.config.correlationHeaderExcludedDomains;if(!p||p.length==0||!d)return!0;for(var h=0;h<p.length;h++){var m=new RegExp(p[h].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(o.parse(d).hostname))return!1}return!0},u.getCorrelationContextTarget=function(f,d){var p=f.headers&&f.headers[c.requestContextHeader];if(p)for(var h=p.split(","),m=0;m<h.length;++m){var g=h[m].split("=");if(g.length==2&&g[0]==d)return g[1]}},u.makeRequest=function(f,d,p,h){d&&d.indexOf("//")===0&&(d="https:"+d);var m=o.parse(d),g=r(r({},p),{host:m.hostname,port:m.port,path:m.pathname}),v=void 0;if(m.protocol==="https:"&&(v=f.proxyHttpsUrl||void 0),m.protocol==="http:"&&(v=f.proxyHttpUrl||void 0),v){v.indexOf("//")===0&&(v="http:"+v);var w=o.parse(v);w.protocol==="https:"?(a.info("Proxies that use HTTPS are not supported"),v=void 0):g=r(r({},g),{host:w.hostname,port:w.port||"80",path:d,headers:r(r({},g.headers),{Host:m.hostname})})}var b=m.protocol==="https:"&&!v;return b&&f.httpsAgent!==void 0?g.agent=f.httpsAgent:!b&&f.httpAgent!==void 0?g.agent=f.httpAgent:b&&(g.agent=u.tlsRestrictedAgent),b?i.request(g,h):n.request(g,h)},u.safeIncludeCorrelationHeader=function(f,d,p){var h;if(typeof p=="string")h=p;else if(p instanceof Array)h=p.join(",");else if(p&&typeof p.toString=="function")try{h=p.toString()}catch(m){a.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,p)}h?u.addCorrelationIdHeaderFromString(f,d,h):d.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+f.config.correlationId)},u.dumpObj=function(f){var d=Object.prototype.toString.call(f),p="";return d==="[object Error]"?p="{ stack: '"+f.stack+"', message: '"+f.message+"', name: '"+f.name+"'":p=JSON.stringify(f),d+p},u.addCorrelationIdHeaderFromString=function(f,d,p){var h=p.split(","),m=c.requestContextSourceKey+"=",g=h.some(function(v){return v.substring(0,m.length)===m});g||d.setHeader(c.requestContextHeader,p+","+c.requestContextSourceKey+"="+f.config.correlationId)},u.MAX_PROPERTY_LENGTH=8192,u.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),u}();e.exports=l}),Dc=O((t,e)=>{"use strict";var r=hn(),n=Qt(),i=function(){function o(){}return o.queryCorrelationId=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId";if(o.completedLookups.hasOwnProperty(c)){a(o.completedLookups[c]);return}else if(o.pendingLookups[c]){o.pendingLookups[c].push(a);return}o.pendingLookups[c]=[a];var l=function(){if(o.pendingLookups[c]){var u={method:"GET",disableAppInsightsAutoCollection:!0};n.info(o.TAG,u);var f=r.makeRequest(s,c,u,function(d){if(d.statusCode===200){var p="";d.setEncoding("utf-8"),d.on("data",function(h){p+=h}),d.on("end",function(){n.info(o.TAG,p);var h=o.correlationIdPrefix+p;o.completedLookups[c]=h,o.pendingLookups[c]&&o.pendingLookups[c].forEach(function(m){return m(h)}),delete o.pendingLookups[c]})}else d.statusCode>=400&&d.statusCode<500?(o.completedLookups[c]=void 0,delete o.pendingLookups[c]):setTimeout(l,s.correlationIdRetryIntervalMs)});f&&(f.on("error",function(d){n.warn(o.TAG,d)}),f.end())}};setTimeout(l,0)},o.cancelCorrelationIdQuery=function(s,a){var c=s.profileQueryEndpoint+"/api/profiles/"+s.instrumentationKey+"/appId",l=o.pendingLookups[c];l&&(o.pendingLookups[c]=l.filter(function(u){return u!=a}),o.pendingLookups[c].length==0&&delete o.pendingLookups[c])},o.generateRequestId=function(s){if(s){s=s[0]=="|"?s:"|"+s,s[s.length-1]!=="."&&(s+=".");var a=(o.currentRootId++).toString(16);return o.appendSuffix(s,a,"_")}else return o.generateRootId()},o.getRootId=function(s){var a=s.indexOf(".");a<0&&(a=s.length);var c=s[0]==="|"?1:0;return s.substring(c,a)},o.generateRootId=function(){return"|"+r.w3cTraceId()+"."},o.appendSuffix=function(s,a,c){if(s.length+a.length<o.requestIdMaxLength)return s+a+c;var l=o.requestIdMaxLength-9;if(s.length>l)for(;l>1;--l){var u=s[l-1];if(u==="."||u==="_")break}if(l<=1)return o.generateRootId();for(a=r.randomu32().toString(16);a.length<8;)a="0"+a;return s.substring(0,l)+a+"#"},o.TAG="CorrelationIdManager",o.correlationIdPrefix="cid-v1:",o.w3cEnabled=!0,o.pendingLookups={},o.completedLookups={},o.requestIdMaxLength=1024,o.currentRootId=r.randomu32(),o}();e.exports=i}),cm=O((t,e)=>{"use strict";var r=hn(),n=Dc(),i=function(){function o(s,a){if(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.version=o.DEFAULT_VERSION,s&&typeof s=="string")if(s.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=s.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=o.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=o.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=o.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),o.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),o.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(a){this.parentId=a.slice();var u=n.getRootId(a);o.isValidTraceId(u)||(this.legacyRootId=u,u=r.w3cTraceId()),a.indexOf("|")!==-1&&(a=a.substring(1+a.substring(0,a.length-1).lastIndexOf("."),a.length-1)),this.traceId=u,this.spanId=a}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return o.isValidTraceId=function(s){return s.match(/^[0-9a-f]{32}$/)&&s!=="00000000000000000000000000000000"},o.isValidSpanId=function(s){return s.match(/^[0-9a-f]{16}$/)&&s!=="0000000000000000"},o.formatOpenTelemetryTraceFlags=function(s){var a="0"+s.toString(16);return a.substring(a.length-2)},o.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},o.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},o.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},o.DEFAULT_TRACE_FLAG="01",o.DEFAULT_VERSION="00",o}();e.exports=i}),tF=O((t,e)=>{"use strict";var r=function(){function n(i){this.fieldmap=[],!!i&&(this.fieldmap=this.parseHeader(i))}return n.prototype.toString=function(){var i=this.fieldmap;return!i||i.length==0?null:i.join(", ")},n.validateKeyChars=function(i){var o=i.split("@");if(o.length==2){var s=o[0].trim(),a=o[1].trim(),c=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(a.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(o.length==1)return Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(i){var o=[],s={},a=i.split(",");if(a.length>32)return null;for(var c=0,l=a;c<l.length;c++){var u=l[c],f=u.trim();if(f.length!==0){var d=f.split("=");if(d.length!==2||!n.validateKeyChars(d[0])||s[d[0]])return null;s[d[0]]=!0,o.push(f)}}return o},n.strict=!0,n}();e.exports=r}),Fo=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),pZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),rF=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),hZ=O((t,e)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();e.exports=r}),mZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=rF(),i=function(o){r(s,o);function s(){return o.call(this)||this}return s}(n);e.exports=i}),nF=O((t,e)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),e.exports=r}),gZ=O((t,e)=>{"use strict";var r=nF(),n=function(){function i(){this.kind=r.Measurement}return i}();e.exports=n}),vZ=O((t,e)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();e.exports=r}),iF=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),yZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.exceptions=[],a.properties={},a.measurements={},a}return s}(n);e.exports=i}),wZ=O((t,e)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();e.exports=r}),CZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a}return s}(n);e.exports=i}),bZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.metrics=[],a.properties={},a}return s}(n);e.exports=i}),EZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=iF(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),_Z=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.success=!0,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),SZ=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u])},o(s,a)};return function(s,a){o(s,a);function c(){this.constructor=s}s.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}}(),n=Fo(),i=function(o){r(s,o);function s(){var a=o.call(this)||this;return a.ver=2,a.properties={},a.measurements={},a}return s}(n);e.exports=i}),xZ=O((t,e)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),e.exports=r}),PZ=O((t,e)=>{"use strict";var r=function(){function n(){}return n}();e.exports=r}),oF=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=pZ(),t.Base=rF(),t.ContextTagKeys=hZ(),t.Data=mZ(),t.DataPoint=gZ(),t.DataPointType=nF(),t.Domain=Fo(),t.Envelope=vZ(),t.EventData=iF(),t.ExceptionData=yZ(),t.ExceptionDetails=wZ(),t.MessageData=CZ(),t.MetricData=bZ(),t.PageViewData=EZ(),t.RemoteDependencyData=_Z(),t.RequestData=SZ(),t.SeverityLevel=xZ(),t.StackFrame=PZ()}),kZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainSupportsProperties=t.RemoteDependencyDataConstants=void 0;var e=oF(),r=function(){function i(){}return i.TYPE_HTTP="Http",i.TYPE_AI="Http (tracked component)",i}();t.RemoteDependencyDataConstants=r;function n(i){return"properties"in i||i instanceof e.EventData||i instanceof e.ExceptionData||i instanceof e.MessageData||i instanceof e.MetricData||i instanceof e.PageViewData||i instanceof e.RemoteDependencyData||i instanceof e.RequestData}t.domainSupportsProperties=n}),IZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),AZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),TZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),DZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),RZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),OZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),NZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),LZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),FZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),MZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),qZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),$Z=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),jZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryType=t.TelemetryTypeString=t.baseTypeToTelemetryType=t.telemetryTypeToBaseType=void 0;function e(i){switch(i){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}t.telemetryTypeToBaseType=e;function r(i){switch(i){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}t.baseTypeToTelemetryType=r,t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(i){i[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})(n=t.TelemetryType||(t.TelemetryType={}))}),UZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(IZ(),t),r(AZ(),t),r(TZ(),t),r(DZ(),t),r(RZ(),t),r(OZ(),t),r(NZ(),t),r(LZ(),t),r(FZ(),t),r(MZ(),t),r(qZ(),t),r($Z(),t),r(jZ(),t)}),BZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),HZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),VZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),WZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),GZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),zZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),KZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),YZ=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),JZ=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(BZ(),t),r(HZ(),t),r(VZ(),t),r(WZ(),t),r(GZ(),t),r(zZ(),t),r(KZ(),t),r(YZ(),t)}),Sr=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(kZ(),t),r(oF(),t),r(UZ(),t),r(JZ(),t)}),sF=O((t,e)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(i,o){var s=+new Date;this.duration=s-this.startTime,this.statusCode=i;var a=this.properties||{};if(o){if(typeof o=="string")a.error=o;else if(o instanceof Error)a.error=o.message;else if(typeof o=="object")for(var c in o)a[c]=o[c]&&o[c].toString&&o[c].toString()}this.properties=a},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();e.exports=r}),aF=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var d=function(p,h){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[v]=g[v])},d(p,h)};return function(p,h){d(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),n=require("url"),i=Sr(),o=hn(),s=Vu(),a=sF(),c=Dc(),l=tF(),u=cm(),f=function(d){r(p,d);function p(h,m){var g=d.call(this)||this;return h&&(g.method=h.method,g.url=g._getAbsoluteUrl(h),g.startTime=+new Date,g.socketRemoteAddress=h.socket&&h.socket.remoteAddress,g.parseHeaders(h,m),h.connection&&(g.connectionRemoteAddress=h.connection.remoteAddress,g.legacySocketRemoteAddress=h.connection.socket&&h.connection.socket.remoteAddress)),g}return p.prototype.onError=function(h,m){this._setStatus(void 0,h),m&&(this.duration=m)},p.prototype.onResponse=function(h,m){this._setStatus(h.statusCode,void 0),m&&(this.duration=m)},p.prototype.getRequestTelemetry=function(h){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(h&&h.time?m.time=h.time:this.startTime&&(m.time=new Date(this.startTime)),h){for(var g in h)m[g]||(m[g]=h[g]);if(h.properties)for(var g in h.properties)m.properties[g]=h.properties[g]}return m},p.prototype.getRequestTags=function(h){var m={};for(var g in h)m[g]=h[g];return m[p.keys.locationIp]=h[p.keys.locationIp]||this._getIp(),m[p.keys.sessionId]=h[p.keys.sessionId]||this._getId("ai_session"),m[p.keys.userId]=h[p.keys.userId]||this._getId("ai_user"),m[p.keys.userAuthUserId]=h[p.keys.userAuthUserId]||this._getId("ai_authUser"),m[p.keys.operationName]=this.getOperationName(h),m[p.keys.operationParentId]=this.getOperationParentId(h),m[p.keys.operationId]=this.getOperationId(h),m},p.prototype.getOperationId=function(h){return h[p.keys.operationId]||this.operationId},p.prototype.getOperationParentId=function(h){return h[p.keys.operationParentId]||this.parentId||this.getOperationId(h)},p.prototype.getOperationName=function(h){return h[p.keys.operationName]||this.method+" "+n.parse(this.url).pathname},p.prototype.getRequestId=function(){return this.requestId},p.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},p.prototype.getTraceparent=function(){return this.traceparent},p.prototype.getTracestate=function(){return this.tracestate},p.prototype.getLegacyRootId=function(){return this.legacyRootId},p.prototype._getAbsoluteUrl=function(h){if(!h.headers)return h.url;var m=h.connection?h.connection.encrypted:null,g=n.parse(h.url),v=g.pathname,w=g.search,b=m||h.headers["x-forwarded-proto"]=="https"?"https":"http",C=n.format({protocol:b,host:h.headers.host,pathname:v,search:w});return C},p.prototype._getIp=function(){var h=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(v){var w=h.exec(v);if(w)return w[0]},g=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!g&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(g="127.0.0.1"),g},p.prototype._getId=function(h){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",g=p.parseId(o.getCookie(h,m));return g},p.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},p.prototype.parseHeaders=function(h,m){if(this.rawHeaders=h.headers||h.rawHeaders,this.userAgent=h.headers&&h.headers["user-agent"],this.sourceCorrelationId=o.getCorrelationContextTarget(h,s.requestContextSourceKey),h.headers){var g=h.headers[s.traceStateHeader]?h.headers[s.traceStateHeader].toString():null,v=h.headers[s.traceparentHeader]?h.headers[s.traceparentHeader].toString():null,w=h.headers[s.requestIdHeader]?h.headers[s.requestIdHeader].toString():null,b=h.headers[s.parentIdHeader]?h.headers[s.parentIdHeader].toString():null,C=h.headers[s.rootIdHeader]?h.headers[s.rootIdHeader].toString():null;this.correlationContextHeader=h.headers[s.correlationContextHeader]?h.headers[s.correlationContextHeader].toString():null,c.w3cEnabled&&(v||g)?(this.traceparent=new u(v?v.toString():null),this.tracestate=v&&g&&new l(g?g.toString():null),this.setBackCompatFromThisTraceContext()):w?c.w3cEnabled?(this.traceparent=new u(null,w),this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new u,this.traceparent.parentId=b,this.traceparent.legacyRootId=C||b,this.setBackCompatFromThisTraceContext()):(this.parentId=b,this.requestId=c.generateRequestId(C||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},p.parseId=function(h){var m=h.split("|");return m.length>0?m[0]:""},p.keys=new i.ContextTagKeys,p}(a);e.exports=f}),QZ=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var f=c++;a[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=c++;a[d]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[f]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[f]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[d]+a[g]+"?"+a[b]+"?";a[C]="^"+S+"$";var _="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",P=c++;a[P]="^"+_+"$";var I=c++;a[I]="((?:<|>)?=?)";var A=c++;a[A]=a[u]+"|x|X|\\*";var R=c++;a[R]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var H=c++;a[H]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var X=c++;a[X]="^"+a[I]+"\\s*"+a[F]+"$";var J=c++;a[J]="^"+a[I]+"\\s*"+a[H]+"$";var Y=c++;a[Y]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var M=c++;a[M]="(\\s*)"+a[te]+"\\s+",s[M]=new RegExp(a[M],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[F]+"$";var V=c++;a[V]="^"+a[te]+a[H]+"$";var z=c++;a[z]="(?:\\^)";var oe=c++;a[oe]="(\\s*)"+a[z]+"\\s+",s[oe]=new RegExp(a[oe],"g");var re="$1^",be=c++;a[be]="^"+a[z]+a[F]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[H]+"$";var xe=c++;a[xe]="^"+a[I]+"\\s*("+_+")$|^$";var Te=c++;a[Te]="^"+a[I]+"\\s*("+S+")$|^$";var he=c++;a[he]="(\\s*)"+a[I]+"\\s*("+_+"|"+a[F]+")",s[he]=new RegExp(a[he],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var pe=c++;for(a[pe]="(<|>)?=?\\s*\\*",Ce=0;Ce<c;Ce++)r(Ce,a[Ce]),s[Ce]||(s[Ce]=new RegExp(a[Ce]));var Ce;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[P]:s[C];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Xo;function Xo(y,E){var x=je(y,E);return x?x.version:null}t.clean=Zo;function Zo(y,E){var x=je(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[P]:s[C]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var N=+D;if(N>=0&&N<i)return N}return D}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),st(this.major,y.major)||st(this.minor,y.minor)||st(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],D=y.prerelease[E];if(r("prerelease compare",E,x,D),x===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(x===void 0)return-1;if(x!==D)return st(x,D)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=es;function es(y,E,x,D){typeof x=="string"&&(D=x,x=void 0);try{return new Q(y,x).inc(E,D).version}catch{return null}}t.diff=ts;function ts(y,E){if(vr(y,E))return null;var x=je(y),D=je(E),N="";if(x.prerelease.length||D.prerelease.length){N="pre";var $="prerelease"}for(var B in x)if((B==="major"||B==="minor"||B==="patch")&&x[B]!==D[B])return N+B;return $}t.compareIdentifiers=st;var Ir=/^[0-9]+$/;function st(y,E){var x=Ir.test(y),D=Ir.test(E);return x&&D&&(y=+y,E=+E),y===E?0:x&&!D?-1:D&&!x?1:y<E?-1:1}t.rcompareIdentifiers=Bn;function Bn(y,E){return st(E,y)}t.major=ur;function ur(y,E){return new Q(y,E).major}t.minor=Gi;function Gi(y,E){return new Q(y,E).minor}t.patch=zi;function zi(y,E){return new Q(y,E).patch}t.compare=Ge;function Ge(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=rs;function rs(y,E){return Ge(y,E,!0)}t.rcompare=Hn;function Hn(y,E,x){return Ge(E,y,x)}t.sort=Ki;function Ki(y,E){return y.sort(function(x,D){return t.compare(x,D,E)})}t.rsort=Yi;function Yi(y,E){return y.sort(function(x,D){return t.rcompare(x,D,E)})}t.gt=Et;function Et(y,E,x){return Ge(y,E,x)>0}t.lt=Bt;function Bt(y,E,x){return Ge(y,E,x)<0}t.eq=vr;function vr(y,E,x){return Ge(y,E,x)===0}t.neq=Vn;function Vn(y,E,x){return Ge(y,E,x)!==0}t.gte=Ar;function Ar(y,E,x){return Ge(y,E,x)>=0}t.lte=At;function At(y,E,x){return Ge(y,E,x)<=0}t.cmp=Tt;function Tt(y,E,x,D){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return vr(y,x,D);case"!=":return Vn(y,x,D);case">":return Et(y,x,D);case">=":return Ar(y,x,D);case"<":return Bt(y,x,D);case"<=":return At(y,x,D);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Ie;function Ie(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Ie){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Ie))return new Ie(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Ie.prototype.parse=function(y){var E=this.options.loose?s[xe]:s[Te],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Ie.prototype.toString=function(){return this.value},Ie.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===_t?!0:(typeof y=="string"&&(y=new Q(y,this.options)),Tt(y,this.operator,this.semver,this.options))},Ie.prototype.intersects=function(y,E){if(!(y instanceof Ie))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(y.value,E),er(this.value,x,E);if(y.operator==="")return x=new ce(this.value,E),er(y.semver,x,E);var D=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),$=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ee=Tt(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),Z=Tt(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return D||N||$&&B||ee||Z},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof Ie)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ye]:s[It];y=y.replace(x,cs),r("hyphen replace",y),y=y.replace(s[he],yt),r("comparator trim",y,s[he]),y=y.replace(s[M],L),y=y.replace(s[oe],re),y=y.split(/\s+/).join(" ");var D=E?s[xe]:s[Te],N=y.split(" ").map(function($){return Cn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(D)})),N=N.map(function($){return new Ie($,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(D){return y.set.some(function(N){return N.every(function($){return D.intersects($,E)})})})})},t.toComparators=Ji;function Ji(y,E){return new ce(y,E).set.map(function(x){return x.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Cn(y,E){return r("comp",y,E),y=is(y,E),r("caret",y),y=Tr(y,E),r("tildes",y),y=ss(y,E),r("xrange",y),y=fr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Tr(y,E){return y.trim().split(/\s+/).map(function(x){return ns(x,E)}).join(" ")}function ns(y,E){var x=E.loose?s[V]:s[q];return y.replace(x,function(D,N,$,B,ee){r("tilde",y,D,N,$,B,ee);var Z;return we(N)?Z="":we($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+(+$+1)+".0"):Z=">="+N+"."+$+"."+B+" <"+N+"."+(+$+1)+".0",r("tilde return",Z),Z})}function is(y,E){return y.trim().split(/\s+/).map(function(x){return os(x,E)}).join(" ")}function os(y,E){r("caret",y,E);var x=E.loose?s[Pe]:s[be];return y.replace(x,function(D,N,$,B,ee){r("caret",y,D,N,$,B,ee);var Z;return we(N)?Z="":we($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?N==="0"?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?$==="0"?Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+$+"."+(+B+1):Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+B+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?Z=">="+N+"."+$+"."+B+" <"+N+"."+$+"."+(+B+1):Z=">="+N+"."+$+"."+B+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+B+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function ss(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return as(x,E)}).join(" ")}function as(y,E){y=y.trim();var x=E.loose?s[J]:s[X];return y.replace(x,function(D,N,$,B,ee,Z){r("xRange",y,D,N,$,B,ee,Z);var Me=we($),De=Me||we(B),ke=De||we(ee),_e=ke;return N==="="&&_e&&(N=""),Me?N===">"||N==="<"?D="<0.0.0":D="*":N&&_e?(De&&(B=0),ee=0,N===">"?(N=">=",De?($=+$+1,B=0,ee=0):(B=+B+1,ee=0)):N==="<="&&(N="<",De?$=+$+1:B=+B+1),D=N+$+"."+B+"."+ee):De?D=">="+$+".0.0 <"+(+$+1)+".0.0":ke&&(D=">="+$+"."+B+".0 <"+$+"."+(+B+1)+".0"),r("xRange return",D),D})}function fr(y,E){return r("replaceStars",y,E),y.trim().replace(s[pe],"")}function cs(y,E,x,D,N,$,B,ee,Z,Me,De,ke,_e){return we(x)?E="":we(D)?E=">="+x+".0.0":we(N)?E=">="+x+"."+D+".0":E=">="+E,we(Z)?ee="":we(Me)?ee="<"+(+Z+1)+".0.0":we(De)?ee="<"+Z+"."+(+Me+1)+".0":ke?ee="<="+Z+"."+Me+"."+De+"-"+ke:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(ls(this.set[E],y,this.options))return!0;return!1};function ls(y,E,x){for(var D=0;D<y.length;D++)if(!y[D].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(D=0;D<y.length;D++)if(r(y[D].semver),y[D].semver!==_t&&y[D].semver.prerelease.length>0){var N=y[D].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(y,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=us;function us(y,E,x){var D=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(B){$.test(B)&&(!D||N.compare(B)===-1)&&(D=B,N=new Q(D,x))}),D}t.minSatisfying=fs;function fs(y,E,x){var D=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(B){$.test(B)&&(!D||N.compare(B)===1)&&(D=B,N=new Q(D,x))}),D}t.minVersion=Wr;function Wr(y,E){y=new ce(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var D=0;D<y.set.length;++D){var N=y.set[D];N.forEach(function($){var B=new Q($.semver.version);switch($.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!x||Et(x,B))&&(x=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&y.test(x)?x:null}t.validRange=ds;function ds(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=ps;function ps(y,E,x){return Dr(y,E,"<",x)}t.gtr=hs;function hs(y,E,x){return Dr(y,E,">",x)}t.outside=Dr;function Dr(y,E,x,D){y=new Q(y,D),E=new ce(E,D);var N,$,B,ee,Z;switch(x){case">":N=Et,$=At,B=Bt,ee=">",Z=">=";break;case"<":N=Bt,$=Ar,B=Et,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(y,E,D))return!1;for(var Me=0;Me<E.set.length;++Me){var De=E.set[Me],ke=null,_e=null;if(De.forEach(function(Je){Je.semver===_t&&(Je=new Ie(">=0.0.0")),ke=ke||Je,_e=_e||Je,N(Je.semver,ke.semver,D)?ke=Je:B(Je.semver,_e.semver,D)&&(_e=Je)}),ke.operator===ee||ke.operator===Z||(!_e.operator||_e.operator===ee)&&$(y,_e.semver)||_e.operator===Z&&B(y,_e.semver))return!1}return!0}t.prerelease=ms;function ms(y,E){var x=je(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Gr;function Gr(y,E,x){return y=new ce(y,x),E=new ce(E,x),y.intersects(E)}t.coerce=gs;function gs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[Y]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),bb=O((t,e)=>{"use strict";function r(u){return typeof u=="function"}var n=console.error.bind(console);function i(u,f,d){var p=!!u[f]&&u.propertyIsEnumerable(f);Object.defineProperty(u,f,{configurable:!0,enumerable:p,writable:!0,value:d})}function o(u){u&&u.logger&&(r(u.logger)?n=u.logger:n("new logger isn't a function, not replacing"))}function s(u,f,d){if(!u||!u[f]){n("no original function "+f+" to wrap");return}if(!d){n("no wrapper function"),n(new Error().stack);return}if(!r(u[f])||!r(d)){n("original object and wrapper must be functions");return}var p=u[f],h=d(p,f);return i(h,"__original",p),i(h,"__unwrap",function(){u[f]===h&&i(u,f,p)}),i(h,"__wrapped",!0),i(u,f,h),h}function a(u,f,d){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(f&&Array.isArray(f))){n("must provide one or more functions to wrap on modules");return}u.forEach(function(p){f.forEach(function(h){s(p,h,d)})})}function c(u,f){if(!u||!u[f]){n("no function to unwrap."),n(new Error().stack);return}if(!u[f].__unwrap)n("no original to unwrap to -- has "+f+" already been unwrapped?");else return u[f].__unwrap()}function l(u,f){if(u)Array.isArray(u)||(u=[u]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(f&&Array.isArray(f))){n("must provide one or more functions to unwrap on modules");return}u.forEach(function(d){f.forEach(function(p){c(d,p)})})}o.wrap=s,o.massWrap=a,o.unwrap=c,o.massUnwrap=l,e.exports=o}),Eb=O((t,e)=>{"use strict";var r=bb(),n=r.wrap,i=r.unwrap,o="wrap@before";function s(f,d,p){var h=!!f[d]&&f.propertyIsEnumerable(d);Object.defineProperty(f,d,{configurable:!0,enumerable:h,writable:!0,value:p})}function a(f,d){for(var p=d.length,h=0;h<p;h++){var m=d[h],g=f[o];if(typeof g=="function")g(m);else if(Array.isArray(g))for(var v=g.length,w=0;w<v;w++)g[w](m)}}function c(f,d){var p;return p=f._events&&f._events[d],Array.isArray(p)||(p?p=[p]:p=[]),p}function l(f,d,p){var h=c(f,d),m=h.filter(function(g){return p.indexOf(g)===-1});m.length>0&&a(f,m)}function u(f,d){if(f){var p=f;if(typeof f=="function")p=d(f);else if(Array.isArray(f)){p=[];for(var h=0;h<f.length;h++)p[h]=d(f[h])}return p}}e.exports=function(f,d,p){if(!f||!f.on||!f.addListener||!f.removeListener||!f.emit)throw new Error("can only wrap real EEs");if(!d)throw new Error("must have function to run on listener addition");if(!p)throw new Error("must have function to wrap listeners when emitting");function h(g){return function(v,w){var b=c(this,v).slice();try{var C=g.call(this,v,w);return l(this,v,b),C}finally{this.on.__wrapped||n(this,"on",h),this.addListener.__wrapped||n(this,"addListener",h)}}}function m(g){return function(v){if(!this._events||!this._events[v])return g.apply(this,arguments);var w=this._events[v];function b(C){return function(){this._events[v]=w;try{return C.apply(this,arguments)}finally{w=this._events[v],this._events[v]=u(w,p)}}}n(this,"removeListener",b);try{return this._events[v]=u(w,p),g.apply(this,arguments)}finally{i(this,"removeListener"),this._events[v]=w}}}f[o]?typeof f[o]=="function"?s(f,o,[f[o],d]):Array.isArray(f[o])&&f[o].push(d):s(f,o,d),f.__wrapped||(n(f,"addListener",h),n(f,"on",h),n(f,"emit",m),s(f,"__unwrap",function(){i(f,"addListener"),i(f,"on"),i(f,"emit"),delete f[o],delete f.__wrapped}),s(f,"__wrapped",!0))}}),XZ=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=Eb(),o=require("async_hooks"),s="cls@contexts",a="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;e.exports={getNamespace:f,createNamespace:d,destroyNamespace:p,reset:h,ERROR_SYMBOL:a};function u(g){this.name=g,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}u.prototype.set=function(g,v){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[g]=v,c){let w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-SET KEY:"+g+"="+v+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return v},u.prototype.get=function(g){if(!this.active){if(c){let v=o.currentId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${g}=undefined currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length}`)}return}if(c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(b+"CONTEXT-GETTING KEY:"+g+"="+this.active[g]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${b}CONTEXT-GETTING KEY: (${this.name}) ${g}=${this.active[g]} currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[g]},u.prototype.createContext=function(){let g=Object.create(this.active?this.active:Object.prototype);if(g._ns_name=this.name,g.id=l,c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${v} triggerId:${w} len:${this._set.length} context:${r.inspect(g,{showHidden:!0,depth:2,colors:!0})}`)}return g},u.prototype.run=function(g){let v=this.createContext();this.enter(v);try{if(c){let w=o.triggerAsyncId(),b=o.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${b} len:${this._set.length} context:${r.inspect(v)}`)}return g(v),v}catch(w){throw w&&(w[a]=v),w}finally{if(c){let w=o.triggerAsyncId(),b=o.executionAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${b} len:${this._set.length} ${r.inspect(v)}`)}this.exit(v)}},u.prototype.runAndReturn=function(g){let v;return this.run(function(w){v=g(w)}),v},u.prototype.runPromise=function(g){let v=this.createContext();this.enter(v);let w=g(v);if(!w||!w.then||!w.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),w.then(b=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),b)).catch(b=>{throw b[a]=v,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(v)),this.exit(v),b})},u.prototype.bind=function(g,v){v||(this.active?v=this.active:v=this.createContext());let w=this;return function(){w.enter(v);try{return g.apply(this,arguments)}catch(b){throw b&&(b[a]=v),b}finally{w.exit(v)}}},u.prototype.enter=function(g){if(n.ok(g,"context must be provided for entering"),c){let v=o.executionAsyncId(),w=o.triggerAsyncId(),b=" ".repeat(this._indent<0?0:this._indent);m(`${b}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${v} len:${this._set.length} ${r.inspect(g)}`)}this._set.push(this.active),this.active=g},u.prototype.exit=function(g){if(n.ok(g,"context must be provided for exiting"),c){let w=o.executionAsyncId(),b=o.triggerAsyncId(),C=" ".repeat(this._indent<0?0:this._indent);m(`${C}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${b} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(g)}`)}if(this.active===g){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let v=this._set.lastIndexOf(g);v<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(g)),n.ok(v>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(g))):(n.ok(v,"can't remove top context"),this._set.splice(v,1))},u.prototype.bindEmitter=function(g){n.ok(g.on&&g.addListener&&g.emit,"can only bind real EEs");let v=this,w="context@"+this.name;function b(S){!S||(S[s]||(S[s]=Object.create(null)),S[s][w]={namespace:v,context:v.active})}function C(S){if(!(S&&S[s]))return S;let _=S,P=S[s];return Object.keys(P).forEach(function(I){let A=P[I];_=A.namespace.bind(_,A.context)}),_}i(g,b,C)},u.prototype.fromException=function(g){return g[a]};function f(g){return process.namespaces[g]}function d(g){n.ok(g,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${g})`);let v=new u(g);return v.id=l,o.createHook({init(w,b,C,S){if(l=o.executionAsyncId(),v.active){if(v._contexts.set(w,v.active),c){let _=" ".repeat(v._indent<0?0:v._indent);m(`${_}INIT [${b}] (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(l===0){let _=o.triggerAsyncId(),P=v._contexts.get(_);if(P){if(v._contexts.set(w,P),c){let I=" ".repeat(v._indent<0?0:v._indent);m(`${I}INIT USING CONTEXT FROM TRIGGERID [${b}] (${g}) asyncId:${w} currentUid:${l} triggerId:${_} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}else if(c){let I=" ".repeat(v._indent<0?0:v._indent);m(`${I}INIT MISSING CONTEXT [${b}] (${g}) asyncId:${w} currentUid:${l} triggerId:${_} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}}if(c&&b==="PROMISE"){m(r.inspect(S,{showHidden:!0}));let _=S.parentId,P=" ".repeat(v._indent<0?0:v._indent);m(`${P}INIT RESOURCE-PROMISE [${b}] (${g}) parentId:${_} asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} resource:${S}`)}},before(w){l=o.executionAsyncId();let b;if(b=v._contexts.get(w)||v._contexts.get(l),b){if(c){let C=o.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);m(`${S}BEFORE (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`),v._indent+=2}v.enter(b)}else if(c){let C=o.triggerAsyncId(),S=" ".repeat(v._indent<0?0:v._indent);m(`${S}BEFORE MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(v._contexts,{showHidden:!0,depth:2,colors:!0})}`),v._indent+=2}},after(w){l=o.executionAsyncId();let b;if(b=v._contexts.get(w)||v._contexts.get(l),b){if(c){let C=o.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);m(`${S}AFTER (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`)}v.exit(b)}else if(c){let C=o.triggerAsyncId();v._indent-=2;let S=" ".repeat(v._indent<0?0:v._indent);m(`${S}AFTER MISSING CONTEXT (${g}) asyncId:${w} currentUid:${l} triggerId:${C} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(b)}`)}},destroy(w){if(l=o.executionAsyncId(),c){let b=o.triggerAsyncId(),C=" ".repeat(v._indent<0?0:v._indent);m(`${C}DESTROY (${g}) currentUid:${l} asyncId:${w} triggerId:${b} active:${r.inspect(v.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(v._contexts.get(l))}`)}v._contexts.delete(w)}}).enable(),process.namespaces[g]=v,v}function p(g){let v=f(g);n.ok(v,`can't delete nonexistent namespace! "`+g+'"'),n.ok(v.id,"don't assign to process.namespaces directly! "+r.inspect(v)),process.namespaces[g]=null}function h(){process.namespaces&&Object.keys(process.namespaces).forEach(function(g){p(g)}),process.namespaces=Object.create(null)}process.namespaces={};function m(...g){c&&process._rawDebug(`${r.format(...g)}`)}}),ZZ=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=process.nextTick;process.nextTick=function(){if(!i.enabled)return o.apply(process,arguments);let s=new Array(arguments.length);for(let u=0;u<arguments.length;u++)s[u]=arguments[u];let a=s[0];if(typeof a!="function")throw new TypeError("callback is not a function");let c=new r,l=--i.counter;return n.init.call(c,l,0,null,null),s[0]=function(){n.pre.call(c,l);let u=!0;try{a.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},o.apply(process,s)}}}),eee=O((t,e)=>{"use strict";function r(){}e.exports=function(){let n=this._hooks,i=this._state,o=global.Promise,s=o.prototype.then;o.prototype.then=u;function a(f,d,p,h){return typeof f!="function"?h?c(p):l(p):function(){n.pre.call(d,p);try{return f.apply(this,arguments)}finally{n.post.call(d,p,!1),n.destroy.call(null,p)}}}function c(f){return function(d){return n.destroy.call(null,f),d}}function l(f){return function(d){throw n.destroy.call(null,f),d}}function u(f,d){if(!i.enabled)return s.call(this,f,d);let p=new r,h=--i.counter;return n.init.call(p,h,0,null,null),s.call(this,a(f,p,h,!0),a(d,p,h,!1))}}}),tee=O((t,e)=>{"use strict";var r=require("timers");function n(){}function i(){}function o(){}var s=new Map,a=new Map,c=new Map,l=null,u=!1;e.exports=function(){f(this._hooks,this._state,"setTimeout","clearTimeout",n,s,!0),f(this._hooks,this._state,"setInterval","clearInterval",i,a,!1),f(this._hooks,this._state,"setImmediate","clearImmediate",o,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function f(d,p,h,m,g,v,w){let b=r[h],C=r[m];r[h]=function(){if(!p.enabled)return b.apply(r,arguments);let S=new Array(arguments.length);for(let R=0;R<arguments.length;R++)S[R]=arguments[R];let _=S[0];if(typeof _!="function")throw new TypeError('"callback" argument must be a function');let P=new g,I=--p.counter,A;return d.init.call(P,I,0,null,null),S[0]=function(){l=A,d.pre.call(P,I);let R=!0;try{_.apply(this,arguments),R=!1}finally{R&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){d.post.call(P,I,!0),v.delete(A),d.destroy.call(null,I)})}d.post.call(P,I,!1),l=null,(w||u)&&(u=!1,v.delete(A),d.destroy.call(null,I))},A=b.apply(r,S),v.set(A,I),A},r[m]=function(S){if(l===S&&S!==null)u=!0;else if(v.has(S)){let _=v.get(S);v.delete(S),d.destroy.call(null,_)}C.apply(r,arguments)}}}),cF=O((t,e)=>{e.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),ree=O((t,e)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,i={nextTick:ZZ(),promise:eee(),timers:tee()},o=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let u=this.initFns=[],f=this.preFns=[],d=this.postFns=[],p=this.destroyFns=[];this.init=function(h,m,g,v){if(m===n){o.add(h);return}for(let w of u)w(h,this,m,g,v)},this.pre=function(h){if(!o.has(h))for(let m of f)m(h,this)},this.post=function(h,m){if(!o.has(h))for(let g of d)g(h,this,m)},this.destroy=function(h){if(o.has(h)){o.delete(h);return}for(let m of p)m(h)}}a.prototype.add=function(u){u.init&&this.initFns.push(u.init),u.pre&&this.preFns.push(u.pre),u.post&&this.postFns.push(u.post),u.destroy&&this.destroyFns.push(u.destroy)};function c(u,f){let d=u.indexOf(f);d!==-1&&u.splice(d,1)}a.prototype.remove=function(u){u.init&&c(this.initFns,u.init),u.pre&&c(this.preFns,u.pre),u.post&&c(this.postFns,u.post),u.destroy&&c(this.destroyFns,u.destroy)};function l(){this._state=new s,this._hooks=new a,this.version=cF().version,this.providers=r.Providers;for(let u of Object.keys(i))i[u].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}e.exports=l,l.prototype.addHooks=function(u){this._hooks.add(u)},l.prototype.removeHooks=function(u){this._hooks.remove(u)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),lF=O((t,e)=>{e.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),nee=O((t,e)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(i){try{return"<error: "+i+">"}catch{return"<error>"}}}e.exports=function(n,i){var o=[];o.push(r(n));for(var s=0;s<i.length;s++){var a=i[s],c;try{c=a.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}o.push("    at "+c)}return o.join(`
`)}}),iee=O((t,e)=>{var r=nee();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=lF().version}var i=!1;n.prototype.callSite=function f(d){d||(d={}),i=!0;var p={};Error.captureStackTrace(p,f);var h=p.stack;return i=!1,h=h.slice(d.slice||0),d.extend&&(h=this.extend._modify(p,h)),d.filter&&(h=this.filter._modify(p,h)),h};var o=new n;function s(){this._modifiers=[]}s.prototype._modify=function(f,d){for(var p=0,h=this._modifiers.length;p<h;p++)d=this._modifiers[p](f,d);return d},s.prototype.attach=function(f){this._modifiers.push(f)},s.prototype.deattach=function(f){var d=this._modifiers.indexOf(f);return d===-1?!1:(this._modifiers.splice(d,1),!0)};function a(){this._formater=r,this._previous=void 0}a.prototype.replace=function(f){f?this._formater=f:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var c=!1;function l(f,d){if(i)return d;if(c)return r(f,d);var p=d.concat();p=o.extend._modify(f,p),p=o.filter._modify(f,p),p=p.slice(0,Error.stackTraceLimit),Object.isExtensible(f)&&Object.getOwnPropertyDescriptor(f,"callSite")===void 0&&(f.callSite={original:d,mutated:p}),c=!0;var h=o.format._formater(f,p);return c=!1,h}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(f){f===l?o.format._roolback():(o.format._backup(),o.format.replace(f))}});function u(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:u,set:function(f){Object.defineProperty(this,"callSite",{value:f,writable:!0,configurable:!0})},configurable:!0}),e.exports=o}),uF=O((t,e)=>{if(global._stackChain)if(global._stackChain.version===lF().version)e.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else e.exports=global._stackChain=iee()}),oee=O((t,e)=>{"use strict";var r=ree();if(global._asyncHook)if(global._asyncHook.version===cF().version)e.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else uF().filter.attach(function(n,i){return i.filter(function(o){let s=o.getFileName();return!(s&&s.slice(0,__dirname.length)===__dirname)})}),e.exports=global._asyncHook=new r}),see=O((t,e)=>{"use strict";var r=require("util"),n=require("assert"),i=Eb(),o=oee(),s="cls@contexts",a="error@context",c=[];for(let C in o.providers)c[o.providers[C]]=C;var l=process.env.DEBUG_CLS_HOOKED,u=-1;e.exports={getNamespace:d,createNamespace:p,destroyNamespace:h,reset:m,ERROR_SYMBOL:a};function f(C){this.name=C,this.active=null,this._set=[],this.id=null,this._contexts=new Map}f.prototype.set=function(C,S){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&g("    SETTING KEY:"+C+"="+S+" in ns:"+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[C]=S,S},f.prototype.get=function(C){if(!this.active){l&&g("    GETTING KEY:"+C+"=undefined "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0));return}return l&&g("    GETTING KEY:"+C+"="+this.active[C]+" "+this.name+" uid:"+u+" active:"+r.inspect(this.active,!0)),this.active[C]},f.prototype.createContext=function(){l&&g("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let C=Object.create(this.active?this.active:Object.prototype);return C._ns_name=this.name,C.id=u,l&&g("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+r.inspect(C,!0,2,!0)),C},f.prototype.run=function(C){let S=this.createContext();this.enter(S);try{return l&&g(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),C(S),S}catch(_){throw _&&(_[a]=S),_}finally{l&&g(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S)}},f.prototype.runAndReturn=function(C){var S;return this.run(function(_){S=C(_)}),S},f.prototype.runPromise=function(C){let S=this.createContext();this.enter(S);let _=C(S);if(!_||!_.then||!_.catch)throw new Error("fn must return a promise.");return l&&g(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),_.then(P=>(l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),P)).catch(P=>{throw P[a]=S,l&&g(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+r.inspect(S)),this.exit(S),P})},f.prototype.bind=function(C,S){S||(this.active?S=this.active:S=this.createContext());let _=this;return function(){_.enter(S);try{return C.apply(this,arguments)}catch(P){throw P&&(P[a]=S),P}finally{_.exit(S)}}},f.prototype.enter=function(C){n.ok(C,"context must be provided for entering"),l&&g("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(C)),this._set.push(this.active),this.active=C},f.prototype.exit=function(C){if(n.ok(C,"context must be provided for exiting"),l&&g("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+r.inspect(C)),this.active===C){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let S=this._set.lastIndexOf(C);S<0?(l&&g("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(C)),n.ok(S>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(C))):(n.ok(S,"can't remove top context"),this._set.splice(S,1))},f.prototype.bindEmitter=function(C){n.ok(C.on&&C.addListener&&C.emit,"can only bind real EEs");let S=this,_="context@"+this.name;function P(A){!A||(A[s]||(A[s]=Object.create(null)),A[s][_]={namespace:S,context:S.active})}function I(A){if(!(A&&A[s]))return A;let R=A,F=A[s];return Object.keys(F).forEach(function(H){let X=F[H];R=X.namespace.bind(R,X.context)}),R}i(C,P,I)},f.prototype.fromException=function(C){return C[a]};function d(C){return process.namespaces[C]}function p(C){n.ok(C,"namespace must be given a name."),l&&g("CREATING NAMESPACE "+C);let S=new f(C);return S.id=u,o.addHooks({init(_,P,I,A,R){u=_,A?(S._contexts.set(_,S._contexts.get(A)),l&&g("PARENTID: "+C+" uid:"+_+" parent:"+A+" provider:"+I)):S._contexts.set(u,S.active),l&&g("INIT "+C+" uid:"+_+" parent:"+A+" provider:"+c[I]+" active:"+r.inspect(S.active,!0))},pre(_,P){u=_;let I=S._contexts.get(_);I?(l&&g(" PRE "+C+" uid:"+_+" handle:"+v(P)+" context:"+r.inspect(I)),S.enter(I)):l&&g(" PRE MISSING CONTEXT "+C+" uid:"+_+" handle:"+v(P))},post(_,P){u=_;let I=S._contexts.get(_);I?(l&&g(" POST "+C+" uid:"+_+" handle:"+v(P)+" context:"+r.inspect(I)),S.exit(I)):l&&g(" POST MISSING CONTEXT "+C+" uid:"+_+" handle:"+v(P))},destroy(_){u=_,l&&g("DESTROY "+C+" uid:"+_+" context:"+r.inspect(S._contexts.get(u))+" active:"+r.inspect(S.active,!0)),S._contexts.delete(_)}}),process.namespaces[C]=S,S}function h(C){let S=d(C);n.ok(S,`can't delete nonexistent namespace! "`+C+'"'),n.ok(S.id,"don't assign to process.namespaces directly! "+r.inspect(S)),process.namespaces[C]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(C){h(C)}),process.namespaces=Object.create(null)}process.namespaces={},o._state&&!o._state.enabled&&o.enable();function g(C){process.env.DEBUG&&process._rawDebug(C)}function v(C){if(!C)return C;if(typeof C=="function")return C.name?C.name:(C.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(C.constructor&&C.constructor.name)return C.constructor.name}if(l){w=uF();for(b in w.filter._modifiers)w.filter.deattach(b)}var w,b}),aee=O((t,e)=>{"use strict";var r=QZ();process&&r.gte(process.versions.node,"8.0.0")?e.exports=XZ():e.exports=see()}),cee=O((t,e)=>{t=e.exports=Q;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var y=Array.prototype.slice.call(arguments,0);y.unshift("SEMVER"),console.log.apply(console,y)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,s=t.re=[],a=t.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var f=c++;a[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=c++;a[d]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=c++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=c++;a[h]="(?:"+a[l]+"|"+a[f]+")";var m=c++;a[m]="(?:"+a[u]+"|"+a[f]+")";var g=c++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var v=c++;a[v]="(?:-?("+a[m]+"(?:\\."+a[m]+")*))";var w=c++;a[w]="[0-9A-Za-z-]+";var b=c++;a[b]="(?:\\+("+a[w]+"(?:\\."+a[w]+")*))";var C=c++,S="v?"+a[d]+a[g]+"?"+a[b]+"?";a[C]="^"+S+"$";var _="[v=\\s]*"+a[p]+a[v]+"?"+a[b]+"?",P=c++;a[P]="^"+_+"$";var I=c++;a[I]="((?:<|>)?=?)";var A=c++;a[A]=a[u]+"|x|X|\\*";var R=c++;a[R]=a[l]+"|x|X|\\*";var F=c++;a[F]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var H=c++;a[H]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[v]+")?"+a[b]+"?)?)?";var X=c++;a[X]="^"+a[I]+"\\s*"+a[F]+"$";var J=c++;a[J]="^"+a[I]+"\\s*"+a[H]+"$";var Y=c++;a[Y]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var te=c++;a[te]="(?:~>?)";var M=c++;a[M]="(\\s*)"+a[te]+"\\s+",s[M]=new RegExp(a[M],"g");var L="$1~",q=c++;a[q]="^"+a[te]+a[F]+"$";var V=c++;a[V]="^"+a[te]+a[H]+"$";var z=c++;a[z]="(?:\\^)";var oe=c++;a[oe]="(\\s*)"+a[z]+"\\s+",s[oe]=new RegExp(a[oe],"g");var re="$1^",be=c++;a[be]="^"+a[z]+a[F]+"$";var Pe=c++;a[Pe]="^"+a[z]+a[H]+"$";var xe=c++;a[xe]="^"+a[I]+"\\s*("+_+")$|^$";var Te=c++;a[Te]="^"+a[I]+"\\s*("+S+")$|^$";var he=c++;a[he]="(\\s*)"+a[I]+"\\s*("+_+"|"+a[F]+")",s[he]=new RegExp(a[he],"g");var yt="$1$2$3",It=c++;a[It]="^\\s*("+a[F]+")\\s+-\\s+("+a[F]+")\\s*$";var ye=c++;a[ye]="^\\s*("+a[H]+")\\s+-\\s+("+a[H]+")\\s*$";var pe=c++;for(a[pe]="(<|>)?=?\\s*\\*",Ce=0;Ce<c;Ce++)r(Ce,a[Ce]),s[Ce]||(s[Ce]=new RegExp(a[Ce]));var Ce;t.parse=je;function je(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q)return y;if(typeof y!="string"||y.length>n)return null;var x=E.loose?s[P]:s[C];if(!x.test(y))return null;try{return new Q(y,E)}catch{return null}}t.valid=Xo;function Xo(y,E){var x=je(y,E);return x?x.version:null}t.clean=Zo;function Zo(y,E){var x=je(y.trim().replace(/^[=v]+/,""),E);return x?x.version:null}t.SemVer=Q;function Q(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Q){if(y.loose===E.loose)return y;y=y.version}else if(typeof y!="string")throw new TypeError("Invalid Version: "+y);if(y.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Q))return new Q(y,E);r("SemVer",y,E),this.options=E,this.loose=!!E.loose;var x=y.trim().match(E.loose?s[P]:s[C]);if(!x)throw new TypeError("Invalid Version: "+y);if(this.raw=y,this.major=+x[1],this.minor=+x[2],this.patch=+x[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");x[4]?this.prerelease=x[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var N=+D;if(N>=0&&N<i)return N}return D}):this.prerelease=[],this.build=x[5]?x[5].split("."):[],this.format()}Q.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Q.prototype.toString=function(){return this.version},Q.prototype.compare=function(y){return r("SemVer.compare",this.version,this.options,y),y instanceof Q||(y=new Q(y,this.options)),this.compareMain(y)||this.comparePre(y)},Q.prototype.compareMain=function(y){return y instanceof Q||(y=new Q(y,this.options)),st(this.major,y.major)||st(this.minor,y.minor)||st(this.patch,y.patch)},Q.prototype.comparePre=function(y){if(y instanceof Q||(y=new Q(y,this.options)),this.prerelease.length&&!y.prerelease.length)return-1;if(!this.prerelease.length&&y.prerelease.length)return 1;if(!this.prerelease.length&&!y.prerelease.length)return 0;var E=0;do{var x=this.prerelease[E],D=y.prerelease[E];if(r("prerelease compare",E,x,D),x===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(x===void 0)return-1;if(x!==D)return st(x,D)}while(++E)},Q.prototype.inc=function(y,E){switch(y){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",E),this.inc("pre",E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",E),this.inc("pre",E);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var x=this.prerelease.length;--x>=0;)typeof this.prerelease[x]=="number"&&(this.prerelease[x]++,x=-2);x===-1&&this.prerelease.push(0)}E&&(this.prerelease[0]===E?isNaN(this.prerelease[1])&&(this.prerelease=[E,0]):this.prerelease=[E,0]);break;default:throw new Error("invalid increment argument: "+y)}return this.format(),this.raw=this.version,this},t.inc=es;function es(y,E,x,D){typeof x=="string"&&(D=x,x=void 0);try{return new Q(y,x).inc(E,D).version}catch{return null}}t.diff=ts;function ts(y,E){if(vr(y,E))return null;var x=je(y),D=je(E),N="";if(x.prerelease.length||D.prerelease.length){N="pre";var $="prerelease"}for(var B in x)if((B==="major"||B==="minor"||B==="patch")&&x[B]!==D[B])return N+B;return $}t.compareIdentifiers=st;var Ir=/^[0-9]+$/;function st(y,E){var x=Ir.test(y),D=Ir.test(E);return x&&D&&(y=+y,E=+E),y===E?0:x&&!D?-1:D&&!x?1:y<E?-1:1}t.rcompareIdentifiers=Bn;function Bn(y,E){return st(E,y)}t.major=ur;function ur(y,E){return new Q(y,E).major}t.minor=Gi;function Gi(y,E){return new Q(y,E).minor}t.patch=zi;function zi(y,E){return new Q(y,E).patch}t.compare=Ge;function Ge(y,E,x){return new Q(y,x).compare(new Q(E,x))}t.compareLoose=rs;function rs(y,E){return Ge(y,E,!0)}t.rcompare=Hn;function Hn(y,E,x){return Ge(E,y,x)}t.sort=Ki;function Ki(y,E){return y.sort(function(x,D){return t.compare(x,D,E)})}t.rsort=Yi;function Yi(y,E){return y.sort(function(x,D){return t.rcompare(x,D,E)})}t.gt=Et;function Et(y,E,x){return Ge(y,E,x)>0}t.lt=Bt;function Bt(y,E,x){return Ge(y,E,x)<0}t.eq=vr;function vr(y,E,x){return Ge(y,E,x)===0}t.neq=Vn;function Vn(y,E,x){return Ge(y,E,x)!==0}t.gte=Ar;function Ar(y,E,x){return Ge(y,E,x)>=0}t.lte=At;function At(y,E,x){return Ge(y,E,x)<=0}t.cmp=Tt;function Tt(y,E,x,D){switch(E){case"===":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y===x;case"!==":return typeof y=="object"&&(y=y.version),typeof x=="object"&&(x=x.version),y!==x;case"":case"=":case"==":return vr(y,x,D);case"!=":return Vn(y,x,D);case">":return Et(y,x,D);case">=":return Ar(y,x,D);case"<":return Bt(y,x,D);case"<=":return At(y,x,D);default:throw new TypeError("Invalid operator: "+E)}}t.Comparator=Ie;function Ie(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof Ie){if(y.loose===!!E.loose)return y;y=y.value}if(!(this instanceof Ie))return new Ie(y,E);r("comparator",y,E),this.options=E,this.loose=!!E.loose,this.parse(y),this.semver===_t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var _t={};Ie.prototype.parse=function(y){var E=this.options.loose?s[xe]:s[Te],x=y.match(E);if(!x)throw new TypeError("Invalid comparator: "+y);this.operator=x[1],this.operator==="="&&(this.operator=""),x[2]?this.semver=new Q(x[2],this.options.loose):this.semver=_t},Ie.prototype.toString=function(){return this.value},Ie.prototype.test=function(y){return r("Comparator.test",y,this.options.loose),this.semver===_t?!0:(typeof y=="string"&&(y=new Q(y,this.options)),Tt(y,this.operator,this.semver,this.options))},Ie.prototype.intersects=function(y,E){if(!(y instanceof Ie))throw new TypeError("a Comparator is required");(!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1});var x;if(this.operator==="")return x=new ce(y.value,E),er(this.value,x,E);if(y.operator==="")return x=new ce(this.value,E),er(y.semver,x,E);var D=(this.operator===">="||this.operator===">")&&(y.operator===">="||y.operator===">"),N=(this.operator==="<="||this.operator==="<")&&(y.operator==="<="||y.operator==="<"),$=this.semver.version===y.semver.version,B=(this.operator===">="||this.operator==="<=")&&(y.operator===">="||y.operator==="<="),ee=Tt(this.semver,"<",y.semver,E)&&(this.operator===">="||this.operator===">")&&(y.operator==="<="||y.operator==="<"),Z=Tt(this.semver,">",y.semver,E)&&(this.operator==="<="||this.operator==="<")&&(y.operator===">="||y.operator===">");return D||N||$&&B||ee||Z},t.Range=ce;function ce(y,E){if((!E||typeof E!="object")&&(E={loose:!!E,includePrerelease:!1}),y instanceof ce)return y.loose===!!E.loose&&y.includePrerelease===!!E.includePrerelease?y:new ce(y.raw,E);if(y instanceof Ie)return new ce(y.value,E);if(!(this instanceof ce))return new ce(y,E);if(this.options=E,this.loose=!!E.loose,this.includePrerelease=!!E.includePrerelease,this.raw=y,this.set=y.split(/\s*\|\|\s*/).map(function(x){return this.parseRange(x.trim())},this).filter(function(x){return x.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+y);this.format()}ce.prototype.format=function(){return this.range=this.set.map(function(y){return y.join(" ").trim()}).join("||").trim(),this.range},ce.prototype.toString=function(){return this.range},ce.prototype.parseRange=function(y){var E=this.options.loose;y=y.trim();var x=E?s[ye]:s[It];y=y.replace(x,cs),r("hyphen replace",y),y=y.replace(s[he],yt),r("comparator trim",y,s[he]),y=y.replace(s[M],L),y=y.replace(s[oe],re),y=y.split(/\s+/).join(" ");var D=E?s[xe]:s[Te],N=y.split(" ").map(function($){return Cn($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(N=N.filter(function($){return!!$.match(D)})),N=N.map(function($){return new Ie($,this.options)},this),N},ce.prototype.intersects=function(y,E){if(!(y instanceof ce))throw new TypeError("a Range is required");return this.set.some(function(x){return x.every(function(D){return y.set.some(function(N){return N.every(function($){return D.intersects($,E)})})})})},t.toComparators=Ji;function Ji(y,E){return new ce(y,E).set.map(function(x){return x.map(function(D){return D.value}).join(" ").trim().split(" ")})}function Cn(y,E){return r("comp",y,E),y=is(y,E),r("caret",y),y=Tr(y,E),r("tildes",y),y=ss(y,E),r("xrange",y),y=fr(y,E),r("stars",y),y}function we(y){return!y||y.toLowerCase()==="x"||y==="*"}function Tr(y,E){return y.trim().split(/\s+/).map(function(x){return ns(x,E)}).join(" ")}function ns(y,E){var x=E.loose?s[V]:s[q];return y.replace(x,function(D,N,$,B,ee){r("tilde",y,D,N,$,B,ee);var Z;return we(N)?Z="":we($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":ee?(r("replaceTilde pr",ee),Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+(+$+1)+".0"):Z=">="+N+"."+$+"."+B+" <"+N+"."+(+$+1)+".0",r("tilde return",Z),Z})}function is(y,E){return y.trim().split(/\s+/).map(function(x){return os(x,E)}).join(" ")}function os(y,E){r("caret",y,E);var x=E.loose?s[Pe]:s[be];return y.replace(x,function(D,N,$,B,ee){r("caret",y,D,N,$,B,ee);var Z;return we(N)?Z="":we($)?Z=">="+N+".0.0 <"+(+N+1)+".0.0":we(B)?N==="0"?Z=">="+N+"."+$+".0 <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+".0 <"+(+N+1)+".0.0":ee?(r("replaceCaret pr",ee),N==="0"?$==="0"?Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+$+"."+(+B+1):Z=">="+N+"."+$+"."+B+"-"+ee+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+B+"-"+ee+" <"+(+N+1)+".0.0"):(r("no pr"),N==="0"?$==="0"?Z=">="+N+"."+$+"."+B+" <"+N+"."+$+"."+(+B+1):Z=">="+N+"."+$+"."+B+" <"+N+"."+(+$+1)+".0":Z=">="+N+"."+$+"."+B+" <"+(+N+1)+".0.0"),r("caret return",Z),Z})}function ss(y,E){return r("replaceXRanges",y,E),y.split(/\s+/).map(function(x){return as(x,E)}).join(" ")}function as(y,E){y=y.trim();var x=E.loose?s[J]:s[X];return y.replace(x,function(D,N,$,B,ee,Z){r("xRange",y,D,N,$,B,ee,Z);var Me=we($),De=Me||we(B),ke=De||we(ee),_e=ke;return N==="="&&_e&&(N=""),Me?N===">"||N==="<"?D="<0.0.0":D="*":N&&_e?(De&&(B=0),ee=0,N===">"?(N=">=",De?($=+$+1,B=0,ee=0):(B=+B+1,ee=0)):N==="<="&&(N="<",De?$=+$+1:B=+B+1),D=N+$+"."+B+"."+ee):De?D=">="+$+".0.0 <"+(+$+1)+".0.0":ke&&(D=">="+$+"."+B+".0 <"+$+"."+(+B+1)+".0"),r("xRange return",D),D})}function fr(y,E){return r("replaceStars",y,E),y.trim().replace(s[pe],"")}function cs(y,E,x,D,N,$,B,ee,Z,Me,De,ke,_e){return we(x)?E="":we(D)?E=">="+x+".0.0":we(N)?E=">="+x+"."+D+".0":E=">="+E,we(Z)?ee="":we(Me)?ee="<"+(+Z+1)+".0.0":we(De)?ee="<"+Z+"."+(+Me+1)+".0":ke?ee="<="+Z+"."+Me+"."+De+"-"+ke:ee="<="+ee,(E+" "+ee).trim()}ce.prototype.test=function(y){if(!y)return!1;typeof y=="string"&&(y=new Q(y,this.options));for(var E=0;E<this.set.length;E++)if(ls(this.set[E],y,this.options))return!0;return!1};function ls(y,E,x){for(var D=0;D<y.length;D++)if(!y[D].test(E))return!1;if(E.prerelease.length&&!x.includePrerelease){for(D=0;D<y.length;D++)if(r(y[D].semver),y[D].semver!==_t&&y[D].semver.prerelease.length>0){var N=y[D].semver;if(N.major===E.major&&N.minor===E.minor&&N.patch===E.patch)return!0}return!1}return!0}t.satisfies=er;function er(y,E,x){try{E=new ce(E,x)}catch{return!1}return E.test(y)}t.maxSatisfying=us;function us(y,E,x){var D=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(B){$.test(B)&&(!D||N.compare(B)===-1)&&(D=B,N=new Q(D,x))}),D}t.minSatisfying=fs;function fs(y,E,x){var D=null,N=null;try{var $=new ce(E,x)}catch{return null}return y.forEach(function(B){$.test(B)&&(!D||N.compare(B)===1)&&(D=B,N=new Q(D,x))}),D}t.minVersion=Wr;function Wr(y,E){y=new ce(y,E);var x=new Q("0.0.0");if(y.test(x)||(x=new Q("0.0.0-0"),y.test(x)))return x;x=null;for(var D=0;D<y.set.length;++D){var N=y.set[D];N.forEach(function($){var B=new Q($.semver.version);switch($.operator){case">":B.prerelease.length===0?B.patch++:B.prerelease.push(0),B.raw=B.format();case"":case">=":(!x||Et(x,B))&&(x=B);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return x&&y.test(x)?x:null}t.validRange=ds;function ds(y,E){try{return new ce(y,E).range||"*"}catch{return null}}t.ltr=ps;function ps(y,E,x){return Dr(y,E,"<",x)}t.gtr=hs;function hs(y,E,x){return Dr(y,E,">",x)}t.outside=Dr;function Dr(y,E,x,D){y=new Q(y,D),E=new ce(E,D);var N,$,B,ee,Z;switch(x){case">":N=Et,$=At,B=Bt,ee=">",Z=">=";break;case"<":N=Bt,$=Ar,B=Et,ee="<",Z="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(er(y,E,D))return!1;for(var Me=0;Me<E.set.length;++Me){var De=E.set[Me],ke=null,_e=null;if(De.forEach(function(Je){Je.semver===_t&&(Je=new Ie(">=0.0.0")),ke=ke||Je,_e=_e||Je,N(Je.semver,ke.semver,D)?ke=Je:B(Je.semver,_e.semver,D)&&(_e=Je)}),ke.operator===ee||ke.operator===Z||(!_e.operator||_e.operator===ee)&&$(y,_e.semver)||_e.operator===Z&&B(y,_e.semver))return!1}return!0}t.prerelease=ms;function ms(y,E){var x=je(y,E);return x&&x.prerelease.length?x.prerelease:null}t.intersects=Gr;function Gr(y,E,x){return y=new ce(y,x),E=new ce(E,x),y.intersects(E)}t.coerce=gs;function gs(y){if(y instanceof Q)return y;if(typeof y!="string")return null;var E=y.match(s[Y]);return E==null?null:je(E[1]+"."+(E[2]||"0")+"."+(E[3]||"0"))}}),lee=O((t,e)=>{var r=bb().wrap,n=1<<0,i=1<<1,o=1<<2,s=1<<3,a=[],c=0,l=!1,u=[],f,d;function p(P,I){var A=P.length,R=I.length,F=[];if(A===0&&R===0)return F;for(var H=0;H<A;H++)F[H]=P[H];if(R===0)return F;for(var X=0;X<R;X++){var J=!0;for(H=0;H<A;H++)if(P[H].uid===I[X].uid){J=!1;break}J&&F.push(I[X])}return F}process._fatalException?(h=!1,f=function(P){var I=a.length;if(h||I===0)return!1;var A=!1;h=!0;for(var R=0;R<I;++R){var F=a[R];if((F.flags&s)!=0){var H=m&&m[F.uid];A=F.error(H,P)||A}}return h=!1,u.length>0&&(a=u.pop()),m=void 0,A&&!l},d=function(P,I,A){var R=[];l=!0;for(var F=0;F<A;++F){var H=I[F];if(R[H.uid]=H.data,(H.flags&n)!=0){var X=H.create(H.data);X!==void 0&&(R[H.uid]=X)}}return l=!1,function(){m=R,u.push(a),a=p(I,a),l=!0;for(var J=0;J<A;++J)(I[J].flags&i)>0&&I[J].before(this,R[I[J].uid]);l=!1;var Y=P.apply(this,arguments);for(l=!0,J=0;J<A;++J)(I[J].flags&o)>0&&I[J].after(this,R[I[J].uid]);return l=!1,a=u.pop(),m=void 0,Y}},r(process,"_fatalException",function(P){return function(I){return f(I)||P(I)}})):(g=!1,f=function(P){if(g)throw P;for(var I=!1,A=a.length,R=0;R<A;++R){var F=a[R];(F.flags&s)!=0&&(I=F.error(null,P)||I)}if(!I&&l)throw P},d=function(P,I,A){var R=[];l=!0;for(var F=0;F<A;++F){var H=I[F];if(R[H.uid]=H.data,(H.flags&n)!=0){var X=H.create(H.data);X!==void 0&&(R[H.uid]=X)}}return l=!1,function(){var J=!1,Y=!1;u.push(a),a=p(I,a),l=!0;for(var te=0;te<A;++te)(I[te].flags&i)>0&&I[te].before(this,R[I[te].uid]);l=!1;var M;try{M=P.apply(this,arguments)}catch(L){J=!0;for(var te=0;te<A;++te)if((a[te].flags&s)!=0)try{Y=a[te].error(R[I[te].uid],L)||Y}catch(V){throw g=!0,V}if(!Y)throw process.removeListener("uncaughtException",f),process._originalNextTick(function(){process.addListener("uncaughtException",f)}),L}finally{if(!J||Y){for(l=!0,te=0;te<A;++te)(I[te].flags&o)>0&&I[te].after(this,R[I[te].uid]);l=!1}a=u.pop()}return M}},process.addListener("uncaughtException",f));var h,m,g;function v(P,I,A){l=!0;for(var R=0;R<A;++R){var F=I[R];F.create&&F.create(F.data)}return l=!1,function(){u.push(a),a=p(I,a);var H=P.apply(this,arguments);return a=u.pop(),H}}function w(P){var I=a.length;if(I===0)return P;for(var A=a.slice(),R=0;R<I;++R)if(A[R].flags>0)return d(P,A,I);return v(P,A,I)}function b(P,I){typeof P.create=="function"&&(this.create=P.create,this.flags|=n),typeof P.before=="function"&&(this.before=P.before,this.flags|=i),typeof P.after=="function"&&(this.after=P.after,this.flags|=o),typeof P.error=="function"&&(this.error=P.error,this.flags|=s),this.uid=++c,this.data=I===void 0?null:I}b.prototype.create=void 0,b.prototype.before=void 0,b.prototype.after=void 0,b.prototype.error=void 0,b.prototype.data=void 0,b.prototype.uid=0,b.prototype.flags=0;function C(P,I){if(typeof P!="object"||!P)throw new TypeError("callbacks argument must be an object");return P instanceof b?P:new b(P,I)}function S(P,I){var A;P instanceof b?A=P:A=C(P,I);for(var R=!1,F=0;F<a.length;F++)if(A===a[F]){R=!0;break}return R||a.push(A),A}function _(P){for(var I=0;I<a.length;I++)if(P===a[I]){a.splice(I,1);break}}process.createAsyncListener=C,process.addAsyncListener=S,process.removeAsyncListener=_,e.exports=w}),uee=O((t,e)=>{"use strict";e.exports=(r,n)=>class extends r{constructor(i){var o,s;super(c);var a=this;try{i.apply(o,s)}catch(l){s[1](l)}return a;function c(l,u){o=this,s=[f,d];function f(p){return n(a,!1),l(p)}function d(p){return n(a,!1),u(p)}}}}}),fee=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var t=bb(),e=cee(),r=t.wrap,n=t.massWrap,i=lee(),o=require("util"),s=e.gte(process.version,"6.0.0"),a=e.gte(process.version,"7.0.0"),c=e.gte(process.version,"8.0.0"),l=e.gte(process.version,"11.0.0"),u=require("net");a&&!u._normalizeArgs?u._normalizeArgs=function(M){if(M.length===0)return[{},null];var L=M[0],q={};typeof L=="object"&&L!==null?q=L:te(L)?q.path=L:(q.port=L,M.length>1&&typeof M[1]=="string"&&(q.host=M[1]));var V=M[M.length-1];return typeof V!="function"?[q,null]:[q,V]}:!a&&!u._normalizeConnectArgs&&(u._normalizeConnectArgs=function(M){var L={};function q(z){return(z=Number(z))>=0?z:!1}typeof M[0]=="object"&&M[0]!==null?L=M[0]:typeof M[0]=="string"&&q(M[0])===!1?L.path=M[0]:(L.port=M[0],typeof M[1]=="string"&&(L.host=M[1]));var V=M[M.length-1];return typeof V=="function"?[L,V]:[L]}),"_setUpListenHandle"in u.Server.prototype?r(u.Server.prototype,"_setUpListenHandle",f):r(u.Server.prototype,"_listen2",f);function f(M){return function(){this.on("connection",function(L){L._handle&&(L._handle.onread=i(L._handle.onread))});try{return M.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function d(M){if(M&&M._handle){var L=M._handle;L._originalOnread||(L._originalOnread=L.onread),L.onread=i(L._originalOnread)}}r(u.Socket.prototype,"connect",function(M){return function(){var L;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?L=arguments[0]:L=a?u._normalizeArgs(arguments):u._normalizeConnectArgs(arguments),L[1]&&(L[1]=i(L[1]));var q=M.apply(this,L);return d(this),q}});var p=require("http");r(p.Agent.prototype,"addRequest",function(M){return function(L){var q=L.onSocket;return L.onSocket=i(function(V){return d(V),q.apply(this,arguments)}),M.apply(this,arguments)}});var h=require("child_process");function m(M){Array.isArray(M.stdio)&&M.stdio.forEach(function(L){L&&L._handle&&(L._handle.onread=i(L._handle.onread),r(L._handle,"close",J))}),M._handle&&(M._handle.onexit=i(M._handle.onexit))}h.ChildProcess?r(h.ChildProcess.prototype,"spawn",function(M){return function(){var L=M.apply(this,arguments);return m(this),L}}):n(h,["execFile","fork","spawn"],function(M){return function(){var L=M.apply(this,arguments);return m(L),L}}),process._fatalException||(process._originalNextTick=process.nextTick);var g=[];process._nextDomainTick&&g.push("_nextDomainTick"),process._tickDomainCallback&&g.push("_tickDomainCallback"),n(process,g,X),r(process,"nextTick",J);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var w=require("timers"),b=global.setTimeout===w.setTimeout;n(w,v,J),b&&n(global,v,J);var C=require("dns");n(C,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],X),C.resolveNaptr&&r(C,"resolveNaptr",X);var S=require("fs");n(S,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],X),S.lchown&&r(S,"lchown",X),S.lchmod&&r(S,"lchmod",X),S.ftruncate&&r(S,"ftruncate",X);var _;try{_=require("zlib")}catch{}_&&_.Deflate&&_.Deflate.prototype&&(P=Object.getPrototypeOf(_.Deflate.prototype),P._transform?r(P,"_transform",X):P.write&&P.flush&&P.end&&n(P,["write","flush","end"],X));var P,I;try{I=require("crypto")}catch{}I&&(A=["pbkdf2","randomBytes"],l||A.push("pseudoRandomBytes"),n(I,A,X));var A,R=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";R&&(F=process.addAsyncListener({create:function(){R=!1}}),global.Promise.resolve(!0).then(function(){R=!1}),process.removeAsyncListener(F));var F;R&&H();function H(){var M=global.Promise;function L(re){if(!(this instanceof L))return M(re);if(typeof re!="function")return new M(re);var be,Pe,xe=new M(Te);xe.__proto__=L.prototype;try{re.apply(be,Pe)}catch(he){Pe[1](he)}return xe;function Te(he,yt){be=this,Pe=[It,ye];function It(pe){return V(xe,!1),he(pe)}function ye(pe){return V(xe,!1),yt(pe)}}}if(o.inherits(L,M),r(M.prototype,"then",oe),M.prototype.chain&&r(M.prototype,"chain",oe),s)global.Promise=uee()(M,V);else{var q=["all","race","reject","resolve","accept","defer"];q.forEach(function(re){typeof M[re]=="function"&&(L[re]=M[re])}),global.Promise=L}function V(re,be){(!re.__asl_wrapper||be)&&(re.__asl_wrapper=i(z))}function z(re,be,Pe,xe){var Te;try{return Te=be.call(re,Pe),{returnVal:Te,error:!1}}catch(he){return{errorVal:he,error:!0}}finally{Te instanceof M?xe.__asl_wrapper=function(){var he=Te.__asl_wrapper||z;return he.apply(this,arguments)}:V(xe,!0)}}function oe(re){return function(){var be=this,Pe=re.apply(be,Array.prototype.map.call(arguments,xe));return Pe.__asl_wrapper=function(Te,he,yt,It){return be.__asl_wrapper?(be.__asl_wrapper(Te,function(){},null,Pe),Pe.__asl_wrapper(Te,he,yt,It)):z(Te,he,yt,It)},Pe;function xe(Te){return typeof Te!="function"?Te:i(function(he){var yt=(be.__asl_wrapper||z)(this,Te,he,Pe);if(yt.error)throw yt.errorVal;return yt.returnVal})}}}}function X(M){var L=function(){var q,V=arguments.length-1;if(typeof arguments[V]=="function"){q=Array(arguments.length);for(var z=0;z<arguments.length-1;z++)q[z]=arguments[z];q[V]=i(arguments[V])}return M.apply(this,q||arguments)};switch(M.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q))};case 2:return function(q,V){return arguments.length!==2?L.apply(this,arguments):(typeof V=="function"&&(V=i(V)),M.call(this,q,V))};case 3:return function(q,V,z){return arguments.length!==3?L.apply(this,arguments):(typeof z=="function"&&(z=i(z)),M.call(this,q,V,z))};case 4:return function(q,V,z,oe){return arguments.length!==4?L.apply(this,arguments):(typeof oe=="function"&&(oe=i(oe)),M.call(this,q,V,z,oe))};case 5:return function(q,V,z,oe,re){return arguments.length!==5?L.apply(this,arguments):(typeof re=="function"&&(re=i(re)),M.call(this,q,V,z,oe,re))};case 6:return function(q,V,z,oe,re,be){return arguments.length!==6?L.apply(this,arguments):(typeof be=="function"&&(be=i(be)),M.call(this,q,V,z,oe,re,be))};default:return L}}function J(M){var L=function(){var q;if(typeof arguments[0]=="function"){q=Array(arguments.length),q[0]=i(arguments[0]);for(var V=1;V<arguments.length;V++)q[V]=arguments[V]}return M.apply(this,q||arguments)};switch(M.length){case 1:return function(q){return arguments.length!==1?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q))};case 2:return function(q,V){return arguments.length!==2?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q,V))};case 3:return function(q,V,z){return arguments.length!==3?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q,V,z))};case 4:return function(q,V,z,oe){return arguments.length!==4?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q,V,z,oe))};case 5:return function(q,V,z,oe,re){return arguments.length!==5?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q,V,z,oe,re))};case 6:return function(q,V,z,oe,re,be){return arguments.length!==6?L.apply(this,arguments):(typeof q=="function"&&(q=i(q)),M.call(this,q,V,z,oe,re,be))};default:return L}}function Y(M){return(M=Number(M))>=0?M:!1}function te(M){return typeof M=="string"&&Y(M)===!1}}),dee=O((t,e)=>{"use strict";var r=require("assert"),n=Eb(),i="cls@contexts",o="error@context";process.addAsyncListener||fee();function s(f){this.name=f,this.active=null,this._set=[],this.id=null}s.prototype.set=function(f,d){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[f]=d,d},s.prototype.get=function(f){if(this.active)return this.active[f]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(f){var d=this.createContext();this.enter(d);try{return f(d),d}catch(p){throw p&&(p[o]=d),p}finally{this.exit(d)}},s.prototype.runAndReturn=function(f){var d;return this.run(function(p){d=f(p)}),d},s.prototype.bind=function(f,d){d||(this.active?d=this.active:d=this.createContext());var p=this;return function(){p.enter(d);try{return f.apply(this,arguments)}catch(h){throw h&&(h[o]=d),h}finally{p.exit(d)}}},s.prototype.enter=function(f){r.ok(f,"context must be provided for entering"),this._set.push(this.active),this.active=f},s.prototype.exit=function(f){if(r.ok(f,"context must be provided for exiting"),this.active===f){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var d=this._set.lastIndexOf(f);r.ok(d>=0,"context not currently entered; can't exit"),r.ok(d,"can't remove top context"),this._set.splice(d,1)},s.prototype.bindEmitter=function(f){r.ok(f.on&&f.addListener&&f.emit,"can only bind real EEs");var d=this,p="context@"+this.name;function h(g){!g||(g[i]||(g[i]=Object.create(null)),g[i][p]={namespace:d,context:d.active})}function m(g){if(!(g&&g[i]))return g;var v=g,w=g[i];return Object.keys(w).forEach(function(b){var C=w[b];v=C.namespace.bind(v,C.context)}),v}n(f,h,m)},s.prototype.fromException=function(f){return f[o]};function a(f){return process.namespaces[f]}function c(f){r.ok(f,"namespace must be given a name!");var d=new s(f);return d.id=process.addAsyncListener({create:function(){return d.active},before:function(p,h){h&&d.enter(h)},after:function(p,h){h&&d.exit(h)},error:function(p){p&&d.exit(p)}}),process.namespaces[f]=d,d}function l(f){var d=a(f);r.ok(d,"can't delete nonexistent namespace!"),r.ok(d.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(d.id),process.namespaces[f]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach(function(f){l(f)}),process.namespaces=Object.create(null)}process.namespaces||u(),e.exports={getNamespace:a,createNamespace:c,destroyNamespace:l,reset:u}}),Rc=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CorrelationContextManager=void 0;var e=Qt(),r=Cb(),n=cm(),i=tF(),o=aF(),s=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,u,f,d,p,h){return u=u||l,this.enabled?{operation:{name:f,id:l,parentId:u,traceparent:p,tracestate:h},customProperties:new a(d)}:null},c.spanToContextObject=function(l,u,f){var d=new n;return d.traceId=l.traceId,d.spanId=l.spanId,d.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,d.parentId=u,c.generateContextObject(d.traceId,d.parentId,f,null,d)},c.runWithContext=function(l,u){var f;return c.enabled?c.session.bind(u,(f={},f[c.CONTEXT_NAME]=l,f))():u()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,u){var f;return c.enabled?c.session.bind(l,u?(f={},f[c.CONTEXT_NAME]=u,f):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=aee():this.cls=dee()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(u){return c.session.bind(u)})),this.enabled=!0}},c.startOperation=function(l,u){var f=l&&l.traceContext||null,d=l&&l.traceId?l:null,p=l&&l.headers;if(d){var h=new n("00-"+d.traceId+"-"+d.spanId+"-01"),m=new i(d.traceState?d.traceState.serialize():null),g=c.generateContextObject(d.traceId,"|"+d.traceId+"."+d.spanId+".",typeof u=="string"?u:"",void 0,h,m);return g}if(f){var h=new n(f.traceparent),m=new i(f.tracestate),v=typeof u=="object"?new o(u):null,g=c.generateContextObject(h.traceId,h.parentId,typeof u=="string"?u:v.getOperationName({}),v&&v.getCorrelationContextHeader()||void 0,h,m);return g}if(p){var h=new n(p.traceparent?p.traceparent.toString():null),m=new i(p.tracestate?p.tracestate.toString():null),v=new o(l),g=c.generateContextObject(h.traceId,h.parentId,v.getOperationName({}),v.getCorrelationContextHeader(),h,m);return g}return e.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),u=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,f=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,d=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(u&&f)&&d},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();t.CorrelationContextManager=s;var a=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var u=l?l.split(", "):[];this.props=u.map(function(f){var d=f.split("=");return{key:d[0],value:d[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var u=0;u<this.props.length;++u){var f=this.props[u];if(f.key===l)return f.value}},c.prototype.setProperty=function(l,u){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(u)){e.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+u);return}for(var f=0;f<this.props.length;++f){var d=this.props[f];if(d.key===l){d.value=u;return}}this.props.push({key:l,value:u})},c.bannedCharacters=/[,=]/,c}()}),pee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=Sr(),r=Pt(),n=[],i=function(a){var c=a.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:a.data.stderr?e.SeverityLevel.Warning:e.SeverityLevel.Information}))})};function o(a,c){a?(n.length===0&&r.channel.subscribe("console",i),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",i))}t.enable=o;function s(){r.channel.unsubscribe("console",i),n=[]}t.dispose=s}),hee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=Sr(),r=Pt(),n=[],i={10:e.SeverityLevel.Verbose,20:e.SeverityLevel.Verbose,30:e.SeverityLevel.Information,40:e.SeverityLevel.Warning,50:e.SeverityLevel.Error,60:e.SeverityLevel.Critical},o=function(c){var l=c.data.result;n.forEach(function(u){var f=i[c.data.level];l instanceof Error?u.trackException({exception:l}):u.trackTrace({message:l,severity:f})})};function s(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("bunyan",o))}t.enable=s;function a(){r.channel.unsubscribe("bunyan",o),n=[]}t.dispose=a}),mee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.enable=void 0;var e=Sr(),r=Pt(),n=[],i={syslog:function(c){var l={emerg:e.SeverityLevel.Critical,alert:e.SeverityLevel.Critical,crit:e.SeverityLevel.Critical,error:e.SeverityLevel.Error,warning:e.SeverityLevel.Warning,notice:e.SeverityLevel.Information,info:e.SeverityLevel.Information,debug:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},npm:function(c){var l={error:e.SeverityLevel.Error,warn:e.SeverityLevel.Warning,info:e.SeverityLevel.Information,verbose:e.SeverityLevel.Verbose,debug:e.SeverityLevel.Verbose,silly:e.SeverityLevel.Verbose};return l[c]===void 0?e.SeverityLevel.Information:l[c]},unknown:function(c){return e.SeverityLevel.Information}},o=function(c){var l=c.data.message;n.forEach(function(u){if(l instanceof Error)u.trackException({exception:l,properties:c.data.meta});else{var f=i[c.data.levelKind](c.data.level);u.trackTrace({message:l,severity:f,properties:c.data.meta})}})};function s(c,l){c?(n.length===0&&r.channel.subscribe("winston",o),n.push(l)):(n=n.filter(function(u){return u!=l}),n.length===0&&r.channel.unsubscribe("winston",o))}t.enable=s;function a(){r.channel.unsubscribe("winston",o),n=[]}t.dispose=a}),gee=O((t,e)=>{"use strict";var r=Cb(),n=function(){function i(o){if(i.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=o,i.INSTANCE=this}return i.prototype.enable=function(o,s){r.IsInitialized&&(pee().enable(o&&s,this._client),hee().enable(o,this._client),mee().enable(o,this._client))},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.dispose=function(){i.INSTANCE=null,this.enable(!1,!1)},i._methodNames=["debug","info","log","warn","error"],i}();e.exports=n}),vee=O((t,e)=>{"use strict";var r=function(){function n(i){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=i;var o=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(o[0])>13||parseInt(o[0])===13&&parseInt(o[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(i){var o=this;if(i){this._isInitialized=!0;var s=this;if(!this._exceptionListenerHandle){var a=function(c,l,u){u===void 0&&(u=new Error(n._FALLBACK_ERROR_MESSAGE)),o._client.trackException({exception:u}),o._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(u),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=a.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=a.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();e.exports=r}),Mo=O(t=>{"use strict";var e;Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeatMetricName=t.DependencyTypeName=t.SpanAttribute=t.TelemetryTypeStringToQuickPulseDocumentType=t.TelemetryTypeStringToQuickPulseType=t.QuickPulseType=t.QuickPulseDocumentType=t.PerformanceToQuickPulseCounter=t.MetricId=t.PerformanceCounter=t.QuickPulseCounter=t.DEFAULT_LIVEMETRICS_HOST=t.DEFAULT_LIVEMETRICS_ENDPOINT=t.DEFAULT_BREEZE_ENDPOINT=void 0,t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(o){o.COMMITTED_BYTES="\\Memory\\Committed Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",o.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",o.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",o.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",o.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",o.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",o.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=t.QuickPulseCounter||(t.QuickPulseCounter={}));var n;(function(o){o.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",o.AVAILABLE_BYTES="\\Memory\\Available Bytes",o.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",o.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",o.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",o.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=t.PerformanceCounter||(t.PerformanceCounter={}));var i;(function(o){o.REQUESTS_DURATION="requests/duration",o.DEPENDENCIES_DURATION="dependencies/duration",o.EXCEPTIONS_COUNT="exceptions/count",o.TRACES_COUNT="traces/count"})(i=t.MetricId||(t.MetricId={})),t.PerformanceToQuickPulseCounter=(e={},e[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,e[n.REQUEST_RATE]=r.REQUEST_RATE,e[n.REQUEST_DURATION]=r.REQUEST_DURATION,e[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,e[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,e[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,e[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,e[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,e[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,e),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability,PageViewData:t.QuickPulseType.PageView},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability,PageViewData:t.QuickPulseDocumentType.PageView},t.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},t.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},t.HeartBeatMetricName="HeartBeat"}),_b=O((t,e)=>{"use strict";var r=require("os"),n=Mo(),i=function(){function o(s,a,c){a===void 0&&(a=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,o.INSTANCE||(o.INSTANCE=this),this._isInitialized=!1,this._client=s,this._collectionInterval=a,this._enableLiveMetricsCounters=c}return o.prototype.enable=function(s,a){var c=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:o._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=a||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},o.countRequest=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalRequestExecutionTime+=c,a===!1&&o._totalFailedRequestCount++,o._totalRequestCount++}},o.countException=function(){o._totalExceptionCount++},o.countDependency=function(s,a){var c;if(o.isEnabled()){if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;o._intervalDependencyExecutionTime+=c,a===!1&&o._totalFailedDependencyCount++,o._totalDependencyCount++}},o.prototype.isInitialized=function(){return this._isInitialized},o.isEnabled=function(){return o.INSTANCE&&o.INSTANCE._isEnabled},o.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},o.prototype._trackCpu=function(){var s=r.cpus();if(s&&s.length&&this._lastCpus&&s.length===this._lastCpus.length){for(var a=0,c=0,l=0,u=0,f=0,d=0;!!s&&d<s.length;d++){var p=s[d],h=this._lastCpus[d],m="% cpu("+d+") ",g=p.model,v=p.speed,w=p.times,b=h.times,C=w.user-b.user||0;a+=C;var S=w.sys-b.sys||0;c+=S;var _=w.nice-b.nice||0;l+=_;var P=w.idle-b.idle||0;u+=P;var I=w.irq-b.irq||0;f+=I}var A=void 0;if(typeof process.cpuUsage=="function"){var R=process.cpuUsage(),F=process.hrtime(),H=R.user-this._lastAppCpuUsage.user+(R.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var X=(F[0]-this._lastHrtime[0])*1e6+(F[1]-this._lastHrtime[1])/1e3||0;A=100*H/(X*s.length)}this._lastAppCpuUsage=R,this._lastHrtime=F}var J=a+c+l+u+f||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(J-u)/J*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:A||a/J*100})}this._lastCpus=s},o.prototype._trackMemory=function(){var s=r.freemem(),a=process.memoryUsage().rss,c=r.totalmem()-s;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:a}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:s}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},o.prototype._trackNetwork=function(){var s=this._lastRequests,a={totalRequestCount:o._totalRequestCount,totalFailedRequestCount:o._totalFailedRequestCount,time:+new Date},c=a.totalRequestCount-s.totalRequestCount||0,l=a.totalFailedRequestCount-s.totalFailedRequestCount||0,u=a.time-s.time,f=u/1e3,d=(o._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=o._intervalRequestExecutionTime,u>0){var p=c/f,h=l/f;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:p}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:d}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:h})}this._lastRequests=a},o.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastDependencies,a={totalDependencyCount:o._totalDependencyCount,totalFailedDependencyCount:o._totalFailedDependencyCount,time:+new Date},c=a.totalDependencyCount-s.totalDependencyCount||0,l=a.totalFailedDependencyCount-s.totalFailedDependencyCount||0,u=a.time-s.time,f=u/1e3,d=(o._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=o._intervalDependencyExecutionTime,u>0){var p=c/f,h=l/f;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:p}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:h}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:d})}this._lastDependencies=a}},o.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var s=this._lastExceptions,a={totalExceptionCount:o._totalExceptionCount,time:+new Date},c=a.totalExceptionCount-s.totalExceptionCount||0,l=a.time-s.time,u=l/1e3;if(l>0){var f=c/u;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:f})}this._lastExceptions=a}},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1),this._isInitialized=!1},o._totalRequestCount=0,o._totalFailedRequestCount=0,o._totalDependencyCount=0,o._totalFailedDependencyCount=0,o._totalExceptionCount=0,o._intervalDependencyExecutionTime=0,o._intervalRequestExecutionTime=0,o}();e.exports=i}),yee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AggregatedMetricCounter=void 0;var e=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();t.AggregatedMetricCounter=e}),wee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreaggregatedMetricPropertyNames=void 0,t.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),fF=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(a){for(var c,l=1,u=arguments.length;l<u;l++){c=arguments[l];for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(a[f]=c[f])}return a},r.apply(this,arguments)},n=Mo(),i=yee(),o=wee(),s=function(){function a(c,l){l===void 0&&(l=6e4),a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,a._dependencyCountersCollection=[],a._requestCountersCollection=[],a._exceptionCountersCollection=[],a._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return a.prototype.enable=function(c,l){var u=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return u.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countException=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},a.countTrace=function(c){if(a.isEnabled()){var l=a._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},a.countRequest=function(c,l){if(a.isEnabled()){var u,f=a._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;f.intervalExecutionTime+=u,f.totalCount++}},a.countDependency=function(c,l){if(a.isEnabled()){var u=a._getAggregatedCounter(l,this._dependencyCountersCollection),f;if(typeof c=="string")f=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")f=c;else return;u.intervalExecutionTime+=f,u.totalCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},a._getAggregatedCounter=function(c,l){for(var u=!1,f=0;f<l.length;f++){if(c===l[f].dimensions)return l[f];if(Object.keys(c).length===Object.keys(l[f].dimensions).length){for(var d in c)if(c[d]!=l[f].dimensions[d]){u=!0;break}if(!u)return l[f];u=!1}}var p=new i.AggregatedMetricCounter(c);return l.push(p),p},a.prototype._trackRequestMetrics=function(){for(var c=0;c<a._requestCountersCollection.length;c++){var l=a._requestCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,f=l.time-l.lastTime,d=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,f>0&&u>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:d,count:u,aggregationInterval:f,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackDependencyMetrics=function(){for(var c=0;c<a._dependencyCountersCollection.length;c++){var l=a._dependencyCountersCollection[c];l.time=+new Date;var u=l.totalCount-l.lastTotalCount||0,f=l.time-l.lastTime,d=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/u||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,f>0&&u>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:d,count:u,aggregationInterval:f,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackExceptionMetrics=function(){for(var c=0;c<a._exceptionCountersCollection.length;c++){var l=a._exceptionCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,f=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:u,count:u,aggregationInterval:f,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackTraceMetrics=function(){for(var c=0;c<a._traceCountersCollection.length;c++){var l=a._traceCountersCollection[c],u=l.totalCount-l.lastTotalCount||0,f=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:u,count:u,aggregationInterval:f,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},a.prototype._trackPreAggregatedMetric=function(c){var l={};for(var u in c.dimensions)l[o.PreaggregatedMetricPropertyNames[u]]=c.dimensions[u];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var f={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(f)},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a}();e.exports=s}),lm=O((t,e)=>{"use strict";var r=require("os"),n=require("fs"),i=require("path"),o=Sr(),s=Qt(),a=function(){function c(l){this.keys=new o.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||i.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.appVersion[l]=u.version)}catch(f){s.info("unable to read app version: ",f)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=i.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var u=JSON.parse(n.readFileSync(l,"utf8"));u&&typeof u.version=="string"&&(c.sdkVersion=u.version)}catch(f){s.info("unable to read app version: ",f)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();e.exports=a}),Cee=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var u=function(f,d){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(p[m]=h[m])},u(f,d)};return function(f,d){u(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}(),n=require("url"),i=Sr(),o=hn(),s=Vu(),a=sF(),c=Dc(),l=function(u){r(f,u);function f(d,p){var h=u.call(this)||this;return p&&p.method&&d&&(h.method=p.method,h.url=f._getUrlFromRequestOptions(d,p),h.startTime=+new Date),h}return f.prototype.onError=function(d){this._setStatus(void 0,d)},f.prototype.onResponse=function(d){this._setStatus(d.statusCode,void 0),this.correlationId=o.getCorrelationContextTarget(d,s.requestContextTargetKey)},f.prototype.getDependencyTelemetry=function(d,p){var h=n.parse(this.url);h.search=void 0,h.hash=void 0;var m=this.method.toUpperCase()+" "+h.pathname,g=i.RemoteDependencyDataConstants.TYPE_HTTP,v=h.hostname;h.port&&(v+=":"+h.port),this.correlationId?(g=i.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(v+=" | "+this.correlationId)):g=i.RemoteDependencyDataConstants.TYPE_HTTP;var w={id:p,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:g,target:v};if(d&&d.time?w.time=d.time:this.startTime&&(w.time=new Date(this.startTime)),d){for(var b in d)w[b]||(w[b]=d[b]);if(d.properties)for(var b in d.properties)w.properties[b]=d.properties[b]}return w},f._getUrlFromRequestOptions=function(d,p){if(typeof d=="string")if(d.indexOf("http://")===0||d.indexOf("https://")===0)d=n.parse(d);else{var h=n.parse(d);h.host==="443"?d=n.parse("https://"+d):d=n.parse("http://"+d)}else{if(d&&typeof n.URL=="function"&&d instanceof n.URL)return n.format(d);var m=d;d={},m&&Object.keys(m).forEach(function(w){d[w]=m[w]})}if(d.path){var g=n.parse(d.path);d.pathname=g.pathname,d.search=g.search}if(d.host&&d.port){var v=n.parse("http://"+d.host);!v.port&&d.port&&(d.hostname=d.host,delete d.host)}return d.protocol=d.protocol||p.agent&&p.agent.protocol||p.protocol||void 0,d.hostname=d.hostname||"localhost",n.format(d)},f}(a);e.exports=l}),bee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.spanToTelemetryContract=void 0;var r=ft(),n=Mo();function i(s){var a=e({},s);return Object.keys(n.SpanAttribute).forEach(function(c){delete a[c]}),a}function o(s){var a="|"+s.spanContext().traceId+"."+s.spanContext().spanId+".",c=Math.round(s._duration[0]*1e3+s._duration[1]/1e6),l=s.attributes["peer.address"]?s.attributes["peer.address"].toString():"",u=s.attributes.component?s.attributes.component.toString():"",f=u.toUpperCase()===n.DependencyTypeName.Http||!!s.attributes[n.SpanAttribute.HttpUrl],d=u.toLowerCase()===n.DependencyTypeName.Grpc;if(f){var p=s.attributes[n.SpanAttribute.HttpMethod]||"GET",h=new URL(s.attributes[n.SpanAttribute.HttpUrl].toString()),m=s.attributes[n.SpanAttribute.HttpHost]||h.host,g=s.attributes[n.SpanAttribute.HttpPort]||h.port||null,v=h.pathname||"/",w=p+" "+v,b=n.DependencyTypeName.Http,C=g?(m+":"+g).toString():m.toString(),S=h.toString(),_=s.attributes[n.SpanAttribute.HttpStatusCode]||s.status.code||0,P=_<400;return{id:a,name:w,dependencyTypeName:b,target:C,data:S,success:P,duration:c,url:S,resultCode:String(_),properties:i(s.attributes)}}else if(d){var p=s.attributes[n.SpanAttribute.GrpcMethod]||"rpc",I=s.attributes[n.SpanAttribute.GrpcService],A=I?p+" "+I:s.name;return{id:a,duration:c,name:A,target:I.toString(),data:I.toString()||A,url:I.toString()||A,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(s.status.code||0),success:s.status.code===0,properties:i(s.attributes)}}else{var R=s.name,F=s.links&&s.links.map(function(H){return{operation_Id:H.context.traceId,id:H.context.spanId}});return{id:a,duration:c,name:R,target:l,data:l||R,url:l||R,dependencyTypeName:s.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:u||s.name,resultCode:String(s.status.code||0),success:s.status.code===0,properties:e(e({},i(s.attributes)),{"_MS.links":F||void 0})}}}t.spanToTelemetryContract=o}),Eee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=ft(),r=Pt(),n=cm(),i=bee(),o=kL(),s=[],a=function(l){var u=l.data,f=i.spanToTelemetryContract(u),d=u.spanContext(),p=new n;p.traceId=d.traceId,p.spanId=d.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(d.traceFlags),p.parentId=u.parentSpanId?"|"+d.traceId+"."+u.parentSpanId+".":null,o.AsyncScopeManager.with(u,function(){s.forEach(function(h){u.kind===e.SpanKind.SERVER?h.trackRequest(f):(u.kind===e.SpanKind.CLIENT||u.kind===e.SpanKind.INTERNAL)&&h.trackDependency(f)})})};t.subscriber=a;function c(l,u){l?(s.length===0&&r.channel.subscribe("azure-coretracing",t.subscriber),s.push(u)):(s=s.filter(function(f){return f!=u}),s.length===0&&r.channel.unsubscribe("azure-coretracing",t.subscriber))}t.enable=c}),_ee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){o.data.event.commandName!=="ismaster"&&r.forEach(function(s){var a=o.data.startedData&&o.data.startedData.databaseName||"Unknown database";s.trackDependency({target:a,data:o.data.event.commandName,name:o.data.event.commandName,duration:o.data.event.duration,success:o.data.succeeded,resultCode:o.data.succeeded?"0":"1",time:o.data.startedData.time,dependencyTypeName:"mongodb"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mongodb",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mongodb",t.subscriber))}t.enable=i}),See=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query||{},c=a.sql||"Unknown query",l=!o.data.err,u=a._connection||{},f=u.config||{},d=f.socketPath?f.socketPath:(f.host||"localhost")+":"+f.port;s.trackDependency({target:d,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"mysql"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("mysql",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("mysql",t.subscriber))}t.enable=i}),xee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){r.forEach(function(s){o.data.commandObj.command!=="info"&&s.trackDependency({target:o.data.address,name:o.data.commandObj.command,data:o.data.commandObj.command,duration:o.data.duration,success:!o.data.err,resultCode:o.data.err?"1":"0",time:o.data.time,dependencyTypeName:"redis"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("redis",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("redis",t.subscriber))}t.enable=i}),Pee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.subscriber=void 0;var e=Pt(),r=[],n=function(o){r.forEach(function(s){var a=o.data.query,c=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",l=!o.data.error,u=o.data.database.host+":"+o.data.database.port;s.trackDependency({target:u,data:c,name:c,duration:o.data.duration,success:l,resultCode:l?"0":"1",time:o.data.time,dependencyTypeName:"postgres"})})};t.subscriber=n;function i(o,s){o?(r.length===0&&e.channel.subscribe("postgres",t.subscriber),r.push(s)):(r=r.filter(function(a){return a!=s}),r.length===0&&e.channel.unsubscribe("postgres",t.subscriber))}t.enable=i}),Wu=O((t,e)=>{"use strict";var r=t&&t.__spreadArrays||function(){for(var h=0,m=0,g=arguments.length;m<g;m++)h+=arguments[m].length;for(var v=Array(h),w=0,m=0;m<g;m++)for(var b=arguments[m],C=0,S=b.length;C<S;C++,w++)v[w]=b[C];return v},n=require("http"),i=require("https"),o=Qt(),s=hn(),a=Vu(),c=Cee(),l=Rc(),u=Dc(),f=cm(),d=Cb(),p=function(){function h(m){if(h.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");h.INSTANCE=this,this._client=m}return h.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(Eee().enable(!0,this._client),_ee().enable(m,this._client),See().enable(m,this._client),xee().enable(m,this._client),Pee().enable(m,this._client))},h.prototype.isInitialized=function(){return this._isInitialized},h.prototype._initialize=function(){var m=this;this._isInitialized=!0;var g=n.request,v=i.request,w=function(b,C){var S=!C[h.disableCollectionRequestOption]&&!b[h.alreadyAutoCollectedFlag];C.headers&&C.headers["user-agent"]&&C.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(S=!1),b[h.alreadyAutoCollectedFlag]=!0,b&&C&&S&&(l.CorrelationContextManager.wrapEmitter(b),h.trackRequest(m._client,{options:C,request:b}))};n.request=function(b){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];var _=g.call.apply(g,r([n,b],C));return w(_,b),_},i.request=function(b){for(var C=[],S=1;S<arguments.length;S++)C[S-1]=arguments[S];var _=v.call.apply(v,r([i,b],C));return w(_,b),_},n.get=function(b){for(var C,S=[],_=1;_<arguments.length;_++)S[_-1]=arguments[_];var P=(C=n.request).call.apply(C,r([n,b],S));return P.end(),P},i.get=function(b){for(var C,S=[],_=1;_<arguments.length;_++)S[_-1]=arguments[_];var P=(C=i.request).call.apply(C,r([i,b],S));return P.end(),P}},h.trackRequest=function(m,g){if(!g.options||!g.request||!m){o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!g.options,!g.request,!m);return}var v=new c(g.options,g.request),w=l.CorrelationContextManager.getCurrentContext(),b,C;if(w&&w.operation&&w.operation.traceparent&&f.isValidTraceId(w.operation.traceparent.traceId))w.operation.traceparent.updateSpanId(),b=w.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){var S=new f;C=S.toString(),b=S.getBackCompatRequestId()}else b=w&&w.operation&&w.operation.parentId+h.requestNumber+++".";if(s.canIncludeCorrelationHeader(m,v.getUrl())&&g.request.getHeader&&g.request.setHeader&&m.config&&m.config.correlationId){var _=g.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(m,g.request,_)}catch(A){o.warn("Request-Context header could not be set. Correlation of requests may be lost",A)}if(w&&w.operation)try{if(g.request.setHeader(a.requestIdHeader,b),m.config.ignoreLegacyHeaders||(g.request.setHeader(a.parentIdHeader,w.operation.id),g.request.setHeader(a.rootIdHeader,b)),C||w.operation.traceparent)g.request.setHeader(a.traceparentHeader,C||w.operation.traceparent.toString());else if(u.w3cEnabled){var S=new f().toString();g.request.setHeader(a.traceparentHeader,S)}if(w.operation.tracestate){var P=w.operation.tracestate.toString();P&&g.request.setHeader(a.traceStateHeader,P)}var I=w.customProperties.serializeToHeader();I&&g.request.setHeader(a.correlationContextHeader,I)}catch(A){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",A)}}g.request.on&&(g.request.on("response",function(A){v.onResponse(A);var R=v.getDependencyTelemetry(g,b);R.contextObjects=R.contextObjects||{},R.contextObjects["http.RequestOptions"]=g.options,R.contextObjects["http.ClientRequest"]=g.request,R.contextObjects["http.ClientResponse"]=A,m.trackDependency(R)}),g.request.on("error",function(A){v.onError(A);var R=v.getDependencyTelemetry(g,b);R.contextObjects=R.contextObjects||{},R.contextObjects["http.RequestOptions"]=g.options,R.contextObjects["http.ClientRequest"]=g.request,R.contextObjects.Error=A,m.trackDependency(R)}),g.request.on("abort",function(){v.onError(new Error);var A=v.getDependencyTelemetry(g,b);A.contextObjects=A.contextObjects||{},A.contextObjects["http.RequestOptions"]=g.options,A.contextObjects["http.ClientRequest"]=g.request,m.trackDependency(A)}))},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h.disableCollectionRequestOption="disableAppInsightsAutoCollection",h.requestNumber=1,h.alreadyAutoCollectedFlag="_appInsightsAutoCollected",h}();e.exports=p}),kee=O((t,e)=>{"use strict";var r=require("os"),n=Mo(),i=hn(),o=lm(),s=Wu(),a="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",u="ENETUNREACH",f=function(){function d(p){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",d.INSTANCE||(d.INSTANCE=this),this._isInitialized=!1,this._client=p}return d.prototype.enable=function(p,h){var m=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(h,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},d.prototype.isInitialized=function(){return this._isInitialized},d.isEnabled=function(){return d.INSTANCE&&d.INSTANCE._isEnabled},d.prototype.trackHeartBeat=function(p,h){var m=this,g=!1,v={},w=o.sdkVersion;v.sdk=w,v.osType=r.type(),process.env.WEBSITE_SITE_NAME?(v.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",v.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",v.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?v.azfunction_appId=process.env.WEBSITE_HOSTNAME:p&&(this._isVM===void 0?(g=!0,this._getAzureComputeMetadata(p,function(){m._isVM&&Object.keys(m._vmData).length>0&&(v.azInst_vmId=m._vmData.vmId||"",v.azInst_subscriptionId=m._vmData.subscriptionId||"",v.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h()})):this._isVM&&(v.azInst_vmId=this._azInst_vmId,v.azInst_subscriptionId=this._azInst_subscriptionId,v.azInst_osType=this._azInst_osType)),g||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:v}),h())},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1},d.prototype._getAzureComputeMetadata=function(p,h){var m,g=this,v=a+"?"+c+"&"+l,w=(m={method:"GET"},m[s.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),b=i.makeRequest(p,v,w,function(C){if(C.statusCode===200){g._isVM=!0;var S="";C.on("data",function(_){S+=_}),C.on("end",function(){g._vmData=g._isJSON(S)?JSON.parse(S):{},h()})}else h()});b&&(b.on("error",function(C){C&&C.message&&C.message.indexOf(u)>-1&&(g._isVM=!1),h()}),b.end())},d.prototype._isJSON=function(p){try{return JSON.parse(p)&&!!p}catch{return!1}},d}();e.exports=f}),dF=O((t,e)=>{"use strict";var r=require("http"),n=require("https"),i=Qt(),o=hn(),s=Vu(),a=aF(),c=Rc(),l=_b(),u=function(){function f(d){if(f.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");f.INSTANCE=this,this._client=d}return f.prototype.enable=function(d){this._isEnabled=d,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},f.prototype.useAutoCorrelation=function(d,p){d&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(p):!d&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=d},f.prototype.isInitialized=function(){return this._isInitialized},f.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},f.prototype._generateCorrelationContext=function(d){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(d.getOperationId(this._client.context.tags),d.getRequestId(),d.getOperationName(this._client.context.tags),d.getCorrelationContextHeader(),d.getTraceparent(),d.getTracestate())},f.prototype._initialize=function(){var d=this;this._isInitialized=!0;var p=function(v){if(v){if(typeof v!="function")throw new Error("onRequest handler must be a function");return function(w,b){c.CorrelationContextManager.wrapEmitter(w),c.CorrelationContextManager.wrapEmitter(b);var C=w&&!w[f.alreadyAutoCollectedFlag];if(w&&C){var S=new a(w),_=d._generateCorrelationContext(S);c.CorrelationContextManager.runWithContext(_,function(){d._isEnabled&&(w[f.alreadyAutoCollectedFlag]=!0,f.trackRequest(d._client,{request:w,response:b},S)),typeof v=="function"&&v(w,b)})}else typeof v=="function"&&v(w,b)}}},h=function(v){var w=v.addListener.bind(v);v.addListener=function(b,C){switch(b){case"request":case"checkContinue":return w(b,p(C));default:return w(b,C)}},v.on=v.addListener},m=r.createServer;r.createServer=function(v,w){if(w&&typeof w=="function"){var b=m(v,p(w));return h(b),b}else{var b=m(p(v));return h(b),b}};var g=n.createServer;n.createServer=function(v,w){var b=g(v,p(w));return h(b),b}},f.trackRequestSync=function(d,p){if(!p.request||!p.response||!d){i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!p.request,!p.response,!d);return}f.addResponseCorrelationIdHeader(d,p.response);var h=c.CorrelationContextManager.getCurrentContext(),m=new a(p.request,h&&h.operation.parentId);h&&(h.operation.id=m.getOperationId(d.context.tags)||h.operation.id,h.operation.name=m.getOperationName(d.context.tags)||h.operation.name,h.operation.parentId=m.getRequestId()||h.operation.parentId,h.customProperties.addHeaderData(m.getCorrelationContextHeader())),f.endRequest(d,m,p,p.duration,p.error)},f.trackRequest=function(d,p,h){if(!p.request||!p.response||!d){i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!p.request,!p.response,!d);return}var m=c.CorrelationContextManager.getCurrentContext(),g=h||new a(p.request,m&&m.operation.parentId);o.canIncludeCorrelationHeader(d,g.getUrl())&&f.addResponseCorrelationIdHeader(d,p.response),m&&!h&&(m.operation.id=g.getOperationId(d.context.tags)||m.operation.id,m.operation.name=g.getOperationName(d.context.tags)||m.operation.name,m.operation.parentId=g.getOperationParentId(d.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),p.response.once&&p.response.once("finish",function(){f.endRequest(d,g,p,null,null)}),p.request.on&&p.request.on("error",function(v){f.endRequest(d,g,p,null,v)}),p.request.on&&p.request.on("aborted",function(){var v="The request has been aborted and the network socket has closed.";f.endRequest(d,g,p,null,v)})},f.addResponseCorrelationIdHeader=function(d,p){if(d.config&&d.config.correlationId&&p.getHeader&&p.setHeader&&!p.headersSent){var h=p.getHeader(s.requestContextHeader);o.safeIncludeCorrelationHeader(d,p,h)}},f.endRequest=function(d,p,h,m,g){g?p.onError(g,m):p.onResponse(h.response,m);var v=p.getRequestTelemetry(h);if(v.tagOverrides=p.getRequestTags(d.context.tags),h.tagOverrides)for(var w in h.tagOverrides)v.tagOverrides[w]=h.tagOverrides[w];var b=p.getLegacyRootId();b&&(v.properties.ai_legacyRootId=b),v.contextObjects=v.contextObjects||{},v.contextObjects["http.ServerRequest"]=h.request,v.contextObjects["http.ServerResponse"]=h.response,d.trackRequest(v)},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},f.alreadyAutoCollectedFlag="_appInsightsAutoCollected",f}();e.exports=u}),Iee=O((t,e)=>{"use strict";var r=t&&t.__assign||function(){return r=Object.assign||function(u){for(var f,d=1,p=arguments.length;d<p;d++){f=arguments[d];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])}return u},r.apply(this,arguments)},n=require("os"),i=Sr(),o=Mo(),s=hn(),a=Qt(),c=s.w3cTraceId(),l=function(){function u(){}return u.createQuickPulseEnvelope=function(f,d,p,h){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",g=h.tags&&h.keys&&h.keys.cloudRoleInstance&&h.tags[h.keys.cloudRoleInstance]||m,v=h.tags&&h.keys&&h.keys.cloudRole&&h.tags[h.keys.cloudRole]||null,w={Documents:d.length>0?d:null,InstrumentationKey:p.instrumentationKey||"",Metrics:f.length>0?f:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:h.tags[h.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:g,RoleName:v};return w},u.createQuickPulseMetric=function(f){var d;return d={Name:f.name,Value:f.value,Weight:f.count||1},d},u.telemetryEnvelopeToQuickPulseDocument=function(f){switch(f.data.baseType){case i.TelemetryTypeString.Event:return u.createQuickPulseEventDocument(f);case i.TelemetryTypeString.Exception:return u.createQuickPulseExceptionDocument(f);case i.TelemetryTypeString.Trace:return u.createQuickPulseTraceDocument(f);case i.TelemetryTypeString.Dependency:return u.createQuickPulseDependencyDocument(f);case i.TelemetryTypeString.Request:return u.createQuickPulseRequestDocument(f)}return null},u.createQuickPulseEventDocument=function(f){var d=u.createQuickPulseDocument(f),p=f.data.baseData.name,h=r(r({},d),{Name:p});return h},u.createQuickPulseTraceDocument=function(f){var d=u.createQuickPulseDocument(f),p=f.data.baseData.severityLevel||0,h=r(r({},d),{Message:f.data.baseData.message,SeverityLevel:i.SeverityLevel[p]});return h},u.createQuickPulseExceptionDocument=function(f){var d=u.createQuickPulseDocument(f),p=f.data.baseData.exceptions,h="",m="",g="";p&&p.length>0&&(p[0].parsedStack&&p[0].parsedStack.length>0?p[0].parsedStack.forEach(function(w){h+=w.assembly+`
`}):p[0].stack&&p[0].stack.length>0&&(h=p[0].stack),m=p[0].message,g=p[0].typeName);var v=r(r({},d),{Exception:h,ExceptionMessage:m,ExceptionType:g});return v},u.createQuickPulseRequestDocument=function(f){var d=u.createQuickPulseDocument(f),p=f.data.baseData,h=r(r({},d),{Name:p.name,Success:p.success,Duration:p.duration,ResponseCode:p.responseCode,OperationName:p.name});return h},u.createQuickPulseDependencyDocument=function(f){var d=u.createQuickPulseDocument(f),p=f.data.baseData,h=r(r({},d),{Name:p.name,Target:p.target,Success:p.success,Duration:p.duration,ResultCode:p.resultCode,CommandName:p.data,OperationName:d.OperationId,DependencyTypeName:p.type});return h},u.createQuickPulseDocument=function(f){var d,p,h,m;f.data.baseType?(p=o.TelemetryTypeStringToQuickPulseType[f.data.baseType],d=o.TelemetryTypeStringToQuickPulseDocumentType[f.data.baseType]):a.warn("Document type invalid; not sending live metric document",f.data.baseType),h=f.tags[u.keys.operationId],m=u.aggregateProperties(f);var g={DocumentType:d,__type:p,OperationId:h,Version:"1.0",Properties:m};return g},u.aggregateProperties=function(f){var d=[],p=f.data.baseData.measurements||{};for(var h in p)if(p.hasOwnProperty(h)){var m=p[h],g={key:h,value:m};d.push(g)}var v=f.data.baseData.properties||{};for(var h in v)if(v.hasOwnProperty(h)){var m=v[h],g={key:h,value:m};d.push(g)}return d},u.keys=new i.ContextTagKeys,u}();e.exports=l}),Aee=O((t,e)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};e.exports={getTransmissionTime:r}}),Tee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(f,d,p,h){function m(g){return g instanceof p?g:new p(function(v){v(g)})}return new(p||(p=Promise))(function(g,v){function w(S){try{C(h.next(S))}catch(_){v(_)}}function b(S){try{C(h.throw(S))}catch(_){v(_)}}function C(S){S.done?g(S.value):m(S.value).then(w,b)}C((h=h.apply(f,d||[])).next())})},n=t&&t.__generator||function(f,d){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},h,m,g,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(C){return function(S){return b([C,S])}}function b(C){if(h)throw new TypeError("Generator is already executing.");for(;p;)try{if(h=1,m&&(g=C[0]&2?m.return:C[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,C[1])).done)return g;switch(m=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return p.label++,{value:C[1],done:!1};case 5:p.label++,m=C[1],C=[0];continue;case 7:C=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){p=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){p.label=C[1];break}if(C[0]===6&&p.label<g[1]){p.label=g[1],g=C;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(C);break}g[2]&&p.ops.pop(),p.trys.pop();continue}C=d.call(f,p)}catch(S){C=[6,S],m=0}finally{h=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},i=require("https"),o=Wu(),s=Qt(),a=Aee(),c=hn(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},u=function(){function f(d){this._config=d,this._consecutiveErrors=0}return f.prototype.ping=function(d,p,h){var m=[{name:l.streamId,value:d.StreamId},{name:l.machineName,value:d.MachineName},{name:l.roleName,value:d.RoleName},{name:l.instanceName,value:d.Instance},{name:l.invariantVersion,value:d.InvariantVersion.toString()}];this._submitData(d,p,h,"ping",m)},f.prototype.post=function(d,p,h){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([d],p,h,"post")];case 1:return m.sent(),[2]}})})},f.prototype._submitData=function(d,p,h,m,g){return r(this,void 0,void 0,function(){var v,w,b,C,S,_=this;return n(this,function(P){return v=JSON.stringify(d),w=(C={},C[o.disableCollectionRequestOption]=!0,C.host=p&&p.length>0?p:this._config.quickPulseHost,C.method=l.method,C.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,C.headers=(S={Expect:"100-continue"},S[l.time]=a.getTransmissionTime(),S["Content-Type"]="application/json",S["Content-Length"]=Buffer.byteLength(v),S),C),g&&g.length>0&&g.forEach(function(I){return w.headers[I.name]=I.value}),this._config.httpsAgent?w.agent=this._config.httpsAgent:w.agent=c.tlsRestrictedAgent,b=i.request(w,function(I){if(I.statusCode==200){var A=I.headers[l.subscribed]==="true",R=I.headers[l.endpointRedirect]?I.headers[l.endpointRedirect].toString():null,F=I.headers[l.pollingIntervalHint]?parseInt(I.headers[l.pollingIntervalHint].toString()):null;_._consecutiveErrors=0,h(A,I,R,F)}else _._onError("StatusCode:"+I.statusCode+" StatusMessage:"+I.statusMessage),h()}),b.on("error",function(I){_._onError(I),h()}),b.write(v),b.end(),[2]})})},f.prototype._onError=function(d){this._consecutiveErrors++;var p="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%f.MAX_QPS_FAILURES_BEFORE_WARN==0?(p="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(f.TAG,p,d)):s.info(f.TAG,p,d)},f.TAG="QuickPulseSender",f.MAX_QPS_FAILURES_BEFORE_WARN=25,f}();e.exports=u}),Dee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(u,f,d,p){function h(m){return m instanceof d?m:new d(function(g){g(m)})}return new(d||(d=Promise))(function(m,g){function v(C){try{b(p.next(C))}catch(S){g(S)}}function w(C){try{b(p.throw(C))}catch(S){g(S)}}function b(C){C.done?m(C.value):h(C.value).then(v,w)}b((p=p.apply(u,f||[])).next())})},n=t&&t.__generator||function(u,f){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,h,m,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(b){return function(C){return w([b,C])}}function w(b){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,h&&(m=b[0]&2?h.return:b[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,b[1])).done)return m;switch(h=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,h=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=f.call(u,d)}catch(C){b=[6,C],h=0}finally{p=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},i=Qt(),o=Iee(),s=Tee(),a=Mo(),c=lm(),l=function(){function u(f,d){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=f,this.context=d||new c,this._sender=new s(this.config),this._isEnabled=!1}return u.prototype.addCollector=function(f){this._collectors.push(f)},u.prototype.trackMetric=function(f){this._addMetric(f)},u.prototype.addDocument=function(f){var d=o.telemetryEnvelopeToQuickPulseDocument(f);d&&this._documents.push(d)},u.prototype.enable=function(f){f&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!f&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},u.prototype.enableCollectors=function(f){this._collectors.forEach(function(d){d.enable(f)})},u.prototype._addMetric=function(f){var d=f.value,p=f.count||1,h=a.PerformanceToQuickPulseCounter[f.name];h&&(this._metrics[h]?(this._metrics[h].Value=(this._metrics[h].Value*this._metrics[h].Weight+d*p)/(this._metrics[h].Weight+p),this._metrics[h].Weight+=p):(this._metrics[h]=o.createQuickPulseMetric(f),this._metrics[h].Name=h,this._metrics[h].Weight=1))},u.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},u.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var f,d,p,h,m=this;return n(this,function(g){switch(g.label){case 0:return f=Object.keys(this._metrics).map(function(v){return m._metrics[v]}),d=o.createQuickPulseEnvelope(f,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(d)]:[3,2];case 1:return g.sent(),[3,3];case 2:this._ping(d),g.label=3;case 3:return p=this._pollingIntervalHint>0?this._pollingIntervalHint:u.PING_INTERVAL,h=this._isCollectingData?u.POST_INTERVAL:p,this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,h=u.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=u.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(h=u.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),h),this._handle.unref(),[2]}})})},u.prototype._ping=function(f){this._sender.ping(f,this._redirectedHost,this._quickPulseDone.bind(this))},u.prototype._post=function(f){return r(this,void 0,void 0,function(){return n(this,function(d){switch(d.label){case 0:return[4,this._sender.post(f,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return d.sent(),[2]}})})},u.prototype._quickPulseDone=function(f,d,p,h){f!=null?(this._isCollectingData!==f&&(i.info("Live Metrics sending data",f),this.enableCollectors(f)),this._isCollectingData=f,p&&p.length>0&&(this._redirectedHost=p,i.info("Redirecting endpoint to: ",p)),h&&h>0&&(this._pollingIntervalHint=h),d&&d.statusCode<300&&d.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},u.MAX_POST_WAIT_TIME=2e4,u.MAX_PING_WAIT_TIME=6e4,u.FALLBACK_INTERVAL=6e4,u.PING_INTERVAL=5e3,u.POST_INTERVAL=1e3,u}();e.exports=l}),Ree=O((t,e)=>{"use strict";var r=Mo(),n=function(){function i(){}return i.parse=function(o){if(!o)return{};var s=o.split(i._FIELDS_SEPARATOR),a=s.reduce(function(l,u){var f=u.split(i._FIELD_KEY_VALUE_SEPARATOR);if(f.length===2){var d=f[0].toLowerCase(),p=f[1];l[d]=p}return l},{});if(Object.keys(a).length>0){if(a.endpointsuffix){var c=a.location?a.location+".":"";a.ingestionendpoint=a.ingestionendpoint||"https://"+c+"dc."+a.endpointsuffix,a.liveendpoint=a.liveendpoint||"https://"+c+"live."+a.endpointsuffix}a.ingestionendpoint=a.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,a.liveendpoint=a.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return a},i._FIELDS_SEPARATOR=";",i._FIELD_KEY_VALUE_SEPARATOR="=",i}();e.exports=n}),pF=O((t,e)=>{"use strict";var r=Dc(),n=Ree(),i=Qt(),o=Mo(),s=require("url"),a=function(){function c(l){var u=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var f=process.env[c.ENV_connectionString],d=n.parse(l),p=n.parse(f),h=!d.instrumentationkey&&Object.keys(d).length>0?null:l;this.instrumentationKey=d.instrumentationkey||h||p.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(d.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return u.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=d.ingestionendpoint||p.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=d.liveendpoint||p.liveendpoint||process.env[c.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var u="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",f=new RegExp(u);return f.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();e.exports=a}),Oee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCollectNativePerformance=void 0;var r=pF(),n=lm(),i=Qt(),o=function(){function s(a){this._disabledMetrics={},s.INSTANCE&&s.INSTANCE.dispose(),s.INSTANCE=this,this._client=a}return s.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},s.prototype.enable=function(a,c,l){var u=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!s.isNodeVersionCompatible()){if(s._metricsAvailable==null&&a&&!this._isInitialized)try{var f=require("applicationinsights-native-metrics");s._emitter=new f,s._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch{s._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&s._emitter?(s._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return u._trackNativeMetrics()},l),this._handle.unref())):s._emitter&&(s._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},s.prototype.dispose=function(){this.enable(!1)},s.parseEnabled=function(a){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var u=l.split(","),f={};if(u.length>0)for(var d=0,p=u;d<p.length;d++){var h=p[d];f[h]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:e(e({},a),f)}:{isEnabled:a,disabledMetrics:f}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},s.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},s.prototype._trackGarbageCollection=function(){var a;if(!this._disabledMetrics.gc){var c=s._emitter.getGCData();for(var l in c){var u=c[l].metrics,f=l+" Garbage Collection Duration",d=Math.sqrt(u.sumSquares/u.count-Math.pow(u.total/u.count,2))||0;this._client.trackMetric({name:f,value:u.total,count:u.count,max:u.max,min:u.min,stdDev:d,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackEventLoop=function(){var a;if(!this._disabledMetrics.loop){var c=s._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var u="Event Loop CPU Time",f=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:u,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:f,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)})}}},s.prototype._trackHeapUsage=function(){var a,c,l;if(!this._disabledMetrics.heap){var u=process.memoryUsage(),f=u.heapUsed,d=u.heapTotal,p=u.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:f,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,a)}),this._client.trackMetric({name:"Memory Total (Heap)",value:d,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:p-d,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},s}();t.AutoCollectNativePerformance=o}),Nee=O((t,e)=>{"use strict";var r=Qt(),n=function(){function i(o,s,a,c){this._buffer=[],this._lastSend=0,this._isDisabled=o,this._getBatchSize=s,this._getBatchIntervalMs=a,this._sender=c}return i.prototype.setUseDiskRetryCaching=function(o,s,a){this._sender.setDiskRetryMode(o,s,a)},i.prototype.send=function(o){var s=this;if(!this._isDisabled()){if(!o){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(o),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){s._timeoutHandle=null,s.triggerSend(!1)},this._getBatchIntervalMs()))}},i.prototype.triggerSend=function(o,s){var a=this._buffer.length<1;a||(o?(this._sender.saveOnCrash(this._buffer),typeof s=="function"&&s("data saved on crash")):this._sender.send(this._buffer,s)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,a&&typeof s=="function"&&s("no data to send")},i}();e.exports=n}),Lee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.azureRoleEnvironmentTelemetryProcessor=void 0;function e(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}t.azureRoleEnvironmentTelemetryProcessor=e}),Fee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSamplingHashCode=t.samplingTelemetryProcessor=void 0;var e=Sr();function r(i,o){var s=i.sampleRate,a=!1;return s==null||s>=100||i.data&&e.TelemetryType.Metric===e.baseTypeToTelemetryType(i.data.baseType)?!0:(o.correlationContext&&o.correlationContext.operation?a=n(o.correlationContext.operation.id)<s:a=Math.random()*100<s,a)}t.samplingTelemetryProcessor=r;function n(i){var o=-2147483648,s=2147483647,a=5381;if(!i)return 0;for(;i.length<8;)i=i+i;for(var c=0;c<i.length;c++)a=((a<<5)+a|0)+i.charCodeAt(c)|0;return a=a<=o?s:Math.abs(a),a/s*100}t.getSamplingHashCode=n}),Mee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceMetricsTelemetryProcessor=void 0;var e=_b(),r=Sr();function n(i,o){switch(o&&o.addDocument(i),i.data.baseType){case r.TelemetryTypeString.Exception:e.countException();break;case r.TelemetryTypeString.Request:var s=i.data.baseData;e.countRequest(s.duration,s.success);break;case r.TelemetryTypeString.Dependency:var a=i.data.baseData;e.countDependency(a.duration,a.success);break}return!0}t.performanceMetricsTelemetryProcessor=n}),qee=O(t=>{"use strict";var e=t&&t.__assign||function(){return e=Object.assign||function(s){for(var a,c=1,l=arguments.length;c<l;c++){a=arguments[c];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(s[u]=a[u])}return s},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.preAggregatedMetricsTelemetryProcessor=void 0;var r=Sr(),n=fF(),i=Sr();function o(s,a){if(n.isEnabled())switch(s.data.baseType){case i.TelemetryTypeString.Exception:var c=s.data.baseData;c.properties=e(e({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole]};n.countException(l);break;case i.TelemetryTypeString.Trace:var u=s.data.baseData;u.properties=e(e({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var f={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[u.severity]};n.countTrace(f);break;case i.TelemetryTypeString.Request:var d=s.data.baseData;d.properties=e(e({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var p={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],requestSuccess:d.success,requestResultCode:d.responseCode};n.countRequest(d.duration,p);break;case i.TelemetryTypeString.Dependency:var h=s.data.baseData;h.properties=e(e({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:s.tags[a.keys.cloudRoleInstance],cloudRoleName:s.tags[a.keys.cloudRole],operationSynthetic:s.tags[a.keys.operationSyntheticSource],dependencySuccess:h.success,dependencyType:h.type,dependencyTarget:h.target,dependencyResultCode:h.resultCode};n.countDependency(h.duration,m);break}return!0}t.preAggregatedMetricsTelemetryProcessor=o}),$ee=O(t=>{"use strict";var e=t&&t.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[o]}})}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),r=t&&t.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lee(),t),r(Fee(),t),r(Mee(),t),r(qee(),t)}),jee=O((t,e)=>{"use strict";var r=t&&t.__awaiter||function(p,h,m,g){function v(w){return w instanceof m?w:new m(function(b){b(w)})}return new(m||(m=Promise))(function(w,b){function C(P){try{_(g.next(P))}catch(I){b(I)}}function S(P){try{_(g.throw(P))}catch(I){b(I)}}function _(P){P.done?w(P.value):v(P.value).then(C,S)}_((g=g.apply(p,h||[])).next())})},n=t&&t.__generator||function(p,h){var m={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},g,v,w,b;return b={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function C(_){return function(P){return S([_,P])}}function S(_){if(g)throw new TypeError("Generator is already executing.");for(;m;)try{if(g=1,v&&(w=_[0]&2?v.return:_[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,_[1])).done)return w;switch(v=0,w&&(_=[_[0]&2,w.value]),_[0]){case 0:case 1:w=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,v=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(w=m.trys,!(w=w.length>0&&w[w.length-1])&&(_[0]===6||_[0]===2)){m=0;continue}if(_[0]===3&&(!w||_[1]>w[0]&&_[1]<w[3])){m.label=_[1];break}if(_[0]===6&&m.label<w[1]){m.label=w[1],w=_;break}if(w&&m.label<w[2]){m.label=w[2],m.ops.push(_);break}w[2]&&m.ops.pop(),m.trys.pop();continue}_=h.call(p,m)}catch(P){_=[6,P],v=0}finally{g=w=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},i=require("fs"),o=require("os"),s=require("path"),a=require("zlib"),c=require("child_process"),l=Qt(),u=Wu(),f=hn(),d=function(){function p(h,m,g){if(this._redirectedHost=null,this._config=h,this._onSuccess=m,this._onError=g,this._enableDiskRetryMode=!1,this._resendInterval=p.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=p.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(o.tmpdir(),p.TEMPDIR_PREFIX+this._config.instrumentationKey),!p.OS_PROVIDES_FILE_PROTECTION)if(p.USE_ICACLS){try{p.OS_PROVIDES_FILE_PROTECTION=i.existsSync(p.ICACLS_PATH)}catch{}p.OS_PROVIDES_FILE_PROTECTION||l.warn(p.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else p.OS_PROVIDES_FILE_PROTECTION=!0}return p.prototype.setDiskRetryMode=function(h,m,g){var v=this;this._enableDiskRetryMode=p.OS_PROVIDES_FILE_PROTECTION&&h,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof g=="number"&&g>=0&&(this._maxBytesOnDisk=Math.floor(g)),h&&!p.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(p.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){v._fileCleanupTask()},p.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},p.prototype.send=function(h,m){return r(this,void 0,void 0,function(){var g,v,w,b,C=this;return n(this,function(S){return h&&(g=this._redirectedHost||this._config.endpointUrl,v={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},w="",h.forEach(function(_){var P=C._stringify(_);typeof P=="string"&&(w+=P+`
`)}),w.length>0&&(w=w.substring(0,w.length-1)),b=Buffer.from?Buffer.from(w):new Buffer(w),a.gzip(b,function(_,P){var I=P;_?(l.warn(_),I=b,v.headers["Content-Length"]=b.length.toString()):(v.headers["Content-Encoding"]="gzip",v.headers["Content-Length"]=P.length.toString()),l.info(p.TAG,v),v[u.disableCollectionRequestOption]=!0;var A=function(F){F.setEncoding("utf-8");var H="";F.on("data",function(X){H+=X}),F.on("end",function(){if(C._numConsecutiveFailures=0,C._enableDiskRetryMode){if(F.statusCode===200)C._resendTimer||(C._resendTimer=setTimeout(function(){C._resendTimer=null,C._sendFirstFileOnDisk()},C._resendInterval),C._resendTimer.unref());else if(C._isRetriable(F.statusCode))try{var X=JSON.parse(H),J=[];X.errors.forEach(function(te){C._isRetriable(te.statusCode)&&J.push(h[te.index])}),J.length>0&&C._storeToDisk(J)}catch{C._storeToDisk(h)}}if(F.statusCode===307||F.statusCode===308)if(C._numConsecutiveRedirects++,C._numConsecutiveRedirects<10){var Y=F.headers.location?F.headers.location.toString():null;Y&&(C._redirectedHost=Y,C.send(h,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else C._numConsecutiveRedirects=0,typeof m=="function"&&m(H),l.info(p.TAG,H),typeof C._onSuccess=="function"&&C._onSuccess(H)})},R=f.makeRequest(C._config,g,v,A);R.on("error",function(F){if(C._numConsecutiveFailures++,!C._enableDiskRetryMode||C._numConsecutiveFailures>0&&C._numConsecutiveFailures%p.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var H="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";C._enableDiskRetryMode&&(H="Ingestion endpoint could not be reached "+C._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(p.TAG,H,f.dumpObj(F))}else{var H="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(p.TAG,H,f.dumpObj(F))}C._onErrorHelper(F),typeof m=="function"&&(F&&m(f.dumpObj(F)),m("Error sending telemetry")),C._enableDiskRetryMode&&C._storeToDisk(h)}),R.write(I),R.end()})),[2]})})},p.prototype.saveOnCrash=function(h){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(h))},p.prototype._isRetriable=function(h){return h===206||h===408||h===429||h===439||h===500||h===503},p.prototype._runICACLS=function(h,m){var g=c.spawn(p.ICACLS_PATH,h,{windowsHide:!0});g.on("error",function(v){return m(v)}),g.on("close",function(v,w){return m(v===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+v+")"))})},p.prototype._runICACLSSync=function(h){if(c.spawnSync){var m=c.spawnSync(p.ICACLS_PATH,h,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},p.prototype._getACLIdentity=function(h){if(p.ACL_IDENTITY)return h(null,p.ACL_IDENTITY);var m=c.spawn(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),g="";m.stdout.on("data",function(v){return g+=v}),m.on("error",function(v){return h(v,null)}),m.on("close",function(v,w){return p.ACL_IDENTITY=g&&g.trim(),h(v===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+v+")"),p.ACL_IDENTITY)})},p.prototype._getACLIdentitySync=function(){if(p.ACL_IDENTITY)return p.ACL_IDENTITY;if(c.spawnSync){var h=c.spawnSync(p.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(h.error)throw h.error;if(h.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+h.status+")");return p.ACL_IDENTITY=h.stdout&&h.stdout.toString().trim(),p.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},p.prototype._getACLArguments=function(h,m){return[h,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},p.prototype._applyACLRules=function(h,m){var g=this;if(!p.USE_ICACLS)return m(null);if(p.ACLED_DIRECTORIES[h]===void 0)p.ACLED_DIRECTORIES[h]=!1,this._getACLIdentity(function(v,w){if(v)return p.ACLED_DIRECTORIES[h]=!1,m(v);g._runICACLS(g._getACLArguments(h,w),function(b){return p.ACLED_DIRECTORIES[h]=!b,m(b)})});else return m(p.ACLED_DIRECTORIES[h]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},p.prototype._applyACLRulesSync=function(h){if(p.USE_ICACLS){if(p.ACLED_DIRECTORIES[h]===void 0){this._runICACLSSync(this._getACLArguments(h,this._getACLIdentitySync())),p.ACLED_DIRECTORIES[h]=!0;return}else if(!p.ACLED_DIRECTORIES[h])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},p.prototype._confirmDirExists=function(h,m){var g=this;i.lstat(h,function(v,w){v&&v.code==="ENOENT"?i.mkdir(h,function(b){b&&b.code!=="EEXIST"?m(b):g._applyACLRules(h,m)}):!v&&w.isDirectory()?g._applyACLRules(h,m):m(v||new Error("Path existed but was not a directory"))})},p.prototype._getShallowDirectorySize=function(h,m){i.readdir(h,function(g,v){if(g)return m(g,-1);var w=null,b=0,C=0;if(v.length===0){m(null,0);return}for(var S=0;S<v.length;S++)i.stat(s.join(h,v[S]),function(_,P){C++,_?w=_:P.isFile()&&(b+=P.size),C===v.length&&(w?m(w,-1):m(w,b))})})},p.prototype._getShallowDirectorySizeSync=function(h){for(var m=i.readdirSync(h),g=0,v=0;v<m.length;v++)g+=i.statSync(s.join(h,m[v])).size;return g},p.prototype._storeToDisk=function(h){var m=this;l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(g){if(g){l.warn(p.TAG,"Error while checking/creating directory: "+(g&&g.message)),m._onErrorHelper(g);return}m._getShallowDirectorySize(m._tempDir,function(v,w){if(v||w<0){l.warn(p.TAG,"Error while checking directory size: "+(v&&v.message)),m._onErrorHelper(v);return}else if(w>m._maxBytesOnDisk){l.warn(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+w);return}var b=new Date().getTime()+".ai.json",C=s.join(m._tempDir,b);l.info(p.TAG,"saving data to disk at: "+C),i.writeFile(C,m._stringify(h),{mode:384},function(S){return m._onErrorHelper(S)})})})},p.prototype._storeToDiskSync=function(h){try{l.info(p.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(p.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var g=new Date().getTime()+".ai.json",v=s.join(this._tempDir,g);l.info(p.TAG,"saving data before crash to disk at: "+v),i.writeFileSync(v,h,{mode:384})}catch(w){l.warn(p.TAG,"Error while saving data to disk: "+(w&&w.message)),this._onErrorHelper(w)}},p.prototype._sendFirstFileOnDisk=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){if(g)h._onErrorHelper(g);else if(v=v.filter(function(C){return s.basename(C).indexOf(".ai.json")>-1}),v.length>0){var w=v[0],b=s.join(h._tempDir,w);i.readFile(b,function(C,S){C?h._onErrorHelper(C):i.unlink(b,function(_){if(_)h._onErrorHelper(_);else try{var P=JSON.parse(S.toString());h.send(P)}catch(I){l.warn("Failed to read persisted file",I)}})})}})})},p.prototype._onErrorHelper=function(h){typeof this._onError=="function"&&this._onError(h)},p.prototype._stringify=function(h){try{return JSON.stringify(h)}catch(m){l.warn("Failed to serialize payload",m,h)}},p.prototype._fileCleanupTask=function(){var h=this;i.exists(this._tempDir,function(m){m&&i.readdir(h._tempDir,function(g,v){g?h._onErrorHelper(g):(v=v.filter(function(w){return s.basename(w).indexOf(".ai.json")>-1}),v.length>0&&v.forEach(function(w){var b=new Date(parseInt(w.split(".ai.json")[0])),C=new Date(+new Date-p.FILE_RETEMPTION_PERIOD)>b;if(C){var S=s.join(h._tempDir,w);i.unlink(S,function(_){_&&h._onErrorHelper(_)})}}))})})},p.TAG="Sender",p.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",p.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",p.ACLED_DIRECTORIES={},p.ACL_IDENTITY=null,p.WAIT_BETWEEN_RESEND=60*1e3,p.MAX_BYTES_ON_DISK=50*1024*1024,p.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,p.CLEANUP_TIMEOUT=60*60*1e3,p.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,p.TEMPDIR_PREFIX="appInsights-node",p.OS_PROVIDES_FILE_PROTECTION=!1,p.USE_ICACLS=o.type()==="Windows_NT",p}();e.exports=d}),Uee=O((t,e)=>{"use strict";var r=Sr(),n=hn(),i=Rc(),o=function(){function a(){}return a.createEnvelope=function(c,l,u,f,d){var p=null;switch(l){case r.TelemetryType.Trace:p=a.createTraceData(c);break;case r.TelemetryType.Dependency:p=a.createDependencyData(c);break;case r.TelemetryType.Event:p=a.createEventData(c);break;case r.TelemetryType.Exception:p=a.createExceptionData(c);break;case r.TelemetryType.Request:p=a.createRequestData(c);break;case r.TelemetryType.Metric:p=a.createMetricData(c);break;case r.TelemetryType.Availability:p=a.createAvailabilityData(c);break;case r.TelemetryType.PageView:p=a.createPageViewData(c);break}if(u&&r.domainSupportsProperties(p.baseData)){if(p&&p.baseData)if(!p.baseData.properties)p.baseData.properties=u;else for(var h in u)p.baseData.properties[h]||(p.baseData.properties[h]=u[h]);p.baseData.properties=n.validateStringMap(p.baseData.properties)}var m=d&&d.instrumentationKey||"",g=new r.Envelope;return g.data=p,g.iKey=m,g.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+p.baseType.substr(0,p.baseType.length-4),g.tags=this.getTags(f,c.tagOverrides),g.time=new Date().toISOString(),g.ver=1,g.sampleRate=d?d.samplingPercentage:100,l===r.TelemetryType.Metric&&(g.sampleRate=100),g},a.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),u.baseData=l,u},a.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),u.baseData=l,u},a.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),u.baseData=l,u},a.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var u=c.exception.stack,f=new r.ExceptionDetails;f.message=c.exception.message,f.typeName=c.exception.name,f.parsedStack=this.parseStack(u),f.hasFullStack=n.isArray(f.parsedStack)&&f.parsedStack.length>0,l.exceptions.push(f);var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),d.baseData=l,d},a.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),u.baseData=l,u},a.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var u=new r.DataPoint;u.count=isNaN(c.count)?1:c.count,u.kind=r.DataPointType.Aggregation,u.max=isNaN(c.max)?c.value:c.max,u.min=isNaN(c.min)?c.value:c.min,u.name=c.name,u.stdDev=isNaN(c.stdDev)?0:c.stdDev,u.value=c.value,l.metrics.push(u),l.properties=c.properties;var f=new r.Data;return f.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),f.baseData=l,f},a.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),u.baseData=l,u},a.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),u.baseData=l,u},a.getTags=function(c,l){var u=i.CorrelationContextManager.getCurrentContext(),f={};if(c&&c.tags)for(var d in c.tags)f[d]=c.tags[d];if(l)for(var d in l)f[d]=l[d];return u&&(f[c.keys.operationId]=f[c.keys.operationId]||u.operation.id,f[c.keys.operationName]=f[c.keys.operationName]||u.operation.name,f[c.keys.operationParentId]=f[c.keys.operationParentId]||u.operation.parentId),f},a.parseStack=function(c){var l=void 0;if(typeof c=="string"){var u=c.split(`
`);l=[];for(var f=0,d=0,p=0;p<=u.length;p++){var h=u[p];if(s.regex.test(h)){var m=new s(u[p],f++);d+=m.sizeInBytes,l.push(m)}}var g=32*1024;if(d>g)for(var v=0,w=l.length-1,b=0,C=v,S=w;v<w;){var _=l[v].sizeInBytes,P=l[w].sizeInBytes;if(b+=_+P,b>g){var I=S-C+1;l.splice(C,I);break}C=v,S=w,v++,w--}}return l},a}(),s=function(){function a(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var u=c.match(a.regex);u&&u.length>=5&&(this.method=n.trim(u[2])||this.method,this.fileName=n.trim(u[4])||"<no_filename>",this.line=parseInt(u[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=a.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return a.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,a.baseSize=58,a}();e.exports=o}),Bee=O((t,e)=>{"use strict";var r=require("url"),n=pF(),i=lm(),o=Sr(),s=Nee(),a=$ee(),c=Rc(),l=jee(),u=hn(),f=Qt(),d=Uee(),p=function(){function h(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var g=new n(m);this.config=g,this.context=new i,this.commonProperties={};var v=new l(this.config);this.channel=new s(function(){return g.disableAppInsights},function(){return g.maxBatchSize},function(){return g.maxBatchIntervalMs},v)}return h.prototype.trackAvailability=function(m){this.track(m,o.TelemetryType.Availability)},h.prototype.trackPageView=function(m){this.track(m,o.TelemetryType.PageView)},h.prototype.trackTrace=function(m){this.track(m,o.TelemetryType.Trace)},h.prototype.trackMetric=function(m){this.track(m,o.TelemetryType.Metric)},h.prototype.trackException=function(m){m&&m.exception&&!u.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,o.TelemetryType.Exception)},h.prototype.trackEvent=function(m){this.track(m,o.TelemetryType.Event)},h.prototype.trackRequest=function(m){this.track(m,o.TelemetryType.Request)},h.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,o.TelemetryType.Dependency)},h.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},h.prototype.track=function(m,g){if(m&&o.telemetryTypeToBaseType(g)){var v=d.createEnvelope(m,g,this.commonProperties,this.context,this.config);m.time&&(v.time=m.time.toISOString()),this._enableAzureProperties&&a.azureRoleEnvironmentTelemetryProcessor(v,this.context);var w=this.runTelemetryProcessors(v,m.contextObjects);w=w&&a.samplingTelemetryProcessor(v,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),a.preAggregatedMetricsTelemetryProcessor(v,this.context),w&&(a.performanceMetricsTelemetryProcessor(v,this.quickPulseClient),this.channel.send(v))}else f.warn("track() requires telemetry object and telemetryType to be specified.")},h.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},h.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},h.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},h.prototype.runTelemetryProcessors=function(m,g){var v=!0,w=this._telemetryProcessors.length;if(w===0)return v;g=g||{},g.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var b=0;b<w;++b)try{var C=this._telemetryProcessors[b];if(C&&C.apply(null,[m,g])===!1){v=!1;break}}catch(S){v=!0,f.warn("One of telemetry processors failed, telemetry item will be sent.",S,m)}return v&&(m&&m.tags&&(m.tags=u.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=u.validateStringMap(m.data.baseData.properties))),v},h}();e.exports=p}),Hee=O((t,e)=>{"use strict";var r=t&&t.__extends||function(){var c=function(l,u){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(f[p]=d[p])},c(l,u)};return function(l,u){c(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),n=Bee(),i=dF(),o=Wu(),s=Qt(),a=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(u){u&&u.request&&u.response&&u.duration?i.trackRequestSync(this,u):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(u){(u.duration||u.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),u&&u.request&&u.response?i.trackRequest(this,u):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(u){u&&u.request?o.trackRequest(this,u):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);e.exports=a}),Vee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),Wee=O(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.Configuration=t.wrapWithCorrelationContext=t.startOperation=t.getCorrelationContext=t.start=t.setup=t.liveMetricsClient=t.defaultClient=t.DistributedTracingModes=void 0;var e=Rc(),r=gee(),n=vee(),i=_b(),o=fF(),s=kee(),a=Wu(),c=dF(),l=Dc(),u=Qt(),f=Dee(),d=Oee();t.TelemetryClient=Hee(),t.Contracts=Sr(),t.azureFunctionsTypes=Vee();var p;(function(ye){ye[ye.AI=0]="AI",ye[ye.AI_AND_W3C=1]="AI_AND_W3C"})(p=t.DistributedTracingModes||(t.DistributedTracingModes={}));var h=!0,m=!1,g=!0,v=!0,w=!0,b=!1,C=!0,S=!0,_=!0,P=!0,I,A=!1,R=!0,F,H=void 0,X=void 0,J,Y,te,M,L,q,V,z,oe=!1,re;function be(ye){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(ye),J=new r(t.defaultClient),Y=new n(t.defaultClient),te=new i(t.defaultClient),M=new o(t.defaultClient),L=new s(t.defaultClient),V=new c(t.defaultClient),z=new a(t.defaultClient),q||(q=new d.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(_,H,X),yt}t.setup=be;function Pe(){return t.defaultClient?(oe=!0,J.enable(h,m),Y.enable(g),te.enable(v),M.enable(w),L.enable(b,t.defaultClient.config),q.enable(R,F),V.useAutoCorrelation(P,I),V.enable(C),z.enable(S),t.liveMetricsClient&&A&&t.liveMetricsClient.enable(A)):u.warn("Start cannot be called before setup"),yt}t.start=Pe;function xe(){return P?e.CorrelationContextManager.getCurrentContext():null}t.getCorrelationContext=xe;function Te(ye,pe){return e.CorrelationContextManager.startOperation(ye,pe)}t.startOperation=Te;function he(ye,pe){return e.CorrelationContextManager.wrapCallback(ye,pe)}t.wrapWithCorrelationContext=he;var yt=function(){function ye(){}return ye.setDistributedTracingMode=function(pe){return l.w3cEnabled=pe===p.AI_AND_W3C,ye},ye.setAutoCollectConsole=function(pe,Ce){return Ce===void 0&&(Ce=!1),h=pe,m=Ce,oe&&J.enable(pe,Ce),ye},ye.setAutoCollectExceptions=function(pe){return g=pe,oe&&Y.enable(pe),ye},ye.setAutoCollectPerformance=function(pe,Ce){Ce===void 0&&(Ce=!0),v=pe;var je=d.AutoCollectNativePerformance.parseEnabled(Ce);return R=je.isEnabled,F=je.disabledMetrics,oe&&(te.enable(pe),q.enable(je.isEnabled,je.disabledMetrics)),ye},ye.setAutoCollectPreAggregatedMetrics=function(pe){return w=pe,oe&&M.enable(pe),ye},ye.setAutoCollectHeartbeat=function(pe){return b=pe,oe&&L.enable(pe,t.defaultClient.config),ye},ye.setAutoCollectRequests=function(pe){return C=pe,oe&&V.enable(pe),ye},ye.setAutoCollectDependencies=function(pe){return S=pe,oe&&z.enable(pe),ye},ye.setAutoDependencyCorrelation=function(pe,Ce){return P=pe,I=Ce,oe&&V.useAutoCorrelation(pe,Ce),ye},ye.setUseDiskRetryCaching=function(pe,Ce,je){return _=pe,H=Ce,X=je,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(pe,Ce,je),ye},ye.setInternalLogging=function(pe,Ce){return pe===void 0&&(pe=!1),Ce===void 0&&(Ce=!0),u.enableDebug=pe,u.disableWarnings=!Ce,ye},ye.setSendLiveMetrics=function(pe){return pe===void 0&&(pe=!1),t.defaultClient?(!t.liveMetricsClient&&pe?(t.liveMetricsClient=new f(t.defaultClient.config,null),re=new i(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(re),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(pe),A=pe,ye):(u.warn("Live metrics client cannot be setup without the default client"),ye)},ye.start=Pe,ye}();t.Configuration=yt;function It(){l.w3cEnabled=!0,t.defaultClient=null,oe=!1,J&&J.dispose(),Y&&Y.dispose(),te&&te.dispose(),M&&M.dispose(),L&&L.dispose(),q&&q.dispose(),V&&V.dispose(),z&&z.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),A=!1,t.liveMetricsClient=void 0)}t.dispose=It});_Q(hF,{default:()=>Yee});var Sb=ju(require("os")),Oc=ju(require("vscode")),mt=ju(require("vscode")),xb=ju(require("vscode")),Nn;(function(t){t.ON="on",t.OFF="off"})(Nn||(Nn={}));function um(){let t="telemetry",e="enableTelemetry";return xb.env.isTelemetryEnabled!==void 0?xb.env.isTelemetryEnabled?Nn.ON:Nn.OFF:xb.workspace.getConfiguration(t).get(e)?Nn.ON:Nn.OFF}var Gee=class{constructor(t,e,r,n,i){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),mt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(mt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(mt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(mt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=um();this.userOptIn=t===Nn.ON,this.errorOptIn=t===Nn.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{t.indexOf(`${r}+`)===0&&(e=r)}),e}get extension(){return this._extension===void 0&&(this._extension=mt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let r={};for(let n in t)r[n]=e(n,t[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(mt.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===mt.ExtensionKind.Workspace||mt.env.uiKind===mt.UIKind.Web):!0}getCommonProperties(){let t=Object.create(null);if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,mt&&mt.env){switch(t["common.vscodemachineid"]=mt.env.machineId,t["common.vscodesessionid"]=mt.env.sessionId,t["common.vscodeversion"]=mt.version,t["common.isnewappinstall"]=mt.env.isNewAppInstall?mt.env.isNewAppInstall.toString():"false",t["common.product"]=mt.env.appHost,mt.env.uiKind){case mt.UIKind.Web:t["common.uikind"]="web";break;case mt.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(mt.env.remoteName)}return t}anonymizeFilePaths(t,e){let r;if(t==null)return"";let n=[];mt.env.appRoot!==""&&n.push(new RegExp(mt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let l of n)for(;(r=l.exec(t))&&r;)o.push([r.index,l.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(i="";(r=a.exec(t))&&r;)r[0]&&!s.test(r[0])&&o.every(([l,u])=>r.index<l||r.index>=u)&&(i+=t.substring(c,r.index)+"<REDACTED: user-file-path>",c=a.lastIndex);c<t.length&&(i+=t.substr(c))}for(let o of n)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e=Object.create(null);for(let r of Object.keys(t)){let n=t[r];if(!n)continue;let i=/@[a-zA-Z0-9-.]+/;/(key|token|sig|signature|password|passwd|pwd)[="':\s]/.test(n.toLowerCase())?e[r]="<REDACTED: secret>":i.test(n)?e[r]="<REDACTED: email>":e[r]=n}return e}sendTelemetryEvent(t,e,r){if(this.userOptIn&&t!==""){e=Lo(Lo({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(t,e,r){this.userOptIn&&t!==""&&(e=Lo(Lo({},e),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:e,measurements:r}))}sendTelemetryErrorEvent(t,e,r,n){if(this.errorOptIn&&t!==""){e=Lo(Lo({},e),this.getCommonProperties());let i=this.cloneAndChange(e,(o,s)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(s,this.firstParty):n===void 0||n.indexOf(o)!==-1?"REDACTED":this.anonymizeFilePaths(s,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${t}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:r})}}sendTelemetryException(t,e,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&t){e=Lo(Lo({},e),this.getCommonProperties());let n=this.cloneAndChange(e,(i,o)=>this.anonymizeFilePaths(o,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),this.telemetryAppender.logException(t,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},zee=class{constructor(t,e){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t,um()!==Nn.OFF&&this.instantiateAppender()}logEvent(t,e){if(!this._telemetryClient){!this._isInstantiated&&um()===Nn.ON&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){!this._isInstantiated&&um()!==Nn.OFF&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._isInstantiated=!0,this._flushQueues()}).catch(t=>{console.error(t)})}},Kee=async t=>{let e;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then(()=>ju(Wee()));r.defaultClient?(e=new r.TelemetryClient(t),e.channel.setUseDiskRetryCaching(!0)):(r.setup(t).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),e=r.defaultClient),Oc&&Oc.env&&(e.context.tags[e.context.keys.userId]=Oc.env.machineId,e.context.tags[e.context.keys.sessionId]=Oc.env.sessionId,e.context.tags[e.context.keys.cloudRole]=Oc.env.appName,e.context.tags[e.context.keys.cloudRoleInstance]=Oc.env.appName),t&&t.indexOf("AIF-")===0&&(e.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(r)}return{logEvent:(r,n)=>{e==null||e.trackEvent({name:r,properties:n==null?void 0:n.properties,measurements:n==null?void 0:n.measurements})},logException:(r,n)=>{e==null||e.trackException({exception:r,properties:n==null?void 0:n.properties,measurements:n==null?void 0:n.measurements})},flush:async()=>{e==null||e.flush()}}},Yee=class extends Gee{constructor(t,e,r,n){let i=new zee(r,Kee);r&&r.indexOf("AIF-")===0&&(n=!0);super(t,e,i,{release:Sb.release(),platform:Sb.platform(),architecture:Sb.arch()},n)}}});var Pb=k(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var fm=require("vscode"),Gu=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case $i.ApplicationVersion:return Gu.trimVersionSuffix(fm.version);case $i.Build:return fm.env.appName;case $i.ClientId:return fm.env.machineId;case $i.ExtensionName:return this.extensionName;case $i.ExtensionVersion:return Gu.trimVersionSuffix(this.extensionVersion);case $i.Language:return fm.env.language;case $i.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values($i);for(let n of r)e.set(n,this.getFilterValue(n));return e}};oa.VSCodeFilterProvider=Gu;var $i;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})($i=oa.Filters||(oa.Filters={}));var Jee;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(Jee=oa.TargetPopulation||(oa.TargetPopulation={}))});var vF=k(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});var gF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};kb.BaseFeatureProvider=gF});var wF=k(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0});var Qee=vF(),yF=class extends Qee.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};Ib.FilteredFeatureProvider=yF});var bF=k(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0});var Xee=wF(),CF=class extends Xee.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};Ab.TasApiFeatureProvider=CF});var Tb=k((Gbe,EF)=>{"use strict";EF.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var mr=k((zbe,xF)=>{"use strict";var Zee=Tb(),sa=Object.prototype.toString;function Db(t){return sa.call(t)==="[object Array]"}function Rb(t){return typeof t=="undefined"}function ete(t){return t!==null&&!Rb(t)&&t.constructor!==null&&!Rb(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function tte(t){return sa.call(t)==="[object ArrayBuffer]"}function rte(t){return typeof FormData!="undefined"&&t instanceof FormData}function nte(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function ite(t){return typeof t=="string"}function ote(t){return typeof t=="number"}function _F(t){return t!==null&&typeof t=="object"}function dm(t){if(sa.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ste(t){return sa.call(t)==="[object Date]"}function ate(t){return sa.call(t)==="[object File]"}function cte(t){return sa.call(t)==="[object Blob]"}function SF(t){return sa.call(t)==="[object Function]"}function lte(t){return _F(t)&&SF(t.pipe)}function ute(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function fte(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function dte(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Ob(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Db(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Nb(){var t={};function e(i,o){dm(t[o])&&dm(i)?t[o]=Nb(t[o],i):dm(i)?t[o]=Nb({},i):Db(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)Ob(arguments[r],e);return t}function pte(t,e,r){return Ob(e,function(i,o){r&&typeof i=="function"?t[o]=Zee(i,r):t[o]=i}),t}function hte(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}xF.exports={isArray:Db,isArrayBuffer:tte,isBuffer:ete,isFormData:rte,isArrayBufferView:nte,isString:ite,isNumber:ote,isObject:_F,isPlainObject:dm,isUndefined:Rb,isDate:ste,isFile:ate,isBlob:cte,isFunction:SF,isStream:lte,isURLSearchParams:ute,isStandardBrowserEnv:dte,forEach:Ob,merge:Nb,extend:pte,trim:fte,stripBOM:hte}});var pm=k((Kbe,kF)=>{"use strict";var Nc=mr();function PF(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}kF.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Nc.isURLSearchParams(r))i=r.toString();else{var o=[];Nc.forEach(r,function(c,l){c===null||typeof c=="undefined"||(Nc.isArray(c)?l=l+"[]":c=[c],Nc.forEach(c,function(f){Nc.isDate(f)?f=f.toISOString():Nc.isObject(f)&&(f=JSON.stringify(f)),o.push(PF(l)+"="+PF(f))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var AF=k((Ybe,IF)=>{"use strict";var mte=mr();function hm(){this.handlers=[]}hm.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};hm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};hm.prototype.forEach=function(e){mte.forEach(this.handlers,function(n){n!==null&&e(n)})};IF.exports=hm});var DF=k((Jbe,TF)=>{"use strict";var gte=mr();TF.exports=function(e,r){gte.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var mm=k((Qbe,RF)=>{"use strict";RF.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}});var gm=k((Xbe,OF)=>{"use strict";var vte=mm();OF.exports=function(e,r,n,i,o){var s=new Error(e);return vte(s,r,n,i,o)}});var Lb=k((Zbe,NF)=>{"use strict";var yte=gm();NF.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(yte("Request failed with status code "+n.status,n.config,null,n.request,n))}});var FF=k((eEe,LF)=>{"use strict";var vm=mr();LF.exports=vm.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),vm.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),vm.isString(o)&&c.push("path="+o),vm.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var qF=k((tEe,MF)=>{"use strict";MF.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var jF=k((rEe,$F)=>{"use strict";$F.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var Fb=k((nEe,UF)=>{"use strict";var wte=qF(),Cte=jF();UF.exports=function(e,r){return e&&!wte(r)?Cte(e,r):r}});var HF=k((iEe,BF)=>{"use strict";var Mb=mr(),bte=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];BF.exports=function(e){var r={},n,i,o;return e&&Mb.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=Mb.trim(a.substr(0,o)).toLowerCase(),i=Mb.trim(a.substr(o+1)),n){if(r[n]&&bte.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var GF=k((oEe,WF)=>{"use strict";var VF=mr();WF.exports=VF.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=VF.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var Lc=k((sEe,zF)=>{"use strict";function qb(t){this.message=t}qb.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};qb.prototype.__CANCEL__=!0;zF.exports=qb});var YF=k((aEe,KF)=>{"use strict";var ym=mr(),Ete=Lb(),_te=FF(),Ste=pm(),xte=Fb(),Pte=HF(),kte=GF(),$b=gm(),Ite=Fc(),Ate=Lc();KF.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,a=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}ym.isFormData(o)&&delete s["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(f+":"+d)}var p=xte(e.baseURL,e.url);u.open(e.method.toUpperCase(),Ste(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function h(){if(!!u){var g="getAllResponseHeaders"in u?Pte(u.getAllResponseHeaders()):null,v=!a||a==="text"||a==="json"?u.responseText:u.response,w={data:v,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};Ete(function(C){n(C),l()},function(C){i(C),l()},w),u=null}}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){!u||(i($b("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){i($b("Network Error",e,null,u)),u=null},u.ontimeout=function(){var v="timeout of "+e.timeout+"ms exceeded",w=e.transitional||Ite.transitional;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i($b(v,e,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},ym.isStandardBrowserEnv()){var m=(e.withCredentials||kte(p))&&e.xsrfCookieName?_te.read(e.xsrfCookieName):void 0;m&&(s[e.xsrfHeaderName]=m)}"setRequestHeader"in u&&ym.forEach(s,function(v,w){typeof o=="undefined"&&w.toLowerCase()==="content-type"?delete s[w]:u.setRequestHeader(w,v)}),ym.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(g){!u||(i(!g||g&&g.type?new Ate("canceled"):g),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),o||(o=null),u.send(o)})}});var wm=k((cEe,JF)=>{JF.exports={version:"0.22.0"}});var rM=k((lEe,tM)=>{"use strict";var zu=mr(),QF=Lb(),Tte=Fb(),Dte=pm(),Rte=require("http"),Ote=require("https"),Nte=Ja().http,Lte=Ja().https,XF=require("url"),Fte=require("zlib"),Mte=wm().version,Cm=gm(),jb=mm(),qte=Fc(),$te=Lc(),ZF=/https:?/;function eM(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,eM(o,e,o.href)}}tM.exports=function(e){return new Promise(function(n,i){var o;function s(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}var a=function(z){s(),n(z)},c=function(z){s(),i(z)},l=e.data,u=e.headers,f={};if(Object.keys(u).forEach(function(z){f[z.toLowerCase()]=z}),"user-agent"in f?u[f["user-agent"]]||delete u[f["user-agent"]]:u["User-Agent"]="axios/"+Mte,l&&!zu.isStream(l)){if(!Buffer.isBuffer(l))if(zu.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(zu.isString(l))l=Buffer.from(l,"utf-8");else return c(Cm("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));f["content-length"]||(u["Content-Length"]=l.length)}var d=void 0;if(e.auth){var p=e.auth.username||"",h=e.auth.password||"";d=p+":"+h}var m=Tte(e.baseURL,e.url),g=XF.parse(m),v=g.protocol||"http:";if(!d&&g.auth){var w=g.auth.split(":"),b=w[0]||"",C=w[1]||"";d=b+":"+C}d&&f.authorization&&delete u[f.authorization];var S=ZF.test(v),_=S?e.httpsAgent:e.httpAgent,P={path:Dte(g.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:u,agent:_,agents:{http:e.httpAgent,https:e.httpsAgent},auth:d};e.socketPath?P.socketPath=e.socketPath:(P.hostname=g.hostname,P.port=g.port);var I=e.proxy;if(!I&&I!==!1){var A=v.slice(0,-1)+"_proxy",R=process.env[A]||process.env[A.toUpperCase()];if(R){var F=XF.parse(R),H=process.env.no_proxy||process.env.NO_PROXY,X=!0;if(H){var J=H.split(",").map(function(z){return z.trim()});X=!J.some(function(z){return z?z==="*"||z[0]==="."&&g.hostname.substr(g.hostname.length-z.length)===z?!0:g.hostname===z:!1})}if(X&&(I={host:F.hostname,port:F.port,protocol:F.protocol},F.auth)){var Y=F.auth.split(":");I.auth={username:Y[0],password:Y[1]}}}}I&&(P.headers.host=g.hostname+(g.port?":"+g.port:""),eM(P,I,v+"//"+g.hostname+(g.port?":"+g.port:"")+P.path));var te,M=S&&(I?ZF.test(I.protocol):!0);e.transport?te=e.transport:e.maxRedirects===0?te=M?Ote:Rte:(e.maxRedirects&&(P.maxRedirects=e.maxRedirects),te=M?Lte:Nte),e.maxBodyLength>-1&&(P.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(P.insecureHTTPParser=e.insecureHTTPParser);var L=te.request(P,function(z){if(!L.aborted){var oe=z,re=z.req||L;if(z.statusCode!==204&&re.method!=="HEAD"&&e.decompress!==!1)switch(z.headers["content-encoding"]){case"gzip":case"compress":case"deflate":oe=oe.pipe(Fte.createUnzip()),delete z.headers["content-encoding"];break}var be={status:z.statusCode,statusText:z.statusMessage,headers:z.headers,config:e,request:re};if(e.responseType==="stream")be.data=oe,QF(a,c,be);else{var Pe=[],xe=0;oe.on("data",function(he){Pe.push(he),xe+=he.length,e.maxContentLength>-1&&xe>e.maxContentLength&&(oe.destroy(),c(Cm("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,re)))}),oe.on("error",function(he){L.aborted||c(jb(he,e,null,re))}),oe.on("end",function(){var he=Buffer.concat(Pe);e.responseType!=="arraybuffer"&&(he=he.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(he=zu.stripBOM(he))),be.data=he,QF(a,c,be)})}}});if(L.on("error",function(z){L.aborted&&z.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(jb(z,e,null,L))}),e.timeout){var q=parseInt(e.timeout,10);if(isNaN(q)){c(Cm("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",L));return}L.setTimeout(q,function(){L.abort();var z=e.transitional||qte.transitional;c(Cm("timeout of "+q+"ms exceeded",e,z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",L))})}(e.cancelToken||e.signal)&&(o=function(V){L.aborted||(L.abort(),c(!V||V&&V.type?new $te("canceled"):V))},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),zu.isStream(l)?l.on("error",function(z){c(jb(z,e,null,L))}).pipe(L):L.end(l)})}});var Fc=k((uEe,oM)=>{"use strict";var Xt=mr(),nM=DF(),jte=mm(),Ute={"Content-Type":"application/x-www-form-urlencoded"};function iM(t,e){!Xt.isUndefined(t)&&Xt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Bte(){var t;return typeof XMLHttpRequest!="undefined"?t=YF():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=rM()),t}function Hte(t,e,r){if(Xt.isString(t))try{return(e||JSON.parse)(t),Xt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var bm={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Bte(),transformRequest:[function(e,r){return nM(r,"Accept"),nM(r,"Content-Type"),Xt.isFormData(e)||Xt.isArrayBuffer(e)||Xt.isBuffer(e)||Xt.isStream(e)||Xt.isFile(e)||Xt.isBlob(e)?e:Xt.isArrayBufferView(e)?e.buffer:Xt.isURLSearchParams(e)?(iM(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Xt.isObject(e)||r&&r["Content-Type"]==="application/json"?(iM(r,"application/json"),Hte(e)):e}],transformResponse:[function(e){var r=this.transitional||bm.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Xt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?jte(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Xt.forEach(["delete","get","head"],function(e){bm.headers[e]={}});Xt.forEach(["post","put","patch"],function(e){bm.headers[e]=Xt.merge(Ute)});oM.exports=bm});var aM=k((fEe,sM)=>{"use strict";var Vte=mr(),Wte=Fc();sM.exports=function(e,r,n){var i=this||Wte;return Vte.forEach(n,function(s){e=s.call(i,e,r)}),e}});var Ub=k((dEe,cM)=>{"use strict";cM.exports=function(e){return!!(e&&e.__CANCEL__)}});var fM=k((pEe,uM)=>{"use strict";var lM=mr(),Bb=aM(),Gte=Ub(),zte=Fc(),Kte=Lc();function Hb(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Kte("canceled")}uM.exports=function(e){Hb(e),e.headers=e.headers||{},e.data=Bb.call(e,e.data,e.headers,e.transformRequest),e.headers=lM.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),lM.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||zte.adapter;return r(e).then(function(i){return Hb(e),i.data=Bb.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Gte(i)||(Hb(e),i&&i.response&&(i.response.data=Bb.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Vb=k((hEe,dM)=>{"use strict";var Br=mr();dM.exports=function(e,r){r=r||{};var n={};function i(u,f){return Br.isPlainObject(u)&&Br.isPlainObject(f)?Br.merge(u,f):Br.isPlainObject(f)?Br.merge({},f):Br.isArray(f)?f.slice():f}function o(u){if(Br.isUndefined(r[u])){if(!Br.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function s(u){if(!Br.isUndefined(r[u]))return i(void 0,r[u])}function a(u){if(Br.isUndefined(r[u])){if(!Br.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Br.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=l[f]||o,p=d(f);Br.isUndefined(p)&&d!==c||(n[f]=p)}),n}});var mM=k((mEe,hM)=>{"use strict";var Yte=wm().version,Wb={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Wb[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var pM={};Wb.transitional=function(e,r,n){function i(o,s){return"[Axios v"+Yte+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,a){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!pM[s]&&(pM[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(o,s,a):!0}};function Jte(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],c=a===void 0||s(a,o,t);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+o)}}hM.exports={assertOptions:Jte,validators:Wb}});var bM=k((gEe,CM)=>{"use strict";var gM=mr(),Qte=pm(),vM=AF(),yM=fM(),Em=Vb(),wM=mM(),Mc=wM.validators;function Ku(t){this.defaults=t,this.interceptors={request:new vM,response:new vM}}Ku.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Em(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&wM.assertOptions(r,{silentJSONParsing:Mc.transitional(Mc.boolean),forcedJSONParsing:Mc.transitional(Mc.boolean),clarifyTimeoutError:Mc.transitional(Mc.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(e)===!1||(i=i&&d.synchronous,n.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var s;if(!i){var a=[yM,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(o),s=Promise.resolve(e);a.length;)s=s.then(a.shift(),a.shift());return s}for(var c=e;n.length;){var l=n.shift(),u=n.shift();try{c=l(c)}catch(f){u(f);break}}try{s=yM(c)}catch(f){return Promise.reject(f)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Ku.prototype.getUri=function(e){return e=Em(this.defaults,e),Qte(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};gM.forEach(["delete","get","head","options"],function(e){Ku.prototype[e]=function(r,n){return this.request(Em(n||{},{method:e,url:r,data:(n||{}).data}))}});gM.forEach(["post","put","patch"],function(e){Ku.prototype[e]=function(r,n,i){return this.request(Em(i||{},{method:e,url:r,data:n}))}});CM.exports=Ku});var _M=k((vEe,EM)=>{"use strict";var Xte=Lc();function qc(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,o=r._listeners.length;for(i=0;i<o;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i){r.reason||(r.reason=new Xte(i),e(r.reason))})}qc.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};qc.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};qc.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};qc.source=function(){var e,r=new qc(function(i){e=i});return{token:r,cancel:e}};EM.exports=qc});var xM=k((yEe,SM)=>{"use strict";SM.exports=function(e){return function(n){return e.apply(null,n)}}});var kM=k((wEe,PM)=>{"use strict";PM.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var TM=k((CEe,Gb)=>{"use strict";var IM=mr(),Zte=Tb(),_m=bM(),ere=Vb(),tre=Fc();function AM(t){var e=new _m(t),r=Zte(_m.prototype.request,e);return IM.extend(r,_m.prototype,e),IM.extend(r,e),r.create=function(i){return AM(ere(t,i))},r}var li=AM(tre);li.Axios=_m;li.Cancel=Lc();li.CancelToken=_M();li.isCancel=Ub();li.VERSION=wm().version;li.all=function(e){return Promise.all(e)};li.spread=xM();li.isAxiosError=kM();Gb.exports=li;Gb.exports.default=li});var RM=k((bEe,DM)=>{DM.exports=TM()});var NM=k(zb=>{"use strict";Object.defineProperty(zb,"__esModule",{value:!0});var rre=RM(),OM=class{constructor(e){this.endpoint=e}get(e){return rre.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};zb.AxiosHttpClient=OM});var FM=k(Kb=>{"use strict";Object.defineProperty(Kb,"__esModule",{value:!0});var LM=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};Kb.MemoryKeyValueStorage=LM});var qM=k(Yb=>{"use strict";Object.defineProperty(Yb,"__esModule",{value:!0});var nre=FM(),MM=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new nre.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};Yb.ExperimentationServiceBase=MM});var jM=k(Jb=>{"use strict";Object.defineProperty(Jb,"__esModule",{value:!0});var $M=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};Jb.PollingService=$M});var BM=k(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});var ire=qM(),ore=jM(),UM=class extends ire.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,c){super(e,i,o,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new ore.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};Qb.ExperimentationServiceAutoPolling=UM});var HM=k(Zb=>{"use strict";Object.defineProperty(Zb,"__esModule",{value:!0});var sre=bF(),are=NM(),cre=BM(),Xb=class extends cre.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new sre.TasApiFeatureProvider(new are.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};Zb.ExperimentationService=Xb;Xb.REFRESH_RATE_IN_MINUTES=30});var VM=k(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var lre=HM();eE.ExperimentationService=lre.ExperimentationService});var GM=k(tE=>{"use strict";Object.defineProperty(tE,"__esModule",{value:!0});var WM=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};tE.MementoKeyValueStorage=WM});var KM=k(rE=>{"use strict";Object.defineProperty(rE,"__esModule",{value:!0});var zM=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};rE.default=zM});var JM=k(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});var ure=Pb(),fre=VM(),nE=require("vscode"),dre=GM(),pre=KM(),hre="https://default.exp-tas.com/vscode/ab",mre="query-expfeature",gre="VSCode.ABExp.Features",vre="abexp.assignmentcontext",yre="VSCode.ABExp.FeatureData",wre=1e3*60*30;function YM(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=nE.workspace.getConfiguration("telemetry");if(!(nE.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):nE.env.isTelemetryEnabled))return new pre.default;let l=[new ure.VSCodeFilterProvider(t,e,r),...o],u=new dre.MementoKeyValueStorage(i);return new fre.ExperimentationService({filterProviders:l,telemetry:n,storageKey:yre,keyValueStorage:u,featuresTelemetryPropertyName:gre,assignmentContextTelemetryPropertyName:vre,telemetryEventName:mre,endpoint:hre,refetchInterval:wre})}Sm.getExperimentationService=YM;async function Cre(t,e,r,n,i,...o){let s=YM(t,e,r,n,i,...o);return await s.initializePromise,s}Sm.getExperimentationServiceAsync=Cre});var XM=k(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var QM=JM();Yu.getExperimentationService=QM.getExperimentationService;Yu.getExperimentationServiceAsync=QM.getExperimentationServiceAsync;var bre=Pb();Yu.TargetPopulation=bre.TargetPopulation});var Ke=k(Ut=>{"use strict";var vE=Symbol.for("yaml.alias"),_q=Symbol.for("yaml.document"),Nm=Symbol.for("yaml.map"),Sq=Symbol.for("yaml.pair"),yE=Symbol.for("yaml.scalar"),Lm=Symbol.for("yaml.seq"),pi=Symbol.for("yaml.node.type"),Gre=t=>!!t&&typeof t=="object"&&t[pi]===vE,zre=t=>!!t&&typeof t=="object"&&t[pi]===_q,Kre=t=>!!t&&typeof t=="object"&&t[pi]===Nm,Yre=t=>!!t&&typeof t=="object"&&t[pi]===Sq,xq=t=>!!t&&typeof t=="object"&&t[pi]===yE,Jre=t=>!!t&&typeof t=="object"&&t[pi]===Lm;function Pq(t){if(t&&typeof t=="object")switch(t[pi]){case Nm:case Lm:return!0}return!1}function Qre(t){if(t&&typeof t=="object")switch(t[pi]){case vE:case Nm:case yE:case Lm:return!0}return!1}var Xre=t=>(xq(t)||Pq(t))&&!!t.anchor,kq=class{constructor(e){Object.defineProperty(this,pi,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}};Ut.ALIAS=vE;Ut.DOC=_q;Ut.MAP=Nm;Ut.NODE_TYPE=pi;Ut.NodeBase=kq;Ut.PAIR=Sq;Ut.SCALAR=yE;Ut.SEQ=Lm;Ut.hasAnchor=Xre;Ut.isAlias=Gre;Ut.isCollection=Pq;Ut.isDocument=zre;Ut.isMap=Kre;Ut.isNode=Qre;Ut.isPair=Yre;Ut.isScalar=xq;Ut.isSeq=Jre});var af=k(Iq=>{"use strict";var xr=Ke(),la=Symbol("break visit"),Zre=Symbol("skip children"),sf=Symbol("remove node");function Fm(t,e){typeof e=="object"&&(e.Collection||e.Node||e.Value)&&(e=Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)),xr.isDocument(t)?Hc(null,t.contents,e,Object.freeze([t]))===sf&&(t.contents=null):Hc(null,t,e,Object.freeze([]))}Fm.BREAK=la;Fm.SKIP=Zre;Fm.REMOVE=sf;function Hc(t,e,r,n){let i;if(typeof r=="function"?i=r(t,e,n):xr.isMap(e)?r.Map&&(i=r.Map(t,e,n)):xr.isSeq(e)?r.Seq&&(i=r.Seq(t,e,n)):xr.isPair(e)?r.Pair&&(i=r.Pair(t,e,n)):xr.isScalar(e)?r.Scalar&&(i=r.Scalar(t,e,n)):xr.isAlias(e)&&r.Alias&&(i=r.Alias(t,e,n)),xr.isNode(i)||xr.isPair(i)){let o=n[n.length-1];if(xr.isCollection(o))o.items[t]=i;else if(xr.isPair(o))t==="key"?o.key=i:o.value=i;else if(xr.isDocument(o))o.contents=i;else{let s=xr.isAlias(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${s} parent`)}return Hc(t,i,r,n)}if(typeof i!="symbol"){if(xr.isCollection(e)){n=Object.freeze(n.concat(e));for(let o=0;o<e.items.length;++o){let s=Hc(o,e.items[o],r,n);if(typeof s=="number")o=s-1;else{if(s===la)return la;s===sf&&(e.items.splice(o,1),o-=1)}}}else if(xr.isPair(e)){n=Object.freeze(n.concat(e));let o=Hc("key",e.key,r,n);if(o===la)return la;o===sf&&(e.key=null);let s=Hc("value",e.value,r,n);if(s===la)return la;s===sf&&(e.value=null)}}return i}Iq.visit=Fm});var wE=k(Tq=>{"use strict";var Aq=Ke(),ene=af(),tne={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},rne=t=>t.replace(/[!,[\]{}]/g,e=>tne[e]),Hr=class{constructor(e,r){this.marker=null,this.yaml=Object.assign({},Hr.defaultYaml,e),this.tags=Object.assign({},Hr.defaultTags,r)}clone(){let e=new Hr(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){let e=new Hr(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Hr.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Hr.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:Hr.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Hr.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[o,s]=n;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return r(0,"%YAML directive should contain exactly one part"),!1;let[o]=n;return o==="1.1"||o==="1.2"?(this.yaml.version=o,!0):(r(6,`Unsupported YAML version ${o}`,!0),!1)}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let s=e.slice(2,-1);return s==="!"||s==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),s)}let[,n,i]=e.match(/^(.*!)([^!]*)$/);i||r(`The ${e} tag has no suffix`);let o=this.tags[n];return o?o+decodeURIComponent(i):n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+rne(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(e&&n.length>0&&Aq.isNode(e.contents)){let o={};ene.visit(e.contents,(s,a)=>{Aq.isNode(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(let[o,s]of n)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&r.push(`%TAG ${o} ${s}`);return r.join(`
`)}};Hr.defaultYaml={explicit:!1,version:"1.2"};Hr.defaultTags={"!!":"tag:yaml.org,2002:"};Tq.Directives=Hr});var Mm=k(cf=>{"use strict";var Dq=Ke(),nne=af();function ine(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function Rq(t){let e=new Set;return nne.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function Oq(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function one(t,e){let r=[],n=new Map,i=null;return{onAnchor(o){r.push(o),i||(i=Rq(t));let s=Oq(e,i);return i.add(s),s},setAnchors(){for(let o of r){let s=n.get(o);if(typeof s=="object"&&s.anchor&&(Dq.isScalar(s.node)||Dq.isCollection(s.node)))s.node.anchor=s.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:n}}cf.anchorIsValid=ine;cf.anchorNames=Rq;cf.createNodeAnchors=one;cf.findNewAnchor=Oq});var uf=k(Fq=>{"use strict";var sne=Mm(),Nq=af(),lf=Ke(),Lq=class extends lf.NodeBase{constructor(e){super(lf.ALIAS);this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let r;return Nq.visit(e,{Node:(n,i)=>{if(i===this)return Nq.visit.BREAK;i.anchor===this.source&&(r=i)}}),r}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:o}=r,s=this.resolve(i);if(!s){let c=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(c)}let a=n.get(s);if(!a||a.res===void 0){let c="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(c)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=qm(i,s,n)),a.count*a.aliasCount>o)){let c="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(c)}return a.res}toString(e,r,n){let i=`*${this.source}`;if(e){if(sne.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}};function qm(t,e,r){if(lf.isAlias(e)){let n=e.resolve(t),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(lf.isCollection(e)){let n=0;for(let i of e.items){let o=qm(t,i,r);o>n&&(n=o)}return n}else if(lf.isPair(e)){let n=qm(t,e.key,r),i=qm(t,e.value,r);return Math.max(n,i)}return 1}Fq.Alias=Lq});var Vc=k(qq=>{"use strict";var ane=Ke();function Mq(t,e,r){if(Array.isArray(t))return t.map((n,i)=>Mq(n,String(i),r));if(t&&typeof t.toJSON=="function"){if(!r||!ane.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=o=>{n.res=o,delete r.onCreate};let i=t.toJSON(e,r);return r.onCreate&&r.onCreate(i),i}return typeof t=="bigint"&&!(r&&r.keep)?Number(t):t}qq.toJS=Mq});var kt=k(CE=>{"use strict";var $q=Ke(),cne=Vc(),lne=t=>!t||typeof t!="function"&&typeof t!="object",ua=class extends $q.NodeBase{constructor(e){super($q.SCALAR);this.value=e}toJSON(e,r){return r&&r.keep?this.value:cne.toJS(this.value,e,r)}toString(){return String(this.value)}};ua.BLOCK_FOLDED="BLOCK_FOLDED";ua.BLOCK_LITERAL="BLOCK_LITERAL";ua.PLAIN="PLAIN";ua.QUOTE_DOUBLE="QUOTE_DOUBLE";ua.QUOTE_SINGLE="QUOTE_SINGLE";CE.Scalar=ua;CE.isScalarValue=lne});var ff=k(Uq=>{"use strict";var une=uf(),fa=Ke(),jq=kt(),fne="tag:yaml.org,2002:";function dne(t,e,r){if(e){let n=r.filter(o=>o.tag===e),i=n.find(o=>!o.format)||n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>n.identify&&n.identify(t)&&!n.format)}function pne(t,e,r){var n,i;if(fa.isDocument(t)&&(t=t.contents),fa.isNode(t))return t;if(fa.isPair(t)){let p=(i=(n=r.schema[fa.MAP]).createNode)===null||i===void 0?void 0:i.call(n,r.schema,null,r);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt=="function"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:o,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=r,u;if(o&&t&&typeof t=="object"){if(u=l.get(t),u)return u.anchor||(u.anchor=s(t)),new une.Alias(u.anchor);u={anchor:null,node:null},l.set(t,u)}e&&e.startsWith("!!")&&(e=fne+e.slice(2));let f=dne(t,e,c.tags);if(!f){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let p=new jq.Scalar(t);return u&&(u.node=p),p}f=t instanceof Map?c[fa.MAP]:Symbol.iterator in Object(t)?c[fa.SEQ]:c[fa.MAP]}a&&(a(f),delete r.onTagObj);let d=(f==null?void 0:f.createNode)?f.createNode(r.schema,t,r):new jq.Scalar(t);return e&&(d.tag=e),u&&(u.node=d),d}Uq.createNode=pne});var df=k($m=>{"use strict";var hne=ff(),Fn=Ke();function bE(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){let s=[];s[o]=n,n=s}else n=new Map([[o,n]])}return hne.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var Bq=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,EE=class extends Fn.NodeBase{constructor(e,r){super(e);Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>Fn.isNode(n)||Fn.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(Bq(e))this.add(r);else{let[n,...i]=e,o=this.get(n,!0);if(Fn.isCollection(o))o.addIn(i,r);else if(o===void 0&&this.schema)this.set(n,bE(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let i=this.get(r,!0);if(Fn.isCollection(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...i]=e,o=this.get(n,!0);return i.length===0?!r&&Fn.isScalar(o)?o.value:o:Fn.isCollection(o)?o.getIn(i,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!Fn.isPair(r))return!1;let n=r.value;return n==null||e&&Fn.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let i=this.get(r,!0);return Fn.isCollection(i)?i.hasIn(n):!1}setIn(e,r){let[n,...i]=e;if(i.length===0)this.set(n,r);else{let o=this.get(n,!0);if(Fn.isCollection(o))o.setIn(i,r);else if(o===void 0&&this.schema)this.set(n,bE(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}};EE.maxFlowStringSingleLineLength=60;$m.Collection=EE;$m.collectionFromPath=bE;$m.isEmptyPath=Bq});var pf=k(jm=>{"use strict";var mne=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Hq(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var gne=(t,e,r)=>r.includes(`
`)?`
`+Hq(r,e):(t.endsWith(" ")?"":" ")+r;jm.indentComment=Hq;jm.lineComment=gne;jm.stringifyComment=mne});var Wq=k(hf=>{"use strict";var vne="flow",_E="block",Um="quoted";function yne(t,e,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;let c=Math.max(1+o,1+i-e.length);if(t.length<=c)return t;let l=[],u={},f=i-e.length;typeof n=="number"&&(n>i-Math.max(2,o)?l.push(0):f=i-n);let d,p,h=!1,m=-1,g=-1,v=-1;r===_E&&(m=Vq(t,m),m!==-1&&(f=m+c));for(let b;b=t[m+=1];){if(r===Um&&b==="\\"){switch(g=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}v=m}if(b===`
`)r===_E&&(m=Vq(t,m)),f=m+c,d=void 0;else{if(b===" "&&p&&p!==" "&&p!==`
`&&p!=="	"){let C=t[m+1];C&&C!==" "&&C!==`
`&&C!=="	"&&(d=m)}if(m>=f)if(d)l.push(d),f=d+c,d=void 0;else if(r===Um){for(;p===" "||p==="	";)p=b,b=t[m+=1],h=!0;let C=m>v+1?m-2:g-1;if(u[C])return t;l.push(C),u[C]=!0,f=C+c,d=void 0}else h=!0}p=b}if(h&&a&&a(),l.length===0)return t;s&&s();let w=t.slice(0,l[0]);for(let b=0;b<l.length;++b){let C=l[b],S=l[b+1]||t.length;C===0?w=`
${e}${t.slice(0,S)}`:(r===Um&&u[C]&&(w+=`${t[C]}\\`),w+=`
${e}${t.slice(C+1,S)}`)}return w}function Vq(t,e){let r=t[e+1];for(;r===" "||r==="	";){do r=t[e+=1];while(r&&r!==`
`);r=t[e+1]}return e}hf.FOLD_BLOCK=_E;hf.FOLD_FLOW=vne;hf.FOLD_QUOTED=Um;hf.foldFlowLines=yne});var vf=k(Gq=>{"use strict";var hi=kt(),jo=Wq(),Bm=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Hm=t=>/^(%|---|\.\.\.)/m.test(t);function wne(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>n)return!0;if(s=o+1,i-s<=n)return!1}return!0}function mf(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(Hm(t)?"  ":""),s="",a=0;for(let c=0,l=r[c];l;l=r[++c])if(l===" "&&r[c+1]==="\\"&&r[c+2]==="n"&&(s+=r.slice(a,c)+"\\ ",c+=1,a=c,l="\\"),l==="\\")switch(r[c+1]){case"u":{s+=r.slice(a,c);let u=r.substr(c+2,4);switch(u){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:u.substr(0,2)==="00"?s+="\\x"+u.substr(2):s+=r.substr(c,6)}c+=5,a=c+1}break;case"n":if(n||r[c+2]==='"'||r.length<i)c+=1;else{for(s+=r.slice(a,c)+`

`;r[c+2]==="\\"&&r[c+3]==="n"&&r[c+4]!=='"';)s+=`
`,c+=2;s+=o,r[c+2]===" "&&(s+="\\"),c+=1,a=c+1}break;default:c+=1}return s=a?s+r.slice(a):r,n?s:jo.foldFlowLines(s,o,jo.FOLD_QUOTED,Bm(e))}function SE(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return mf(t,e);let r=e.indent||(Hm(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:jo.foldFlowLines(n,r,jo.FOLD_FLOW,Bm(e))}function gf(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=mf;else{let i=t.includes('"'),o=t.includes("'");i&&!o?n=SE:o&&!i?n=mf:n=r?SE:mf}return n(t,e)}function Vm({comment:t,type:e,value:r},n,i,o){let{blockQuote:s,commentString:a,lineWidth:c}=n.options;if(!s||/\n[\t ]+$/.test(r)||/^\s*$/.test(r))return gf(r,n);let l=n.indent||(n.forceBlockIndent||Hm(r)?"  ":""),u=s==="literal"?!0:s==="folded"||e===hi.Scalar.BLOCK_FOLDED?!1:e===hi.Scalar.BLOCK_LITERAL?!0:!wne(r,c,l.length);if(!r)return u?`|
`:`>
`;let f,d;for(d=r.length;d>0;--d){let _=r[d-1];if(_!==`
`&&_!=="	"&&_!==" ")break}let p=r.substring(d),h=p.indexOf(`
`);h===-1?f="-":r===p||h!==p.length-1?(f="+",o&&o()):f="",p&&(r=r.slice(0,-p.length),p[p.length-1]===`
`&&(p=p.slice(0,-1)),p=p.replace(/\n+(?!\n|$)/g,`$&${l}`));let m=!1,g,v=-1;for(g=0;g<r.length;++g){let _=r[g];if(_===" ")m=!0;else if(_===`
`)v=g;else break}let w=r.substring(0,v<g?v+1:g);w&&(r=r.substring(w.length),w=w.replace(/\n+/g,`$&${l}`));let C=(u?"|":">")+(m?l?"2":"1":"")+f;if(t&&(C+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),u)return r=r.replace(/\n+/g,`$&${l}`),`${C}
${l}${w}${r}${p}`;r=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let S=jo.foldFlowLines(`${w}${r}${p}`,l,jo.FOLD_BLOCK,Bm(n));return`${C}
${l}${S}`}function Cne(t,e,r,n){let{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:c,inFlow:l}=e;if(a&&/[\n[\]{},]/.test(o)||l&&/[[\]{},]/.test(o))return gf(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||l||o.indexOf(`
`)===-1?gf(o,e):Vm(t,e,r,n);if(!a&&!l&&i!==hi.Scalar.PLAIN&&o.indexOf(`
`)!==-1)return Vm(t,e,r,n);if(c===""&&Hm(o))return e.forceBlockIndent=!0,Vm(t,e,r,n);let u=o.replace(/\n+/g,`$&
${c}`);if(s){let f=h=>{var m;return h.default&&h.tag!=="tag:yaml.org,2002:str"&&((m=h.test)===null||m===void 0?void 0:m.test(u))},{compat:d,tags:p}=e.doc.schema;if(p.some(f)||(d==null?void 0:d.some(f)))return gf(o,e)}return a?u:jo.foldFlowLines(u,c,jo.FOLD_FLOW,Bm(e))}function bne(t,e,r,n){let{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==hi.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=hi.Scalar.QUOTE_DOUBLE);let c=u=>{switch(u){case hi.Scalar.BLOCK_FOLDED:case hi.Scalar.BLOCK_LITERAL:return i||o?gf(s.value,e):Vm(s,e,r,n);case hi.Scalar.QUOTE_DOUBLE:return mf(s.value,e);case hi.Scalar.QUOTE_SINGLE:return SE(s.value,e);case hi.Scalar.PLAIN:return Cne(s,e,r,n);default:return null}},l=c(a);if(l===null){let{defaultKeyType:u,defaultStringType:f}=e.options,d=i&&u||f;if(l=c(d),l===null)throw new Error(`Unsupported default string type ${d}`)}return l}Gq.stringifyString=bne});var Wc=k(xE=>{"use strict";var Ene=Mm(),Uo=Ke(),_ne=pf(),Sne=vf();function xne(t,e){let r=Object.assign({blockQuote:!0,commentString:_ne.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function Pne(t,e){if(e.tag){let i=t.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)||i[0]}let r,n;if(Uo.isScalar(e)){n=e.value;let i=t.filter(o=>o.identify&&o.identify(n));r=i.find(o=>o.format===e.format)||i.find(o=>!o.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n&&n.constructor?n.constructor.name:typeof n;throw new Error(`Tag not resolved for ${i} value`)}return r}function kne(t,e,{anchors:r,doc:n}){if(!n.directives)return"";let i=[],o=(Uo.isScalar(t)||Uo.isCollection(t))&&t.anchor;o&&Ene.anchorIsValid(o)&&(r.add(o),i.push(`&${o}`));let s=t.tag||(e.default?null:e.tag);return s&&i.push(n.directives.tagString(s)),i.join(" ")}function Ine(t,e,r,n){var i;if(Uo.isPair(t))return t.toString(e,r,n);if(Uo.isAlias(t)){if(e.doc.directives)return t.toString(e);if((i=e.resolvedAliases)===null||i===void 0?void 0:i.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let o,s=Uo.isNode(t)?t:e.doc.createNode(t,{onTagObj:l=>o=l});o||(o=Pne(e.doc.schema.tags,s));let a=kne(s,o,e);a.length>0&&(e.indentAtStart=(e.indentAtStart||0)+a.length+1);let c=typeof o.stringify=="function"?o.stringify(s,e,r,n):Uo.isScalar(s)?Sne.stringifyString(s,e,r,n):s.toString(e,r,n);return a?Uo.isScalar(s)||c[0]==="{"||c[0]==="["?`${a} ${c}`:`${a}
${e.indent}${c}`:c}xE.createStringifyContext=xne;xE.stringify=Ine});var Jq=k(Yq=>{"use strict";var Bo=Ke(),zq=kt(),Kq=Wc(),yf=pf();function Ane({key:t,value:e},r,n,i){let{allNullValues:o,doc:s,indent:a,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:f}}=r,d=Bo.isNode(t)&&t.comment||null;if(f){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(Bo.isCollection(t)){let _="With simple keys, collection cannot be used as a key value";throw new Error(_)}}let p=!f&&(!t||d&&e==null&&!r.inFlow||Bo.isCollection(t)||(Bo.isScalar(t)?t.type===zq.Scalar.BLOCK_FOLDED||t.type===zq.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!p&&(f||!o),indent:a+c});let h=!1,m=!1,g=Kq.stringify(t,r,()=>h=!0,()=>m=!0);if(!p&&!r.inFlow&&g.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(r.inFlow){if(o||e==null)return h&&n&&n(),p?`? ${g}`:g}else if(o&&!f||e==null&&p)return g=`? ${g}`,d&&!h?g+=yf.lineComment(g,r.indent,l(d)):m&&i&&i(),g;h&&(d=null),p?(d&&(g+=yf.lineComment(g,r.indent,l(d))),g=`? ${g}
${a}:`):(g=`${g}:`,d&&(g+=yf.lineComment(g,r.indent,l(d))));let v="",w=null;if(Bo.isNode(e)){if(e.spaceBefore&&(v=`
`),e.commentBefore){let _=l(e.commentBefore);v+=`
${yf.indentComment(_,r.indent)}`}w=e.comment}else e&&typeof e=="object"&&(e=s.createNode(e));r.implicitKey=!1,!p&&!d&&Bo.isScalar(e)&&(r.indentAtStart=g.length+1),m=!1,!u&&c.length>=2&&!r.inFlow&&!p&&Bo.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substr(2));let b=!1,C=Kq.stringify(e,r,()=>b=!0,()=>m=!0),S=" ";return v||d?S=C===""&&!r.inFlow?v:`${v}
${r.indent}`:!p&&Bo.isCollection(e)?(!(C[0]==="["||C[0]==="{")||C.includes(`
`))&&(S=`
${r.indent}`):(C===""||C[0]===`
`)&&(S=""),g+=S+C,r.inFlow?b&&n&&n():w&&!b?g+=yf.lineComment(g,r.indent,l(w)):m&&i&&i(),g}Yq.stringifyPair=Ane});var kE=k(PE=>{"use strict";function Tne(t,...e){t==="debug"&&console.log(...e)}function Dne(t,e){(t==="debug"||t==="warn")&&(typeof process!="undefined"&&process.emitWarning?process.emitWarning(e):console.warn(e))}PE.debug=Tne;PE.warn=Dne});var TE=k(Xq=>{"use strict";var Rne=kE(),One=Wc(),Gc=Ke(),Nne=kt(),IE=Vc(),Qq="<<";function Lne(t,e,{key:r,value:n}){if(t&&t.doc.schema.merge&&Fne(r))if(n=Gc.isAlias(n)?n.resolve(t.doc):n,Gc.isSeq(n))for(let i of n.items)AE(t,e,i);else if(Array.isArray(n))for(let i of n)AE(t,e,i);else AE(t,e,n);else{let i=IE.toJS(r,"",t);if(e instanceof Map)e.set(i,IE.toJS(n,i,t));else if(e instanceof Set)e.add(i);else{let o=Mne(r,i,t),s=IE.toJS(n,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}var Fne=t=>t===Qq||Gc.isScalar(t)&&t.value===Qq&&(!t.type||t.type===Nne.Scalar.PLAIN);function AE(t,e,r){let n=t&&Gc.isAlias(r)?r.resolve(t.doc):r;if(!Gc.isMap(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,t,Map);for(let[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function Mne(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(Gc.isNode(t)&&r&&r.doc){let n=One.createStringifyContext(r.doc,{});n.anchors=new Set;for(let o of r.anchors.keys())n.anchors.add(o.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=t.toString(n);if(!r.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),Rne.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(e)}Xq.addPairToJSMap=Lne});var Vi=k(DE=>{"use strict";var Zq=ff(),qne=Jq(),$ne=TE(),Wm=Ke();function jne(t,e,r){let n=Zq.createNode(t,void 0,r),i=Zq.createNode(e,void 0,r);return new wf(n,i)}var wf=class{constructor(e,r=null){Object.defineProperty(this,Wm.NODE_TYPE,{value:Wm.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Wm.isNode(r)&&(r=r.clone(e)),Wm.isNode(n)&&(n=n.clone(e)),new wf(r,n)}toJSON(e,r){let n=r&&r.mapAsMap?new Map:{};return $ne.addPairToJSMap(r,n,this)}toString(e,r,n){return e&&e.doc?qne.stringifyPair(this,e,r,n):JSON.stringify(this)}};DE.Pair=wf;DE.createPair=jne});var Gm=k(e$=>{"use strict";var Une={intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};e$.defaultOptions=Une});var RE=k(r$=>{"use strict";var Bne=df(),da=Ke(),t$=Wc(),Cf=pf();function Hne(t,e,r){var n;return(((n=e.inFlow)!==null&&n!==void 0?n:t.flow)?Wne:Vne)(t,e,r)}function Vne({comment:t,items:e},r,{blockItemPrefix:n,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){let{indent:c,options:{commentString:l}}=r,u=Object.assign({},r,{indent:o,type:null}),f=!1,d=[];for(let h=0;h<e.length;++h){let m=e[h],g=null;if(da.isNode(m))!f&&m.spaceBefore&&d.push(""),zm(r,d,m.commentBefore,f),m.comment&&(g=m.comment);else if(da.isPair(m)){let w=da.isNode(m.key)?m.key:null;w&&(!f&&w.spaceBefore&&d.push(""),zm(r,d,w.commentBefore,f))}f=!1;let v=t$.stringify(m,u,()=>g=null,()=>f=!0);g&&(v+=Cf.lineComment(v,o,l(g))),f&&g&&(f=!1),d.push(n+v)}let p;if(d.length===0)p=i.start+i.end;else{p=d[0];for(let h=1;h<d.length;++h){let m=d[h];p+=m?`
${c}${m}`:`
`}}return t?(p+=`
`+Cf.indentComment(l(t),c),a&&a()):f&&s&&s(),p}function Wne({comment:t,items:e},r,{flowChars:n,itemIndent:i,onComment:o}){let{indent:s,indentStep:a,options:{commentString:c}}=r;i+=a;let l=Object.assign({},r,{indent:i,inFlow:!0,type:null}),u=!1,f=0,d=[];for(let g=0;g<e.length;++g){let v=e[g],w=null;if(da.isNode(v))v.spaceBefore&&d.push(""),zm(r,d,v.commentBefore,!1),v.comment&&(w=v.comment);else if(da.isPair(v)){let C=da.isNode(v.key)?v.key:null;C&&(C.spaceBefore&&d.push(""),zm(r,d,C.commentBefore,!1),C.comment&&(u=!0));let S=da.isNode(v.value)?v.value:null;S?(S.comment&&(w=S.comment),S.commentBefore&&(u=!0)):v.value==null&&C&&C.comment&&(w=C.comment)}w&&(u=!0);let b=t$.stringify(v,l,()=>w=null);g<e.length-1&&(b+=","),w&&(b+=Cf.lineComment(b,i,c(w))),!u&&(d.length>f||b.includes(`
`))&&(u=!0),d.push(b),f=d.length}let p,{start:h,end:m}=n;if(d.length===0)p=h+m;else if(u||(u=d.reduce((v,w)=>v+w.length+2,2)>Bne.Collection.maxFlowStringSingleLineLength),u){p=h;for(let g of d)p+=g?`
${a}${s}${g}`:`
`;p+=`
${s}${m}`}else p=`${h} ${d.join(" ")} ${m}`;return t&&(p+=Cf.lineComment(p,c(t),s),o&&o()),p}function zm({indent:t,options:{commentString:e}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){let o=Cf.indentComment(e(n),t);r.push(o.trimStart())}}r$.stringifyCollection=Hne});var pa=k(NE=>{"use strict";var Gne=RE(),zne=TE(),Kne=df(),Ho=Ke(),OE=Vi(),Yne=kt();function bf(t,e){let r=Ho.isScalar(e)?e.value:e;for(let n of t)if(Ho.isPair(n)&&(n.key===e||n.key===r||Ho.isScalar(n.key)&&n.key.value===r))return n}var n$=class extends Kne.Collection{constructor(e){super(Ho.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,r){let n;Ho.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new OE.Pair(e,e.value):n=new OE.Pair(e.key,e.value);let i=bf(this.items,n.key),o=this.schema&&this.schema.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);Ho.isScalar(i.value)&&Yne.isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(o){let s=this.items.findIndex(a=>o(n,a)<0);s===-1?this.items.push(n):this.items.splice(s,0,n)}else this.items.push(n)}delete(e){let r=bf(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let n=bf(this.items,e),i=n&&n.value;return!r&&Ho.isScalar(i)?i.value:i}has(e){return!!bf(this.items,e)}set(e,r){this.add(new OE.Pair(e,r),!0)}toJSON(e,r,n){let i=n?new n:r&&r.mapAsMap?new Map:{};r&&r.onCreate&&r.onCreate(i);for(let o of this.items)zne.addPairToJSMap(r,i,o);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!Ho.isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Gne.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};NE.YAMLMap=n$;NE.findPair=bf});var zc=k(o$=>{"use strict";var Jne=Ke(),Qne=Vi(),i$=pa();function Xne(t,e,r){let{keepUndefined:n,replacer:i}=r,o=new i$.YAMLMap(t),s=(a,c)=>{if(typeof i=="function")c=i.call(e,a,c);else if(Array.isArray(i)&&!i.includes(a))return;(c!==void 0||n)&&o.items.push(Qne.createPair(a,c,r))};if(e instanceof Map)for(let[a,c]of e)s(a,c);else if(e&&typeof e=="object")for(let a of Object.keys(e))s(a,e[a]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}var Zne={collection:"map",createNode:Xne,default:!0,nodeClass:i$.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return Jne.isMap(t)||e("Expected a mapping for this tag"),t}};o$.map=Zne});var ha=k(a$=>{"use strict";var eie=RE(),tie=df(),Km=Ke(),rie=kt(),nie=Vc(),s$=class extends tie.Collection{constructor(e){super(Km.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){let r=Ym(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=Ym(e);if(typeof n!="number")return;let i=this.items[n];return!r&&Km.isScalar(i)?i.value:i}has(e){let r=Ym(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=Ym(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[n];Km.isScalar(i)&&rie.isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(e,r){let n=[];r&&r.onCreate&&r.onCreate(n);let i=0;for(let o of this.items)n.push(nie.toJS(o,String(i++),r));return n}toString(e,r,n){return e?eie.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}};function Ym(t){let e=Km.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}a$.YAMLSeq=s$});var Kc=k(l$=>{"use strict";var iie=ff(),oie=Ke(),c$=ha();function sie(t,e,r){let{replacer:n}=r,i=new c$.YAMLSeq(t);if(e&&Symbol.iterator in Object(e)){let o=0;for(let s of e){if(typeof n=="function"){let a=e instanceof Set?s:String(o++);s=n.call(e,a,s)}i.items.push(iie.createNode(s,void 0,r))}}return i}var aie={collection:"seq",createNode:sie,default:!0,nodeClass:c$.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return oie.isSeq(t)||e("Expected a sequence for this tag"),t}};l$.seq=aie});var Ef=k(u$=>{"use strict";var cie=vf(),lie={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),cie.stringifyString(t,e,r,n)}};u$.string=lie});var Jm=k(p$=>{"use strict";var f$=kt(),d$={identify:t=>t==null,createNode:()=>new f$.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new f$.Scalar(null),stringify:({source:t},e)=>t&&d$.test.test(t)?t:e.options.nullStr};p$.nullTag=d$});var LE=k(m$=>{"use strict";var uie=kt(),h$={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new uie.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&h$.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};m$.boolTag=h$});var Yc=k(g$=>{"use strict";function fie({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}g$.stringifyNumber=fie});var ME=k(Qm=>{"use strict";var die=kt(),FE=Yc(),pie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:FE.stringifyNumber},hie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():FE.stringifyNumber(t)}},mie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new die.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:FE.stringifyNumber};Qm.float=mie;Qm.floatExp=hie;Qm.floatNaN=pie});var $E=k(Zm=>{"use strict";var v$=Yc(),Xm=t=>typeof t=="bigint"||Number.isInteger(t),qE=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function y$(t,e,r){let{value:n}=t;return Xm(n)&&n>=0?r+n.toString(e):v$.stringifyNumber(t)}var gie={identify:t=>Xm(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>qE(t,2,8,r),stringify:t=>y$(t,8,"0o")},vie={identify:Xm,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>qE(t,0,10,r),stringify:v$.stringifyNumber},yie={identify:t=>Xm(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>qE(t,2,16,r),stringify:t=>y$(t,16,"0x")};Zm.int=vie;Zm.intHex=yie;Zm.intOct=gie});var C$=k(w$=>{"use strict";var wie=zc(),Cie=Jm(),bie=Kc(),Eie=Ef(),_ie=LE(),jE=ME(),UE=$E(),Sie=[wie.map,bie.seq,Eie.string,Cie.nullTag,_ie.boolTag,UE.intOct,UE.int,UE.intHex,jE.floatNaN,jE.floatExp,jE.float];w$.schema=Sie});var _$=k(E$=>{"use strict";var xie=kt(),Pie=zc(),kie=Kc();function b$(t){return typeof t=="bigint"||Number.isInteger(t)}var eg=({value:t})=>JSON.stringify(t),Iie=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:eg},{identify:t=>t==null,createNode:()=>new xie.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:eg},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:eg},{identify:b$,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>b$(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:eg}],Aie={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Tie=[Pie.map,kie.seq].concat(Iie,Aie);E$.schema=Tie});var HE=k(S$=>{"use strict";var BE=kt(),Die=vf(),Rie={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,i,o){let s=r,a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);a=btoa(c)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=BE.Scalar.BLOCK_LITERAL),e!==BE.Scalar.QUOTE_DOUBLE){let c=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),l=Math.ceil(a.length/c),u=new Array(l);for(let f=0,d=0;f<l;++f,d+=c)u[f]=a.substr(d,c);a=u.join(e===BE.Scalar.BLOCK_LITERAL?`
`:" ")}return Die.stringifyString({comment:t,type:e,value:a},n,i,o)}};S$.binary=Rie});var ng=k(rg=>{"use strict";var tg=Ke(),VE=Vi(),Oie=kt(),Nie=ha();function x$(t,e){if(tg.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!tg.isPair(n)){if(tg.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let i=n.items[0]||new VE.Pair(new Oie.Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let o=i.value||i.key;o.comment=o.comment?`${n.comment}
${o.comment}`:n.comment}n=i}t.items[r]=tg.isPair(n)?n:new VE.Pair(n)}}else e("Expected a sequence for this tag");return t}function P$(t,e,r){let{replacer:n}=r,i=new Nie.YAMLSeq(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof n=="function"&&(s=n.call(e,String(o++),s));let a,c;if(Array.isArray(s))if(s.length===2)a=s[0],c=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){let l=Object.keys(s);if(l.length===1)a=l[0],c=s[a];else throw new TypeError(`Expected { key: value } tuple: ${s}`)}else a=s;i.items.push(VE.createPair(a,c,r))}return i}var Lie={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:x$,createNode:P$};rg.createPairs=P$;rg.pairs=Lie;rg.resolvePairs=x$});var zE=k(GE=>{"use strict";var Fie=ha(),WE=Vc(),k$=Ke(),_f=pa(),I$=ng(),Vo=class extends Fie.YAMLSeq{constructor(){super();this.add=_f.YAMLMap.prototype.add.bind(this),this.delete=_f.YAMLMap.prototype.delete.bind(this),this.get=_f.YAMLMap.prototype.get.bind(this),this.has=_f.YAMLMap.prototype.has.bind(this),this.set=_f.YAMLMap.prototype.set.bind(this),this.tag=Vo.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r&&r.onCreate&&r.onCreate(n);for(let i of this.items){let o,s;if(k$.isPair(i)?(o=WE.toJS(i.key,"",r),s=WE.toJS(i.value,o,r)):o=WE.toJS(i,"",r),n.has(o))throw new Error("Ordered maps must not include duplicate keys");n.set(o,s)}return n}};Vo.tag="tag:yaml.org,2002:omap";var Mie={collection:"seq",identify:t=>t instanceof Map,nodeClass:Vo,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=I$.resolvePairs(t,e),n=[];for(let{key:i}of r.items)k$.isScalar(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Vo,r)},createNode(t,e,r){let n=I$.createPairs(t,e,r),i=new Vo;return i.items=n.items,i}};GE.YAMLOMap=Vo;GE.omap=Mie});var O$=k(KE=>{"use strict";var A$=kt();function T$({value:t,source:e},r){return e&&(t?D$:R$).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var D$={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new A$.Scalar(!0),stringify:T$},R$={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new A$.Scalar(!1),stringify:T$};KE.falseTag=R$;KE.trueTag=D$});var N$=k(ig=>{"use strict";var qie=kt(),YE=Yc(),$ie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:YE.stringifyNumber},jie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():YE.stringifyNumber(t)}},Uie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new qie.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:YE.stringifyNumber};ig.float=Uie;ig.floatExp=jie;ig.floatNaN=$ie});var F$=k(xf=>{"use strict";var L$=Yc(),Sf=t=>typeof t=="bigint"||Number.isInteger(t);function og(t,e,r,{intAsBigInt:n}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let s=BigInt(t);return i==="-"?BigInt(-1)*s:s}let o=parseInt(t,r);return i==="-"?-1*o:o}function JE(t,e,r){let{value:n}=t;if(Sf(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return L$.stringifyNumber(t)}var Bie={identify:Sf,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>og(t,2,2,r),stringify:t=>JE(t,2,"0b")},Hie={identify:Sf,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>og(t,1,8,r),stringify:t=>JE(t,8,"0")},Vie={identify:Sf,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>og(t,0,10,r),stringify:L$.stringifyNumber},Wie={identify:Sf,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>og(t,2,16,r),stringify:t=>JE(t,16,"0x")};xf.int=Vie;xf.intBin=Bie;xf.intHex=Wie;xf.intOct=Hie});var XE=k(QE=>{"use strict";var sg=Ke(),ag=Vi(),cg=pa(),Wo=class extends cg.YAMLMap{constructor(e){super(e);this.tag=Wo.tag}add(e){let r;sg.isPair(e)?r=e:typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new ag.Pair(e.key,null):r=new ag.Pair(e,null),cg.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=cg.findPair(this.items,e);return!r&&sg.isPair(n)?sg.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=cg.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new ag.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}};Wo.tag="tag:yaml.org,2002:set";var Gie={collection:"map",identify:t=>t instanceof Set,nodeClass:Wo,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(sg.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new Wo,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,r){let{replacer:n}=r,i=new Wo(t);if(e&&Symbol.iterator in Object(e))for(let o of e)typeof n=="function"&&(o=n.call(e,o,o)),i.items.push(ag.createPair(o,null,r));return i}};QE.YAMLSet=Wo;QE.set=Gie});var e0=k(lg=>{"use strict";var zie=Yc();function ZE(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=n.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return r==="-"?i(-1)*o:o}function M$(t){let{value:e}=t,r=s=>s;if(typeof e=="bigint")r=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return zie.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let i=r(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),n+o.map(s=>s<10?"0"+String(s):String(s)).join(":").replace(/000000\d*$/,"")}var Kie={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>ZE(t,r),stringify:M$},Yie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>ZE(t,!1),stringify:M$},q$={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(q$.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,o,s,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0,l=Date.UTC(r,n-1,i,o||0,s||0,a||0,c),u=e[8];if(u&&u!=="Z"){let f=ZE(u,!1);Math.abs(f)<30&&(f*=60),l-=6e4*f}return new Date(l)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};lg.floatTime=Yie;lg.intTime=Kie;lg.timestamp=q$});var U$=k(j$=>{"use strict";var Jie=zc(),Qie=Jm(),Xie=Kc(),Zie=Ef(),eoe=HE(),$$=O$(),t0=N$(),ug=F$(),toe=zE(),roe=ng(),noe=XE(),r0=e0(),ioe=[Jie.map,Xie.seq,Zie.string,Qie.nullTag,$$.trueTag,$$.falseTag,ug.intBin,ug.intOct,ug.int,ug.intHex,t0.floatNaN,t0.floatExp,t0.float,eoe.binary,toe.omap,roe.pairs,noe.set,r0.intTime,r0.floatTime,r0.timestamp];j$.schema=ioe});var Q$=k(o0=>{"use strict";var B$=zc(),ooe=Jm(),H$=Kc(),soe=Ef(),aoe=LE(),n0=ME(),i0=$E(),coe=C$(),loe=_$(),V$=HE(),W$=zE(),G$=ng(),z$=U$(),K$=XE(),fg=e0(),Y$=new Map([["core",coe.schema],["failsafe",[B$.map,H$.seq,soe.string]],["json",loe.schema],["yaml11",z$.schema],["yaml-1.1",z$.schema]]),J$={binary:V$.binary,bool:aoe.boolTag,float:n0.float,floatExp:n0.floatExp,floatNaN:n0.floatNaN,floatTime:fg.floatTime,int:i0.int,intHex:i0.intHex,intOct:i0.intOct,intTime:fg.intTime,map:B$.map,null:ooe.nullTag,omap:W$.omap,pairs:G$.pairs,seq:H$.seq,set:K$.set,timestamp:fg.timestamp},uoe={"tag:yaml.org,2002:binary":V$.binary,"tag:yaml.org,2002:omap":W$.omap,"tag:yaml.org,2002:pairs":G$.pairs,"tag:yaml.org,2002:set":K$.set,"tag:yaml.org,2002:timestamp":fg.timestamp};function foe(t,e){let r=Y$.get(e);if(!r)if(Array.isArray(t))r=[];else{let n=Array.from(Y$.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${n} or define customTags array`)}if(Array.isArray(t))for(let n of t)r=r.concat(n);else typeof t=="function"&&(r=t(r.slice()));return r.map(n=>{if(typeof n!="string")return n;let i=J$[n];if(i)return i;let o=Object.keys(J$).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${n}"; use one of ${o}`)})}o0.coreKnownTags=uoe;o0.getTags=foe});var a0=k(X$=>{"use strict";var s0=Ke(),doe=zc(),poe=Kc(),hoe=Ef(),dg=Q$(),moe=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,pg=class{constructor({compat:e,customTags:r,merge:n,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?dg.getTags(e,"compat"):e?dg.getTags(null,e):null,this.merge=!!n,this.name=typeof o=="string"&&o||"core",this.knownTags=i?dg.coreKnownTags:{},this.tags=dg.getTags(r,this.name),this.toStringOptions=a||null,Object.defineProperty(this,s0.MAP,{value:doe.map}),Object.defineProperty(this,s0.SCALAR,{value:hoe.string}),Object.defineProperty(this,s0.SEQ,{value:poe.seq}),this.sortMapEntries=s===!0?moe:s||null}clone(){let e=Object.create(pg.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};X$.Schema=pg});var ej=k(Z$=>{"use strict";var goe=Ke(),c0=Wc(),hg=pf();function voe(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(r.push(l),n=!0):t.directives.marker&&(n=!0)}n&&r.push("---");let i=c0.createStringifyContext(t,e),{commentString:o}=i.options;if(t.commentBefore){r.length!==1&&r.unshift("");let l=o(t.commentBefore);r.unshift(hg.indentComment(l,""))}let s=!1,a=null;if(t.contents){if(goe.isNode(t.contents)){if(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore){let f=o(t.contents.commentBefore);r.push(hg.indentComment(f,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>s=!0,u=c0.stringify(t.contents,i,()=>a=null,l);a&&(u+=hg.lineComment(u,"",o(a))),(u[0]==="|"||u[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${u}`:r.push(u)}else r.push(c0.stringify(t.contents,i));let c=t.comment;return c&&s&&(c=c.replace(/^\n+/,"")),c&&((!s||a)&&r[r.length-1]!==""&&r.push(""),r.push(hg.indentComment(o(c),""))),r.join(`
`)+`
`}Z$.stringifyDocument=voe});var rj=k(tj=>{"use strict";function Pf(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,o=n.length;i<o;++i){let s=n[i],a=Pf(t,n,String(i),s);a===void 0?delete n[i]:a!==s&&(n[i]=a)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let o=n.get(i),s=Pf(t,n,i,o);s===void 0?n.delete(i):s!==o&&n.set(i,s)}else if(n instanceof Set)for(let i of Array.from(n)){let o=Pf(t,n,i,i);o===void 0?n.delete(i):o!==i&&(n.delete(i),n.add(o))}else for(let[i,o]of Object.entries(n)){let s=Pf(t,n,i,o);s===void 0?delete n[i]:s!==o&&(n[i]=s)}return t.call(e,r,n)}tj.applyReviver=Pf});var kf=k(nj=>{"use strict";var yoe=uf(),Jc=df(),mn=Ke(),woe=Vi(),Coe=Vc(),boe=Gm(),Eoe=a0(),_oe=Wc(),Soe=ej(),l0=Mm(),xoe=rj(),Poe=ff(),u0=wE(),mg=class{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,mn.NODE_TYPE,{value:mn.DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);let o=Object.assign({},boe.defaultOptions,n);this.options=o;let{version:s}=o;(n==null?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new u0.Directives({version:s}),this.setSchema(s,n),e===void 0?this.contents=null:this.contents=this.createNode(e,i,n)}clone(){let e=Object.create(mg.prototype,{[mn.NODE_TYPE]:{value:mn.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=mn.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Qc(this.contents)&&this.contents.add(e)}addIn(e,r){Qc(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=l0.anchorNames(this);e.anchor=!r||n.has(r)?l0.findNewAnchor(r||"a",n):r}return new yoe.Alias(e.anchor)}createNode(e,r,n){let i;if(typeof r=="function")e=r.call({"":e},"",e),i=r;else if(Array.isArray(r)){let g=w=>typeof w=="number"||w instanceof String||w instanceof Number,v=r.filter(g).map(String);v.length>0&&(r=r.concat(v)),i=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:c,onTagObj:l,tag:u}=n||{},{onAnchor:f,setAnchors:d,sourceObjects:p}=l0.createNodeAnchors(this,s||"a"),h={aliasDuplicateObjects:o!=null?o:!0,keepUndefined:c!=null?c:!1,onAnchor:f,onTagObj:l,replacer:i,schema:this.schema,sourceObjects:p},m=Poe.createNode(e,u,h);return a&&mn.isCollection(m)&&(m.flow=!0),d(),m}createPair(e,r,n={}){let i=this.createNode(e,null,n),o=this.createNode(r,null,n);return new woe.Pair(i,o)}delete(e){return Qc(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Jc.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Qc(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return mn.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return Jc.isEmptyPath(e)?!r&&mn.isScalar(this.contents)?this.contents.value:this.contents:mn.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return mn.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return Jc.isEmptyPath(e)?this.contents!==void 0:mn.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=Jc.collectionFromPath(this.schema,[e],r):Qc(this.contents)&&this.contents.set(e,r)}setIn(e,r){Jc.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=Jc.collectionFromPath(this.schema,Array.from(e),r):Qc(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new u0.Directives({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":this.directives?this.directives.yaml.version="1.2":this.directives=new u0.Directives({version:"1.2"}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new Eoe.Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:o,reviver:s}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100,stringify:_oe.stringify},c=Coe.toJS(this.contents,r||"",a);if(typeof o=="function")for(let{count:l,res:u}of a.anchors.values())o(u,l);return typeof s=="function"?xoe.applyReviver(s,{"":c},"",c):c}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return Soe.stringifyDocument(this,e)}};function Qc(t){if(mn.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}nj.Document=mg});var Af=k(If=>{"use strict";var gg=class extends Error{constructor(e,r,n,i){super();this.name=e,this.code=n,this.message=i,this.pos=r}},ij=class extends gg{constructor(e,r,n){super("YAMLParseError",e,r,n)}},oj=class extends gg{constructor(e,r,n){super("YAMLWarning",e,r,n)}},koe=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){let a=Math.min(o-39,s.length-79);s="\u2026"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),s=a+s}if(/[^ ]/.test(s)){let a=1,c=r.linePos[1];c&&c.line===n&&c.col>i&&(a=Math.min(c.col-i,80-o));let l=" ".repeat(o)+"^".repeat(a);r.message+=`:

${s}
${l}
`}};If.YAMLError=gg;If.YAMLParseError=ij;If.YAMLWarning=oj;If.prettifyError=koe});var Tf=k(sj=>{"use strict";function Ioe(t,{flow:e,indicator:r,next:n,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",f="",d=!1,p=!1,h=null,m=null,g=null,v=null,w=null;for(let S of t)switch(p&&(S.type!=="space"&&S.type!=="newline"&&S.type!=="comma"&&o(S.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),S.type){case"space":!e&&c&&r!=="doc-start"&&S.source[0]==="	"&&o(S,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(S,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let _=S.source.substring(1)||" ";u?u+=f+_:u=_,f="",c=!1;break}case"newline":c?u?u+=S.source:a=!0:f+=S.source,c=!0,d=!0,l=!0;break;case"anchor":h&&o(S,"MULTIPLE_ANCHORS","A node can have at most one anchor"),h=S,w===null&&(w=S.offset),c=!1,l=!1,p=!0;break;case"tag":{m&&o(S,"MULTIPLE_TAGS","A node can have at most one tag"),m=S,w===null&&(w=S.offset),c=!1,l=!1,p=!0;break}case r:(h||m)&&o(S,"BAD_PROP_ORDER",`Anchors and tags must be after the ${S.source} indicator`),v&&o(S,"UNEXPECTED_TOKEN",`Unexpected ${S.source} in ${e||"collection"}`),v=S,c=!1,l=!1;break;case"comma":if(e){g&&o(S,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),g=S,c=!1,l=!1;break}default:o(S,"UNEXPECTED_TOKEN",`Unexpected ${S.type} token`),c=!1,l=!1}let b=t[t.length-1],C=b?b.offset+b.source.length:i;return p&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&o(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:v,spaceBefore:a,comment:u,hasNewline:d,anchor:h,tag:m,end:C,start:w!=null?w:C}}sj.resolveProps=Ioe});var vg=k(aj=>{"use strict";function f0(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(f0(e.key)||f0(e.value))return!0}return!1;default:return!0}}aj.containsNewline=f0});var d0=k(cj=>{"use strict";var Aoe=vg();function Toe(t,e,r){if((e==null?void 0:e.type)==="flow-collection"){let n=e.end[0];n.indent===t&&(n.source==="]"||n.source==="}")&&Aoe.containsNewline(e)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}cj.flowIndentCheck=Toe});var p0=k(uj=>{"use strict";var lj=Ke();function Doe(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let i=typeof n=="function"?n:(o,s)=>o===s||lj.isScalar(o)&&lj.isScalar(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,r))}uj.mapIncludes=Doe});var gj=k(mj=>{"use strict";var fj=Vi(),Roe=pa(),dj=Tf(),Ooe=vg(),pj=d0(),Noe=p0(),hj="All mapping items must start at the same column";function Loe({composeNode:t,composeEmptyNode:e},r,n,i){var o;let s=new Roe.YAMLMap(r.schema);r.atRoot&&(r.atRoot=!1);let a=n.offset;for(let c of n.items){let{start:l,key:u,sep:f,value:d}=c,p=dj.resolveProps(l,{indicator:"explicit-key-ind",next:u||(f==null?void 0:f[0]),offset:a,onError:i,startOnNewline:!0}),h=!p.found;if(h){if(u&&(u.type==="block-seq"?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==n.indent&&i(a,"BAD_INDENT",hj)),!p.anchor&&!p.tag&&!f){p.comment&&(s.comment?s.comment+=`
`+p.comment:s.comment=p.comment);continue}}else((o=p.found)===null||o===void 0?void 0:o.indent)!==n.indent&&i(a,"BAD_INDENT",hj);h&&Ooe.containsNewline(u)&&i(u,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");let m=p.end,g=u?t(r,u,p,i):e(r,m,l,null,p,i);r.schema.compat&&pj.flowIndentCheck(n.indent,u,i),Noe.mapIncludes(r,s.items,g)&&i(m,"DUPLICATE_KEY","Map keys must be unique");let v=dj.resolveProps(f||[],{indicator:"map-value-ind",next:d,offset:g.range[2],onError:i,startOnNewline:!u||u.type==="block-scalar"});if(a=v.end,v.found){h&&((d==null?void 0:d.type)==="block-map"&&!v.hasNewline&&i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&p.start<v.found.offset-1024&&i(g.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let w=d?t(r,d,v,i):e(r,a,f,null,v,i);r.schema.compat&&pj.flowIndentCheck(n.indent,d,i),a=w.range[2];let b=new fj.Pair(g,w);r.options.keepSourceTokens&&(b.srcToken=c),s.items.push(b)}else{h&&i(g.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),v.comment&&(g.comment?g.comment+=`
`+v.comment:g.comment=v.comment);let w=new fj.Pair(g);r.options.keepSourceTokens&&(w.srcToken=c),s.items.push(w)}}return s.range=[n.offset,a,a],s}mj.resolveBlockMap=Loe});var yj=k(vj=>{"use strict";var Foe=ha(),Moe=Tf(),qoe=d0();function $oe({composeNode:t,composeEmptyNode:e},r,n,i){let o=new Foe.YAMLSeq(r.schema);r.atRoot&&(r.atRoot=!1);let s=n.offset;for(let{start:a,value:c}of n.items){let l=Moe.resolveProps(a,{indicator:"seq-item-ind",next:c,offset:s,onError:i,startOnNewline:!0});if(s=l.end,!l.found)if(l.anchor||l.tag||c)c&&c.type==="block-seq"?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator");else{l.comment&&(o.comment=l.comment);continue}let u=c?t(r,c,l,i):e(r,s,a,null,l,i);r.schema.compat&&qoe.flowIndentCheck(n.indent,c,i),s=u.range[2],o.items.push(u)}return o.range=[n.offset,s,s],o}vj.resolveBlockSeq=$oe});var Xc=k(wj=>{"use strict";function joe(t,e,r,n){let i="";if(t){let o=!1,s="";for(let a of t){let{source:c,type:l}=a;switch(l){case"space":o=!0;break;case"comment":{r&&!o&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=c.substring(1)||" ";i?i+=s+u:i=u,s="";break}case"newline":i&&(s+=c),o=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}e+=c.length}}return{comment:i,offset:e}}wj.resolveEnd=joe});var _j=k(Ej=>{"use strict";var Uoe=Ke(),Boe=Vi(),Cj=pa(),Hoe=ha(),Voe=Xc(),bj=Tf(),Woe=vg(),Goe=p0(),h0="Block collections are not allowed within flow collections",m0=t=>t&&(t.type==="block-map"||t.type==="block-seq");function zoe({composeNode:t,composeEmptyNode:e},r,n,i){let o=n.start.source==="{",s=o?"flow map":"flow sequence",a=o?new Cj.YAMLMap(r.schema):new Hoe.YAMLSeq(r.schema);a.flow=!0;let c=r.atRoot;c&&(r.atRoot=!1);let l=n.offset+n.start.source.length;for(let h=0;h<n.items.length;++h){let m=n.items[h],{start:g,key:v,sep:w,value:b}=m,C=bj.resolveProps(g,{flow:s,indicator:"explicit-key-ind",next:v||(w==null?void 0:w[0]),offset:l,onError:i,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!w&&!b){h===0&&C.comma?i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):h<n.items.length-1&&i(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),C.comment&&(a.comment?a.comment+=`
`+C.comment:a.comment=C.comment),l=C.end;continue}!o&&r.options.strict&&Woe.containsNewline(v)&&i(v,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(h===0)C.comma&&i(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(C.comma||i(C.start,"MISSING_CHAR",`Missing , between ${s} items`),C.comment){let S="";e:for(let _ of g)switch(_.type){case"comma":case"space":break;case"comment":S=_.source.substring(1);break e;default:break e}if(S){let _=a.items[a.items.length-1];Uoe.isPair(_)&&(_=_.value||_.key),_.comment?_.comment+=`
`+S:_.comment=S,C.comment=C.comment.substring(S.length+1)}}if(!o&&!w&&!C.found){let S=b?t(r,b,C,i):e(r,C.end,w,null,C,i);a.items.push(S),l=S.range[2],m0(b)&&i(S.range,"BLOCK_IN_FLOW",h0)}else{let S=C.end,_=v?t(r,v,C,i):e(r,S,g,null,C,i);m0(v)&&i(_.range,"BLOCK_IN_FLOW",h0);let P=bj.resolveProps(w||[],{flow:s,indicator:"map-value-ind",next:b,offset:_.range[2],onError:i,startOnNewline:!1});if(P.found){if(!o&&!C.found&&r.options.strict){if(w)for(let R of w){if(R===P.found)break;if(R.type==="newline"){i(R,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<P.found.offset-1024&&i(P.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else b&&("source"in b&&b.source&&b.source[0]===":"?i(b,"MISSING_CHAR",`Missing space after : in ${s}`):i(P.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let I=b?t(r,b,P,i):P.found?e(r,P.end,w,null,P,i):null;I?m0(b)&&i(I.range,"BLOCK_IN_FLOW",h0):P.comment&&(_.comment?_.comment+=`
`+P.comment:_.comment=P.comment);let A=new Boe.Pair(_,I);if(r.options.keepSourceTokens&&(A.srcToken=m),o){let R=a;Goe.mapIncludes(r,R.items,_)&&i(S,"DUPLICATE_KEY","Map keys must be unique"),R.items.push(A)}else{let R=new Cj.YAMLMap(r.schema);R.flow=!0,R.items.push(A),a.items.push(R)}l=I?I.range[2]:P.end}}let u=o?"}":"]",[f,...d]=n.end,p=l;if(f&&f.source===u)p=f.offset+f.source.length;else{let h=s[0].toUpperCase()+s.substring(1),m=c?`${h} must end with a ${u}`:`${h} in block collection must be sufficiently indented and end with a ${u}`;i(l,c?"MISSING_CHAR":"BAD_INDENT",m),f&&f.source.length!==1&&d.unshift(f)}if(d.length>0){let h=Voe.resolveEnd(d,p,r.options.strict,i);h.comment&&(a.comment?a.comment+=`
`+h.comment:a.comment=h.comment),a.range=[n.offset,p,h.offset]}else a.range=[n.offset,p,p];return a}Ej.resolveFlowCollection=zoe});var Pj=k(xj=>{"use strict";var Sj=Ke(),Koe=kt(),Yoe=gj(),Joe=yj(),Qoe=_j();function Xoe(t,e,r,n,i){let o;switch(r.type){case"block-map":{o=Yoe.resolveBlockMap(t,e,r,i);break}case"block-seq":{o=Joe.resolveBlockSeq(t,e,r,i);break}case"flow-collection":{o=Qoe.resolveFlowCollection(t,e,r,i);break}}if(!n)return o;let s=e.directives.tagName(n.source,d=>i(n,"TAG_RESOLVE_FAILED",d));if(!s)return o;let a=o.constructor;if(s==="!"||s===a.tagName)return o.tag=a.tagName,o;let c=Sj.isMap(o)?"map":"seq",l=e.schema.tags.find(d=>d.collection===c&&d.tag===s);if(!l){let d=e.schema.knownTags[s];if(d&&d.collection===c)e.schema.tags.push(Object.assign({},d,{default:!1})),l=d;else return i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o}let u=l.resolve(o,d=>i(n,"TAG_RESOLVE_FAILED",d),e.options),f=Sj.isNode(u)?u:new Koe.Scalar(u);return f.range=o.range,f.tag=s,(l==null?void 0:l.format)&&(f.format=l.format),f}xj.composeCollection=Xoe});var v0=k(kj=>{"use strict";var g0=kt();function Zoe(t,e,r){let n=t.offset,i=ese(t,e,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let o=i.mode===">"?g0.Scalar.BLOCK_FOLDED:g0.Scalar.BLOCK_LITERAL,s=t.source?tse(t.source):[],a=s.length;for(let m=s.length-1;m>=0;--m){let g=s[m][1];if(g===""||g==="\r")a=m;else break}if(!t.source||a===0){let m=i.chomp==="+"?`
`.repeat(Math.max(0,s.length-1)):"",g=n+i.length;return t.source&&(g+=t.source.length),{value:m,type:o,comment:i.comment,range:[n,g,g]}}let c=t.indent+i.indent,l=t.offset+i.length,u=0;for(let m=0;m<a;++m){let[g,v]=s[m];if(v===""||v==="\r")i.indent===0&&g.length>c&&(c=g.length);else{if(g.length<c){let w="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";r(l+g.length,"MISSING_CHAR",w)}i.indent===0&&(c=g.length),u=m;break}l+=g.length+v.length+1}let f="",d="",p=!1;for(let m=0;m<u;++m)f+=s[m][0].slice(c)+`
`;for(let m=u;m<a;++m){let[g,v]=s[m];l+=g.length+v.length+1;let w=v[v.length-1]==="\r";if(w&&(v=v.slice(0,-1)),v&&g.length<c){let C=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(l-v.length-(w?2:1),"BAD_INDENT",C),g=""}o===g0.Scalar.BLOCK_LITERAL?(f+=d+g.slice(c)+v,d=`
`):g.length>c||v[0]==="	"?(d===" "?d=`
`:!p&&d===`
`&&(d=`

`),f+=d+g.slice(c)+v,d=`
`,p=!0):v===""?d===`
`?f+=`
`:d=`
`:(f+=d+v,d=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<s.length;++m)f+=`
`+s[m][0].slice(c);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}let h=n+i.length+t.source.length;return{value:f,type:o,comment:i.comment,range:[n,h,h]}}function ese({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],o=i[0],s=0,a="",c=-1;for(let d=1;d<i.length;++d){let p=i[d];if(!a&&(p==="-"||p==="+"))a=p;else{let h=Number(p);!s&&h?s=h:c===-1&&(c=t+d)}}c!==-1&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",f=i.length;for(let d=1;d<e.length;++d){let p=e[d];switch(p.type){case"space":l=!0;case"newline":f+=p.source.length;break;case"comment":r&&!l&&n(p,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=p.source.length,u=p.source.substring(1);break;case"error":n(p,"UNEXPECTED_TOKEN",p.message),f+=p.source.length;break;default:{let h=`Unexpected token in block scalar header: ${p.type}`;n(p,"UNEXPECTED_TOKEN",h);let m=p.source;m&&typeof m=="string"&&(f+=m.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:f}}function tse(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),o=[n&&n[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}kj.resolveBlockScalar=Zoe});var w0=k(Aj=>{"use strict";var y0=kt(),rse=Xc();function nse(t,e,r){let{offset:n,type:i,source:o,end:s}=t,a,c,l=(d,p,h)=>r(n+d,p,h);switch(i){case"scalar":a=y0.Scalar.PLAIN,c=ise(o,l);break;case"single-quoted-scalar":a=y0.Scalar.QUOTE_SINGLE,c=ose(o,l);break;case"double-quoted-scalar":a=y0.Scalar.QUOTE_DOUBLE,c=sse(o,l);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+o.length,n+o.length]}}let u=n+o.length,f=rse.resolveEnd(s,u,e,r);return{value:c,type:a,comment:f.comment,range:[n,u,f.offset]}}function ise(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),Ij(t)}function ose(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Ij(t.slice(1,-1)).replace(/''/g,"'")}function Ij(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],o=" ",s=e.lastIndex;for(r.lastIndex=s;n=r.exec(t);)n[1]===""?o===`
`?i+=o:o=`
`:(i+=o+n[1],o=" "),s=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=s,n=a.exec(t),i+o+(n&&n[1]||"")}function sse(t,e){let r="";for(let n=1;n<t.length-1;++n){let i=t[n];if(!(i==="\r"&&t[n+1]===`
`))if(i===`
`){let{fold:o,offset:s}=ase(t,n);r+=o,n=s}else if(i==="\\"){let o=t[++n],s=cse[o];if(s)r+=s;else if(o===`
`)for(o=t[n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="\r"&&t[n+1]===`
`)for(o=t[++n+1];o===" "||o==="	";)o=t[++n+1];else if(o==="x"||o==="u"||o==="U"){let a={x:2,u:4,U:8}[o];r+=lse(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(i===" "||i==="	"){let o=n,s=t[n+1];for(;s===" "||s==="	";)s=t[++n+1];s!==`
`&&!(s==="\r"&&t[n+2]===`
`)&&(r+=n>o?t.slice(o,n+1):i)}else r+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function ase(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var cse={"0":"\0",a:"\x07",b:"\b",e:"",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function lse(t,e,r,n){let i=t.substr(e,r),s=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}Aj.resolveFlowScalar=nse});var Rj=k(Dj=>{"use strict";var Zc=Ke(),Tj=kt(),use=v0(),fse=w0();function dse(t,e,r,n){let{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?use.resolveBlockScalar(e,t.options.strict,n):fse.resolveFlowScalar(e,t.options.strict,n),c=r?t.directives.tagName(r.source,f=>n(r,"TAG_RESOLVE_FAILED",f)):null,l=r&&c?pse(t.schema,i,c,r,n):e.type==="scalar"?hse(t,i,e,n):t.schema[Zc.SCALAR],u;try{let f=l.resolve(i,d=>n(r||e,"TAG_RESOLVE_FAILED",d),t.options);u=Zc.isScalar(f)?f:new Tj.Scalar(f)}catch(f){let d=f instanceof Error?f.message:String(f);n(r||e,"TAG_RESOLVE_FAILED",d),u=new Tj.Scalar(i)}return u.range=a,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function pse(t,e,r,n,i){var o;if(r==="!")return t[Zc.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if((o=c.test)===null||o===void 0?void 0:o.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[Zc.SCALAR])}function hse({directives:t,schema:e},r,n,i){let o=e.tags.find(s=>{var a;return s.default&&((a=s.test)===null||a===void 0?void 0:a.test(r))})||e[Zc.SCALAR];if(e.compat){let s=e.compat.find(a=>{var c;return a.default&&((c=a.test)===null||c===void 0?void 0:c.test(r))})||e[Zc.SCALAR];if(o.tag!==s.tag){let a=t.tagString(o.tag),c=t.tagString(s.tag),l=`Value may be parsed as either ${a} or ${c}`;i(n,"TAG_RESOLVE_FAILED",l,!0)}}return o}Dj.composeScalar=dse});var Nj=k(Oj=>{"use strict";function mse(t,e,r){if(e){r===null&&(r=e.length);for(let n=r-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++n];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++n];break}}return t}Oj.emptyScalarPosition=mse});var qj=k(C0=>{"use strict";var gse=uf(),vse=Pj(),Lj=Rj(),yse=Xc(),wse=Nj(),Cse={composeNode:Fj,composeEmptyNode:Mj};function Fj(t,e,r,n){let{spaceBefore:i,comment:o,anchor:s,tag:a}=r,c;switch(e.type){case"alias":c=bse(t,e,n),(s||a)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Lj.composeScalar(t,e,a,n),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=vse.composeCollection(Cse,t,e,a,n),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(e),new Error(`Unsupporten token type: ${e.type}`)}return s&&c.anchor===""&&n(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&(c.srcToken=e),c}function Mj(t,e,r,n,{spaceBefore:i,comment:o,anchor:s,tag:a},c){let l={type:"scalar",offset:wse.emptyScalarPosition(e,r,n),indent:-1,source:""},u=Lj.composeScalar(t,l,a,c);return s&&(u.anchor=s.source.substring(1),u.anchor===""&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(u.spaceBefore=!0),o&&(u.comment=o),u}function bse({options:t},{offset:e,source:r,end:n},i){let o=new gse.Alias(r.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string");let s=e+r.length,a=yse.resolveEnd(n,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}C0.composeEmptyNode=Mj;C0.composeNode=Fj});var Uj=k(jj=>{"use strict";var Ese=kf(),$j=qj(),_se=Xc(),Sse=Tf();function xse(t,e,{offset:r,start:n,value:i,end:o},s){let a=Object.assign({directives:e},t),c=new Ese.Document(void 0,a),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=Sse.resolveProps(n,{indicator:"doc-start",next:i||(o==null?void 0:o[0]),offset:r,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?$j.composeNode(l,i,u,s):$j.composeEmptyNode(l,u.end,n,null,u,s);let f=c.contents.range[2],d=_se.resolveEnd(o,f,!1,s);return d.comment&&(c.comment=d.comment),c.range=[r,f,d.offset],c}jj.composeDoc=xse});var b0=k(Wj=>{"use strict";var Pse=wE(),kse=kf(),Df=Af(),Bj=Ke(),Ise=Gm(),Ase=Uj(),Tse=Xc();function Rf(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function Hj(t){var e;let r="",n=!1,i=!1;for(let o=0;o<t.length;++o){let s=t[o];switch(s[0]){case"#":r+=(r===""?"":i?`

`:`
`)+(s.substring(1)||" "),n=!0,i=!1;break;case"%":((e=t[o+1])===null||e===void 0?void 0:e[0])!=="#"&&(o+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:r,afterEmptyLine:i}}var Vj=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,o)=>{let s=Rf(r);o?this.warnings.push(new Df.YAMLWarning(s,n,i)):this.errors.push(new Df.YAMLParseError(s,n,i))},this.directives=new Pse.Directives({version:e.version||Ise.defaultOptions.version}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:i}=Hj(this.prelude);if(n){let o=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.marker||!o)e.commentBefore=n;else if(Bj.isCollection(o)&&!o.flow&&o.items.length>0){let s=o.items[0];Bj.isPair(s)&&(s=s.key);let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}else{let s=o.commentBefore;o.commentBefore=s?`${n}
${s}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Hj(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let i of e)yield*this.next(i);yield*this.end(r,n)}*next(e){switch(process.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,i)=>{let o=Rf(e);o[0]+=r,this.onError(o,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=Ase.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Df.YAMLParseError(Rf(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Df.YAMLParseError(Rf(e),"UNEXPECTED_TOKEN",n));break}let r=Tse.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Df.YAMLParseError(Rf(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({directives:this.directives},this.options),i=new kse.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}};Wj.Composer=Vj});var Kj=k(yg=>{"use strict";var Dse=v0(),Rse=w0(),Ose=Af(),Gj=vf();function Nse(t,e=!0,r){if(t){let n=(i,o,s)=>{let a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(a,o,s);else throw new Ose.YAMLParseError([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Rse.resolveFlowScalar(t,e,n);case"block-scalar":return Dse.resolveBlockScalar(t,e,n)}}return null}function Lse(t,e){var r;let{implicitKey:n=!1,indent:i,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=e,c=Gj.stringifyString({type:a,value:t},{implicitKey:n,indent:i>0?" ".repeat(i):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=(r=e.end)!==null&&r!==void 0?r:[{type:"newline",offset:-1,indent:i,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),f=c.substring(0,u),d=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:i,source:f}];return zj(p,l)||p.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:s,indent:i,props:p,source:d}}case'"':return{type:"double-quoted-scalar",offset:s,indent:i,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:i,source:c,end:l};default:return{type:"scalar",offset:s,indent:i,source:c,end:l}}}function Fse(t,e,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{let l=t.props[0];if(l.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=l.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}let c=Gj.stringifyString({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":Mse(t,c);break;case'"':E0(t,c,"double-quoted-scalar");break;case"'":E0(t,c,"single-quoted-scalar");break;default:E0(t,c,"scalar")}}function Mse(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),i=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=n,t.source=i}else{let{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:n}];zj(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(let c of Object.keys(t))c!=="type"&&c!=="offset"&&delete t[c];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function zj(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function E0(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(let o of n)o.offset+=i;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let n=t.offset+e.length,i={type:"newline",offset:n,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[i]});break}default:{let n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(let o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:r,indent:n,source:e,end:i})}}}yg.createScalarToken=Lse;yg.resolveAsScalar=Nse;yg.setScalarValue=Fse});var Jj=k(Yj=>{"use strict";var qse=t=>"type"in t?wg(t):Cg(t);function wg(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=wg(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=Cg(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=Cg(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=Cg(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function Cg({start:t,key:e,sep:r,value:n}){let i="";for(let o of t)i+=o.source;if(e&&(i+=wg(e)),r)for(let o of r)i+=o.source;return n&&(i+=wg(n)),i}Yj.stringify=qse});var eU=k(Zj=>{"use strict";var _0=Symbol("break visit"),$se=Symbol("skip children"),Qj=Symbol("remove item");function ma(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Xj(Object.freeze([]),t,e)}ma.BREAK=_0;ma.SKIP=$se;ma.REMOVE=Qj;ma.itemAtPath=(t,e)=>{let r=t;for(let[n,i]of e){let o=r&&r[n];if(o&&"items"in o)r=o.items[i];else return}return r};ma.parentCollection=(t,e)=>{let r=ma.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=r&&r[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Xj(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let i of["key","value"]){let o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){let a=Xj(Object.freeze(t.concat([[i,s]])),o.items[s],r);if(typeof a=="number")s=a-1;else{if(a===_0)return _0;a===Qj&&(o.items.splice(s,1),s-=1)}}typeof n=="function"&&i==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}Zj.visit=ma});var bg=k(Pr=>{"use strict";var S0=Kj(),jse=Jj(),Use=eU(),x0="\uFEFF",P0="",k0="",I0="",Bse=t=>!!t&&"items"in t,Hse=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function Vse(t){switch(t){case x0:return"<BOM>";case P0:return"<DOC>";case k0:return"<FLOW_END>";case I0:return"<SCALAR>";default:return JSON.stringify(t)}}function Wse(t){switch(t){case x0:return"byte-order-mark";case P0:return"doc-mode";case k0:return"flow-error-end";case I0:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}Pr.createScalarToken=S0.createScalarToken;Pr.resolveAsScalar=S0.resolveAsScalar;Pr.setScalarValue=S0.setScalarValue;Pr.stringify=jse.stringify;Pr.visit=Use.visit;Pr.BOM=x0;Pr.DOCUMENT=P0;Pr.FLOW_END=k0;Pr.SCALAR=I0;Pr.isCollection=Bse;Pr.isScalar=Hse;Pr.prettyToken=Vse;Pr.tokenType=Wse});var T0=k(iU=>{"use strict";var Of=bg();function gn(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var tU="0123456789ABCDEFabcdef".split(""),Gse="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),rU=",[]{}".split(""),zse=` ,[]{}
\r	`.split(""),A0=t=>!t||zse.includes(t),nU=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!r;let n=this.next||"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&gn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Of.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");if(n!==-1){let o=e[n-1];(o===" "||o==="	")&&(r=n-1)}for(;;){let o=e[r-1];if(o===" "||o==="	")r-=1;else break}let i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Of.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if(r==="---"&&gn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(r==="..."&&gn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!gn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&gn(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(A0),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),r=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=r);while(e+r>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&gn(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield Of.FLOW_END,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(A0),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let s=this.charAt(1);if(this.flowKey||gn(s)||s===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let o=0;for(;this.buffer[r-1-o]==="\\";)o+=1;if(o%2==0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let o=this.continueScalar(i+1);if(o===-1)break;i=n.indexOf(`
`,o)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>gn(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let i=this.pos;n=this.buffer[i];++i)switch(n){case" ":r+=1;break;case`
`:e=i,r=0;break;case"\r":{let o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext+=this.blockScalarIndent;do{let i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];for(o==="\r"&&(o=this.buffer[--i]);o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos)e=i;else break}while(!0);return yield Of.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let o=this.buffer[n+1];if(gn(o)||e&&o===",")break;r=n}else if(gn(i)){let o=this.buffer[n+1];if(i==="\r"&&(o===`
`?(n+=1,i=`
`,o=this.buffer[n+1]):r=n),o==="#"||e&&rU.includes(o))break;if(i===`
`){let s=this.continueScalar(n+1);if(s===-1)break;n=Math.max(n,s-2)}}else{if(e&&rU.includes(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield Of.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(A0))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(gn(this.charAt(1)))return this.flowLevel===0?this.indentNext=this.indentValue+1:this.flowKey&&(this.flowKey=!1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!gn(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(Gse.includes(r))r=this.buffer[++e];else if(r==="%"&&tU.includes(this.buffer[e+1])&&tU.includes(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};iU.Lexer=nU});var D0=k(sU=>{"use strict";var oU=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let o=r+n>>1;this.lineStarts[o]<e?r=o+1:n=o}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let i=this.lineStarts[r-1];return{line:r,col:e-i+1}}}};sU.LineCounter=oU});var O0=k(fU=>{"use strict";var aU=bg(),Kse=T0();function mi(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function R0(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function cU(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Eg(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep||e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Nf(t){var e;if(t.length===0)return[];let r=t.length;e:for(;--r>=0;)switch(t[r].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((e=t[++r])===null||e===void 0?void 0:e.type)==="space";);return t.splice(r,t.length)}function lU(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!mi(e.start,"explicit-key-ind")&&!mi(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,cU(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var uU=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Kse.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,process.env.LOG_TOKENS&&console.log("|",aU.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=aU.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e||this.stack.pop();if(r)if(this.stack.length===0)yield r;else{let n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&lU(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!mi(i.start,"explicit-key-ind");return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&!R0(i.start)&&(r.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}else{let n="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:n}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{R0(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=Eg(this.peek(2)),n=Nf(r),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let i=!this.onKeyLine&&this.indent===e.indent&&(n.sep||R0(n.start));switch(this.type){case"anchor":case"tag":i||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!mi(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(!n.sep)Object.assign(n,{key:null,sep:[this.sourceToken]});else if(n.value||i&&!mi(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(mi(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(mi(n.start,"explicit-key-ind")&&cU(n.key)&&!mi(n.sep,"newline")){let o=Nf(n.start),s=n.key,a=n.sep;a.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:s,sep:a}]})}else n.sep.push(this.sourceToken);this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||n.value?(e.items.push({start:[],key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){i&&o.type!=="block-seq"&&mi(n.start,"explicit-key-ind")&&e.items.push({start:[]}),this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;let n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){let i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){let i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)===null||r===void 0?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||mi(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){let i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n&&n.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=Eg(n),o=Nf(i);lU(e);let s=e.end.splice(1,e.end.length);s.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=Eg(e),n=Nf(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=!0;let r=Eg(e),n=Nf(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};fU.Parser=uU});var gU=k(Ff=>{"use strict";var dU=b0(),Yse=kf(),Lf=Af(),Jse=kE(),Qse=D0(),pU=O0();function hU(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Qse.LineCounter||null,prettyErrors:e}}function Xse(t,e={}){let{lineCounter:r,prettyErrors:n}=hU(e),i=new pU.Parser(r==null?void 0:r.addNewLine),o=new dU.Composer(e),s=Array.from(o.compose(i.parse(t)));if(n&&r)for(let a of s)a.errors.forEach(Lf.prettifyError(t,r)),a.warnings.forEach(Lf.prettifyError(t,r));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function mU(t,e={}){let{lineCounter:r,prettyErrors:n}=hU(e),i=new pU.Parser(r==null?void 0:r.addNewLine),o=new dU.Composer(e),s=null;for(let a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Lf.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(s.errors.forEach(Lf.prettifyError(t,r)),s.warnings.forEach(Lf.prettifyError(t,r))),s}function Zse(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let i=mU(t,r);if(!i)return null;if(i.warnings.forEach(o=>Jse.warn(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function eae(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){let{keepUndefined:i}=r||e||{};if(!i)return}return new Yse.Document(t,n,r).toString(r)}Ff.parse=Zse;Ff.parseAllDocuments=Xse;Ff.parseDocument=mU;Ff.stringify=eae});var vU=k(Ye=>{"use strict";var tae=b0(),rae=kf(),nae=a0(),N0=Af(),iae=uf(),Go=Ke(),oae=Vi(),sae=kt(),aae=pa(),cae=ha(),lae=Gm(),uae=bg(),fae=T0(),dae=D0(),pae=O0(),_g=gU(),hae=af();Ye.Composer=tae.Composer;Ye.Document=rae.Document;Ye.Schema=nae.Schema;Ye.YAMLError=N0.YAMLError;Ye.YAMLParseError=N0.YAMLParseError;Ye.YAMLWarning=N0.YAMLWarning;Ye.Alias=iae.Alias;Ye.isAlias=Go.isAlias;Ye.isCollection=Go.isCollection;Ye.isDocument=Go.isDocument;Ye.isMap=Go.isMap;Ye.isNode=Go.isNode;Ye.isPair=Go.isPair;Ye.isScalar=Go.isScalar;Ye.isSeq=Go.isSeq;Ye.Pair=oae.Pair;Ye.Scalar=sae.Scalar;Ye.YAMLMap=aae.YAMLMap;Ye.YAMLSeq=cae.YAMLSeq;Ye.defaultOptions=lae.defaultOptions;Ye.CST=uae;Ye.Lexer=fae.Lexer;Ye.LineCounter=dae.LineCounter;Ye.Parser=pae.Parser;Ye.parse=_g.parse;Ye.parseAllDocuments=_g.parseAllDocuments;Ye.parseDocument=_g.parseDocument;Ye.stringify=_g.stringify;Ye.visit=hae.visit});var yU=k((N_e,mae)=>{mae.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var L0=k((L_e,wU)=>{"use strict";wU.exports=yU()});var Sg=k((F_e,CU)=>{CU.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var _U=k((M_e,EU)=>{"use strict";var bU={};function gae(t){var e,r,n=bU[t];if(n)return n;for(n=bU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function xg(t,e,r){var n,i,o,s,a,c="";for(typeof e!="string"&&(r=e,e=xg.defaultChars),typeof r=="undefined"&&(r=!0),a=gae(e),n=0,i=t.length;n<i;n++){if(o=t.charCodeAt(n),r&&o===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(o<128){c+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<i&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}xg.defaultChars=";/?:@&=+$,-_.!~*'()#";xg.componentChars="-_.!~*'()";EU.exports=xg});var PU=k((q_e,xU)=>{"use strict";var SU={};function vae(t){var e,r,n=SU[t];if(n)return n;for(n=SU[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function Pg(t,e){var r;return typeof e!="string"&&(e=Pg.defaultChars),r=vae(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,o,s,a,c,l,u,f="";for(i=0,o=n.length;i<o;i+=3){if(s=parseInt(n.slice(i+1,i+3),16),s<128){f+=r[s];continue}if((s&224)==192&&i+3<o&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)==128)){u=s<<6&1984|a&63,u<128?f+="\uFFFD\uFFFD":f+=String.fromCharCode(u),i+=3;continue}if((s&240)==224&&i+6<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),(a&192)==128&&(c&192)==128)){u=s<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?f+="\uFFFD\uFFFD\uFFFD":f+=String.fromCharCode(u),i+=6;continue}if((s&248)==240&&i+9<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),l=parseInt(n.slice(i+10,i+12),16),(a&192)==128&&(c&192)==128&&(l&192)==128)){u=s<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?f+="\uFFFD\uFFFD\uFFFD\uFFFD":(u-=65536,f+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),i+=9;continue}f+="\uFFFD"}return f})}Pg.defaultChars=";/?:@&=+$,#";Pg.componentChars="";xU.exports=Pg});var IU=k(($_e,kU)=>{"use strict";kU.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var LU=k((j_e,NU)=>{"use strict";function kg(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var yae=/^([a-z0-9.+-]+:)/i,wae=/:[0-9]*$/,Cae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,bae=["<",">",'"',"`"," ","\r",`
`,"	"],Eae=["{","}","|","\\","^","`"].concat(bae),_ae=["'"].concat(Eae),AU=["%","/","?",";","#"].concat(_ae),TU=["/","?","#"],Sae=255,DU=/^[+a-z0-9A-Z_-]{0,63}$/,xae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,RU={javascript:!0,"javascript:":!0},OU={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Pae(t,e){if(t&&t instanceof kg)return t;var r=new kg;return r.parse(t,e),r}kg.prototype.parse=function(t,e){var r,n,i,o,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=Cae.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=yae.exec(a);if(l&&(l=l[0],i=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(l&&RU[l])&&(a=a.substr(2),this.slashes=!0)),!RU[l]&&(s||l&&!OU[l])){var u=-1;for(r=0;r<TU.length;r++)o=a.indexOf(TU[r]),o!==-1&&(u===-1||o<u)&&(u=o);var f,d;for(u===-1?d=a.lastIndexOf("@"):d=a.lastIndexOf("@",u),d!==-1&&(f=a.slice(0,d),a=a.slice(d+1),this.auth=f),u=-1,r=0;r<AU.length;r++)o=a.indexOf(AU[r]),o!==-1&&(u===-1||o<u)&&(u=o);u===-1&&(u=a.length),a[u-1]===":"&&u--;var p=a.slice(0,u);a=a.slice(u),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(!!g&&!g.match(DU)){for(var v="",w=0,b=g.length;w<b;w++)g.charCodeAt(w)>127?v+="x":v+=g[w];if(!v.match(DU)){var C=m.slice(0,r),S=m.slice(r+1),_=g.match(xae);_&&(C.push(_[1]),S.unshift(_[2])),S.length&&(a=S.join(".")+a),this.hostname=C.join(".");break}}}}this.hostname.length>Sae&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var P=a.indexOf("#");P!==-1&&(this.hash=a.substr(P),a=a.slice(0,P));var I=a.indexOf("?");return I!==-1&&(this.search=a.substr(I),a=a.slice(0,I)),a&&(this.pathname=a),OU[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};kg.prototype.parseHost=function(t){var e=wae.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};NU.exports=Pae});var F0=k((U_e,Mf)=>{"use strict";Mf.exports.encode=_U();Mf.exports.decode=PU();Mf.exports.format=IU();Mf.exports.parse=LU()});var M0=k((B_e,FU)=>{FU.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var q0=k((H_e,MU)=>{MU.exports=/[\0-\x1F\x7F-\x9F]/});var $U=k((V_e,qU)=>{qU.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var $0=k((W_e,jU)=>{jU.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var UU=k(el=>{"use strict";el.Any=M0();el.Cc=q0();el.Cf=$U();el.P=Sg();el.Z=$0()});var ze=k(Lt=>{"use strict";function kae(t){return Object.prototype.toString.call(t)}function Iae(t){return kae(t)==="[object String]"}var Aae=Object.prototype.hasOwnProperty;function BU(t,e){return Aae.call(t,e)}function Tae(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function Dae(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function HU(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function VU(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var WU=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,Rae=/&([a-z#][a-z0-9]{1,31});/gi,Oae=new RegExp(WU.source+"|"+Rae.source,"gi"),Nae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,GU=L0();function Lae(t,e){var r=0;return BU(GU,e)?GU[e]:e.charCodeAt(0)===35&&Nae.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),HU(r))?VU(r):t}function Fae(t){return t.indexOf("\\")<0?t:t.replace(WU,"$1")}function Mae(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Oae,function(e,r,n){return r||Lae(e,n)})}var qae=/[&<>"]/,$ae=/[&<>"]/g,jae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Uae(t){return jae[t]}function Bae(t){return qae.test(t)?t.replace($ae,Uae):t}var Hae=/[.?*+^$[\]\\(){}|-]/g;function Vae(t){return t.replace(Hae,"\\$&")}function Wae(t){switch(t){case 9:case 32:return!0}return!1}function Gae(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var zae=Sg();function Kae(t){return zae.test(t)}function Yae(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Jae(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(//g,"\xDF")),t.toLowerCase().toUpperCase()}Lt.lib={};Lt.lib.mdurl=F0();Lt.lib.ucmicro=UU();Lt.assign=Tae;Lt.isString=Iae;Lt.has=BU;Lt.unescapeMd=Fae;Lt.unescapeAll=Mae;Lt.isValidEntityCode=HU;Lt.fromCodePoint=VU;Lt.escapeHtml=Bae;Lt.arrayReplaceAt=Dae;Lt.isSpace=Wae;Lt.isWhiteSpace=Gae;Lt.isMdAsciiPunct=Yae;Lt.isPunctChar=Kae;Lt.escapeRE=Vae;Lt.normalizeReference=Jae});var KU=k((K_e,zU)=>{"use strict";zU.exports=function(e,r,n){var i,o,s,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=r+1,i=1;e.pos<l;){if(s=e.src.charCodeAt(e.pos),s===93&&(i--,i===0)){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)i++;else if(n)return e.pos=u,-1}}return o&&(c=e.pos),e.pos=u,c}});var QU=k((Y_e,JU)=>{"use strict";var YU=ze().unescapeAll;JU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(i=e.charCodeAt(r),i===10||i===60)return c;if(i===62)return c.pos=r+1,c.str=YU(e.slice(a+1,r)),c.ok=!0,c;if(i===92&&r+1<n){r+=2;continue}r++}return c}for(o=0;r<n&&(i=e.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(o++,o>32))return c;if(i===41){if(o===0)break;o--}r++}return a===r||o!==0||(c.str=YU(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var ZU=k((J_e,XU)=>{"use strict";var Qae=ze().unescapeAll;XU.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(o=e.charCodeAt(r),o!==34&&o!==39&&o!==40))return c;for(r++,o===40&&(o=41);r<n;){if(i=e.charCodeAt(r),i===o)return c.pos=r+1,c.lines=s,c.str=Qae(e.slice(a+1,r)),c.ok=!0,c;if(i===40&&o===41)return c;i===10?s++:i===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var eB=k(Ig=>{"use strict";Ig.parseLinkLabel=KU();Ig.parseLinkDestination=QU();Ig.parseLinkTitle=ZU()});var rB=k((X_e,tB)=>{"use strict";var Xae=ze().assign,Zae=ze().unescapeAll,ga=ze().escapeHtml,gi={};gi.code_inline=function(t,e,r,n,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+ga(t[e].content)+"</code>"};gi.code_block=function(t,e,r,n,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+ga(t[e].content)+`</code></pre>
`};gi.fence=function(t,e,r,n,i){var o=t[e],s=o.info?Zae(o.info).trim():"",a="",c="",l,u,f,d,p;return s&&(f=s.split(/(\s+)/g),a=f[0],c=f.slice(2).join("")),r.highlight?l=r.highlight(o.content,a,c)||ga(o.content):l=ga(o.content),l.indexOf("<pre")===0?l+`
`:s?(u=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[],u<0?d.push(["class",r.langPrefix+a]):(d[u]=d[u].slice(),d[u][1]+=" "+r.langPrefix+a),p={attrs:d},"<pre><code"+i.renderAttrs(p)+">"+l+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+l+`</code></pre>
`};gi.image=function(t,e,r,n,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};gi.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};gi.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};gi.text=function(t,e){return ga(t[e].content)};gi.html_block=function(t,e){return t[e].content};gi.html_inline=function(t,e){return t[e].content};function tl(){this.rules=Xae({},gi)}tl.prototype.renderAttrs=function(e){var r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+ga(e.attrs[r][0])+'="'+ga(e.attrs[r][1])+'"';return i};tl.prototype.renderToken=function(e,r,n){var i,o="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(o+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(i=e[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(s=!1))),o+=s?`>
`:">",o)};tl.prototype.renderInline=function(t,e,r){for(var n,i="",o=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof o[n]!="undefined"?i+=o[n](t,s,e,r,this):i+=this.renderToken(t,s,e);return i};tl.prototype.renderInlineAsText=function(t,e,r){for(var n="",i=0,o=t.length;i<o;i++)t[i].type==="text"?n+=t[i].content:t[i].type==="image"?n+=this.renderInlineAsText(t[i].children,e,r):t[i].type==="softbreak"&&(n+=`
`);return n};tl.prototype.render=function(t,e,r){var n,i,o,s="",a=this.rules;for(n=0,i=t.length;n<i;n++)o=t[n].type,o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[o]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};tB.exports=tl});var Ag=k((Z_e,nB)=>{"use strict";function Mn(){this.__rules__=[],this.__cache__=null}Mn.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Mn.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};Mn.prototype.at=function(t,e,r){var n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Mn.prototype.before=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Mn.prototype.after=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Mn.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Mn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Mn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Mn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Mn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};nB.exports=Mn});var oB=k((eSe,iB)=>{"use strict";var ece=/\r\n?|\n/g,tce=/\0/g;iB.exports=function(e){var r;r=e.src.replace(ece,`
`),r=r.replace(tce,"\uFFFD"),e.src=r}});var aB=k((tSe,sB)=>{"use strict";sB.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var lB=k((rSe,cB)=>{"use strict";cB.exports=function(e){var r=e.tokens,n,i,o;for(i=0,o=r.length;i<o;i++)n=r[i],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var fB=k((nSe,uB)=>{"use strict";var rce=ze().arrayReplaceAt;function nce(t){return/^<a[>\s]/i.test(t)}function ice(t){return/^<\/a\s*>/i.test(t)}uB.exports=function(e){var r,n,i,o,s,a,c,l,u,f,d,p,h,m,g,v,w=e.tokens,b;if(!!e.md.options.linkify){for(n=0,i=w.length;n<i;n++)if(!(w[n].type!=="inline"||!e.md.linkify.pretest(w[n].content)))for(o=w[n].children,h=0,r=o.length-1;r>=0;r--){if(a=o[r],a.type==="link_close"){for(r--;o[r].level!==a.level&&o[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(nce(a.content)&&h>0&&h--,ice(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,b=e.md.linkify.match(u),c=[],p=a.level,d=0,l=0;l<b.length;l++)m=b[l].url,g=e.md.normalizeLink(m),!!e.md.validateLink(g)&&(v=b[l].text,b[l].schema?b[l].schema==="mailto:"&&!/^mailto:/i.test(v)?v=e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=e.md.normalizeLinkText(v):v=e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),f=b[l].index,f>d&&(s=new e.Token("text","",0),s.content=u.slice(d,f),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",g]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=v,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),d=b[l].lastIndex);d<u.length&&(s=new e.Token("text","",0),s.content=u.slice(d),s.level=p,c.push(s)),w[n].children=o=rce(o,r,c)}}}}});var hB=k((iSe,pB)=>{"use strict";var dB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,oce=/\((c|tm|r|p)\)/i,sce=/\((c|tm|r|p)\)/ig,ace={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function cce(t,e){return ace[e.toLowerCase()]}function lce(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(sce,cce)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function uce(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&dB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}pB.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&(oce.test(e.tokens[r].content)&&lce(e.tokens[r].children),dB.test(e.tokens[r].content)&&uce(e.tokens[r].children))}});var bB=k((oSe,CB)=>{"use strict";var mB=ze().isWhiteSpace,gB=ze().isPunctChar,vB=ze().isMdAsciiPunct,fce=/['"]/,yB=/['"]/g,wB="\u2019";function Tg(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function dce(t,e){var r,n,i,o,s,a,c,l,u,f,d,p,h,m,g,v,w,b,C,S,_;for(C=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,w=C.length-1;w>=0&&!(C[w].level<=c);w--);if(C.length=w+1,n.type!=="text")continue;i=n.content,s=0,a=i.length;e:for(;s<a&&(yB.lastIndex=s,o=yB.exec(i),!!o);){if(g=v=!0,s=o.index+1,b=o[0]==="'",u=32,o.index-1>=0)u=i.charCodeAt(o.index-1);else for(w=r-1;w>=0&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w--)if(!!t[w].content){u=t[w].content.charCodeAt(t[w].content.length-1);break}if(f=32,s<a)f=i.charCodeAt(s);else for(w=r+1;w<t.length&&!(t[w].type==="softbreak"||t[w].type==="hardbreak");w++)if(!!t[w].content){f=t[w].content.charCodeAt(0);break}if(d=vB(u)||gB(String.fromCharCode(u)),p=vB(f)||gB(String.fromCharCode(f)),h=mB(u),m=mB(f),m?g=!1:p&&(h||d||(g=!1)),h?v=!1:d&&(m||p||(v=!1)),f===34&&o[0]==='"'&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=d,v=p),!g&&!v){b&&(n.content=Tg(n.content,o.index,wB));continue}if(v){for(w=C.length-1;w>=0&&(l=C[w],!(C[w].level<c));w--)if(l.single===b&&C[w].level===c){l=C[w],b?(S=e.md.options.quotes[2],_=e.md.options.quotes[3]):(S=e.md.options.quotes[0],_=e.md.options.quotes[1]),n.content=Tg(n.content,o.index,_),t[l.token].content=Tg(t[l.token].content,l.pos,S),s+=_.length-1,l.token===r&&(s+=S.length-1),i=n.content,a=i.length,C.length=w;continue e}}g?C.push({token:r,pos:o.index,single:b,level:c}):v&&b&&(n.content=Tg(n.content,o.index,wB))}}}CB.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!fce.test(e.tokens[r].content)||dce(e.tokens[r].children,e)}});var Dg=k((sSe,EB)=>{"use strict";function rl(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}rl.prototype.attrIndex=function(e){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};rl.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};rl.prototype.attrSet=function(e,r){var n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};rl.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};rl.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};EB.exports=rl});var xB=k((aSe,SB)=>{"use strict";var pce=Dg();function _B(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}_B.prototype.Token=pce;SB.exports=_B});var kB=k((cSe,PB)=>{"use strict";var hce=Ag(),j0=[["normalize",oB()],["block",aB()],["inline",lB()],["linkify",fB()],["replacements",hB()],["smartquotes",bB()]];function U0(){this.ruler=new hce;for(var t=0;t<j0.length;t++)this.ruler.push(j0[t][0],j0[t][1])}U0.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};U0.prototype.State=xB();PB.exports=U0});var TB=k((lSe,AB)=>{"use strict";var B0=ze().isSpace;function H0(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function IB(t){var e=[],r=0,n=t.length,i,o=!1,s=0,a="";for(i=t.charCodeAt(r);r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}AB.exports=function(e,r,n,i){var o,s,a,c,l,u,f,d,p,h,m,g,v,w,b,C,S,_;if(r+2>n||(u=r+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(S=e.src.charCodeAt(a++),S!==124&&S!==45&&S!==58)||a>=e.eMarks[u]||(_=e.src.charCodeAt(a++),_!==124&&_!==45&&_!==58&&!B0(_))||S===45&&B0(_))return!1;for(;a<e.eMarks[u];){if(o=e.src.charCodeAt(a),o!==124&&o!==45&&o!==58&&!B0(o))return!1;a++}for(s=H0(e,r+1),f=s.split("|"),h=[],c=0;c<f.length;c++){if(m=f[c].trim(),!m){if(c===0||c===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;m.charCodeAt(m.length-1)===58?h.push(m.charCodeAt(0)===58?"center":"right"):m.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=H0(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(f=IB(s),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),d=f.length,d===0||d!==h.length))return!1;if(i)return!0;for(w=e.parentType,e.parentType="table",C=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=g=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<f.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=f[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),u=r+2;u<n&&!(e.sCount[u]<e.blkIndent);u++){for(b=!1,c=0,l=C.length;c<l;c++)if(C[c](e,u,n,!0)){b=!0;break}if(b||(s=H0(e,u).trim(),!s)||e.sCount[u]-e.blkIndent>=4)break;for(f=IB(s),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),u===r+2&&(p=e.push("tbody_open","tbody",1),p.map=v=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[u,u+1],c=0;c<d;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=f[c]?f[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return v&&(p=e.push("tbody_close","tbody",-1),v[1]=u),p=e.push("table_close","table",-1),g[1]=u,e.parentType=w,e.line=u,!0}});var RB=k((uSe,DB)=>{"use strict";DB.exports=function(e,r,n){var i,o,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(o=i=r+1;i<n;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=o,s=e.push("code_block","code",0),s.content=e.getLines(r,o,4+e.blkIndent,!1)+`
`,s.map=[r,e.line],!0}});var NB=k((fSe,OB)=>{"use strict";OB.exports=function(e,r,n,i){var o,s,a,c,l,u,f,d=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(o=e.src.charCodeAt(p),o!==126&&o!==96)||(l=p,p=e.skipChars(p,o),s=p-l,s<3)||(f=e.src.slice(l,p),a=e.src.slice(p,h),o===96&&a.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(c=r;c++,!(c>=n||(p=l=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,o),!(p-l<s)&&(p=e.skipSpaces(p),!(p<h)))){d=!0;break}return s=e.sCount[r],e.line=c+(d?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(r+1,c,s,!0),u.markup=f,u.map=[r,e.line],!0}});var MB=k((dSe,FB)=>{"use strict";var LB=ze().isSpace;FB.exports=function(e,r,n,i){var o,s,a,c,l,u,f,d,p,h,m,g,v,w,b,C,S,_,P,I,A=e.lineMax,R=e.bMarks[r]+e.tShift[r],F=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(R++)!==62)return!1;if(i)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(R)===32?(R++,c++,p++,o=!1,C=!0):e.src.charCodeAt(R)===9?(C=!0,(e.bsCount[r]+p)%4==3?(R++,c++,p++,o=!1):o=!0):C=!1,h=[e.bMarks[r]],e.bMarks[r]=R;R<F&&(s=e.src.charCodeAt(R),LB(s));){s===9?p+=4-(p+e.bsCount[r]+(o?1:0))%4:p++;R++}for(m=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(C?1:0),u=R>=F,w=[e.sCount[r]],e.sCount[r]=p-c,b=[e.tShift[r]],e.tShift[r]=R-e.bMarks[r],_=e.md.block.ruler.getRules("blockquote"),v=e.parentType,e.parentType="blockquote",d=r+1;d<n&&(I=e.sCount[d]<e.blkIndent,R=e.bMarks[d]+e.tShift[d],F=e.eMarks[d],!(R>=F));d++){if(e.src.charCodeAt(R++)===62&&!I){for(c=p=e.sCount[d]+1,e.src.charCodeAt(R)===32?(R++,c++,p++,o=!1,C=!0):e.src.charCodeAt(R)===9?(C=!0,(e.bsCount[d]+p)%4==3?(R++,c++,p++,o=!1):o=!0):C=!1,h.push(e.bMarks[d]),e.bMarks[d]=R;R<F&&(s=e.src.charCodeAt(R),LB(s));){s===9?p+=4-(p+e.bsCount[d]+(o?1:0))%4:p++;R++}u=R>=F,m.push(e.bsCount[d]),e.bsCount[d]=e.sCount[d]+1+(C?1:0),w.push(e.sCount[d]),e.sCount[d]=p-c,b.push(e.tShift[d]),e.tShift[d]=R-e.bMarks[d];continue}if(u)break;for(S=!1,a=0,l=_.length;a<l;a++)if(_[a](e,d,n,!0)){S=!0;break}if(S){e.lineMax=d,e.blkIndent!==0&&(h.push(e.bMarks[d]),m.push(e.bsCount[d]),b.push(e.tShift[d]),w.push(e.sCount[d]),e.sCount[d]-=e.blkIndent);break}h.push(e.bMarks[d]),m.push(e.bsCount[d]),b.push(e.tShift[d]),w.push(e.sCount[d]),e.sCount[d]=-1}for(g=e.blkIndent,e.blkIndent=0,P=e.push("blockquote_open","blockquote",1),P.markup=">",P.map=f=[r,0],e.md.block.tokenize(e,r,d),P=e.push("blockquote_close","blockquote",-1),P.markup=">",e.lineMax=A,e.parentType=v,f[1]=e.line,a=0;a<b.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=b[a],e.sCount[a+r]=w[a],e.bsCount[a+r]=m[a];return e.blkIndent=g,!0}});var $B=k((pSe,qB)=>{"use strict";var mce=ze().isSpace;qB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l++),o!==42&&o!==45&&o!==95))return!1;for(s=1;l<u;){if(a=e.src.charCodeAt(l++),a!==o&&!mce(a))return!1;a===o&&s++}return s<3?!1:(i||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(o))),!0)}});var VB=k((hSe,HB)=>{"use strict";var jB=ze().isSpace;function UB(t,e){var r,n,i,o;return n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(o=t.src.charCodeAt(n),!jB(o))?-1:n}function BB(t,e){var r,n=t.bMarks[e]+t.tShift[e],i=n,o=t.eMarks[e];if(i+1>=o||(r=t.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=t.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<o&&(r=t.src.charCodeAt(i),!jB(r))?-1:i}function gce(t,e){var r,n,i=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===i&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}HB.exports=function(e,r,n,i){var o,s,a,c,l,u,f,d,p,h,m,g,v,w,b,C,S,_,P,I,A,R,F,H,X,J,Y,te,M=!1,L=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.sCount[r]>=e.blkIndent&&(M=!0),(F=BB(e,r))>=0){if(f=!0,X=e.bMarks[r]+e.tShift[r],v=Number(e.src.slice(X,F-1)),M&&v!==1)return!1}else if((F=UB(e,r))>=0)f=!1;else return!1;if(M&&e.skipSpaces(F)>=e.eMarks[r])return!1;if(g=e.src.charCodeAt(F-1),i)return!0;for(m=e.tokens.length,f?(te=e.push("ordered_list_open","ol",1),v!==1&&(te.attrs=[["start",v]])):te=e.push("bullet_list_open","ul",1),te.map=h=[r,0],te.markup=String.fromCharCode(g),b=r,H=!1,Y=e.md.block.ruler.getRules("list"),_=e.parentType,e.parentType="list";b<n;){for(R=F,w=e.eMarks[b],u=C=e.sCount[b]+F-(e.bMarks[r]+e.tShift[r]);R<w;){if(o=e.src.charCodeAt(R),o===9)C+=4-(C+e.bsCount[b])%4;else if(o===32)C++;else break;R++}if(s=R,s>=w?l=1:l=C-u,l>4&&(l=1),c=u+l,te=e.push("list_item_open","li",1),te.markup=String.fromCharCode(g),te.map=d=[r,0],f&&(te.info=e.src.slice(X,F-1)),A=e.tight,I=e.tShift[r],P=e.sCount[r],S=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=C,s>=w&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||H)&&(L=!1),H=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=S,e.tShift[r]=I,e.sCount[r]=P,e.tight=A,te=e.push("list_item_close","li",-1),te.markup=String.fromCharCode(g),b=r=e.line,d[1]=b,s=e.bMarks[r],b>=n||e.sCount[b]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(J=!1,a=0,p=Y.length;a<p;a++)if(Y[a](e,b,n,!0)){J=!0;break}if(J)break;if(f){if(F=BB(e,b),F<0)break;X=e.bMarks[b]+e.tShift[b]}else if(F=UB(e,b),F<0)break;if(g!==e.src.charCodeAt(F-1))break}return f?te=e.push("ordered_list_close","ol",-1):te=e.push("bullet_list_close","ul",-1),te.markup=String.fromCharCode(g),h[1]=b,e.line=b,e.parentType=_,L&&gce(e,m),!0}});var GB=k((mSe,WB)=>{"use strict";var vce=ze().normalizeReference,Rg=ze().isSpace;WB.exports=function(e,r,n,i){var o,s,a,c,l,u,f,d,p,h,m,g,v,w,b,C,S=0,_=e.bMarks[r]+e.tShift[r],P=e.eMarks[r],I=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(_)!==91)return!1;for(;++_<P;)if(e.src.charCodeAt(_)===93&&e.src.charCodeAt(_-1)!==92){if(_+1===P||e.src.charCodeAt(_+1)!==58)return!1;break}for(c=e.lineMax,b=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";I<c&&!e.isEmpty(I);I++)if(!(e.sCount[I]-e.blkIndent>3)&&!(e.sCount[I]<0)){for(w=!1,u=0,f=b.length;u<f;u++)if(b[u](e,I,c,!0)){w=!0;break}if(w)break}for(v=e.getLines(r,I,e.blkIndent,!1).trim(),P=v.length,_=1;_<P;_++){if(o=v.charCodeAt(_),o===91)return!1;if(o===93){p=_;break}else o===10?S++:o===92&&(_++,_<P&&v.charCodeAt(_)===10&&S++)}if(p<0||v.charCodeAt(p+1)!==58)return!1;for(_=p+2;_<P;_++)if(o=v.charCodeAt(_),o===10)S++;else if(!Rg(o))break;if(m=e.md.helpers.parseLinkDestination(v,_,P),!m.ok||(l=e.md.normalizeLink(m.str),!e.md.validateLink(l)))return!1;for(_=m.pos,S+=m.lines,s=_,a=S,g=_;_<P;_++)if(o=v.charCodeAt(_),o===10)S++;else if(!Rg(o))break;for(m=e.md.helpers.parseLinkTitle(v,_,P),_<P&&g!==_&&m.ok?(C=m.str,_=m.pos,S+=m.lines):(C="",_=s,S=a);_<P&&(o=v.charCodeAt(_),!!Rg(o));)_++;if(_<P&&v.charCodeAt(_)!==10&&C)for(C="",_=s,S=a;_<P&&(o=v.charCodeAt(_),!!Rg(o));)_++;return _<P&&v.charCodeAt(_)!==10||(d=vce(v.slice(1,p)),!d)?!1:(i||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[d]=="undefined"&&(e.env.references[d]={title:C,href:l}),e.parentType=h,e.line=r+S+1),!0)}});var KB=k((gSe,zB)=>{"use strict";zB.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var W0=k((vSe,V0)=>{"use strict";var yce="[a-zA-Z_:][a-zA-Z0-9:._-]*",wce="[^\"'=<>`\\x00-\\x20]+",Cce="'[^']*'",bce='"[^"]*"',Ece="(?:"+wce+"|"+Cce+"|"+bce+")",_ce="(?:\\s+"+yce+"(?:\\s*=\\s*"+Ece+")?)",YB="<[A-Za-z][A-Za-z0-9\\-]*"+_ce+"*\\s*\\/?>",JB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Sce="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",xce="<[?][\\s\\S]*?[?]>",Pce="<![A-Z]+\\s+[^>]*>",kce="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Ice=new RegExp("^(?:"+YB+"|"+JB+"|"+Sce+"|"+xce+"|"+Pce+"|"+kce+")"),Ace=new RegExp("^(?:"+YB+"|"+JB+")");V0.exports.HTML_TAG_RE=Ice;V0.exports.HTML_OPEN_CLOSE_TAG_RE=Ace});var XB=k((ySe,QB)=>{"use strict";var Tce=KB(),Dce=W0().HTML_OPEN_CLOSE_TAG_RE,nl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Tce.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Dce.source+"\\s*$"),/^$/,!1]];QB.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),o=0;o<nl.length&&!nl[o][0].test(c);o++);if(o===nl.length)return!1;if(i)return nl[o][2];if(s=r+1,!nl[o][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(l=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],c=e.src.slice(l,u),nl[o][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var t2=k((wSe,e2)=>{"use strict";var ZB=ze().isSpace;e2.exports=function(e,r,n,i){var o,s,a,c,l=e.bMarks[r]+e.tShift[r],u=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(l),o!==35||l>=u))return!1;for(s=1,o=e.src.charCodeAt(++l);o===35&&l<u&&s<=6;)s++,o=e.src.charCodeAt(++l);return s>6||l<u&&!ZB(o)?!1:(i||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&ZB(e.src.charCodeAt(a-1))&&(u=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var n2=k((CSe,r2)=>{"use strict";r2.exports=function(e,r,n){var i,o,s,a,c,l,u,f,d,p=r+1,h,m=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p],u=e.eMarks[p],l<u&&(d=e.src.charCodeAt(l),(d===45||d===61)&&(l=e.skipChars(l,d),l=e.skipSpaces(l),l>=u)))){f=d===61?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,s=0,a=m.length;s<a;s++)if(m[s](e,p,n,!0)){o=!0;break}if(o)break}}return f?(i=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(f),1),c.markup=String.fromCharCode(d),c.map=[r,e.line],c=e.push("inline","",0),c.content=i,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(f),-1),c.markup=String.fromCharCode(d),e.parentType=h,!0):!1}});var o2=k((bSe,i2)=>{"use strict";i2.exports=function(e,r){var n,i,o,s,a,c,l=r+1,u=e.md.block.ruler.getRules("paragraph"),f=e.lineMax;for(c=e.parentType,e.parentType="paragraph";l<f&&!e.isEmpty(l);l++)if(!(e.sCount[l]-e.blkIndent>3)&&!(e.sCount[l]<0)){for(i=!1,o=0,s=u.length;o<s;o++)if(u[o](e,l,f,!0)){i=!0;break}if(i)break}return n=e.getLines(r,l,e.blkIndent,!1).trim(),e.line=l,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var c2=k((ESe,a2)=>{"use strict";var s2=Dg(),Og=ze().isSpace;function vi(t,e,r,n){var i,o,s,a,c,l,u,f;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,f=!1,s=a=l=u=0,c=o.length;a<c;a++){if(i=o.charCodeAt(a),!f)if(Og(i)){l++,i===9?u+=4-u%4:u++;continue}else f=!0;(i===10||a===c-1)&&(i!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),f=!1,l=0,u=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}vi.prototype.push=function(t,e,r){var n=new s2(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};vi.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};vi.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};vi.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!Og(r));e++);return e};vi.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Og(this.src.charCodeAt(--e)))return e+1;return e};vi.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};vi.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};vi.prototype.getLines=function(e,r,n,i){var o,s,a,c,l,u,f,d=e;if(e>=r)return"";for(u=new Array(r-e),o=0;d<r;d++,o++){for(s=0,f=c=this.bMarks[d],d+1<r||i?l=this.eMarks[d]+1:l=this.eMarks[d];c<l&&s<n;){if(a=this.src.charCodeAt(c),Og(a))a===9?s+=4-(s+this.bsCount[d])%4:s++;else if(c-f<this.tShift[d])s++;else break;c++}s>n?u[o]=new Array(s-n+1).join(" ")+this.src.slice(c,l):u[o]=this.src.slice(c,l)}return u.join("")};vi.prototype.Token=s2;a2.exports=vi});var u2=k((_Se,l2)=>{"use strict";var Rce=Ag(),Ng=[["table",TB(),["paragraph","reference"]],["code",RB()],["fence",NB(),["paragraph","reference","blockquote","list"]],["blockquote",MB(),["paragraph","reference","blockquote","list"]],["hr",$B(),["paragraph","reference","blockquote","list"]],["list",VB(),["paragraph","reference","blockquote"]],["reference",GB()],["html_block",XB(),["paragraph","reference","blockquote"]],["heading",t2(),["paragraph","reference","blockquote"]],["lheading",n2()],["paragraph",o2()]];function Lg(){this.ruler=new Rce;for(var t=0;t<Ng.length;t++)this.ruler.push(Ng[t][0],Ng[t][1],{alt:(Ng[t][2]||[]).slice()})}Lg.prototype.tokenize=function(t,e,r){for(var n,i,o=this.ruler.getRules(""),s=o.length,a=e,c=!1,l=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=l){t.line=r;break}for(i=0;i<s&&(n=o[i](t,a,r,!1),!n);i++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};Lg.prototype.parse=function(t,e,r,n){var i;!t||(i=new this.State(t,e,r,n),this.tokenize(i,i.line,i.lineMax))};Lg.prototype.State=c2();l2.exports=Lg});var d2=k((SSe,f2)=>{"use strict";function Oce(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}f2.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!Oce(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var h2=k((xSe,p2)=>{"use strict";var Nce=ze().isSpace;p2.exports=function(e,r){var n,i,o,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;if(n=e.pending.length-1,i=e.posMax,!r)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){for(o=n-1;o>=1&&e.pending.charCodeAt(o-1)===32;)o--;e.pending=e.pending.slice(0,o),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(s++;s<i&&Nce(e.src.charCodeAt(s));)s++;return e.pos=s,!0}});var g2=k((PSe,m2)=>{"use strict";var Lce=ze().isSpace,G0=[];for(z0=0;z0<256;z0++)G0.push(0);var z0;"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){G0[t.charCodeAt(0)]=1});m2.exports=function(e,r){var n,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(n=e.src.charCodeAt(i),n<256&&G0[n]!==0)return r||(e.pending+=e.src[i]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),!!Lce(n));)i++;return e.pos=i,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var y2=k((kSe,v2)=>{"use strict";v2.exports=function(e,r){var n,i,o,s,a,c,l,u,f=e.pos,d=e.src.charCodeAt(f);if(d!==96)return!1;for(n=f,f++,i=e.posMax;f<i&&e.src.charCodeAt(f)===96;)f++;if(o=e.src.slice(n,f),l=o.length,e.backticksScanned&&(e.backticks[l]||0)<=n)return r||(e.pending+=o),e.pos+=l,!0;for(a=c=f;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return r||(s=e.push("code_inline","code",0),s.markup=o,s.content=e.src.slice(f,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,r||(e.pending+=o),e.pos+=l,!0}});var Y0=k((ISe,K0)=>{"use strict";K0.exports.tokenize=function(e,r){var n,i,o,s,a,c=e.pos,l=e.src.charCodeAt(c);if(r||l!==126||(i=e.scanDelims(e.pos,!0),s=i.length,a=String.fromCharCode(l),s<2))return!1;for(s%2&&(o=e.push("text","",0),o.content=a,s--),n=0;n<s;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function w2(t,e){var r,n,i,o,s,a=[],c=e.length;for(r=0;r<c;r++)i=e[r],i.marker===126&&i.end!==-1&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&a.push(o.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}K0.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(w2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&w2(e,n[r].delimiters)}});var Q0=k((ASe,J0)=>{"use strict";J0.exports.tokenize=function(e,r){var n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),n=0;n<i.length;n++)o=e.push("text","",0),o.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function C2(t,e){var r,n,i,o,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].marker===n.marker&&e[r-1].token===n.token-1&&e[n.end+1].token===i.token+1,s=String.fromCharCode(n.marker),o=t.tokens[n.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}J0.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(C2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&C2(e,n[r].delimiters)}});var E2=k((TSe,b2)=>{"use strict";var Fce=ze().normalizeReference,X0=ze().isSpace;b2.exports=function(e,r){var n,i,o,s,a,c,l,u,f,d="",p="",h=e.pos,m=e.posMax,g=e.pos,v=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<m&&e.src.charCodeAt(c)===40){for(v=!1,c++;c<m&&(i=e.src.charCodeAt(c),!(!X0(i)&&i!==10));c++);if(c>=m)return!1;if(g=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(d=e.md.normalizeLink(l.str),e.md.validateLink(d)?c=l.pos:d="",g=c;c<m&&(i=e.src.charCodeAt(c),!(!X0(i)&&i!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<m&&g!==c&&l.ok)for(p=l.str,c=l.pos;c<m&&(i=e.src.charCodeAt(c),!(!X0(i)&&i!==10));c++);}(c>=m||e.src.charCodeAt(c)!==41)&&(v=!0),c++}if(v){if(typeof e.env.references=="undefined")return!1;if(c<m&&e.src.charCodeAt(c)===91?(g=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(g,c++):c=s+1):c=s+1,o||(o=e.src.slice(a,s)),u=e.env.references[Fce(o)],!u)return e.pos=h,!1;d=u.href,p=u.title}return r||(e.pos=a,e.posMax=s,f=e.push("link_open","a",1),f.attrs=n=[["href",d]],p&&n.push(["title",p]),e.md.inline.tokenize(e),f=e.push("link_close","a",-1)),e.pos=c,e.posMax=m,!0}});var S2=k((DSe,_2)=>{"use strict";var Mce=ze().normalizeReference,Z0=ze().isSpace;_2.exports=function(e,r){var n,i,o,s,a,c,l,u,f,d,p,h,m,g="",v=e.pos,w=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<w&&e.src.charCodeAt(l)===40){for(l++;l<w&&(i=e.src.charCodeAt(l),!(!Z0(i)&&i!==10));l++);if(l>=w)return!1;for(m=l,f=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),f.ok&&(g=e.md.normalizeLink(f.str),e.md.validateLink(g)?l=f.pos:g=""),m=l;l<w&&(i=e.src.charCodeAt(l),!(!Z0(i)&&i!==10));l++);if(f=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<w&&m!==l&&f.ok)for(d=f.str,l=f.pos;l<w&&(i=e.src.charCodeAt(l),!(!Z0(i)&&i!==10));l++);else d="";if(l>=w||e.src.charCodeAt(l)!==41)return e.pos=v,!1;l++}else{if(typeof e.env.references=="undefined")return!1;if(l<w&&e.src.charCodeAt(l)===91?(m=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?s=e.src.slice(m,l++):l=a+1):l=a+1,s||(s=e.src.slice(c,a)),u=e.env.references[Mce(s)],!u)return e.pos=v,!1;g=u.href,d=u.title}return r||(o=e.src.slice(c,a),e.md.inline.parse(o,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",g],["alt",""]],p.children=h,p.content=o,d&&n.push(["title",d])),e.pos=l,e.posMax=w,!0}});var P2=k((RSe,x2)=>{"use strict";var qce=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,$ce=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;x2.exports=function(e,r){var n,i,o,s,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(s=e.src.charCodeAt(l),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,l),$ce.test(n)?(i=e.md.normalizeLink(n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):qce.test(n)?(i=e.md.normalizeLink("mailto:"+n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var I2=k((OSe,k2)=>{"use strict";var jce=W0().HTML_TAG_RE;function Uce(t){var e=t|32;return e>=97&&e<=122}k2.exports=function(e,r){var n,i,o,s,a=e.pos;return!e.md.options.html||(o=e.posMax,e.src.charCodeAt(a)!==60||a+2>=o)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!Uce(n))||(i=e.src.slice(a).match(jce),!i)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+i[0].length)),e.pos+=i[0].length,!0)}});var R2=k((NSe,D2)=>{"use strict";var A2=L0(),Bce=ze().has,Hce=ze().isValidEntityCode,T2=ze().fromCodePoint,Vce=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Wce=/^&([a-z][a-z0-9]{1,31});/i;D2.exports=function(e,r){var n,i,o,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(o=e.src.slice(s).match(Vce),o)return r||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=Hce(i)?T2(i):T2(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(s).match(Wce),o&&Bce(A2,o[1]))return r||(e.pending+=A2[o[1]]),e.pos+=o[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var L2=k((LSe,N2)=>{"use strict";function O2(t,e){var r,n,i,o,s,a,c,l,u={},f=e.length;if(!!f){var d=0,p=-2,h=[];for(r=0;r<f;r++)if(i=e[r],h.push(0),(e[d].marker!==i.marker||p!==i.token-1)&&(d=r),p=i.token,i.length=i.length||0,!!i.close){for(u.hasOwnProperty(i.marker)||(u[i.marker]=[-1,-1,-1,-1,-1,-1]),s=u[i.marker][(i.open?3:0)+i.length%3],n=d-h[d]-1,a=n;n>s;n-=h[n]+1)if(o=e[n],o.marker===i.marker&&o.open&&o.end<0&&(c=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3!=0||i.length%3!=0)&&(c=!0),!c)){l=n>0&&!e[n-1].open?h[n-1]+1:0,h[r]=r-n+l,h[n]=l,i.open=!1,o.end=r,o.close=!1,a=-1,p=-2;break}a!==-1&&(u[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}}N2.exports=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(O2(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&O2(e,n[r].delimiters)}});var M2=k((FSe,F2)=>{"use strict";F2.exports=function(e){var r,n,i=0,o=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)o[r].nesting<0&&i--,o[r].level=i,o[r].nesting>0&&i++,o[r].type==="text"&&r+1<s&&o[r+1].type==="text"?o[r+1].content=o[r].content+o[r+1].content:(r!==n&&(o[n]=o[r]),n++);r!==n&&(o.length=n)}});var B2=k((MSe,U2)=>{"use strict";var e_=Dg(),q2=ze().isWhiteSpace,$2=ze().isPunctChar,j2=ze().isMdAsciiPunct;function qf(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}qf.prototype.pushPending=function(){var t=new e_("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};qf.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new e_(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};qf.prototype.scanDelims=function(t,e){var r=t,n,i,o,s,a,c,l,u,f,d=!0,p=!0,h=this.posMax,m=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===m;)r++;return o=r-t,i=r<h?this.src.charCodeAt(r):32,l=j2(n)||$2(String.fromCharCode(n)),f=j2(i)||$2(String.fromCharCode(i)),c=q2(n),u=q2(i),u?d=!1:f&&(c||l||(d=!1)),c?p=!1:l&&(u||f||(p=!1)),e?(s=d,a=p):(s=d&&(!p||l),a=p&&(!d||f)),{can_open:s,can_close:a,length:o}};qf.prototype.Token=e_;U2.exports=qf});var W2=k((qSe,V2)=>{"use strict";var H2=Ag(),t_=[["text",d2()],["newline",h2()],["escape",g2()],["backticks",y2()],["strikethrough",Y0().tokenize],["emphasis",Q0().tokenize],["link",E2()],["image",S2()],["autolink",P2()],["html_inline",I2()],["entity",R2()]],r_=[["balance_pairs",L2()],["strikethrough",Y0().postProcess],["emphasis",Q0().postProcess],["text_collapse",M2()]];function $f(){var t;for(this.ruler=new H2,t=0;t<t_.length;t++)this.ruler.push(t_[t][0],t_[t][1]);for(this.ruler2=new H2,t=0;t<r_.length;t++)this.ruler2.push(r_[t][0],r_[t][1])}$f.prototype.skipToken=function(t){var e,r,n=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<o&&(t.level++,e=i[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};$f.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),i=n.length,o=t.posMax,s=t.md.options.maxNesting;t.pos<o;){if(t.level<s)for(r=0;r<i&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=o)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};$f.prototype.parse=function(t,e,r,n){var i,o,s,a=new this.State(t,e,r,n);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)};$f.prototype.State=B2();V2.exports=$f});var z2=k(($Se,G2)=>{"use strict";G2.exports=function(t){var e={};e.src_Any=M0().source,e.src_Cc=q0().source,e.src_Z=$0().source,e.src_P=Sg().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var Z2=k((jSe,X2)=>{"use strict";function n_(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function Fg(t){return Object.prototype.toString.call(t)}function Gce(t){return Fg(t)==="[object String]"}function zce(t){return Fg(t)==="[object Object]"}function Kce(t){return Fg(t)==="[object RegExp]"}function K2(t){return Fg(t)==="[object Function]"}function Yce(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Y2={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Jce(t){return Object.keys(t||{}).reduce(function(e,r){return e||Y2.hasOwnProperty(r)},!1)}var Qce={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Xce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Zce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function ele(t){t.__index__=-1,t.__text_cache__=""}function tle(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function J2(){return function(t,e){e.normalize(t)}}function Mg(t){var e=t.re=z2()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(Xce),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(t.__compiled__[a]=l,zce(c)){Kce(c.validate)?l.validate=tle(c.validate):K2(c.validate)?l.validate=c.validate:o(a,c),K2(c.normalize)?l.normalize=c.normalize:c.normalize?o(a,c):l.normalize=J2();return}if(Gce(c)){i.push(a);return}o(a,c)}}),i.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:J2()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(Yce).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),ele(t)}function rle(t,e){var r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function Q2(t,e){var r=new rle(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function vn(t,e){if(!(this instanceof vn))return new vn(t,e);e||Jce(t)&&(e=t,t={}),this.__opts__=n_({},Y2,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n_({},Qce,t),this.__compiled__={},this.__tlds__=Zce,this.__tlds_replaced__=!1,this.re={},Mg(this)}vn.prototype.add=function(e,r){return this.__schemas__[e]=r,Mg(this),this};vn.prototype.set=function(e){return this.__opts__=n_(this.__opts__,e),this};vn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,i,o,s,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};vn.prototype.pretest=function(e){return this.re.pretest.test(e)};vn.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};vn.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(Q2(this,r)),r=this.__last_index__);for(var i=r?e.slice(r):e;this.test(i);)n.push(Q2(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};vn.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),Mg(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Mg(this),this)};vn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};vn.prototype.onCompile=function(){};X2.exports=vn});var tH=k((USe,eH)=>{"use strict";eH.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var nH=k((BSe,rH)=>{"use strict";rH.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var oH=k((HSe,iH)=>{"use strict";iH.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var lH=k((VSe,cH)=>{"use strict";var jf=ze(),nle=eB(),ile=rB(),ole=kB(),sle=u2(),ale=W2(),cle=Z2(),va=F0(),sH=require("punycode"),lle={default:tH(),zero:nH(),commonmark:oH()},ule=/^(vbscript|javascript|file|data):/,fle=/^data:image\/(gif|png|jpeg|webp);/;function dle(t){var e=t.trim().toLowerCase();return ule.test(e)?!!fle.test(e):!0}var aH=["http:","https:","mailto:"];function ple(t){var e=va.parse(t,!0);if(e.hostname&&(!e.protocol||aH.indexOf(e.protocol)>=0))try{e.hostname=sH.toASCII(e.hostname)}catch{}return va.encode(va.format(e))}function hle(t){var e=va.parse(t,!0);if(e.hostname&&(!e.protocol||aH.indexOf(e.protocol)>=0))try{e.hostname=sH.toUnicode(e.hostname)}catch{}return va.decode(va.format(e),va.decode.defaultChars+"%")}function yn(t,e){if(!(this instanceof yn))return new yn(t,e);e||jf.isString(t)||(e=t||{},t="default"),this.inline=new ale,this.block=new sle,this.core=new ole,this.renderer=new ile,this.linkify=new cle,this.validateLink=dle,this.normalizeLink=ple,this.normalizeLinkText=hle,this.utils=jf,this.helpers=jf.assign({},nle),this.options={},this.configure(t),e&&this.set(e)}yn.prototype.set=function(t){return jf.assign(this.options,t),this};yn.prototype.configure=function(t){var e=this,r;if(jf.isString(t)&&(r=t,t=lle[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};yn.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};yn.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};yn.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};yn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};yn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};yn.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};yn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};cH.exports=yn});var fH=k((WSe,uH)=>{"use strict";uH.exports=lH()});var OV=k((iIe,mue)=>{mue.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.217.4",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.64.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.reopenInWSL","onCommand:remote-containers.reopenInSSH","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enabledApiProposals:["resolvers","workspaceTrust","terminalDimensions","contribViewsRemote"],contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},languages:[{id:"jsonc",filenames:["devcontainer-features.json"]}],jsonValidation:[{fileMatch:"devcontainer-features.json",url:"./schemas/devcontainer-features.schema.json"}],configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",type:"boolean",description:"Controls whether CLI commands should always be executed in WSL. The default is to only execute in WSL for workspace folders in WSL. This setting has no effect on other platforms than Windows.",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"WSL distro to use when not reopening a WSL folder. The default is to use the default WSL distro (see `wsl -l`). This setting has no effect when `#remote.containers.executeInWSL#` is not enabled or on other platforms than Windows."},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.reopenInSSH",title:"Reopen Folder in SSH",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features...",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^(dev-container|wsl|ssh-remote)$/"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"remoteName =~ /^(wsl|ssh-remote)$/"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_1_actions@1",when:"canReopenInSSH"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"canReopenLocally"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean-dist definitions compile-dev",watch:"npm-run-all clean-dist definitions compile-watch",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.* "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npm-run-all dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.* "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npm-run-all clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts","test-container-features":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.test.ts","test-container-features-offline":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.offline.test.ts","test-container-features-online":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/src/container-features/**/*.online.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.3.0","@types/follow-redirects":"^1.13.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^9.1.0","@types/node":"^16.11.7","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.9","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.1","@types/uuid":"^8.3.4","@types/vscode":"^1.63.1","@types/yargs":"^17.0.8","@typescript-eslint/eslint-plugin":"^4.31.2","@typescript-eslint/parser":"^4.31.2",ajv:"^8.9.0",chai:"^4.3.4",copyfiles:"^2.4.1",esbuild:"^0.13.14",eslint:"^7.32.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^7.0.4",jsonc:"^2.0.0",mocha:"^9.2.0","mocha-junit-reporter":"^2.0.2","npm-run-all":"^4.1.5","p-all":"^4.0.0",rimraf:"^3.0.2","ts-node":"^10.4.0",typescript:"^4.5.5","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^2.6.3"},dependencies:{applicationinsights:"^2.2.0","find-process":"^1.4.7","follow-redirects":"^1.14.7","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.3.2",minimist:"^1.2.5",muxrpc:"^6.5.4","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.11",uuid:"^8.3.2","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.217.4/vscode-dev-containers-0.217.4.tgz","vscode-extension-telemetry":"^0.4.5","vscode-tas-client":"^0.1.27","vscode-uri":"^3.0.3",yaml:"^2.0.0-10",yargs:"~17.0.1"}}});T3(exports,{activate:()=>gue,attachToContainer:()=>Qg,deactivate:()=>Cue});var U=K(require("vscode")),NV=K(require("os")),ev=K(require("fs")),Ft=K(require("path")),LV=K(require("querystring"));var dt=K(require("fs")),yi=K(require("util"));function pt(t){return new Promise(e=>dt.stat(t,(r,n)=>e(!r&&n.isFile())))}function hl(t){return new Promise(e=>dt.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Le=(0,yi.promisify)(dt.readFile),_a=(0,yi.promisify)(dt.writeFile),Hue=(0,yi.promisify)(dt.appendFile),Sa=(0,yi.promisify)(dt.rename),Kr=(0,yi.promisify)(dt.readdir),W_=(0,yi.promisify)(dt.unlink),Or=t=>new Promise((e,r)=>dt.mkdir(t,{recursive:!0},n=>n?r(n):e())),pv=(0,yi.promisify)(dt.rmdir),G_=(t,e=!1,r=!1)=>new Promise((n,i)=>dt.rm(t,{recursive:e,force:r},o=>o?i(o):n())),Vue=(0,yi.promisify)(dt.copyFile),ml;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(ml||(ml={}));var Be=K(require("vscode")),w_=K(require("path"));var Ro=K(require("path")),uL=K(require("crypto"));var K_=K(require("os")),gl=K(require("fs")),Y_=K(require("path"));async function z_(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t}}var ae;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(ae||(ae={}));var hv={info:3,debug:2,trace:1},R3=Object.keys(hv).reduce((t,e)=>(t[hv[e]]=e,t),[]);function J_(t){return hv[t]||3}function Q_(t){return R3[t]||3}var rt={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Qi=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function X_(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function Z_(t,e){let r=L3(t);return{event(n){let i=N3(n,e());i&&r.write(i)},join:r.join}}function eS(t,e,r){return{event(n){let i=O3(n,e(),r.getTime());i&&t(i)}}}function ht(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function O3(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${vl(nS,`${t.timestamp-r} ms`)}] ${td(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${vl($3,`[${t.timestamp-r} ms] Start`)}: ${td(t.text)}`:`[${vl(nS,`${t.timestamp-r} ms`)}] Start: ${td(t.text)}`;case"stop":return 1>=e?`${vl(q3,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${td(t.text)}`:void 0;default:throw tS(t)}}function td(t){return U3(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function N3(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${mv(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${mv(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${mv(t.text)}`:void 0;default:throw tS(t)}}function mv(t){return t.replace(Qi,"").replace(/(\r?\n)?$/,K_.EOL)}function tS(t){return new Error(`Unknown log event type: ${t.type}`)}function L3(t){let e=[],r=!1,n,i;function o(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let l=e.join("");e.length=0,gl.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?gl.mkdir(Y_.dirname(t),{recursive:!0},f=>{f?(o(),console.error(f)):gl.appendFile(t,l,d=>{o(),d&&console.error(d),s()})}):(o(),console.error(u))),o(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}var F3="38;2;143;99;79",rS="38;2;99;143;79",M3="38;2;86;156;214",q3=F3,$3=rS,nS=rS,j3=M3;function vl(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function U3(t){let e,r=0,n=[];for(Qi.lastIndex=0;e=Qi.exec(t);)n.push(iS(t.substring(r,e.index))),n.push(e[0]),r=Qi.lastIndex;return n.push(iS(t.substr(r))),n.join("")}function iS(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(vl(j3,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function Re(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function gv(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ue=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var dn=K(require("path")),X1=K(Ga());var ge=K(require("path")),Zp=K(require("fs")),iR=K(Ja()),Kw=K(require("string_decoder")),eh=K(Ga());"use strict";function Ml(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,f=0;function d(b,C){for(var S=0,_=0;S<b||!C;){var P=t.charCodeAt(n);if(P>=48&&P<=57)_=_*16+P-48;else if(P>=65&&P<=70)_=_*16+P-65+10;else if(P>=97&&P<=102)_=_*16+P-97+10;else break;n++,S++}return S<b&&(_=-1),_}function p(b){n=b,i="",o=0,s=16,f=0}function h(){var b=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&Qa(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&Qa(t.charCodeAt(n)))for(n++;n<t.length&&Qa(t.charCodeAt(n));)n++;else return f=3,t.substring(b,n);var C=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&Qa(t.charCodeAt(n))){for(n++;n<t.length&&Qa(t.charCodeAt(n));)n++;C=n}else f=3;return t.substring(b,C)}function m(){for(var b="",C=n;;){if(n>=r){b+=t.substring(C,n),f=2;break}var S=t.charCodeAt(n);if(S===34){b+=t.substring(C,n),n++;break}if(S===92){if(b+=t.substring(C,n),n++,n>=r){f=2;break}var _=t.charCodeAt(n++);switch(_){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:var P=d(4,!0);P>=0?b+=String.fromCharCode(P):f=4;break;default:f=5}C=n;continue}if(S>=0&&S<=31)if(ql(S)){b+=t.substring(C,n),f=2;break}else f=6;n++}return b}function g(){if(i="",f=0,o=n,c=a,u=l,n>=r)return o=r,s=17;var b=t.charCodeAt(n);if(Wy(b)){do n++,i+=String.fromCharCode(b),b=t.charCodeAt(n);while(Wy(b));return s=15}if(ql(b))return n++,i+=String.fromCharCode(b),b===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,l=n,s=14;switch(b){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=m(),s=10;case 47:var C=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!ql(t.charCodeAt(n));)n++;return i=t.substring(C,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var S=r-1,_=!1;n<S;){var P=t.charCodeAt(n);if(P===42&&t.charCodeAt(n+1)===47){n+=2,_=!0;break}n++,ql(P)&&(P===13&&t.charCodeAt(n)===10&&n++,a++,l=n)}return _||(n++,f=1),i=t.substring(C,n),s=13}return i+=String.fromCharCode(b),n++,s=16;case 45:if(i+=String.fromCharCode(b),n++,n===r||!Qa(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&v(b);)n++,b=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(b),n++,s=16}}function v(b){if(Wy(b)||ql(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function w(){var b;do b=g();while(b>=12&&b<=15);return b}return{setPosition:p,getPosition:function(){return n},scan:e?w:g,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return f}}}function Wy(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function ql(t){return t===10||t===13||t===8232||t===8233}function Qa(t){return t>=48&&t<=57}"use strict";function Gy(t,e,r){var n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!$l(t,o-1);)o--;for(var c=a;c<t.length&&!$l(t,c);)c++;i=t.substring(o,c),n=zz(i,r)}else i=t,n=0,o=0,s=0,a=t.length;var l=Kz(r,t),u=!1,f=0,d;r.insertSpaces?d=zy(" ",r.tabSize||4):d="	";var p=Ml(i,!1),h=!1;function m(){return l+zy(d,n+f)}function g(){var H=p.scan();for(u=!1;H===15||H===14;)u=u||H===14,H=p.scan();return h=H===16||p.getTokenError()!==0,H}var v=[];function w(H,X,J){!h&&(!e||X<a&&J>s)&&t.substring(X,J)!==H&&v.push({offset:X,length:J-X,content:H})}var b=g();if(b!==17){var C=p.getTokenOffset()+o,S=zy(d,n);w(S,o,C)}for(;b!==17;){for(var _=p.getTokenOffset()+p.getTokenLength()+o,P=g(),I="",A=!1;!u&&(P===12||P===13);){var R=p.getTokenOffset()+o;w(" ",_,R),_=p.getTokenOffset()+p.getTokenLength()+o,A=P===12,I=A?m():"",P=g()}if(P===2)b!==1&&(f--,I=m());else if(P===4)b!==3&&(f--,I=m());else{switch(b){case 3:case 1:f++,I=m();break;case 5:case 12:I=m();break;case 13:u?I=m():A||(I=" ");break;case 6:A||(I=" ");break;case 10:if(P===6){A||(I="");break}case 7:case 8:case 9:case 11:case 2:case 4:P===12||P===13?A||(I=" "):P!==5&&P!==17&&(h=!0);break;case 16:h=!0;break}u&&(P===12||P===13)&&(I=m())}P===17&&(I=r.insertFinalNewline?l:"");var F=p.getTokenOffset()+o;w(I,_,F),b=P}return v}function zy(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function zz(t,e){for(var r=0,n=0,i=e.tabSize||4;r<t.length;){var o=t.charAt(r);if(o===" ")n++;else if(o==="	")n+=i;else break;r++}return Math.floor(n/i)}function Kz(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function $l(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var jl;(function(t){t.DEFAULT={allowTrailingComma:!1}})(jl||(jl={}));function Pk(t,e){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){o.value=c,o.offset=l,o.length=u,o.type=f,o.colonOffset=void 0,i=o}try{rp(t,{onObjectBegin:function(c,l){if(e<=c)throw n;i=void 0,s=e>c,r.push("")},onObjectProperty:function(c,l,u){if(e<l||(a(c,l,u,"property"),r[r.length-1]=c,e<=l+u))throw n},onObjectEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onArrayBegin:function(c,l){if(e<=c)throw n;i=void 0,r.push(0)},onArrayEnd:function(c,l){if(e<=c)throw n;i=void 0,r.pop()},onLiteralValue:function(c,l,u){if(e<l||(a(c,l,u,Ik(c)),e<=l+u))throw n},onSeparator:function(c,l,u){if(e<=l)throw n;if(c===":"&&i&&i.type==="property")i.colonOffset=l,s=!1,i=void 0;else if(c===","){var f=r[r.length-1];typeof f=="number"?r[r.length-1]=f+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(c){for(var l=0,u=0;l<c.length&&u<r.length;u++)if(c[l]===r[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function kk(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=jl.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};return rp(t,a,r),i[0]}function ep(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=jl.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function o(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=o({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,l,u){n=o({type:"property",offset:l,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:l,length:u,parent:n})},onObjectEnd:function(c,l){i(c+l),n.length=c+l-n.offset,n=n.parent,i(c+l)},onArrayBegin:function(c,l){n=o({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,l){n.length=c+l-n.offset,n=n.parent,i(c+l)},onLiteralValue:function(c,l,u){o({type:Ik(c),offset:l,length:u,parent:n,value:c}),i(l+u)},onSeparator:function(c,l,u){n.type==="property"&&(c===":"?n.colonOffset=l:c===","&&i(l))},onError:function(c,l,u){e.push({error:c,offset:l,length:u})}};rp(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function Ul(t,e){if(!!t){for(var r=t,n=0,i=e;n<i.length;n++){var o=i[n];if(typeof o=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){r=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if(r.type!=="array"||u<0||!Array.isArray(r.children)||u>=r.children.length)return;r=r.children[u]}}return r}}function tp(t){switch(t.type){case"array":return t.children.map(tp);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var i=n[r],o=i.children[1];o&&(e[i.children[0].value]=tp(o))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function rp(t,e,r){r===void 0&&(r=jl.DEFAULT);var n=Ml(t,!1);function i(A){return A?function(){return A(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(A){return A?function(R){return A(R,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),l=i(e.onArrayBegin),u=i(e.onArrayEnd),f=o(e.onLiteralValue),d=o(e.onSeparator),p=i(e.onComment),h=o(e.onError),m=r&&r.disallowComments,g=r&&r.allowTrailingComma;function v(){for(;;){var A=n.scan();switch(n.getTokenError()){case 4:w(14);break;case 5:w(15);break;case 3:w(13);break;case 1:m||w(11);break;case 2:w(12);break;case 6:w(16);break}switch(A){case 12:case 13:m?w(10):p();break;case 16:w(1);break;case 15:case 14:break;default:return A}}}function w(A,R,F){if(R===void 0&&(R=[]),F===void 0&&(F=[]),h(A),R.length+F.length>0)for(var H=n.getToken();H!==17;){if(R.indexOf(H)!==-1){v();break}else if(F.indexOf(H)!==-1)break;H=v()}}function b(A){var R=n.getTokenValue();return A?f(R):a(R),v(),!0}function C(){switch(n.getToken()){case 11:var A=n.getTokenValue(),R=Number(A);isNaN(R)&&(w(2),R=0),f(R);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return v(),!0}function S(){return n.getToken()!==10?(w(3,[],[2,5]),!1):(b(!1),n.getToken()===6?(d(":"),v(),I()||w(4,[],[2,5])):w(5,[],[2,5]),!0)}function _(){s(),v();for(var A=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(A||w(4,[],[]),d(","),v(),n.getToken()===2&&g)break}else A&&w(6,[],[]);S()||w(4,[],[2,5]),A=!0}return c(),n.getToken()!==2?w(7,[2],[]):v(),!0}function P(){l(),v();for(var A=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(A||w(4,[],[]),d(","),v(),n.getToken()===4&&g)break}else A&&w(6,[],[]);I()||w(4,[],[4,5]),A=!0}return u(),n.getToken()!==4?w(8,[4],[]):v(),!0}function I(){switch(n.getToken()){case 3:return P();case 1:return _();case 10:return b(!0);default:return C()}}return v(),n.getToken()===17?r.allowEmptyContent?!0:(w(4,[],[]),!1):I()?(n.getToken()!==17&&w(9,[],[]),!0):(w(4,[],[]),!1)}function Ik(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function Ak(t,e,r,n){for(var i,o=e.slice(),s=[],a=ep(t,s),c=void 0,l=void 0;o.length>0&&(l=o.pop(),c=Ul(a,o),c===void 0&&r!==void 0);)typeof l=="string"?r=(i={},i[l]=r,i):r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){var u=Ul(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");var f=c.children.indexOf(u.parent),d=void 0,p=u.parent.offset+u.parent.length;if(f>0){var h=c.children[f-1];d=h.offset+h.length}else if(d=c.offset+1,c.children.length>1){var m=c.children[1];p=m.offset}return Os(t,{offset:d,length:p-d,content:""},n)}else return Os(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var g=JSON.stringify(l)+": "+JSON.stringify(r),v=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(A){return A.children[0].value})):c.children.length,w=void 0;if(v>0){var h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}else c.children.length===0?w={offset:c.offset+1,length:0,content:g}:w={offset:c.offset+1,length:0,content:g+","};return Os(t,w,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){var b=l;if(b===-1){var g=""+JSON.stringify(r),w=void 0;if(c.children.length===0)w={offset:c.offset+1,length:0,content:g};else{var h=c.children[c.children.length-1];w={offset:h.offset+h.length,length:0,content:","+g}}return Os(t,w,n)}else if(r===void 0&&c.children.length>=0){var C=l,S=c.children[C],w=void 0;if(c.children.length===1)w={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===C){var h=c.children[C-1],_=h.offset+h.length,P=c.offset+c.length;w={offset:_,length:P-2-_,content:""}}else w={offset:S.offset,length:c.children[C+1].offset-S.offset,content:""};return Os(t,w,n)}else if(r!==void 0){var w=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>l){var I=c.children[l];w={offset:I.offset,length:I.length,content:g}}else if(c.children.length===0||l===0)w={offset:c.offset+1,length:0,content:c.children.length===0?g:g+","};else{var v=l>c.children.length?c.children.length:l,h=c.children[v-1];w={offset:h.offset+h.length,length:0,content:","+g}}return Os(t,w,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+b+" as length is not sufficient")}else throw new Error("Can not add "+(typeof l!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return Os(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function Os(t,e,r){if(!r.formattingOptions)return[e];var n=np(t,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!$l(n,i-1);)i--;for(;o<n.length&&!$l(n,o);)o++}for(var s=Gy(n,{offset:i,length:o-i},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=np(n,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}var l=t.length-(n.length-o)-i;return[{offset:i,length:l,content:n.substring(i,o)}]}function np(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var Tk=Pk,Xe=kk,Dk=ep,ip=Ul;var Rk=tp;function Rt(t,e,r,n){return Ak(t,e,r,n)}function Vt(t,e){for(var r=e.length-1;r>=0;r--)t=np(t,e[r]);return t}var oR=K(require("crypto")),sR=K(require("util"));var Qn=K(Jk()),Ade=Qn.default.v1,Tde=Qn.default.v3,tw=Qn.default.v4,Dde=Qn.default.v5,Rde=Qn.default.NIL,Ode=Qn.default.version,Nde=Qn.default.validate,Lde=Qn.default.stringify,Fde=Qn.default.parse;var Qk=K(require("string_decoder")),fo="\u2404";async function Sn(t,e,r,n,i="Container"){let o=await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:n||"/bin/sh",args:[],output:e}),s=Z4(o),a;async function c(u,f){let d=a=(async()=>{try{await a}catch{}return l(u,f)})();try{return await Promise.race([d,s.unexpectedExit])}finally{s.disposeStdioListeners(),a===d&&(a=void 0)}}async function l(u,f){let d=`Run in ${i.toLowerCase()}: ${u.replace(/\n.*/g,"")}`,p;if((f==null?void 0:f.logOutput)!=="silent"&&(p=e.start(d,f==null?void 0:f.logLevel)),o.stdin.destroyed){e.write("Stdin closed!");let{code:S,signal:_}=await o.exit;return Promise.reject({message:`Shell server terminated (code: ${S}, signal: ${_})`,code:S,signal:_})}o.stdin.write(`echo -n ${fo}; ( ${u} ); echo -n ${fo}$?${fo}; echo -n ${fo} >&2
`);let[h,m]=Xk(o.stdout,[1,2],(f==null?void 0:f.logOutput)==="continuous"?(S,_,P)=>{_===1&&P===0&&e.write(S,f==null?void 0:f.logLevel)}:()=>{}),g=Xk(o.stderr,[1],(f==null?void 0:f.logOutput)==="continuous"?(S,_,P)=>{_===0&&P===0&&e.write(S,f==null?void 0:f.logLevel)}:()=>{})[0];(f==null?void 0:f.stdin)&&(await h,o.stdin.write(f==null?void 0:f.stdin));let[v,w]=await m,[b]=await g,C=parseInt(w,10)||0;return((f==null?void 0:f.logOutput)===void 0||(f==null?void 0:f.logOutput)===!0)&&(e.write(v,f==null?void 0:f.logLevel),e.write(b,f==null?void 0:f.logLevel),C&&e.write(`Exit code ${C}`,f==null?void 0:f.logLevel)),(f==null?void 0:f.logOutput)==="continuous"&&C&&e.write(`Exit code ${C}`,f==null?void 0:f.logLevel),(f==null?void 0:f.logOutput)!=="silent"&&e.stop(d,p,f==null?void 0:f.logLevel),C?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${u}`,code:C,stdout:v,stderr:b}):{stdout:v,stderr:b}}return{exec:c,process:o}}function Xk(t,e,r){let n=e.map(()=>{let u,f=new Promise((d,p)=>u={resolve:d,reject:p});return W({promise:f},u)}),i=new Qk.StringDecoder("utf8"),o=[],s=0,a=[];function c(u){let f=i.write(u);l(f)}function l(u){let f=u.indexOf(fo);if(f!==-1){let d=u.substr(0,f);o.push(d),r(d,s,a.length),a.push(o.join("")),o.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else o.push(u),r(u,s,a.length)}return t.on("data",c),n.map(u=>u.promise)}function Z4(t){let e,r=new Promise((c,l)=>e=l),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return t.stdout.on("data",o),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",o),t.stderr.off("data",s),n.length=0,i.length=0}}}var Zk=K(require("path"));var e6=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function eI(t,e,r,n,i){let{repository:o,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let l=e.shellServer,u=r6(e),f=Object.keys(c).filter(d=>!(d.startsWith("BASH_FUNC_")&&d.endsWith("%%"))).reduce((d,p)=>`${d}${p}=${t6(c[p])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${wp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:ae.Info}):await l.exec(`# Clone & install dotfiles
${wp(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${e6.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:ae.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function t6(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function r6(t){return Zk.posix.join(po(t),".dotfilesMarker")}var pr=K(require("path")),Wp=K(Ga()),DD=K(require("crypto")),Gp=K(_p()),RD=K(require("util")),OD=K(require("string_decoder"));var zt=K(require("path")),vA=K(require("fs")),nc=K(require("child_process")),dw=K(require("string_decoder"));var oA=K(require("path"));var nA;nA=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var l,u="",f=0,d=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)l=a.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(d===h-1||p===1))if(d!==h-1&&p===2){if(u.length<2||f!==2||u.charCodeAt(u.length-1)!==46||u.charCodeAt(u.length-2)!==46){if(u.length>2){var m=u.lastIndexOf("/");if(m!==u.length-1){m===-1?(u="",f=0):f=(u=u.slice(0,m)).length-1-u.lastIndexOf("/"),d=h,p=0;continue}}else if(u.length===2||u.length===1){u="",f=0,d=h,p=0;continue}}c&&(u.length>0?u+="/..":u="..",f=2)}else u.length>0?u+="/"+a.slice(d+1,h):u=a.slice(d+1,h),f=h-d-1;d=h,p=0}else l===46&&p!==-1?++p:p=-1}return u}var s={resolve:function(){for(var a,c="",l=!1,u=arguments.length-1;u>=-1&&!l;u--){var f;u>=0?f=arguments[u]:(a===void 0&&(a=process.cwd()),f=a),i(f),f.length!==0&&(c=f+"/"+c,l=f.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var u=a.length,f=u-l,d=1;d<c.length&&c.charCodeAt(d)===47;++d);for(var p=c.length-d,h=f<p?f:p,m=-1,g=0;g<=h;++g){if(g===h){if(p>h){if(c.charCodeAt(d+g)===47)return c.slice(d+g+1);if(g===0)return c.slice(d+g)}else f>h&&(a.charCodeAt(l+g)===47?m=g:g===0&&(m=0));break}var v=a.charCodeAt(l+g);if(v!==c.charCodeAt(d+g))break;v===47&&(m=g)}var w="";for(g=l+m+1;g<=u;++g)g!==u&&a.charCodeAt(g)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+c.slice(d+m):(d+=m,c.charCodeAt(d)===47&&++d,c.slice(d))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,u=-1,f=!0,d=a.length-1;d>=1;--d)if((c=a.charCodeAt(d))===47){if(!f){u=d;break}}else f=!1;return u===-1?l?"/":".":l&&u===1?"//":a.slice(0,u)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,u=0,f=-1,d=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(l=a.length-1;l>=0;--l){var m=a.charCodeAt(l);if(m===47){if(!d){u=l+1;break}}else h===-1&&(d=!1,h=l+1),p>=0&&(m===c.charCodeAt(p)?--p==-1&&(f=l):(p=-1,f=h))}return u===f?f=h:f===-1&&(f=a.length),a.slice(u,f)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!d){u=l+1;break}}else f===-1&&(d=!1,f=l+1);return f===-1?"":a.slice(u,f)},extname:function(a){i(a);for(var c=-1,l=0,u=-1,f=!0,d=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)u===-1&&(f=!1,u=p+1),h===46?c===-1?c=p:d!==1&&(d=1):c!==-1&&(d=-1);else if(!f){l=p+1;break}}return c===-1||u===-1||d===0||d===1&&c===u-1&&c===l+1?"":a.slice(c,u)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var u=l.dir||l.root,f=l.base||(l.name||"")+(l.ext||"");return u?u===l.root?u+f:u+"/"+f:f}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,u=a.charCodeAt(0),f=u===47;f?(c.root="/",l=1):l=0;for(var d=-1,p=0,h=-1,m=!0,g=a.length-1,v=0;g>=l;--g)if((u=a.charCodeAt(g))!==47)h===-1&&(m=!1,h=g+1),u===46?d===-1?d=g:v!==1&&(v=1):d!==-1&&(v=-1);else if(!m){p=g+1;break}return d===-1||h===-1||v===0||v===1&&d===h-1&&d===p+1?h!==-1&&(c.base=c.name=p===0&&f?a.slice(1,h):a.slice(p,h)):(p===0&&f?(c.name=a.slice(1,d),c.base=a.slice(1,h)):(c.name=a.slice(p,d),c.base=a.slice(p,h)),c.ext=a.slice(d,h)),p>0?c.dir=a.slice(0,p-1):f&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>w,Utils:()=>X}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,u=(c=function(M,L){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,V){q.__proto__=V}||function(q,V){for(var z in V)Object.prototype.hasOwnProperty.call(V,z)&&(q[z]=V[z])})(M,L)},function(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function q(){this.constructor=M}c(M,L),M.prototype=L===null?Object.create(L):(q.prototype=L.prototype,new q)}),f=/^\w[\w\d+.-]*$/,d=/^\//,p=/^\/\//;function h(M,L){if(!M.scheme&&L)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(M.authority,'", path: "').concat(M.path,'", query: "').concat(M.query,'", fragment: "').concat(M.fragment,'"}'));if(M.scheme&&!f.test(M.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(M.path){if(M.authority){if(!d.test(M.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(M.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var m="",g="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,w=function(){function M(L,q,V,z,oe,re){re===void 0&&(re=!1),typeof L=="object"?(this.scheme=L.scheme||m,this.authority=L.authority||m,this.path=L.path||m,this.query=L.query||m,this.fragment=L.fragment||m):(this.scheme=function(be,Pe){return be||Pe?be:"file"}(L,re),this.authority=q||m,this.path=function(be,Pe){switch(be){case"https":case"http":case"file":Pe?Pe[0]!==g&&(Pe=g+Pe):Pe=g}return Pe}(this.scheme,V||m),this.query=z||m,this.fragment=oe||m,h(this,re))}return M.isUri=function(L){return L instanceof M||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"},Object.defineProperty(M.prototype,"fsPath",{get:function(){return I(this,!1)},enumerable:!1,configurable:!0}),M.prototype.with=function(L){if(!L)return this;var q=L.scheme,V=L.authority,z=L.path,oe=L.query,re=L.fragment;return q===void 0?q=this.scheme:q===null&&(q=m),V===void 0?V=this.authority:V===null&&(V=m),z===void 0?z=this.path:z===null&&(z=m),oe===void 0?oe=this.query:oe===null&&(oe=m),re===void 0?re=this.fragment:re===null&&(re=m),q===this.scheme&&V===this.authority&&z===this.path&&oe===this.query&&re===this.fragment?this:new C(q,V,z,oe,re)},M.parse=function(L,q){q===void 0&&(q=!1);var V=v.exec(L);return V?new C(V[2]||m,H(V[4]||m),H(V[5]||m),H(V[7]||m),H(V[9]||m),q):new C(m,m,m,m,m)},M.file=function(L){var q=m;if(s&&(L=L.replace(/\\/g,g)),L[0]===g&&L[1]===g){var V=L.indexOf(g,2);V===-1?(q=L.substring(2),L=g):(q=L.substring(2,V),L=L.substring(V)||g)}return new C("file",q,L,m,m)},M.from=function(L){var q=new C(L.scheme,L.authority,L.path,L.query,L.fragment);return h(q,!0),q},M.prototype.toString=function(L){return L===void 0&&(L=!1),A(this,L)},M.prototype.toJSON=function(){return this},M.revive=function(L){if(L){if(L instanceof M)return L;var q=new C(L);return q._formatted=L.external,q._fsPath=L._sep===b?L.fsPath:null,q}return L},M}(),b=s?1:void 0,C=function(M){function L(){var q=M!==null&&M.apply(this,arguments)||this;return q._formatted=null,q._fsPath=null,q}return u(L,M),Object.defineProperty(L.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),L.prototype.toString=function(q){return q===void 0&&(q=!1),q?A(this,!0):(this._formatted||(this._formatted=A(this,!1)),this._formatted)},L.prototype.toJSON=function(){var q={$mid:1};return this._fsPath&&(q.fsPath=this._fsPath,q._sep=b),this._formatted&&(q.external=this._formatted),this.path&&(q.path=this.path),this.scheme&&(q.scheme=this.scheme),this.authority&&(q.authority=this.authority),this.query&&(q.query=this.query),this.fragment&&(q.fragment=this.fragment),q},L}(w),S=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function _(M,L){for(var q=void 0,V=-1,z=0;z<M.length;z++){var oe=M.charCodeAt(z);if(oe>=97&&oe<=122||oe>=65&&oe<=90||oe>=48&&oe<=57||oe===45||oe===46||oe===95||oe===126||L&&oe===47)V!==-1&&(q+=encodeURIComponent(M.substring(V,z)),V=-1),q!==void 0&&(q+=M.charAt(z));else{q===void 0&&(q=M.substr(0,z));var re=S[oe];re!==void 0?(V!==-1&&(q+=encodeURIComponent(M.substring(V,z)),V=-1),q+=re):V===-1&&(V=z)}}return V!==-1&&(q+=encodeURIComponent(M.substring(V))),q!==void 0?q:M}function P(M){for(var L=void 0,q=0;q<M.length;q++){var V=M.charCodeAt(q);V===35||V===63?(L===void 0&&(L=M.substr(0,q)),L+=S[V]):L!==void 0&&(L+=M[q])}return L!==void 0?L:M}function I(M,L){var q;return q=M.authority&&M.path.length>1&&M.scheme==="file"?"//".concat(M.authority).concat(M.path):M.path.charCodeAt(0)===47&&(M.path.charCodeAt(1)>=65&&M.path.charCodeAt(1)<=90||M.path.charCodeAt(1)>=97&&M.path.charCodeAt(1)<=122)&&M.path.charCodeAt(2)===58?L?M.path.substr(1):M.path[1].toLowerCase()+M.path.substr(2):M.path,s&&(q=q.replace(/\//g,"\\")),q}function A(M,L){var q=L?P:_,V="",z=M.scheme,oe=M.authority,re=M.path,be=M.query,Pe=M.fragment;if(z&&(V+=z,V+=":"),(oe||z==="file")&&(V+=g,V+=g),oe){var xe=oe.indexOf("@");if(xe!==-1){var Te=oe.substr(0,xe);oe=oe.substr(xe+1),(xe=Te.indexOf(":"))===-1?V+=q(Te,!1):(V+=q(Te.substr(0,xe),!1),V+=":",V+=q(Te.substr(xe+1),!1)),V+="@"}(xe=(oe=oe.toLowerCase()).indexOf(":"))===-1?V+=q(oe,!1):(V+=q(oe.substr(0,xe),!1),V+=oe.substr(xe))}if(re){if(re.length>=3&&re.charCodeAt(0)===47&&re.charCodeAt(2)===58)(he=re.charCodeAt(1))>=65&&he<=90&&(re="/".concat(String.fromCharCode(he+32),":").concat(re.substr(3)));else if(re.length>=2&&re.charCodeAt(1)===58){var he;(he=re.charCodeAt(0))>=65&&he<=90&&(re="".concat(String.fromCharCode(he+32),":").concat(re.substr(2)))}V+=q(re,!0)}return be&&(V+="?",V+=q(be,!1)),Pe&&(V+="#",V+=L?Pe:_(Pe,!1)),V}function R(M){try{return decodeURIComponent(M)}catch{return M.length>3?M.substr(0,3)+R(M.substr(3)):M}}var F=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function H(M){return M.match(F)?M.replace(F,function(L){return R(L)}):M}var X,J=o(470),Y=function(M,L,q){if(q||arguments.length===2)for(var V,z=0,oe=L.length;z<oe;z++)!V&&z in L||(V||(V=Array.prototype.slice.call(L,0,z)),V[z]=L[z]);return M.concat(V||Array.prototype.slice.call(L))},te=J.posix||J;(function(M){M.joinPath=function(L){for(var q=[],V=1;V<arguments.length;V++)q[V-1]=arguments[V];return L.with({path:te.join.apply(te,Y([L.path],q,!1))})},M.resolvePath=function(L){for(var q=[],V=1;V<arguments.length;V++)q[V-1]=arguments[V];var z=L.path||"/";return L.with({path:te.resolve.apply(te,Y([z],q,!1))})},M.dirname=function(L){var q=te.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46?L:L.with({path:q})},M.basename=function(L){return te.basename(L.path)},M.extname=function(L){return te.extname(L.path)}})(X||(X={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:Ee,Utils:tn}=nA;var iA=K(require("path"));function Ue(t,e){if(Vl(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Vl(t){return iA.extname(t)===".code-workspace"}async function Sp(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),o=Xe(n).folders;if(o&&o.length>0){for(let s of o){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let l=s.uri;return l?Ee.parse(l).scheme!=="file"?`Workspace contains folder '${l}' not on the local file system.`:`Workspace contains an absolute folder path '${l}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!k6(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r&&(r.message||r.toString())}`}}function k6(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:I6(t.platform,r,e.substr(0,r.length))}function I6(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var cw=K(require("path"));var A6=K(require("http")),T6=K(require("https"));function aw(t,e={}){return new Promise((r,n)=>{let i=t.startsWith("https:")?T6:A6,o;if(Object.keys(e).length>0){let a=new URL(t);o={headers:e,host:a.host,path:a.pathname}}i.get(o!=null?o:t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&r(aw(l,e))}n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",n);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>r(Buffer.concat(l)))}}).on("error",n)})}async function ho(t){let e=await Le(cw.join(t,"package.json"),"utf8");return JSON.parse(e)}async function Wl(t){let e=await Le(cw.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await D6(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function D6(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await aw(e);return JSON.parse(r.toString()).version}var St=!0;function lw(t,e=!1){let{serverApplicationName:r}=t;return!e&&r?["bin",r]:["server.sh"]}var sA=/^\\\\wsl(\.localhost|\$)?\\/;function Gt(t){return sA.test(t.toLowerCase())}function mo(t){let e=t.toLowerCase(),r=sA.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function xp(t){let{stdout:e}=await Se({exec:Fs(void 0),cmd:"wsl",args:["-l","-v"],output:t}),r=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(r)||[])[1]}async function Pi(t,e,r){let{stdout:n}=await Se({exec:Fs(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function ec(t,e){let r=mo(t),n=await Pi(r,t,e);return Ee.parse(`vscode-remote://wsl+${r}${n}`)}function tc(t){if(t.scheme==="vscode-remote"){let e=Pp(t.authority);if(e){let r=t.path;return Vl(r)&&(r=oA.posix.dirname(r)),{wslDistro:e,wslPath:r}}}}function Pp(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function aA(t,e,r,n,i,o,s){var p;let{distro:a,cwd:c}=await R6(t,e,s),l=rc("wsl",["-d",a,"-e"],c),u=await Gl({extensionPath:r,localCacheFolder:n,package:await ho(r),product:i,loadNativeModule:o,output:s},l,c,!1),f=await zl({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=u.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:u.exec},u.nodeExecutable);delete f.WSL_INTEROP,await u.setBaseEnv(f);let d=go("wsl",c,f,u.exec,u.ptyExec,u.connect,s);return d.toCommonURI=async h=>{try{return Ee.file((await Se({exec:u.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},d}async function R6(t,{executeInWSL:e,defaultDistro:r},n){let i,o;return typeof t!="string"?(i=t.wslDistro,o=t.wslPath):e==="forWSLPath"||Gt(t)?(i=mo(t),o=await Pi(i,t,n)):(i=r||await xp(n)||(()=>{throw new Error("No default WSL distro found.")})(),o=await Pi(i,t,n)),{distro:i,cwd:o}}var hA=K(require("path")),Tp=K(require("net")),Dp=K(require("os"));var cA=K(require("os"));async function lA(t,e,r,n,i,o,s,a,c){var g;let l=t.substr(6),u=l.indexOf(":"),f=[(c==null?void 0:c.settings.executablePath)||"ssh"];(c==null?void 0:c.settings.configFilePath)&&f.push("-F",O6(c==null?void 0:c.settings.configFilePath)),u!==-1?f.push("-p",l.substr(u+1),l.substr(0,u)):f.push(l);let d=rc(f[0],f.slice(1),void 0,await(c==null?void 0:c.sshAskpassEnv)||{}),p=await Gl({extensionPath:n,localCacheFolder:i,package:await ho(n),product:o,loadNativeModule:s,output:a},d,e,!1),h=await zl({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((g=p.passwdUser)==null?void 0:g.shell)||"/bin/sh",remoteExec:p.exec},p.nodeExecutable);await p.setBaseEnv(h);let m=go("ssh",e,h,p.exec,p.ptyExec,p.connect,a);return m.toCommonURI=()=>Promise.resolve(void 0),m.reconnect=()=>p.reconnect(),m.terminate=()=>p.terminate(),m}function O6(t){return t.replace(/^~($|\/|\\)/,`${cA.homedir()}$1`)}function Kl(t,e){let r=N6(t);if(!r)return;let n=r.hostName;if(r.user||r.hostName.toLowerCase()!==r.hostName||r.port||r.hostName.match(/[\/\\\+]/)){let i=JSON.stringify(r);n=Buffer.from(i,"utf8").toString("hex")}return Ee.parse(`vscode-remote://ssh-remote+${n}${e}`)}function N6(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6),r=e.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(r){let[,n,i,o]=r;return{hostName:i,user:n,port:o?parseInt(o,10):void 0}}return{hostName:e}}var mA=fw(),Ms;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Ms||(Ms={}));async function Pn(t,e,r,n,i,o,s,a,c){return(t==null?void 0:t.startsWith("ssh://"))&&!(c==null?void 0:c.localDocker)?lA(t,e,n,i,o,s,r,a,c):typeof e!="string"||n.executeInWSL==="forWSLPath"&&Gt(e)||n.executeInWSL==="always"?aA(e,n,i,o,s,r,a):Rp(e,r,a)}async function Rp(t,e,r){let n=Fs(t),i=await gA(t,e);return q6(t,n,i,$6)}function go(t,e,r,n,i,o,s){let a;return{type:t,platform:"linux",exec:n,ptyExec:i,cwd:e,env:r,path:hA.posix,async homedir(){var c;return typeof a=="undefined"&&(a=this.env.HOME||((c=Op((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:c.home)||"/"),a},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async c=>{try{return await Se({exec:n,cmd:"test",args:["-f",c],output:rt}),!0}catch(l){if((l==null?void 0:l.code)!==1)throw l;return!1}},isFolder:async c=>{try{return await Se({exec:n,cmd:"test",args:["-d",c],output:rt}),!0}catch(l){if((l==null?void 0:l.code)!==1)throw l;return!1}},readFile:async c=>{try{return(await Se({exec:n,cmd:"cat",args:[c],output:rt})).stdout}catch(l){let u=new Error(`Could not read file: ${c}`);throw u.originalError=l,u.code="ENOENT",u}},writeFile:async(c,l)=>{await Se({exec:n,cmd:"/bin/sh",args:["-c",`cat >'${c}'`],stdin:l,output:rt})},rename:async(c,l)=>{await Se({exec:n,cmd:"mv",args:[c,l],output:rt})},mkdirp:async c=>{await Se({exec:n,cmd:"mkdir",args:["-p",c],output:rt})},readDir:async c=>(await Se({exec:n,cmd:"ls",args:["-a",c],output:rt})).stdout.toString().trim().split(`
`).filter(l=>l!=="."&&l!==".."),readDirWithTypes:async c=>{let l={f:1,"*":1,"/":2,"@":64};return(await Se({exec:n,cmd:"ls",args:["-aF",c],output:rt})).stdout.toString().trim().split(`
`).map(u=>"/*@=%|>".indexOf(u[u.length-1])!==-1?[u.substr(0,u.length-1),u[u.length-1]]:[u,"f"]).filter(([u])=>u!=="."&&u!=="..").map(([u,f])=>[u,l[f]||0])},getuid:async()=>{let c=await Se({exec:n,cmd:"id",args:["-u"],output:rt});return parseInt(c.stdout.toString().trim(),10)},getgid:async()=>{let c=await Se({exec:n,cmd:"id",args:["-g"],output:rt});return parseInt(c.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:o}}function q6(t,e,r,n){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:hA,homedir:async()=>Dp.homedir(),tmpdir:async()=>Dp.tmpdir(),isFile:pt,isFolder:hl,readFile:Le,writeFile:_a,rename:Sa,mkdirp:async i=>{await Or(i)},readDir:Kr,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async i=>Ee.file(i),connect:n}}function $6(t){if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return mA.duplex(Tp.connect(t));let e=new Tp.Socket;return(async()=>{let r=await Le(t),n=r.indexOf(10),i=parseInt(r.slice(0,n).toString(),10),o=r.slice(n+1);e.connect(i,"127.0.0.1",()=>{e.write(o,s=>{s&&(console.error(s),e.destroy())})})})().catch(r=>{console.error(r),e.destroy()}),mA.duplex(e)}function yA(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var j6=zt.join(__dirname,"..","..","node_modules",".bin","ts-node"),pw=zt.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Se(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((u,f)=>{let d=[],p=[],h=c==="continuous"?new dw.StringDecoder:void 0;l.stdout.on("data",g=>{d.push(g),c==="continuous"&&a.write(h.write(g))}),l.stdout.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let m=c==="continuous"?new dw.StringDecoder:void 0;l.stderr.on("data",g=>{p.push(g),c==="continuous"&&a.write(Re(m.write(g)))}),l.stderr.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g}),l.exit.then(({code:g})=>{try{let v=Buffer.concat(d),w=Buffer.concat(p);(c===!0||g&&c==="onerror")&&(a.write(v.toString().replace(/\r?\n/g,`\r
`)),a.write(Re(w.toString()))),c&&g&&a.write(`Exit code ${g}`),g?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:v,stderr:w,code:g}):u({stdout:v,stderr:w})}catch(v){f(v)}},f),s instanceof Buffer?(l.stdin.write(s,g=>{g&&f(g)}),l.stdin.end()):s instanceof vA.ReadStream&&s.pipe(l.stdin)})}async function Ii(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:r,args:n,cwd:i,env:o,output:s});return new Promise((u,f)=>{let d="",p=[c&&c(h=>l.write(h))];l.onData(h=>{d+=h,s.raw(h),a&&a.exec(d)&&u({cmdOutput:d})}),l.exit.then(({code:h,signal:m})=>{try{p.forEach(g=>g==null?void 0:g.dispose()),h||m?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:d,code:h,signal:m}):u({cmdOutput:d})}catch(g){f(g)}},h=>{p.forEach(m=>m==null?void 0:m.dispose()),f(h)})})}function Fs(t){return async function(e){let{cmd:r,args:n,output:i}=e,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=e.cwd||t,c=e.env?W(W({},process.env),e.env):process.env,l=await Np(r,a,c,i),u=nc.spawn(l,n,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,d)=>{u.once("error",p=>{i.stop(o,s),d(p)}),u.once("close",(p,h)=>{i.stop(o,s),f({code:p,signal:h})})}),async terminate(){u.kill("SIGKILL")}}}}async function gA(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var m,g;let{cmd:i,args:o,output:s}=n,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=n.cwd||t,f=n.env?W(W({},process.env),n.env):process.env,d=await Np(i,u,f,s),p=r.spawn(d,o||[],{cwd:u,env:f,cols:(m=s.dimensions)==null?void 0:m.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),h=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>p.resize(v.columns,v.rows))];return{onData:p.onData.bind(p),write:p.write.bind(p),resize:p.resize.bind(p),exit:new Promise(v=>{p.onExit(({exitCode:w,signal:b})=>{if(h.forEach(C=>C==null?void 0:C.dispose()),s.stop(a,c),v({code:w,signal:b}),process.platform==="win32")try{p.kill()}catch{}})}),async terminate(){p.kill("SIGKILL")}}}}function rc(t,e,r,n){return async function(i){let{env:o,cmd:s,args:a,output:c}=i,l=i.cwd||r,u=l?`cd '${l}' && `:"",f=Object.keys(o||{}).map(b=>`${b}='${o[b]}' `).join(""),d=(a||[]).map(b=>` '${b.replace(/'/g,`'"'"'`)}'`).join(""),p=`${u}${f}${s}${d}`,h=[...e,"/bin/sh","-c",p],m=`Run: ${t} ${h.join(" ").replace(/\n.*/g,"")}`,g=c.start(m),v=await Np(t,process.cwd(),process.env,c),w=nc.spawn(v,h,{windowsHide:!0,env:n?W(W({},process.env),n):void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((b,C)=>{w.once("error",S=>{c.stop(m,g),C(S)}),w.once("close",(S,_)=>{c.stop(m,g),b({code:S,signal:_})})}),async terminate(){w.kill("SIGKILL")}}}}async function wA(t,e,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var _,P;let{env:s,cmd:a,args:c,output:l}=o,u=o.cwd||r,f=u?`cd '${u}' && `:"",d=Object.keys(s||{}).map(I=>`${I}='${s[I]}' `).join(""),p=(c||[]).map(I=>` '${I.replace(/'/g,`'"'"'`)}'`).join(""),h=`${f}${d}${a}${p}`,m=[...e,"/bin/sh","-c",h],g=`Run: ${t} ${m.join(" ").replace(/\n.*/g,"")}`,v=l.start(g),w=!1,b=await Np(t,process.cwd(),process.env,l),C=i.spawn(b,m,{cols:(_=l.dimensions)==null?void 0:_.columns,rows:(P=l.dimensions)==null?void 0:P.rows,useConpty:w}),S=[l.onDidChangeDimensions&&l.onDidChangeDimensions(I=>C.resize(I.columns,I.rows))];return{onData:C.onData.bind(C),write:C.write.bind(C),resize:C.resize.bind(C),exit:new Promise(I=>{C.onExit(({exitCode:A,signal:R})=>{if(S.forEach(F=>F==null?void 0:F.dispose()),l.stop(g,v),I({code:A,signal:R}),process.platform==="win32")try{C.kill()}catch{}})}),async terminate(){C.kill("SIGKILL")}}}}async function Np(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(zt.isAbsolute(t))return await Yl(t)||t;if(/[/\\]/.test(t)){let a=zt.join(e,t);return await Yl(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(zt.delimiter).filter(Boolean),o.push(zt.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=zt.join(e,t);return await Yl(a)||a}for(let a of o){let c;zt.isAbsolute(a)?c=zt.join(a,t):c=zt.join(e,a,t);let l=await Yl(c);if(l)return l}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let s=zt.join(e,t);return await Yl(s)||s}var CA=process.env.PATHEXT,bA=CA?CA.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function Yl(t){if(bA.indexOf(zt.extname(t))!==-1)return await pt(t)?t:void 0;for(let e of bA){let r=t+e;if(await pt(r))return r}}function qs(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function ic(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,o=e[r]||0;if(i!==o)return i<o}return!1}var EA=pw?(t,e,r)=>nc.spawn(j6,[t,...e||[]],se(W({},r),{windowsHide:!0})):nc.fork;async function _A(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}}function Jl(t){let{output:e}=t,r=[];return{output:ht(se(W({},e),{get dimensions(){return e.dimensions},event:i=>r?r.push(i):e.event(i)})),flush:()=>{r&&(r.forEach(i=>e.event(i)),r=void 0)}}}function SA(t,e){return ht(se(W({},t),{get dimensions(){return t.dimensions},event:n=>{t.event(n),e.event(n)}}))}var Ql=K(require("path"));async function hw(t,e,r){let n=await xA(t,"agent-extra-socket",r);if(!n)return;let i=await mw(e,"agent-socket");if(!i)return;let o=await mw(e,"homedir");try{let{stdout:a}=await e.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim())return}catch{}let s=(async()=>{await e.exec(`mkdir -p -m 700 '${Ql.posix.dirname(i)}'`);let a=await xA(t,"homedir",r),c=await mw(e,"homedir");a&&c&&(await oc({cliHost:t},{shellServer:e},t.path.join(a,"pubring.kbx"),Ql.posix.join(c,"pubring.kbx"),"gpg"),await oc({cliHost:t},{shellServer:e},t.path.join(a,"pubring.gpg"),Ql.posix.join(c,"pubring.gpg"),"gpg"),await oc({cliHost:t},{shellServer:e},t.path.join(a,"trustdb.gpg"),Ql.posix.join(c,"trustdb.gpg"),"gpg")),await U6(t,r)})();return{cliHost:t,remoteGpgSocket:i,localGpgSocket:n,ready:s}}async function xA(t,e,r){try{let{stdout:n}=await Se({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(i);o&&(i=o[1])}return t.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch{return}}async function mw(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch{return}}async function U6(t,e){try{await Se({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}async function gw(t,e,r){if(!("exec"in t)){for(let n=e,i="";n!==i;i=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await Se({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}async function vw(t,e,r){try{return await Se({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch{return!1}}async function yw({exec:t},e,r){try{let{stdout:n,stderr:i}=await Se({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:rt});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function PA(t,e,r){if(!("exec"in t)){let i=await gw(t,e.rootFolderPath,r);if(!i)return;try{return(await t.readFile(t.path.join(i,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(o){if((o==null?void 0:o.code)!=="ENOENT")throw o;return[]}}let n;try{let{stdout:i}=await Se({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(B6(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function B6(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function kA(t,e,r){return await H6(t,e,r)||V6(t,e,r)}async function H6(t,e,r){try{let{stdout:n}=await Se({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function V6(t,e,r){let n=await W6(t,e,r);if(!!n)try{let{stdout:i}=await Se({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!i.toString().trim()}catch{return}}async function W6(t,e,r){try{let{stdout:n}=await Se({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function Lp(t,e,r,n,i,o){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?se(W({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let l=Ii({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:ht(i,ae.Info)}),u=n.fullClone?l:(async()=>(await l,await Ii({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:o}),Ii({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:o})))();return{gitClone:l,gitUnshallow:u}}var vo=K(require("stream"));async function IA(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function ww(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,l,u,f,d])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:l,cmd:d,env:f.split(" ").reduce((h,m)=>{let g=m.indexOf("=");return g!==-1&&(h[m.substr(0,g)]=m.substr(g+1)),h},{})}}),mntNS:o}}function AA(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function Cw(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>Cw(n,e,r+e))}`}var bw=K(require("events")),Fp=class{constructor(){this.nodeEmitter=new bw.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}},Ew=class{constructor(){this.nodeEmitter=new bw.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var J9=PD(),ND=fw(),Lw=ID(),Q9=TD();async function zp(t,e){var S,_,P,I;let{cliHost:r,output:n}=t,i="Launching Remote-Containers helper.",o=n.start(i);if(pw)return n.stop(i,o),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let s=r.type==="local",a=s?r:await Rp(process.cwd(),t.loadNativeModule,n),l=(await(0,RD.promisify)(DD.randomBytes)(20)).toString("hex"),u={},f=FD(t.cliHost)||FD(a),d=f?pr.posix.join(((S=e.env)==null?void 0:S.TMPDIR)||"/tmp",`vscode-ssh-auth-${l}.sock`):void 0;f?(u[d]=f,n.write(`ssh-agent: SSH_AUTH_SOCK in container (${d}) forwarded to ${f.cliHost!==a?"remote":"local"} host (${f.socketPath}).`)):n.write("ssh-agent: SSH_AUTH_SOCK not set on host.");let p=await hw(r,e.shellServer,n)||(s?void 0:await hw(a,e.shellServer,n));p&&(u[p.remoteGpgSocket]={cliHost:p.cliHost,socketPath:p.localGpgSocket});let h=pr.posix.join(((_=e.env)==null?void 0:_.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${l}.sock`),m=pr.posix.join(((P=e.env)==null?void 0:P.TMPDIR)||"/tmp",`vscode-remote-containers-server-${l}.js`),g=pr.posix.join(((I=e.env)==null?void 0:I.TMPDIR)||"/tmp",`vscode-remote-containers-${l}.js`),v=LD(t,e,"Container",void 0,!1,!1,m,g,u,h,a),w=v.then(A=>A.ready),b=v.then(A=>A.mrpcExec),C=v.then(A=>A.mrpcPtyExec);return w.catch(console.error),t.onAdoptProcess(A=>rK(e.shellServer,h,d,A).catch(console.error)),n.stop(i,o),{remoteContainersCLI:g,remoteEnv:d?{SSH_AUTH_SOCK:d,REMOTE_CONTAINERS_IPC:h}:{REMOTE_CONTAINERS_IPC:h},mrpcExec:b,mrpcPtyExec:C,ready:w,reconnect:()=>v.then(A=>A.reconnect())}}async function Gl(t,e,r,n){let{passwdUser:i,nodeExecutable:o,mrpcExec:s,mrpcPtyExec:a,setBaseEnv:c,connect:l,reconnect:u,terminate:f}=await LD(t,{remoteExec:e},"Host",r,!0,n,void 0);return{passwdUser:i,nodeExecutable:o,exec:s,ptyExec:a,setBaseEnv:c,connect:l,reconnect:u,terminate:f}}async function LD(t,{remoteExec:e,nodeExecutable:r},n,i,o,s,a,c,l,u,f){let{product:d,output:p}=t,h=c&&Le(pr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),m=Le(pr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),g=await Sn(e,p,void 0,void 0,n),v=o?await qw(g,await Mw(g)):void 0,w=!0;if(!r||!a){let _=(await g.exec("echo ~")).stdout.trim().split(`
`)[0],P=pr.posix.join(_,".vscode-remote-containers");if(r||(r=await nK(t,g,P,_,d,s)),!a){a=`${P}/dist/vscode-remote-containers-server-${t.package.version}.js`;try{await g.exec(`test -f '${a}'`),w=!1}catch{await g.exec(`mkdir -p '${pr.posix.dirname(a)}'`)}}}if(c){let _=`EOF-${c}`;await g.exec(`cat <<'${_}' >${c}
${await h}
${_}
`)}if(w){let _=`EOF-${a}`,P=`${a}_${Date.now()}`;await g.exec(`cat <<'${_}' >${P}
${await m}
${_}
mv ${P} ${a}`)}let b=()=>X9(t,n,g,r,a,l,u,f),C=await b(),S;return{ready:C.ready,passwdUser:v,nodeExecutable:r,mrpcExec:Z9(()=>C.mrpc,n,i),mrpcPtyExec:eK(()=>C.mrpc,n,i),mrpcExecToEnd:tK(()=>C.mrpc,n,i),setBaseEnv:_=>new Promise((P,I)=>{S=_,C.mrpc.setBaseEnv(_,A=>A?I(A):P())}),connect:C.mrpc.connect,reconnect:async()=>{let _=`${n}: Reconnecting exec server`,P=p.start(_);await C.process.terminate().catch(()=>{}),g=await Sn(e,p,void 0,void 0,n),C=await b(),S&&await new Promise((I,A)=>{C.mrpc.setBaseEnv(S,R=>R?A(R):I())}),p.stop(_,P)},terminate:()=>C.process.terminate()}}async function X9(t,e,r,n,i,o,s,a){let{cliHost:c,output:l}=t,u=Object.keys(o||{}),f=se(W({},u.reduce((P,I)=>(P[I]="duplex",P),{})),{rpc:"async",connected:"async",ready:"async"}),d={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},p=r.process,h=`echo -n ${fo} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${n}' '${i}'
`;p.stdin.write(h);let m,g=new Promise(P=>m=P),v=new OD.StringDecoder;p.stderr.on("data",P=>{let I=v.write(P).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(m){let A=I.indexOf(fo);A!==-1&&(m(),m=void 0,I=I.substr(0,A)+I.substr(A+1))}I&&l.write(Re(`${e} server: ${I}`))}),p.exit.then(({code:P,signal:I})=>{l.write(`${e} server terminated (code: ${P}, signal: ${I}).`)},P=>{l.write(`${e} server did not launch or terminated: ${P&&P.message||String(P)}`)});let b=(c==null?void 0:c.type)==="local",C,S=new Promise(P=>C=P),_=J9(d,f)(se(W({},u.reduce((P,I)=>{let A=o[I];return P[I]=()=>A.cliHost.connect(A.socketPath),P},{})),{rpc:async(P,I)=>{try{let A=JSON.parse(P),R=await yw(b?a:c,A.command,A.stdin).catch(F=>{if(b)throw F});!b&&(R==null?void 0:R.code)!==0&&(R=await yw(a,A.command,A.stdin),R.code===0&&(b=!0)),I(void 0,JSON.stringify(R))}catch(A){console.error(A),I(A)}},connected:P=>{P()},ready:P=>{C(),P()}}));return(0,Gp.default)(ND.source(p.stdout),_.createStream(),ND.sink(p.stdin)),await Promise.race([g,p.exit.then(({code:P,signal:I})=>{throw new Error(`${e} server terminated (code: ${P}, signal: ${I}).`)})]),{ready:S,mrpc:_,process:p}}function Z9(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),d=await new Promise((p,h)=>{f.exec({cmd:i,args:o,cwd:s||r,env:a},(m,g)=>{m?h(m):p(g)})});return{stdin:Lw.sink(f.stdin(d,p=>{p&&p.message!=="unexpected end of parent stream"&&console.error(p)})),stdout:Lw.source(f.stdout(d)),stderr:Lw.source(f.stderr(d)),exit:new Promise((p,h)=>{f.exit(d,(m,g)=>{var v;c.stop(l,u),m?(((v=m.message)==null?void 0:v.endsWith("ENOENT"))&&!m.code&&(m.code="ENOENT"),h(m)):p(g)})}),terminate:async()=>new Promise((p,h)=>{f.terminate(d,m=>{m?h(m):p()})})}}}function eK(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),d=await new Promise((g,v)=>{var w,b;f.ptyExec({cmd:i,args:o,cwd:s||r,env:a,rows:(w=c.dimensions)==null?void 0:w.rows,cols:(b=c.dimensions)==null?void 0:b.columns},(C,S)=>{C?v(C):g(S)})}),p=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>f.ptyResize(d,g.columns,g.rows))],h=Q9();(0,Gp.default)(h,f.ptyIn(d,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let m=new Fp;return(0,Gp.default)(f.ptyOut(d),g=>{g(null,function v(w,b){if(w!==!0){if(w)throw w;m.fire(b),g(null,v)}})}),{write:g=>h.push(g),onData:m.event,resize:(g,v)=>f.ptyResize(d,g,v),exit:new Promise((g,v)=>{f.ptyExit(d,(w,b)=>{p.forEach(C=>C==null?void 0:C.dispose()),c.stop(l,u),w?v(w):g(b)})}),terminate:async()=>new Promise((g,v)=>{f.ptyTerminate(d,w=>{w?v(w):g()})})}}}function tK(t,e,r){return async n=>{let{cmd:i,args:o,cwd:s,env:a,output:c}=n,l=`Run in ${e}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t();return new Promise((d,p)=>{f.execToEnd({cmd:i,args:o,cwd:s||r,env:a},(h,m)=>{if(c.stop(l,u),h||!m)p({stdin:new vo.Writable,stdout:vo.Readable.from([]),stderr:vo.Readable.from([]),exit:Promise.reject(h),terminate:async()=>{}});else{let g=vo.Readable.from([Buffer.from(m.stdout.data)]),v=new Promise(C=>g.on("end",C)),w=vo.Readable.from([Buffer.from(m.stderr.data)]),b=new Promise(C=>w.on("end",C));d({stdin:new vo.Writable,stdout:g,stderr:w,exit:Promise.all([v,b]).then(()=>({code:m.code,signal:m.signal})),terminate:async()=>{}})}})})}}var Fw="\\\\.\\pipe\\openssh-ssh-agent";function FD(t){if(t.env.SSH_AUTH_SOCK)return{cliHost:t,socketPath:t.env.SSH_AUTH_SOCK};if(t.platform==="win32")return{cliHost:t,socketPath:Fw}}var Kp=new Set;async function rK(t,e,r,n){let i=await n.processId;if(i&&i>0){let o=await IA(t,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==e&&!Kp.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(Kp.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!Kp.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(Kp.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}async function nK(t,e,r,n,i,o){let s=(i==null?void 0:i.commit)||"b3318bc0524af3d74034b8bb8a64df0ccf35549a",a=(i==null?void 0:i.commit)?i.quality||"insider":"stable",{localCacheFolder:c,output:l}=t,u=pr.posix.join(r,"bin",s),f=pr.posix.join(u,"node");try{await e.exec(`test -x '${f}'`)}catch{if(i)try{let g=pr.posix.join($w(n,i),"bin",s),v=pr.posix.join(g,"node");await e.exec(`test -x '${v}'`);let w=pr.posix.join(g,"node_modules","node-pty","package.json");return await e.exec(`test -f '${w}'`),v}catch{}let d;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")d=jw;else{let g=await Bw(e);d=Uw(g,!1)}let h={localCacheFolder:c,build:d,commit:s,quality:a,web:!1,output:l},m=iu(h);if(await pt(m)||await Yp(h),d===jw)await nu({output:l},e,m,u,o);else{let g=[];await Wp.t({file:m,filter:w=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(w),onentry:w=>{new Wp.WriteEntry.Tar(w).on("data",C=>g.push(C))}});let v=Buffer.concat(g);await nu({output:l},e,v,u,o,!1)}}return f}var QD=K(require("net")),XD=K(JD());async function ZD({forwardedPorts:t,output:e,getLogLevel:r},n,i,o){e.write(`Port forwarding for container port ${i} starts listening on local port.`,ae.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let l=new Set,u=QD.createServer({pauseOnConnect:!0},f=>{let d=f.remotePort,p=u.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${i} in the container.`),r()===ae.Trace&&(async()=>{let h=await(0,XD.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),fK(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
			`],s).then(h=>{let m;h.exit.then(({code:g,signal:v})=>{m||(l.delete(f),f.end()),e.write(`Port forwarding ${d} > ${p} > ${i} terminated${m?` by extension (${m})`:""} with code ${g} and signal ${v}.`)},g=>{l.delete(f),f.end(),e.write(`Port forwarding ${d} > ${p} > ${i} terminated with error: ${g&&g.message||String(g)}`)}),h.stderr.on("data",g=>{e.write(`Port forwarding ${d} > ${p} > ${i} stderr: ${g.toString("utf8")}`,ae.Debug)}),f.on("close",g=>{e.write(`Port forwarding ${d} > ${p} > ${i}: Local close${g?" with error":""}`,ae.Debug),l.delete(f),m="closed",h.stdin.end(),setTimeout(()=>{m="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(f),f.pipe(h.stdin),l.add(f)}).catch(console.error)});u.on("listening",()=>{let f={targetPort:i,server:u,connections:l};u.on("close",()=>{t.delete(f)}),t.add(f),e.write(`Port forwarding local port ${u.address().port} to container port ${i}`),a(u)}),u.on("error",f=>{if(f&&(f.code==="EADDRINUSE"||f.code==="EACCES")){u.listen(0,"127.0.0.1");return}c(f)}),u.on("close",()=>{c(new Error("Closed"))}),u.listen(i,"127.0.0.1")})}async function fK(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var lc=K(require("path"));function uc(t,e){let r,n=t.platform==="win32",i=se(W({},t),{get env(){return r||(r=tR(n,t.env))}}),o=hK.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=rR(o,t.containerWorkspaceFolder)),Xp(o,e)}function eR(t,e,r,n){let i=t==="win32";return Xp(mK.bind(void 0,i,e,tR(i,r)),n)}function Xp(t,e){if(typeof e=="string")return rR(t,e);if(Array.isArray(e))return e.map(r=>Xp(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=Xp(t,e[n])}),r}return e}var dK=/\$\{(.*?)\}/g;function tR(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function rR(t,e){return e.replace(dK,pK.bind(void 0,t))}function pK(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function hK(t,e,r,n,i){switch(n){case"env":case"localEnv":return nR(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?lc.win32:lc.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?lc.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function mK(t,e,r,n,i,o){switch(i){case"containerEnv":return nR(t,r,o,n,e);default:return n}}function nR(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let o=e[r];return typeof o=="string"?o:""}throw new ue({description:`'${n}'${i?` in ${lc.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function Ai(t){return new Promise(e=>setTimeout(e,t))}var wo=0,aR=/Extension host agent listening on (\d+)/;var wt;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(wt||(wt={}));var cR="updateContentCommand";async function th(t){let{params:e,startedAt:r,sharedDataFolder:n,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:o,containerUser:s,containerGroup:a,containerEnv:c,remoteExec:l,remotePtyExec:u,remoteExecAsRoot:f,rootShellServer:d}=t,p;d&&s==="root"?p=d:p=await Sn(l,e.output,e.sessionId),s||(s=await Mw(p)),!f&&s==="root"&&(f=l);let h=await Bw(p),m=await qw(p,s);m||e.output.write(gv(`User ${s} not found in /etc/passwd.`));let g=await gK(c,m),v=await lR(c,m),w=$w(v,e.product),{commit:b,quality:C}=e.product,S=b&&await vK(w,b,C||"insider",e.web),_=Uw(h,C==="stable"),P=b&&n&&await uR(ge.posix,n,_,b,C||"insider",e.web),I=S&&await CK(S),A;d?A=Promise.resolve(d):s==="root"&&(A=Promise.resolve(p));let R={startedAt:r,osRelease:h,build:_,user:s,gid:a||(m==null?void 0:m.gid),env:c,shell:g,homeFolder:v,userDataFolder:w,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:n,installFolder:S,sharedInstallFolder:P,remoteWorkspaceFolder:o,nodeExecutable:I,remoteExec:l,remotePtyExec:u,remoteExecAsRoot:f,shellServer:p};return(A||f)&&(R.launchRootShellServer=()=>A||(A=Sn(f,e.output))),R}async function Mw(t){return(await t.exec("id -un")).stdout.trim()}async function lR(t,e){return t.HOME||e&&e.home||"/root"}async function gK(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function qw(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return Op(r,e)}function Op(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function vK(t,e,r,n){return ge.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}function yK(t){return ge.posix.join(t,"bin")}async function uR(t,e,r,n,i,o){return t.join(e,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function fR(t){return ge.posix.join(t.userDataFolder,"extensions")}function po(t){return ge.posix.join(t.userDataFolder,"data/Machine")}function rh(t){return ge.posix.join(t.userDataFolder,"data/Machine/settings.json")}function wK(t){return ge.posix.join(t,".vscode-remote")}function $w(t,e){return ge.posix.join(t,e.serverDataFolderName)}function dR(t){return ge.posix.join("/var",/^\.*(.*)$/.exec(t.serverDataFolderName)[1])}async function CK(t){return ge.posix.join(t,"node")}async function Co(t,e,r,n,i,o=wo){var b;await bK(t,e),await KK(t,e),await YK(t,e);let s=await EK(t,e,r,n),{serverDownloaded:a}=await kK(t,e),c,l,u=Promise.resolve(),f;if(!t.cliMode&&e.nodeExecutable){let C=await zp(t,e);c=C.remoteContainersCLI,l=C.remoteEnv,u=C.ready,f=C.mrpcExec;let S=t.cliHost.reconnect;S&&(t.cliHost.reconnect=async()=>{await S(),C.reconnect().catch(_=>t.output.write(Re(_&&(_.stack||_.message)||String(_))))})}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?zl(t,e,await xK(e),r,f).then(C=>W(W(W(W({},C),l),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?eR(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(b=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?b:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await su(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await nh(e,c,t.output,"system"));let m,g,v,w;if(e.installFolder){let C=Array.from(new Set([...r.extensions||[],...(n==null?void 0:n.allFeatures.filter(I=>(St||I.included)&&I.value).reduce((I,A)=>I.concat(A.extensions||[]),[]))||[]])),S=await AK(t,e,C),_=await BK(t,e,o,f,S,p),P=_.serverPort;v=_.connectionToken,w=_.webConnectionToken,m=P,t.forwardServerPort&&e.nodeExecutable&&(g=await ZD(t,e,P,t.sessionId),m=g.address().port,t.backgroundTasks.push(async()=>GK(t,e,r)))}if(t.postCreate.enabled){let C,S=!1,_=new Promise(I=>C=()=>{S=!0,I()}),P=(async()=>{var I;if((r.waitFor||cR)==="initializeCommand"&&C(),!(t.postCreate.skipNonBlocking&&S)&&(await Qw(t,e,r,"onCreateCommand",p,u,i,!1,C),!(t.postCreate.skipNonBlocking&&S)&&(await Qw(t,e,r,"updateContentCommand",p,u,i,!!t.prebuild,C),!(t.postCreate.skipNonBlocking&&S)))){if(!t.prebuild){if(await Qw(t,e,r,"postCreateCommand",p,u,i,!1,C),t.postCreate.skipNonBlocking&&S||(await eI(t,e,p,u,s),!t.cliMode&&e.nodeExecutable&&(((I=s["remote.containers.copyGitConfig"])!=null?I:t.isCopyGitConfigEnabled)&&(await su(t,e,[".gitconfig"],"git"),await Yw(t,e,p.then(A=>W(W({},e.env),A)))),await nh(e,c,t.output,h)),await qK(t,e,r,p,u,i,C),t.postCreate.skipNonBlocking&&S))return;await jK(t,e,r,p,u,i,C)}t.postCreate.done()}})();t.backgroundTasks.push(P),await Promise.race([_,P])}return{hostOrContainerPort:m,hostPortServer:g,connectionToken:v,webConnectionToken:w,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function bK(t,e){let r=wK(e.homeFolder);!await ih(e.shellServer,e.userDataFolder)&&await ih(e.shellServer,r)&&await Ti(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function EK(t,e,r,n){let i=po(e),o=ge.posix.join(i,".writeMachineSettingsMarker"),s=rh(e);if(await au(e.shellServer,o)){let a=Object.assign({},...(n==null?void 0:n.allFeatures.filter(c=>(St||c.included)&&c.value&&c.settings).map(c=>c.settings))||[],r.settings);if(_K(a,r.portsAttributes),SK(a,r.otherPortsAttributes),Object.keys(a).length)return await e.shellServer.exec(`mkdir -p '${ge.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(a,null,"	")}
settingsJSON
`),a}try{let{stdout:a}=await e.shellServer.exec(`cat ${s}`);return Xe(a)||{}}catch{return{}}}function _K(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function SK(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function xK(t){let{nodeExecutable:e,shellServer:r,userDataFolder:n}=t;if(e)return e;try{let{stdout:i}=await r.exec(`ls ${yK(n)}/*/node | head -n 1`);return i.trim()}catch{return"node"}}async function ou(t,e,r,n){let i=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,o=await e();if((await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let c=ge.posix.dirname(r);c!=="/"&&await o.exec(`chown ${i} ${c}`),r!=="/"&&await o.exec(`chown -R ${i} ${r}`)}else if(n&&(await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let u=ge.posix.dirname(n);u!=="/"&&await o.exec(`chown -R ${i} ${u}`)}}async function nh(t,e,r,n){if(e&&n!=="none"){let i=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function su(t,e,r,n){let{cliHost:i}=t,o=i.path.join(await i.homedir(),...r),s=ge.posix.join(e.homeFolder,...r);await oc(t,e,o,s,n)}async function Yw(t,e,r){let{cliHost:n}=t,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let l=await r,u=l.XDG_CONFIG_HOME?[l.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return ge.posix.join(...u,...o)})();await oc(t,e,a,c,"git")}async function oc(t,e,r,n,i){let o=await PK(t.cliHost,r);if(o)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${ge.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${cu(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function PK(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function kK(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:i,launchRootShellServer:o,build:s}=e;if(!(r&&n))return{serverDownloaded:void 0};IK(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await ih(i,n),c;a||s===gR[s.arch]&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let l=e.sharedInstallFolder;if(l&&await ih(i,l))return a||await i.exec(`mkdir -p '${ge.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${l}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let u=!!(l&&o),f=u?l:n,d=u?await o():i,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output},h=iu(p),m=await pt(h);m||await Yp(p);try{e.sharedDataFolderIsLocalCacheFolder?await pR(p):await nu(t,d,h,f)}catch(g){if(g&&g.stderr&&/unexpected end of file|not in gzip format/i.test(g.stderr.toString()))await Yp(p),e.sharedDataFolderIsLocalCacheFolder?await pR(p):await nu(t,d,h,f);else throw g}return u&&(await i.exec(`mkdir -p '${ge.posix.dirname(n)}' && ln -snf '${l}' '${n}'`),(async()=>{await d.exec(`cd '${ge.posix.dirname(l)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!m}}function IK(t,e){let r=t.version;if(e.minVersion&&r){let n=qs(r.trim());if(n&&ic(n,e.minVersion)){let i=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new ue({description:i,data:{reload:!1}})}}}async function Yp(t){let{build:e,commit:r,quality:n,web:i,output:o}=t,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${e.id} ${n} ${i?"web":""}`);let c=iu(t);await Or(ge.dirname(c));try{let l=`${c}_${Date.now()}`;await new Promise((u,f)=>{let d=Zp.createWriteStream(l),p=`https://update.code.visualstudio.com/commit:${r}/server-${e.id}${i?"-web":""}/${n}`;iR.https.get(p,m=>{if(m.statusCode<200||m.statusCode>299){f(new ue({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${p}): HTTP ${m.statusCode} - ${m.statusMessage}`}));return}m.on("error",f),m.pipe(d),m.on("end",u)}).on("error",f)}),await Sa(l,c)}catch(l){throw l||new Error("Failed to download VS Code Server")}finally{o.stop(s,a)}}async function nu(t,e,r,n,i,o=!0){let s="Installing VS Code Server",a=t.output.start(s);try{let c=`${n}_${Date.now()}`;if(await e.exec(`mkdir -p ${c}`),i)typeof r=="string"&&r.endsWith(".zip")?await e.exec(`unzip ${r} -d ${c}`):await e.exec(`cat ${r} | tar --no-same-owner -x${o?"z":""} -C ${c}`);else{let l=typeof r=="string"?await Le(r):r;await e.exec(`${cu(l.byteLength)} | tar --no-same-owner -x${o?"z":""} -C ${c}`,{stdin:l})}await e.exec(`mv -n ${ge.posix.join(c,"*",".")} ${n} && rmdir ${c}`)}finally{t.output.stop(s,a)}}async function pR(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let l=await uR(ge,e,r,n,i,o),u=`${l}_${Date.now()}`;await Or(u);let f=iu(t);await(await Fs(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",f,"--strip-components","1","-C",u],cwd:process.cwd(),output:s})).exit,await pv(l,{recursive:!0}),await Sa(u,l)}finally{s.stop(a,c)}}function iu(t){let{localCacheFolder:e,build:r,commit:n,quality:i,web:o}=t,s=ge.join(e,"serverCache",n),a=`vscode-server-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}${r.archiveExt||".tar.gz"}`;return ge.join(s,a)}async function hR(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await Ti(t,e,[ge.posix.join(e.installFolder,...lw(t.product)),...wR(t.telemetry),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(i=>!!i)}async function AK(t,e,r){let n="Preparing Extensions",i=t.output.start(n),{sharedDataFolder:o}=e,s=o?LK(o):void 0,a=mR(e),c=await TK(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let l=NK(t.localCacheFolder),u=await DK(t,e,l,s,a,[...c.builtinExtensions,...c.extensions]);RK(t,e,l,s,a,u).catch(console.error)}return t.output.stop(n,i),c}async function TK(t,e,r){let n=po(e),i=ge.posix.join(n,".installExtensionsMarker"),o=!await au(e.shellServer,i),s=o?[]:t.installBuiltinExtensions||[],a=await t.getExtensionsToInstall(o,r),c=[].concat(...s.map(l=>["--install-builtin-extension",l]),...a.map(l=>["--install-extension",l]));return t.cliMode&&c.length&&c.push("--do-not-sync"),{builtinExtensions:s,extensions:a,args:c}}async function DK(t,e,r,n,i,o){t.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>o.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${n} && touch ${l.map(d=>`'${d}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await Or(r);let c=await Kr(r),l=c.filter(u=>o.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=ge.basename(r),f=eh.c({cwd:ge.dirname(r)},l.map(h=>ge.join(u,h))),d=ge.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let m=[];f.on("data",g=>m.push(g)),f.on("end",()=>h(Buffer.concat(m)))});await s.exec(`# Copy extensions to remote
mkdir -p ${d}
${cu(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${d}
mv ${d}/* ${i} && rmdir ${d}`,{stdin:p})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function RK(t,e,r,n,i,o){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Ai(s);;)o=await OK(t,e,r,n,i,o),await Ai(a)}async function OK(t,e,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(d=>!!d);if(!n){let d=o.filter(p=>u.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${d.join(", ")||"None"}`);for(let p of d)try{await W_(ge.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let f=u.filter(d=>o.indexOf(d)===-1&&s.indexOf(d)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${f.join(", ")||"None"}`,ae.Trace),f.length)if(n){let d=await c();await d.exec(`mkdir -p '${n}' && cd '${i}' && cp ${f.map(p=>`'${p}'`).join(" ")} '${n}'`),await d.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let d=ge.posix.basename(i),p=await l({cmd:"tar",cwd:ge.posix.dirname(i),args:["c",...f.map(v=>ge.posix.join(d,v))],output:t.output}),h=ge.join(ge.dirname(r),`${ge.basename(r)}-${Date.now()}`);await Or(h);let m=eh.x({cwd:h,strip:1}),g=new Promise((v,w)=>{m.on("error",w),m.on("finish",v)});p.stdout.pipe(m),await g;for(let v of await Kr(h))await Sa(ge.join(h,v),ge.join(r,v));await pv(h)}return{remoteExtensions:u,cachedExtensions:s}}var Jw="extensionsCache";function NK(t){return ge.join(t,Jw)}function LK(t){return ge.posix.join(t,Jw)}function mR(t){return ge.posix.join(t.userDataFolder,Jw)}var FK={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},gR={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},jw={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},MK={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function Uw(t,e){let r=MK[t.hardware];if(t.id==="alpine"){let i=r&&gR[r];if(!i)throw new ue({description:`Alpine Linux is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let n=r&&FK[r];if(!n||e&&!n.stable)throw new ue({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return n}async function Bw(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function Qw(t,e,r,n,i,o,s,a,c){let l=ge.posix.join(po(e),`.${n}Marker`),u=await au(e.shellServer,l)||a;await Xw(t,e,r,n,i,o,s,u,c)}async function qK(t,e,r,n,i,o,s){let a=ge.posix.join(po(e),".postStartCommandMarker"),c=!!e.startedAt&&await $K(e.shellServer,a,e.startedAt);await Xw(t,e,r,"postStartCommand",n,i,o,c,s)}async function $K(t,e,r){try{return await t.exec(`mkdir -p '${ge.posix.dirname(e)}' && [ "$(cat '${e}' 2>/dev/null)" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function jK(t,e,r,n,i,o,s){await Xw(t,e,r,"postAttachCommand",n,i,o,!0,s)}async function Xw({postCreate:t},e,r,n,i,o,s,a,c){let l=r[n];if(a&&l&&(typeof l=="string"?l.trim():l.length)){await o,s&&await s();let u=`Running ${n}...`,f=typeof l=="string"?l:l.join(" "),d=ht({event(p){t.output.event(p),p.type==="raw"&&p.text.includes("::endstep::")&&t.output.event({type:"progress",name:u,status:"running",stepDetail:""}),p.type==="raw"&&p.text.includes("::step::")&&t.output.event({type:"progress",name:u,status:"running",stepDetail:`${p.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},ae.Info);try{d.event({type:"progress",name:u,status:"running",stepDetail:f});let p=e.remoteWorkspaceFolder||e.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await zK(se(W({},t),{output:d}),e,typeof l=="string"?["/bin/sh","-c",l]:l,p,{remoteEnv:await i,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:u,status:"succeeded"})}catch(p){if(d.event({type:"progress",name:u,status:"failed"}),p&&(p.code===130||p.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(p==null?void 0:p.code)&&d.write(Re(`${n} failed with exit code ${p.code}. Skipping any further user-provided commands.`)),new ue({description:`The ${n} in the devcontainer.json failed.`,originalError:p})}}n===(r.waitFor||cR)&&c()}async function vR(t,e){try{return await t.exec(`test -f ${e}`),!0}catch{return!1}}async function au(t,e){try{return await t.exec(wp(e)),!0}catch{return!1}}function wp(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${ge.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function ih(t,e){try{return await UK(t,e),!0}catch{return!1}}async function UK(t,e){return t.exec(`test -d ${e}`)}async function BK(t,e,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:l}=e,{processes:u,mntNS:f}=await ww(l),d=new RegExp(`${ge.posix.join(ge.posix.dirname(a).replace(".","\\."),"[^/]*","server.sh")}`),p=u.filter(X=>X.mntNS===f&&d.test(X.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(p,void 0,"  ")}`,ae.Trace);let{current:h,others:m}=p.reduce((X,J)=>(X[(J.cwd===a||J.cwd===c)&&d.test(J.cmd)?"current":"others"].push(J),X),{current:[],others:[]});if(!t.cliMode&&m.length){t.output.write(`Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${m.map(X=>X.pgrp?`-${X.pgrp}`:X.pid).join(" ")}`)}catch{}}let{commit:g,quality:v}=t.product,w=ge.posix.join(po(e),`.connection-token-${g}${v==="stable"?"":`-${v}`}${t.web?"-web":""}`),b=ge.posix.join(po(e),`.devport-${g}${v==="stable"?"":`-${v}`}${t.web?"-web":""}`);if(h.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:X}=await l.exec(`cat '${b}' 2>/dev/null`),J=X.toString().trim(),Y=parseInt(J,10),te=h[0].cmd.indexOf(` ${yR(t.product)} `)!==-1?(await l.exec(`cat '${w}'`)).stdout.toString().trim():void 0,M=(/--connectionToken ([^ ]+) /.exec(h[0].cmd)||[])[1];return{serverPort:Y,connectionToken:te,webConnectionToken:M}}catch(X){console.error(X),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await l.exec(`kill -9 ${h.map(J=>J.pgrp?`-${J.pgrp}`:J.pid).join(" ")}`)}catch{}}}let C=!!t.webConnectionToken,S;if(!C){let X=`${w}-${tw()}`,{stdout:J}=await l.exec(`cat '${w}' 2>/dev/null || (umask 377 && echo '${tw()}' >'${X}' && mv -n '${X}' '${w}' && rm -f '${X}' && cat '${w}')`);S=J.toString().trim()}t.progress(5);let _="Starting VS Code Server",P=t.output.start(_),I=[ge.posix.join(a,...lw(t.product,C)),"--log",Q_(t.getLogLevel()),"--force-disable-user-env",...HK(t),...wR(t.telemetry),"--accept-server-license-terms","--host","127.0.0.1","--port",String(r),...t.webConnectionToken?["--connectionToken",t.webConnectionToken]:[],...S?[yR(t.product),w]:[],"--extensions-download-dir",mR(e),...i.args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],R=(await Ti(t,{remoteExec:await n||e.remoteExec},I,a,{remoteEnv:W({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await o:{}),resolveOn:aR,print:"continuous"})).cmdOutput;t.output.stop(_,P);let F=(aR.exec(R)||[])[1];if(!F)throw new Error("Port not found");return await l.exec(`echo ${F} >'${b}'`),{serverPort:parseInt(F,10),connectionToken:S,webConnectionToken:t.webConnectionToken}}function yR(t){return t.serverApplicationName?"--connection-token-file":"--connection-secret"}function HK(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function wR(t){return t?[]:["--disable-telemetry"]}var VK=/^([a-z0-9\-]+):(\d{1,5})$/;function WK(t){let e=t.match(VK);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function GK(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(async i=>{let o,s;if(typeof i=="number")o=i;else{let a=WK(i);if(!a)return;s=a.host,o=a.port}return t.openTunnel(e,o,s)}))}async function zK(t,{remotePtyExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?rt:t.output}),a="",c,l=new Promise(d=>{c=d});s.onData(d=>{a+=d,o==="continuous"&&t.output.raw(d),i.resolveOn&&i.resolveOn.exec(a)&&c()});let u=t.onDidInput&&t.onDidInput(d=>s.write(d)),f=await Promise.race([s.exit,l]);return u&&u.dispose(),o==="end"&&t.output.raw(a),f&&(f.code||f.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:f.code,signal:f.signal}):{cmdOutput:a}}async function Ti(t,{remoteExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?rt:t.output}),a=[],c=[],l=new Kw.StringDecoder,u=new Kw.StringDecoder,f="",d="",p,h,m=new Promise((C,S)=>{p=C,h=S});s.stdout.on("data",C=>{a.push(C);let S=l.write(C);o==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,i.resolveOn&&i.resolveOn.exec(f)&&p()}),s.stderr.on("data",C=>{c.push(C),d+=u.write(C)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,C=>{C&&h(C)}),s.stdin.end()):i.stdin instanceof Zp.ReadStream&&i.stdin.pipe(s.stdin);let g=await Promise.race([s.exit,m]),v=Buffer.concat(a),w=Buffer.concat(c);o==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(Re(d)));let b=`${f}
${d}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:b,stdout:v,stderr:w,code:g.code,signal:g.signal}):{cmdOutput:b,stdout:v,stderr:w}}function cu(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function KK(t,e){let r=ge.posix.join(dR(t.product),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await vR(e.shellServer,r)){let n=await e.launchRootShellServer();await au(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}="${e.env[i]}"`).join("")}
etcEnvrionmentEOF
`)}}async function YK(t,e){let r=ge.posix.join(dR(t.product),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await vR(e.shellServer,r)){let n=await e.launchRootShellServer();await au(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function zl(t,e,r,n,i){var s;let{userEnvProbe:o}=n||{};if(t.output.write(`userEnvProbe: ${o||t.defaultUserEnvProbe}${o?"":" (default)"}`),o||(o=t.defaultUserEnvProbe),o==="none")return{};try{let c=(await(0,sR.promisify)(oR.randomBytes)(16)).toString("hex"),l=new RegExp(c+"(.*)"+c),u=e.shell;t.output.write(`userEnvProbe shell: ${u}`);let f=ge.posix.basename(u),d,p;/^pwsh(-preview)?$/.test(f)?(d=`& '${r}' -p '''${c}'' + JSON.stringify(process.env) + ''${c}'''`,p=o==="loginInteractiveShell"||o==="loginShell"?["-Login","-Command"]:["-Command"]):(d=`'${r}' -p '"${c}" + JSON.stringify(process.env) + "${c}"'`,p=[o==="loginInteractiveShell"?"-lic":o==="loginShell"?"-lc":o==="interactiveShell"?"-ic":"-c"]);let h=ht(t.output,ae.Trace),m=Ti({output:h},{remoteExec:await i||e.remoteExec},[u,...p,d],e.installFolder);Promise.race([m,Ai(2e3)]).then(async I=>{if(!I){let A,R=e.shellServer||await Sn(e.remoteExec,t.output);try{({processes:A}=await ww(R))}finally{e.shellServer||await R.process.terminate()}let F=A.find(H=>H.cmd.startsWith(u)&&H.cmd.indexOf(c)!==-1);if(F){let X=AA(A)[F.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${Cw(X)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(I=>t.output.write(Re(I&&(I.stack||I.message)||"Error reading process tree.")));let g=await Promise.race([m,Ai(1e4)]);if(!g)return t.output.write(Re("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let v=g.stdout.toString(),w=l.exec(v),b=w?w[1]:"{}",C=JSON.parse(b);t.output.write(`userEnvProbe parsed: ${JSON.stringify(C,void 0,"  ")}`,ae.Trace),delete C.PWD;let S=C.PATH,_=(s=e.env)==null?void 0:s.PATH,P=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&S&&_;if(P){let I=e.user;C.PATH=JK(S,_,I==="root"||I==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof S=="string"?`'${S}'`:"None"}
Container: ${typeof _=="string"?`'${_}'`:"None"}${P?`
Merged:    ${typeof C.PATH=="string"?`'${C.PATH}'`:"None"}`:""}`),C}catch(a){return t.output.write(Re(a&&(a.stack||a.message)||"Error reading shell environment.")),{}}}function JK(t,e,r){let n=t.split(":"),i=0;for(let o of e.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function CR(t){for(let e of t)await(typeof e=="function"?e():e)}var fO=K(require("crypto")),hu=K(require("path"));function bR(t){return typeof t=="undefined"||t===null}function QK(t){return typeof t=="object"&&t!==null}function XK(t){return Array.isArray(t)?t:bR(t)?[]:[t]}function ZK(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function e8(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function t8(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var r8=bR,n8=QK,i8=XK,o8=e8,s8=t8,a8=ZK,Ot={isNothing:r8,isObject:n8,toArray:i8,repeat:o8,isNegativeZero:s8,extend:a8};function ER(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function lu(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ER(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}lu.prototype=Object.create(Error.prototype);lu.prototype.constructor=lu;lu.prototype.toString=function(e){return this.name+": "+ER(this,e)};var br=lu;function Zw(t,e,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-e>a&&(o=" ... ",e=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function eC(t,e){return Ot.repeat(" ",e-t.length)+t}function c8(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=Zw(t.buffer,n[s-c],i[s-c],t.position-(n[s]-n[s-c]),f),a=Ot.repeat(" ",e.indent)+eC((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=Zw(t.buffer,n[s],i[s],t.position,f),a+=Ot.repeat(" ",e.indent)+eC((t.line+1).toString(),u)+" | "+l.str+`
`,a+=Ot.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=i.length);c++)l=Zw(t.buffer,n[s+c],i[s+c],t.position-(n[s]-n[s+c]),f),a+=Ot.repeat(" ",e.indent)+eC((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var l8=c8,u8=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],f8=["scalar","sequence","mapping"];function d8(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function p8(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(u8.indexOf(r)===-1)throw new br('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=d8(e.styleAliases||null),f8.indexOf(this.kind)===-1)throw new br('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var ir=p8;function _R(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function h8(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function tC(t){return this.extend(t)}tC.prototype.extend=function(e){var r=[],n=[];if(e instanceof ir)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new br("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof ir))throw new br("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new br("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new br("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof ir))throw new br("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(tC.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=_R(i,"implicit"),i.compiledExplicit=_R(i,"explicit"),i.compiledTypeMap=h8(i.compiledImplicit,i.compiledExplicit),i};var m8=tC,g8=new ir("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),v8=new ir("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),y8=new ir("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),w8=new m8({explicit:[g8,v8,y8]});function C8(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function b8(){return null}function E8(t){return t===null}var _8=new ir("tag:yaml.org,2002:null",{kind:"scalar",resolve:C8,construct:b8,predicate:E8,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function S8(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function x8(t){return t==="true"||t==="True"||t==="TRUE"}function P8(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var k8=new ir("tag:yaml.org,2002:bool",{kind:"scalar",resolve:S8,construct:x8,predicate:P8,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function I8(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function A8(t){return 48<=t&&t<=55}function T8(t){return 48<=t&&t<=57}function D8(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!I8(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!A8(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!T8(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function R8(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function O8(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!Ot.isNegativeZero(t)}var N8=new ir("tag:yaml.org,2002:int",{kind:"scalar",resolve:D8,construct:R8,predicate:O8,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),L8=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function F8(t){return!(t===null||!L8.test(t)||t[t.length-1]==="_")}function M8(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var q8=/^[-+]?[0-9]+e/;function $8(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ot.isNegativeZero(t))return"-0.0";return r=t.toString(10),q8.test(r)?r.replace("e",".e"):r}function j8(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||Ot.isNegativeZero(t))}var U8=new ir("tag:yaml.org,2002:float",{kind:"scalar",resolve:F8,construct:M8,predicate:j8,represent:$8,defaultStyle:"lowercase"}),B8=w8.extend({implicit:[_8,k8,N8,U8]}),H8=B8,SR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),xR=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function V8(t){return t===null?!1:SR.exec(t)!==null||xR.exec(t)!==null}function W8(t){var e,r,n,i,o,s,a,c=0,l=null,u,f,d;if(e=SR.exec(t),e===null&&(e=xR.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),d=new Date(Date.UTC(r,n,i,o,s,a,c)),l&&d.setTime(d.getTime()-l),d}function G8(t){return t.toISOString()}var z8=new ir("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:V8,construct:W8,instanceOf:Date,represent:G8});function K8(t){return t==="<<"||t===null}var Y8=new ir("tag:yaml.org,2002:merge",{kind:"scalar",resolve:K8}),rC=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function J8(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=rC;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function Q8(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=rC,s=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function X8(t){var e="",r=0,n,i,o=t.length,s=rC;for(n=0;n<o;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Z8(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var e5=new ir("tag:yaml.org,2002:binary",{kind:"scalar",resolve:J8,construct:Q8,predicate:Z8,represent:X8}),t5=Object.prototype.hasOwnProperty,r5=Object.prototype.toString;function n5(t){if(t===null)return!0;var e=[],r,n,i,o,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,r5.call(i)!=="[object Object]")return!1;for(o in i)if(t5.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function i5(t){return t!==null?t:[]}var o5=new ir("tag:yaml.org,2002:omap",{kind:"sequence",resolve:n5,construct:i5}),s5=Object.prototype.toString;function a5(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],s5.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function c5(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var l5=new ir("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:a5,construct:c5}),u5=Object.prototype.hasOwnProperty;function f5(t){if(t===null)return!0;var e,r=t;for(e in r)if(u5.call(r,e)&&r[e]!==null)return!1;return!0}function d5(t){return t!==null?t:{}}var p5=new ir("tag:yaml.org,2002:set",{kind:"mapping",resolve:f5,construct:d5}),PR=H8.extend({implicit:[z8,Y8],explicit:[e5,o5,l5,p5]}),bo=Object.prototype.hasOwnProperty,oh=1,kR=2,IR=3,sh=4,nC=1,h5=2,AR=3,m5=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,g5=/[\x85\u2028\u2029]/,v5=/[,\[\]\{\}]/,TR=/^(?:!|!!|![a-z\-]+!)$/i,DR=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function RR(t){return Object.prototype.toString.call(t)}function Xn(t){return t===10||t===13}function js(t){return t===9||t===32}function Er(t){return t===9||t===32||t===10||t===13}function fc(t){return t===44||t===91||t===93||t===123||t===125}function y5(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function w5(t){return t===120?2:t===117?4:t===85?8:0}function C5(t){return 48<=t&&t<=57?t-48:-1}function OR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function b5(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var NR=new Array(256),LR=new Array(256);for(Us=0;Us<256;Us++)NR[Us]=OR(Us)?1:0,LR[Us]=OR(Us);var Us;function E5(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||PR,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function FR(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=l8(r),new br(e,r)}function me(t,e){throw FR(t,e)}function ah(t,e){t.onWarning&&t.onWarning.call(null,FR(t,e))}var MR={YAML:function(e,r,n){var i,o,s;e.version!==null&&me(e,"duplication of %YAML directive"),n.length!==1&&me(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&me(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&me(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&ah(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&me(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],TR.test(i)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),bo.call(e.tagMap,i)&&me(e,'there is a previously declared suffix for "'+i+'" tag handle'),DR.test(o)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{me(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Eo(t,e,r,n){var i,o,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||me(t,"expected valid JSON character");else m5.test(a)&&me(t,"the stream contains non-printable characters");t.result+=a}}function qR(t,e,r,n){var i,o,s,a;for(Ot.isObject(r)||me(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],bo.call(e,o)||(e[o]=r[o],n[o]=!0)}function dc(t,e,r,n,i,o,s,a,c){var l,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),l=0,u=i.length;l<u;l+=1)Array.isArray(i[l])&&me(t,"nested arrays are not supported inside keys"),typeof i=="object"&&RR(i[l])==="[object Object]"&&(i[l]="[object Object]");if(typeof i=="object"&&RR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(l=0,u=o.length;l<u;l+=1)qR(t,e,o[l],r);else qR(t,e,o,r);else!t.json&&!bo.call(r,i)&&bo.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,me(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function iC(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):me(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;js(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Xn(i))for(iC(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&ah(t,"deficient indentation"),n}function ch(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Er(r)))}function oC(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ot.repeat(`
`,e-1))}function _5(t,e,r){var n,i,o,s,a,c,l,u,f=t.kind,d=t.result,p;if(p=t.input.charCodeAt(t.position),Er(p)||fc(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),Er(i)||r&&fc(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),Er(i)||r&&fc(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Er(n))break}else{if(t.position===t.lineStart&&ch(t)||r&&fc(p))break;if(Xn(p))if(c=t.line,l=t.lineStart,u=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Eo(t,o,s,!1),oC(t,t.line-c),o=s=t.position,a=!1),js(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return Eo(t,o,s,!1),t.result?!0:(t.kind=f,t.result=d,!1)}function S5(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Eo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Xn(r)?(Eo(t,n,i,!0),oC(t,xt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&ch(t)?me(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);me(t,"unexpected end of the stream within a single quoted scalar")}function x5(t,e){var r,n,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Eo(t,r,t.position,!0),t.position++,!0;if(a===92){if(Eo(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),Xn(a))xt(t,!1,e);else if(a<256&&NR[a])t.result+=LR[a],t.position++;else if((s=w5(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=y5(a))>=0?o=(o<<4)+s:me(t,"expected hexadecimal character");t.result+=b5(o),t.position++}else me(t,"unknown escape sequence");r=n=t.position}else Xn(a)?(Eo(t,r,n,!0),oC(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&ch(t)?me(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}me(t,"unexpected end of the stream within a double quoted scalar")}function P5(t,e){var r=!0,n,i,o,s=t.tag,a,c=t.anchor,l,u,f,d,p,h=Object.create(null),m,g,v,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,p=!1,a=[];else if(w===123)u=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(xt(t,!0,e),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?w===44&&me(t,"expected the node content, but found ','"):me(t,"missed comma between flow collection entries"),g=m=v=null,f=d=!1,w===63&&(l=t.input.charCodeAt(t.position+1),Er(l)&&(f=d=!0,t.position++,xt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,pc(t,e,oh,!1,!0),g=t.tag,m=t.result,xt(t,!0,e),w=t.input.charCodeAt(t.position),(d||t.line===n)&&w===58&&(f=!0,w=t.input.charCodeAt(++t.position),xt(t,!0,e),pc(t,e,oh,!1,!0),v=t.result),p?dc(t,a,h,g,m,v,n,i,o):f?a.push(dc(t,null,h,g,m,v,n,i,o)):a.push(m),xt(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(r=!0,w=t.input.charCodeAt(++t.position)):r=!1}me(t,"unexpected end of the stream within a flow collection")}function k5(t,e){var r,n,i=nC,o=!1,s=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)nC===i?i=f===43?AR:h5:me(t,"repeat of a chomping mode identifier");else if((u=C5(f))>=0)u===0?me(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?me(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(js(f)){do f=t.input.charCodeAt(++t.position);while(js(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Xn(f)&&f!==0)}for(;f!==0;){for(iC(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Xn(f)){c++;continue}if(t.lineIndent<a){i===AR?t.result+=Ot.repeat(`
`,o?1+c:c):i===nC&&o&&(t.result+=`
`);break}for(n?js(f)?(l=!0,t.result+=Ot.repeat(`
`,o?1+c:c)):l?(l=!1,t.result+=Ot.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=Ot.repeat(`
`,c):t.result+=Ot.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=t.position;!Xn(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Eo(t,r,t.position,!1)}return!0}function $R(t,e){var r,n=t.tag,i=t.anchor,o=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Er(s))));){if(a=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,pc(t,e,IR,!1,!0),o.push(t.result),xt(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)me(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function I5(t,e,r){var n,i,o,s,a,c,l=t.tag,u=t.anchor,f={},d=Object.create(null),p=null,h=null,m=null,g=!1,v=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),w=t.input.charCodeAt(t.position);w!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,me(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(w===63||w===58)&&Er(n))w===63?(g&&(dc(t,f,d,p,h,null,s,a,c),p=h=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):me(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=n;else{if(s=t.line,a=t.lineStart,c=t.position,!pc(t,r,kR,!1,!0))break;if(t.line===o){for(w=t.input.charCodeAt(t.position);js(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),Er(w)||me(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(dc(t,f,d,p,h,null,s,a,c),p=h=m=null),v=!0,g=!1,i=!1,p=t.tag,h=t.result;else if(v)me(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)me(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===o||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),pc(t,e,sh,!0,i)&&(g?h=t.result:m=t.result),g||(dc(t,f,d,p,h,m,s,a,c),p=h=m=null),xt(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&w!==0)me(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&dc(t,f,d,p,h,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),v}function A5(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&me(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):me(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Er(s);)s===33&&(n?me(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),TR.test(i)||me(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),v5.test(o)&&me(t,"tag suffix cannot contain flow indicator characters")}o&&!DR.test(o)&&me(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{me(t,"tag name is malformed: "+o)}return r?t.tag=o:bo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:me(t,'undeclared tag handle "'+i+'"'),!0}function T5(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&me(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Er(r)&&!fc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function D5(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Er(n)&&!fc(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&me(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),bo.call(t.anchorMap,r)||me(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function pc(t,e,r,n,i){var o,s,a,c=1,l=!1,u=!1,f,d,p,h,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=sh===r||IR===r,n&&xt(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;A5(t)||T5(t);)xt(t,!0,-1)?(l=!0,a=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||sh===r)&&(oh===r||kR===r?m=e:m=e+1,g=t.position-t.lineStart,c===1?a&&($R(t,g)||I5(t,g,m))||P5(t,m)?u=!0:(s&&k5(t,m)||S5(t,m)||x5(t,m)?u=!0:D5(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&me(t,"alias node should not have any properties")):_5(t,m,oh===r)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&$R(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&me(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,d=t.implicitTypes.length;f<d;f+=1)if(h=t.implicitTypes[f],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(bo.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,d=p.length;f<d;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){h=p[f];break}h||me(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&me(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):me(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function R5(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Er(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&me(t,"directive name must not be less than one character in length");s!==0;){for(;js(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Xn(s));break}if(Xn(s))break;for(r=t.position;s!==0&&!Er(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&iC(t),bo.call(MR,n)?MR[n](t,n,i):ah(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):o&&me(t,"directives end mark is expected"),pc(t,t.lineIndent-1,sh,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&g5.test(t.input.slice(e,t.position))&&ah(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ch(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)me(t,"end of the stream or a document separator is expected");else return}function jR(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new E5(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,me(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)R5(r);return r.documents}function O5(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=jR(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function N5(t,e){var r=jR(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new br("expected a single document in the stream, but found more")}}var L5=O5,F5=N5,UR={loadAll:L5,load:F5},BR=Object.prototype.toString,HR=Object.prototype.hasOwnProperty,sC=65279,M5=9,uu=10,q5=13,$5=32,j5=33,U5=34,aC=35,B5=37,H5=38,V5=39,W5=42,VR=44,G5=45,lh=58,z5=61,K5=62,Y5=63,J5=64,WR=91,GR=93,Q5=96,zR=123,X5=124,KR=125,or={};or[0]="\\0";or[7]="\\a";or[8]="\\b";or[9]="\\t";or[10]="\\n";or[11]="\\v";or[12]="\\f";or[13]="\\r";or[27]="\\e";or[34]='\\"';or[92]="\\\\";or[133]="\\N";or[160]="\\_";or[8232]="\\L";or[8233]="\\P";var Z5=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],eY=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function tY(t,e){var r,n,i,o,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&HR.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function rY(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new br("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ot.repeat("0",n-e.length)+e}var nY=1,fu=2;function iY(t){this.schema=t.schema||PR,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ot.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=tY(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?fu:nY,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function YR(t,e){for(var r=Ot.repeat(" ",e),n=0,i=-1,o="",s,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=a):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function cC(t,e){return`
`+Ot.repeat(" ",t.indent*e)}function oY(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function uh(t){return t===$5||t===M5}function du(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==sC||65536<=t&&t<=1114111}function JR(t){return du(t)&&t!==sC&&t!==q5&&t!==uu}function QR(t,e,r){var n=JR(t),i=n&&!uh(t);return(r?n:n&&t!==VR&&t!==WR&&t!==GR&&t!==zR&&t!==KR)&&t!==aC&&!(e===lh&&!i)||JR(e)&&!uh(e)&&t===aC||e===lh&&i}function sY(t){return du(t)&&t!==sC&&!uh(t)&&t!==G5&&t!==Y5&&t!==lh&&t!==VR&&t!==WR&&t!==GR&&t!==zR&&t!==KR&&t!==aC&&t!==H5&&t!==W5&&t!==j5&&t!==X5&&t!==z5&&t!==K5&&t!==V5&&t!==U5&&t!==B5&&t!==J5&&t!==Q5}function aY(t){return!uh(t)&&t!==lh}function pu(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function XR(t){var e=/^\n* /;return e.test(t)}var ZR=1,lC=2,eO=3,tO=4,hc=5;function cY(t,e,r,n,i,o,s,a){var c,l=0,u=null,f=!1,d=!1,p=n!==-1,h=-1,m=sY(pu(t,0))&&aY(pu(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=pu(t,c),!du(l))return hc;m=m&&QR(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=pu(t,c),l===uu)f=!0,p&&(d=d||c-h-1>n&&t[h+1]!==" ",h=c);else if(!du(l))return hc;m=m&&QR(l,u,a),u=l}d=d||p&&c-h-1>n&&t[h+1]!==" "}return!f&&!d?m&&!s&&!i(t)?ZR:o===fu?hc:lC:r>9&&XR(t)?hc:s?o===fu?hc:lC:d?tO:eO}function lY(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===fu?'""':"''";if(!t.noCompatMode&&(Z5.indexOf(e)!==-1||eY.test(e)))return t.quotingType===fu?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(l){return oY(t,l)}switch(cY(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,i)){case ZR:return e;case lC:return"'"+e.replace(/'/g,"''")+"'";case eO:return"|"+rO(e,t.indent)+nO(YR(e,o));case tO:return">"+rO(e,t.indent)+nO(YR(uY(e,s),o));case hc:return'"'+fY(e)+'"';default:throw new br("impossible error: invalid scalar style")}}()}function rO(t,e){var r=XR(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function nO(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function uY(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,r.lastIndex=l,iO(t.slice(0,l),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+iO(c,e),i=o}return n}function iO(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(o=s>i?s:a,c+=`
`+t.slice(i,o),i=o+1),s=a;return c+=`
`,t.length-i>e&&s>i?c+=t.slice(i,s)+`
`+t.slice(s+1):c+=t.slice(i),c.slice(1)}function fY(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=pu(t,i),n=or[r],!n&&du(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||rY(r);return e}function dY(t,e,r){var n="",i=t.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],t.replacer&&(a=t.replacer.call(r,String(o),a)),(Di(t,e,a,!1,!1)||typeof a=="undefined"&&Di(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function oO(t,e,r,n){var i="",o=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(Di(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&Di(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=cC(t,e)),t.dump&&uu===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function pY(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,a,c,l,u;for(s=0,a=o.length;s<a;s+=1)u="",n!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=o[s],l=r[c],t.replacer&&(l=t.replacer.call(r,c,l)),!!Di(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!Di(t,e,l,!1,!1)&&(u+=t.dump,n+=u));t.tag=i,t.dump="{"+n+"}"}function hY(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),a,c,l,u,f,d;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new br("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)d="",(!n||i!=="")&&(d+=cC(t,e)),l=s[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),!!Di(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&uu===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,f&&(d+=cC(t,e)),!!Di(t,e+1,u,!0,f)&&(t.dump&&uu===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,i+=d));t.tag=o,t.dump=i||"{}"}function sO(t,e,r){var n,i,o,s,a,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,BR.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(HR.call(a.represent,c))n=a.represent[c](e,c);else throw new br("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function Di(t,e,r,n,i,o,s){t.tag=null,t.dump=r,sO(t,r,!1)||sO(t,r,!0);var a=BR.call(t.dump),c=n,l;n&&(n=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,d;if(u&&(f=t.duplicates.indexOf(r),d=f!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(i=!1),d&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&d&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(hY(t,e,t.dump,i),d&&(t.dump="&ref_"+f+t.dump)):(pY(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?oO(t,e-1,t.dump,i):oO(t,e,t.dump,i),d&&(t.dump="&ref_"+f+t.dump)):(dY(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&lY(t,t.dump,e,o,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new br("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function mY(t,e){var r=[],n=[],i,o;for(uC(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function uC(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)uC(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)uC(t[n[i]],e,r)}function gY(t,e){e=e||{};var r=new iY(e);r.noRefs||mY(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Di(r,0,n,!0,!0)?r.dump+`
`:""}var vY=gY,yY={dump:vY};function fC(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var _r=UR.load,Fge=UR.loadAll,Mge=yY.dump;var qge=fC("safeLoad","load"),$ge=fC("safeLoadAll","loadAll"),jge=fC("safeDump","dump");var hh=K(require("path"));var hC=K(require("path")),uO=K(require("os"));var aO=K(require("crypto"));var cO=K(require("util"));var An={async readDocument(t){switch(t.scheme){case"file":try{return(await Le(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=Vt(r,e);await _a(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},fh=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case fh.scheme:try{return(await this.fileHost.readFile(Oe(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case fh.scheme:let i=Vt(n,r);await this.fileHost.writeFile(Oe(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},qt=fh;qt.scheme="vscode-fileHost";var Hs=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case Hs.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case Hs.scheme:try{if(!Hs.nonce){let s=await(0,cO.promisify)(aO.randomBytes)(20);Hs.nonce=s.toString("hex")}let i=Vt(n,r),o=`EOF-${Hs.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${e.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Bs=Hs;Bs.scheme="vscode-remote";var lO=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function Nt(t,e){let r={file:An,[qt.scheme]:new qt(t)};return e&&(r[Bs.scheme]=new Bs(e)),new lO(r)}var dC=new Map;async function pC(t,e){let r=t.toString(),n=dC.get(r);if(n||dC.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();dC.delete(r)}}var _o;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(_o||(_o={}));function Oe(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===qt.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function mc(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function mC(t,e){return Ee.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:qt.scheme})}async function dh(t,e){let r=mc(t.path,e);for(let n of r)if(await t.isFile(n))return Ee.file(n).with({scheme:qt.scheme})}async function ph(t){let e=mc(hC,t);for(let r of e)if(await pt(r))return r}var Ri=`{${uO.EOL}}`;async function on(t,e,r,n){e.scheme==="file"&&await Or(hC.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function Vs(t){let e=hC.posix.dirname(t.path);return t.with({path:e})}function So(t,e,r){return Oi(t,e.configFilePath,r)}function Oi(t,e,r){let n=Vs(e);return e.with({path:hh.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==Bs.scheme?(hh.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function lt(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function gc(t){return t&&(lt(t)||"image"in t||"dockerComposeFile"in t)}function Kt(t,e){return So(t,e,wY(e))}function wY(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function sr(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(i=>Oe(So(t,e,i),t.platform))}else if(typeof e.dockerComposeFile=="string")return[Oe(So(t,e,e.dockerComposeFile),t.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(n,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&o.push(s),o}return[]}function CY(){return{contentHashes:{}}}async function dO(t,e,r){let n=t.configurationTracking,i=n.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),c=(await gC(t,e,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(p=>u.delete(p));let f=new Set(s);l.forEach(p=>f.delete(p));let d=[];for(let p of s)p in c&&c[p]!==o[p]&&d.push(p);if(u.size||f.size||d.length){let p=await gC(t,e,r);(async()=>{await n.containerOutdated([...u,...f,...d].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await pO(t,e,r)}async function mh(t,e,r){let n="Updating configuration state",i=t.common.output.start(n);await pO(t,e,r),t.common.output.stop(n,i)}async function pO(t,e,r){let n=await gC(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function gC(t,e,r){let n=CY();gh(n,hu.posix.basename(r.configFilePath.path),JSON.stringify(se(W({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let i=Vs(r.configFilePath).path;if(lt(r)){let o=Kt(t.common.cliHost,r),s=await e.readDocument(o);s!==void 0&&gh(n,hu.posix.relative(i,o.path),s)}if("dockerComposeFile"in r){let o=await sr(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(o.map(async a=>{let c=Ee.file(a).with({scheme:qt.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&gh(n,hu.posix.relative(i,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=_r(l),f=u&&u.services,d=f&&f[r.service],p=d&&d.build,h=p&&(typeof p=="string"?p:p.context);if(h){let m=Oi(t.common.cliHost,c,h),g=hO(m,p.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&gh(n,hu.posix.relative(i,g.path),v)}if(d&&(d.image||d.build))break}}}return n}function gh(t,e,r){let n=fO.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var un=K(require("path")),G1=K(require("crypto"));var qi=K(require("path"));var UC=K(require("path"));var CO=K(require("net")),bC=K(require("path"));var vC=K(require("path")),yC=K(require("http")),mO=K(require("os")),gO=K(require("crypto"));async function vO(t,e){let r=await wC(t),n=new yO(r,e);return n.listen(),n}var yO=class{constructor(e,r){this.ipcHandlePath=e;this.server=yC.createServer((n,i)=>{Promise.resolve(r(n,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function wO(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function bY(t){return new Promise((e,r)=>{gO.randomBytes(t,(n,i)=>{n?r(n):e(i)})})}async function wC(t){let r=(await bY(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?vC.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):vC.join(mO.tmpdir(),`${n}.sock`)}var CC=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function Zn(t,e){let r=await wC("ssh-askpass");return await new Promise((n,i)=>{CO.createServer(o=>{o.setEncoding("utf8");let s="";o.on("data",async a=>{if(s+=a,s.endsWith(`
`))try{let c=await e(JSON.parse(s));o.write(c,l=>{l&&console.error(l)}),o.end()}catch(c){console.error(c)}}),o.on("error",a=>console.error(a))}).on("error",o=>{i(o)}).listen(r,()=>{n()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:bC.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:bC.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var EY=0;function Tn(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++EY)}:{}}async function $t(t,e){return(await xo(t,[e]))[0]}async function xo(t,e){let r=await yh(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:l,HostPort:u}=c;n.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return r}async function Po(t,e){return(await yh(t,"image",[e]))[0]}async function vh(t,e){return(await yh(t,"volume",[e]))[0]}async function mu(t,e){return yh(t,"volume",e)}async function yh(t,e,r){if(!r.length)return[];let n=yu(t),i=await Se(se(W({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function Ni(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await $e(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function ko(t,e=[]){let r=[];for(let i of e)r.push("--filter",`label=${i}`);return(await $e(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function EC(t){return(await $e(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function bO(t){return(await $e(t,"volume","prune","-f")).stdout.toString()}async function EO(t,e,r){let n=[];for(let i of r)n.push("--label",i);await $e(t,"volume","create",...n,e)}async function gu(t,e){let{exec:r,cmd:n,args:i,env:o,output:s}=yu(t),a=[];for(let d in e)for(let p of e[d])a.push("--filter",`${d}=${p}`);let c=await SC(t)?"json":"{{json .}}",l=(i||[]).concat(["events","--format",c,...a]),u=await r({cmd:n,args:l,env:o,output:s}),f=[];return u.stderr.on("data",d=>f.push(d)),u.exit.then(({code:d,signal:p})=>{f.length&&s.write(Re(Buffer.concat(f).toString())),(d||p&&p!=="SIGKILL")&&s.write(Re(`Docker events terminated (code: ${d}, signal: ${p}).`))},d=>{s.write(Re(d&&(d.stack||d.message)))}),u}async function $e(t,...e){let r=yu(t);return Se(se(W({},r),{args:(r.args||[]).concat(e)}))}async function _C(t){var e;try{let{stdout:r}=await $e(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function SC(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await $e(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function jr(t,...e){let r=ei(t);return Ii(se(W({},r),{args:(r.args||[]).concat(e)}))}async function Ws(t,...e){let r=yu(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Se(se(W({},r),{args:(r.args||[]).concat(e)}))}async function wh(t,...e){let r=ei(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Ii(se(W({},r),{args:(r.args||[]).concat(e)}))}function Io(t,e,r){return async function(n){let{exec:i,cmd:o,args:s,env:a}=yu(t),{argsPrefix:c,args:l}=SO(e,r,n,!1);return i({cmd:o,args:(s||[]).concat(l),env:a,output:_O(n.output,o,c)})}}async function vu(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:c,env:l}=ei(t),{argsPrefix:u,args:f}=SO(e,r,o,!0);return s({cmd:a,args:(c||[]).concat(f),env:l,output:_O(o.output,a,u)})}}function _O(t,e,r){return _Y(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function _Y(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return ht(se(W({},t),{get dimensions(){return t.dimensions},event:o=>t.event("text"in o?se(W({},o),{text:o.text.replace(n,r)}):o)}))}function SO(t,e,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(u=>c.push("-e",`${u}=${i[u]}`)),o&&c.push("-w",o),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function yu(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:W(W({},t.dockerEnv),Tn(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:W(W({},t.env),Tn(t.env)),output:t.output}:se(W({},t),{env:W(W({},t.env),Tn(t.env))})}function ei(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:W(W({},t.dockerEnv),Tn(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:W(W({},t.env),Tn(t.env)),output:t.output}:se(W({},t),{env:W(W({},t.env),Tn(t.env))})}function Ch(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var I1=K(require("path")),jC=K(require("string_decoder")),A1=K(Ga());var Cc=K(require("path")),C1=K(v1()),b1=K(require("url")),E1=K(Ga());var y1=K(Ja()),w1=K(require("url"));function MC(t,e){return new Promise((r,n)=>{let i=new w1.URL(t.url),o={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},s=y1.https.request(o,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,ae.Error);else{a.on("error",n);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>r(Buffer.concat(c)))}});s.on("error",n),t.data&&s.write(t.data),s.end()})}var Du="devcontainer-features.tgz";function Js(t){return t?{allFeatures:t.featureSets.map(r=>r.features).flat()}:void 0}function Rn(t){let e=typeof t=="string"?Cc.join(t,"dist"):t.distFolder;return Cc.join(e,"node_modules","vscode-dev-containers","container-features")}function bc(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache";case"direct-tarball":return Buffer.from(t.tarballUri).toString("base64");case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}`;case"file-path":return Buffer.from(t.filePath).toString("base64")}}function _1(){return`
ARG BASE_IMAGE=mcr.microsoft.com/vscode/devcontainers/base:buster
FROM $BASE_IMAGE

USER root

COPY . /tmp/build-features/

#{featureLayer}

#{containerEnv}

ARG IMAGE_USER=root
USER $IMAGE_USER
`}async function S1(t){let e="";return(t.featureSets||[]).map(n=>bc(n.sourceInformation)).forEach(n=>{e+=`RUN cd /tmp/build-features/${n} \\
&& chmod +x ./install.sh \\
&& ./install.sh

`}),e}function Nh(t,e){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!t.includes("/"))return e.write(`[${t}] - No slash, must be locally cached feature.`,ae.Trace),{id:t,sourceInformation:{type:"local-cache"}};if(t.startsWith("http://")||t.startsWith("https://")){e.write(`[${t}] - Direct URI`,ae.Trace),t=t.replace(/\/+$/,"");let u=t.lastIndexOf("#"),f=t.substring(u+1);if(f===""||!r.test(f)){e.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Provided: ${f}.`,ae.Error);return}let d=new b1.URL(t.substring(0,u)).toString();return e.write(`[${t}] - uri: ${d} , id: ${f}`,ae.Trace),{id:f,sourceInformation:{type:"direct-tarball",tarballUri:d}}}if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return;let n="latest",i=t.split("@");if(i.length>2){e.write("Parse error. Use the '@' symbol only to designate a version tag.",ae.Error);return}i.length===2&&(e.write(`[${t}] has version ${i[1]}`,ae.Trace),n=i[1]);let s=i[0].split("/");if(s.length!==3||s.some(u=>u==="")||!r.test(s[2])){e.write("Invalid parse for GitHub/registry feature identifier. Follow format: '<publisher>/<feature-set>/<feature>'",ae.Error);return}let a=s[0],c=s[1],l=s[2];return n==="latest"?{id:l,sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${a}/${c}/releases/latest`,unauthenticatedUri:`https://github.com/${a}/${c}/releases/latest/download/${Du}`,owner:a,repo:c,isLatest:!0}}:{id:l,sourceInformation:{type:"github-repo",apiUri:`https://api.github.com/repos/${a}/${c}/releases/tags/${n}`,unauthenticatedUri:`https://github.com/${a}/${c}/releases/download/${n}/${Du}`,owner:a,repo:c,tag:n,isLatest:!1}}}var Lh=async(t,e)=>{try{await G_(t,!1,!0)}catch(r){e.write(`Didn't remove temporary tarball from disk with caught exception: ${r==null?void 0:r.Message} `,ae.Trace)}};function AJ(t,e,r){let n={"user-agent":"devcontainer"},i=o=>{let s=o.tarballUri;return s.startsWith("https://github.com")||s.startsWith("https://api.github.com")};if(t.type==="github-repo"||t.type==="direct-tarball"&&i(t)){let o=e.GITHUB_TOKEN;o?(r.write(`Using GITHUB_TOKEN ending in ${o.substring(o.length-5)}`),n.Authorization=`Bearer ${o}`):r.write("No GITHUB_TOKEN found in env. Request will be sent unauthenticated.")}return n}async function TJ(t,e,r){let{output:n,env:i}=t,{dstFolder:o}=e,s=[],a=r.features;if(!a||!Object.keys(a).length||!o)return;let c=Cc.join(o,Du);n.write("Preparing to parse declared features and fetch remote features.");for await(let l of Object.keys(a)){let u=Nh(l,n);if(u===void 0){n.write(`Failed to parse key: ${l}`,ae.Error);continue}let f=u.id,d=u.sourceInformation,p=d.type;if(p==="local-cache"){n.write("Detected local feature set. Continuing...");continue}let h=bc(u.sourceInformation),m=Cc.join(o,h);if(s.some(w=>w===h)){n.write(`Already pulled remote resource for '${h}'. No need to re-fetch.`);continue}if(n.write(`Fetching: featureSet = ${h}, feature = ${f}, Type = ${p}`),p==="file-path"){n.write("Local file-path to features on disk is unimplemented. Continuing...");continue}else{let w,b=AJ(d,i,n);if(p==="github-repo")n.write("Determining tarball URI for provided github repo.",ae.Trace),b.Authorization&&b.Authorization!==""?(n.write("Authenticated. Fetching from GH API.",ae.Trace),w=await DJ(d,b,n),b.Accept="Accept: application/octet-stream"):(n.write("Not authenticated. Fetching from unauthenticated uri",ae.Trace),w=d.unauthenticatedUri);else if(p==="direct-tarball")w=d.tarballUri;else{n.write(`Unhandled source type: ${p}`,ae.Error);continue}if(w!==void 0&&w!==""){let C={type:"GET",url:w,headers:b};n.write(`Fetching tarball at ${C.url}`),n.write(`Headers: ${JSON.stringify(C)}`,ae.Trace);let S=await MC(C,n);if(!S||S.length===0){n.write("Did not receive a response from tarball download URI",ae.Error),await Lh(c,n);continue}let _=(P,I)=>!(P.startsWith("./.")||P===`./${Du}`||P==="./.");n.write("Preparing to unarchive received tgz.",ae.Trace),await Or(m),await _a(c,S),await E1.x({file:c,cwd:m,filter:_})}else{n.write("Could not fetch features from constructed tarball URL",ae.Error),await Lh(c,n);continue}}n.write("Attempting to load devcontainer-features.json",ae.Trace);let v=await Ru(m,n);if(!v||!v.features||v.features.length===0){n.write("Unable to parse received devcontainer-features.json.",ae.Error),await Lh(c,n);continue}n.write(`Done loading FeatureSet ${h} into from disk into memory`,ae.Trace),v.sourceInformation&&(v=se(W({},v),{sourceInformation:W(W({},v.sourceInformation),d)})),n.write("Merged sourceInfomation",ae.Trace),e.featureSets.push(v),s.push(h),await Lh(c,n),n.write(`Succeeded in fetching feature set ${h}`,ae.Trace)}return e}async function DJ(t,e,r){let n={type:"GET",url:t.apiUri,headers:e},i=JSON.parse((await MC(n,r)).toString());if(i){let o=i.assets.find(s=>s.name===Du);if(o&&o.url)return r.write(`Found url to fetch release artifact ${o.name}. Asset of size ${o.size} has been downloaded ${o.download_count} times and was last updated at ${o.updated_at}`),o.url;r.write("Unable to fetch release artifact URI from GitHub API",ae.Error);return}}async function Ru(t,e){let r=await Le(Cc.join(t,"devcontainer-features.json"));if(r.length===0){e.write("Parsed featureSet is empty.",ae.Error);return}let n=Xe(r.toString());if(!(n==null?void 0:n.features)||n.features.length===0){e.write("Parsed featureSet contains no features.",ae.Error);return}return e.write(`Loaded devcontainer-features.json declares ${n.features.length} features and ${n.sourceInformation?"contains":"does not contain"} explicit source info.`,ae.Trace),n}async function Qs(t,e,r,n,i){var l;let{output:o}=t,s=r.features;if(!s||!Object.keys(s).length)return;let a={featureSets:[],dstFolder:e},c=await Ru(i(t.extensionPath),o);if(!c){o.write("Failed to load locally cached features",ae.Error);return}if(c=se(W({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=(l=await TJ(t,a,r))!=null?l:a,a=await Fh(t,r,a,n),!a.featureSets.every(u=>u.features.every(f=>f.value===!1)))return a}var qC=(t,e)=>`${t}-${bc(e)}`;async function Fh(t,e,r,n){var f;let{output:i}=t,o=await n(),s=o["com.visualstudio.code.devcontainers.id"],a=o.version,c=e.features||{},l={};for(let d of Object.keys(c)){let{id:p,sourceInformation:h}=(f=Nh(d,i))!=null?f:{};if(p&&h){let m=qC(p,h);l[m]=c[d]}else{i.write(`Failed to read user declared feature ${d}. Skipping.`,ae.Error);continue}}let u={};for(let d of r.featureSets)for(let p of d.features){RJ(p);let h=qC(p.id,d.sourceInformation);s&&(p.exclude||[]).some(m=>x1(m,s,a))?p.included=!1:"include"in p?p.included=!!s&&(p.include||[]).some(m=>x1(m,s,a)):p.included=!0,u[h]=u[h]||p.included,p.value=l[h]||!1}t.output.write(`Feature configuration:
`+JSON.stringify(se(W({},r),{imageDetails:void 0}),void 0,"  "),ae.Trace);for(let d of r.featureSets)d.features=d.features.filter(p=>{let h=qC(p.id,d.sourceInformation);return h in u&&p.included===u[h]?(delete u[p.id],!0):!1});return r}function RJ(t){if(t.values){let e=t.options||(t.options={});e.version={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function x1(t,e,r){let n=t.indexOf("@"),[i,o]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!o||!r||C1.satisfies(r,o))}function ti(t){var e;return((e=t.options)==null?void 0:e.version)?"version":void 0}function Xs(t){var r,n;let e=ti(t);if(!e)return!!t.value;if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function P1(t){if(typeof t.value=="object")return W(W({},$C(t)),t.value);let e=ti(t);return e?se(W({},$C(t)),{[e]:t.value}):$C(t)}function $C(t){let e=t.options||{};return Object.keys(e).reduce((r,n)=>("default"in e[n]&&(r[n]=e[n].default),r),{})}function k1(t){var r;let e=ti(t);return e?t.options&&((r=t.options[e])==null?void 0:r.default):!0}async function Ou(t,e,r,n,i,o){let s,a=()=>s||(s=T1(t,r,n)),c=await Qs(t.common,await Zs(t.common),e,async()=>(await a()).Config.Labels||{},Rn),l=Js(c),u=await NJ(t,c,r,a);return{updatedImageName:await LJ(t,e,u,a,i,o),collapsedFeaturesConfig:l,imageDetails:a}}function OJ(t){let e="";for(let r of t.featureSets)e+=r.features.filter(n=>(St||n.included)&&n.value).reduce((n,i)=>n.concat(Object.keys(i.containerEnv||{}).map(o=>`ENV ${o}=${i.containerEnv[o]}`)),[]).join(`
`);return e}async function NJ(t,e,r,n){let{common:i}=t,{cliHost:o,output:s}=i;if(!e)return r;let{dstFolder:a}=e;if(!a||a==="")return s.write("dstFolder is undefined or empty in addContainerFeatures",ae.Error),r;let c=bc({type:"local-cache"}),l=(await n()).Config.User||"root",u=Nu(i),f=`${r.startsWith(u)?r:u}-features`,d=Rn(i.extensionPath);s.write(`local container features stored at: ${d}`),await o.mkdirp(`${a}/${c}`);let p=A1.c({cwd:d,filter:S=>S!=="./Dockerfile"&&S!=="./devcontainer-features.json"},["."]),h=new Promise((S,_)=>{p.on("error",_),p.on("finish",S)}),m=await o.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:`${a}/${c}`,output:s}),g=new jC.StringDecoder;m.stdout.on("data",S=>{s.write(g.write(S))});let v=new jC.StringDecoder;m.stderr.on("data",S=>{s.write(Re(v.write(S)))}),p.pipe(m.stdin);let w=_1();w=w.replace("#{featureLayer}",await S1(e)),w=w.replace("#{containerEnv}",OJ(e)),await o.writeFile(o.path.join(a,"Dockerfile"),Buffer.from(w)),await Promise.all([...e.featureSets].map(async S=>{let _=[].concat(...S.features.filter(P=>(St||P.included)&&P.value).map(P=>{let I=P1(P),A=P.id.replace(/[/-]/g,"_").toUpperCase(),R=[];return I&&(R.push(...Object.keys(I).map(F=>`_BUILD_ARG_${A}_${F.toUpperCase()}="${I[F]}"`)),R.push(`_BUILD_ARG_${A}=true`)),P.buildArg&&R.push(`${P.buildArg}=${Xs(P)}`),R})).join(`
`);await o.writeFile(o.path.join(a,bc(S.sourceInformation),"devcontainer-features.env"),Buffer.from(_))})),await m.exit,await h;let b=["build","-t",f,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`IMAGE_USER=${l}`,a],C=se(W({},ei(t)),{output:ht(s,ae.Info)});return await jr(C,...b),f}async function LJ(t,e,r,n,i,o){let{common:s}=t,{cliHost:a}=s;if(s.cliMode||!(typeof e.updateRemoteUserUID=="boolean"?e.updateRemoteUserUID:o)||!(a.platform==="linux"||t.updateRemoteUserUIDOnMacOS&&a.platform==="darwin"))return r;let c=(await n()).Config.User||"root",l=e.remoteUser||i||c;if(l==="root"||/^\d+$/.test(l))return r;let u=Nu(s),f=`${r.startsWith(u)?r:u}-uid`,d="updateUID.Dockerfile",p=I1.join(s.extensionPath,"scripts",d),h=s.package.version,m=a.path.join(await a.tmpdir(),"vsch",`${d}-${h}`),g=`${m}-${Date.now()}`;await a.mkdirp(a.path.dirname(g)),await a.writeFile(g,await Le(p)),await a.rename(g,m);let v=["build","-f",m,"-t",f,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${l}`,"--build-arg",`NEW_UID=${await a.getuid()}`,"--build-arg",`NEW_GID=${await a.getgid()}`,"--build-arg",`IMAGE_USER=${c}`,a.path.dirname(m)];return await jr(t,...v),f}var Mh="com.docker.compose.project",BC="com.docker.compose.service";async function D1(t,e,r,n){let{common:i,dockerCLI:o,dockerComposeCLI:s}=t,{cliHost:a,env:c,output:l}=i;return O1(t,{cliHost:a,dockerCLI:o,dockerComposeCLI:s,env:c,output:l},e,r,n,HC(r),!0)}async function R1(t,{repositoryPath:e,folder:r},n,i,o,s){let{labels:a}=Ec(n,e,r,i),c=Ue(UC.posix,r?n.workspaceFolder(r):n.fullRepositoryName),l=`services:
  '${s.service}':
    labels:
${a.map(m=>`      - ${m}`).join(`
`)}
    volumes:
      - ${i}:${UC.posix.dirname(c.rootFolderPath)}

volumes:
  ${i}:
    external: true
`,u=await jh(t,o,c.rootFolderPath),f=W({},u.env),{HOME:d,USERPROFILE:p}=t.common.env;d!==void 0&&(f.HOME=d),p!==void 0&&(f.USERPROFILE=p);let h=zC(n,i,r);return O1(t,se(W({},u),{env:f}),c,s,t.common.cliHost.cwd,c.rootFolderPath,!1,l,o,h,!0)}async function O1(t,e,r,n,i,o,s,a,c,l,u){let{common:f}=t,{cliHost:d}=e,p,h;try{let m=await sr(d,n,d.env,d.cwd),g=d.path.join(d.cwd,".env"),v=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await d.isFile(g)?g:void 0,w="/tmp/docker-compose.repositoryContainer.yml";if(a){let L=(await d.readFile(m[0])).toString(),q=(/^\s*(version:.*)$/m.exec(L)||[])[1];q&&(a=`${q}

${a}`),await d.writeFile(w,Buffer.from(a)),m.push(w)}let b=await Lu(e,r,m),C=await qh(t,b,n.service);if(t.expectExistingContainer&&!C)throw new ue({description:"The expected container does not exist."});if(p=C?await $t(t,C):void 0,p&&(t.removeOnStartup===!0||t.removeOnStartup===p.Id)){let L="Removing existing container.",q=f.output.start(L);await $e(t,"rm","-f",p.Id),f.output.stop(L,q),p=void 0}let S=!!p,_;if(!p||p.State.Status!=="running"){let L=await MJ(t,e,n,b,m,v,p,s);p=await $t(t,L.containerId),_=L.collapsedFeaturesConfig}else{let L=p.Config.Labels||{},q=await Qs(t.common,await Zs(t.common),n,async()=>L,Rn);_=Js(q)}h=await ni(t,p.Id,o,n.remoteUser),u&&!S&&h.user!=="root"&&(h.launchRootShellServer?await ou(h,h.launchRootShellServer,o,n.configFilePath.path):f.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let P=Nt(d,h.shellServer);S||await mh(t,P,n);let I={cwd:i,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:f.env,containerId:p.Id,user:h.user,sessionId:f.sessionId,shutdownAction:n.shutdownAction,projectName:b,composeFiles:m,envFile:v,composeOverrideFile:a&&w,composeOverrideContent:a,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:f.getLogLevel(),delay:1e4},{shutdownArgs:A,doneWithDocuments:R}=await Bh(t,P,"dockerCompose",I,S?n:void 0);c&&R.then(()=>{$e(t,"rm","-f",c)});let F=n.devPort||wo,{hostOrContainerPort:H,hostPortServer:X,connectionToken:J,webConnectionToken:Y,remoteEnv:te,serverDownloaded:M}=await Co(f,h,n,_,void 0,F);return A.hostPortServer=X,_c(f,h,H,J,Y,p,r),{params:f,properties:h,config:n,resolvedAuthority:{host:To,port:H,connectionToken:J,extensionHostEnv:te},webConnectionToken:Y,tunnelInformation:f.isLocalContainer?Sc(p):{},dockerParams:t,dockerContainerId:p.Id,serverDownloaded:M}}catch(m){let g=m instanceof ue?m:new ue({description:"An error occurred setting up the container.",originalError:m});throw p&&(g.manageContainer=!0,g.params=t.common,g.containerId=p.Id,g.dockerParams=t),h&&(g.containerProperties=h),g.config=n,g}}function HC(t){return t.workspaceFolder||"/"}async function FJ(t,e,r,n,i,o,s,a){let{cliHost:c}=r,l=["--project-name",e,...i];if(a){let u=c.path.join(await c.tmpdir(),`docker-compose.devcontainer.build-${Date.now()}.yml`),f=`services:
  ${t.service}:
    image: ${a}
`;await c.writeFile(u,Buffer.from(f)),l.push("-f",u)}l.push("build"),s&&l.push("--no-cache","--pull"),o.length&&(l.push(...o),o.indexOf(t.service)===-1&&l.push(t.service));try{await wh(r,...l)}catch(u){throw u instanceof ue?u:new ue({description:"An error occurred building the Docker Compose images.",originalError:u,data:{fileWithError:n[0]}})}}async function MJ(t,e,r,n,i,o,s,a){var H,X,J,Y;let{common:c}=t,{persistedFolder:l,output:u}=c,{cliHost:f}=e,d="docker-compose.devcontainer.containerFeatures",p=!s;c.progress(wt.StartingContainer);let h=await VC(f.cwd,i,c.output),m=[].concat(...h.map(te=>["-f",te]));o&&m.push("--env-file",o);let g=ht(e.output,ae.Info),v=await WC(se(W({},e),{output:g}),h,o);if(Object.keys(v.services||{}).indexOf(r.service)===-1)throw new ue({description:`Service '${r.service}' configured in devcontainer.json not found in Docker Compose configuration.`,data:{fileWithError:i[0]}});let b,C=new Promise((te,M)=>b=M),{started:S}=await Uh(t,{[Mh]:n,[BC]:r.service},C,c.output,c.getLogLevel()===ae.Trace);p&&await FJ(r,n,se(W({},e),{output:g}),h,m,(H=r.runServices)!=null?H:[],(X=t.buildNoCache)!=null?X:!1,void 0);let _=v.services[r.service],P=_.image||`${n}_${r.service}`,I=!1,A,R=(J=s==null?void 0:s.Config)==null?void 0:J.Labels;if(u.write(`PersistedPath=${l}, ContainerHasLabels=${!!R}`),l&&R){let te=R["com.docker.compose.project.config_files"];u.write(`Container was created with these config files: ${te}`);let L=((Y=te==null?void 0:te.split(","))!=null?Y:[]).find(q=>q.indexOf(d)>-1);L?await f.isFile(L)?(u.write(`Restoring ${L} from persisted storage`),I=!0,m.push("-f",L)):u.write(`Expected ${L} to exist, but it did not`,ae.Error):u.write(`Expected to find a docker-compose file prefixed with ${d}, but did not.`,ae.Error)}if(!I){u.write("Generating composeOverrideFile...");let{updatedImageName:te,collapsedFeaturesConfig:M,imageDetails:L}=await Ou(t,r,P,!_.build,_.user,a),q=await qJ(te,P,M,r,e,i,L,_);if(!!q&&q.length>0&&q.trim()!==""){let z=`${d}-${Date.now()}.yml`,oe=f.path.join(l,"docker-compose"),re=f.path.join(oe,z);u.write(`Writing ${z} to ${oe}`),await f.mkdirp(oe),await f.writeFile(re,Buffer.from(q)),m.push("-f",re)}else u.write("Override file was generated, but was empty and thus not persisted or included in the docker-compose arguments.")}let F=["--project-name",n,...m];F.push("up","-d"),t.expectExistingContainer&&F.push("--no-recreate"),r.runServices&&r.runServices.length&&(F.push(...r.runServices),r.runServices.indexOf(r.service)===-1&&F.push(r.service));try{await wh(se(W({},e),{output:g}),...F)}catch(te){throw b(),new ue({description:"An error occurred starting Docker Compose up.",originalError:te,data:{fileWithError:h[0]}})}return await S,{containerId:await qh(t,n,r.service),collapsedFeaturesConfig:A}}async function qJ(t,e,r,n,i,o,s,a){let{cliHost:c}=i,l="",u=t!==e,f=[...new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(_=>(St||_.included)&&_.value).map(_=>_.capAdd||[])))],d=[...new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(_=>(St||_.included)&&_.value).map(_=>_.securityOpt||[])))],p=[].concat(...((r==null?void 0:r.allFeatures)||[]).map(_=>(St||_.included)&&_.value&&_.mounts).filter(Boolean)),h=p.filter(_=>_.type==="volume"),m=((r==null?void 0:r.allFeatures)||[]).map(_=>(St||_.included)&&_.value&&_.entrypoint).filter(Boolean),g=typeof a.entrypoint=="string"?a.entrypoint.split(/ +/):a.entrypoint,v=typeof a.command=="string"?a.command.split(/ +/):a.command,w=n.overrideCommand?[]:g||((await s()).Config.Entrypoint||[]).map(_=>_.replace(/\$/g,"$$$$")),b=n.overrideCommand?[]:v||(g?[]:((await s()).Config.Cmd||[]).map(_=>_.replace(/\$/g,"$$$$")));l=`services:
  '${n.service}':${u?`
    image: ${t}`:""}
    entrypoint: ["/bin/sh", "-c", "echo Container started\\n
trap \\"exit 0\\" 15\\n
${m.join(`\\n
`)}\\n
exec \\"$$@\\"\\n
while sleep 1 & wait $$!; do :; done", "-"${w.map(_=>`, ${JSON.stringify(_)}`).join("")}]${b!==v?`
    command: ${JSON.stringify(b)}`:""}${((r==null?void 0:r.allFeatures)||[]).some(_=>(St||_.included)&&_.value&&_.init)?`
    init: true`:""}${((r==null?void 0:r.allFeatures)||[]).some(_=>(St||_.included)&&_.value&&_.privileged)?`
    privileged: true`:""}${f.length?`
    cap_add:${f.map(_=>`
      - ${_}`).join("")}`:""}${d.length?`
    security_opt:${d.map(_=>`
      - ${_}`).join("")}`:""}${p.length?`
    volumes:${p.map(_=>`
      - type: ${_.type}
        source: ${_.source}
        target: ${_.target}`).join("")}`:""}${h.length?`
volumes:${h.map(_=>`
  ${_.source}:`).join("")}`:""}
`;let C=(await c.readFile(o[0])).toString(),S=(/^\s*(version:.*)$/m.exec(C)||[])[1];return S&&(l=`${S}

${l}`),l}async function VC(t,e,r){if(Gt(t)){let n=mo(t),i=[];for(let o=0;o<e.length;o++){let s=await Pi(n,e[o],r);i.push(s)}return i}return e}async function WC(t,e,r){try{let n=[].concat(...e.map(o=>["-f",o]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();(qs(i.version)||[])[0]>=2&&n.push("--profile","*");try{let{stdout:o}=await Ws(t,...n,"config"),s=o.toString();return t.output.write(s),_r(s)||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await wh(se(W({},t),{output:ht({event:t.output.event,dimensions:{columns:999999,rows:1}},ae.Info)}),...n,"config");return _r(c.replace(Qi,""))||{}}let{stdout:s}=await Ws(se(W({},t),{env:se(W({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=s.toString();return t.output.write(a),_r(a)||{}}}catch(n){throw n instanceof ue?n:new ue({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function qh(t,e,r){let n=await Ni(t,!0,[`${Mh}=${e}`,`${BC}=${r}`]);return n&&n[0]}async function N1(t,e,r){var n;return(n=t.find(i=>{let o=i.Config.Labels||{};return o[Mh]===e&&o[BC]===r}))==null?void 0:n.Id}async function Lu(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await $J(t),o=$h(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),l=await n.readFile(c),u=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(l.toString()),f=u&&u[1].trim(),d=$h(f||"",i);if(d)return d}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return yA(n.platform,a,n.path.join(s,".devcontainer"))?$h(`${n.path.basename(s)}_devcontainer`,i):$h(n.path.basename(a),i)}function GC(t){let e=(t.Config.Labels||{})[Mh];return e||void 0}function $h(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function $J(t){try{let e=qs((await t.dockerComposeCLI()).version);return e?!ic(e,[1,21,0]):!0}catch{return!0}}function ri(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,o;try{o=(await Ws(se(W({},t),{cmd:r}),"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await Ws(se(W({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?e:r,args:i?["compose"]:[]}})())}var ii=K(require("url")),L1=K(require("https"));var KC;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(KC||(KC={}));function oi(t){return t.toLowerCase().indexOf("github.com")>=0?VJ(t):t.toLowerCase().indexOf("visualstudio.com")>=0?BJ(t):t.toLowerCase().indexOf("dev.azure.com")>=0?UJ(t):t.toLowerCase().indexOf("gitlab.com")>=0?HJ(t):jJ(t)}function Mi(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function jJ(t){var s;let e="unknown-owner",r,n=t,i;i=(s=ii.parse(t))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?Mi(t):(r=o[o.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function UJ(t){var o,s;let e,r,n=t,i;if(Hh(t)){let a=`http://${t}`;i=(o=ii.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Mi(t);e=c[3],r=c[4]}else{i=(s=ii.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Mi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function BJ(t){var o,s;let e,r,n=t,i;if(Hh(t)){let a=`http://${t}`;i=(o=ii.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Mi(t);e=c[3],r=c[4]}else{i=(s=ii.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Mi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function HJ(t){var o,s;let e,r,n=t,i;if(Hh(t)){let a=`http://${t}`;i=(o=ii.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let c=i==null?void 0:i.split("/");if(!c||c.length<3)return Mi(t);e=c[1],r=c[2]}else{i=(s=ii.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<2)return Mi(t);e=a[1],r=a[2]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function VJ(t){var c,l;let e,r,n=t,i,o,s;if(Hh(t)){let u=`http://${t}`;s=(c=ii.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=ii.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return Mi(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(n=t.substring(0,u.index),i=t.substring(u.index+u[0].length))}if(a[3]==="pull"){o=a[4];let u=t.match(/\/pull\//);u&&u.index&&(n=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:n,ref:i,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:o,fullRepositoryName:`${e}/${r}`}}function Hh(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Vh=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},Wh=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=oi(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,i){}installExtension(){return null}},F1=class extends Wh{constructor(e){super(e)}async parseUrl(e){var o,s,a;let r=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,i)}async getPullRequestInfo(e,r,n,i){var u,f,d,p,h,m,g,v,w,b,C;let o=await this.fetchPullRequestInfo(e,r,n,i),s=(f=(u=o.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(p=(d=o.base)==null?void 0:d.repo)==null?void 0:p.clone_url;if(!a)throw new Vh(2,"Cannot access the head repository of the Pull Request.");let c=(h=o.head)==null?void 0:h.ref,l=((v=(g=(m=o.head)==null?void 0:m.repo)==null?void 0:g.owner)==null?void 0:v.login)===r?null:(C=(b=(w=o.head)==null?void 0:w.repo)==null?void 0:b.owner)==null?void 0:C.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,r,n,i){let o=`/repos/${r}/${n}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=L1.request(a,d=>{if(d.statusCode<200||d.statusCode>=300)return l(new Error(`Status Code: ${d.statusCode}`));d.on("data",p=>{u+=p}),d.on("end",()=>{let p=JSON.parse(u.toString());c(p)})});f.on("error",l),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,i){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await Se({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:n,output:i}),await Se({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:i});try{await Se({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:i})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await Se({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:i})}else await Se({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${o}#${s}#${a}`;await Se({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},M1=class extends Wh{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,i){this.gitUrlInfo.commit&&await Se({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i})}},YC=class extends Wh{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function xc(t,e){if(e)return new YC(t,e);let r=oi(t);if(r.repository==="github"){if(r.pullRequestId)return new F1(t);if(r.ref)return new M1(t)}return new YC(t)}var Gh=qi.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function q1(t,e,r){let n=t.parsedAuthority;if(!n||Jt(n))return WJ(t,n,e,r);if(ln(n))return n.inspectVolume?XC(t,n):GJ(t,n);if(Pc(n))return XC(t,n);throw new Error(`Unexpected authority: ${JSON.stringify(n)}`)}async function WJ(t,e,r,n){let{common:i,userRepositoryConfigurationPaths:o,workspaceMountConsistencyDefault:s}=t,{cliHost:a,output:c}=i,l=a.cwd,u=e&&Ue(a.path,Vl(e.hostPath)?a.path.join(l,qi.basename(e.hostPath)):l),f;u&&(f=await KJ(t,u),f&&i.backgroundTasks.push(f==null?void 0:f.gitUnshallow),f&&!r&&await f.gitClone());let d=u?await si(a,u,o)||(r?mC(a,u.configFolderPath):void 0):r,p=d&&await ea(a,u,d,c,s,t.configUpdater,r,i.cliMode)||void 0;if(!p)throw d||u?new ue({description:`Dev container config (${Oe(d||mC(a,u.configFolderPath),a.platform)}) not found.`}):new ue({description:"No dev container config and no workspace found."});let h=p.config,m=e==null?void 0:e.settings,g=Do(m),v=h.name?`Dev Container: ${h.name}${g}`:`Dev Container${g}`;i.setWorkspaceName(v),f&&"initializeCommand"in h&&await f.gitClone(),await W1(se(W({},t),{common:se(W({},i),{output:i.postCreate.output})}),h.initializeCommand,i.postCreate.onDidInput);let w;if(lt(h)||"image"in h)w=await H1(t,u,h,p.workspaceConfig,t.originalCwd||l,f==null?void 0:f.gitClone,n);else if("dockerComposeFile"in h){if(f&&await f.gitClone(),!u)throw new ue({description:"A Dev Container using Docker Compose requires a workspace folder."});w=await D1(t,u,h,t.originalCwd||l)}else throw new ue({description:`Dev container config (${h.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return f&&await f.gitClone(),w}async function GJ(t,e){let{repositoryPath:r,volumeName:n,folder:i}=e,o=Ur(r);n=await B1(t,o,n);let{labels:s}=Ec(o,r,i,n),a=[...s,`${Fu}=${t.common.product.quality}`],c=await Kh(t,a);if(c)return QC(t,e,o,n,c);let{containerId:l,shellServer:u,config:f}=await o.cloneAndInitializeRepository(t,e,o,n);if(lt(f)||"image"in f)return QC(t,e,o,n,f,l,u);if("dockerComposeFile"in f)return R1(t,e,o,n,l,f);throw new ue({description:`Dev container config (${f.configFilePath}) not valid.`})}async function ea(t,e,r,n,i,o,s,a=!1){let l=await Nt(t).readDocument(s!=null?s:r);if(!l)return;let u=Xe(l),f=u;if(u&&o&&(u.configFilePath=r,f=o(u),delete f.configFilePath),!f||typeof f!="object"||Array.isArray(f))throw new ue({description:`Dev container config (${Oe(r,t.platform)}) must contain a JSON object literal.`});let d=await V1(t,e,f,n,i,a),p=uc({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:d.workspaceFolder,configFile:r,env:t.env},f);return typeof p.workspaceFolder=="string"&&(d.workspaceFolder=p.workspaceFolder),"workspaceMount"in p&&(d.workspaceMount=p.workspaceMount),p.configFilePath=r,{config:p,workspaceConfig:d}}async function si(t,e,r){let n=await JC(t,e,r);return n==null?void 0:n.uri}async function JC(t,e,r){let n=await $1(t,e,r);if(n)return{uri:n,location:"user"};let i=await dh(t,e.configFolderPath);if(i)return{uri:i,location:"workspace"};let o=await $1(t,e,[Gh]);if(o)return{uri:o,location:"builtin"}}async function $1(t,e,r){let n=await PA(t,e,rt);return n&&zh(n,r)}async function zh(t,e){let r=new Set(t.map(zJ).filter(n=>!!n));for(let n of r)for(let i of e){let o=qi.join(i,n),s=await ph(o);if(s)return Ee.file(s)}}function j1(t,e,r){let n=t.path.relative(e.rootFolderPath,Oe(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function U1(t){if(t.scheme!=="file")return;let e=qi.relative(Gh,t.fsPath);if(e&&!e.startsWith("..")&&!qi.isAbsolute(e))return e}function zJ(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}async function KJ(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:i}=r;if(!n)return;let o=Jl(r),s=Jl(r),a=xc(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?i.env[n.tokenEnvVar]:void 0),l=a.cloneOptions(c),u=se(W(W({},n),l),{env:W(W({},n.env),l.env)}),f=await Lp(r,r.cliHost,e.rootFolderPath,u,o.output,s.output),d=(p=f.gitClone)==null?void 0:p.then(()=>a.postClone(c,i,e.rootFolderPath,o.output));return{gitClone:async()=>{o.flush(),await d},gitUnshallow:async()=>{o.flush(),s.flush(),await f.gitUnshallow}}}function Ur(t){return{repositoryPath:t,fullRepositoryName:Yh(t),repositoryName:YJ(t),workspaceFolder:z1,volumeDestination:ZC(),oldVolumeName:JJ(t),alreadyCloned:!1,imageName:QJ(t),uniqueVolumeName:XJ(t),getWorkspaceConfiguration:(e,r)=>ZJ(e,r),getOldWorkspacePath:J1,cloneAndInitializeRepository:eQ,getConfigurationFromImage:Y1,gitUrlHandler:xc(t),gitUrlInfo:oi(t)}}function Yh(t){let e=oi(t);return e==null?void 0:e.fullRepositoryName}function YJ(t){let e=oi(t);return e==null?void 0:e.repositoryName}function ZC(){return"/workspaces"}function JJ(t){let e=Yh(t);return`vsc-${un.posix.basename(e)}-${eb(t)}`}function QJ(t){let e=Yh(t),r=eb(t),n=un.posix.basename(e);return Ch(`vsc-${n}-${r}`)}function XJ(t){let e=oi(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=eb(t);return`${r}-${n}`}function eb(t){return G1.createHash("md5").update(t).digest("hex")}function ZJ(t,e){let r=z1(t),n=`type=volume,src=${e},dst=${ZC()}`;return{workspaceFolder:r,workspaceMount:n}}function z1(t){return un.posix.join(`${ZC()}`,`${t}`)}async function eQ(t,{folder:e,cloneInfo:r},n,i){var u;await nQ(t);let{containerId:o,shellServer:s}=await tQ(t,n,i,e,t.configProvider,r),{config:a,workspaceFolder:c}=await Y1(t,n,e,s),l=(u=n.gitUrlHandler)==null?void 0:u.installExtension();return l&&(a.extensions||(a.extensions=[]),a.extensions.includes(l)||a.extensions.push(l)),await Zh(t,o,"root",c,a.initializeCommand),{repository:n,volumeName:i,containerId:o,shellServer:s,config:a}}async function tQ(t,e,r,n,i,o){let{common:s}=t,{output:a,loadNativeModule:c}=s,l=e.fullRepositoryName,u,f,d,p;t.common.progress(wt.CloningRepository);let h=zC(e,r,n,t.buildContainerRunArgs);n?(a.write(`Cloning Github repository: ${l} into ${e.workspaceFolder(n)}
\r`),u=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,p=e.workspaceFolder(n),d=`Repository '${l}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(a.write(`Cloning Github repository: ${l} into volume ${r}
\r`),u=`fatal: destination path '${l}' already exists`,p=`${l}`,d=`Repository '${l}' was already cloned into volume.`);let m=e.gitUrlHandler;if(!m)throw new ue({description:"Could not analyze the URL."});o?f=m.cloneOptions(o):f={url:e.repositoryPath};let{stdout:g}=await $e(t,...h),v=g.toString().trim(),w=Io(t,v,"root"),b=await Sn(w,a),C,S,_=Promise.resolve(),P;if(!s.cliMode){let F=await zp(s,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:b});C=F.remoteContainersCLI,S=F.remoteEnv,_=F.ready,P=F.mrpcExec}let I=await vu(t,v,"root",c),A=go("container",p,{},await P||w,I,()=>{throw new Error("not implemented")},a);try{s.cliMode||(t.common.isCopyGitConfigEnabled&&(await su(t.common,{homeFolder:"/root",shellServer:b},[".gitconfig"],"git"),await Yw(t.common,{homeFolder:"/root",shellServer:b},{})),await nh({shellServer:b,nodeExecutable:"node"},C,a,"global"),await su(t.common,{homeFolder:"/root",shellServer:b},[".ssh","known_hosts"],"ssh"),await _);let F=Jl(s),H=await Lp(s,A,p,se(W({},f),{env:W(W({},S),f.env)}),a,F.output);if(await H.gitClone,H.gitUnshallow&&H.gitUnshallow.then(F.flush,F.flush),H.gitClone&&o)try{await m.postClone(o,A,p,a)}catch{return tb(t,v,`Failed to checkout the repository ${o.urlToClone}.`)}}catch(F){let H=F&&(F.cmdOutput||F.stack||F.message)||String(F);if(H=H.replace(Qi,""),H.replace(/[\r\n]+/gm,"").includes(u))a.write(d),e.alreadyCloned=!0;else return tb(t,v,`Git clone failed. ${H}`)}let{configRaw:R}=await K1(t,e,n,b);if(!gc(R)&&i){a.write(`Repository ${l} has no development container files.
\r`);let F=!0;for(;F;){let H=await i.createConfiguration(p,A);if(H)F=!1;else if(H=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),H!=="Select Configuration")return tb(t,v,"Cancelled container configuration selection.")}}return{containerId:v,shellServer:b}}function zC(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${rb}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${rb}`,"sleep","infinity"]}function tb(t,e,r){throw e&&$e(t,"rm","-f",e),new ue({description:r})}async function K1(t,e,r,n){let i,o,s;if(r?s=e.workspaceFolder(r):s=`${J1(e.repositoryPath)}`,o=await zh([e.repositoryPath],t.userRepositoryConfigurationPaths),o&&(i=(await Le(o.fsPath)).toString()),!o)for(let a of mc(un.posix,s))try{i=(await n.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,o=Ee.from({scheme:"vscode-remote",path:a});break}catch{}return o||(o=await zh([e.repositoryPath],[Gh]),o&&(i=(await Le(o.fsPath)).toString())),{configRaw:i&&Xe(i),configFile:o,workspaceFolder:s}}async function Y1(t,e,r,n){let{configRaw:i,configFile:o,workspaceFolder:s}=await K1(t,e,r,n);if(!o||!i)throw new ue({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:a,configUpdater:c}=t,{cliHost:l,output:u}=a,f=W({},i),d=f;c&&(f.configFilePath=o,d=c(f),delete d.configFilePath);let p=uc({platform:l.platform,configFile:o,env:l.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:s},d);return p.configFilePath=o,("workspaceMount"in p||"workspaceFolder"in p)&&u.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),rQ(t,p),{workspaceFolder:s,config:p}}function rQ({common:t},e){let r=ai(t.env),n=Do(r),i=e.name?`Dev Container: ${e.name}${n}`:`Dev Container${n}`;t.setWorkspaceName(i)}function J1(t){return`/workspaces/${un.posix.basename(Yh(t))}`}var rb="vsc-volume-bootstrap",Jh="vsc-volume-inspect",Qh="volume.Dockerfile";async function nQ(t){let{common:e}=t,{cliHost:r}=e,n=un.join(e.extensionPath,"scripts",Qh),i=e.package.version,o=r.path.join(await r.tmpdir(),"vsch",`${Qh}-${i}`),s=`${o}-${Date.now()}`;await r.mkdirp(r.path.dirname(s)),await r.writeFile(s,await Le(n)),await r.rename(s,o);let a=["build","-f",o,"-t",rb,un.dirname(o)];await jr(t,...a)}async function Q1(t){let{common:e}=t,{cliHost:r}=e,n=un.join(e.extensionPath,"scripts",Qh),i=e.package.version,o=r.path.join(await r.tmpdir(),"vsch",`${Qh}-${i}`),s=`${o}-${Date.now()}`;await r.mkdirp(r.path.dirname(s)),await r.writeFile(s,await Le(n)),await r.rename(s,o);let a=["build","-f",o,"-t",Jh,un.dirname(o)];await jr(t,...a)}async function B1(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===fn?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await ko(t)).indexOf(r)===-1&&await EO(t,r,n),r}var Xh="vsch.local.repository",nb="vsch.local.repository.volume",ib="vsch.local.repository.folder";function Ec(t,e,r,n){return r?{labels:[`${Xh}=${e}`,`${nb}=${n}`,`${ib}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${Xh}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function jh(t,e,r){let{loadNativeModule:n,output:i}=t.common,o=Io(t,e,"root"),s=await vu(t,e,"root",n),a=go("container",r,{},o,s,()=>{throw new Error("not implemented")},i);return{cliHost:a,dockerCLI:"docker",dockerComposeCLI:ri({exec:a.exec,env:{},output:i},"docker","docker-compose"),env:{},output:i}}var Fu="vsch.quality",Z1="vsch.local.folder",eL="vsch.local.volume",ob="/volume";async function H1(t,e,r,n,i,o,s){let{common:a}=t,c,l,u,f=s||[`${Z1}=${i}`,`${Fu}=${a.product.quality}`];try{l=await Kh(t,f);let d=!!l;if(l){let p=l.Config.Labels||{},h=await Qs(t.common,await Zs(t.common),r,async()=>p,Rn);c=Js(h),await lb(t,f,l)}else{if(o&&e)if("image"in r){let{stdout:m}=await $e(t,"images","-q",r.image);m.toString().trim().length===0&&await jr(t,"pull",r.image);let g=cQ(t,e,r);g.length&&(a.output.write(`Waiting for git clone to finish. (Unsupported: ${g.map(v=>`'${v}'`).join(", ")})`),await o())}else await o();let p=await iQ(t,r),h=await Ou(t,r,p,"image"in r,tL(r.runArgs)||r.containerUser,!0);c=h.collapsedFeaturesConfig;try{await ub(t,r,c,h.updatedImageName,f,n.workspaceMount,h.imageDetails)}finally{l=await Mu(t,f)}if(!l)return tm(a.output,"Dev container not found.")}return u=await ni(t,l.Id,n.workspaceFolder,r.remoteUser),await ab(l,t,u,r,c,e,d,i,o)}catch(d){throw sb(d,l,t,u,r)}}async function QC(t,{repositoryPath:e,folder:r},n,i,o,s,a){let{common:c}=t,l,u,f,{labels:d,remoteWorkspaceFolder:p}=Ec(n,e,r,i),h=[...d,`${Fu}=${c.product.quality}`];try{let m,g="Id"in o;if("Id"in o){u=o,await lb(t,h,u);let v=Io(t,u.Id,"root"),w=await Sn(v,c.output,c.sessionId);l=(await n.getConfigurationFromImage(t,n,r,w)).config;let b=u.Config.Labels||{},C=await Qs(c,await Zs(t.common),l,async()=>b,Rn);m=Js(C),f=await ni(t,u.Id,p,l.remoteUser),await Zh(t,u.Id,f.user,p,l.initializeCommand)}else{l=o;let v=await jh(t,s,p),w=await oQ(t,v,n,l,s,a),b=await Ou(t,l,w.imageName,"image"in l,tL(l.runArgs)||l.containerUser,!1);m=b.collapsedFeaturesConfig;try{let C=await n.getWorkspaceConfiguration(n.repositoryPath,i);await ub(t,l,m,b.updatedImageName,h,C.workspaceMount,b.imageDetails)}finally{u=await Mu(t,h)}if(!u)return tm(c.output,"Dev container not found.");f=await ni(t,u.Id,p,l.remoteUser),f.user!=="root"&&(f.launchRootShellServer?await ou(f,f.launchRootShellServer,p,l.configFilePath.path):c.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await ab(u,t,f,l,m,Ue(dn.posix,p),g,c.cwd,void 0)}catch(m){throw sb(m,u,t,f,l)}}async function XC(t,e){let{common:r}=t,{volumeName:n}=e,i,o,s,a,c;Pc(e)?(a=ob,c="Inspect Volume"):(a=Ur(e.repositoryPath).volumeDestination,c="Recovery Container");let l=dn.join(t.common.extensionPath,"scripts","devContainerInspect.json"),u={image:Jh,name:c,configFilePath:Ee.parse(l),settings:{"extensions.ignoreRecommendations":!0}};s=[`${eL}=${n}`,`${Fu}=${r.product.quality}`],r.setWorkspaceName(c);try{if(i=await Kh(t,s),i)await lb(t,s,i),o=await ni(t,i.Id,a,u.remoteUser);else{await Q1(t);try{let f=`src=${n},dst=${a},type=volume,volume-driver=local`;await ub(t,u,void 0,Jh,s,f,void 0)}finally{i=await Mu(t,s)}if(!i)return tm(r.output,"Dev container not found.");o=await ni(t,i.Id,a,u.remoteUser),o.user!=="root"&&(o.launchRootShellServer?await ou(o,o.launchRootShellServer,a):r.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await ab(i,t,o,u,void 0,Ue(dn.posix,a),!0,r.cwd,void 0)}catch(f){throw sb(f,i,t,o,void 0)}}function sb(t,e,r,n,i){let o=t instanceof ue?t:new ue({description:"An error occurred setting up the container.",originalError:t});return e&&(o.manageContainer=!0,o.params=r.common,o.containerId=e.Id,o.dockerParams=r),n&&(o.containerProperties=n),i&&(o.config=i),o}async function ab(t,e,r,n,i,o,s,a,c){let{common:l}=e,u=Nt(l.cliHost,r.shellServer);s||await mh(e,u,n);let f={cwd:a,dockerCLI:e.dockerCLI,env:l.env,containerId:t.Id,user:r.user,sessionId:l.sessionId,shutdownAction:n.shutdownAction,logLevel:l.getLogLevel(),delay:1e4},{shutdownArgs:d}=await Bh(e,u,"singleContainer",f,s?n:void 0),{hostOrContainerPort:p,hostPortServer:h,connectionToken:m,webConnectionToken:g,remoteEnv:v,serverDownloaded:w}=await Co(l,r,n,i,c,n.devPort||wo);return d.hostPortServer=h,_c(l,r,p,m,g,t,o),{params:l,properties:r,config:n,resolvedAuthority:{host:To,port:p,connectionToken:m,extensionHostEnv:v},webConnectionToken:g,tunnelInformation:l.isLocalContainer?Sc(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:w}}async function iQ(t,e){var n;let r="image"in e?e.image:Nu(t.common);return lt(e)&&(t.common.progress(wt.BuildingImage),await rL(t,e,r,(n=t.buildNoCache)!=null?n:!1)),r}async function oQ(t,e,r,n,i,o){var s;try{let a=r.imageName,c="image"in n?n.image:a;if(lt(n))try{t.common.progress(wt.BuildingImage);let l=n.configFilePath;if(l.scheme==="file"){let f=dn.dirname(l.fsPath),d=dn.basename(f)===".devcontainer",p=d?dn.dirname(f):f,h=X1.c({cwd:p},["."]),m=await new Promise(v=>{let w=[];h.on("data",b=>w.push(b)),h.on("end",()=>v(Buffer.concat(w)))}),g=`/tmp/devcontainer-${Date.now()}`;await o.exec(`# Copy local config folder to remote
mkdir -p ${g}
${cu(m.byteLength)} | tar --no-same-owner -x -C ${g}`,{stdin:m}),n=se(W({},n),{configFilePath:Ee.from({scheme:qt.scheme,path:d?dn.posix.join(g,".devcontainer","devcontainer.json"):dn.posix.join(g,"devcontainer.json")})})}await rL(e,n,c,(s=t.buildNoCache)!=null?s:!1)}catch(l){throw l instanceof ue?l:new ue({description:"An error occurred building the image.",originalError:l})}return{imageName:c}}finally{$e(t,"rm","-f",i)}}function tL(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if((r==="-u"||r==="--user")&&e+1<t.length)return t[e+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function Kh(t,e){let{common:r}=t,n=await Mu(t,e);if(t.expectExistingContainer&&!n)throw new ue({description:"The expected container does not exist."});if(n&&(t.removeOnStartup===!0||t.removeOnStartup===n.Id)){let i="Removing Existing Container",o=r.output.start(i);await $e(t,"rm","-f",n.Id),r.output.stop(i,o),n=void 0}return n}async function lb(t,e,r){let{common:n}=t,i=r.State.Status!=="running";if(i){let o="Starting container",s=n.output.start(o);await $e(t,"start",r.Id),n.output.stop(o,s),await Mu(t,e)||tm(n.output,"Dev container not found.")}return i}async function Mu(t,e){let r=await Ni(t,!0,e);return(await xo(t,r)).filter(i=>i.State.Status!=="removing")[0]}async function rL(t,e,r,n){var f,d;let{cliHost:i,output:o}="cliHost"in t?t:t.common,s=Kt(i,e),a=await fb(s,i);if(!i.isFile(a))throw new ue({description:`Dockerfile (${a}) not found.`});let c=["build","-f",a,"-t",r],l=(f=e.build)==null?void 0:f.target;if(l&&c.push("--target",l),n)c.push("--no-cache","--pull");else if(e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")c.push("--cache-from",e.build.cacheFrom);else for(let p=0;p<e.build.cacheFrom.length;p++){let h=e.build.cacheFrom[p];c.push("--cache-from",h)}let u=(d=e.build)==null?void 0:d.args;if(u)for(let p in u)c.push("--build-arg",`${p}=${u[p]}`);c.push(await fb(sL(i,e),i));try{let p=se(W({},ei(t)),{output:ht(o,ae.Info)});await jr(p,...c)}catch(p){throw new ue({description:"An error occurred building the image.",originalError:p,data:{fileWithError:a}})}}async function ub(t,e,r,n,i,o,s){let{common:a}=t;a.progress(wt.StartingContainer);let c=e.appPort,l=typeof c=="number"||typeof c=="string"?[c]:c||[],u=[].concat(...l.map(Y=>["-p",typeof Y=="number"?`127.0.0.1:${Y}:${Y}`:Y])),f=o?["--mount",o]:[],d=e.mounts?[].concat(...e.mounts.map(Y=>["--mount",Y])):[];if(t.cacheMount==="volume")d.push("--mount","type=volume,src=vscode,dst=/vscode");else if(t.cacheMount==="bind"){await Or(a.localCacheFolder);let Y=a.localCacheFolder.indexOf(",")!==-1?'"':"";d.push("--mount",`type=bind,${Y}src=${a.localCacheFolder}${Y},dst=/vscode`)}let p=e.containerEnv,h=p?Object.keys(p).reduce((Y,te)=>(Y.push("-e",`${te}=${p[te]}`),Y),[]):[],m=e.containerUser?["-u",e.containerUser]:[],g=[];((r==null?void 0:r.allFeatures)||[]).some(Y=>(St||Y.included)&&Y.value&&Y.init)&&g.push("--init"),((r==null?void 0:r.allFeatures)||[]).some(Y=>(St||Y.included)&&Y.value&&Y.privileged)&&g.push("--privileged");let v=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(Y=>(St||Y.included)&&Y.value).map(Y=>Y.capAdd||[])));for(let Y of v)g.push("--cap-add",Y);let w=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(Y=>(St||Y.included)&&Y.value).map(Y=>Y.securityOpt||[])));for(let Y of w)g.push("--security-opt",Y);let b=[].concat(...[].concat(...((r==null?void 0:r.allFeatures)||[]).map(Y=>(St||Y.included)&&Y.value&&Y.mounts).filter(Boolean)).map(Y=>["--mount",`type=${Y.type},src=${Y.source},dst=${Y.target}`])),C=((r==null?void 0:r.allFeatures)||[]).map(Y=>(St||Y.included)&&Y.value&&Y.entrypoint).filter(Boolean),S=["--entrypoint","/bin/sh"],_=["-c",`echo Container started
trap "exit 0" 15
${C.join(`
`)}
exec "$@"
while sleep 1 & wait $!; do :; done`,"-"];if(e.overrideCommand===!1&&s){let Y=await s();_.push(...Y.Config.Entrypoint||[]),_.push(...Y.Config.Cmd||[])}let P=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...u,...f,...d,...b,...sQ(i),"-l",`vsch.remote.devPort=${e.devPort||wo}`,...h,...m,...e.runArgs||[],...g,...S,n,..._],I,A=new Promise((Y,te)=>I=te),{started:R}=await Uh(t,aQ(i),A,a.output,a.getLogLevel()===ae.Trace),F="Starting container",H=a.output.start(F),X=se(W({},ei(t)),{output:ht(t.common.output,ae.Info)});jr(X,...P).then(I,I),await R,a.output.stop(F,H)}function kc(t){let e=(t.Config.Labels||{})[Z1];return e||void 0}function ta(t){let e=(t.Config.Labels||{})[Xh];return e||void 0}function em(t){let e=(t.Config.Labels||{})[nb];return e||void 0}function nL(t){let e=(t.Config.Labels||{})[eL];return e||void 0}function iL(t){let e=(t.Config.Labels||{})[ib];return e||void 0}function sQ(t){let e=[];return t.forEach(r=>e.push("-l",r)),e}function aQ(t){let e={};return t.forEach(r=>{let n=r.split("=");e[n[0]]=n[1]}),e}function tm(t,e){throw t.write(Re(e)),new Error(e)}function cQ(t,e,r){let n=[];for(let i in r){let o=lQ[i],s=typeof o=="function"?o(t,e,r):o;s===!0?n.push(i):typeof s=="string"?n.push(s):Array.isArray(s)&&n.push(...s)}return n}var lQ={configFilePath:!1,image:!1,name:!1,forwardPorts:!1,appPort:!1,devPort:!1,portsAttributes:!1,otherPortsAttributes:!1,extensions:!1,runArgs:(t,e,r)=>{let n={"add-host":!0,"cap-add":!0,gpus:!0,hostname:!0,l:!0,label:!0,"security-opt":!0},i=[];for(let s of r.runArgs){let a=s.indexOf("="),c=a===-1?s.substr(2):s.substr(2,a);if(s.startsWith("--"))i.push(c);else if(s.startsWith("-"))for(let l of s.substr(1))i.push(l)}let o=[];for(let s of i)n[s]||o.push(s);return o},shutdownAction:!1,overrideCommand:!0,initializeCommand:!0,onCreateCommand:!1,updateContentCommand:!1,postCreateCommand:!1,postStartCommand:!1,postAttachCommand:!1,waitFor:!1,workspaceFolder:!1,workspaceMount:(t,e,r)=>oL(t,e,r.workspaceMount)?r.workspaceMount:!1,mounts:(t,e,r)=>r.mounts.filter(oL.bind(void 0,t,e)),settings:!1,containerEnv:!1,remoteEnv:!1,containerUser:!1,remoteUser:!1,updateRemoteUserUID:!1,userEnvProbe:!1,features:!1,hostRequirements:!1};function oL(t,e,r){let n=!!r&&uQ(r);return n&&n.type==="bind"&&!!n.source&&fQ(t.common.cliHost,e.rootFolderPath,n.source)}function uQ(t){let e={src:"source",destination:"target",dst:"target"};return t.split(",").map(r=>r.split("=")).map(([r,n])=>[e[r]||r,n]).reduce((r,[n,i])=>(r[n]=i,r),{type:"bind"})}function fQ(t,e,r){let{path:n}=t,i=n.relative(e,r);return!!i&&!i.startsWith("..")&&!n.isAbsolute(i)}var aL=K(require("path"));async function cL(t,e,r,n,i,o){let s,a=new Promise(h=>s=h),c=new CC,l=[],u=await vO("vscode-remote-containers",async(h,m)=>{let g=await wO(h),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let w=l[g.sequence];w&&(w(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&n.event(g.event);m.write(JSON.stringify(v)),m.end()});u.server.unref();let f=aL.join(r,"dist","shutdown","shutdownMonitorProcess"),d=[u.ipcHandlePath,t,ae[e],i||"",o.getTime().toString()];n.write(`Forking shutdown monitor: ${f} ${d.join(" ")}\r
`);let p=EA(f,d,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:l,done:a}}async function rm(t,e,r){let n=t.sequence++,i=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await i}async function lL({queue:t,done:e}){t.push({type:"cleanup"}),await e}var fL=K(require("util"));var dL=K(require("string_decoder")),fn="__UNIQUE__",To="127.0.0.1";async function fb(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:r}=await Se({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:rt});return r.toString().trim()}return Oe(t,e.platform)}function Ic(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?Fw:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="ssh"?n.VSCODE_DOCKER_HOST=e.host:n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function ai(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let r=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;r&&(e.host=r),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function nm(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function im(t){return!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function Do(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function ci(t,e){try{return await $t(t,e)}catch{return}}async function Uh(t,e,r,n,i){let o=await gu(t,{event:["start"]});return{started:new Promise((s,a)=>{r.catch(u=>{o.terminate(),a(u)});let c=new dL.StringDecoder("utf8"),l="";o.stdout.on("data",async u=>{if(u){let f=c.write(u);i&&n.write(`Log: startEventSeen#data ${f.trim().replace(/\r?\n/g,`\r
`)}\r
`);let d=(l+f).split(`
`);l=d.pop();for(let p of d)if(p.trim())try{let h=JSON.parse(p);(h.status||h.Status)==="start"&&await dQ(t,h,e)&&(o.terminate(),s())}catch(h){console.error(h),console.error(p)}}})})}}async function dQ(t,e,r){var i;let n=((i=e.Actor)==null?void 0:i.Attributes)||(await $t(t,e.id||e.ID)).Config.Labels||{};return Object.keys(r).every(o=>n[o]===r[o])}function _c(t,e,r,n,i,o,s){let a=o.Ports.filter(d=>!!d.PublicPort),c="";if(t.authority&&s){let d=s.isWorkspaceFile?"workspace":"folder",p=e.remoteWorkspaceFolder||"/",h=s.isWorkspaceFile?Ro.posix.join(p,t.cliHost.path.basename(s.workspaceOrFolderPath)):p;c=`&${d}=${encodeURIComponent(`vscode-remote://${t.authority}${h}`)}`}let l=[...a.length?["Published Ports:"]:[],...a.map(d=>`${d.PrivatePort}/${d.Type} -> ${d.IP}:${d.PublicPort}`),...a.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${n||i}${c}`,""]:[]],u=l.reduce((d,p)=>Math.max(p.length,d),0),f="-".repeat(u);u>0&&t.output.write(`\r
\r
${f}\r
${l.join(`\r
`)}${f}\r
\r
`)}async function om(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",i=r.start(n);try{let{stdout:o}=await $e(t,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&r.write(Re(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new ue({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{r.stop(n,i)}}async function T1(t,e,r){try{return await Po(t,e)}catch(n){if(!r)throw n;try{await jr(t,"pull",e)}catch{throw n.stdout&&t.common.output.write(n.stdout.toString()),n.stderr&&t.common.output.write(Re(n.stderr.toString())),n}return Po(t,e)}}function Jt(t){return t.hostPath!==void 0}function ln(t){return t.repositoryPath!==void 0}function Pc(t){return!ln(t)&&t.volumeName!==void 0}function pn(t){let e=hL("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function qu(t,e,r,n){let i=r?JSON.stringify({hostPath:t,localDocker:n,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(i,"utf8").toString("hex")}${e}`}function ra(t,e,r,n,i,o){if(t){let a=Ur(t);if(!e){let l=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:i});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${ob}`}function sm(t){let e=hL("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function pL(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function hL(t,e){try{let[r,n]=e.split("+"),i=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return i?i.startsWith("{")?JSON.parse(i):i:void 0}catch(r){console.warn(r);return}}async function db(t,e,r,n=!1){return!n&&await gw(t,e,r)||e}function mL(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}async function V1(t,e,r,n,i,o=!1){if("dockerComposeFile"in r)return{workspaceFolder:HC(r),workspaceMount:void 0};let{workspaceFolder:s,workspaceMount:a}=r;if(e&&(!s||!("workspaceMount"in r))){let c=await db(t,e.rootFolderPath,n,o);if(!s){let l=t.path.relative(t.path.dirname(c),e.rootFolderPath);s=`/workspaces/${t.platform==="win32"?l.replace(/\\/g,"/"):l}`}if(!("workspaceMount"in r)){let l=`/workspaces/${t.path.basename(c)}`,u=t.platform!=="linux"?`,consistency=${i||"consistent"}`:"",f=c.indexOf(",")!==-1?'"':"",d=l.indexOf(",")!==-1?'"':"";a=`type=bind,${f}source=${c}${f},${d}target=${l}${d}${u}`}}return{workspaceFolder:s,workspaceMount:a}}function gL(t,e,r){if(t==="win32")return e;let n=`${pQ(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function pQ(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function hO(t,e){return t.with({path:Ro.posix.resolve(t.path,e)})}async function hQ(t,e,r,n,i,o){let s=mQ(e,r,n,i,o);return jr(t,...s)}function mQ(t,e,r,n,i){let o=["exec","-it"];if(r&&o.push("-w",r),o.push("-u",e),n)for(let s in n)o.push("-e",`${s}=${n[s]}`);return o.push(t,...i),o}async function Bh(t,e,r,n,i){let{common:o,onRemoveOnShutdownChanged:s}=t;if(o.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=o.output.start("Setup shutdown monitor"),c=await cL(r,o.getLogLevel(),o.extensionPath,o.output,o.logFilePath?Ro.dirname(o.logFilePath):void 0,o.sessionStart);rm(c,n,o.output).catch(d=>console.error(d)),s&&s(async d=>{n.rebuild=!!d,n.delay=0,await rm(c,n,o.output)}),o.onDidChangeLogLevel(async d=>{n.logLevel=d,await rm(c,n,o.output)});let l={},u=async()=>{let d=lL(c);l.hostPortServer&&await(0,fL.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await d};o.shutdowns.push(u);let f=i?dO(t,e,i).catch(console.error):Promise.resolve();return o.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:l,doneWithDocuments:f}}function Sc(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}function sL(t,e){let r="dockerFile"in e?e.context:e.build.context;return r?So(t,e,r):Vs(Kt(t,e))}async function ni(t,e,r,n,i){let{common:o}=t,s="Inspecting container",a=o.output.start(s),c=await $t(t,e);o.output.stop(s,a);let l=n||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),d=gQ(c.Config.Env),p=Io(t,e,l),h=await vu(t,e,l,o.loadNativeModule),m=Io(t,e,"root"),g=c.Mounts.find(b=>b.Type==="volume"&&b.Name==="vscode"),v=c.Mounts.find(b=>b.Type==="bind"&&b.Source===o.localCacheFolder),w=g&&Ro.posix.join(g.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return th({params:o,startedAt:c.State.StartedAt,sharedDataFolder:w,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:d,remoteExec:p,remotePtyExec:h,remoteExecAsRoot:m,rootShellServer:i})}function gQ(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function W1(t,e,r){if(!e)return;let{common:n,dockerEnv:i}=t,{cliHost:o,output:s}=n,a=o.platform==="win32",c=a?[o.env.ComSpec||"cmd.exe","/c"]:["/bin/sh","-c"],l=a&&Array.isArray(e)&&e.length?[(e[0]||"").replace(/\//g,"\\"),...e.slice(1)]:e,u=typeof l=="string"?[...c,l]:l;if(!u.length)return;let f="initializeCommand",d=ht(s,ae.Info);try{d.raw(`[1mRunning the ${f} from devcontainer.json...[0m\r
\r
`),await Ii({ptyExec:o.ptyExec,cmd:u[0],args:u.slice(1),env:i,output:d,onDidInput:r}),d.raw(`\r
`)}catch(p){if(p&&(p.code===130||p.signal===2))d.raw(`\r
[1m${f} interrupted.[0m\r
\r
`);else throw new ue({description:`The ${f} in the devcontainer.json failed.`,originalError:p})}}async function Zh(t,e,r,n,i){if(!i)return;let o=typeof i=="string"?["/bin/sh","-c",i]:i;if(!o.length)return;let s=t.common.postCreate,a="initializeCommand",c=ht(s.output,ae.Info);try{c.raw(`[1mRunning the ${a} from devcontainer.json...[0m\r
\r
`);let l=se(W({},ei(t)),{output:c,onDidInput:s.onDidInput});await hQ(l,e,r,n,void 0,o),c.raw(`\r
`)}catch(l){if(l&&(l.code===130||l.signal===2))c.raw(`\r
[1m${a} interrupted.[0m\r
\r
`);else throw new ue({description:`The ${a} in the devcontainer.json failed.`,originalError:l})}}function Nu(t){let{cwd:e}="cwd"in t?t:t.cliHost,r=vQ(e),n=Ro.basename(e);return Ch(`vsc-${n}-${r}`)}function vQ(t){return uL.createHash("md5").update(t).digest("hex")}async function Zs(t){let{cliHost:e}=t,{version:r}=t.package,n=e.path.join(await e.tmpdir(),"vsch","container-features",`${r}-${Date.now()}`);return await e.mkdirp(n),n}async function vL(t){let{common:e,dockerCLI:r,dockerComposeCLI:n,dockerEnv:i}=t,{cliHost:o,output:s}=e;return{cliHost:o,dockerCLI:r,dockerComposeCLI:n,env:i,output:s}}async function yL(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}var ut=K(require("vscode"));var na={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await ut.env.openExternal(ut.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},ia={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await $e(t.dockerParams,"stop","-t","0",t.containerId),await ut.commands.executeCommand("workbench.action.reloadWindow")}},wL={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await $e(t.dockerParams,"rm","-f",t.containerId),await ut.commands.executeCommand("workbench.action.reloadWindow")}},Ac={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await ut.commands.executeCommand("workbench.action.openRecent")}},CL={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await $e(t.dockerParams,"start",t.containerId),await ut.commands.executeCommand("workbench.action.reloadWindow")}},bL={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await ut.commands.executeCommand("remote-containers.attachToRunningContainer")}},Oo={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=ut.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||ut.workspace.textDocuments.some(i=>i.isDirty))},execute:async t=>{await ut.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Tc=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:ia.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await ut.env.openExternal(ut.Uri.parse(t.data.learnMoreUrl))}}];async function No(t,e,r,n=!1,i){var d,p,h,m,g,v;let o=t instanceof ue?t:new ue({description:"An error occurred setting up the container.",originalError:t});if(i){i.show();let w=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(w!==void 0){i.log.write(Re(String(w)));let b=(p=(d=o.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();b&&i.log.write(b);let C=(m=(h=o.originalError)==null?void 0:h.stderr)==null?void 0:m.toString().trim();C&&i.log.write(Re(C)),((g=o.originalError)==null?void 0:g.code)&&i.log.write(`Exit code ${(v=o.originalError)==null?void 0:v.code}`)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await ut.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),ut.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[na]);let a=await s.reduce(async(w,b)=>await b.applicable(o,!0)?[...await w,b]:w,Promise.resolve([])),c=await ut.window.showErrorMessage(o.description,{modal:!0},...a);if(c&&(EL(r,e,c.id),await c.execute(o)),c&&c.isLastAction){if(n)throw ut.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let l=await s.reduce(async(w,b)=>await b.applicable(o,!1)?[...await w,b]:w,Promise.resolve([])),u=l.map(w=>({label:w.title,action:w}));async function f(){let b=await(l.length?ut.window.showQuickPick(u,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));b&&(EL(r,e,b.action.id),b.action.execute(o).catch(console.error),b.action.isLastAction||await f())}if(f().catch(console.error),n)throw ut.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function EL(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var ie=K(require("vscode")),Ju=K(require("path")),ZM=K(require("os"));var eq=K(mF()),qo=K(XM());var Ere="remote.containers.defaultExtensions",ui="remote-containers.revealLogTerminal",iE="remote-containers.revealPostCreateTerminal",Qu="remote-containers.openDevContainerFile",tq="remote-containers.openRepositoryInVolume",xm="remote-containers.openRepositoryInUniqueVolume",rq="remote-containers.openRepositoryFromRemoteHub",nq="remote-containers.openPullRequestInVolume",Xu=ie.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),Zu=ie.Uri.parse("https://aka.ms/vscode-dev-containers"),iq=new Ew,lr={onRemoveOnShutdownChangedEmitter:iq,onRemoveOnShutdownChanged:iq.event,results:new Map},aa,fi=t=>_A(t,ie.env.appRoot);function Pm(t,e,r,n){return async(i,o)=>{if(ie.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),o.resolveAttempt>1){let s=r.get(i);if(!s)throw new Error("Reconnect attempt without old result.");let a=`Reconnection attempt ${o.resolveAttempt-1}`,c=t.log.start(a),{cliHost:l}=s.params;if(l.reconnect)try{await l.reconnect()}catch(u){throw t.log.write(Re(String(u&&(u.stack||u.message)||u))),ie.RemoteAuthorityResolverError.TemporarilyNotAvailable("Cannot reconnect to remote host.")}if(s.dockerContainerId){let u=await ci(s.dockerParams,s.dockerContainerId);if(!u)throw ie.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(u.State.Status==="paused")throw ie.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(u.State.Status!=="running")throw ie.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return t.log.stop(a,c),se(W({},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(i,t,e);return _re(c.params,c.properties).catch(l=>{}),r.set(i,c),t.log.stop(s,a),ie.window.withProgress({location:ie.ProgressLocation.Window,title:Ure,cancellable:!1},async l=>{await CR(c.params.backgroundTasks)}).then(void 0,l=>{t.log.write(Re(String(l&&(l.stack||l.message)||l)))}),se(W(W({},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function _re(t,e){if(!e.nodeExecutable)return;let r=await Le(Ju.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await Ti(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),i=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var oE;async function Sre(){return oE||(oE=Zn(Ju.join(__dirname,"..",".."),ji)),oE}var ef={};async function ji(t,e=!0){var r;if(t.counter&&((r=ef[t.prompt])==null?void 0:r.from)===t.counter&&delete ef[t.prompt],!ef[t.prompt]){if(!e)return"";ef[t.prompt]={result:Promise.resolve(ie.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return ef[t.prompt].result}async function We(t,e,r,n=!0,i=Sre(),o=!0){let s=!r;if(s){if(lr.results.size){let g=[...lr.results.values()].filter(v=>v.dockerParams)[0];return vL(g.dockerParams)}if(aa)return aa}r&&typeof r!="string"&&"scheme"in r&&(r.scheme==="file"?r=r.fsPath:r=tc(r));let a;if(!r){let g=(ie.workspace.workspaceFolders||[])[0];if(ie.env.remoteName==="wsl")g?r=tc(g.uri):r={wslDistro:Pp(ie.env.remoteAuthority),wslPath:"/"};else if(ie.env.remoteName==="ssh-remote"){let v=xre(ie.env.remoteAuthority);if(v){let{user:w,hostName:b,port:C}=v;a={host:`ssh://${w?`${w}@`:""}${b}${C?`:${C}`:""}`},g?r=g.uri.path:r="/"}}else(g==null?void 0:g.uri.scheme)==="file"&&(r=g.uri.fsPath);r||(r=process.cwd())}let c=a&&"host"in a&&a.host||void 0,l=n?Ui():{executeInWSL:"never",defaultDistro:void 0},u=Pn(c,r,fi,l,t.extensionPath,Hi(),await Wl(ie.env.appRoot),e,{sshAskpassEnv:i,settings:jc()});o&&!await Promise.race([u,Ai(1e3)])&&await ie.window.withProgress({location:ie.ProgressLocation.Notification,title:`[Setting up Remote-Containers (show log)](command:${ui} "Show details in terminal")`,cancellable:!1},async()=>{await u});let f=await u,d=Ln(),p=$c();if(!a){let g=ie.workspace.getConfiguration("docker"),v=g.get("context")||f.env.DOCKER_CONTEXT;if(!v){let w={cliHost:f,dockerCLI:d,dockerComposeCLI:ri({exec:f.exec,env:{},output:rt},d,p),env:{},output:rt};v=await _C(w)||"default"}v&&v!=="default"?a={context:v}:(a=ai(f.env)||{},"context"in a||(sE(a,g,"host"),sE(a,g,"certPath"),sE(a,g,"tlsVerify"),Object.keys(a).length||(a=void 0)))}let h=W(W({},await i),Ic(f,a)),m={cliHost:f,dockerCLI:d,dockerComposeCLI:ri({exec:f.exec,env:h,output:e},d,p),env:h,output:e};return s&&(aa=m),m}var km;function oq(t){if(km)return km;let e=kre(t);return t.subscriptions.push(e),t.subscriptions.push(e.event(()=>{let r=aa==null?void 0:aa.cliHost;aa=void 0,(r==null?void 0:r.terminate)&&r.terminate()})),km=e.event,km}function xre(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch{}return{hostName:r}}function sE(t,e,r){let n=e.get(r);n&&(t[r]=n)}var Pre=["remote.containers.dockerPath","remote.containers.executeInWSL","remote.containers.executeInWSLDistro","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function kre(t){let e=new ie.EventEmitter,r=ie.workspace.onDidChangeConfiguration(async c=>{Pre.some(l=>c.affectsConfiguration(l))&&e.fire()}),n,i,o,s=()=>{(async()=>{i||(i=await Pn(void 0,process.cwd(),fi,Ui(),t.extensionPath,Hi(),void 0,rt));let c={cliHost:i,dockerCLI:Ln(),dockerComposeCLI:ri({exec:i.exec,env:{},output:rt},Ln(),$c()),env:{},output:rt},l=await _C(c);l===void 0?o=setTimeout(s,2*60*1e3):(l!==n&&(n!==void 0&&e.fire(),n=l),o=setTimeout(s,2*1e3))})().catch(console.error)};s();let a=e.dispose;return e.dispose=()=>{r.dispose(),o&&clearTimeout(o),a.call(e)},e}async function ca(){let t=ie.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return aE(e)}return null}async function aE(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=pn(t.authority);if(Jt(r))return null;if(ln(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Im(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Ire}}async function Ire(t){let e="Rebuild",r="Ignore",n=await ie.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return ie.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function Are(t,e){return t?sq():Array.from(new Set([...e,...ie.workspace.getConfiguration().get(Ere)||[],...sq()]))}function sq(){let t=ie.env.language,e=t.indexOf("-"),r=aq(t)||(e!==-1?aq(t.substr(0,e)):void 0);return r?[r]:[]}function aq(t){let e=t.toLowerCase();return ie.extensions.all.filter(r=>{var i;let n=r.packageJSON&&r.packageJSON.contributes;return((i=n==null?void 0:n.localizations)==null?void 0:i.length)?!!n.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function Tre(){return ie.env.isTelemetryEnabled}function cq(){return!!ie.workspace.getConfiguration().get("workbench.enableExperiments")}function Dre(){return!!ie.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function Am(){return ie.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function Tm(){return!!ie.workspace.getConfiguration().get("remote.containers.experimentalUpdateRemoteUserUIDOnMacOS")}function Dm(){var t;return(t=ie.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function Rre(){let t=ie.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function Ore(){return ie.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function Ln(){return ie.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function Ui(){return{executeInWSL:cE(),defaultDistro:Nre()}}function cE(){return process.platform!=="win32"?"never":ie.workspace.getConfiguration().get("remote.containers.executeInWSL",!1)?"always":"forWSLPath"}function Nre(){if(process.platform==="win32")return ie.workspace.getConfiguration().get("remote.containers.executeInWSLDistro")||void 0}function $c(){return ie.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function lE(){let t=ie.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return J_(t)}var Lre=t=>ie.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(lE())});function Fre(){let t=ie.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function jc(){let t=ie.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),configFilePath:t.get("remote.SSH.configFile")}}function Bi(t,e,r,n,i,o){let s={resolver:e,outcome:r};n&&(s.configProperties=JSON.stringify(Object.keys(n)),s.configExtensions=JSON.stringify(n.extensions||[]),s.configFeatures=JSON.stringify(Object.keys(n.features||{})),"image"in n?s.configType="image":lt(n)?s.configType="dockerfile":"dockerComposeFile"in n&&(s.configType="dockerCompose")),i&&(s.hardwareId=i.osRelease.hardware,s.osReleaseId=i.osRelease.id,s.osReleaseVersion=i.osRelease.version);let a=o&&o.originalError,c=a&&(a.stack||a.message||String(a))||o&&o.description;c&&(s.errorMessage=c),t.sendTelemetryEvent("resolver",s)}var lq=class{constructor(e){this.onClose=e;this.writeEmitter=new ie.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new ie.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},Rm=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new lq(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?Ju.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Mre(i,lE,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>ie.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=ie.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Mre(t,e,r,n,i=void 0){let o=[];return r&&o.push(Z_(r,()=>Math.min(ae.Debug,e()))),o.push(eS(t,e,n)),ht(X_(o,i))}async function uE(t,e){let r=await ci(t,e.Id);if(r&&r.State.Status==="running")try{await $e(t,"stop",r.Id)}catch(n){ie.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Om(t,e){let r=await ci(t,e.Id);if(r&&r.State.Status!=="running")try{await $e(t,"start",r.Id)}catch(n){ie.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function uq(t,e){try{await $e(t,"rm",e)}catch(r){ie.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function fE(t,e){try{await $e(t,"volume","rm","--force",e)}catch(r){ie.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function qre(){return ie.env.sessionId!=="someValue.sessionId"?ie.env.sessionId:`${ie.env.sessionId}_${Date.now()}`}function $re(t,e){let r=ie.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function fq(t,e){return t.globalState.get("removeOnStartup")===e?(await t.globalState.update("removeOnStartup",null),!0):t.workspaceState.get("removeOnStartup",!1)}async function dq(t,e){await t.workspaceState.update("removeOnStartup",e)}async function dE(t,e){await t.globalState.update("removeOnStartup",e)}async function pq(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function tf(t,e){await t.globalState.update("buildNoCache",e)}async function rf(t,e,r,n,i){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:i})}async function hq(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=ie.workspace.workspaceFolders)==null?void 0:r.some(o=>o.uri.fsPath===e.workspaceFolder||o.uri.path===e.workspaceFolder),i=await ca();if(n||i&&i.repositoryPath===e.workspaceFolder&&(n=!0),n){let o=e.fileWithError?Ee.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await gq(o),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?ie.ViewColumn.Beside:ie.ViewColumn.One,preserveFocus:!0},a=await ie.window.showTextDocument(ie.Uri.file(e.logFile),s),c=new ie.Position(a.document.lineCount-1,0);a.selection=new ie.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await gq(o),!0}}return!1}function mq(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function gq(t){return t?ie.commands.executeCommand("vscode.open",ie.Uri.parse(t.toString()),{viewColumn:ie.ViewColumn.One}):ie.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:ie.ViewColumn.One})}async function pE(t){if(lr.results.size)return[...lr.results.values()].filter(o=>o.config).map(o=>o.config.configFilePath);let e=di(),r=ie.workspace.workspaceFolders||[],n=await Promise.all(r.map(async o=>{let s=Ue(t.path,Oe(o.uri,t.platform));return await si(t,s,e)})),i=ie.workspace.workspaceFile;if(i&&i.scheme!=="untitled"){let o=Ue(t.path,Oe(i,t.platform)),s=await si(t,o,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(o=>!!o)}function di(){return ie.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function jre(t,e,r="localhost"){await ie.workspace.openTunnel({remoteAddress:{host:r,port:e}})}function vq(t,e){let r=new Rm(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let i={enabled:!0,skipNonBlocking:!1,output:SA(r.log,t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0)}};return{channel:r,postCreate:i}}async function Uc(t){let{authority:e,extensionContext:r,sessionStart:n,progress:i,cliHost:o,env:s,cwd:a,isLocalContainer:c,telemetry:l,output:u,logFilePath:f,allowSystemConfigChange:d,postCreate:p}=t,h=Dre(),m=se(W({computeExtensionHostEnv:!0},l),{appRoot:ie.env.appRoot,localCacheFolder:Hi(),extensionPath:r.extensionPath,webConnectionToken:void 0,sessionId:qre(),sessionStart:n,authority:e,cliHost:o,env:s,cwd:a,isLocalContainer:c,getExtensionsToInstall:Are,isCopyGitConfigEnabled:Rre(),credentialHelperConfigLocation:Ore(),dotfilesConfiguration:Fre(),progress:Hre(i),output:u,logFilePath:f,allowSystemConfigChange:d,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,telemetry:Tre(),forwardServerPort:!0,web:h,getLogLevel:lE,onDidChangeLogLevel:Lre,loadNativeModule:fi,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:g=>$re(m,g),openTunnel:jre,getTunnels:()=>Promise.resolve(ie.workspace.tunnels),onAdoptProcess:ie.window.onDidOpenTerminal,persistedFolder:await yL(o,r.globalStoragePath)});return m}var Bc=`[Starting Dev Container (show log)](command:${ui} "Show details in terminal")`,Ure=`[Configuring Dev Container](command:${iE} "Show details in terminal")`,Bre={[wt.Begin]:"",[wt.CloningRepository]:"Cloning Repository",[wt.BuildingImage]:"Building image",[wt.StartingContainer]:"Starting container",[wt.InstallingServer]:"Installing server",[wt.StartingServer]:"Starting server",[wt.End]:""};function Hi(){return Ju.join(ZM.tmpdir(),"vsch")}function Hre(t){let e=0;return r=>{let n=wt.End-r,i=(100-e)/(n+1);t.report({message:Bre[r],increment:i}),e+=i}}async function yq(t,e,r){let{name:n,publisher:i,version:o,aiKey:s}=e;if(!s)return z_(e,r);let a=i?`${i}.${n}`:n,c=new eq.default(a,o,s);t.subscriptions.push(c);let l=new wq(c),u=Vre(r),f=cq()?(0,qo.getExperimentationService)(a,o,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async d=>f&&cq()?f.isCachedFlightEnabled(d):!1,product:r,package:e}}var wq=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,W(W({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this.sendTelemetryEvent(e,n)}};function Vre(t){switch(t.quality){case"stable":return qo.TargetPopulation.Public;case"insider":return qo.TargetPopulation.Insiders;case"exploration":return qo.TargetPopulation.Internal;case void 0:return qo.TargetPopulation.Team;default:return qo.TargetPopulation.Public}}var nf="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",hE="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function of(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(hE))return!0;let r="Got It",n="Learn More",i=await ie.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return i===r?(await t.globalState.update(hE,!0),!0):(i===n&&ie.env.openExternal(ie.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var mE="userConfirmedAttachToContainerRequiresTrust";async function $o(t){if(t.globalState.get(mE))return!0;let e="Got It",r="Learn More",n=await ie.window.showWarningMessage("Attaching to a container may execute arbitrary code.",{modal:!0,detail:"Only attach to a container if you trust its origin."},e,r);return n===e?(await t.globalState.update(mE,!0),!0):(n===r&&ie.env.openExternal(ie.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function Cq(t){t.globalState.setKeysForSync([hE,mE,gE])}function bq(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var gE="updatedToPreRelease2",Wre="2022-01-19T05:14:31.474Z";async function Eq(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(Wre)>=0&&!t.globalState.get(gE,!1)&&(await t.globalState.update(gE,!0),await ie.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(r){console.error(r)}}var Ze=K(require("vscode")),Fe=K(require("path")),kH=K(require("fs"));var Wi=K(vU()),IH=K(fH());var AH=K(require("util"));var dH=K(require("path"));var mle=["png","md","json","txt","map"],gle=["node_modules",".git","bin","out","dist",".vscode-test"],vle=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],pH={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},hH={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},yle=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function i_(t,e){for(let r of e)if(r.metaData){if(yle.indexOf(dH.basename(r.definitionFolder))>-1)continue;let n=0,i=0,o=r.metaData.get("languagesPlatforms");if(o){let s=o.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(hH[a]){let c=hH[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(n+=10),t.mostPopularFileType===l&&(n+=10)}else if(pH[a]){let c=pH[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}}r.recommendationScore=n+(i<0?-4:i)}}async function mH(t,e){return wle(t,e.rootFolderPath,gle,mle)}async function wle(t,e,r,n){let i=new Map,o=new Map,s=500;function a(p,h,m,g){let v=[];(t.readDirWithTypes||t.readDir)(p).then(b=>{if(m.count>=s)return m.count+=b.length,m.maxReached=!0,g(v);let C=b.length;if(C===0)return g(v);let S=b;m.count+b.length>s&&(m.maxReached=!0,C=s-m.count,S=b.slice(0,C)),m.count+=b.length;for(let _ of S){let P=Array.isArray(_)?_[0]:_;(Array.isArray(_)?Promise.resolve((_[1]&ml.File)!=0):t.isFile(t.path.join(p,P))).then(A=>{A?(v.push(P),--C==0&&g(v)):h.indexOf(P)===-1?a(t.path.join(p,P),h,m,R=>{if(v=v.concat(R),--C==0)return g(v)}):--C==0&&g(v)},()=>{if(--C==0)return g(v)})}},()=>g(v))}let c=p=>{i.has(p)?i.set(p,i.get(p)+1):i.set(p,1)},l=p=>{for(let h of vle)h.pattern.test(p)&&(o.has(h.tag)?o.set(h.tag,o.get(h.tag)+1):o.set(h.tag,1))},u=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}l(p)},f=p=>[...p.entries()].reduce((h,m)=>m[1]>h[1]?m:h,["",0])[0],d={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,d,async m=>{m.forEach(u),p({configFiles:o,fileTypes:i,fileCount:d.count,mostPopularFileType:f(i)})})})}var qg=K(require("path"));var zo=K(require("vscode"));async function $g(){await zo.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}function Ko(t,e){let r=zo.workspace.fs;return{platform:t,path:t==="win32"?qg.win32:qg.posix,async isFile(n){try{return((await r.stat(ya(t,e,n))).type&zo.FileType.File)!=0}catch(i){if((i==null?void 0:i.code)==="FileNotFound")return!1;throw i}},async readFile(n){try{let i=await r.readFile(ya(t,e,n));return Buffer.from(i)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let o=new Error(`Could not read file: ${n}`);throw o.originalError=i,o.code="ENOENT",o}throw i}},async writeFile(n,i){await r.writeFile(ya(t,e,n),i)},async readDir(n){return(await r.readDirectory(ya(t,e,n))).map(o=>o[0])},async readDirWithTypes(n){return r.readDirectory(ya(t,e,n))},async mkdirp(n){await r.createDirectory(ya(t,e,n))},async toCommonURI(n){return ya(t,e,n)}}}function ya(t,e,r){let n=t==="win32"?"/"+r.replace(/\\/g,"/"):r;return e.with({path:n})}var jg=class{async readDocument(e){try{let r=await zo.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,r,n){let i=Vt(n,r);await zo.workspace.fs.writeFile(e,Buffer.from(i))}};var ve=K(require("vscode"));var gt=K(require("vscode")),gH=K(require("path"));async function o_(t,e){var i,o;let{fileHost:r}=t,n=await t.findDevContainerFiles();if(n.length){let s=n.length>1?(i=await gt.window.showQuickPick(n.map(f=>({label:f.scheme==="file"?f.fsPath:f.toString(),uri:f})),{placeHolder:"Select a container configuration file"}))==null?void 0:i.uri:n[0];if(!s)return;let a=r.path.dirname(Oe(s,r.platform)),c=r.path.basename(a)===".devcontainer"?r.path.dirname(a):a,l=Ue(r.path,c),u=await u_(r,l);if(u){let f=se(W({},u.object),{configFilePath:u.uri});if("image"in f)return{workspace:l,config:u,imageName:f.image,manifest:await Vf(f.image)};if(lt(f)){let d=((o=f.build)==null?void 0:o.args)||{},p=Kt(r,f),h=await s_(r,p,d);if(h)return W({workspace:l,config:u},h)}if("dockerComposeFile"in f){let d=await sr(r,f),p=await e.readDockerComposeConfig(d,void 0),h=await vH(r,d,c,u.uri,f,p);if(h)return W({workspace:l,config:u},h)}return{workspace:l,config:u}}}else{let s="Add Files...";await gt.window.showInformationMessage("No container configuration file found.",{modal:!0},s)===s&&await Hf(t)}}async function vH(t,e,r,n,i,o){var u;let s=((o==null?void 0:o.services)||{})[i.service]||{},a=Ug(t,e,r,s),c=a?Oi(t,n,a):void 0,l=c&&await s_(t,c,((u=s.build)==null?void 0:u.args)||{});if(l)return l;if(typeof s.image=="string")return{imageName:s.image,manifest:await Vf(s.image)}}function Ug(t,e,r,n){let i=e.length?t.path.dirname(e[0]):r,o=n.build;if(typeof o=="string")return t.path.resolve(i,o,"Dockerfile");if(o&&typeof o=="object"&&typeof o.context=="string"){let s=typeof o.dockerfile=="string"?o.dockerfile:"Dockerfile";return t.path.resolve(i,o.context,s)}}async function s_(t,e,r){let i=await Nt(t).readDocument(e);if(i){let o=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(i)||[])[1]||void 0;if(o){let s=o.replace(/\$\{([^\}]+)\}/,(a,c)=>r[c]||a);return{imageName:s,manifest:await Vf(s)}}}}async function yH(t){let e=await o_(t,{readDockerComposeConfig:async(r,n)=>{if(r[0])try{let i=await t.fileHost.readFile(r[0]);return _r(i.toString())}catch(i){t.output.write(Re(String(i&&(i.stack||i.message)||i)))}return{}}});e&&await a_(t,e,{})}async function a_(t,e,r){var h;let{fileHost:n}=t,{workspace:i,config:o}=e,s=gt.window.createQuickPick();s.ignoreFocusOut=!0;let a={fileHost:n,workspace:i,quickPick:s,telemetry:await t.telemetry,output:t.output},c={featureSets:[]},l=await il(),u=Rn({distFolder:l}),f=await Ru(u,a.output);if(!f)return;f=se(W({},f),{sourceInformation:{type:"local-cache"}}),c.featureSets.push(f),c=await Fh(a,o.object,c,async()=>{var m,g;return W({"com.visualstudio.code.devcontainers.id":(m=e.manifest)==null?void 0:m.definitionName,version:(g=e.manifest)==null?void 0:g.definitionVersion},r)});let d=((h=c.featureSets.find(m=>m.sourceInformation.type==="local-cache"))==null?void 0:h.features.filter(m=>m.included))||[];if(!d.length){await gt.window.showInformationMessage("No container features available for the current base image.",{modal:!0});return}let p=await l_(a,d,d.filter(m=>m.value!==!1));try{if(p){let m=o.text,g=o.text;for(let v of d){let w=p[v.id];if(w!==Xs(v)){let b=["features",v.id];if(w!==!1&&typeof v.value=="object"){let S=ti(v);S&&b.push(S)}let C=Rt(g,b,w!==!1?w:void 0,{formattingOptions:{}});g=Vt(g,C)}}m!==g&&await Nt(n).applyEdits(o.uri,[{content:g,offset:0,length:o.text.length}],o.text)}}finally{s.dispose()}}async function Bg(t,e,r,n){var u,f;if(!Bf())return e;let i=e.configText,o=(u=t.existingConfig)==null?void 0:u.object.features;if(!t.replaceExistingConfig&&o){r=se(W({},r),{features:W(W({},r.features),o)});for(let d in o){let p=Rt(i,["features",d],o[d],{formattingOptions:{}});i=Vt(i,p)}}let s=Ko(process.platform,Ee.file(e.configFilePath)),a=await c_(t,s,r,gH.basename(e.definitionFolder)),c=((f=((a==null?void 0:a.featureSets)||[]).find(d=>d.sourceInformation.type==="local-cache"))==null?void 0:f.features.filter(d=>d.included))||[],l=await l_(t,c,c.filter(d=>d.value!==!1),!0);if(!!l){if(l==="back")return n();for(let d of c){let p=l[d.id];if(p!==Xs(d)){let h=["features",d.id];if(p!==!1&&typeof d.value=="object"){let g=ti(d);g&&h.push(g)}let m=Rt(i,h,p!==!1?p:void 0,{formattingOptions:{}});i=Vt(i,m)}}return se(W({},e),{configText:i})}}async function c_(t,e,r,n){var l;let i;if("image"in r)i=await Vf(r.image);else if(lt(r)){let u=((l=r.build)==null?void 0:l.args)||{},f=Kt(e,r),d=await s_(e,f,u);i=d==null?void 0:d.manifest}else if("dockerComposeFile"in r){let u=await sr(e,r);if(u.length&&await e.isFile(u[0])){let f=await e.readFile(u[0]),d=_r(f.toString()),p=await vH(e,u,t.workspace.rootFolderPath,r.configFilePath,r,d);i=p==null?void 0:p.manifest}i=i||n&&await f_(n)||void 0}let o=await il(),s=Rn({distFolder:o}),a={featureSets:[]},c=await Ru(s,t.output);if(!!c)return c=se(W({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=await Fh(t,r,a,async()=>({"com.visualstudio.code.devcontainers.id":i==null?void 0:i.definitionName,version:i==null?void 0:i.definitionVersion})),a}var Uf={iconPath:new gt.ThemeIcon("check-all"),tooltip:"Finish"};async function l_(t,e,r,n=!1){if(!e.length)return{};let i={iconPath:new gt.ThemeIcon("info"),tooltip:"Open Documentation"},o=t.quickPick.onDidTriggerItemButton(l=>{let u=l.item.feature.documentationURL;gt.env.openExternal(gt.Uri.parse(u))}),s=await qn(t.quickPick,e.map(l=>({label:l.name,picked:r.indexOf(l)!==-1,buttons:l.documentationURL?[i]:void 0,feature:l})).sort((l,u)=>l.label.localeCompare(u.label)),"Select additional features to install",void 0,!0,n?[gt.QuickInputButtons.Back,Uf]:[Uf]);if(o.dispose(),!s)return;if(s.button===gt.QuickInputButtons.Back)return"back";let a=s.pick.map(l=>l.feature),c={};for(let l of e){let u=a.indexOf(l)!==-1;c[l.id]=u?Xs(l)||k1(l):!1}return s.button===Uf?c:ble(t,c,a,()=>l_(t,e,a))}function Cle(t){let e=ti(t),r=e&&t.options&&t.options[e];return!!r&&r.type==="string"&&("enum"in r||"proposals"in r)}async function ble(t,e,r,n){let i=r.filter(Cle);return async function o(s,a,c){if(!a.length)return s;let l=a[0],u=l.options[ti(l)],f=("enum"in u&&u.enum||"proposals"in u&&u.proposals||[]).map(h=>({label:String(h),value:h,picked:Xs(l)===h})),d=f.length===1?{pick:f[0],button:"ok"}:await qn(t.quickPick,f,u.description||"Select a value",void 0,void 0,[gt.QuickInputButtons.Back,Uf],"proposals"in u);if(!d)return;if(d.button===gt.QuickInputButtons.Back)return c();let p=se(W({},s),{[l.id]:d.pick.value});return d.button===Uf?s:o(p,a.slice(1),()=>o(s,a,c))}(e,i,n)}var wH="remote.containers.experimentalContainerFeatures";function CH(){return gt.commands.executeCommand("setContext","experimentalContainerFeatures",Bf()),gt.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(wH)&&gt.commands.executeCommand("setContext","experimentalContainerFeatures",Bf())})}function Bf(){return gt.workspace.getConfiguration().get(wH,!0)}var bH=K(require("path"));function EH(t){return{provideCompletionItems(e,r,n){let i=Tk(e.getText(),e.offsetAt(r)),o=e.getWordRangeAtPosition(r)||new ve.Range(r,r);if(i.path[0]==="extensions"){let s=Xe(e.getText());return s.configFilePath=e.uri,Ele(s,o)}if(Bf()&&i.path[0]==="features"){let s=Xe(e.getText());s.configFilePath=e.uri;try{return _le(t,s,i,o)}catch(a){console.error(a)}}return[]}}}function Ele(t,e){let r=t&&t.extensions||[];if(Array.isArray(r)){let n=ve.extensions.all.filter(i=>!(i.id.startsWith("vscode.")||i.id==="Microsoft.vscode-markdown"||r.indexOf(i.id)>-1));if(n.length)return n.map(i=>{let o=new ve.CompletionItem(i.id),s=`"${i.id}"`;return o.kind=ve.CompletionItemKind.Value,o.insertText=s,o.range=e,o.filterText=s,o})}}async function _le(t,e,r,n){var o,s;let i=e&&e.features||{};if(typeof i=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e=se(W({},e),{configFilePath:e.configFilePath.with({scheme:qt.scheme,authority:""})});let h=ve.env.remoteName&&ve.env.remoteName!=="test"?"linux":process.platform,m=((o=(ve.workspace.workspaceFolders||[])[0])==null?void 0:o.uri)||Ee.file(process.cwd());t=se(W({},t),{fileHost:await Ko(h,m)})}let{path:a}=t.fileHost,c=Oe(e.configFilePath,t.fileHost.platform),l=a.basename(c),u=a.dirname(c),f=Ue(a,l===".devcontainer.json"?u:a.dirname(u)),d=await c_(se(W({},t),{workspace:f}),t.fileHost,e),p=((s=((d==null?void 0:d.featureSets)||[]).find(h=>h.sourceInformation.type==="local-cache"))==null?void 0:s.features.filter(h=>h.included))||[];if(r.path.length===2)if(r.isAtPropertyKey){let h=p.filter(m=>!(m.id in i));if(h.length)return h.map(m=>{let g=new ve.CompletionItem(m.id),v=`"${m.id}": `;return g.kind=ve.CompletionItemKind.Property,g.insertText=v,g.range=n,g.filterText=v,g})}else{let h=r.path[1],m=p.find(g=>g.id===h);if(m){let g=ti(m),v=g&&(m.options||{})[g]||{type:"boolean",description:"Set to true to install."},w=(v.type==="string"?("enum"in v&&v.enum||"proposals"in v&&v.proposals||[""]).map(b=>`"${b}"`):["true","false"]).map(b=>({label:b,text:b}));return w.push({label:"{}",text:new ve.SnippetString(`{
	$1
}$0`)}),w.map(({label:b,text:C},S)=>{let _=new ve.CompletionItem(b);return _.kind=ve.CompletionItemKind.Value,_.insertText=C,_.range=n,_.sortText=`${S}_${b}`,_})}}else if(r.path.length===3){let h=r.path[1],m=p.find(g=>g.id===h);if(m){let g=m.options||{};if(r.isAtPropertyKey)return Object.keys(g).filter(v=>!(v in(i[h]||{}))).map(v=>{let w=new ve.CompletionItem(v),b=`"${v}": `;return w.kind=ve.CompletionItemKind.Property,w.insertText=b,w.range=n,w.filterText=b,w.detail=g[v].description,w});{let v=r.path[2],w=g[v];if(w)return(w.type==="string"?("enum"in w&&w.enum||"proposals"in w&&w.proposals||[""]).map(C=>`"${C}"`):["true","false"]).map((C,S)=>{let _=new ve.CompletionItem(C),P=C;return _.kind=ve.CompletionItemKind.Value,_.insertText=P,_.range=n,_.filterText=P,_.sortText=`${S}_${C}`,_})}}}}}async function _H(t){let e=await d_(t);if((e==null?void 0:e.scheme)===qt.scheme){let r=Oe(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await ve.window.showTextDocument(ve.Uri.parse(e.toString()))}async function d_(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await ve.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await Hf(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await ve.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function SH(t,e){let r=await d_(t);if(r){let n=Nt(t.fileHost);r.scheme==="file"&&!await pt(r.fsPath)?await on(An,r,[],Ri):r.scheme==="vscode-remote"&&(n=new jg);let i=await n.readDocument(r);if(i){let s=Xe(i).extensions||[],a=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(s.indexOf(e)===-1){s.push(e);let c=Rt(i,["extensions"],s,{formattingOptions:{}});await n.applyEdits(r,c,i),await ve.window.showInformationMessage(`Extension has been added to the ${a}.`)}else await ve.window.showInformationMessage(`Extension is already included in the ${a}.`)}}}async function xH(t,e){var s,a;let r=await ve.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,i=r.port,o=await d_(t);if(o){let c=Nt(t.fileHost);o.scheme==="file"&&!await pt(o.fsPath)?await on(An,o,[],Ri):o.scheme==="vscode-remote"&&(c=new jg);let l=await c.readDocument(o);if(l){let f=(s=Xe(l).portsAttributes)!=null?s:{},d=(a=f[`${i}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(f&&d&&d.label===n)await ve.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{d.label=n,f[`${i}`]=d;let h=Rt(l,["portsAttributes"],f,{formattingOptions:{}});await c.applyEdits(o,h,l),await ve.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}function PH(t,e){let r=ve.languages.createDiagnosticCollection("devcontainer-features");return ve.window.activeTextEditor&&p_(ve.window.activeTextEditor.document,r,e.output),t.subscriptions.push(ve.workspace.onDidChangeTextDocument(n=>{n&&p_(n.document,r,e.output)})),t.subscriptions.push(ve.workspace.onDidOpenTextDocument(n=>{n&&p_(n,r,e.output)})),r.dispose}function p_(t,e,r){if(t&&bH.default.basename(t.uri.fsPath)==="devcontainer.json"){let n=Xe(t.getText()),i=n==null?void 0:n.features;if(!i){e.clear();return}let o=[];Object.keys(i).forEach(s=>{let a=Nh(s,r);if(!a||a.sourceInformation.type!=="local-cache")for(let c=0;c<t.lineCount;c++){let l=t.lineAt(c);if(l.text.includes(s)){let u=l.text.indexOf(s),f=u+s.length,d=a==null?void 0:a.sourceInformation,p="Expected feature identifier to contain only alphanumeric and/or the '-' characters.",h=ve.DiagnosticSeverity.Error;d&&(p=`WARNING: Provided feature syntax is currently experimental and is subject to change.
`,h=ve.DiagnosticSeverity.Warning);let m={message:p,severity:h,range:new ve.Range(new ve.Position(c,u),new ve.Position(c,f))};o.push(m);break}}if(a&&a.sourceInformation.type==="github-repo")for(let c=0;c<t.lineCount;c++){let l=t.lineAt(c),u=a.sourceInformation;if(l.text.includes(s)){let f=l.text.indexOf(s),d=f+s.length,p={message:"Feature-set source can be found on GitHub.",range:new ve.Range(new ve.Position(c,f),new ve.Position(c,d)),code:{target:ve.Uri.parse(`https://github.com/${u.owner}/${u.repo}`),value:"github-repo"},severity:ve.DiagnosticSeverity.Information};o.push(p);break}}}),o.length>0?e.set(t.uri,o):e.clear()}}async function TH(t,e){return PH(t,e),{async openConfiguration(){return _H(e)},async createConfiguration(){return Hf(e)},async addExtensionToConfiguration(r){return SH(e,r)},async addPortLabelToConfiguration(r){return xH(e,r)},async configureContainerFeatures(){return yH(e)},createCompletionItemProvider(){return EH(e)}}}async function Hf(t){let{fileHost:e}=t,r=await Sle();if(r){let n=Oe(r,e.platform),i=Ue(e.path,n),o=await Sp(e,i);if(o){let a="Continue";if(await Ze.window.showInformationMessage(`The workspace could fail to open in a container: ${o}`,{modal:!0},a)!==a)return!1}let s=await Wf(t,i);if(s){let a=await e.toCommonURI(s);return a&&Ze.window.showTextDocument(Ze.Uri.parse(a.toString())),!0}}return!1}async function Sle(){let t=Ze.workspace.workspaceFile,e=Ze.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await $g();return}r=t}else if(e&&e.length)if(e.length>1){let n=await Ze.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function qn(t,e,r,n,i,o,s){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!i,Array.isArray(e))if(t.items=e,i)t.selectedItems=e.filter(l=>l.picked);else{let l=e.find(u=>u.picked);l&&(t.activeItems=[l])}t.buttons=o?Array.isArray(o)?o:[Ze.QuickInputButtons.Back]:[];let a=[],c=new Promise((l,u)=>{if(Array.isArray(e)||(t.busy=!0,e.then(f=>{if(t.busy=!1,t.items=f,i)t.selectedItems=f.filter(d=>d.picked);else{let d=f.find(p=>p.picked);d&&(t.activeItems=[d])}},f=>{t.busy=!1,u(f)})),a.push(t.onDidAccept(()=>{let f=i?t.selectedItems.slice():t.selectedItems[0];l(Array.isArray(o)?{pick:f,button:"ok"}:f),a.forEach(d=>d.dispose())})),t.buttons.length&&a.push(t.onDidTriggerButton(f=>{let d=i?t.selectedItems.slice():t.activeItems[0];l(o===!0?"back":{pick:d,button:f}),a.forEach(p=>p.dispose())})),a.push(t.onDidHide(()=>{a.forEach(f=>f.dispose()),t.dispose(),l(void 0)})),s){let f;a.push(t.onDidChangeValue(d=>{let p=d.trim().toLowerCase(),h=!p||t.items.find(m=>m.label.toLowerCase()===p);if(h&&f)t.items=t.items.filter(m=>m!==f),f=void 0;else if(!h){let m=t.items.filter(g=>g!==f);m.push(f={label:`Other: ${d}`,value:d}),t.items=m}}))}});return t.show(),c}var h_={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Wf(t,e){let{fileHost:r,telemetry:n}=t,i=await n,o=await u_(r,e),a=!!gc(o==null?void 0:o.object)&&!!o;if(a){Vr(i,"exists");let l=Oe(o.uri,r.platform);if(!await Ze.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,l)}' file already exists.`,{modal:!0},"Continue")){let f=await r.toCommonURI(l);f&&Ze.window.showTextDocument(Ze.Uri.parse(f.toString()));return}}let c=Ze.window.createQuickPick();return c.ignoreFocusOut=!0,m_(se(W({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:o,telemetry:i,workspace:e,codespaces:!!t.codespaces}))}async function m_(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:i}=t,o=await e.readDir(r.rootFolderPath),s=o.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=o.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:$H(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),l=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:$H(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Hg(t,void 0);let f={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},d=await qn(t.quickPick,[f,...c,...l,...i?[h_]:[]],"How would you like to create your container configuration?");if(!d){Vr(n,"canceled");return}if(d.type==="help"){Vr(n,"help"),Ze.env.openExternal(i);return}if(d.type==="predefined")return Hg(t,()=>m_(t));if(d.type==="dockerComposeFile")return Tle(t,d.dockerComposePath,()=>m_(t));if(d.type==="dockerfile")return Ale(t,d.dockerfilePath)}function DH(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function xle(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,i=t.stats||(t.stats=await mH(e,r)),o=await UH(t.codespaces,i_.bind(null,i)),s=[];i.mostPopularFileType.length===0?s=await Rle(t.codespaces):s=o.filter(c=>c.recommendationScore&&c.recommendationScore>0&&DH(c));let a;return s.length>0?a=[{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"},...n?[h_]:[],...s]:a=[...n?[h_]:[],...o],{items:a,stats:i}}async function Hg(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,i=xle(t),{infoButton:o,sub:s}=OH(t),a=i.then(l=>l.items.map(u=>u.type==="baseConfiguration"?se(W({},u),{buttons:[o]}):u)),c=await qn(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!!e);if(s.dispose(),c==="back")return e();if(!c){Vr(r,"canceled");return}if(c.type==="help"){Vr(r,"help"),Ze.env.openExternal(n);return}if(c.type==="showAll")return RH(t,(await i).stats,()=>Hg(t,e));if(c.type==="baseConfiguration")return NH(t,c,()=>Hg(t,e))}async function RH(t,e,r){let{telemetry:n}=t,i=await UH(t.codespaces,i_.bind(null,e)),{infoButton:o,sub:s}=OH(t),a=i.map(l=>l.type==="baseConfiguration"?se(W({},l),{buttons:[o]}):l),c=await qn(t.quickPick,a,"Select a container configuration definition",void 0,void 0,!0);if(s.dispose(),c==="back")return r();if(c&&c.type==="baseConfiguration")return NH(t,c,()=>RH(t,e,r));Vr(n,"canceled")}function OH(t){let e={iconPath:new Ze.ThemeIcon("info"),tooltip:"Open Documentation"},r=t.quickPick.onDidTriggerItemButton(n=>{let i=`https://github.com/microsoft/vscode-dev-containers/blob/main/containers/${Fe.basename(n.item.definitionFolder)}/README.md`;Ze.env.openExternal(Ze.Uri.parse(i))});return{infoButton:e,sub:r}}async function NH(t,e,r){let{telemetry:n}=t,i=await Ple(t,e);if(!i){Vr(n,"canceled");return}return i==="back"?r():(Vr(n,"definition",Fe.basename(i.definitionFolder)),g_(t,i))}async function g_(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await Fle(t,e)}finally{r.hide()}}async function Ple(t,e){let r=Xe(e.configText);if(r.configFilePath=Ee.file(e.configFilePath),lt(r))return kle(t,e,r,async()=>"back",(n,i)=>LH(t,n,r,i));if("dockerComposeFile"in r){let n=Ko(process.platform,Ee.file(e.configFilePath));return Ile(t,e,n,r,async()=>"back",(i,o)=>FH(t,i,n,r,o))}return Bg(t,e,r,async()=>"back")}async function kle(t,e,r,n,i){var c;let o=Kt({platform:process.platform},r),s=((c=r.build)==null?void 0:c.args)||{},a=await MH(o,s);return async function l(u,f,d){if(!f.length)return i(se(W({},e),{configText:u}),d);let p=f[0],h=await qn(t.quickPick,p.items,p.placeholder,void 0,void 0,!0);if(!h)return;if(h==="back")return d();let m=u;if(h.value!==p.default){let g=Rt(m,["build","args",p.name],h.value,{formattingOptions:{}});m=Vt(m,g)}return l(m,f.slice(1),()=>l(u,f,d))}(e.configText,a,n)}async function LH(t,e,r,n){var u;let i=Kt({platform:process.platform},r),o=((u=r.build)==null?void 0:u.args)||{},{options:s,hasOptions:a}=await qH(i,o),c=s.length?await qn(t.quickPick,s,a?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!c)return;if(c==="back")return n();let l=e.configText;for(let f of s){let d=c.indexOf(f)!==-1;if(d!==f.default){let p=Rt(l,["build","args",f.name],String(d),{formattingOptions:{}});l=Vt(l,p)}}return Bg(t,se(W({},e),{configText:l}),r,s.length?()=>LH(t,e,r,n):n)}async function Ile(t,e,r,n,i,o){var a;let s=await sr(r,n);if(s.length&&await r.isFile(s[0])){let c=e.files||{},l=c[s[0]]||(await r.readFile(s[0])).toString(),u=_r(l),f=((u==null?void 0:u.services)||{})[n.service]||{},d=t.workspace.rootFolderPath,p=Ug(r,s,d,f);if(p){let h=n.configFilePath,m=Oi(r,h,p),g=((a=f.build)==null?void 0:a.args)||{},v=await MH(m,g),w;return async function b(C,S){if(!C.length)return w&&(c[s[0]]=w.toString()),o(se(W({},e),{files:c}),S);let _=C[0],P=await qn(t.quickPick,_.items,_.placeholder,void 0,void 0,!0);if(!!P){if(P==="back")return S();if(P.value!==_.default){w||(w=Wi.parseDocument(l,{lineCounter:new Wi.LineCounter}));let I=w.getIn(["services","app","build"]);I.has("args")||I.set("args",new Wi.YAMLMap),I.get("args").set(_.name,P.value)}return b(C.slice(1),()=>b(C,S))}}(v,i)}}return o(e,i)}async function FH(t,e,r,n,i){var c;let o=!1,s=e.files||{},a=await sr(r,n);if(a.length&&await r.isFile(a[0])){let l=s[a[0]]||(await r.readFile(a[0])).toString(),u=_r(l),f=((u==null?void 0:u.services)||{})[n.service]||{},d=t.workspace.rootFolderPath,p=Ug(r,a,d,f);if(p){let h=n.configFilePath,m=Oi(r,h,p),g=((c=f.build)==null?void 0:c.args)||{},{options:v,hasOptions:w}=await qH(m,g);o=!!v.length;let b=v.length?await qn(t.quickPick,v,w?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!b)return;if(b==="back")return i();let C;for(let S of v){let _=b.indexOf(S)!==-1;if(_!==S.default){C||(C=Wi.parseDocument(l,{lineCounter:new Wi.LineCounter}));let P=C.getIn(["services","app","build"]);P.has("args")||P.set("args",new Wi.YAMLMap),P.get("args").set(S.name,String(_))}}C&&(s[a[0]]=C.toString())}}return Bg(t,se(W({},e),{files:s}),n,o?()=>FH(t,e,r,n,i):i)}async function MH(t,e){let r=(await Le(t.fsPath)).toString(),n=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);return o.map(([,s,a,c,l])=>{let u=e[c]||l,f=a.trim().split(",").map(p=>p.trim()).map(p=>({label:p,description:p===u?"(default)":void 0,value:p})),d=f.findIndex(p=>p.value===u);return d!==-1&&f.unshift(...f.splice(d,1)),{placeholder:s||c,name:c,default:u,items:f}})}async function qH(t,e){let r=(await Le(t.fsPath)).toString(),n=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,i,o=[];for(;i=n.exec(r);)o.push(i);let s=o.map(([,c,l,u,f])=>{let p=(e[u]||f)==="true";return{type:c.toLowerCase(),label:l||u,picked:p,name:u,default:p}}),a=s.some(c=>c.type==="option");return a&&s.filter(c=>c.type==="install").forEach(c=>c.label=`Install ${c.label}`),{options:s,hasOptions:a}}function $H(t,e){let r=Ze.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(i=>t.platform==="win32"?e.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):e.startsWith(i.uri.fsPath));return n&&n.name}async function Ale(t,e){let{fileHost:r,workspace:n,telemetry:i}=t,s=(await Vg()).find(a=>Fe.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=Fe.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==Fe.sep?a.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):a,l=r.path.resolve(n.configFolderPath,c),u=r.path.relative(r.path.dirname(l),e),f=r.platform==="win32"?u.replace(/\\/g,"/"):u,d="dockerFile"in Xe(s.configText)?["dockerFile"]:["build","dockerfile"],p=Rt(s.configText,d,f,{formattingOptions:{}}),h=Vt(s.configText,p);return Vr(i,"dockerFile"),g_(t,se(W({},s),{configText:h}))}else{Vr(i,"existingDockerfileDefinitionNotFound");return}}async function Tle(t,e,r){let{fileHost:n,workspace:i,telemetry:o}=t,s=(await n.readFile(e)).toString(),a=_r(s);if(!a){await Ze.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,l=Object.keys(a&&a.services||{}),u=l.length<2?l[0]||"":await qn(t.quickPick,l.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(u==="back")return r();if(u===void 0){Vr(o,"canceled");return}let f=typeof u=="string"?u:u.label,p=(await Vg()).find(h=>Fe.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=Fe.relative(p.definitionFolder,p.configFilePath),m=n.path.sep!==Fe.sep?h.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,n.path.sep):h,g=n.path.resolve(i.configFolderPath,m),v=n.path.relative(n.path.dirname(g),e),w=n.platform==="win32"?v.replace(/\\/g,"/"):v,b=Xe(p.configText).dockerComposeFile,C=Array.isArray(b)?b.slice(1):[],S=[w,...C],_=Rt(p.configText,["dockerComposeFile"],S,{formattingOptions:{}}),P=Vt(p.configText,_),I=Rt(P,["service"],f,{formattingOptions:{}}),A=Vt(P,I),R=C.reduce((H,X)=>(H[So({platform:process.platform},{configFilePath:Ee.file(p.configFilePath)},X).fsPath]=!0,H),{}),F=se(W({},p),{configText:A,async copyFile(H,X){if(R[H]){let J=this.files&&this.files[H]||(await Le(H)).toString(),Y=_r(J);Y.version&&c&&Y.version!==c&&(J=J.replace(new RegExp(`^(version:.*)(${Y.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let te=Object.keys(Y&&Y.services||{});te.length&&(J=J.replace(new RegExp(`\\b${te[0]}\\b`),f)),await n.writeFile(X,Buffer.from(J))}else{let J=this.files&&this.files[H]?Buffer.from(this.files[H]):await Le(H);await n.writeFile(X,J)}}});return Vr(o,"dockerComposeFile"),g_(t,F)}else{Vr(o,"existingDockerComposeDefinitionNotFound");return}}function Vr(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function Dle(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var jH=["docker-existing-docker-compose","docker-existing-dockerfile"];async function UH(t,e){let r=(await Vg()).filter(n=>jH.indexOf(Fe.basename(n.definitionFolder))===-1);return t&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),e?(await e(r),r.sort(Dle)):r.sort((n,i)=>n.label.localeCompare(i.label))}async function Rle(t){let e=(await Vg()).filter(r=>jH.indexOf(Fe.basename(r.definitionFolder))===-1);return e=e.filter(r=>DH(r)),t&&(e=e.filter(r=>!/^\s*no\b/i.test(r.metaData.get("codespaces")||"yes"))),e.sort((r,n)=>r.label.localeCompare(n.label))}async function Vg(){let t=new IH.default,e=await il(),r=Fe.join(e,"node_modules","vscode-dev-containers","containers"),n=Fe.join(e,"node_modules","vscode-dev-containers","containers-readmes"),i=await Kr(r);return(await Promise.all(i.map(async s=>{var w;let a=Fe.join(r,s),c=await ph(a),l=c&&await Lle(c);if(!l)return;let u=Xe(l);u.configFilePath=Ee.file(c);let[,f,d]=((w=u.name)==null?void 0:w.match(/^(.*)(\([^)]*\))$/))||[],p=(f==null?void 0:f.trim())||u.name||s,h=d,m,g=Fe.join(n,s,"README.md"),v=new Map;if(await pt(g))try{let b=await Le(g,{encoding:"utf8"}),C=/\#\s*summary.*\n*(.*)/i.exec(b);if(C){let S=t.render(C[1]);m=Ole(S);let _=m.indexOf(". ");_!==-1&&(m=m.substr(0,_+1))}v=Nle(b)}catch(b){console.error(b)}return{label:p,description:h,type:"baseConfiguration",detail:m,definitionFolder:a,configText:l,configFilePath:c,metaData:v}}))).filter(s=>!!s)}function Ole(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function Nle(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,i=/^\s*\|/gi,o={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(i))break;for(let c in o){let l=a.match(o[c]);l&&l[1]&&e.set(c,l[1])}}return e}async function Lle(t){return await pt(t)?(await Le(t)).toString():void 0}async function Fle(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:i,existingConfig:o,output:s}=t,a=n.configFolderPath,c="Skip",l=(await HH(e.definitionFolder)).map(d=>Fe.relative(e.definitionFolder,d)),u,f;for(let d of l){let p=Fe.join(e.definitionFolder,d),h=p===e.configFilePath,m=r.path.sep!==Fe.sep?d.replace(Fe.sep===Fe.win32.sep?/\\/g:/\//g,r.path.sep):d,g=r.path.join(a,m);if(h&&!i&&o){let v=Xe(e.configText);try{f=Mle(r,v,g,o)}catch(w){await $le(w,r,g,m,s);return}g=Oe(o.uri,r.platform)}else if(await r.isFile(g)){let v=await Ze.window.showInformationMessage(`File '${m}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!v)return;if(v===c)continue}if(await r.mkdirp(r.path.dirname(g)),h)u=g,await r.writeFile(g,Buffer.from(f||e.configText));else if(e.copyFile)await e.copyFile(p,g);else{let v=e.files&&e.files[p]?Buffer.from(e.files[p]):await Le(p);await r.writeFile(g,v)}}return u}function Mle(t,e,r,n){let i=n.text,o=Oe(n.uri,t.platform);if("image"in e)i=bt(i,["image"],e.image);else if("dockerFile"in e){let u=ol(t,r,o,e.dockerFile);if(i=bt(i,["dockerFile"],u),e.context){let f=ol(t,r,o,e.context);i=bt(i,["context"],f)}}else if("build"in e){let u=ol(t,r,o,e.build.dockerfile);if(i=bt(i,["build","dockerfile"],u),e.build.context){let f=ol(t,r,o,e.build.context);i=bt(i,["build","context"],f)}i=bt(i,["build","target"],e.build.target),i=bt(i,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let u=qle(t,r,o,e.dockerComposeFile);i=bt(i,["dockerComposeFile"],u),i=bt(i,["service"],e.service),i=bt(i,["workspaceFolder"],e.workspaceFolder)}e.features&&(i=bt(i,["features"],e.features));let s=y_(e.settings,n.object.settings);i=bt(i,["settings"],s);let a=v_(n.object.forwardPorts,e.forwardPorts);i=bt(i,["forwardPorts"],a);let c=v_(n.object.extensions,e.extensions);if(i=bt(i,["extensions"],c),"image"in e||lt(e)){let u=v_(n.object.mounts,e.mounts);i=bt(i,["mounts"],u);let f=y_(e.containerEnv,n.object.containerEnv);i=bt(i,["containerEnv"],f),i=bt(i,["containerUser"],e.containerUser);let d=BH(n.object.runArgs,e.runArgs);i=bt(i,["runArgs"],d)}i=bt(i,["postCreateCommand"],e.postCreateCommand);let l=y_(e.remoteEnv,n.object.remoteEnv);return i=bt(i,["remoteEnv"],l),i=bt(i,["remoteUser"],e.remoteUser),i}function bt(t,e,r){if(r===void 0)return t;let n=Rt(t,e,r,{formattingOptions:{}});return Vt(t,n)}function qle(t,e,r,n){return Array.isArray(n)?n.map(i=>ol(t,e,r,i)):ol(t,e,r,n)}function ol({path:t},e,r,n){let i=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),i)||"."}function v_(t,e){var r;return(r=BH(t,e))==null?void 0:r.filter((n,i,o)=>o.indexOf(n)===i)}function BH(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function y_(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function u_(t,e){let r=await dh(t,e.configFolderPath);if(!r)return;let n=await Nt(t).readDocument(r);if(!n)return;let i=Xe(n);return{uri:r,text:n,object:i}}async function HH(t){let e=await Kr(t);return[].concat(...await Promise.all(e.map(async r=>{let n=Fe.join(t,r);return(await(0,AH.promisify)(kH.lstat)(n)).isDirectory()?HH(n):n})))}async function $le(t,e,r,n,i){i.write(Re(t&&(t.stack||t.message)));let o=await e.toCommonURI(r),s=await Ze.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...o?["Open devcontainer.json"]:[]);o&&s&&Ze.window.showTextDocument(Ze.Uri.parse(o.toString()))}async function Vf(t){return(await jle()).find(r=>{var n,i;return(i=(n=r.build)==null?void 0:n.tags)==null?void 0:i.some(o=>{let c=`^mcr.microsoft.com/vscode/devcontainers/${o.split(/\$\{[^}]*\}/).map(l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(c).test(t)})})}async function jle(){let t=Fe.join(await il(),"node_modules","vscode-dev-containers","manifests");return(await Promise.all((await Kr(t)).map(e=>f_(e,t)))).filter(Boolean)}async function f_(t,e){e=e||Fe.join(await il(),"node_modules","vscode-dev-containers","manifests");let r=Fe.join(e,t,"definition-manifest.json");if(await pt(r)){let n=(await Le(r)).toString(),i=Xe(n);return i.definitionName=t,i}}async function il(){let t=await hl(Fe.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await hl(Fe.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return Fe.join(__dirname,...t)}async function VH(t,e,r,n,i,o){let s=pn(r);if(Jt(s)&&!await Be.workspace.requestWorkspaceTrust({message:nf}))return Gt(s.hostPath)?(await Be.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await Be.commands.executeCommand("remote-containers.reopenInWSL")):(await Be.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await Be.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=ln(s);return a&&!await of(t,s.repositoryPath)?(await Be.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):se(W({},await Ule(s,t,i,o,e,r,n)),{isTrusted:a||void 0})}async function Ule(t,e,r,n,i,o,s){let{log:a,logFilePath:c}=r,l="hostPath"in t&&Gt(t.hostPath)&&!!Be.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Be.commands.executeCommand("setContext","canReopenInWSL",!0);let u=t.settings,f="localDocker"in t&&t.localDocker,d=!!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!f)&&(!!Be.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Be.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));d&&Be.commands.executeCommand("setContext","canReopenInSSH",!0);let p=!(u&&"host"in u&&u.host&&u.host.startsWith("ssh://")&&!f);p&&Be.commands.executeCommand("setContext","canReopenLocally",!0);let h;return Be.window.withProgress({location:Be.ProgressLocation.Notification,title:Bc,cancellable:!1},async m=>{let g=Zn(e.extensionPath,ji),{cliHost:v,originalCwd:w}=await Ble(t,e.extensionPath,Hi(),g,i.product,a),b=W(W({},await g),Ic(v,t.settings)),C=W(W({},v.env),b),S=await Uc({authority:o,extensionContext:e,sessionStart:r.sessionStart,progress:m,cliHost:v,env:C,cwd:v.cwd,isLocalContainer:im(b),telemetry:i,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),_={async createConfiguration(P,I){return Wf({fileHost:I,telemetry:i,output:a,existingFilesLearnMoreLink:Xu,predefinedDefinitionsLearnMoreLink:Zu,openConfigurationCommandId:Qu},Ue(w_.posix,P))},async showError(P,...I){return await Be.window.showErrorMessage(P,{modal:!0},...I)}};return h={common:S,parsedAuthority:t,dockerCLI:Ln(),dockerComposeCLI:ri({exec:S.cliHost.exec,env:W(W({},b),Tn(b)),output:S.output},Ln(),$c()),dockerEnv:b,workspaceMountConsistencyDefault:Am(),updateRemoteUserUIDOnMacOS:Tm(),cacheMount:Dm()?"volume":"none",configurationTracking:Im(e.workspaceState),removeOnStartup:await fq(e,o),buildNoCache:await pq(e,o),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:di(),originalCwd:w,configProvider:_},await om(h),q1(h)}).then(m=>(s(async g=>{await dq(e,g&&m.dockerContainerId||!1),await tf(e,g==="rebuildNoCache"?o:!1)}),Bi(i,C_(t),"success",m.config,m.properties),m),m=>{var P;let g=m instanceof ue?m:new ue({description:"An error occurred setting up the container.",originalError:m});ln(t)&&(g.volumeName=t.volumeName,g.volumeName===fn&&(g.volumeName=Ur(t.repositoryPath).uniqueVolumeName),g.repositoryPath=t.repositoryPath,g.folderPath=t.folder),Bi(i,C_(t),"failure",g.config,g.containerProperties,g);let v="onTheSide",w=(P=g.data)==null?void 0:P.fileWithError,b=w&&(h==null?void 0:h.common.cliHost.path.basename(w))||"devcontainer.json",C=Jt(t)?[{id:"openFileWithErrorLocally",title:`Open ${b} Locally`,isLastAction:!0,applicable:async(I,A)=>p&&!(A&&l),async execute(){let I=h==null?void 0:h.common.cliHost,A=w?I.type==="wsl"?await I.toCommonURI(w):Ee.file(w):void 0;await rf(e,t.hostPath,A,c,v);let R=Be.Uri.file(t.hostPath);await Be.commands.executeCommand("vscode.openFolder",R)}},{id:"openFileWithErrorinWSL",title:`Open ${b} in WSL`,isLastAction:!0,applicable:async()=>l,async execute(){let I=Be.Uri.parse((await ec(t.hostPath,a)).toString());await rf(e,I.path,w?I.with({path:w}):void 0,c,v),await Be.commands.executeCommand("vscode.openFolder",I)}},{id:"openFileWithErrorinSSH",title:`Open ${b} in SSH`,isLastAction:!0,applicable:async()=>d,async execute(){let I=t.settings,A=Be.Uri.parse(Kl(I.host,t.hostPath).toString());await rf(e,A.path,w?A.with({path:w}):void 0,c,v),await Be.commands.executeCommand("vscode.openFolder",A)}}]:[],S=ln(t)?t.inspectVolume?[Oo]:[{id:"reopenInRecoveryContainer",title:`Open ${b} in Recovery Container`,isLastAction:!0,applicable:(I,A)=>!0,execute:async I=>{await rf(e,t.repositoryPath,w?Ee.file(w).with({scheme:"vscode-remote"}):void 0,c,v),await Be.commands.executeCommand("remote-containers.inspectVolume",I.volumeName,I.repositoryPath,I.folderPath)}},Oo,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(I,A)=>!A,async execute(){Be.env.openExternal(Be.Uri.parse(t.repositoryPath))}}]:[],_=Pc(t)?[Oo]:[];return g.actions=[...Tc,ia,wL,...C,...S,..._,Ac,na],Hle(g),No(g,C_(t),i,!0,r)})}async function Ble(t,e,r,n,i,o){let{settings:s}=t,a=s&&"host"in s&&s.host||void 0;if(Jt(t)){let c=Ue(w_,t.hostPath),l=c.rootFolderPath,u=await Pn(a,c.rootFolderPath,fi,Ui(),e,r,i,o,{sshAskpassEnv:n,settings:jc(),localDocker:t.localDocker});return u.cwd!==c.rootFolderPath&&(c=Ue(u.path,c.isWorkspaceFile?u.path.join(u.cwd,w_.basename(t.hostPath)):u.cwd)),o.write(`Setting up container for folder or workspace: ${c.workspaceOrFolderPath}\r
`),nm(o,t.settings),t.localDocker&&o.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:u,originalCwd:l}}else{let c=process.cwd();return{cliHost:await Pn(a,c,fi,Ui(),e,r,i,o,{sshAskpassEnv:n,settings:jc()}),originalCwd:c}}}function C_(t){return Jt(t)?"config":ln(t)?t.inspectVolume?"volume":"repository":"volume"}function Hle(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){Be.env.openExternal(Be.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Yo=K(require("vscode"));var WH=K(require("util"));var $n=K(require("path"));async function GH(t,e,r){let{common:n}=t,i;try{let{commit:o}=n.product;if(!o)throw new ue({description:"Cannot attach without commit id for the remote extension host."});i=await ni(t,e.Id,r.workspaceFolder,r.remoteUser);let s=Nt(n.cliHost,i.shellServer),{hostOrContainerPort:a,hostPortServer:c,connectionToken:l,webConnectionToken:u,remoteEnv:f,serverDownloaded:d}=await Co(n,i,r,void 0,void 0,wo);if(Vle(n,i,s,r.configFilePath),Gle(n,i,s,r.configFilePath),_c(n,i,a,l,u,e,Ue($n.posix,"/")),c){let p=async()=>{await(0,WH.promisify)(c.close.bind(c))()};n.shutdowns.push(p)}return{params:n,properties:i,config:r,resolvedAuthority:{host:To,port:a,connectionToken:l,extensionHostEnv:f},webConnectionToken:u,tunnelInformation:n.isLocalContainer?Sc(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:d}}catch(o){let s=o instanceof ue?o:new ue({description:"An error occurred attaching to the container.",originalError:o});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),i&&(s.containerProperties=i),s.config=r,s}}function Vle(t,e,r,n){e.installFolder&&zH(t,e,r,n).catch(console.error)}async function zH(t,e,r,n){try{await Ti(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 16
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],fR(e),{print:"off"})}catch(i){i&&i.code===1?await Wle(t,e,r,n):i&&i.code!==2&&await Ai(6e4)}return zH(t,e,r,n)}async function Wle(t,e,r,n){let i=await hR(t,e);await pC(n,async()=>{let o=await Kg(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!Kle(o.config.extensions||[],i)){let s=Rt(o.text,["extensions"],i,{formattingOptions:{}});await on(r,n,s,o.text)}})}function Gle(t,e,r,n){KH(t,e,r,n).catch(console.error)}async function KH(t,e,r,n){try{let i=rh(e),o=$n.posix.dirname(i),s=$n.posix.basename(i);await Ti(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 16
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
		`],o,{print:"off"})}catch(i){i&&i.code===1&&await zle(t.cliHost,e,r,n)}return KH(t,e,r,n)}async function zle(t,e,r,n){let{stdout:i}=await e.shellServer.exec(`cat ${rh(e)}`),o=Xe(i)||{};await pC(n,async()=>{let s=await Kg(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(s.config.settings||{})!==JSON.stringify(o)){let a=Rt(s.text,["settings"],o,{formattingOptions:{}});await on(r,n,a,s.text)}})}function Kle(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(i=>n.has(i))}async function YH(t,e){let r=Gg(t,e.Name),n=await rV(r);return n||(r=XH(t,e.Config.Image),n=await rV(r)),n}async function JH(t,e,r,n,i){let o=Ee.file(Gg(r,n.Name)),s=await Kg(t,e,o,i);return s.exists||(o=Ee.file(XH(r,n.Config.Image)),s=await Kg(t,e,o,i)),s}function Wg(t){return $n.join(t,"nameConfigs")}function Gg(t,e){let r=e.startsWith("/")?e.substr(1):e;return $n.join(Wg(t),`${eV(r)}.json`)}async function QH(t){try{let e=Wg(t);return(await Kr(e)).filter(n=>n.endsWith(".json")).map(n=>({name:tV(n.substr(0,n.length-5)),uri:Ee.file($n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function zg(t){return $n.join(t,"imageConfigs")}function XH(t,e){return $n.join(zg(t),`${eV(e)}.json`)}async function ZH(t){try{let e=zg(t);return(await Kr(e)).filter(n=>n.endsWith(".json")).map(n=>({image:tV(n.substr(0,n.length-5)),uri:Ee.file($n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function eV(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function tV(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function rV(t){if(!await pt(t))return;let e=await Le(t),r=Xe(e.toString())||{};return r.configFilePath=Ee.file(t),r}async function Kg(t,e,r,n){let i=await e.readDocument(r),o=i||Ri,s=Xe(o)||{},a=uc({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},s);return a.configFilePath=r,{exists:!!i,text:o,config:a}}async function nV(t,e,r,n,i){return await $o(t)?se(W({},await Yle(t,e,r,n,i)),{isTrusted:!0}):(await Yo.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Yle(t,e,r,n,i){let o;return Yo.window.withProgress({location:Yo.ProgressLocation.Notification,title:Bc,cancellable:!1},async s=>{var a,c;try{let l=sm(r),{settings:u}=l,f="containerName"in l?l.containerName:l.containerId;n.log.write(`Setting up container: ${f}\r
`),nm(n.log,u);let d=u&&"host"in u&&u.host||void 0,p=l.cwd||((d==null?void 0:d.startsWith("ssh://"))?"/":process.cwd()),h=Zn(t.extensionPath,ji),m=await Pn(d,p,fi,Ui(),t.extensionPath,Hi(),e.product,n.log,{sshAskpassEnv:h,settings:jc()}),g=Ln(),v=W(W({},await h),Ic(m,u)),w=ri({exec:m.exec,env:W(W({},v),Tn(v)),output:n.log},Ln(),$c()),b=W(W({},m.env),v),C=await ci({cliHost:m,dockerCLI:g,dockerComposeCLI:w,env:b,output:n.log},"containerName"in l?l.containerName:l.containerId);if(!C)throw new ue({description:`Cannot attach to the container with name/id ${f}, it no longer exists.`,data:{reload:!1,attach:!0}});let S=(c=(a=(Yo.workspace.workspaceFolders||[void 0])[0])==null?void 0:a.uri)==null?void 0:c.path,_=await JH(m,An,t.globalStoragePath,C,S);if(S&&_.config.workspaceFolder!==S){let F=Rt(_.text,["workspaceFolder"],S,{formattingOptions:{}});await on(An,_.config.configFilePath,F,_.text)}let P={common:await Uc({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:m,env:b,cwd:p,isLocalContainer:im(v),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:l,dockerCLI:g,dockerComposeCLI:w,dockerEnv:v,workspaceMountConsistencyDefault:Am(),updateRemoteUserUIDOnMacOS:Tm(),cacheMount:Dm()?"volume":"none",configurationTracking:Im(t.workspaceState),userRepositoryConfigurationPaths:[]};await om(P);let I=Do(u),A=C.Name.startsWith("/")?C.Name.substr(1):C.Name,R=`Container ${C.Config.Image} (${A})${I}`;if(P.common.setWorkspaceName(R),C.State.Status!=="running")throw new ue({description:`Cannot attach to the container ${C.Config.Image} (${A})${I}, it is not running.`,params:P.common,containerId:C.Id,dockerParams:P,data:{reload:!1,start:!0}});return await GH(P,C,_.config)}catch(l){let u=l instanceof ue?l:new ue({description:"An error occurred attaching to the container.",originalError:l});throw u.actions=[CL,bL,...Tc,ia,Oo,Ac,na],u}}).then(s=>(Bi(e,"attach","success",o,s.properties),s),s=>{let a=s instanceof ue?s:new ue({description:"An error occurred attaching to the container.",originalError:s});return Bi(e,"attach","failure",o,a.containerProperties,a),No(a,"attach",e,!0,n)})}var ot=K(require("vscode"));var vt=K(require("vscode")),iV=K(require("path")),wa=K(require("os")),Gf=K(require("fs")),oV=K(require("child_process")),sV=K(Ja());async function Yg(t){Xle()?await new aV().downloadAndInstallDocker(t):lV()?await new cV().downloadAndInstallDocker(t):await vt.env.openExternal(vt.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var b_=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",i="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",o;try{o=await vt.window.withProgress({location:vt.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",l="Download";throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(o);vt.window.showInformationMessage(i);try{await this.install(o,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,l="Install Instruction";throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new uV(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",i="Reinstall";r=await vt.window.showInformationMessage(n,{modal:!0},i)!==void 0}return r}async downloadInstaller(){let e=`${Qle()}.${this.fileExtension}`;return await eue(this.downloadUrl,e),e}handleError(e,r,n){vt.window.showErrorMessage(e,{title:r}).then(i=>{i&&vt.env.openExternal(vt.Uri.parse(n))})}},aV=class extends b_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await dV(r,n)}finally{try{await Gf.promises.stat(e),await Gf.promises.unlink(e)}catch{}}}},cV=class extends b_{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await Zle(n,r,{addDockerEnv:!1})}},Jle=0;function Qle(){return iV.join(wa.tmpdir(),`${vt.env.sessionId}-${Jle++}.tmp`)}function Xle(){return wa.platform()==="win32"}function lV(){return wa.platform()==="darwin"}async function Zle(t,e,r){var a,c,l;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let i=new vt.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:vt.TaskScope.Workspace,e,"Docker",new vt.ShellExecution(t,{cwd:r.cwd||((l=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:l.fsPath)||wa.homedir(),env:n}),[]);r.alwaysRunNew&&(i.definition.idRandomizer=Math.random()),r.focus&&(i.presentationOptions={focus:!0});let o=await vt.tasks.executeTask(i);return new Promise((u,f)=>{let d=vt.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(d.dispose(),p.exitCode&&r.rejectOnError&&f(p.exitCode),u())})})}var uV=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new pV(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await dV("docker -v",this.output),!0}catch{return!1}}};async function eue(t,e){await new Promise((r,n)=>{let i=Gf.createWriteStream(e);sV.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(i),s.on("end",r)}).on("error",n)})}var fV=10*1024;async function dV(t,e,r,n){let i=Buffer.alloc(r&&r.maxBuffer||fV),o=Buffer.alloc(r&&r.maxBuffer||fV);return await tue(t,e,r,n,i,n,o),{stdout:E_(i),stderr:E_(o)}}async function tue(t,e,r,n,i,o,s,a){return await new Promise((c,l)=>{let u,f=0,d=0;r=r||{},r.shell=!0,rue(r,e);let p=oV.spawn(t,r);p.on("error",h=>(u&&(u.dispose(),u=void 0),l(h))),p.on("close",(h,m)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(h){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(g+=`
Error: ${E_(s)}`);let v=new Error(g);return v.code=h,v.signal=m,v.stdErrHandled=o!==null,l(v)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||i)&&p.stdout.on("data",h=>{let m=h.toString();n&&n(m,p),i&&(f+=i.write(m,f))}),(o||s)&&p.stderr.on("data",h=>{let m=h.toString();o&&o(m,p),s&&(d+=s.write(m,d))}),a&&(u=a.onCancellationRequested(()=>{p.kill()}))})}function rue(t,e){var r,n;!lV()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:W({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function E_(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var pV=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function kr(t,e,r){var o;let n=(o=(ot.workspace.workspaceFolders||[])[0])==null?void 0:o.uri;n&&(n.scheme==="file"&&Gt(n.fsPath)||tc(n))&&(e=await We(t,e.output,n));let i=await zf(e,r);if(i==="permission")return await ot.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&ot.env.openExternal(ot.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(i==="ssh")return await ot.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&ot.commands.executeCommand(ui),!1;if(i==="daemon")return await ot.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&ot.commands.executeCommand(ui),!1;if(!i||i==="command"){if(e.cliHost.type==="wsl")await ot.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&ot.env.openExternal(ot.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let s="Install",a="License",c="Ignore",l=i===!1?[s,a,c]:[s,a],u=await ot.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0,detail:"Check the license for details."},...l);if(u===s)Yg(e.output).then(console.error);else if(u===a)ot.env.openExternal(ot.Uri.parse("https://aka.ms/docker-subscription-service-agreement"));else if(u===c)return!0}return!1}return i==="wsl1"?(await ot.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&ot.env.openExternal(ot.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function zf(t,e){var s,a,c,l;let r;try{let u=await $e(t,"version","--format","{{.Server.APIVersion}}");r=u.stdout.toString(),t.output.write(r);let f=u.stderr.toString();f&&t.output.write(Re(f))}catch(u){console.error(u);let f=(s=u==null?void 0:u.stdout)==null?void 0:s.toString();f&&t.output.write(f);let d=u&&(u.stderr?u.stderr.toString():u.message)||"";d&&t.output.write(Re(d)),Kf(e,"error",void 0,d);let p=d.toLowerCase();return p.indexOf("permission denied")!==-1?p.indexOf("ssh")!==-1?"ssh":"permission":p.indexOf("enoent")!==-1||p.indexOf("not found")!==-1?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):t.cliHost.type==="wsl"&&((l=(c=(a=u==null?void 0:u.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),i=qs(n);if(!i&&n.toLowerCase().indexOf("error during connect")!==-1)return Kf(e,"error",void 0,n),"daemon";if(!i)return Kf(e,"unparsed",n),!0;let o=!ic(i,[1,35]);return!o&&await SC(t)?(Kf(e,"podman",n),!0):(Kf(e,o?"success":"failure",n),o)}function Kf(t,e,r,n){let i={outcome:e};r&&(i.version=r),n&&(i.errorMessage=n),t.sendTelemetryEvent("dockerVersion",i)}async function hV(t){try{return await Ws(t,"version"),!0}catch{return await ot.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&ot.env.openExternal(ot.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var sl=K(require("vscode"));var __=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,r){let n=[],i=Dk(e.getText());if(!i)return n;let o=Rk(i)||{};return o.configFilePath=e.uri,lt(o)&&this._linksForDockerfile(n,o,i,e),"dockerComposeFile"in o&&await this._linksForDockerCompose(n,o,i,e),n}_tryAddDocumentLinkToBucket(e,r,n,i,o){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&o.push(new sl.DocumentLink(new sl.Range(s,a),i))}_linksForDockerfile(e,r,n,i){let o=ip(n,["build","dockerfile"])||ip(n,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,Kt(this.fileHost,r),e)}async _linksForDockerCompose(e,r,n,i){let s=(await sr(this.fileHost,r)).map(c=>sl.Uri.file(c).path),a=ip(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(i,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,i.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),e)}};var ne=K(require("vscode")),Ca=K(require("path"));var mV="Stop Container",gV="Reopen Folder locally",vV="Close Workspace",Jo;(function(i){i.Placeholder="Placeholder",i.Group="Group",i.Container="Container",i.Folder="Folder"})(Jo||(Jo={}));var Zt=class{static isGroupItem(e){return!!e&&e.type===Jo.Group}static isContainerItem(e){return!!e&&e.type===Jo.Container}static isFolderItem(e){return!!e&&e.type===Jo.Folder}},Yf;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(Yf||(Yf={}));var S_=class extends Zt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=Jo.Group}async asTreeItem(e,r,n,i){return new ne.TreeItem(this.label,ne.TreeItemCollapsibleState.Expanded)}},Un=class extends Zt{constructor(e,r=[],n,i=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=i;this.type=Jo.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,i){let o=new ne.TreeItem(this.getContainerLabel(),this.getCollapsibleState());o.description=this.containerDescription;let s=this.getContextBase();o.iconPath=Jg(r,sue),o.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(o.iconPath=Jg(r,oue),o.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,o),o.tooltip=this.getHover(a,o.iconPath instanceof ne.ThemeIcon?o.iconPath:new ne.ThemeIcon("vm"),o.label),this.folders.length===1&&(o.contextValue+="Folder"),o}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?ne.TreeItemCollapsibleState.Expanded:ne.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new ne.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new ne.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new ne.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new ne.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new ne.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,i=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(i.getFullYear()>1&&o.getFullYear()>1){let s=new Date,a=new Date(i>o?e.State.StartedAt:e.State.FinishedAt),c,l,u=s.getTime()-a.getTime();(l=Math.round(u/Un.years))>0?l===1?c="year":c="years":(l=Math.round(u/Un.days))>0?l===1?c="day":c="days":(l=Math.round(u/Un.hours))>0?l===1?c="hour":c="hours":(l=Math.round(u/Un.minutes))>0?l===1?c="minute":c="minutes":(l=Math.round(u/Un.seconds),l===1?c="second":c="seconds"),r=` ${l} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(kc(this.container)&&this.folders.length>0)return`${Ca.basename(this.folders[0].folder.path)}`;{let r=GC(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let i=new ne.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let o=em(this.container);return o&&i.appendMarkdown(`$(file-symlink-directory) ${o}  
`),e?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let e=ta(this.container);e&&(this._repository=Ur(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return $t(e,this.container.Id)}},gr=Un;gr.seconds=1e3,gr.minutes=Un.seconds*60,gr.hours=Un.minutes*60,gr.days=Un.hours*24,gr.years=Un.days*365;var ba=class extends Zt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=Jo.Folder}async asTreeItem(e,r,n,i){let o=new ne.TreeItem(Ca.basename(this.folder.path),ne.TreeItemCollapsibleState.None);return o.description=this.folder.path,o.iconPath=Jg(r,cue),o.contextValue="attachedFolder",this.isDevContainer&&!ta(this.container)&&(o.contextValue="devFolder"),n&&this.container.Id===n.Id&&i===this.folder.path&&(o.iconPath=Jg(r,aue),o.tooltip=`Active Folder ${o.label}`,o.contextValue=`active${o.contextValue}`),o}};function nue(t,e,r,n){if(!(!ne.env.remoteName||ne.env.remoteName!=="attached-container"&&ne.env.remoteName!=="dev-container"))return yV(t,e,r,n)}function yV(t,e,r,n){ne.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new xV(t,e,n,e.output),o=ne.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>i.refresh(s))),i}function iue(t,e){let r=[mV];return t&&t.Id===e.Id&&ne.workspace.workspaceFolders&&ne.workspace.workspaceFolders.length>0&&(r.push(vV),ne.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push(gV)),r}var wV=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new ne.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:Ln(),args:["logs","-f",this.containerId],env:r,output:n}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},CV=class{constructor(e,r,n,i,o,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(ne.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(ne.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(ne.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(ne.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(ne.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(ne.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(ne.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(ne.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(ne.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(ne.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(ne.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(ne.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(ne.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(ne.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(ne.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(ne.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(ne.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Zt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await ne.window.showWarningMessage(r,{modal:!0},...iue(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case mV:{await uE(this.dockerParams,e.container),e.container=await $t(this.dockerParams,e.container.Id);break}case vV:{await ne.commands.executeCommand("workbench.action.closeFolder");break}case gV:{await ne.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Zt.isContainerItem(e))return;let r=await ci(this.dockerParams,e.container.Id);if(!r)return;let n=await ne.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await uE(this.dockerParams,e.container),await uq(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=em(e);if(r||(r=nL(e)),r){let n=await vh(this.dockerParams,r);if((await EC(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await ne.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await fE(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await ne.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await bO(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Zt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await Om(this.dockerParams,e.container),e.container=await $t(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Zt.isFolderItem(e)||(await ne.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Zt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=yV(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Zt.isFolderItem(e)?(n=e,r=e.container):gr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await Om(this.dockerParams,r),await ne.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Zt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Om(this.dockerParams,n),await Qg(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Zt.isContainerItem(e)||Qo.isImageItem(e)||Qo.isVolume(e)||Qo.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&ne.window.showTextDocument(await ne.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){Qo.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){Qo.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){Qo.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await ne.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return ne.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Zt.isContainerItem(e))return;let r=new wV(this.dockerParams,e.container.Id);ne.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function bV(t,e,r,n){ne.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=new EV(t,e,s,r,n),o=ne.window.createTreeView("targetsContainers",{treeDataProvider:i});i.setMessage=a=>o.message=a,t.subscriptions.push(ne.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await i.getDockerParams(!0),i.refresh(void 0))));function s(a){let c=nue(t,a,i,r),l=new kV(t,r,n),u=ne.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let f=new CV(i,c,l,a,t,r);t.subscriptions.push(...f.registerCommands()),t.subscriptions.push(oq(t)(async()=>{i.refresh(void 0),l.refresh(void 0);let d=await We(t,n);c&&c.updateDockerParameters(d),f.updateDockerParameters(d)}))}}var EV=class{constructor(e,r,n,i,o){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new ne.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new ne.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=Zn(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,ji(r,!1))));try{this.dockerParams=await We(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1),await zf(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(r){if(!this.needsSSHCredentials)throw r}}return this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let i=this.containerItems.get(r.Actor.ID);this.dockerParams&&i?(async()=>{i.container=await $t(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)})():this._onDidChangeTreeData.fire(i);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await gu(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await ne.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await ne.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=ne.workspace.workspaceFolders&&ne.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await ne.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new S_("Dev Containers",0)),this.otherContainers.length>0&&r.push(new S_("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),i=n?[new ba(e,n,!0)]:[],o=kc(e);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new ba(e,a,!1))):o&&this.recentAttachEntries.has(e.Id)?i.push(...this.recentAttachEntries.get(e.Id).map(a=>new ba(e,a,!1))):(o=ta(e))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new ba(e,a,!1))):o===void 0&&this.recentDevComposeEntries.has(e.Id)&&i.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new ba(e,a,!1)));let s=new gr(e,i,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let i=new gr(n,this.recentAttachEntries.get(n.Id).map(o=>new ba(n,o,!1)),e);return this.setContainerItems(i),i})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new gr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await Ni(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await xo(this.dockerParams,r);return this.getChildGroups(n)}else{if(Zt.isGroupItem(e))return this.getChildContainers(e);if(Zt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=ne.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await ci(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await ci(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if(kc(e)){this.devContainers.push(e);return}else if(ta(e)){this.devContainers.push(e);return}else if(GC(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=this.dockerParams.cliHost,n=Ue(r.path,e),i=await si(r,n,di()),o=i&&await ea(r,n,i,this.output)||void 0;if(o&&lt(o.config))return ne.Uri.parse(qu(e,o.workspaceConfig.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=kc(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=ta(e),i=em(e),o=iL(e);if(n)return ne.Uri.parse(ra(n,i,o,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await db(r,e,this.output),i=mL(r,n,e);return ne.Uri.parse(qu(e,i,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return ne.Uri.parse(ra(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=Ue(this.dockerParams.cliHost.path,e),i=await si(this.dockerParams.cliHost,n,di()),o=i&&await ea(this.dockerParams.cliHost,n,i,this.output);if(o&&"dockerComposeFile"in o.config){let s=await sr(this.dockerParams.cliHost,o.config),a=await Lu(this.dockerParams,n,s);return N1(r,a,o.config.service)}}trySetEntryWithAttachAuthority(e,r,n){let i;if("containerName"in r){let o=n.find(s=>s.Name===r.containerName);o&&(i=o.Id)}else i=r.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(e):this.recentAttachEntries.set(i,[e]))}async trySetEntryWithDevAuthority(e,r,n,i){let o=r.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),i[o]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let i=(s=e.folderUri)!=null?s:e.workspace.configPath,o=sm(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,r);else{let a=pn(i.authority);a&&(Jt(a)?await this.trySetEntryWithDevAuthority(i,a,r,n):ln(a)?this.trySetEntryWithRepoAuthority(i,a):this.trySetEntryWithVolumeAuthority(i,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await ne.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let i of r.workspaces)await this.trySetEntry(i,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},jn;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(jn||(jn={}));var Qo=class{constructor(e){this.label=e;this.type=jn.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===jn.Image}static isVolume(e){return!!e&&e.type===jn.Volume}static isDevVolume(e){return!!e&&e.type===jn.DevVolume}},_V=class{constructor(e){this.detail=e;this.type=jn.Image;this.context="image";this.label="Image"}inspect(e){return Po(e,this.detail)}},SV=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=jn.Volume;this.context="volume"}async inspect(e){return vh(e,this.volumeDetails)}},xV=class{constructor(e,r,n,i){this.context=e;this.dockerParams=r;this.telemetry=n;this.output=i;this._onDidChangeTreeData=new ne.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new ne.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?ne.TreeItemCollapsibleState.Expanded:ne.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let i=[];r&&i.push({label:"Workspace",detail:r});let o=ta(e.container);return o&&i.push({label:"Repository",detail:o}),i.push({label:"Name",detail:e.container.Name}),i.push(new _V(e.container.Config.Image)),n&&i.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),i}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let i=n.Name,o=new SV(`Volume: ${i}`,i),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[o,s]})}else if(n.Type==="bind"){let i={label:`Source: ${n.Source}`,detail:void 0},o={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[i,o]})}}),r}async getChildrenFromRoot(e){let r=[],n=kc(e.container),i;if(this.dockerParams&&n){let a=await si(this.dockerParams.cliHost,Ue(this.dockerParams.cliHost.path,n),di());a&&(i=Oe(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,i),type:jn.Title});let o;this.dockerParams&&(o=await $t(this.dockerParams,e.container.Id));let s=await this.getMounts(o);return s.length>0&&r.push({label:"Mounts",detail:s,type:jn.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await $t(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await We(this.context,this.output),await zf(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},PV=class extends Qo{constructor(e){super(e.Name);this.type=jn.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new ne.TreeItem(e,ne.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),o=this.getPullRequestId();o?e=`#${o}`:i&&(e=`${i}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return Ur(n)}}}get iconPath(){return new ne.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,i=new Date(this.volumeDetails.CreatedAt),o,s,a=n.getTime()-i.getTime();(s=Math.round(a/gr.years))>0?s===1?o="year":o="years":(s=Math.round(a/gr.days))>0?s===1?o="day":o="days":(s=Math.round(a/gr.hours))>0?s===1?o="hour":o="hours":(s=Math.round(a/gr.minutes))>0?s===1?o="minute":o="minutes":(s=Math.round(a/gr.seconds),s===1?o="second":o="seconds"),e=` ${s} ${o} ago`}return this.createdAt=e,e}async inspect(e){return vh(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await ne.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await ne.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await EC(e)).indexOf(this.volumeDetails.Name)>=0)){await ne.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await ne.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await fE(e,this.volumeDetails.Name)}},kV=class{constructor(e,r,n){this.context=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new ne.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await We(this.context,this.output,void 0,void 0),await zf(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await ne.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await We(this.context,this.output),n=await ko(r),i=await mu(r,n),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new PV(a))}async resolveTreeItem(e,r){let n=await We(this.context,this.output),i=await this.getAssociatedContainers(n,r),o=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),l=r.getTimeElapsed();return i.length>0?e.tooltip=this.renderMarkdown(o,s,a,c,l,i.join(", ")):e.tooltip=this.renderMarkdown(o,s,a,c,l,"*None*"),e}async getAssociatedContainers(e,r){let n=[],i=await Ni(e,!0),o=await xo(e,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,i,o,s){let a=new ne.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=r.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${l}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${l}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await gu(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},oue="vm-active",sue="vm-default",aue="folder-active",cue="folder";function Jg(t,e){let r=`${e}.svg`;return{light:ne.Uri.file(t.asAbsolutePath(Ca.join("resources","light",r))),dark:ne.Uri.file(t.asAbsolutePath(Ca.join("resources","dark",r))),highContrast:ne.Uri.file(t.asAbsolutePath(Ca.join("resources","highContrast",r)))}}var x_=K(require("util"));var wn=K(require("vscode"));async function IV(t,e,r={}){let n=rc(e[0],e.slice(1),void 0),i=await wA(e[0],e.slice(1),void 0,t.loadNativeModule),o=await th({params:t,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:{},remoteExec:n,remotePtyExec:i,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,connectionToken:a,webConnectionToken:c,remoteEnv:l,serverDownloaded:u}=await Co(t,o,r,void 0,void 0);return{params:t,properties:o,config:void 0,resolvedAuthority:{host:To,port:s,connectionToken:a,extensionHostEnv:l},webConnectionToken:c,tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:u}}async function AV(t,e,r){var n,i,o;if(!!await $o(t))if(r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:l}=e,u=(await Se({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:l})).stdout.toString().trim(),d=(await Se({exec:a.exec,cmd:"kubectl",args:s,env:c,output:l})).stdout.toString(),p=JSON.parse(d),h=((n=p.spec)==null?void 0:n.containers)||[];if(!h.length){e.output.write(`No containers found. Pod details:
${d}`),await wn.window.showErrorMessage("No containers found.",{modal:!0},"Show Log")&&wn.commands.executeCommand(ui);return}let m=h.length>1?(i=await wn.window.showQuickPick(h.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:i.container:h[0];if(m){let g=((o=p.metadata)==null?void 0:o.namespace)||r.namespace,v={remoteAuthority:uue({context:u,podname:r.name,namespace:g,name:m.name,image:m.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await wn.commands.executeCommand("vscode.newWindow",v)}}else e.output.write(`No Pod name found. Pod object:
${JSON.stringify(r,void 0,"  ")}`),await wn.window.showErrorMessage("No Pod name found.",{modal:!0},"Show Log")&&wn.commands.executeCommand(ui)}async function TV(t,e,r,n,i){return await $o(t)?se(W({},await lue(t,e,r,n,i)),{isTrusted:!0}):(await wn.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function lue(t,e,r,n,i){return wn.window.withProgress({location:wn.ProgressLocation.Notification,title:Bc,cancellable:!1},async o=>{try{let s=fue(r),a=process.cwd(),c=await Pn(void 0,a,fi,Ui(),t.extensionPath,Hi(),e.product,n.log),l=await Uc({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:o,cliHost:c,env:c.env,cwd:a,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i});l.setWorkspaceName(`${s.name} in ${s.podname} (${s.image})`);let u=["kubectl","exec","-it",s.podname];return s.context&&u.push("--context",s.context),s.namespace&&u.push("--namespace",s.namespace),u.push("--container",s.name,"--"),await IV(l,u)}catch(s){let a=s instanceof ue?s:new ue({description:"An error occurred attaching to the container.",originalError:s});throw a.actions=[...Tc,ia,Oo,Ac,na],a}}).then(o=>(Bi(e,"k8s-container","success",void 0,o.properties),o),o=>{let s=o instanceof ue?o:new ue({description:"An error occurred attaching to the container.",originalError:o});return Bi(e,"k8s-container","failure",void 0,s.containerProperties,s),No(s,"k8s-container",e,!0,n)})}function uue(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function fue(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var tt=K(require("vscode")),al=K(require("fs")),cl=K(require("os")),Ea=K(require("path")),Xg=K(require("child_process")),ll=K(require("util"));function Zg(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function DV(t,e){var c;let r=t.globalStorageUri,n=tn.joinPath(r,"cli-bin");await tt.workspace.fs.createDirectory(n);let i="";try{i=(await tt.workspace.fs.readFile(tn.joinPath(n,"remote-containers-path"))).toString()}catch(l){if((l==null?void 0:l.code)!=="FileNotFound")return}if(i===t.extensionPath)return;let o=tn.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=Zg(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let l of a)tt.workspace.fs.copy(tn.joinPath(o,l.source),tn.joinPath(n,l.destination),{overwrite:!0});await tt.workspace.fs.writeFile(tn.joinPath(n,"vscode-app-root"),Buffer.from(tt.env.appRoot,"utf-8")),await tt.workspace.fs.writeFile(tn.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await tt.workspace.fs.writeFile(tn.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await tt.workspace.fs.writeFile(tn.joinPath(n,"vscode-machine-id"),Buffer.from(tt.env.machineId,"utf-8")),await tt.workspace.fs.writeFile(tn.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function due(t,e){let r=Zg(e),n="";try{if(n=(await(0,ll.promisify)(Xg.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await tt.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await tt.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,ll.promisify)(Xg.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=tt.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch{return!1}}async function pue(t,e){var a;let n=((a=process.env.PATH)!=null?a:"").split(":"),i=[Ea.join(cl.homedir(),"bin"),Ea.join(cl.homedir(),".local/bin")],o="/usr/local/bin";cl.platform()==="darwin"&&i.push(o);let s=(0,ll.promisify)(al.stat);for(let c of i){if(n.findIndex(p=>p===c)<0)continue;try{await s(c)}catch{continue}let l=Zg(e),u=Ea.join(c,`devcontainer${l}`);try{let p=await s(u);return console.log(p),await tt.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let f=await tt.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${c}?`,modal:!0},"Create","Copy CLI Path"),d=Ea.join(t,`devcontainer${l}`);switch(f){case"Create":if(c===o){if(!await hue(d,u))break}else await(0,ll.promisify)(al.symlink)(d,u);await tt.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${c}`,{modal:!0,detail:`Try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await tt.env.clipboard.writeText(t),await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${l} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function hue(t,e){try{return await al.promises.symlink(t,e),!0}catch(r){if(r.code!=="EACCES"&&r.code!=="ENOENT")throw r;if(await tt.window.showInformationMessage("This will now prompt with 'osascript' for Administrator privileges to install the shell command.",{modal:!0},"OK")==="OK"){let i=`osascript -e "do shell script \\"mkdir -p ${Ea.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,ll.promisify)(Xg.exec)(i),!0}return!1}}async function RV(t,e){let r=t.globalStorageUri,n=tn.joinPath(r,"cli-bin").fsPath;switch(cl.platform()){case"win32":if(await due(n,e))return;break;case"darwin":case"linux":if(await pue(n,e))return;break}if(await tt.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await tt.env.clipboard.writeText(n);let o=Zg(e);await tt.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${o} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var FV=class{constructor(e,r,n){this.context=e;this.telemetry=n,this.output=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=LV.parse(e.query);if(!r.url){U.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let i=await We(this.context,this.output.log);if(!!await kr(this.context,i,await this.telemetry)){if(!await vw(i.cliHost,n,this.output.log)){await U.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await U.commands.executeCommand(xm,r.url)}}};async function gue(t){var _;bq();let e=new Date;Cq(t);let r=await ho(t.extensionPath),n=await Wl(U.env.appRoot);Eq(t,n);let i=yq(t,r,n),o=`Remote-Containers ${r.version} in VS Code ${U.version} (${n.commit||"out-of-source"}).`,s=new Rm(t.logPath,e,o);t.subscriptions.push(U.commands.registerCommand(ui,()=>s.show()));let{channel:a,postCreate:c}=vq(s.log,e);t.subscriptions.push(U.commands.registerCommand(iE,()=>a.show())),t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:Pm(s,c,lr.results,async(P,I,A)=>VH(t,await i,P,lr.onRemoveOnShutdownChanged,I,A)),async getCanonicalURI(P){var A;let I=pn(P.authority);if(I&&Jt(I)){let{hostPath:R,settings:F}=I;return Gt(R)?ec(R,s.log):F&&"host"in F&&((A=F.host)==null?void 0:A.startsWith("ssh://"))?Kl(F.host,R):U.Uri.file(R)}return P}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:Pm(s,c,lr.results,async(P,I,A)=>nV(t,await i,P,I,A))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:Pm(s,c,lr.results,async(P,I,A)=>TV(t,await i,P,I,A))}),U.window.registerUriHandler(new FV(t,s,i)));let l=async(P,I,A)=>{let R=await We(t,s.log);if(!await kr(t,R,await i))return;let F;if(Zt.isFolderItem(P)?(F=P.folder,A=bue()):F=P,F.scheme==="vscode-remote")return U.commands.executeCommand("vscode.openFolder",F,A);{let H=Ue(R.cliHost.path,Oe(F,R.cliHost.platform));return tv(t,H,R,await i,I,A)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(P,I)=>P?l(P,!1,I):jV(t,!0,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(P,I)=>P?l(P,!1,I):jV(t,!1,await i,!1,s.log))),t.subscriptions.push(U.commands.registerCommand(tq,async P=>Jf(t,await i,s.log,P))),t.subscriptions.push(U.commands.registerCommand(xm,async P=>Jf(t,await i,s.log,P,fn))),t.subscriptions.push(U.commands.registerCommand(rq,async P=>{if(P.url){let I=P.url;return(P==null?void 0:P.ref)&&(I=`${P.url}/tree/${P.ref}`),Jf(t,await i,s.log,I,fn)}})),t.subscriptions.push(U.commands.registerCommand(nq,async P=>_ue(t,await i,s.log,P,fn))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(P,I,A)=>BV(t,P,I,A,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async P=>Sue(t,P,await i,s.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async P=>Jf(t,await i,s.log,void 0,P))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>u(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>u(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>u("rebuildNoCache")));let u=async P=>{if(!await U.workspace.requestWorkspaceTrust({message:nf}))return;let A=await We(t,s.log);if(!await kr(t,A,await i))return;let R=U.workspace.workspaceFile;if(R&&R.scheme==="untitled"){await $g();return}let F=U.workspace.workspaceFolders;if(!R&&F&&F.length){let X=F.length>1?await U.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):F[0];X&&(R=X.uri)}let H=await aE(R);if(H){await Qf(t,H.repositoryPath,H.volumeName,H.folder,A);return}if(R){let X;if(A.cliHost.type==="wsl"&&R.scheme==="file"){let Y=Oe(R,process.platform),te=mo(Y)||await xp(A.output)||(()=>{throw new Error("No default WSL distro found.")})();X=await Pi(te,Y,A.output)}else X=Oe(R,A.cliHost.platform);let J=Ue(A.cliHost.path,X);await tv(t,J,A,await i,P,{forceReuseWindow:!0})}};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let P=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||P&&P.length&&P[0].uri;if(I&&I.scheme==="vscode-remote"){let A=pn(I.authority);if(A&&Jt(A)){let R=U.Uri.file(A.hostPath),F={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",R,F)}else U.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let P=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||P&&P.length&&P[0].uri;if(I&&I.scheme==="vscode-remote"){let A=pn(I.authority);if(A&&Jt(A)&&Gt(A.hostPath)){let R=U.Uri.parse((await ec(A.hostPath,s.log)).toString()),F={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",R,F)}else U.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let P=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||P&&P.length&&P[0].uri;if(I&&I.scheme==="vscode-remote"){let A=pn(I.authority),R=A==null?void 0:A.settings;if(A&&Jt(A)&&R&&"host"in R&&R.host&&R.host.startsWith("ssh://")){let F=U.Uri.parse(Kl(R.host,A.hostPath).toString()),H={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",F,H)}else U.window.showInformationMessage("'Reopen in SSH' not possible in current context.")}}));let f,d=async P=>{var F;if(!await $o(t))return;let I,A=typeof P=="string"?P:(F=P==null?void 0:P.containerDesc)==null?void 0:F.Id;if(A){let H=await We(t,s.log);if(!await kr(t,H,await i))return;I=await $t(H,A)}else{let H=!1;f||(f=Zn(t.extensionPath,async J=>(H=!0,ji(J))));let X=await We(t,s.log,void 0,void 0,f);if(I=await Rue(X,kr(t,X,await i),()=>H),!I)return}let R=await We(t,s.log);Qg(R,I,t)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",d)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",d)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async P=>AV(t,await We(t,s.log),P)));let p=async P=>{var R;let I=await We(t,s.log);if(!await kr(t,I,await i))return;let A=(R=P==null?void 0:P.pullRequestModel)==null?void 0:R.html_url;Jf(t,await i,s.log,A,fn)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",p)),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let P=await ca();if(P){let I=await We(t,s.log);await Qf(t,P.repositoryPath,P.volumeName,P.folder,I,!0);return}return await Promise.all(lr.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let P=await ca();if(P){let I=await We(t,s.log);await Qf(t,P.repositoryPath,P.volumeName,P.folder,I,"rebuildNoCache");return}return await Promise.all(lr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let h=U.env.remoteName&&U.env.remoteName!=="test"?"linux":process.platform,m=((_=(U.workspace.workspaceFolders||[])[0])==null?void 0:_.uri)||Ee.file(process.cwd()),g=Ko(h,m),v={fileHost:g,findDevContainerFiles:()=>pE(g),telemetry:i,output:s.log,existingFilesLearnMoreLink:Xu,predefinedDefinitionsLearnMoreLink:Zu,openConfigurationCommandId:Qu},w=await TH(t,v);t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!U.workspace.workspaceFolders){await U.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await A_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(P,I)=>{let A,R=await We(t,s.log),F;if(typeof P=="string"?A=[Ee.file(P)]:(F=await pE(R.cliHost),A=(await Promise.all(F.map(H=>H.scheme==="vscode-remote"?H:R.cliHost.toCommonURI(Oe(H,R.cliHost.platform))))).filter(H=>!!H)),A.length){let H;A.length===1?H={uri:A[0]}:H=await U.window.showQuickPick(A.map(J=>({label:J.scheme==="file"?J.fsPath:J.toString(),uri:J})),{placeHolder:"Select container configuration file to open"});let X=await ca();if(X){let J=mq(X.folder);for(let Y of J){try{await U.workspace.openTextDocument(U.Uri.parse(Y.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse(Y.toString()),I);return}return}if(H){let J=H.uri,Y=U1(J);if(Y){let te=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?Y.replace(/\\/g,"/"):Y}`;return U.env.openExternal(U.Uri.parse(te))}else{if(J.scheme==="file"&&await pt(J.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(J.toString()),I);if(J.scheme==="file"&&lr.results.size)return await on(An,J,[],Ri),await U.commands.executeCommand("vscode.open",U.Uri.parse(J.toString()),I);if(J.scheme==="vscode-remote"&&lr.results.size)return await U.commands.executeCommand("vscode.open",U.Uri.parse(J.toString()),I);if(P===void 0)return await A_(t,g,w,await i,s.log)}}}else if(P===void 0&&!(F==null?void 0:F.length))return await A_(t,g,w,await i,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:P,dockerParams:I}=[...lr.results.values()][0];if(!P||!I)return U.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let A=await $t(I,P),R=Gg(t.globalStoragePath,A.Name),F=U.Uri.file(R);return await pt(R)?U.commands.executeCommand("vscode.open",F):(await on(An,F,[],Ri),U.commands.executeCommand("vscode.open",F))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let P=[...(await QH(t.globalStoragePath)).map(A=>W({label:A.name},A)).sort((A,R)=>A.label.localeCompare(R.label)),...(await ZH(t.globalStoragePath)).map(A=>W({label:A.image},A)).sort((A,R)=>A.label.localeCompare(R.label))],I=await U.window.showQuickPick(P.length?P:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(I&&"uri"in I)return U.commands.executeCommand("vscode.open",U.Uri.parse(I.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${$V()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>U.commands.executeCommand("vscode.openIssueReporter",$V()))),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/.devcontainer/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new __(g))),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",async()=>{$ue(t,s.log)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>jue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>Uue(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>Lue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>yue(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>Yg(s.log))),bV(t,lr.results,await i,s.log),await DV(t,n),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>RV(t,n))),(async()=>{await hq(t)||await GV(t,g,await i,s.log)})().catch(console.error),wue(t);let b=U.env.remoteName,C=!b||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(b)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",w.addExtensionToConfiguration),U.languages.registerCompletionItemProvider([...C,{pattern:Ft.join(zg(t.globalStoragePath),"*.json")},{pattern:Ft.join(Wg(t.globalStoragePath),"*.json")}],w.createCompletionItemProvider()),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{var A;let P=await We(t,s.log),I=await o_(v,{readDockerComposeConfig:async(R,F)=>{let H=await VC(P.cliHost.cwd,R,P.output);return WC(P,H,F)}});if(I){let R;if(!I.manifest&&I.imageName)try{R=await Po(P,I.imageName)}catch(F){if(((A=F==null?void 0:F.stdout)==null?void 0:A.toString().replace(/\s/g,""))==="[]")try{await $e(P,"pull",I.imageName),R=await Po(P,I.imageName)}catch{}}await a_(v,I,(R==null?void 0:R.Config.Labels)||{})}}),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",w.addPortLabelToConfiguration)),await ca()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(CH())}var MV="showRecoveryContainerNotification",qV="showReopenInContainerNotificationReset",vue=5e3;function yue(t){return t.globalState.update(qV,Date.now())}async function wue(t){setTimeout(async()=>{let e=t.globalState.get(qV);if(T_(t.globalState.get(MV),e))return;if(await ca()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",i="Reopen in Container",o="Don't Show Again",s=await U.window.showInformationMessage(n,o,i);s===i?U.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await t.globalState.update(MV,Date.now())}},vue)}async function Cue(){await Promise.all([...lr.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function $V(){let{name:t,publisher:e}=OV();return`${e}.${t}`}async function jV(t,e,r,n,i){var f;let o=await We(t,i);if(!await kr(t,o,r))return;let s,a=U.workspace.workspaceFolders;if(a&&a[0]){let d=a[0].uri;if(d.scheme==="vscode-remote"){let p=pn(d.authority);if(p&&Jt(p)){let h=Ue(o.cliHost.path,p.hostPath);s=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote)\+/.test(d.authority)&&(s=d)}else d.scheme==="file"&&(s=d)}s||(((f=U.env.remoteName)==null?void 0:f.match(/^(wsl|ssh-remote)$/))?s=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await o.cliHost.homedir()}):s=U.Uri.file(NV.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},l=await U.window.showOpenDialog(c),u=l&&l[0];if(u){let d=e?u:u.with({path:Ft.posix.dirname(u.path)}),p=await We(t,o.output,d,cE()==="always"),h=Oe(u,p.cliHost.platform),m=Ue(p.cliHost.path,h);await tv(t,m,p,r,n)}}function bue(){return U.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function tv(t,e,r,n,i,o){var g;let{cliHost:s}=r;if(Gt(e.rootFolderPath)){if(r=await We(t,r.output,e.rootFolderPath),s=r.cliHost,!await kr(t,r,n))return;e=Ue(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Ft.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await Sp(s,e);if(a){let v="Continue";if(await U.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},v)!==v)return}let c=await si(s,e,di()),l=c&&await ea(s,e,c,r.output);if(!l||!gc(l.config)){let v=await Wf({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:Xu,predefinedDefinitionsLearnMoreLink:Zu,openConfigurationCommandId:Qu},e);if(!v||(l=await ea(s,e,Ee.file(v).with({scheme:qt.scheme}),r.output),!l))return}let u=l.config;if(!await Eue(r,u))return;let f=l.workspaceConfig.workspaceFolder;if(lt(u)){let v=Kt(s,u);if(!u.initializeCommand&&!await Nt(s).readDocument(v))return Xf(`"${v.fsPath}" does not exist.`,s,u.configFilePath);if(u.workspaceFolder&&!Ft.posix.isAbsolute(u.workspaceFolder))return Xf("Workspace folder in devcontainer.json must be an absolute path.",s,u.configFilePath)}else if(!("image"in u))if("dockerComposeFile"in u){if(!await hV(r)||!await Oue(e,r,u))return}else{let v=u.configFilePath;return Xf(`Configuration "${s.path.relative(e.rootFolderPath,Oe(v,s.platform))}" not valid.`,s,v)}e.isWorkspaceFile&&(f=Ft.posix.join(f,s.path.basename(e.workspaceOrFolderPath)));let d=ai(r.env),p=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,h=(s.type==="local"||s.type==="wsl")&&d&&"host"in d&&((g=d.host)==null?void 0:g.startsWith("ssh://")),m=U.Uri.parse(qu(p,f,d,h));await nv({uri:m,type:e.isWorkspaceFile?"workspace":"folder",label:`${gL(s.platform,e.workspaceOrFolderPath,await s.homedir())}${Do(d)} [Dev Container]`}),await dE(t,i?m.authority:!1),await tf(t,i==="rebuildNoCache"?m.authority:!1),await U.commands.executeCommand("vscode.openFolder",m,o)}async function Eue(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await $e(t,"info","--format","{{json .}}"),i=JSON.parse(n.stdout.toString()),o=i.NCPU&&r.cpus&&r.cpus>i.NCPU,s=i.MemTotal&&r.memory&&P_(r.memory)>i.MemTotal;if(o||s){let a=[];i.NCPU&&a.push(`CPUs ${i.NCPU}`),i.MemTotal&&a.push(`RAM ${k_(i.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${k_(P_(r.memory))}`),r.storage&&c.push(`disk ${k_(P_(r.storage))}`);let l=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await U.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:l},"Continue"))return!1}}return!0}function P_(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,i=parseInt(r,10),o=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return i*o}return 0}function k_(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),i=Math.round(r*n)/n,o=[" bytes","kb","mb","gb","tb"][e];return`${i}${o}`}async function Jf(t,e,r,n,i){if(!await of(t))return;let o=await We(t,r),s=null;if(!!await kr(t,o,e)){if(typeof n=="string")s=n;else{let a=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(typeof a=="string"){s=a.trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=oi(s);if(!await vw(o.cliHost,c.repositoryUrl,o.output)){await U.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}}else if(a){if(!a.branch)return;s=`${a.url}/tree/${a.branch}`}}s&&await UV(t,o,s,i)}}async function UV(t,e,r,n){if(n||(n=await Pue(e)),n){let i=I_(r);n!==fn&&(i=await Iue(r)),i&&await Qf(t,r,n,i,e)}}async function _ue(t,e,r,n,i){if(!await of(t))return;let o=await We(t,r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await kr(t,o,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:u=>s.test(u)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await U.window.showInputBox(a),!c)return;let l=oi(c);if(l.repository==="unknown"||!l.pullRequestId){await U.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await UV(t,o,c,i)}async function BV(t,e,r,n,i,o){let s=await We(t,o);!await kr(t,s,i)||(e||(e=await xue(s)),e&&(r&&n?await Due(e,r,n,s):await Tue(e,s)))}async function Sue(t,e,r,n){let i=await We(t,n);!await kr(t,i,await r)||e&&e.volumeName&&await BV(t,e.volumeName,void 0,void 0,r,n)}var rv=class{get detail(){return""}},HV=class extends rv{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},VV=class extends rv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},WV=class extends rv{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function xue(t){let e=await ko(t),n=(await mu(t,e)).map(a=>new WV(a)),i="Select the volume to inspect with Visual Studio Code",o=U.window.createQuickPick();o.items=n,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function Pue(t){let e=await ko(t,["vsch.local.repository.unique=false"]),n=(await mu(t,e)).map(u=>new VV(u)),i=new HV,o=[i,...n],s="Select the volume for the cloned repository",a=U.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===i?l=await kue(t):l=c.volumeName,l}async function kue(t){let e="",r="vsc-remote-containers",n=await ko(t);n.find(s=>s===r)||(e=r);let i={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},o=await U.window.showInputBox(i);return o?n.find(s=>s===o)?(await U.window.showErrorMessage("Volume already exists",{modal:!0}),null):o:null}async function Iue(t){let e={prompt:"Enter the target folder name.",value:I_(t),ignoreFocusOut:!0},r=await U.window.showInputBox(e);return r||null}function I_(t){return Ur(t).repositoryName}async function Aue(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function Qf(t,e,r,n,i,o=!1){let s=ai(i.env),a=xc(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Vh){U.window.showErrorMessage(u.description);return}let f=await Aue();try{c=await a.parseUrl(f)}catch{U.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let l=U.Uri.parse(ra(e,r,n,!1,s,c));r===fn&&(r="a unique volume"),await nv({uri:l,type:"folder",label:`${n} in ${r} [Dev Container]`}),await dE(t,o?l.authority:!1),await tf(t,o==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function Tue(t,e){let r=ai(e.env),n=U.Uri.parse(ra(void 0,t,void 0,!0,r,void 0));await nv({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",n)}async function Due(t,e,r,n){let i=ai(n.env),o=U.Uri.parse(ra(e,t,r,!0,i,void 0));await nv({uri:o,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await U.commands.executeCommand("vscode.openFolder",o)}async function nv(t){return U.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function Qg(t,e,r,n){if(!await $o(r))return;let i,o=t.cliHost;if(o.type==="wsl"){let l=await o.toCommonURI(o.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let s=pL(e.Name,ai(t.env),i),a=await YH(r.globalStoragePath,e),c=r.extensionMode===U.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let l=U.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),u={};c?u.forceReuseWindow=!0:u.forceNewWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:s};c&&!n&&(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function Rue(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let i=await Ni(t),o=await xo(t,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw U.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:"Select the container to attach VS Code"},o=await U.window.showQuickPick(n,i);if(!o&&r()){if(!await e)throw new Error("cancel");o=await U.window.showQuickPick(n,i)}return o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Oue(t,e,r){if(!r.workspaceFolder)return Xf("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Ft.posix.isAbsolute(r.workspaceFolder))return Xf("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await sr(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),i=await Lu(e,t,n),o=await qh(e,i,r.service),s=o&&await $t(e,o);return!(s&&!await Nue(e.cliHost,n,r,s))}async function Nue(t,e,r,n){let i=[];for(let o=0;o<e.length;o++)await t.isFile(e[o])||i.push(e[o]);return i.length>0?(U.window.showErrorMessage(`The following referenced docker compose files do not exist: ${i.join(", ")}`,{modal:!0}),!1):r.devPort&&!n.Ports.find(o=>r.devPort===o.PrivatePort)?(U.window.showErrorMessage(`The port '${r.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function Xf(t,e,r){if(await U.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let i=Oe(r,e.platform),o=await e.toCommonURI(i);o&&U.window.showTextDocument(U.Uri.parse(o.toString()))}}async function A_(t,e,r,n,i){await r.createConfiguration()&&await GV(t,e,n,i)}async function GV(t,e,r,n){if([void 0,"wsl","ssh-remote"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,o=U.workspace.workspaceFolders,s=i||o&&o.length&&o[0].uri||void 0;if(s&&s.scheme!=="vscode-vfs"){let a=Oe(s,e.platform),c=Ue(e.path,a),l=await JC(e,c,di());l&&await Fue(t,l,c,e,r,n)}}var iv="showReopenInContainerNotification",zV="showReopenInContainerNotificationReset";function Lue(t){return t.globalState.update(zV,Date.now())}async function Fue(t,e,r,n,i,o){let s=t.globalState.get(zV);if(T_(t.globalState.get(iv),s)||T_(t.workspaceState.get(iv),s))return;let a=j1(n,r,e.uri),c,l="";n.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(n.platform==="win32"&&Gt(r.rootFolderPath));let u;a?r.isWorkspaceFile?u="Workspace contains a Dev Container configuration file.":u="Folder contains a Dev Container configuration file.":u="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let f="Reopen in Container",d="Clone in Volume",p="Don't Show Again...",h=r.isWorkspaceFile?`${u} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`:`${u} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${l}`,m=c?[p,d,f]:[p,f];Mue(i,e.location);let g=await U.window.showInformationMessage(h,...m);if(que(i,g===f?"reopen":g===d?"openRepository":g===p?"dontShowAgain":"cancel",e.location),g===f){if(!await U.workspace.requestWorkspaceTrust({message:nf}))return;let b=await We(t,o);if(!await kr(t,b,i))return;try{await tv(t,r,b,i,!1,{forceReuseWindow:!0})}catch(C){await No(C,"ui",i)}}else if(g===d){let w=await We(t,o),b=await kA(w.cliHost,r,w.output),C="OK",S="Cancel";(!b||C===await U.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",C,S))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Clone in Volume"},async(_,P)=>{_.report({message:"Follow the prompts at the top of the window."}),await U.commands.executeCommand(xm,c)})}else if(g===p){let w=r.isWorkspaceFile?"Any Workspace":"Any Folder",b=r.isWorkspaceFile?"Current Workspace":"Current Folder",C=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",S=await U.window.showInformationMessage(C,w,b);S===w?await t.globalState.update(iv,Date.now()):S===b&&await t.workspaceState.update(iv,Date.now())}}function Mue(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function que(t,e,r){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:r})}function T_(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function $ue(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},i=await U.window.showQuickPick(r,n);if(!i)return;let o=await We(t,e);i.detail&&await Qf(t,i.detail,fn,I_(i.detail),o)}async function jue(t){let e=await Promise.all((await KV(t)).map(async n=>{let i=await(0,x_.promisify)(ev.stat)(n.path),o=n.time;return{label:n.prefix,description:`${ul(o.getFullYear())}-${ul(o.getMonth())}-${ul(o.getDay())} ${ul(o.getHours())}:${ul(o.getMinutes())}:${ul(o.getSeconds())} - ${i.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await U.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await U.window.showTextDocument(U.Uri.file(r.path))}function ul(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function Uue(t,e,r){let n=(await KV(t)).find(i=>i.name.startsWith(e)&&i.path!==r);n?await U.window.showTextDocument(U.Uri.file(n.path)):await U.window.showInformationMessage("No previous log file found.",{modal:!0})}async function KV(t){let e=[],r=Ft.basename(t.logPath),n=Ft.dirname(Ft.dirname(Ft.dirname(t.logPath)));for(let i of(await D_(n)).sort().reverse()){let o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(i);if(o){let s=Ft.join(n,i);for(let a of await D_(s)){let c=Ft.join(s,a),l=Ft.join(c,r);for(let u of(await D_(l)).sort()){let f=Ft.join(l,u),d=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(u),p=d?new Date(`${d[1]}-${d[2]}-${d[3]}T${d[4]}:${d[5]}:${d[6]}.${d[7]}Z`):new Date(`${o[1]}-${o[2]}-${o[3]}T${o[4]}:${o[5]}:${o[6]}Z`);e.push({name:u,path:f,time:p,prefix:d?u.substr(0,d.index-1):u.substr(0,u.length-4)})}}}}return e.sort((i,o)=>i.time>o.time?-1:i.time<o.time?1:i.path.localeCompare(o.path)),e}async function D_(t){try{return await(0,x_.promisify)(ev.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
